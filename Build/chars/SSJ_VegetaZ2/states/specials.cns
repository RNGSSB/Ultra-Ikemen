					
;================================
; Special and EX moves
;================================

;===========================================================================
;---------------------------------------------------------------

;===========================================================================
; <<<<< SLASHING CHOP >>>>>
; Charge state 1 = 1300
; Charge state 2 (when hit) = 1301
; Actual attack = 1302
; Helper for repel = 1305
; Destroyed helper = 1306
; Reflect with random projectile = 1308
; Reflected projectile = 1315
; Reflected projectile explods = 1316
; Custom state when hit by slashing chop max charge = 1320
;===========================================================================

;---------------------------------------------------------------
;Focus Strike - charge state 1
;This state covers the charging aspect of the Focus Strike attack at the start.
[Statedef 1300]
type = S
movetype = I
physics = S
juggle = 10
anim = 1300
ctrl = 0
poweradd = 0
velset = 0,0
 
; These next two sctrls cover initial charge value and building it up
[State 900, starting value]
type = VarSet
trigger1 = !time
fvar(9) = 0
 
[State 900, adding to value]
type = VarAdd
trigger1 = time >= 1
fv = 9
value = 1
persistent = 1

[State 8000, flash]
type = PalFX
trigger1 = time =10 
add = 40, 30, -40
sinadd = 50,50,50,16
time = 40
 
; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && !AILevel && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x>=1)
trigger3 = time >= 8 && AILevel>0 && numenemy && (P2Dist X >50) && P2MoveType = A && P2StateType = A
value = Cond(P2Dist X < -12, 100, 105)
 
[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && !AILevel && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x<=1) 
value = Cond(P2Dist X < -12, 105, 100)

[State 900, stopping early]
type = ChangeState
trigger1 = !AILEVEL
trigger1 = time >= 8 
trigger1 = command != "holdc" || command != "holdz"
trigger2 = AILEVEL>0
trigger2 = time >= 8 
trigger2 = (P2Dist X =[-10,50]) && (P2Dist Y =[-30,50])
value = 1302

[State 900, fully charged]
type = ChangeState
trigger1 = fvar(9)>=60
value = 1302
 
;---------------------------------------------
;Focus Strike - charge state 2
;This state covers the charging aspect of the Focus Strike attack if hit
[Statedef 1301]
type = S
movetype = I
physics = S
juggle = 10
ctrl = 0
poweradd = 0
velset = 0,0
 
; This part covers the after effects of getting hit from earlier.
[state 901, no more saving hit]
type = varset
trigger1 = time = 1
var(20) = 0

[State 8000, hitsnd]
type = Playsnd
trigger1 = time = 0
value = 1301,0

[State 8000, flash]
type = PalFX
trigger1 = time%10=0
add = 150, 30, 30
sinadd = 50,50,50,16
time = 10
 
[State 901, life removal]
type = LifeAdd
trigger1 = time = 1 && !var(20)
value = -(gethitvar(damage))
kill = 1

[State 901, Killed]
type = ChangeState
trigger1 = life <= 0
value = 5950
 
; This ctrl changes the animframe back to the last active one
[State 901, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 1300
elem = var(23)
 
; This varset is the continuation of charging
[State 901, adding to charge]
type = VarAdd
trigger1 = time >= 1
fv = 9
value = 1
persistent = 1
 
; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && !AILevel && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x>=1)
trigger3 = time >= 8 && AILevel>0 && numenemy && (P2Dist X >50) && P2MoveType = A && P2StateType = A
value = Cond(P2Dist X < -12, 100, 105)
 
[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && !AILevel && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x<=1) 
value = Cond(P2Dist X < -12, 105, 100)

[State 900, stopping early]
type = ChangeState
trigger1 = !AILEVEL
trigger1 = time >= 8 
trigger1 = command != "holdc" || command != "holdz"
trigger2 = AILEVEL>0
trigger2 = time >= 8 
value = 1302
 
[State 901, fully charged]
type = ChangeState
trigger1 = fvar(9)>=60
value = 1302
 
;----------------------------------------
;Focus Attack - actual attack
[Statedef 1302]
type = S
movetype = A
physics = S
juggle = 0 ;Update
anim = 1301
ctrl = 0
velset = 0,0

;PalFX sctrls; the first removes any earlier stuff, and the second the white flash that appears if you have maxed out focus
[state 901, cancel earlier fx flash]
type = PalFx
trigger1 = time = 0
add = 0,0,0
time = 0
 
[state 901, bright flash if maxed out]
type = PalFx
triggerall = FVar(9) = 60
trigger1 = time = 1
add = 128,128,128
sinadd = -128,-128,-128,32
time = 8

[State 1302, voice]
type = null;PlaySnd
trigger1 = AnimElem = 3
value = 3,10
channel = 0

[State 1302, 2]
type = PlaySnd
trigger1 = AnimElem = 1 && (FVar(9) < 60)
value = 0,2 ;20,1

[State 1302, 2]
type = PlaySnd
trigger1 = AnimElem = 1 && (FVar(9) = 60)
value = 0,2;20,2

[State 4000, Invincible]
type = NotHitBy
trigger1 = animelemtime(1) >= 0 && animelemtime(8) < 0
value = ,NP, SP

[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(1) >= 0 && animelemtime(3) < 0
value = SCA,NA,SA,HA
time = 1

[State 1300, repel helper]
type = Helper
triggerall = !IsHelper
trigger1 = animelemtime(1) = 0
stateno = 1305
ID = 1305
name = "repel"
postype = p1
pos = 50, -40

[state 1215, Smoke FX]
type = explod
trigger1 = animelemtime(2)=1
anim = 1208;+(var(2)=0)
id = 1206
pos = 0,0  ;30,0
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

; The hitdef used depends on the how long you've been charging. In case you are wondering why there are 2 versions of each lvl's
; hitdef, the second one has been refined to compensate for hitting air opponents.
; LV 1
[State 902, 0-30]
type = HitDef
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
trigger1 = AnimElem = 2 && (FVar(9) < 60)
attr = S, NA
damage = 32,0
animtype = Hard
guardflag = M
hitflag = M
priority = 4, Hit
pausetime = 9, 9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -17,-73
hitsound   = s5, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -8.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
fall = (p2movetype=H)
 
[State 902, 0-30]
type = HitDef
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
triggerall = p2statetype = A
trigger1 = AnimElem = 2 && (FVar(9) < 60)
attr = S, NA
damage= 32,0
animtype = Hard
guardflag = A
hitflag = A
priority = 4, Hit
pausetime = 9, 9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -17,-73
hitsound   = s5, 2
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -6.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
fall = (p2movetype=H)
 
;LV 2 MAX 1-limiter
[State 902, max-charge] 
type = HitDef 
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
triggerall = ifelse(enemy,time <= 10,enemy, prevstateno != 5300,1) ;Checks if the opponent has been in the dizzy state for the past 10 ticks 
triggerall = p2stateno != 5300 ;Checks if the opponent is in the dizzy state
trigger1 = AnimElem = 2 && FVar(9) = 60
attr = S, NA
damage = 59,0
animtype = Hard
;guardflag = MA ;<-- Commented out as you will not be blocking this. This will hurt, and you will fall!
hitflag = MAF
priority = 4, Hit
pausetime = 14, 14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -17,-73
hitsound   = s5, 6
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
;p2stateno = 1320 ; <- Opponent sent to flying state
ID = 1320

; LV 2 MAX
[State 902, max-charge]
type = HitDef
triggerall = AnimElem = 2 && FVar(9) = 60
trigger1 = p2stateno = 5300 ;Checks if the opponent is in the dizzy state
trigger2 = ifelse(enemy,time <= 10,enemy, prevstateno = 5300,0)
trigger3 = NumExplod(1302)
trigger4 = p2movetype = H
attr = S, NA
damage = 59,0
animtype = Hard
;guardflag = MA ;<-- Commented out as you will not be blocking this. This will hurt, and you will fall!
hitflag = MAF
priority = 4, Hit
pausetime = 14, 14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -17,-73
hitsound   = s5, 6
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
;p2stateno = 1320 ; <- Opponent sent to flying state
ID = 1322

;Focus Limiter 2 Limiter
[State 0, Explod]
type = Explod
trigger1 = !NumExplod(1302)
trigger1 = NumTarget(1302)
anim = 1
ID = 1302
removetime = -1
removeongethit = 1
ignorehitpause = 1


[State 0, TargetState]  ;Limiter state
type = TargetState
triggerall = Numtarget(1322)
trigger1 = !(Target,ishelper)
trigger1 = movehit = 1
value = 1322
ID = 1322
ignorehitpause = 1
persistent = 0

[State 0, TargetState]  ;New state
type = TargetState
triggerall = Numtarget(1320)
trigger1 = !(Target,ishelper)
trigger1 = movehit = 1
value = 1320
ID = 1320
ignorehitpause = 1
persistent = 0



[State 902, fvar reset]
type = VarSet
trigger1 = !AnimTime
fvar(9) = 0

;Dash Cancels upon movecontact
[State 902, dash cancel back]
type = ChangeState
trigger1 = !AILevel && Movecontact && !AILevel
trigger1 = (cond(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (cond(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064))
trigger2 = AILevel>=8 && movehit
trigger3 = AILevel>=1 && moveHit && random < 355*(AIlevel ** 2 / 64.0)
value = Cond(P2Dist X < -12, 105, 100)
ignorehitpause = 1

[State 902, dash cancel forward]
type = ChangeState
trigger1 = !AILevel &&Movecontact
trigger1 =  (cond(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (cond(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016))
trigger2 = AILevel>=8 && moveguarded 
trigger3 = AILevel>=1 && moveguarded && random < 425*(AIlevel ** 2 / 64.0)
value = Cond(P2Dist X < -12, 100, 105)
ignorehitpause = 1

[State 902, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------
;Hit by Focus
[Statedef 1320]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0 ;Update
facep2 = 1
 
[state 1320, changeanim2]
type = changeanim2
trigger1 = !time
value = 651
ignorehitpause = 1

[state 1320, velset]
type = velset    ;Add this
trigger1 = time = 1
x = -20

[state 1320, ScreenBound]
type = ScreenBound ;Falling out of the screen
trigger1 = !alive
value  = 0

[State 9011, ChangeState]
type = changeState
triggerall = alive
triggerall = Vel X != 0 ;Update
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1321

[State 9011, ChangeState]
type = changeState
triggerall = !alive
triggerall = Vel X != 0 ;Update
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1323
;-------------------------------------
;Hit Wall
[Statedef 1321]
type = A
movetype = H
physics = N
velset = 0,0 
ctrl = 0
facep2 = 1

[state 1321, envshake]
type = envshake
trigger1 = !time
time = 10
ampl = 4
freq = 60


[state 1321, changeanim]
type = changeanim
trigger1 = time = 2
value = 5051

[state 1321, changeanim]
type = changeanim 
triggerall = anim = 5051
trigger1 = animtime = -1 ;Freezes opponent in last frame of animation
value = anim
elem = animelemno(0)

[state 1321, velset]
type = velset
trigger1 = time = 3
x = 1
y = -5

[state 1321, veladd]
type = veladd
trigger1 = time >= 3
y = .35

[state 1321, posset]
type = posset
trigger1 = pos y > 0
y = 0


[State 9011, ChangeState]
type = changeState
triggerall = anim = 5051
trigger1 = pos y >= 0 && vel y > 0
value = 5300
;-------------------------------------
;Focus Limiter
[Statedef 1322]
type = A
movetype = H
physics = N
anim = ifelse(selfanimexist(5937),5937,5030)
ctrl = 0
velset = -6, -5
facep2 = 1


[State 0, SelfState]
type = SelfState
trigger1 = Time >= 10
trigger1 = command = "recovery"
value = 5210

[State 0, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= -3)
trigger1 = command = "recovery"
value = 5200
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.55
 
[State 9011, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100
;---------------------------------------------------------------------
;Wallbounce Kill
[Statedef 1323]
type = A
movetype = H
physics = N

[state 1323, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = Vel X = 0
x = -5



[state 1320, ScreenBound]
type = ScreenBound ;Falling out of the screen
trigger1 = Pos X =[-640,640]
value  = 0

;----------------Prevent Freezing after Ko----------------------------
[state 1321, envshake]
type = envshake
triggerall = !alive
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0
time = 20
ampl = 6
freq = 60

[State 182, 1]
type = screenbound
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
movecamera = 0,0
value = 1

[State 49999, 1]
type = LifeSet
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
value = 0

[State 49999, 1]
type = PosSet
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
y = 9000

[State 49999, 5]
type = ChangeAnim2
triggerall = anim != 15999
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
value = 15999

[State 182, 1]
type = screenbound
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
movecamera = 0,0
value = 1

[State 49999, 1]
type = PosSet
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
y = 9000

[State 49999, 5]
type = ChangeAnim2
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
value = 15999

[State 9011, SelfState]
type = ChangeState
triggerall = !alive
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
value = 5150
;----------------------------------------------------
;Super Dash (light)
[Statedef 1000]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
juggle = ifelse(prevstateno = 1100,2,4)

[state 1100, changeanim]
type = changeanim
triggerall = !time 
trigger1 = var(35) = 0
value = 1000

[state 1100, changeanim]
type = changeanim
triggerall = !time 
trigger1 = var(35) = 1
value = 1003

[State 3101, dust FX]
type = helper
triggerall = AnimElemTime(2) = 0
trigger1 = (time%13)=0
helpertype = normal
stateno = 10000
ID = 10000
name = "run_dust"
postype = p1
pos = 0,0
ownpal = 1

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 = time > 4 
anim = 1206
id = 1206
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 1000, snd]
type = playsnd
triggerall = prevstateno != 1100
trigger1 = time = 5
value = 300,0+random%2
channel = 0

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = time = 5
value = 1111,0+random%2
channel = 0

[State 1000, snd]
type = playsnd
triggerall = prevstateno != 1100
trigger1 = !time
value = 100,0

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = !time
value = 1100,0



[state 1000, velset]
type = velset
trigger1 = anim < 1002 || anim = 1003 || anim = 1004
x = ifelse(prevstateno = 1100,14,6)

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) <= 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 150
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 250,200,0
palpostbright= 250,200,0
trans= add

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) > 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 150
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,250,200
palpostbright= 0,250,200
trans= add

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = C,AA

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = anim = 1001 || anim = 1004
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 3,3
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s1000, 6
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
guard.ctrltime = 20
ground.velocity = -2
ground.cornerpush.veloff = 0
guard.velocity = -7
airguard.velocity = -9,-4
air.type = High	
air.velocity = -4,-4
air.hittime = 22
fall.recover = 0
air.animtype = back
ground.cornerpush.veloff = 0
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1001

[State 1000, changeanim]
type = changeanim
triggerall = anim = 1000 || anim = 1003
trigger1 = time >= 4
value = ifelse(var(35) = 0,1001,1004)



[State 1000, velmul]
type = velmul
trigger1 = anim = 1002
x = .87

[state 1000, attackdist]
type = attackdist
trigger1 = anim = 1002 && animelemtime(1) = 0
trigger2 = movecontact
value = 0
ignorehitpause = 1

[state 4100, flash white]
type = palfx
triggerall = var(35) = 1
trigger1 = time >= 9 
trigger1 = !movecontact
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[state 4100, flash white]
type = palfx
triggerall = var(35) = 1
trigger1 = movecontact = 1
trigger1 = time <= 9
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[State 1000, changeanim]
type = changeanim
triggerall = anim = 1004
trigger1 = movecontact = 2
value = 1001
elem = animelemno(1)
ignorehitpause = 1

[State 1000, changeanim]
type = changeanim
triggerall = anim = 1001 || anim = 1004
trigger1 = !movehit
trigger1 = time > 10
value = 1002

[state 1000, varset]
type = varset
triggerall = var(35) = 1
trigger1 = anim = 1002
var(35) = 0

[State 1000, changestate]
type = changeanim
triggerall = prevstateno != 1100
triggerall = anim = 1001 || anim = 1004
triggerall = movehit
trigger1 = time > 10
value = 1050


[State 1000, changestate]
type = changestate
triggerall = prevstateno = 1100
triggerall = anim = 1001 || anim = 1004
triggerall = movehit
trigger1 = time > 10
value = 1050

[State 100, snd]
type = playsnd
triggerall = anim = 1002
trigger1 = animelem = 1
value = 5,8
persistent = 0

;-------------------------------
;Success
[state 1050, velset]
type = velmul
trigger1 = anim = 1050
trigger1 = animelem = 1
x = .25

[State 200, 1]
type = HitDef
triggerall = anim = 1050
trigger1 = animelem = 5 
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Light
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -1,-4
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-4
air.type = High	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1000


[State 200, 1]
type = HitDef
triggerall = anim = 1050
trigger1 =  animelem = 9 
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 6,6
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -1,-5
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -3,-5
air.hittime = 12
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = anim = 1050
triggerall = prevstateno != 1100
trigger1 =  animelem = 16
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 9,9
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -10,-4
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = -9,-4
air.hittime = 12
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1098


[State 200, 1]
type = HitDef
triggerall = anim = 1050
triggerall = prevstateno = 1100
trigger1 =  animelem = 16
attr = S, SA
damage = ceil(ifElse(fvar(11) *30 < 4, 4, fvar(11) * 30)), 10
animtype = DiagUP	
guardflag = MA
hitflag = MAF
pausetime = 9,9
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -15,-10
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -15,-10
air.hittime = 12
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
;p2stateno = 1060
ID = 1060

[State 1000, attackdist]
type = attackdist
trigger1 = anim = 1050 && animelemtime(17) = 0
value = 0


[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(1060)
trigger1 = !(Target,ishelper)
trigger1 = movehit
value = 1060
ID = 1060
ignorehitpause = 1
persistent = 0


[State 240, 1]
type = PlaySnd
triggerall = anim = 1050
trigger1 = animelem = 4 || animelem= 8 || animelem = 15
value = 0, 5

[State 240, 1]
type = PlaySnd
triggerall = anim = 1050
trigger1 = animelem = 15
value = 1000, 3+random%3
channel = 0


[State 1000, changestate]
type = changestate
trigger1 = anim = 1002
trigger1 = animtime = 0
trigger2 = anim = 1050
trigger2 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------------------
;Super Dash (medium)
[Statedef 1001]
type = S
movetype = A
physics = N
anim = 1000
ctrl = 0
velset = 0,0
juggle = 4


[State 3101, dust FX]
type = helper
triggerall = AnimElemTime(2) = 0
trigger1 = (time%13)=0
helpertype = normal
stateno = 10000
ID = 10000
name = "run_dust"
postype = p1
pos = 0,0
ownpal = 1

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 = time > 4 
anim = 1206
id = 1206
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 1000, snd]
type = playsnd
triggerall = prevstateno != 1100
trigger1 = time = 5
value = 300,0+random%2
channel = 0

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = time = 5
value = 1111,0+random%2
channel = 0

[State 1000, snd]
type = playsnd
triggerall = prevstateno != 1100
trigger1 = !time
value = 100,0

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = !time
value = 1100,0



[state 1000, velset]
type = velset
trigger1 = anim = 1000 || anim = 1001
x = ifelse(prevstateno = 1100,14,10.5)

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 60
timegap= 1
framegap= 4
length= 20
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = C,AA

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = anim = 1001
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 3,3
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s1000, 6
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
guard.ctrltime = 30
ground.velocity = -2
ground.cornerpush.veloff = 0
guard.velocity = -11
airguard.velocity = -9,-4
air.type = High	
air.velocity = -4,-4
air.hittime = 22
fall.recover = 0
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1001

[State 1000, changeanim]
type = changeanim
triggerall = anim = 1000
trigger1 = time >= 4
value = 1001




[State 1000, velmul]
type = velmul
trigger1 = anim = 1002
x = .87

[state 1000, attackdist]
type = attackdist
trigger1 = anim = 1002 && animelemtime(1) = 0
trigger2 = movecontact
value = 0
ignorehitpause = 1

[State 1000, changeanim]
type = changeanim
triggerall = anim = 1001
trigger1 = !movehit
trigger1 = time > 15
value = 1002



[State 1000, changestate]
type = changeanim
triggerall = anim = 1001
triggerall = movehit
trigger1 = time > 10
value = 1050

[State 100, snd]
type = playsnd
triggerall = anim = 1002
trigger1 = animelem = 1
value = 5,8
persistent = 0

;-------------------------------
;Success
[state 1050, velset]
type = velmul
trigger1 = anim = 1050
trigger1 = animelem = 1
x = .25

[State 200, 1]
type = HitDef
triggerall = anim = 1050
trigger1 = animelem = 5 
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Light
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -1,-4
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1000


[State 200, 1]
type = HitDef
triggerall = anim = 1050
trigger1 =  animelem = 9 
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 6,6
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -1,-5
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -3,-5
air.hittime = 12
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = anim = 1050
triggerall = prevstateno != 1100
trigger1 =  animelem = 16
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 9,9
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -10,-4
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -9,-4
air.hittime = 12
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = anim = 1050
triggerall = prevstateno = 1100
trigger1 =  animelem = 16
attr = S, SA
damage = ceil(ifElse(fvar(11) *30 < 4, 4, fvar(11) * 30)), 10
animtype = DiagUP	
guardflag = MA
hitflag = MAF
pausetime = 9,9
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -15,-10
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -15,-10
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
;p2stateno = 1060
ID = 1060

[State 1000, attackdist]
type = attackdist
trigger1 = anim = 1050 && animelemtime(17) = 0
value = 0

[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(1060)
trigger1 = !(Target,ishelper)
trigger1 = movehit
value = 1060
ID = 1060
ignorehitpause = 1
persistent = 0


[State 240, 1]
type = PlaySnd
triggerall = anim = 1050
trigger1 = animelem = 4 || animelem= 8 || animelem = 15
value = 0, 5

[State 240, 1]
type = PlaySnd
triggerall = anim = 1050
trigger1 = animelem = 15
value = 1000, 3+random%3
channel = 0


[State 1000, changestate]
type = changestate
trigger1 = anim = 1002
trigger1 = animtime = 0
trigger2 = anim = 1050
trigger2 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------------------
;Super Dash (heavy)
[Statedef 1002]
type = S
movetype = A
physics = N
anim = 1000
ctrl = 0
velset = 0,0
juggle = 4



[State 3101, dust FX]
type = helper
triggerall = AnimElemTime(2) = 0
trigger1 = (time%13)=0
helpertype = normal
stateno = 10000
ID = 10000
name = "run_dust"
postype = p1
pos = 0,0
ownpal = 1

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 = time > 4 
anim = 1206
id = 1206
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 1000, snd]
type = playsnd
triggerall = prevstateno != 1100
trigger1 = time = 5
value = 300,0+random%2
channel = 0

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = time = 5
value = 1111,0+random%2
channel = 0

[State 1000, snd]
type = playsnd
triggerall = prevstateno != 1100
trigger1 = !time
value = 100,0

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = !time
value = 1100,0



[state 1000, velset]
type = velset
trigger1 = anim = 1000 || anim = 1001
x = ifelse(prevstateno = 1100,14,14)

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 60
timegap= 1
framegap= 4
length= 20
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = C,AA

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = anim = 1001
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 3,3
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s1000, 6
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
guard.ctrltime = 40
ground.velocity = -7
ground.cornerpush.veloff = 0
guard.velocity = -11
airguard.velocity = -9,-4
air.type = High	
air.velocity = -4,-4
air.hittime = 22
fall.recover = 0
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1001

[State 1000, changeanim]
type = changeanim
triggerall = anim = 1000
trigger1 = time >= 4
value = 1001


[State 1000, changeanim]
type = changeanim
triggerall = anim = 1001
trigger1 = !movehit
trigger1 = time > 20
value = 1002

[State 1000, velmul]
type = velmul
trigger1 = anim = 1002
x = .87

[state 1000, attackdist]
type = attackdist
trigger1 = anim = 1002 && animelemtime(1) = 0
trigger2 = movecontact
value = 0
ignorehitpause = 1

[State 1000, changestate]
type = changeanim
triggerall = anim = 1001
triggerall = movehit
trigger1 = time > 10
value = 1050

[State 100, snd]
type = playsnd
triggerall = anim = 1002
trigger1 = animelem = 1
value = 5,8
persistent = 0

;-------------------------------
;Success
[state 1050, velset]
type = velmul
trigger1 = anim = 1050
trigger1 = animelem = 1
x = .25

[State 200, 1]
type = HitDef
triggerall = anim = 1050
trigger1 = animelem = 5 
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Light
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -1,-4
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
getpower= 20, 35
givepower = 35,35
yaccel = 0.5
ID = 1000


[State 200, 1]
type = HitDef
triggerall = anim = 1050
trigger1 =  animelem = 9 
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 6,6
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -1,-5
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -3,-5
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = anim = 1050
triggerall = prevstateno != 1100
trigger1 =  animelem = 16
attr = S, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 9,9
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -10,-4
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -9,-4
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098


[State 200, 1]
type = HitDef
triggerall = anim = 1050
triggerall = prevstateno = 1100
trigger1 =  animelem = 16
attr = S, SA
damage = ceil(ifElse(fvar(11) *30 < 4, 4, fvar(11) * 30)), 10
animtype = DiagUP	
guardflag = MA
hitflag = MAF
pausetime = 9,9
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -15,-10
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -15,-10
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
;p2stateno = 1060
ID = 1060

[State 1000, attackdist]
type = attackdist
trigger1 = anim = 1050 && animelemtime(17) = 0
value = 0


[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(1060)
trigger1 = !(Target,ishelper)
trigger1 = movehit
value = 1060
ID = 1060
ignorehitpause = 1
persistent = 0


[State 240, 1]
type = PlaySnd
triggerall = anim = 1050
trigger1 = animelem = 4 || animelem= 8 || animelem = 15
value = 0, 5

[State 240, 1]
type = PlaySnd
triggerall = anim = 1050
trigger1 = animelem = 15
value = 1000, 3+random%3
channel = 0


[State 1000, changestate]
type = changestate
trigger1 = anim = 1002
trigger1 = animtime = 0
trigger2 = anim = 1050
trigger2 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------------------
;Super Dash Success
[Statedef 1050]
type = S
movetype = A
physics = N
anim = 1020
ctrl = 0
juggle = 0

[state 1050, velset]
type = velmul
trigger1 = !time
x = .25

[state 1050, velset]
type = velset
triggerall = anim = 1020
trigger1 = animelemtime(9) >= 0 && animelemtime(28) <= 0
x = 5
y = -4

[State 1200, statetypeset]
type = statetypeset
trigger1 = anim = 1020 && animelemtime(9) = 0
statetype = A
physics = N

[State 1000, snd]
type = playsnd
triggerall = anim != 1021
trigger1 = animelem = 5
value = 0,2

[State 1000, snd]
type = playsnd
triggerall = anim != 1021
trigger1 = animelem = 10
value = 0,5

[State 1000, snd]
type = playsnd
trigger1 = animelem = 17
value = 0,5

[State 1000, snd]
type = playsnd
trigger1 = animelem = 26
value = 0,5

[State 420, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
;damage = 38,0
damage = ceil(ifElse(fvar(11) * 20 < 10, 10, fvar(11) * 20)), 0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 6,6
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-65
hitsound   = s5, 2
guardsound = S6,1
animtype = Up
ground.type = High
ground.slidetime = 12
ground.hittime = 12
fall.recover = 0
ground.velocity = -3,-7
guard.velocity = -9
air.velocity = ifelse(p2movetype=H,-3,-1),ifelse(p2movetype=H,-5,-10)
fall = 1
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.45

[State 200, 1]
type = HitDef
triggerall = anim = 1020
trigger1 =  animelem = 11
attr = S, SA
damage = ceil(ifElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 6,6
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -5,-7
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -5,-7
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = anim = 1020
trigger1 =  animelem = 18
attr = S, SA
damage = ceil(ifElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 6,6
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -5,-7
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -5,-7
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = anim = 1020
trigger1 =  animelem = 26
attr = S, SA
damage = ceil(ifElse(fvar(11) * 25 < 10, 10, fvar(11) * 25)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 6,6
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -3,-3
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 753

[State 1000, attackdist]
type = attackdist
trigger1 = anim = 1050 && animelemtime(27) = 0
value = 0


[state 1020, posadd]
type = posadd
triggerall = anim = 1020
trigger1 = animelemtime(31) = 0
x = -18
y = 18

[state 1020, targetstate]
type = targetstate
triggerall = NumTarget(753)
trigger1 = !(Target,ishelper)
trigger1 = movehit = 1
value = 1060
persistent = 0
ignorehitpause = 1

[state 1050, velset]
type = veladd
triggerall = anim = 1020
trigger1 = animelemtime(28) >= 0 
y = .40

[state 1050, velset]
type = velset
triggerall = anim = 1020
trigger1 = animelemtime(28) >= 0 
x = 5

;-------------Landing----------------

[State 1020, changeanim]
type = changeanim
triggerall = anim = 1020
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1021
 
[State 1200, statetypeset]
type = statetypeset
trigger1 = anim = 1021
statetype = S
physics = S

[state 1020, velset]
type= velset
trigger1 = anim = 1021
y = 0

[state 311, posset]
type = posset
trigger1 = Pos Y >= 0
y = 0

[state 52, Land FX]
type = helper
trigger1 = anim = 1021 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 1021 && animelemtime(1) = 1
value = 40, 0

[State 1000, changestate]
type = changestate
trigger1 = anim = 1021 && animtime = 0
value = 0
ctrl = 1
;----------------------------
;Hit by Enhanced Superdash
[statedef 1060]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
velset  = 0,0
facep2 = 1

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -10
y = -7.5
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35

[state 1060, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy, var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100
;--------------------------------------------
;Saiyan Step
[Statedef 1100]
type = S 
movetype = A
physics = S
anim = 1100
ctrl = 0


[state 1100, varset]
type = varset
triggerall = !time 
triggerall = var(51) = 1
trigger1 = prevstateno = [1000,1050]
trigger2 = prevstateno = [1400,1422]
trigger3 = prevstateno = 2000
trigger4 = prevstateno = [2400,2410]
var(35) = 1

[state 1100, changeanim]
type = changeanim
triggerall = !time 
trigger1 = var(35) = 0
value = 1100

[state 4100, flash white]
type = palfx
triggerall = !time 
triggerall = var(51) = 1
trigger1 = prevstateno = [1000,1050]
trigger2 = prevstateno = [1400,1422]
trigger3 = prevstateno = 2000
trigger4 = prevstateno = [2400,2410]
add = 255,255,255
time = 3


[state 1100, SSG]
type = changeanim
triggerall = !time 
trigger1 = var(35) = 1
value = 1102

[state 1100, removeexplod]
type = removeexplod
trigger1 = !time
id = 90030114

[state 1100, varset]
type = varset
triggerall = !time
trigger1 = var(35) = 1
var(19) = 0

[state 1100, varadd]
type = varadd
trigger1 = !time
var(28) = 2

[state 1100, varadd]
type = varadd
triggerall = var(51) = 2
triggerall = !time
trigger1 = prevstateno = [1000,1050]
trigger2 = prevstateno = [1400,1422]
trigger3 = prevstateno = 2000
trigger4 = prevstateno = [2400,2410]
var(52) = -200

[State 8000, blue flash]
type = palfx
triggerall = !time
triggerall = var(51) = 2
trigger1 = prevstateno = [1000,1050]
trigger2 = prevstateno = [1400,1422]
trigger3 = prevstateno = 2000
trigger4 = prevstateno = [2400,2410]
add = 0, 100, 240
time =10
ignorehitpause = 1

[state 1100, nothitby]
type = nothitby
trigger1 = time >= 3
value = A,AP

[state 1100, prevstateno]
type = playsnd
triggerall = animelem = 1
trigger1 = prevstateno = [1000,1050]
trigger2 = prevstateno = [1400,1422]
trigger3 = prevstateno = 2000
trigger4 = prevstateno = [2400,2410]
value = 3100,1

[State 200, land]
type = PlaySnd
trigger1 = !time
value = 1100, 2

[state 1100, distance]
type = attackDist
trigger1 = !time
value = 0

[state 1100, teleport]
type = null
triggerall = anim != 1101
triggerall = NumExplod(90000230) || NumExplod(90000235) || NumExplod(90000240) || NumExplod(90000245) || NumExplod(90000250) || NumExplod(90000255)
triggerall = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90000024)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90000026)))
trigger1 = time > 6
value = 1101

;---------------------Normal--------------------
[State 200, land]
type = PlaySnd
trigger1 = animelemtime(3) = 1
value = 40, 0

[state 52, Land FX]
type = helper
trigger1 = animelemtime(3) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999


[State 1100, velset]
type = velset
trigger1 = animelemtime(1) >= 0
x = 5


[State 1100, velset]
type = velmul
trigger1 = animelemtime(3) >= 0
x = .50


[state 4100, flash white]
type = palfx
triggerall = var(35) = 1
trigger1 = animtime = -1
add = 255,255,255
time = 1
ignorehitpause = 1
persistent = 0

[State 1100, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Straight Shooter
[Statedef 1200]
type = S 
movetype = A
physics = S
juggle = 0
anim = ifelse(prevstateno = 1100,ifelse(var(35) = 0,1250,1203),1200)
ctrl = 0



[State 1000, whoosh]
type = playsnd
trigger1 = time = 5
value = 1200,0

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = !time
value = 1100,0

[State 1200, coming through]
type = playsnd
triggerall = prevstateno != 1100
trigger1 = time = 5
value= 1400, 13+random%2
channel = 0

[State 1200, eat this and die!]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = !time 
value= 1400, 12
channel = 0

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) <= 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 130
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 250,200,0
palpostbright= 250,200,0
trans= add

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) > 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 130
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,250,200
palpostbright= 0,250,200
trans= add

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 =  time > 4
anim = 1206
id = 1206
pos = 0,8
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[state 1200, projectile invul]
type = nothitby
trigger1 = anim = 1201 || anim = 1204
trigger2 = (anim = 1250 || anim = 1203) && prevstateno = 1100
value = ,AP
;---------------------
;Start
[State 1100, velset]
type = statetypeset
trigger1 = time >= 3
statetype = A
physics = N

[State 1100, velset]
type = posadd
triggerall = anim = 1200 || anim = 1203 || anim = 1250
trigger1 = time = 4
y = -6

[State 1100, velset]
type = velset
triggerall = prevstateno != 1100
triggerall = anim = 1200 
trigger1 = time >= 4
x = -3

[State 1100, velset]
type = veladd
triggerall = prevstateno = 1100
triggerall = anim = 1250 || anim = 1203
trigger1 = time >= 4
x = 3

[State 1200, changeanim]
type = changeanim
triggerall = anim = 1200 || anim = 1250 || anim = 1203
trigger1 = animtime = 0
value = ifelse(var(35) = 0,1201,1204)


;---------------------
;Attack
[State 1100, velset]
type = velset
trigger1 = time = 12
x = 12

[State 200, 1]
type = HitDef
triggerall = !movecontact
triggerall = anim = 1201 || anim = 1204
trigger1 = prevstateno != 1100
trigger1 = time < 26
attr = A, SA
damage = ceil(ifElse(fvar(11) * 50 < 4, 4, fvar(11) * 50)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 4,4
guard.pausetime = 13,13
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s1200, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -7
guard.velocity = -5
airguard.velocity = -6,-6
air.type = High
fall = 1	
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5


[State 200, 1]
type = HitDef
triggerall = !movecontact
triggerall = anim = 1201 || anim = 1204
trigger1 = prevstateno = 1100
trigger1 = time < 26
attr = A, SA
damage = ceil(ifElse(fvar(11) * 20 < 4, 4, fvar(11) * 20)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 13,13
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s1200, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.type = High
fall = 1	
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
kill = 0
yaccel = 0.5

[state 4100, flash white]
type = palfx
triggerall = var(35) = 1
trigger1 = time = 24
trigger1 = !movecontact
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[state 4100, flash white]
type = palfx
triggerall = var(35) = 1
trigger1 = movecontact = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[State 1200, changeanim]
type = changeanim
triggerall = anim = 1204
trigger1 = moveguarded = 2
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1201
elem = animelemno(0)
ignorehitpause = 1


[State 1200, changeanim]
type = changeanim
triggerall = prevstateno != 1100
triggerall = anim = 1201 || anim = 1204
trigger1 = time >= 20
value = 1210

[State 1200, changeanim]
type = changeanim
triggerall = prevstateno = 1100
triggerall = anim = 1201 || anim = 1204
trigger1 = time >= 26
value = 1210

;----------------------
;End
[State 1200, changeanim]
type = changeanim
triggerall = anim = 1210
trigger1 = pos Y >= 0 && Vel Y > 0
value = 1021

;-----------------------------------




[State 1100, velset]
type = velset
trigger1 = anim = 1210
y = 1

[state 1200, velmul]
type = velmul
trigger1 = anim = 1210 || anim = 1021
x = .96
;------------------------
;Land
[State 1200, velset]
type = velset
trigger1 = anim = 1021
y = 0

[state 1200, turn]
type = turn
trigger1 =  anim = 1021 && animelemtime(1) = 0
trigger1 = p2dist X < -12

[State 1200, statetypeset]
type = statetypeset
trigger1 = anim = 1021
statetype = S
physics = S

[State 1100, velset]
type = posset
trigger1 = pos y > 0
y = 0

[state 52, Land FX]
type = helper
trigger1 = anim = 1021 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 1021 && animelemtime(1) = 1
value = 40, 0

[state 1100, distance]
type = attackDist
trigger1 = anim = 1021
value = 0



[state 1202, targetstate]
type = targetstate
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1202
ignorehitpause = 1
persistent = 0


[state 1251, targetstate]
type = null
triggerall = prevstateno = 1100
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1251
ignorehitpause = 1
persistent = 0

[State 1200, changestate]
type = changestate
triggerall = prevstateno != 1100
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
ignorehitpause = 1
value = 1201


[State 1200, changestate]
type = changestate
triggerall = prevstateno = 1100
trigger1 = movehit =1
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1230
ignorehitpause = 1


[State 1200, changestate]
type = changestate
trigger1 = moveguarded
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1203


[State 1200, changestate]
type = changestate
triggerall = anim = 1021
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Straight Shooter Success
[Statedef 1201]
type = A
movetype = A
physics = N
anim = 1201
ctrl = 0

[state 1201, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1201, velset]
type = velset
trigger1 = !time
y = 0

[State 1200, changestate]
type = changestate
triggerall = time < 2
trigger1 = p2stateno != 1202
value = 1203
ignorehitpause = 1

[state 1201, playerpush]
type = playerpush
trigger1 = p2bodydist X > -80
value = 0

[State 1253, velset]
type = velset
trigger1 = p2bodydist X < -80
trigger1 = time < 40
trigger2 = time = 15
x = .3

[State 1200, changeanim]
type = changeanim
triggerall = anim = 1201
trigger1 = Vel X = 6
value = 1210

[State 1253, velset]
type = velset
triggerall = anim = 1201
trigger1 = time >=40
x = 6

;----------------------
;End
[State 1200, changeanim]
type = changeanim
triggerall = anim = 1210
trigger1 = pos Y >= 0 && Vel Y > 0
value = 1021



[State 1100, velset]
type = velset
trigger1 = anim = 1210 && prevstateno = 1200
y = 1

[State 1100, velset]
type = velset
trigger1 = anim = 1210 && prevstateno = 1204
y = 7

[state 1100, veladd]
type = veladd
trigger1 = anim = 1210 && prevstateno = 1204 
y = .40

[state 1200, velmul]
type = velmul
trigger1 = anim = 1210 && prevstateno = 1204 
x = .94
;------------------------
;Land
[State 1200, velset]
type = velset
trigger1 = anim = 1021
y = 0

[state 1200, turn]
type = turn
triggerall = p2dist X < -12
trigger1 =  anim = 1021 && animelemtime(1) = 0

[State 1200, statetypeset]
type = statetypeset
trigger1 = anim = 1021
statetype = S
physics = S

[State 1100, velset]
type = posset
trigger1 = pos y > 0
y = 0

[state 52, Land FX]
type = helper
trigger1 = anim = 1021 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 1021 && animelemtime(1) = 1
value = 40, 0

[state 1100, distance]
type = attackDist
trigger1 = anim = 1021
value = 0

[state 1100, distance]
type = attackDist
trigger1 = !time
value = 0

[State 1200, changestate]
type = changestate
triggerall = anim = 1021
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------
;Hit by Straight Shooter
[statedef 1202]
type = A
movetype = H
physics = N
anim = 5030
ctrl = 0
facep2 = 1

[state 1202, changeanim2]
type = changeanim
trigger1 = selfanimexist(5052) && !time
value = 5052

[state 1202, posset]
type = posset
trigger1 = !time
y = enemy, pos Y

[state 1202, posset]
type = posadd
triggerall = anim = 5052
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
x = 20

[state 1202, playerpush]
type = playerpush
trigger1 = !time
value = 0

[State 4005, vel]
type = velset
trigger1 = !time
x = 0
y = 0
persistent = 0


 
[State 9011, VelAdd]
type = VelAdd
trigger1 =  time > 50
y = 0.65


[state 1060, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100
;--------------------------------------------
;Straight Shooter Blocked
[Statedef 1203]
type = A
movetype = A
physics = A
anim = 1221
ctrl = 0


[state 1201, velset]
type = velset
trigger1 = time = 0
x = -.5
y = -7


[state 1100, distance]
type = attackDist
trigger1 = !time
value = 0

[State 1200, changestate]
type = changestate
trigger1 = Pos Y >= 0 && vel y > 0
value = 52
ctrl = 1
;--------------------------------------------
;Air Straight Shooter
[Statedef 1204]
type = A
movetype = A
physics = N
velset = 0,0
juggle = 0
anim = 1202
ctrl = 0



[State 1000, whoosh]
type = playsnd
trigger1 = time = 5
value = 1200,0

[State 1200, coming through]
type = playsnd
triggerall = prevstateno != 1100
trigger1 = time = 5
value= 1400, 13+random%2
channel = 0

[State 1200, eat this and die!]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = !time 
value= 1400, 12
channel = 0

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 160
timegap= 1
framegap= 4
length= 20
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 =  time > 4
anim = 1206
id = 1206
pos = 0,8
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[state 1200, projectile invul]
type = nothitby
trigger1 = anim = 1201
value = SCA,AP
;---------------------
;Start


[State 1100, velset]
type = posadd
triggerall = anim = 1200 || anim = 1250
trigger1 = time = 4
y = -6

[State 1100, velset]
type = velset
triggerall = prevstateno != 1100
triggerall = anim = 1200
trigger1 = time >= 4
x = -3

[State 1100, velset]
type = veladd
triggerall = prevstateno = 1100
triggerall = anim = 1250
trigger1 = time >= 4
x = 3

[State 1200, changeanim]
type = changeanim
triggerall = anim = 1202
trigger1 = animtime = 0
value = 1201


;---------------------
;Attack
[State 1100, velset]
type = velset
trigger1 = time = 8
x = 12

[State 200, 1]
type = HitDef
triggerall = !movecontact
triggerall = anim = 1201
trigger1 = prevstateno != 1100
attr = A, SA
damage = ceil(ifElse(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 13,13
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s1200, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -7
guard.velocity = -5
airguard.velocity = -6,-6
air.type = High
fall = 1	
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5

[State 200, 1]
type = HitDef
triggerall = !movecontact
triggerall = anim = 1201
trigger1 = prevstateno = 1100
attr = A, SA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 13,13
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = s1200, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.type = High
fall = 1	
air.velocity = -4,-4
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
kill = 0
yaccel = 0.5




[State 1200, changeanim]
type = changeanim
triggerall = prevstateno != 1100
triggerall = anim = 1201
trigger1 = time >= 20
value = 1210

[State 1200, changeanim]
type = changeanim
triggerall = prevstateno = 1100
triggerall = anim = 1201
trigger1 = time >= 26
value = 1210

;----------------------
;End
[State 1200, changeanim]
type = changeanim
triggerall = anim = 1210
trigger1 = pos Y >= 0 && Vel Y > 0
value = 1021

;-----------------------------------


[State 1100, velset]
type = velset
trigger1 = anim = 1210
y = 5

[state 1200, veladd]
type = veladd
trigger1 = anim = 1210 
y = 2

[state 1200, velmul]
type = velmul
trigger1 = anim = 1210 
x = .98
;------------------------
;Land
[State 1200, velset]
type = velset
trigger1 = anim = 1021
y = 0

[state 1200, turn]
type = turn
triggerall = p2dist X < -12
trigger1 =  anim = 1021 && animelemtime(1) = 0

[State 1200, statetypeset]
type = statetypeset
trigger1 = anim = 1021
statetype = S
physics = S

[State 1100, velset]
type = posset
trigger1 = pos y > 0
y = 0

[state 52, Land FX]
type = helper
trigger1 = anim = 1021 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 1021 && animelemtime(1) = 1
value = 40, 0

[state 1100, distance]
type = attackDist
trigger1 = anim = 1021
value = 0





[state 300, targetstate]
type = targetstate
triggerall = prevstateno != 1100
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1202
ignorehitpause = 1
persistent = 0

[state 300, targetstate]
type = targetstate
triggerall = prevstateno = 1100
triggerall = var(41) = 1
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1202
ignorehitpause = 1
persistent = 0



[state 300, targetstate]
type = targetstate
triggerall = prevstateno = 1100
triggerall = target, stateno = 1251
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1251
ignorehitpause = 1
persistent = 0

[State 1200, changestate]
type = changestate
triggerall = prevstateno != 1100
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
ignorehitpause = 0
value = 1201

[State 1200, changestate]
type = changestate
triggerall = prevstateno = 1100
triggerall = target, stateno = 1202
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
ignorehitpause = 1
value = 1201

[State 1200, changestate]
type = changestate
triggerall = prevstateno = 1100
triggerall = target, stateno = 1202
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1253
ignorehitpause = 1


[State 1200, changestate]
type = changestate
trigger1 = moveguarded
value = 1203




[State 1200, changestate]
type = changestate
triggerall = anim = 1021
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Enhanced Straight Shooter Success
[Statedef 1230]
type = A
movetype = A
physics = N
anim = 1201
ctrl = 0

[state 1230, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1201, velset]
type = velset
trigger1 = !time
y = 0

[State 1200, changestate]
type = changestate
triggerall = time < 2
trigger1 = p2stateno != 1202
value = 1203
ignorehitpause = 1

[state 1201, playerpush]
type = playerpush
trigger1 = time < 10
value = 0


[State 1253, velset]
type = velset
triggerall = anim = 1201
trigger1 = p2bodydist X < -50
trigger1 = time < 40
trigger2 = time = 15
x = .3

[State 1200, changeanim]
type = changeanim
triggerall = anim = 1201
trigger1 = time = 35
value = 1230


[state 1230, woosh]
type = playsnd
triggerall = anim = 1230
trigger1 = animelem = 4
value = 1230,0

[State 200, 1]
type = HitDef
triggerall = anim = 1230
trigger1 = animelem = 5 
attr = A, SA
damage = ceil(ifElse(fvar(11) * 40 < 7, 7, fvar(11) * 40)), 4
animtype = Light
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 9,9
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-60
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -1,-4
guard.velocity = -9
fall = 1
fall.recover = 0
airguard.velocity = -2.5,-4
air.type = High	
air.velocity = -3,-4
air.hittime = 12
air.animtype = back
envshake.time = 20
envshake.ampl = 6
envshake.freq = 60
getpower = 20, 35
givepower = 35,35
yaccel = 0.5

[State 200, BGPalFX]
type = BGPalFX
trigger1 = time <= 48
time = 1
add	= -100,-100,-100
mul	= 100,100,256
invertall = 0
color = 256


[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = time <= 48
flag = timerfreeze
ignorehitpause = 1

[state 300, targetstate]
type = targetstate
triggerall = anim = 1230
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1254	
ignorehitpause = 1
persistent = 0

[state 1230, velset]
type = velset
trigger1 = anim = 1230 && animelemtime(6) = 0
y = -4

[state 1230, veladd]
type = veladd
trigger1 = anim = 1230 && animelemtime(6) >= 0
y = .35

[state 1230, changeanim]
type = changeanim
triggerall = anim = 1230
trigger1 = pos y >= 0 && vel y > 0
value = 48

[State 52, Turn]
type = Turn
trigger1 = anim = 48 && animelemtime(1) = 1

[state 52, Land FX]
type = helper
trigger1 = anim = 48 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 48 && animelemtime(1) = 1
value = 40, 0

[state 1230, posset]
type = posset
trigger1 = pos y > 0
y  = 0

[state 1230, velset]
type = velset
trigger1 = pos y >= 0 && vel y > 0
y  = 0

[state 1230, changestate]
type = changestate
triggerall = anim = 48
trigger1 = !animtime
value = 0
ctrl = 1
;----------------------------
;OLD Hit By Enhanced Shooter
[statedef 1251]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1


[State 1251, changeanim]
type = changeanim2
trigger1 = !time
value = 1251

[state 1202, posset]
type = posadd
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
x = 20



[state 1251,posset]
type = posset
trigger1 = !time
y = 0

[State 1251, lifeadd]
type =  lifeadd
trigger1 = animelem = 2 || animelem = 6 || animelem = 9 || animelem = 12
value = -ceil(ifElse(enemy,fvar(11) * 40 < 14, 14, enemy,fvar(11) * 40))
kill = 0

[state 1251, shake it]
type = envshake
trigger1 = animelem = 2 || animelem = 6 || animelem = 9 || animelem = 12
freq = 60
time = 10
ampl = 3

[State 1251, changestate]
type = changestate
trigger1 = animtime = 0
value = 1252

;----------------------------
;OLD Fly Away
[statedef 1252]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5937),5937,5030)
ctrl = 0




[state 1251, shake it]
type = envshake
trigger1 = !time
freq = 60
time = 15
ampl = 8

[State 1251, lifeadd]
type =  lifeadd
trigger1 = !time
value = -ceil(ifElse(fvar(11) * 20 < 4, 4, fvar(11) * 20))

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -9.3
y = -4
persistent = 0

[State 6100, turning snd]
type = PlaySnd
triggerall = anim=5937
trigger1 = !time
trigger2 = time = 10
trigger3 = time = 20
trigger4 = time = 30
trigger5 = time = 40
trigger6 = time = 50
trigger7 = time = 60
trigger8 = time = 70
trigger9 = time = 80
value = 21,1
persistent = 1
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35

[state 1060, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy, var(49) = 0
trigger2 = roundstate = 2
value = 5100

[state 1060, changestate]
type = changestate
triggerall = roundstate = 3
triggerall = enemy,var(49) = 1
trigger1 = pos Y >= 0 && Vel Y > 0
value = 5100
;--------------------------------------------
;OLD Enhanced Shooter Success
[Statedef 1253]
type = A
movetype = A
physics = N
anim = 1252
ctrl = 0

[state 1253, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 1200, changestate]
type = changestate
triggerall = time < 2
trigger1 = p2stateno != 1251
value = 1203
ignorehitpause = 1

[State 650, 2]
type = Explod
trigger1 = enemy,stateno = 1252
trigger2 =  enemy, time = 0
anim = 7030
pos = 0,-60
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 1251, 2]
type = PlaySnd
triggerall = enemy,stateno = 1251
trigger1 = enemy,animelem = 2 || enemy,animelem = 6 || enemy,animelem = 9 || enemy,animelem = 12
value = 5,1

[State 1251, 2]
type = PlaySnd
trigger1 = time = 103
value = 5,2


[State 650, 2]
type = Explod
trigger1 = enemy,animelem = 2
anim = 7020
pos = 10,-35
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 650, 2]
type = Explod
trigger1 = enemy,animelem = 6
anim = 7020
pos = -34,-60
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 650, 2]
type = Explod
trigger1 = enemy,animelem = 9
anim = 7020
pos = 10,-60
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 650, 2]
type = Explod
trigger1 = enemy,animelem = 12
anim = 7020
pos = -34,-35
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 200, BGPalFX]
type = BGPalFX
trigger1 = anim = 1252
time = 1
add	= -100,-100,-100
mul	= 100,100,256
invertall = 0
color = 256


[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = anim = 1252 
flag = timerfreeze
ignorehitpause = 1

[State 1251, 2]
type = Hitadd
trigger1 = time = 52 || time = 62 || time = 74 || time = 90 || time = 103
value = 1

[State 1200, eat this and die!]
type = playsnd
trigger1 =  !time
value= 1400, 12


[State 1253, velset]
type = velset
triggerall = time < 102
trigger1 = p2bodydist X < -80
trigger2 = time = 11
x = .3

[State 1200, changeanim]
type = changeanim
triggerall = anim = 1252
trigger1 = Vel X = 12
trigger1 = time > 102
value = 1210

[State 1253, velset]
type = velset
triggerall = anim = 1252
trigger1 = time > 102
x = 12

;----------------------


;End
[State 1200, changeanim]
type = changeanim
triggerall = anim = 1210
trigger1 = pos Y >= 0 && Vel Y > 0
value = 1220



[State 1100, velset]
type = velset
trigger1 = anim = 1210
y = 1


;------------------------
;Land
[State 1200, velset]
type = velset
trigger1 = anim = 1220
y = 0

[State 1200, statetypeset]
type = statetypeset
trigger1 = anim = 1220
statetype = S

[state 1200, velmul]
type = velmul
trigger1 = anim = 1220
x = .90

[State 1100, velset]
type = posset
trigger1 = anim = 1220
y = 0

[state 1100, distance]
type = attackDist
trigger1 = !time
value = 0

[State 1200, changestate]
type = changestate
triggerall = anim = 1220
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------
;Hit By Enhanced Shooter
[statedef 1254]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1

[state 1254, changeanim]
type = changeanim
trigger1 = !time
value = ifelse(selfanimexist(5052),5052,5030)

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -25
y = -9
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0 && animelemtime(2) >= 0
y = 0.35



[State 2070, Wall stick]
type = ChangeState
triggerall = alive
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1255

[State 1323, Wallbounce ko]
type = ChangeState
triggerall = !alive
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1323
;------------------
;Wall stick
[Statedef 1255]
type    = A
movetype= H
physics = N

[state 1255, lifeadd]
type = lifeadd
trigger1 = !time
value = -ceil(ifElse(enemy,fvar(11) * 20 < 7, 7, enemy,fvar(11) * 20))



[State 1557, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1557, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1557, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1



[State 1557, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1253

;[State 1557, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 1557, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1256
;------------------
;Bounce off Wall
[Statedef 1256]
type    = A
movetype= H
physics = N
anim = 5061
velset = 10,2

[state 1255, turn]
type = turn
trigger1 = !time

[state 1256, veladd]
type = veladd
trigger1 = pos y < 0
y = .5


[state 1256, Hit ground]
type = changestate
trigger1 = pos y >= 0 && vel y > 0
value = 1257
;---------------------------------------------
;Sliding on Ground
[Statedef 1257]
type = L
movetype = H
physics = N

[state 1257, playsnd]
type = playsnd
trigger1 = !time
value = 5,8

[state 1257, playsnd]
type = playsnd
trigger1 = !time
value = 15000,0


[state 1257, changeanim]
type = changeanim
trigger1 = time < 18
value = 5080

[state 1257, velset]
type = velset
trigger1 = !time
y = 0

[state 1257, posset]
type = posset
trigger1 = pos y > 0
y = 0

[state 1257, velmul]
type = velmul
trigger1 = vel X != 0
x = .90

[state 3000, turn]
type = turn
trigger1 = alive && time = 40
trigger2 = !alive && time = 20

[state 3000, changestate]
type = selfstate
triggerall = time = 40
trigger1 = alive
trigger2 = enemy,var(49) = 1
trigger3 = TeamMode != Simul
trigger3 = enemyNear,TeamMode != Simul
value = 5120

[state 3000, changestate]
type = selfstate
triggerall = time >= 20
triggerall = !alive
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode != Simul
trigger2 = enemyNear,TeamMode != Simul
value = 5150


[state 1060, changestate]
type = changestate
triggerall = time >= 20
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5150
;--------------------------------------------
;Royal Buster (Light)
[Statedef 1400]
type = S 
movetype = A
physics = S
anim = 1400
juggle = 1
ctrl = 0


[state 1400, removexplod]
type = removeexplod
trigger1 = !time
id = ifelse(facing = 1, NumExplod(90010104), NumExplod(90010006))

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(4)=0
x = 33

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(5)=0
x = 8

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemTime(7)=0
value = 0, 2
channel = 1

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 14
channel = 0

[State 200, 1]  
type = HitDef
trigger1 = AnimElemTime(8)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 5, 5, fvar(11) * 20)), 3
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 15,13 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 21
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -4,-4
air.hittime = 18
air.animtype = back
envshake.time = 10
envshake.freq = 80
envshake.ampl = 3
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[state 1100, distance]
type = attackDist
trigger1 = animelem = 9
value = 0

[State 1100, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------------------

;--------------------------------------------
;Royal Buster(Medium)
[Statedef 1401]
type = S 
movetype = A
physics = S
anim = 1401
juggle = 1
ctrl = 0

[state 1400, removexplod]
type = removeexplod
trigger1 = !time
id = ifelse(facing = 1, NumExplod(90010104), NumExplod(90010006))

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(4)=0
x = 33

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(5)=0
x = 8

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemTime(7)=0
value = 0, 2
channel = 1

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 14
channel = 0

[State 200, 1]  
type = HitDef
trigger1 = AnimElemTime(8)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 18,16 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
guard.ctrltime = 17
ground.velocity = -8
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[state 1100, distance]
type = attackDist
trigger1 = animelem = 9
value = 0

[State 1100, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Royal Buster(Heavy)
[Statedef 1402]
type = S 
movetype = A
physics = S
anim = 1402
juggle = 1
ctrl = 0

[state 1400, removexplod]
type = removeexplod
trigger1 = !time
id = ifelse(facing = 1, NumExplod(90010104), NumExplod(90010006))

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(4)=0
x = 33

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(5)=0
x = 8

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemTime(7)=0
value = 0, 2
channel = 1

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 14
channel = 0

[State 200, 1]  
type = HitDef
trigger1 = AnimElemTime(8)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 20,18 ;13,13
guard.pausetime = 20,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
guard.ctrltime = 22
ground.velocity = -9
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -2,-4
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5


[state 1100, distance]
type = attackDist
trigger1 = animelem = 9
value = 0

[State 1100, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Mid Path
[Statedef 1410]
type = S 
movetype = A
physics = S
anim = 1410
juggle = 1
ctrl = 0


[State 200, 1]
type = PlaySnd
trigger1 = !time
value = 3, 16
channel = 0

[state 752, playsnd]
type = playsnd
trigger1 = animelem = 3
value = 3,15
channel = 0


[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 33

[state 1410, varset]
type = varset
trigger1 = !time
var(42) = ifelse(prevstateno = 1400,1,ifelse(prevstateno = 1401,2,0))

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemTime(3)=0
value = 0, 2
channel = 1

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1400
trigger1 = AnimElemTime(4)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 5, 5, fvar(11) * 20)), 3
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 15,13 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -9.5
guard.velocity = -9.5
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-4
air.hittime = 28
air.animtype = back
envshake.time = 10
envshake.freq = 80
envshake.ampl = 3
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5


[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1401 
trigger1 = AnimElemTime(4)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 18,16 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -9.5
guard.velocity = -9.5
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-4
air.hittime = 28
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1402 
trigger1 = AnimElemTime(4)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 20,18 ;13,13
guard.pausetime = 20,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -9.5
guard.velocity = -9.5
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-4
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 2400
trigger1 = AnimElemTime(4)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 20,18 ;13,13
guard.pausetime = 20,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -9
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-4
air.hittime = 28
air.animtype = back
ground.cornerpush.veloff = -11
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 1100, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Low Path
[Statedef 1411]
type = S 
movetype = A
physics = S
anim = 1411
juggle = 1
ctrl = 0

[State 200, 1]
type = PlaySnd
trigger1 = !time
value = 3121, 0+random%4
channel = 0



[State 0, PosAdd]
type = PosAdd
trigger1 = !time
x = 23



[state 1410, varset]
type = varset
trigger1 = !time
var(42) = ifelse(prevstateno = 1400,1,ifelse(prevstateno = 1401,2,0))

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemTime(5)=0
value = 0, 2
channel = 1

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1400
trigger1 = AnimElemTime(6)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 5, 5, fvar(11) * 20)), 3
animtype = Hard
guardflag = LA
hitflag = MAF
priority = 4, Hit
pausetime = 15,13 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-4
air.hittime = 28
air.animtype = back
envshake.time = 10
envshake.freq = 80
envshake.ampl = 3
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1401 
trigger1 = AnimElemTime(6)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
animtype = Hard
guardflag = LA
hitflag = MAF
priority = 4, Hit
pausetime = 18,16 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-4
air.hittime = 28
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1402 
trigger1 = AnimElemTime(6)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 5
animtype = Hard
guardflag = LA
hitflag = MAF
priority = 4, Hit
pausetime = 20,18 ;13,13
guard.pausetime = 20,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-4
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 2400
trigger1 = AnimElemTime(6)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
animtype = Hard
guardflag = LA
hitflag = MAF
priority = 4, Hit
pausetime = 20,18 ;13,13
guard.pausetime = 20,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -8
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-4
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098


[state 1411, changestate]
type = changestate
trigger1 =  animtime  = 0
value = 11+(!NumExplod(90000001) && !NumExplod(90000002) && !NumExplod(90000003))
ctrl = 1
;--------------------------------------------
;High Path
[Statedef 1412]
type = S 
movetype = A
physics = S
anim = 1412
juggle = 1
ctrl = 0

[State 200, 1]
type = PlaySnd
trigger1 = !time
value = 3121, 0+random%4
channel = 0


[State 0, PosAdd]
type = PosAdd
trigger1 = animelemtime(4) = 0
x = 30


[state 1410, varset]
type = varset
trigger1 = !time
var(42) = ifelse(prevstateno = 1400,1,ifelse(prevstateno = 1401,2,0))

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemTime(6)=0
value = 0, 2
channel = 1

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1400
trigger1 = AnimElemTime(7)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 5, 5, fvar(11) * 20)), 3
animtype = Hard
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 15,13 ;13,13
guard.pausetime = 15,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-5
air.hittime = 28
air.animtype = back
envshake.time = 10
envshake.freq = 80
envshake.ampl = 3
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5


[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1401 
trigger1 = AnimElemTime(7)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
animtype = Hard
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 18,16 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-5
air.hittime = 28
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5


[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1402 
trigger1 = AnimElemTime(7)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 5
animtype = Hard
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 20,18 ;13,13
guard.pausetime = 20,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-5
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5


[State 200, 1]  
type = HitDef
triggerall = prevstateno = 2400
trigger1 = AnimElemTime(7)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
animtype = Hard
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 20,18 ;13,13
guard.pausetime = 20,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -8
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1 
fall.recover = 0
air.type = High
air.velocity = -3,-5
air.hittime = 20
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5



[state 1411, changestate]
type = changestate
trigger1 =  animtime  = 0
value = 0
ctrl = 1
;-------------------------------------------
;Mid Ender
[Statedef 1420]
type = S
movetype = A
physics = S
anim = 1420
ctrl = 0
velset = 0,0
sprpriority = 1
juggle = 1

[state 1420, posset]
type = posadd
trigger1 = !time
x = 50


[state 752, playsnd]
type = playsnd
trigger1 = animelem = 3
value = 3,13
channel = 0

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 5
channel = 1

[State 752, changeanim]
type = ChangeAnim
trigger1 = AnimElemTime(4) > 0 && AnimElemTime(5) <= 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
value = 1420
elem = 5


[State 756, 3]
type = HitDef
triggerall = var(42) = 1
trigger1 = AnimElem = 4
attr = A, SA
;damage = 50,0
damage = ceil(ifElse(fvar(11) * 20 < 5, 5, fvar(11) * 20)), 3
hitflag = MAF
guardflag = M
priority = 4, Hit
pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-55
hitsound   = s5, 5
guardsound = S6,1
animtype = Up
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -4,-6
guard.velocity = -4
air.velocity = -4,-6
fall = 1 
air.animtype = back
getpower= 0,0
givepower = 35,35
envshake.time = 10
envshake.freq = 80
envshake.ampl = 3
yaccel = 0.5

[State 756, 3]
type = HitDef
triggerall = var(42) = 2
trigger1 = AnimElem = 4
attr = A, SA
;damage = 50,0
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
hitflag = MAF
guardflag = M
priority = 4, Hit
pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-55
hitsound   = s5, 5
guardsound = S6,1
animtype = Up
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -4,-6
guard.velocity = -4
air.velocity = -4,-6
fall = 1
air.animtype = back
getpower= 0,0
givepower = 35,35
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
yaccel = 0.5

[State 756, 3]
type = HitDef
triggerall = var(42) = 0 
trigger1 = AnimElem = 4
attr = A, SA
;damage = 50,0
damage = ceil(ifElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 5
hitflag = MAF
guardflag = M
priority = 4, Hit
pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-55
hitsound   = s5, 5
guardsound = S6,1
animtype = Up
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -4,-6
guard.velocity = -4
air.velocity = -4,-6
fall = 1
air.animtype = back
getpower= 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
yaccel = 0.5



[state 300, targetstate]
type = targetstate
trigger1 = var(42) = 2
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1473	
ignorehitpause = 1
persistent = 0

[state 300, targetstate]
type = targetstate
triggerall = var(42) = 0 
trigger1 =  movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
trigger1 =  var(40) = 0
value = 1470
ignorehitpause = 1
persistent = 0


[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;High Ender
[Statedef 1421]
type = S
movetype = A
physics = S
anim = 300
ctrl = 0
velset = 0,0
sprpriority = 1
juggle = ifelse(prevstateno = 1100,1,1)

[state 1100, changeanim]
type = changeanim
triggerall = !time 
trigger1 = var(35) = 0
value = 300

[state 1100, changeanim]
type = changeanim
triggerall = !time 
trigger1 = var(35) = 1
value = 302

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
triggerall = anim != 303
trigger1 = time = 4
value = 1100,0

[State 220, Alley 'op!]
type = playsnd
triggerall = prevstateno != 1100
triggerall = anim != 303
trigger1 = animelem=4 
value = 1101,0
channel = 0

[State 200, 1]
type = PlaySnd
triggerall = prevstateno = 1100
triggerall = anim != 303
trigger1 = animelem = 2
volumescale = 50
value = 2400, 2


[State 220, BEGONE]
type = playsnd
triggerall = prevstateno = 1100
triggerall = anim != 303
trigger1 = animelem=4 
value = 3,25
channel = 0

[state 1100, flash white]
type = palfx
triggerall = animelemtime(14) = 1
triggerall = anim != 303
trigger1 = var(35) = 1 
add = 255,255,255
time = 3

[state 1000, varset]
type = varset
triggerall = var(35) = 1
triggerall = anim != 303
trigger1 = animelemtime(14) = 1
var(35) = 0

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) <= 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 30
timegap= 1
framegap= 4
length= 20
palbright= 0,0,0
palcontrast= 250,200,0
palpostbright= 250,200,0
trans= add

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) > 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 30
timegap= 1
framegap= 4
length= 20
palbright= 0,0,0
palcontrast= 0,250,200
palpostbright= 0,250,200
trans= add


[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 = time > 4 
anim = 1206
id = 1206
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
triggerall = anim != 303
trigger1 = animelemtime(2) = 0
anim = 30100
id = 30100
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
bindtime = -1
ignorehitpause = 0
scale = 1,1



[State 200, 1]
type = PlaySnd
triggerall = anim != 303
trigger1 = animelem = 5
value = 0, 2
channel = 1

[State 200, velset]
type = Velset
trigger1 = time < 12 && animelem != 1
x = 16

[state 300, velmul]
type = velmul
trigger1 = time > 15
x = .50

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = SA,AA

[state 300, nothitby]
type = hitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = C,AA,AP,AT

[State 200, 1]
type = HitDef
triggerall = !movecontact
triggerall = var(42) = 1
triggerall = prevstateno != 1100
triggerall = anim != 303
trigger1 = animelem = 6
attr = S, SA
damage = ceil(ifElse(fvar(11) * 25 < 6, 6, fvar(11) * 25)), 4
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 15,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-75
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 10
ground.velocity = -1,-8
guard.velocity = -9
fall = 1
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-8
air.hittime = 10
air.animtype = back
envshake.time = 10
envshake.freq = 80
envshake.ampl = 3
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = !movecontact
triggerall = var(42) = 2
triggerall = prevstateno != 1100
triggerall = anim != 303
trigger1 = animelem = 6
attr = S, SA
damage = ceil(ifElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 5
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 18,16
guard.pausetime = 18,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-75
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 33
ground.velocity = -1,-10
guard.velocity = -9
fall = 1
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-10
air.hittime = 33
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = !movecontact
triggerall = prevstateno != 1100
triggerall = anim != 303
triggerall = var(42) = 0
trigger1 = animelem = 6
attr = S, SA
damage = ceil(ifElse(fvar(11) * 35 < 8, 8, fvar(11) * 35)), 6
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 14,18
guard.pausetime = 20,18
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-75
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 80
ground.velocity = -1,-10
guard.velocity = -9
fall = 1
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-10
air.hittime = 80
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1460

[State 200, 1]
type = HitDef
triggerall = var(41) = 1
triggerall = prevstateno = 1100
triggerall = anim != 303
trigger1 = animelem = 6
attr = S, SA
damage = ceil(ifElse(fvar(11) * 35 < 8, 8, fvar(11) * 35)), 6
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-75
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -1,-10
guard.velocity = -9
fall = 1
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-10
air.hittime = 12
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098


[State 200, 1]
type = HitDef
triggerall = !movecontact
triggerall = prevstateno = 1100
triggerall = var(41) = 0
triggerall = anim != 303
trigger1 = animelem = 6
attr = S, SA
damage = ceil(ifElse(fvar(11) * 60 < 10, 10, fvar(11) * 60)), 6
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 14,15
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-75
hitsound = s1421, 0
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -1,-12
guard.velocity = -9
fall = 1
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-12
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
ID = 301

[State 0, AttackDist]
type = AttackDist
triggerall = anim != 303
trigger1 = AnimElemTime(7)>=0
value = 0

[state 1460, hit animation]
type = null
triggerall = anim != 303 && animelemtime(16)  = 0
trigger1 = movehit
trigger1 = p2dist X < -12
value = 303

[state 1460, turn]
type = turn
triggerall = var(43) = 0 && var(42) = 0
trigger1 = animelemtime(17) = 0
trigger1 = movehit
trigger1 = p2dist X < -12


[state 300, targetstate]
type = targetstate
trigger1 =  movehit = 1
trigger1 = numtarget(1460)
trigger1 = !(target, ishelper)
value = 1460
ignorehitpause = 1
persistent = 0


[state 300, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = numtarget(301)
trigger1 = !(target, ishelper)
value = 301
ignorehitpause = 1
persistent = 0



[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------------
;Low Ender
[statedef 1422]
type = S
movetype = A
physics = N
anim = 1421
ctrl = 0
juggle = 1


[State 200, 1]
type = PlaySnd
trigger1 = AnimElemTime(3)=0
value = 0, 2
channel = 1

[State 450, 3]
type = HitDef
triggerall = var(42) = 1
trigger1 = animelem = 4
attr = C, SA
animtype = Back
priority = 4, Hit
;damage    = 50,0
damage = ceil(ifElse(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 0
hitflag = MAF
guardflag = L
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-50
hitsound   = s5,2
guardsound = S6,1
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -2,-3
guard.velocity = -9
air.velocity = -3,-1
guard.velocity = -2
getpower= ifelse(prevstateno!=750,ifelse(p2movetype=H,40,210),0), ifelse(prevstateno!=750,35,0)
givepower = 35,35
yaccel = 0.5

[State 450, 3]
type = HitDef
triggerall = var(42) = 2
trigger1 = AnimElem = 4
attr = C, SA
animtype = Back
damage = ceil(ifElse(fvar(11) * 47 < 7, 7, fvar(11) * 47)), 0
hitflag = MAF
guardflag = LA
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-50
hitsound   = s5,2
guardsound = s6,1
fall = 1
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -.5,-6
guard.velocity = -9
air.velocity = -1,-6
guard.velocity = -1
getpower= ifelse(p2movetype=H,40,210)
givepower = 35,35
yaccel = 0.5

[State 450, 3]
type = HitDef
triggerall = var(42) = 0 
trigger1 = AnimElemtime(4) = 0
attr = C, SA
animtype = Back
damage = ceil(ifElse(fvar(11) * 47 < 7, 7, fvar(11) * 47)), 0
hitflag = MAF
guardflag = LA
pausetime = 9,9
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-50
hitsound   = s5,2
guardsound = s6,1
fall = 1
ground.type = low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -.5,-6
guard.velocity = -9
air.velocity = -1,-6
guard.velocity = -1
getpower= ifelse(p2movetype=H,40,210)
givepower = 35,35
yaccel = 0.5
id = 1450

[state 300, targetstate]
type = targetstate
triggerall = numtarget(1450)
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1450
ignorehitpause = 1
persistent = 0

[state 1422, changestate]
type = changestate
trigger1 = animtime = 0
value = 11+(!NumExplod(90000001) && !NumExplod(90000002) && !NumExplod(90000003))
ctrl = 1

;----------------------------
;Hit by Heavy Low ender
[statedef 1450]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5937),5937,5030)
ctrl = 0
velset = 0,0
facep2 = 1

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -.5
y = -7
persistent = 0

[State 6100, turning snd]
type = PlaySnd
triggerall = anim=5937
trigger1 = !time
trigger2 = time = 10
trigger3 = time = 20
trigger4 = time = 30
trigger5 = time = 40
trigger6 = time = 50
trigger7 = time = 60
trigger8 = time = 70
trigger9 = time = 80
value = 21,1
persistent = 1
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100

[state 1060, changestate]
type = selfstate
trigger1 = pos Y >= 0 && Vel Y > 0
value = 5100
;----------------------------
;Hit by Heavy High ender
[statedef 1460]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1

[state 1460, changeanim2]
type = changeanim2
trigger1 = !time
value = 651

[state 2060, changeanim]
type = changeanim
trigger1 = time = 14
value = IfElse(selfanimexist(5937),5937,5030)

[State 4005, vel]
type = velset
triggerall = anim != 651
trigger1 = AnimElemtime(2)=0
x = 4
y = -12
persistent = 0

[State 6100, turning snd]
type = PlaySnd
triggerall = anim=5937
trigger1 = !time
trigger2 = time = 10
trigger3 = time = 20
trigger4 = time = 30
trigger5 = time = 40
trigger6 = time = 50
trigger7 = time = 60
trigger8 = time = 70
trigger9 = time = 80
value = 21,1
persistent = 1
 
[State 9011, VelAdd]
type = VelAdd
triggerall = time > 14
trigger1 = Pos Y < 0
y = 0.35

[State 0, SelfState]
type = null
trigger1 = Time >= 50
trigger1 = command = "recovery"
value = 5210

[State 0, SelfState]
type = null
trigger1 = (Vel y > 0) && (Pos y >= -3)
trigger1 = command = "recovery"
value = 5200


[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100

[state 1060, changestate]
type = selfstate
trigger1 = pos Y >= 0 && Vel Y > 0
value = 5100
;-----------------------------------
;Hit by Heavy Mid Ender
[statedef 1470]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
velset = 0,0
facep2 = 1

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -14
y = -9
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35



[State 2070, Hit wall]
type = ChangeState
triggerall = alive
triggerall = Pos y < -15
triggerall = p2dist X < 180 && vel y < 0
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1471

[State 2070, Break through wall]
type = ChangeState
triggerall = !alive
triggerall = Pos y < -15
triggerall = p2dist X < 180 && vel y < 0
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1323

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100

[state 1060, changestate]
type = selfstate
trigger1 = pos Y >= 0 && Vel Y > 0
value = 5100
;----------------------------------------------------------------------------------------
;Hit wall
[statedef 1471]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 1470

[State 1030, 1]
type = PlaySnd
trigger1 = !time
value = 5,5
channel = 1


[state 1471, changestate]
type = changestate
trigger1 = time > 16
value = 1472

;-----------------------------------------------------------------------------------------
;Slide from wall
[statedef 1472]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[state 3270, hitadd]
type = hitadd
trigger1 = time 
value = 1

[state 1020, velset]
type = velSet
trigger1 = time >= 0
y = time/20

[state 1006, position]
type = posSet
trigger1 = (Pos y >= 0) && (Vel y > 0)
y = 0

[state 1060, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100

;-----------------------------------------------
;Hit by Medium Mid Ender
[Statedef 1473]
type = A
movetype = H
physics = N
anim = ifelse(selfanimexist(5052),5052,5030)
ctrl = 0
velset = -10, -7
facep2 = 1

[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.35


[state 1060, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 1
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100

[state 1060, changestate]
type = selfstate
trigger1 = pos Y >= 0 && Vel Y > 0
value = 5100

;----------------------------------------------
;Light Air Grab
[Statedef 1500]
type = A
movetype = A
physics = N
juggle = 0
anim = 1500
ctrl = 0

[state 1520, attackdistance]
type = attackdist
trigger1 = 1
value = 0

[state 1500, varset]
type = varset
trigger1 = !time
var(26) = ceil(Vel X)


[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 1
channel = 1

[state 1500, velset]
type = velset
trigger1 = time = 1
x = 0
y = 0

[State 200, 1]  
type = HitDef
triggerall = p2movetype = H
triggerall = p2statetype = A
triggerall = p2stateno != [150,155]
trigger1 = animelemtime(4) = 0 || AnimElemTime(5)=0
attr = S, ST
;damage = 50, 0
damage = 0, 0
kill = 0
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,0 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = -1
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s1500, 2
guardsound = S6,1
fall = 1
fall.recover = 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = -7
guard.velocity = -9
p2facing = 1
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1550

[State 200, 1]  
type = HitDef
triggerall = p2movetype != H
triggerall = p2statetype = A
trigger1 = animelemtime(4) = 0 || AnimElemTime(5)=0
attr = S, SA
;damage = 50, 0
damage = 0, 10
kill = 0
animtype = Hard
fall = 1
fall.recover = 0
hitflag = AF-
priority = 4, Hit
pausetime = 0,0 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = -1
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s810, 0
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.type = High
p2facing = 1
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1550

[state 1500, velset]
type = velset
trigger1 = time = 20
x = var(26)



[state 1500, targetbind]
type = targetbind
triggerall = numtarget(1550)
trigger1 = movehit
pos = 40,0
ignorehitpause = 1
persistent = 0

[state 1500, targetstate]
type = targetstate
triggerall = numtarget(1550)
trigger1 = movehit
value = 1550
ignorehitpause = 1

[state 1500, endstate]
type = changestate
triggerall = numtarget(1550)
trigger1 = movehit
value = 1510
ignorehitpause = 1




[state 1500, endstate]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

;----------------------------------------------
;Medium Air Grab (not used)
[Statedef 1501]
type = A
movetype = A
physics = N
juggle = 0
anim = 1501
ctrl = 0


[state 1500, varset]
type = varset
trigger1 = !time
var(25) = ceil(Vel X)

[state 1500, velset]
type = velset
trigger1 = time = 1
x = 0
y = 0

[state 1500, Waluigi]
type = playsnd
trigger1 = animelemtime(9) = 0
value = 3,7+random%2

[state 1500, varset]
type = varset
trigger1 = !time
var(26) = 1

[State 200, 1]  
type = HitDef
triggerall = p2movetype = H
triggerall = p2statetype = A
trigger1 = AnimElemTime(10)=0
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 10
kill = 0
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 8,8 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
fall = 1
fall.recover = 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1550

[State 200, 1]  
type = HitDef
triggerall = p2movetype != H
triggerall = p2statetype = A
trigger1 = AnimElemTime(10)=0
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 10
kill = 0
animtype = Hard
hitflag = AF-
priority = 4, Hit
pausetime = 8,8 ;13,13
fall = 0
fall.recover = 0
guard.pausetime = 18,16 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1550


[state 1500, velset]
type = velset
trigger1 = time = 27
x = var(25)



[state 1500, targetbind]
type = targetbind
triggerall = numtarget(1550)
trigger1 = movehit
pos = 40,0
ignorehitpause = 1
persistent = 0

[state 1500, targetstate]
type = targetstate
triggerall = numtarget(1550)
trigger1 = movehit
value = 1550
ignorehitpause = 1

[state 1500, endstate]
type = changestate
triggerall = numtarget(1550)
trigger1 = movehit
value = 1510
ignorehitpause = 1




[state 1500, endstate]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1
;----------------------------------------------
;Heavy Air Grab (not used)
[Statedef 1502]
type = A
movetype = A
physics = N
juggle = 0
anim = 1502
ctrl = 0


[state 1500, varset]
type = varset
trigger1 = !time
var(25) = ceil(Vel X)


[state 1500, velset]
type = velset
trigger1 = time = 1
x = 0
y = 0

[state 1500, Waluigi]
type = playsnd
trigger1 = animelemtime(12) = 0
value = 3,7+random%2

[state 1500, varset]
type = varset
trigger1 = !time
var(26) = 1

[State 200, 1]  
type = HitDef
triggerall = p2movetype = H
triggerall = p2statetype = A
trigger1 = AnimElemTime(13)=0
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 10
kill = 0
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
fall =  1
fall.recover = 0
pausetime = 8,8 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1550

[State 200, 1]  
type = HitDef
triggerall = p2movetype != H
triggerall = p2statetype = A
trigger1 = AnimElemTime(13)=0
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 1, 1, fvar(11) * 20)), 10
kill = 0
animtype = Hard
hitflag = AF-
priority = 4, Hit
pausetime = 8,8 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = s7030
fall = 1
fall.recover = 0
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1550


[state 1500, velset]
type = velset
trigger1 = time = 30
x = var(25)



[state 1500, targetbind]
type = targetbind
triggerall = numtarget(1550)
trigger1 = movehit
pos = 40,0
ignorehitpause = 1
persistent = 0

[state 1500, targetstate]
type = targetstate
triggerall = numtarget(1550)
trigger1 = movehit
value = 1550
ignorehitpause = 1

[state 1500, endstate]
type = changestate
triggerall = numtarget(1550)
trigger1 = movehit
value = 1510
ignorehitpause = 1




[state 1500, endstate]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

;----------------------------------------------
;Grab Success
[Statedef 1510]
type = A
movetype = A
physics = N
juggle = 0
anim = 1510
sprpriority = 3
ctrl = 0

[state 1500, Waluigi]
type = playsnd
trigger1 = !time
value = 1500,4+random%2
channel = 0

[state 1500, targetbind]
type = targetbind
trigger1 = anim = 1510 && animelemtime(3) >= 0
pos = 42,-80
ignorehitpause = 1
persistent = 1



[state 1510, velset]
type = velset
trigger1 = anim = 1510  && animelemtime(1) = 0
x = 1
persistent = 0

[state 1510, velset]
type = veladd
trigger1 = anim = 1510 
y = 2


[state 1500, changeanim]
type = changeanim
triggerall = anim = 1510
trigger1 = pos Y >= 0 && Vel Y > 0
value = 1512

;------------Landing-----------------------------------

[state 1550, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4001, hitadd]
type = hitadd
triggerall = anim = 1512
trigger1 = animelemtime(1) =0
value = 1

[state 1510, playsnd]
type = playsnd
triggerall = anim = 1512
trigger1 = animelemtime(1) =0
value = 1500,3


[state 1510, playsnd]
type = null
triggerall = anim = 1512
trigger1 = animelemtime(1) =0
value = 5,2


[state 2001, Ground Smash FX]
type = explod
trigger1 = anim = 1512 && animelemtime(1) = 0
anim = 3500
id = 3500
pos = 9,-3
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 0
scale = 1,1

[State 650, 2]
type = Explod
trigger1 = anim = 1512 && animelemtime(1) = 0
anim = 7030
pos = 0,0
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[state 1510, velset]
type = velset
trigger1 = anim = 1512 && animelemtime(1) = 0
x = 0
y = 0
persistent = 0

[state 1510, velset]
type = velset
trigger1 = anim = 1512 && animelemtime(4) >= 0
x = -2
y = -4
persistent = 0

[state 1510, varset]
type = varset
trigger1 = anim = 1512 && animelemtime(2) = 1 && prevstateno = 1520
var(36) = 1


[State 9011, VelAdd]
type = VelAdd
triggerall = anim = 1512 && animelemtime(8) >= 0
trigger1 = Pos Y < 0
y = 0.55



[state 1510, changestate]
type = changestate
triggerall = anim = 1512
trigger1 = pos Y >= 0 && Vel Y > 0
value = 52
;----------------------------------------------
;Old Grab Success
[Statedef 1511]
type = A
movetype = A
physics = N
juggle = 0
anim = 1510
sprpriority = 3
ctrl = 0

[state 1500, targetbind]
type = targetbind
trigger1 = anim = 1510 && animelemtime(3) >= 0
pos = 40,-108
ignorehitpause = 1
persistent = 1

[state 1510, playsnd]
type = playsnd
triggerall = anim = 1510
trigger1 = animelemtime(1) =0
value = 1512,0



[state 1510, velset]
type = velset
trigger1 = anim = 1510 && animelemtime(3) >= 0
x = 1
y = 8
persistent = 0

[state 1510, velset]
type = velset
trigger1 = anim = 1512 && animelemtime(1) = 0
x = 0
y = 0
persistent = 0

[state 1510, velset]
type = velset
trigger1 = anim = 1512 && animelemtime(2) >= 0
x = -2
y = -4
persistent = 0


[State 9011, VelAdd]
type = VelAdd
triggerall = anim = 1512 && animelemtime(8) >= 0
trigger1 = Pos Y < 0
y = 0.55




[state 1500, changeanim]
type = changeanim
triggerall = anim = 1510
trigger1 = pos Y >= 0 && Vel Y > 0
value = 1512


[state 1550, nothitby]
type = nothitby
trigger1 = 1
value = SCA


[state 2001, Ground Smash FX]
type = explod
trigger1 = anim = 1512 && animelemtime(1) = 0
anim = 3500
id = 3500
pos = 9,-3
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 0
scale = 1,1


[state 1500, varset]
type = varset
trigger1 = enemy, stateno = 652
var(11) = 1

[state 1500, posset]
type = posset
triggerall = anim = 1512
trigger1 = pos Y >= 0 && Vel Y > 0
trigger1 = animelemtime(8) >= 0
y = 0

[state 1500, endstate]
type = changestate
triggerall = anim = 1512
trigger1 = pos Y >= 0 && Vel Y > 0
trigger1 = animelemtime(8) >= 0
value = 0
ctrl = 1
;----------------------------------------------
;Enhanced Grab
[Statedef 1520]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = ifelse(var(35) = 0,1520,1522)

[state 1520, attackdistance]
type = attackdist
trigger1 = 1
value = 0

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) <= 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 100
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 250,200,0
palpostbright= 250,200,0
trans= add

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = !time
value = 1100,0

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) > 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 100
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,250,200
palpostbright= 0,250,200
trans= add

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 = animelemtime(3) = 0
anim = 1206
id = 1206
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 1000, snd]
type = playsnd
trigger1 = !time 
value = 1111,0+random%2
channel = 0

[state 1520, statetype]
type = statetypeset
triggerall = anim = 1520 || anim = 1522
trigger1 = animelemtime(4) = 0
statetype = A
physics = N

[state 152, velset]
type = playsnd
triggerall = anim = 1520 || anim = 1522
trigger1 = animelemtime(4) = 0
value = 1500,1

[state 1520, velset]
type = velset
triggerall = anim = 1520 || anim = 1522
trigger1 = animelemtime(4) = 0
x = 9
y = -3

[state 1520, changeanim]
type = changeanim
triggerall = anim = 1520 || anim = 1522
trigger1 = time = 20
trigger2 = p2dist X < 15 && time > 15
value = ifelse(var(35) = 0,1521,1523)

;---------------Triggered--------------
[state 1520, velset]
type = velset
trigger1 = anim = 1521 || anim = 1523
trigger1 = animelemtime(1) = 0
x = 0
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = anim = 1521  || anim = 1523
trigger1 = animelemtime(1) = 0
value = 0, 1
channel = 1

[state 4100, flash white]
type = palfx
triggerall = anim = 1523
trigger1 = animelemtime(2) = 0
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0


[State 200, 1]  
type = HitDef
triggerall = p2movetype = H
triggerall = p2statetype != C
triggerall = p2stateno != [150,155]
triggerall = anim = 1521 || anim = 1523
trigger1 = animelemtime(2) = 0 || AnimElemTime(3)=0
attr = A, ST
;damage = 50, 0
damage = 0, 10
kill = 0
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,0 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = -1
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s810, 0
guardsound = S6,1
fall = 1
fall.recover = 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = -7
guard.velocity = -9
p2facing = 1
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1550

[State 200, 1]  
type = HitDef
triggerall = p2movetype != H
triggerall = p2statetype != C
triggerall = anim = 1521 || anim = 1523
trigger1 = animelemtime(2) = 0 || AnimElemTime(3)=0
attr = A, ST
;damage = 50, 0
damage = 0, 10
kill = 0
animtype = Hard
fall = 1
fall.recover = 0
hitflag = MAF-
priority = 4, Hit
pausetime = 0,0 ;13,13
guard.pausetime = 18,16 ;13,13
sparkno = -1
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s810, 0
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.type = High
p2facing = 1
air.velocity = -4,-4
air.hittime = 23
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1550

[state 1500, targetbind]
type = targetbind
triggerall = numtarget(1550)
trigger1 = !(Target,ishelper)
trigger1 = movehit = 1
pos = 40,0
ignorehitpause = 1
persistent = 0

[state 1500, targetstate]
type = targetstate
triggerall = numtarget(1550)
trigger1 = !(Target,ishelper)
trigger1 = movehit = 1
value = 1550
ignorehitpause = 1

[state 1500, endstate]
type = changestate
triggerall = numtarget(1550)
trigger1 = !(Target,ishelper)
trigger1 = movehit = 1
value = 1510
ignorehitpause = 1


[state 1520, changestate]
type = changestate
trigger1 = animtime = 0
value = 50
;----------------------------------------------
;Get Hit By Grab
[Statedef 1550]
type = A
movetype = H
physics = N
sprpriority = 1
juggle = 0
ctrl = 0


[state 1550, nothitby]
type = nothitby
trigger1 = 1
value = SCA


[state 1503, changeanim2]
type = changeanim
trigger1 = !time
value = 5051


[state 1503, changeanim2]
type = changeanim
trigger1 = anim = 5051 && animtime = -1
value = 5051
elem = animelemno(0)

[state 1503, angledraw]
type = angledraw
trigger1 = anim = 5051
value = 180


[state 1500, endstate]
type = lifeadd
trigger1 = enemy,anim = 1512 && enemy,animelemtime(1) = 0
value = -ceil(ifElse(enemy,fvar(11) * 40 < 10, 10, enemy,fvar(11) * 40))

[state 1251, shake it]
type = envshake
trigger1 = enemy,anim = 1512 && enemy,animelemtime(1) = 0
freq = 60
time = 25
ampl = 5

[state 1503, turn]
type = turn
trigger1 = enemy,anim = 1512 && enemy,animelemtime(1) = 0




[state 1500, endstate]
type = changestate
trigger1 = enemy,anim = 1512 && enemy,animelemtime(1) = 0
value = 1551
;----------------------------------------------
;Slammed into ground
[Statedef 1551]
type = L
movetype = H
physics = N
velset= 0,0
ctrl = 0


[state 3060, changeanim]
type = changeanim2
trigger1 = !time 
value = 3050

[state 3000, posset]
type = posset
trigger1 = 1
y = 0
ignorehitpause = 1

[state 1500, endstate]
type = changestate
triggerall = enemy,var(36) = 0
trigger1 = enemy,anim = 1512 && enemy,animelemtime(2) = 0 && enemy,prevstateno = 1520
value = 1552

[state 1552, turn]
type = turn
trigger1 = time = 87

[state 1060, changestate]
type = selfstate
triggerall = time = 87
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode != Simul
trigger2 = enemyNear,TeamMode != Simul
trigger3 = alive
value = ifelse(alive,5120,5150)

[state 1060, changestate]
type = changestate
triggerall = time = 87
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5150

;---------------------------------------------------------------------------
;P2 bouncing on the ground from a.SP
[Statedef 1552]
type    = L
movetype= H
physics = N
velset = 0,0


[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.95

;[State 5100, 10]
;type = PlaySnd
;trigger1 = Time = 1
;;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;value = f7,2

[State 5100, 5]
type = VelSet
trigger1 = AnimTime = 0
y = -12
x = 2

[State 111, 1]
type = StateTypeSet
trigger1 = AnimTime = 0
physics = A


[State 5100, 12]
type = SelfState
trigger1 = AnimTime = 0
value = 5050

;-------------------------------------
;Ex Superdash
[statedef 2000]
type = S
movetype = A
physics = N
poweradd = -500
anim = ifelse(var(35) = 0,2000,2003)
juggle = ifelse(prevstateno = 1100,2,5)
ctrl = 0

[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = time = 4
value = 1100,0

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = C,AA

[state 2000, width]
type = width
trigger1 = 1
player = 40,22
edge = 40, 22

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) <= 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 160
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 250,200,0
palpostbright= 250,200,0
trans= add

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) > 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 160
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,250,200
palpostbright= 0,250,200
trans= add

[State 8000, flash]
type = PalFX
trigger1 = ifelse(anim != 2003,1,animtime != [-2,0])
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 6100, snd]
type = playsnd
trigger1 = !time
value = 7,0
channel = -1

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 2 || animelem = 5
value = 3000, 0
channel = 1
;---------------------------
;Start

[state 4100, flash white]
type = palfx
triggerall = anim = 2003
trigger1 = animtime = -1
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[state 1000, varset]
type = varset
triggerall = anim = 2000 || anim = 2003
trigger1 = animtime = -1
var(35) = 0

[state 2000, changeanim]
type = changeanim
triggerall = anim = 2000 || anim = 2003
trigger1 = animtime = 0
value = 2001


;----------------------------
;Middle

[State 3101, dust FX]
type = helper
triggerall = anim != 2002
trigger1 = (time%13)=0
helpertype = normal
stateno = 10000
ID = 10000
name = "run_dust"
postype = p1
pos = 0,0
ownpal = 1

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 = time > 4 
anim = 1206
id = 1206
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[state 3101, Smoke FX]
type = explod
trigger1 = anim = 2002
anim = 1206
id = 1206
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 1000, snd]
type = playsnd
trigger1 = !time
value = 1450,0
channel = 0

[state 2000, velset]
type = velset
trigger1 = anim = 2001
x = ifelse(prevstateno = 1100,8,6)

[State 200, 1]
type = HitDef
triggerall = anim = 2001
trigger1 = animelem = 2 || animelem = 5
attr = S, SA
damage = ceil(ifElse(fvar(11) * 17 < 4, 4, fvar(11) * 17)), 2
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 3,3
sparkno = s7020
guard.sparkno = s7000
sparkxy = -40,-50
hitsound = s5, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -5
guard.velocity = -5
airguard.velocity = -4,-2
air.type = High	
air.velocity = -4,-2
air.hittime = 12
fall.recover = 0
air.animtype = back
getpower= 0,0
givepower = 20,10
envshake.time = 6
envshake.freq = 40
envshake.ampl = 3
yaccel = 0.5



[state 2000, changeanim]
type = changeanim
triggerall = anim = 2001
trigger1 = time = 39
value = 2002
;------------------------------
;End
[state 2000, veladd]
type = veladd
triggerall = anim = 2002
trigger1 = animelem = 1
x = 3

[state 2000, velmul]
type = velmul
triggerall = anim = 2002
trigger1 = animelem = 9
x = .50

[state 2000, velmul]
type = velmul
triggerall = anim = 2002
trigger1 = animelem = 13
x = .30


[state 2001, Fire FX]
type = explod
triggerall = anim = 2002
trigger1 = animelem = 3
anim = 25000
id = 25000
pos = 60,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 0
scale = 1,1

[State 200, 1]
type = HitDef
triggerall = anim = 2002
triggerall = prevstateno != 1100
triggerall = !NumTarget(2060)
trigger1 = animelem = 4 || animelem = 5 || animelem = 6 ||  animelem = 7
attr = S, SA
damage = ceil(ifElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 2
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 9,17
guard.pausetime = 10,10
sparkno = s7020
guard.sparkno = s7000
sparkxy = -40,-50
hitsound = s5,6
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -5,-5
guard.velocity = -8
airguard.velocity = -4,-5
fall = 1
fall.recover = 0
air.type = High	
air.velocity = -8,-4
air.hittime = 12
air.animtype = back
getpower= 0,0
givepower = 5,5
yaccel = 0.5
envshake.time = 10
envshake.freq = 60
envshake.ampl = 12
ID = 2060



[State 200, 1]
type = HitDef
triggerall = anim = 2002
triggerall = prevstateno = 1100
triggerall = !NumTarget(2070)
trigger1 = animelem = 4 || animelem = 5 || animelem = 6 ||  animelem = 7
attr = S, SA
damage = ceil(ifElse(fvar(11) * 25 < 7, 7, fvar(11) * 25)), 2
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 14,17
guard.pausetime = 10,10
sparkno = s7020
guard.sparkno = s7000
sparkxy = -40,-50
hitsound = s5,6
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -10,-9
guard.velocity = -8
fall = 1
airguard.velocity = -8,-4
air.type = High	
air.velocity = -10,-9
air.hittime = 12
air.animtype = back
getpower= 0, 0
givepower = 5,5
yaccel = 0.5
envshake.time = 10
envshake.freq = 60
envshake.ampl = 12
ID = 2070

[State 1050, targetstate]
type = targetstate
trigger1 = Numtarget(2060)
trigger1 = movehit = 1
trigger1 = !(target, ishelper)
value = 2060
ID = 2060
ignorehitpause = 1
persistent = 0

[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(2070)
trigger1 = movehit = 1
trigger1 = !(target, ishelper)
trigger1 = var(40) = 0
value = 2070
ID = 2070
ignorehitpause = 1
persistent = 0

[state 2000, posadd]
type = posadd
trigger1 = animelem = 13
x = 20

[State 6100, snd]
type = playsnd
trigger1 = anim = 2002 && animelem = 4
value = 1000,7


[state 1420,varset]
type = varset
triggerall = Numtarget(2070)
trigger1 = movehit = 1
trigger1 = !(target, ishelper)
var(40) = 1
ignorehitpause = 1


[state 2000, changestate]
type = changestate
triggerall = anim = 2002
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------
;Hit by EX Superdash
[statedef 2060]
type = A
movetype = H
physics = N
anim = 651
velset = 0,0
ctrl = 0
facep2 = 1

[state 2060, changeanim]
type = changeanim
trigger1 = time = 9
value = IfElse(selfanimexist(5052),5052,5030)

[State 4005, vel]
type = velset
triggerall = anim != 651
trigger1 = AnimElemtime(2)=0
x = -10
y = -10
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
triggerall = anim != 651
trigger1 = animelemtime(2) >= 0
trigger1 = Pos Y < 0
y = 0.35

[state 1060, changestate]
type = selfstate
trigger1 = pos Y >= 0 && Vel Y > 0
value = 5100
;-----------------------------------
;Hit by Enhanced EX Superdash
[statedef 2070]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1

[state 2070, changeanim2]
type = changeanim2
trigger1 = !time
value = 651

[state 2060, changeanim]
type = changeanim
trigger1 = time = 12
value = IfElse(selfanimexist(5052),5052,5030)

[State 4005, vel]
type = velset
triggerall = anim != 651
trigger1 = AnimElemtime(2)=0
x = -14
y = -9
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
triggerall = anim != 651
trigger1 = Pos Y < 0 && animelemtime(2) >= 0
y = 0.35



[State 2070, Wall stick]
type = ChangeState
triggerall = Vel X != 0
triggerall = alive
triggerall = Pos y < -15
triggerall = p2dist X >= 180 && vel y < 0
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 2072

[State 2070, Hit wall]
type = ChangeState
triggerall = Vel X != 0
triggerall = alive
triggerall = Pos y < -15
triggerall = p2dist X < 180 
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1471

[State 2070, Wall stick]
type = ChangeState
triggerall = Vel X != 0
triggerall = !alive
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1323

[State 2070, Hit ground]
type = SelfState
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[State 2070, Hit ground]
type = ChangeState
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100

;------------------
;Wall stick
[Statedef 2072]
type    = A
movetype= H
physics = N

[State 1557, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1557, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1557, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1



[State 1557, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 2004

;[State 1557, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 1557, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 2073
;------------------
;Bounce off
[Statedef 2073]
type    = A
movetype= H
physics = N

[State 1558, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1558, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1558, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1558, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 2070, Hit ground]
type = SelfState
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[State 2070, Hit ground]
type = ChangeState
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100
;-------------------------------------
;Ex Royal Buster
[statedef 2400]
type = S
movetype = A
physics = S
poweradd = -500
anim = ifelse(prevstateno = 1100,ifelse(var(35) = 0,2430,2431),2400)
juggle = 0
ctrl = 0


[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = time = 4
value = 1100,0

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = SA,AA

[state 2400, playsnd]
type = playsnd
trigger1 = animelem = 7
value = 3,17
channel = 0
volumescale = 225

[State 1000, snd]
type = playsnd
trigger1 = animelem = 5
value = 0,2

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) <= 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 120
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 250,200,0
palpostbright= 250,200,0
trans= add

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) > 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 120
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,250,200
palpostbright= 0,250,200
trans= add

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 =  time > 4
anim = 1206
id = 1206
pos = 0,8
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[state 3101, Front Lightning FX]
type = explod
triggerall = prevstateno = 1100
trigger1 = animelemtime(4) = 0
anim = 24300
id = 24300
pos = 5,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
scale = 1,1

[State 200, 1]
type = PlaySnd
triggerall = prevstateno = 1100
trigger1 = animelemtime(4) = 0
volumescale = 50
value = 2400, 2


[state 3101, Back Lightning FX]
type = explod
triggerall = prevstateno = 1100
trigger1 = animelemtime(7) = 0
anim = 24301
id = 24301
pos = 5,0
postype = P1
sprpriority = -1
ownpal = 1
removetime = -2
scale = 1,1

[State 8000, flash]
type = PalFX
trigger1 = var(35) = 1
trigger1 = animelemtime(2) < 0 || animelemtime(3) > 0
trigger2 = var(35) = 0
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 6100, snd]
type = playsnd
trigger1 = !time
value = 7,0
channel = -1
;----------------------------
;Start
[State 200, velset]
type = Velset
trigger1 = time < 12 && animelem != 1
x = 16

[state 300, velmul]
type = velmul
trigger1 = time > 15
x = .50

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = SA,AA

[State 8000, flash]
type = PalFX
triggerall = var(35) = 1
trigger1 = animelemtime(2) = 0
add = 255, 255, 255
time=3 
ignorehitpause = 1

[State 1000, snd]
type = playsnd
trigger1 = animelem = 5
value = 0,2

[State 200, 1]  
type = HitDef
trigger1 = animelem = 3
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,12 ;13,13
guard.pausetime = 6,12 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = 2
guard.velocity = 2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.fall = 1
air.velocity = 0,0
air.hittime = 28
air.animtype = back
ground.cornerpush.veloff = 0
getpower= 0,0
givepower = 18,18
yaccel = 0.5


[State 200, 1]  
type = HitDef
triggerall = prevstateno != 1100
trigger1 = animelem = 6
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 7,7 ;13,13
guard.pausetime = 7,7 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 23
ground.velocity = 2
guard.velocity = 2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
forcenofall = 1
air.velocity = 0,0
air.hittime = 23
ground.cornerpush.veloff = 0
p2facing = 1
envshake.time = 13
envshake.freq = 80
envshake.ampl = 7
getpower= 0,0
givepower = 18,18
yaccel = 0.5
ID = 2450

[State 200, 1]  
type = HitDef
triggerall = prevstateno = 1100
trigger1 = animelem = 6
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 7,7 ;13,13
guard.pausetime = 7,7 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -35,-50
hitsound = s3400, 1
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = 2
guard.velocity = 2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
fall = var(16) != 0
forcenofall = var(16) = 0
air.velocity = -4,-7
air.hittime = 28
ground.cornerpush.veloff = 0
p2facing = 1
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 18,18
yaccel = 0.5
ID = 2451

[state 3700, targetbind]
type = targetbind
triggerall = Numtarget(2450)
trigger1 = movehit  = 1
trigger1 = !(target,ishelper)
pos = 50,0
ignorehitpause = 1
persistent = 0

[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(2450)
trigger1 = movehit 
trigger1 = !(target,ishelper)
value = 2450
ID = 2450
ignorehitpause = 1
persistent = 0

[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(2451)
triggerall = var(16) = 0
trigger1 = movehit 
trigger1 = !(target,ishelper)
value = 2451
ID = 2451
ignorehitpause = 1
persistent = 0

[state 2410, limiter]
type = varset
triggerall = Numtarget(2451)
trigger1 = movehit 
trigger1 = !(target,ishelper)
trigger1 = var(16)  = 0
var(16) = 1
ignorehitpause = 1


[state 2400, changestate]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;-------------------------------------
;Ex Royal Buster(Old)
[statedef 2401]
type = S
movetype = A
physics = S
poweradd = -500
anim = 2400
juggle = 0
ctrl = 0


[State 1000, snd]
type = playsnd
triggerall = prevstateno = 1100
trigger1 = time = 4
value = 1100,0

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = SA,AA

[state 2400, playsnd]
type = playsnd
triggerall = anim = 2400
trigger1 = animelem = 7
value = 3,17
channel = 0
volumescale = 225

[State 1000, snd]
type = playsnd
triggerall = anim = 2400
trigger1 = animelem = 5
value = 0,2

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) <= 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 120
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 250,200,0
palpostbright= 250,200,0
trans= add

[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
triggerall = var(51) > 0
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 120
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,250,200
palpostbright= 0,250,200
trans= add

[state 3101, Smoke FX]
type = explod
triggerall = prevstateno = 1100
trigger1 =  time > 4
anim = 1206
id = 1206
pos = 0,8
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 6100, snd]
type = playsnd
trigger1 = !time
value = 7,0
channel = -1
;----------------------------
;Start
[State 200, velset]
type = Velset
trigger1 = time < 12 && animelem != 1
x = 16

[state 300, velmul]
type = velmul
trigger1 = time > 15
x = .50

[state 300, nothitby]
type = nothitby
triggerall = prevstateno = 1100
trigger1 = time <= 15
value = SA,AA

[State 1000, snd]
type = playsnd
triggerall = anim = 2400
trigger1 = animelem = 5
value = 0,2

[State 200, 1]  
type = HitDef
triggerall = anim = 2400
trigger1 = animelem = 6
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 10 < 4, 4, fvar(11) * 10)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 3,18 ;13,13
guard.pausetime = 3,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = 2
guard.velocity = 2
airguard.velocity = -2.5,-1.3
air.type = High
fall.recover = 0
air.fall = ifelse(prevstateno = 1100,0,1)
forcenofall = ifelse(prevstateno = 1100,1,0)
kill = ifelse(prevstateno = 1100,0,1)
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)


[state 2400, changeanim]
type = changeanim
triggerall = anim = 2400 && animelem = 9
trigger1 = movecontact
value = 2401
;-------------------------------------
;Hit

[State 1000, snd]
type = playsnd
triggerall = anim = 2401
trigger1 = animelem = 3
value = 0,2

[State 1000, snd]
type = playsnd
triggerall = anim = 2401
trigger1 = animelem = 7
value = 0,2

[State 200, 1]  
type = HitDef
triggerall = anim = 2401
trigger1 = animelem = 3 
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 1,1 ;13,13
guard.pausetime = 1,13 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -1
guard.velocity = 0
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = 0,-4
air.hittime = 28
fall.recover = 0
air.fall = 1
air.animtype = back
kill = ifelse(prevstateno = 1100,0,1)
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = anim = 2401
trigger1 =  animelem = 7
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,0 
guard.pausetime = 0,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 30
guard.ctrltime = 20
ground.velocity = -1
guard.velocity = 0
airguard.velocity = -2.5,-1.3
fall.recover = 0
air.type = High
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
kill = ifelse(prevstateno = 1100,0,1)
air.animtype = back
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 1098

[state 2400, changeanim]
type = changeanim
triggerall = anim = 2401
triggerall = prevstateno != 1100
trigger1 = time = 77
value = 2402

[state 2400, changeanim]
type = changeanim
triggerall = anim = 2401
triggerall = prevstateno = 1100
trigger1 = time = 51
value = 2403



;-------------Enhanced-------------------------

[State 1000, snd]
type = playsnd
triggerall = anim = 2403
trigger1 = animelem = 3
value = 0,2

[State 1000, snd]
type = playsnd
triggerall = anim = 2403
trigger1 = animelem = 7
value = 0,2

[State 1000, snd]
type = playsnd
triggerall = anim = 2403
trigger1 = animelem = 11
value = 0,2

[State 1000, snd]
type = playsnd
triggerall = anim = 2403
trigger1 = animelem = 14
value = 0,2

[State 200, 1]  
type = HitDef
triggerall = anim = 2403
trigger1 = animelem = 4
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 10 < 4, 4, fvar(11) * 10)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 10,6
guard.pausetime = 10,26
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 40
ground.velocity = -16
guard.velocity = -16
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = 0,-4
air.hittime = 28
air.animtype = back
kill = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = anim = 2403
trigger1 = animelem = 8 
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 15 < 4, 4, fvar(11) * 15)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 30,30
guard.pausetime = 30,30
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = 0
guard.velocity = 0
airguard.velocity = -2.5,-1.3
air.type = Low
air.velocity = 0,-4
air.hittime = 28
kill = ifelse(animelemtime(8) = 0,0,1)
air.animtype = back
envshake.time = 23
envshake.freq = 80
envshake.ampl = 11
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = anim = 2403
trigger1 =  animelem = 12
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 15 < 4, 4, fvar(11) * 15)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 30,30
guard.pausetime = 30,30
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = 0
guard.velocity = 0
airguard.velocity = -2.5,-1.3
air.type = High
air.velocity = 0,-4
air.hittime = 28
kill = 0
air.animtype = back
envshake.time = 23
envshake.freq = 80
envshake.ampl = 11
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]  
type = HitDef
triggerall = anim = 2403
trigger1 = animelem = 16
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 15 < 4, 4, fvar(11) * 15)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 15,30
guard.pausetime = 15,30
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 24
ground.velocity = 0
guard.velocity = 0
airguard.velocity = -2.5,-1.3
air.type = Low
air.velocity = 0,-4
air.hittime = 28
air.animtype = back
envshake.time = 23
envshake.freq = 80
envshake.ampl = 11
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, velset]
type = Velset
triggerall = anim = 2403 
trigger1 =  animelemtime(6) >= 0 && animelemtime(8) < 0
x = 12


[state 2400, I'm onto you]
type = playsnd
triggerall = anim = 2403
trigger1 = animelem = 8
value = 19736,1
channel = 0

[state 2400, changeanim]
type = changeanim
triggerall = anim = 2403
trigger1 = animtime = 0
value = 2402

[state 3700, targetbind]
type = targetbind
triggerall = Numtarget(2450)
trigger1 = movehit  = 1
trigger1 = !(target,ishelper)
pos = 50,0
ignorehitpause = 1

[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(2450)
trigger1 = movehit 
trigger1 = !(target,ishelper)
value = 2450
ID = 2450
ignorehitpause = 0
persistent = 0

[state 2400, calm down]
type = statetypeset
trigger1 = anim = 2402
movetype = I

[state 2400, changestate]
type = changestate
triggerall = anim = 2400 || anim = 2402
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Ex Buster Ender
[Statedef 2410]
type = S 
movetype = A
physics = S
poweradd = -500
anim = 2410
juggle = 0
ctrl = 0

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 2410
trigger1 = animelem = 2
x = 33

[state 803, playsnd]
type = playsnd
triggerall = anim = 2410
trigger1 = animelemtime(4) = 0
value = 3010,0+random%2
channel = 0

[state 803, playsnd]
type = playsnd
triggerall = anim = 2410
trigger1 = animelemtime(3) = 0
value = 0,2



[State 41, Train]
type = AfterImage
triggerall = var(51) != 2
trigger1 = prevstateno = 1100
trigger1 = time = 0
time= 160
timegap= 1
framegap= 6
length= 20
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 6100, snd]
type = playsnd
trigger1 = !time
value = 7,0
channel = -1


[State 200, 1]  
type = HitDef
triggerall = anim = 2410
trigger1 = animelem = 4
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 3,18 ;13,13
guard.pausetime = 3,18 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = 4
guard.velocity = 2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13+(prevstateno = 1100*7)
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)


[State 0, Super FX]
type = Helper
triggerall = anim = 2410
trigger1 = animelemtime(3) = 0
stateno = 24100
id = 24100
pos = 41,-10
postype = p1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 8
ownpal = 1
scale = 1,1
persistent = 0

;-------Jump Back-----------------


[state 2410, statetypeset]
type = statetypeset
triggerall = anim = 2410
trigger1 = animelemtime(11) = 0
statetype = A
physics = N

[state 2410, velset]
type = velset
triggerall = anim = 2410
trigger1 = animelemtime(11) = 0
x = -2
y = -3



[state 2410, veladd]
type = veladd
triggerall = anim = 2410
trigger1 =  animelemtime(13) >= 0
y = .35

;------Land----------------


[state 803, changeanim]
type = changeanim
triggerall = anim = 2410
trigger1 = pos Y >= 0 && Vel y > 0
value = 48

[state 420, rise]
type = statetypeset
triggerall = statetype = A
trigger1 = pos y >= 0 && vel y > 0
physics = S
statetype = S

[state 52, Land FX]
type = helper
trigger1 = anim = 48 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 48 && animelemtime(1) = 1
value = 40, 0

[state 751, posset]
type = posset
trigger1 = pos y > 0
y = 0

[state 751, velset]
type = velset
trigger1 = pos y >= 0 && vel y > 0
y = 0



[state 2410, changestate]
type = changestate
triggerall = anim = 48
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------
;Hit by EX Royal Buster
[statedef 2450]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1

[state 2450, playerpush]
type = playerpush
trigger1 = time <= 2
value = 0

[state 2450, posset]
type= posset
trigger1 = !time
x = enemynear, pos X + (20 * enemynear,facing)
y = 0 - (60 * name = "Vegetto Z2")

[state 2450, posset]
type= null
trigger1 = !time
x = 5


[state 2450, changeanim2]
type = null
trigger1 = !time
value = 2450

[state 1060, changestate]
type = selfstate
trigger1 = !time
value = 5000
;----------------------------
;Hit by Enhanced EX Royal Buster
[statedef 2451]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1

[state 2451, changeanim2]
type = changeanim2
trigger1 = !time
value = 2451

[state 2451, velset]
type = velset
trigger1 = !time
x = -.3
y = -.4

[State -2, CAPCOM Blue Shock PalFX]
type = Palfx
trigger1 = 1
time = 1
add = Ceil(100 -80 * sin(2 * pi * gametime / 10)),Ceil(100 -80 * sin(2 * pi * gametime / 10)),Ceil(180 -80 * sin(2 * pi * gametime / 10))
color = 0 
invertall = 0
ignorehitpause = 1



[state 2451, left shake]
type = offset
triggerall = anim = 2451
trigger1 = time%2 = 0 
x = -2.5

[state 2451, right shake]
type = offset
triggerall = anim = 2451
trigger1 = time%2 != 0
x = 2.5


[state 2451, changeanim]
type = changeanim
triggerall = anim = 2451
trigger1 = !animtime
value = 5061

[state 2451, velset]
type = velset
trigger1 = anim = 5061 && animelemtime(1) = 0
x = -1.5
y = -7

[state 2451, veladd]
type = veladd
triggerall = anim != 2451
trigger1 = pos y < 0 
y = .50


[state 2451, selfstate]
type = selfstate
triggerall = anim != 2451
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode != Simul
trigger2 = enemyNear,TeamMode != Simul
trigger3 = alive
value = 5100


[state 2451, selfstate]
type = changestate
triggerall = anim != 2451
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100