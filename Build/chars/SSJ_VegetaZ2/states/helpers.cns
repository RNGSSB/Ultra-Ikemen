;======================================================================
;---------------------------
;Detect life Helper (Coded by 2OS)
[Statedef 2]

[State 2OS]
type = statetypeset
trigger1 = 1
movetype = I
ignorehitpause = 1
persistent = 1

[State 2OS, Blank Animation]
type = changeanim
trigger1 = 1
value = 15999
ignorehitpause = 1
persistent = 1

[State 2OS]
type = bindtoroot
trigger1 = 1
pos = 0,0
ignorehitpause = 1
persistent = 1

[State 2OS, Damage Var Delay Reset]
type = varset
trigger1 = var(1)>1
var(1) = 0
ignorehitpause = 1
persistent = 1

[State 2OS, Damage Var Delay]
type = varadd
trigger1 = var(2) != root,life
var(1) = 1
ignorehitpause = 1
persistent = 1

[State 2OS, Damage Var]
type = varset
trigger1 = (var(1)!=[0,1])
var(2) = root,life
ignorehitpause = 1
persistent = 1



;======================================================================
; POWER CHARGE AURA
[Statedef 905]
type = A
MoveType = I
physics = N
ctrl = 0
anim = cond(root,var(51) = 0,905,cond(root,var(51) = 1,914,912))
velset = 0,0
sprpriority = -1

[State 1902, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1061, NoShadow]
type = Trans
trigger1 = 1
trans = none
ignorehitpause = 1

[State 1902, BindToParent]
type = BindToParent
trigger1 = anim = 914
pos = 0,0

[State 1902, BindToParent]
type = BindToParent
trigger1 = anim = 912
pos = -12,-2

[State 1902, BindToParent]
type = BindToParent
triggerall = root, anim != 701
trigger1 = anim = 905 
pos = -7,-2

[State 1902, BindToParent]
type = BindToParent
triggerall = root,anim = 701
trigger1 = anim = 905 
pos = -20,-2

[State 1902, BindToParent]
type = BindToParent
triggerall = root,anim = 701
trigger1 =  anim = 910
pos = -15,-20


[State 1902, Anim]
type = ChangeAnim
triggerall = root,anim = 701
trigger1 = anim != 910
value = 910

[State 1902, Anim]
type = ChangeAnim
triggerall = anim = 905 || anim = 910 || anim = 912
trigger1 = root,stateno = 901
trigger2 = root,anim = 702 
trigger3 = root, anim = 706
trigger3 = root,animelemtime(135) = 0
trigger4 = root,anim = 713
trigger4 = root,animelemtime(20) = 0
value = cond(root,var(51) = 0,906,cond(root,var(51) = 1,906,913))

[State 1902, DestroySelf]
type = DestroySelf
trigger1 = (anim = 905 || anim = 912 || anim = 914) && (Root,StateNo != 900 && root, stateno != 701)
trigger1 = root,stateno != 3100 && root, stateno != [704,705]
trigger2 = (anim = 906 || anim = 913) && animTime = 0
trigger3 = Root,stateno = [5000,5090]
trigger4 = anim = 905 && root, var(51) > 0
;---------------------;------------------------------------------------------------------------------;
;Dead End Helper States
;------------------------------------------------------------------------------;
[Statedef 755]
type    = S
movetype= A
physics = N
sprpriority = 3
hitcountpersist = 1
movehitpersist = 1

[state 755, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 193, Explod]
type = Explod
trigger1 = !time 
anim = 754
ID = 754
pos = 0,50
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
sprpriority = 4
removeongethit = 1
supermovetime = 40
persistent = 0
scale = .5,.5

[State 193, Explod]
type = Explod
trigger1 = !time 
anim = 756
ID = 756
pos = 0,50
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
sprpriority = 4
removeongethit = 1
supermovetime = 40
persistent = 0
scale = .5,.5

[state 755, destroyself]
type = destroyself
trigger1 = root,stateno != 751
trigger2 = animtime = 0
;----------------------------
;Throw Ki blast Helper
[Statedef 1010]
type    = S
movetype= A
physics = N
juggle = 15
anim = 8070
sprpriority = 5
hitcountpersist = 1
movehitpersist = 1


[State 0, AngleDraw]
type = AngleDraw
trigger1 = Anim = 8070 
value = -90
ignorehitpause = 1


[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow





[State 1061, Velocity]
type = VelSet
trigger1 = Time = 0
y = 6

[State 1061, Velocity]
type = VelSet
trigger1 = Movehit
x = 0

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA
ignorehitpause = 1



[State 1061, Hitdef]
type = HitDef
trigger1 = 1
attr = A, HA
animtype  = hard
;ceil(23*root,fvar(15)), ceil(3*root,fvar(15))
damage    = 20,0
priority  = 4,Hit
guardflag = MA
hitflag = MAFD
pausetime = 0,10
sparkno = s7010
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.8,0
guard.velocity = -3.5
air.velocity = -3.8,-2
airguard.velocity = -3, -2
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
fall = 1
fall.recover = 0
fall = Cond(root,fVar(39)>=5,1,0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = ifelse(p2movetype=H,40,140), 10
givepower = 35,35
id = 3060


[state 801, targetstate]
type = targetstate
triggerall = NumTarget(3060)
trigger1 = movehit
ignorehitpause = 0
persistent = 0
value = 814

[State 3001, Guardshake]
type = envshake
trigger1 = moveguarded
time = 4
ampl = 6
freq = 176
ignorehitpause = 1



[State 1061, End]
type = destroyself
trigger1 = (pos x!=[-240,240])
trigger2 = time>180

[State 1061, Fade]
type = changestate
trigger1 = movecontact = 1
value = 1013
ignorehitpause = 1

;----------------------------------------------------
;KI BLAST HELPER VANISHES
[Statedef 1013]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 1319
sprpriority = 5
velset = -2,0

[state 1013, just in case]
type = nothitby
trigger1 = 1
value = SCA 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = Anim = 1319
value = -90
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
;trigger1 = root,var(2)=0
trigger1 = 1
trans = none
ignorehitpause = 1

[State 1061, NoJuggle Safety]
type = parentvarset
trigger1 = !time
v = 18
value = 0

[State 1002, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, End]
type = destroyself
trigger1 = animtime = 0
;=====================================
; Run Dust FX
;=====================================

[Statedef 10000]
type = S
movetype = I
physics = N
anim = 10000
sprpriority = 5
velset = 0,0

[State 1061, Bind]
type = BindToRoot
trigger1 = 1
time = 1
pos = -40,4+ceil(-root,pos Y)

[State 1002, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, End]
type = destroyself
trigger1 = animtime = 0

;=====================================
;Target Slide Dust FX
;=====================================

[Statedef 10001]
type = S
movetype = I
physics = N
anim = 10000
sprpriority = 5
velset = 0,0


[state 10001, posset]
type = posset
trigger1 = playerid(root,var(2)),pos y = 0
x = playerid(root,var(2)),  pos x - (40*facing)
y = 4

[State 1002, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, End]
type = destroyself
trigger1 = animtime = 0


;======================================================================
; Repel helper : 1305
; Destroyed : 1306
; Reflect with random projectile : 1308
; Reflected projectile : 1315
; Reflected projectile explods : 1316
;======================================================================

; REPEL HELPER FOR Focus Attack
[Statedef 1305]
type = S
physics = N
movetype = A
ctrl = 0
sprpriority = 4

[State 1305, nothitby]
type = nothitby
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1

[State 1305, HB]
type = hitby
trigger1 = 1
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 1305, HitOverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA, AA, AP, AT
stateno = 1306
ignorehitpause = 1

[State 1305, HitOverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA, NP, SP,HP
stateno = 1308
ignorehitpause = 1

[State 1305, Anim]
type = changeanim
trigger1 = anim != 1305
value = 1305

[State 1305, timevar]
type = varadd
trigger1 = 1
var(4) = 1

[State 1305, Shadows]
type = afterimage
trigger1 = !time && !prevstateno
time = 999
timegap = 1
framegap = 4
length = 12
palcontrast = 30, 60, 120
trans = add

[State 1305, Type]
type = statetypeset
trigger1 = movecontact
movetype = I

[State 1305, End]
type = changestate
trigger1 = var(4) >= 13
value = 1306

;-----------------------------------------
; Destroyed
[Statedef 1306]
type = A
physics = N
movetype = I
velset = 0, 0
ctrl = 0
sprpriority = 1
anim = 15998

[State 3000, nhb]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 1306, End]
type = destroyself
trigger1 = !animtime

;-----------------------------------------
; Reflect with projectile
[Statedef 1308]
type = A
physics = N
movetype = I
ctrl = 0
anim = 15998

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 1308, reflected]
type = helper
trigger1 = !time
stateno = 1315
ID = 1315
name = "Reflected"
postype = p1
pos = 25, -20
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1308, End]
type = changestate
trigger1 = 1
value = 1306   ;1305

;-----------------------------------------
; Reflected projectile Kamehameha
[Statedef 1315]
type=S
physics=N
movetype=A
ctrl=0
velset=0,0
sprpriority=4
poweradd = 100

[State 200, Ki goes SFX]
type = PlaySnd
trigger1 = !time
value = 10,0
channel = 1

[State -2, Explod];P1 Side.
type = Explod
trigger1 = !time && numexplod(13300)=0 && teamside = 1
anim = 13300
pos = 10,80
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
;scale = 0.5,0.5
sprpriority = 0
id = 13300
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod];P2 Side.
type = Explod
trigger1 = !time && numexplod(13300)=0 && teamside = 2
anim = 13301
pos = -169,80 ;-95,80
postype = right ;left
removetime = -2
supermove = 1
;scale = 0.5,0.5
sprpriority = 0
id = 13300
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
;trigger1 = root,var(2)=0
trigger1 = 1
trans = none
ignorehitpause = 1

[State 1315, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1316
ignorehitpause=1

[State 1315, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[state 1315]
type = varset
triggerall = numenemy
triggerall = enemy,authorname = "Team Z2"
trigger1 = enemy,name = "Goku Z2"
trigger2 = enemy,name = "SSJ Goku Z2"
trigger3 = enemy,name = "Vegeta Z2"
trigger4 = enemy,name = "Gohan Z2"
var(11) = 1

[State 1315, Anim];normal kamehameha FX (yellow/blue)
type=changeanim
trigger1= !time && !prevstateno && var(11)=0 && root,var(44)=0
value=1311
[State 1315, Anim];normal kamehameha FX (old purple)
type=changeanim
trigger1= !time && !prevstateno && var(11)=0 && root,var(44)>=1
value=1310
[State 1315, Anim];Vegeta kamehameha FX
type=changeanim
trigger1= !time && !prevstateno && var(11)=1
value=1318

[State 1315, Vel]
type=velset
trigger1= 1
x = 8

[State 1315, image]
type=afterimage
trigger1= !time && !prevstateno
time=999
timegap=1
framegap=2
length=5
palcontrast=50,50,200
trans=add

[State 1315, Hit]
type=hitdef
trigger1= 1
priority=4,Hit
attr = S,SP
;damage = ceil(61*root,fvar(12)), ceil(6*root,fvar(12))
damage = ceil(ifElse((root,fvar(11)) * 61 < 7, 7, (root,fvar(11)) * 61)), 6
animtype = Hard
hitflag = MAF
guardflag=MA
pausetime=0,10
sparkno = -1
guard.sparkno = -1
sparkxy = -10,0
hitsound  = S1000,0
guardsound = S6,1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-10,0
ground.cornerpush.veloff=0
air.velocity=-4,-2
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
envshake.time=14
envshake.freq=120
envshake.ampl=4
air.fall=1
fall.recover=1
fall.recovertime=16
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
forcestand=1
p1sprpriority = 5

[State 0, VarAdd]
type = ParentVarAdd
trigger1 = MoveHit = 1
fvar(13) = 1

[State 1315, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=7020
sprpriority=3
postype=p2
pos=(target,const(size.ground.front)-10),-floor(p2dist y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 1315, End]
type=changestate
trigger1= movecontact
value=1316
ignorehitpause=1

[State 1315, End]
type=destroyself
trigger1=pos x!=[-200,200]

;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 1316]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];VS Z2 chars
type = changeanim
trigger1 = !time && var(11)=1
value = 1013
[State 3005, anim];Repel (old)
type = changeanim
trigger1 = !time && var(11)=0 && prevstateno=1315 && root,var(44)>=1
value = 1316
[State 3005, anim];Repel (yellow/blue)
type = changeanim
trigger1 = !time && var(11)=0 && prevstateno=1315 && root,var(44)=0
value = 1311

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
;trigger1 = root,var(2)=0
trigger1 = 1
trans = none
ignorehitpause = 1

[State 1316, End]
type=destroyself
trigger1= !animtime
;-----------------------------------------
;Intro Squid
[Statedef 1910]
type=A
physics=N
movetype=I
velset=0,-9
ctrl=0
anim = 70303
sprpriority=4


[state 1910, destroyself]
type = destroyself
trigger1 = root, stateno != 702
;==========================================================
; SUPER BG - Street Fighter 3

[Statedef 19875]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = time <= 55
flag = noFG

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 10000, Explod]; White BG
type = Explod
trigger1 = time = 0
anim = 19877
id = 19875
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 99999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
scale = 1.20,1.20
ignorehitpause = 1
persistent = 0

[State 10000, Explod SF3]
type = Explod
trigger1 = time = 0
anim = 19875
id = 10000
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
scale = 1.20*0.9,1.20*1.05
ignorehitpause = 1
persistent = 0

[State 10000, pause]
type = Pause
trigger1 = Time = 0
time = 40
movetime = 40

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 44
id = 10000

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 55
id = 10500

[State 8020, End]
type = destroyself
trigger1 = !(roundstate>2)
trigger2 = time=1000
;-----------------------------------------
; Reflected projectile Kamehameha
[Statedef 1315]
type=S
physics=N
movetype=A
ctrl=0
velset=0,0
sprpriority=4
poweradd = 100

[State 200, Ki goes SFX]
type = PlaySnd
trigger1 = !time
value = 10,0
channel = 1

[State -2, Explod];P1 Side.
type = Explod
trigger1 = !time && numexplod(13300)=0 && teamside = 1
anim = 13300
pos = 10,80
postype = left  ;p2,front,back,left,right
removetime = -2
;scale = 0.5,0.5
sprpriority = 0
id = 13300
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod];P2 Side.
type = Explod
trigger1 = !time && numexplod(13300)=0 && teamside = 2
anim = 13301
pos = -169,80
postype = right
removetime = -2
;scale = 0.5,0.5
sprpriority = 0
id = 13300
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
;trigger1 = root,var(2)=0
trigger1 = 1
trans = none
ignorehitpause = 1

[State 1315, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1316
ignorehitpause=1

[State 1315, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[state 1315]
type = varset
triggerall = numenemy
triggerall = enemy,authorname = "Balthazar & Cybaster"
trigger1 = enemy,name = "Goku Z2"
trigger2 = enemy,name = "SSJ Goku Z2"
trigger3 = enemy,name = "Vegeta Z2"
trigger4 = enemy,name = "Gohan Z2"
var(11) = 1

[State 1315, Anim];normal kamehameha FX (yellow/blue)
type=changeanim
trigger1= !time && !prevstateno && var(11)=0 && root,var(44)=0
value=1311
[State 1315, Anim];normal kamehameha FX (old purple)
type=changeanim
trigger1= !time && !prevstateno && var(11)=0 && root,var(44)>=1
value=1310
[State 1315, Anim];Vegeta kamehameha FX
type=changeanim
trigger1= !time && !prevstateno && var(11)=1
value=1010

[State 1315, Vel]
type=velset
trigger1= 1
x = 8

[State 1315, image]
type=afterimage
trigger1= !time && !prevstateno
time=999
timegap=1
framegap=2
length=5
palcontrast=50,50,200
trans=add

[State 1315, Hit]
type=hitdef
trigger1= 1
priority=4,Hit
attr = S,SP
damage = ceil(61*root,fvar(12)), ceil(6*root,fvar(12))
animtype = Hard
hitflag = MAF
guardflag=MA
pausetime=0,10
sparkno = -1
guard.sparkno = -1
sparkxy = -10,0
hitsound  = S999,0
guardsound = S6,1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-10,0
ground.cornerpush.veloff=0
air.velocity=-4,-2
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
envshake.time=14
envshake.freq=120
envshake.ampl=4
air.fall=1
fall.recover=1
fall.recovertime=16
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
forcestand=1
p1sprpriority = 5

[State 1315, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=7020
sprpriority=3
postype=p2
pos=(target,const(size.ground.front)-10),-floor(p2dist y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 1315, End]
type=changestate
trigger1= movecontact
value=1316
ignorehitpause=1

[State 1315, End]
type=destroyself
trigger1=pos x!=[-200,200]

;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 1316]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];VS Z2 chars
type = changeanim
trigger1 = !time && var(11)=1
value = 1013
[State 3005, anim];Repel (old)
type = changeanim
trigger1 = !time && var(11)=0 && prevstateno=1315 && root,var(44)>=1
value = 1316
[State 3005, anim];Repel (yellow/blue)
type = changeanim
trigger1 = !time && var(11)=0 && prevstateno=1315 && root,var(44)=0
value = 1311

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
;trigger1 = root,var(2)=0
trigger1 = 1
trans = none
ignorehitpause = 1

[State 1316, End]
type=destroyself
trigger1= !animtime
;----------------------------------------------------
; This is an EX as long as I LIIIIIIVVVVVE
[Statedef 1606]
type    = S
movetype= I
physics = N
anim = 1606
sprpriority = 1
velset = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root, MoveType != A
trigger2 = root, StateNo = 1038

;---------------------------
; SSB Shield AURA
[Statedef 2705]
type = A
movetype = A
physics = N
ctrl = 0
anim = 2705
velset = 0,0
sprpriority = 5

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,HP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600


[State 905, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 222, hit]
type = HitDef
trigger1 = Time = 1
attr = A, HP
damage = 0
animtype = Hard	
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,13
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = s7000
sparkxy = -17,-73
hitsound = s2705,0
;guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 24
ground.velocity = -6,0
guard.velocity = -9
guard.ctrltime = 10
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-2
air.hittime = 12
air.animtype = back
fall.recover = 0
getpower= 0,0
givepower = 0,0
yaccel = 0.5
fall = 0
ID = 1098

[State 905, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 905, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

;==========================================================
; EMOTION GAUGE HELPER P1
[Statedef 2750]
physics = N
velset = 0, 0
sprpriority = 7
anim = 15999





[State 3033, Assert]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

;2750 = frame
;2751 = full emo (orange)
;27510 = full buffer (blue)
;2752 = grey
;27520 = grey kanji
;2753 = yellow kanji
;2754 = orange kanji
;2755 = red kanji
;2756, 0-5 = flames
;2757,2758,2759 = fades

[State -2, Explod];Empty bar EMOTION 
type = Explod
triggerall = root,var(51) != 2 
trigger1 = !NumExplod(2751) 
anim = 2751
pos = 113+(root,var(45)),234-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2751
facing = -1
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale full finisher bar 
type = ModifyExplod
triggerall= root,var(52) < 3000
trigger1 = NumExplod(2751)
scale = ifelse(root,Var(52)<1000, (root,Var(52))/1000.0, ifelse(root,Var(52)>=2000, (root,Var(52)-2000)/1000.0, (root,Var(52)-1000)/1000.0)),1
id = 2751

[State -2, Explod];Finisher Bar Flashing
type = Explod
triggerall = root,var(51) = 2 
trigger1 = !NumExplod(2753) 
anim = 2753
pos = 113+(root,var(45)),234-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2753
facing = -1
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale flashing finisher bar 
type = ModifyExplod
triggerall= root,var(52) < 3000 && root,var(51) = 2
trigger1 = NumExplod(2753)
scale = ifelse(root,Var(52)<1000, (root,Var(52))/1000.0, ifelse(root,Var(52)>=2000, (root,Var(52)-2000)/1000.0, (root,Var(52)-1000)/1000.0)),1
id = 2753

[State -2, Explod];Lvl 0
type = Explod
triggerall = root,var(52) < 1000 
trigger1 = !NumExplod(2780) 
anim = 2780
pos = 25+(root,var(45)),235-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2780
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(52) >= 1000
trigger2 = root,var(51) < 1
id = 2780
ignorehitpause = 1

[State -2, Explod];Lvl 1
type = Explod
triggerall = root,var(52) >= 1000  && root,var(52) < 2000
trigger1 = !NumExplod(2781) 
anim = 2781
pos = 25+(root,var(45)),235-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2781
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999


[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(52) >= 2000 || root,var(52) < 1000
trigger2 = root,var(51) < 1
id = 2781
ignorehitpause = 1

[State -2, Explod];Lvl 2
type = Explod
triggerall = root,var(52) >= 2000  && root,var(52) < 3000
trigger1 = !NumExplod(2782) 
anim = 2782
pos = 25+(root,var(45)),235-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2782
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(52) >= 3000 || root,var(52) < 2000
trigger2 = root,var(51) < 1
id = 2782
ignorehitpause = 1

[State -2, Explod];Lvl MAX
type = Explod
triggerall = root,var(52) >= 3000  
trigger1 = !NumExplod(2783) 
anim = 2783
pos = 25+(root,var(45)),235-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2783
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999


[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(51) < 1 || root,var(52) < 3000
id = 2783
ignorehitpause = 1



[State -2, Explod];Saiyan Step Bar
type = Explod
trigger1 = !NumExplod(2800) 
anim = 2752
pos = 113+(root,var(45)),229-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2800
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale full bar
type = ModifyExplod
trigger1 = NumExplod(2800)
scale = (root,var(19)/1000.0),1
id = 2800

[State -2, Explod];Saiyan Step Bar Greyed Out
type = Explod
triggerall = !NumExplod(2801)
trigger1 = root,var(51) = 2 
anim = 2754
pos = 113+(root,var(45)),229-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2801
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999




[State -2, Explod];Frame
type = Explod
trigger1 = !NumExplod(2750) 
anim = 2750
pos = 44+(root,var(45)),234-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2750
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999







[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) < 1
id = 2750
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) != 1
id = 2751
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) < 1
id = 2753
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) != 1
id = 2800
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) < 1
id = 2801
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(51) < 1
id = 2783
ignorehitpause = 1




[State 3033, End]
type = destroyself
trigger1 = (root,var(51))<=0 
;==========================================================
; EMOTION GAUGE HELPER P2
[Statedef 2760]
physics = N
velset = 0, 0
sprpriority = 7
anim = 15999

[State 3033, Assert]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

;2760 = frame
;2761 = full blue
;27610 = full orange
;2762 = grey
;27620 = black kanji
;2753 = yellow kanji
;2754 = orange kanji
;2755 = red kanji
;2756, 0-5 = flames
;2767,2768,2769 = fades

[State -2, Explod];Empty bar EMOTION 
type = Explod
triggerall = root,var(51) != 2
trigger1 = !NumExplod(2761) 
anim = 2761
pos = 281-(root,var(45)),234-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
facing = 1
id = 2761
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale full finisher bar
type = ModifyExplod
triggerall= root,var(52) < 3000
trigger1 = NumExplod(2761)
scale = ifelse(root,Var(52)<1000, (root,Var(52))/1000.0, ifelse(root,Var(52)>=2000, (root,Var(52)-2000)/1000.0, (root,Var(52)-1000)/1000.0)),1
id = 2761

[State -2, Explod];Scale full finisher bar
type = ModifyExplod
triggerall= root,var(52) = 3000
trigger1 = NumExplod(2761)
scale = 1,1
id = 2761

[State -2, Explod];Finisher Bar Flashing
type = Explod
triggerall = root,var(51) = 2
trigger1 = !NumExplod(2763) 
anim = 2763
pos = 281-(root,var(45)),234-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
facing = 1
id = 2763
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale flashing finisher bar
type = ModifyExplod
triggerall= root,var(52) < 3000
trigger1 = NumExplod(2763)
scale = ifelse(root,Var(52)<1000, (root,Var(52))/1000.0, ifelse(root,Var(52)>=2000, (root,Var(52)-2000)/1000.0, (root,Var(52)-1000)/1000.0)),1
id = 2763

[State -2, Explod];Lvl 0
type = Explod
triggerall = root,var(52) < 1000 
trigger1 = !NumExplod(2780) 
anim = 2780
pos = 300+(root,var(45)),235-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2780
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(52) >= 1000 
trigger2 = root,var(51) < 1
id = 2780
ignorehitpause = 1

[State -2, Explod];Lvl 1
type = Explod
triggerall = root,var(52) >= 1000  && root,var(52) < 2000
trigger1 = !NumExplod(2781) 
anim = 2781
pos = 300+(root,var(45)),235-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2781
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(52) >= 2000 || root,var(52) < 1000
trigger2 = root,var(51) < 1
id = 2781
ignorehitpause = 1



[State -2, Explod];Lvl 2
type = Explod
triggerall = root,var(52) >= 2000  && root,var(52) < 3000
trigger1 = !NumExplod(2782) 
anim = 2782
pos = 300+(root,var(45)),235-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2782
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999


[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(52) >= 3000 || root,var(52) < 2000
trigger2 = root,var(51) < 1
id = 2782
ignorehitpause = 1


[State -2, Explod];Lvl MAX
type = Explod
triggerall = root,var(52) >= 3000  
trigger1 = !NumExplod(2783) 
anim = 2783
pos = 300+(root,var(45)),234-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2783
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(51) < 1 || root,var(52) < 3000
id = 2783
ignorehitpause = 1

[State -2, Explod];Saiyan Step Bar
type = Explod
triggerall = root,var(51) != 2
trigger1 = !NumExplod(2800) 
anim = 2752
pos = 212-(root,var(45)),229-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
facing = -1
id = 2800
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State -2, Explod];Scale Saiyan Step Bar
type = ModifyExplod
trigger1 = NumExplod(2800)
scale = (root,var(19))/1000.0,1
id = 2800

[State -2, Explod];Grey Saiyan Step Bar
type = Explod
triggerall = root,var(51) = 2
trigger1 = !NumExplod(2801) 
anim = 2754
pos = 212-(root,var(45)),229-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
facing = -1
id = 2801
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999




[State -2, Explod];Frame
type = Explod
trigger1 = !NumExplod(2760) 
anim = 2760
pos = 281-(root,var(45)),234-(root,var(46))
postype = left
removetime = -1
scale = 1,1
sprpriority = 5
id = 2760
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) < 1
id = 2750
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) != 1
id = 2761
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) < 1
id = 2763
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) != 1
id = 2800
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 =  root,var(51) < 1
id = 2801
ignorehitpause = 1

[State 195, removeexplod]
type = removeexplod
trigger1 = root,var(51) < 1
id = 2760
ignorehitpause = 1





[State 3033, End]
type = destroyself
trigger1 = (root,var(51))<=0 
;---------------------------
;Major Bakuhatsuha projectile (Unused)
[Statedef 2800]
type = S
movetype = A
physics = N
ctrl = 0
anim = 2800
velset = 0,0
sprpriority = 5

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

[state 2800, turn]
type = turn
trigger1 = ifelse(facing = -1,Pos X < -150,ifelse(Pos X > 150,1,0))

[state 2800, playsnd]
type = playsnd
trigger1 = animelemtime(3) = 0
value = 3300,1

[State 1061, Hitdef]
type = HitDef
trigger1 = animelemtime(3) = 0
attr = S, HP
animtype  = hard
;ceil(23*root,fvar(15)), ceil(3*root,fvar(15))
damage    = 5,2
priority  = 4,Hit
guardflag = MA
hitflag = MAFD
pausetime = 0,5
sparkno = s7010
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -1,0
guard.velocity = -1
air.velocity = -2,-2
airguard.velocity = -2, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 10,5

[state 2800, envshake]
type = envshake
trigger1 = animelemtime(3) = 0
ampl = 3
time = 6
freq = 40

[State 0, Super FX]
type = Helper
trigger1 = root,var(52) > 0 && animelemtime(5) = 0
stateno = 2800
id = 2800
pos = 40,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 8
ownpal = 1
scale = 1,1
persistent = 0

[state 2800, destroyself]
type = destroyself
trigger1 = animtime = 0

;======================================================================
;Exit Bomb
[Statedef 3103]
type = A
MoveType = A
physics = N
anim = 3102
ctrl = 0
sprpriority = 4

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

[state 3103, varset]
type = varset
trigger1 = !time
var(1) = root, anim


[state 3103, varset]
type = parentvaradd
trigger1 = movehit = 1
var(29) = 1
ignorehitpause = 1

[state 3103, pos x]
type = posset
trigger1 = time > 0
x = enemynear,pos X
y = enemynear,pos Y 
ignorehitpause = 1
persistent = 1


[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 200
attr = S, HP
damage = ceil(ifElse(fvar(11) * 28*.3 < 7*.3, 7*.3, fvar(11) * 28*.3)), 0
animtype = light
guardflag = MA
hitflag = MAF
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 7
ground.hittime  = 7
ground.velocity = -2.5 ;-3
guard.velocity = -4.5
airguard.velocity = -1.9,-.8	
fall = root, var(29) >= 8
air.velocity = -2,-2
air.hittime = 12
air.animtype = back
getpower= 40,35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 210
attr = S, HP
damage = ceil(ifElse(fvar(11) * 35*.3 < 7*.3, 7*.3, fvar(11) * 35*.3)), 0
animtype = Medium
guardflag = MA
hitflag = MAF
pausetime = 0, 6
guard.pausetime = 0,6
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
fall = root, var(29) >= 8
airguard.velocity = 2,-1.1
air.type = High	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 220
attr = S, HP
damage = ceil(ifElse(fvar(11) * 45*.3 < 7*.3, 7*.3, fvar(11) * 45*.3)), 0
animtype = Hard	
guardflag = MA
hitflag = MAF
pausetime = 0,9
guard.pausetime = 0,9
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -7
guard.velocity = -9
fall = root,var(29) >= 8
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -4,-4
air.hittime = 22
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 230, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 230
attr = S, HP
animtype  = Light
damage = ceil(ifElse(fvar(11) * 28*.3 < 7*.3, 7*.3, fvar(11) * 28*.3)), 0
guardflag = MA
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = Low
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -2.5
guard.velocity = -4.5
fall = root,var(29) >= 8
air.velocity = -2,-3
air.animtype = back
getpower= 40,35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 240, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 240
attr = S, HP
animtype = Medium
damage = ceil(ifElse(fvar(11) * 40*.3 < 7*.3, 7*.3, fvar(11) * 40*.3)), 0
guardflag = MA
hitflag = MAF
pausetime = 0, 6
guard.pausetime = 0,6
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 12;8
ground.hittime  = 18;8
ground.velocity = -2
guard.velocity = -6
fall = root,var(29) >= 8
air.velocity = -3,-4
airguard.velocity = -2,-1.1
air.animtype = back
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
ID = 1098


[State 250, no fall]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 251
attr = S, SP
animtype  = Hard
damage = ceil(ifElse(fvar(11) * 48*.3 < 7*.3, 7*.3, fvar(11) * 48*.3)), 0
guardflag = MA
pausetime = 0,9
guard.pausetime = 0,9
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = high
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = -12
air.velocity = -12,-2
air.fall = 1
fall.recover = 0
air.animtype = back
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 311
attr = A, HP
damage = ceil(ifElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 0
animtype = Heavy
guardflag = HA
hitflag = MAF
pausetime = 0, 9
guard.pausetime = 0,9
sparkno = -1
guard.sparkno = s7000
sparkxy = -12,-55
hitsound = s3300, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -3
guard.velocity = -3
air.fall = 1
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,6
air.hittime = 25
air.animtype = back
envshake.time = 10
envshake.ampl = 9
envshake.freq = 40
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
ID = 1098



[State 400, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 400
attr = C, HP
hitflag = MAF
guardflag = MA
animtype = light
damage = ceil(ifElse(fvar(11) * 18*.3 < 7*.3, 7*.3, fvar(11) * 18*.3)), 0
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = low
ground.slidetime = 8
ground.hittime = 9
ground.velocity = -2.5  
guard.velocity = -4.5
air.velocity = -2,-2
air.animtype = back
getpower= 40, 35
givepower = 35,35
yaccel = 0.5
ID = 1098


[State 410, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 410
attr = C, HP
damage = ceil(ifElse(fvar(11) * 31*.3 < 7*.3, 7*.3, fvar(11) * 31*.3)), 0
animtype  = Medium
hitflag = MAF
guardflag = MA
pausetime = 0,6
guard.pausetime = 0,6
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3  
guard.velocity = -6
air.velocity = -2,-1.2
air.animtype = back
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 420, 3]
type = HitDef
triggerall = !movecontact 
trigger1 =  var(1) = 420
attr = A, HP
damage = ceil(ifElse(fvar(11) * 42*.3 < 7*.3, 7*.3, fvar(11) * 42*.3)), 0
hitflag = MAF
guardflag = MA
pausetime = 0,9
guard.pausetime = 0,9
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
animtype = Up
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -1.5,-8
guard.velocity = -7
fall.recover = 0
air.velocity = -1.5,-11
fall = 1
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.45

[State 430, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 430
attr = C, HP
hitflag = MAFD
guardflag = MA
damage = ceil(ifElse(fvar(11) * 16*.3 < 7*.3, 7*.3, fvar(11) * 16*.3)), 0
animtype = light
pausetime = 0,3
guard.pausetime = 0,3
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = s6,1
ground.type = low
ground.slidetime = 8
ground.hittime = 12
ground.velocity = -2.5  
guard.velocity = -4.5
air.velocity = -2,-5
air.animtype = back
air.hittime = 4
getpower= 40, 35
givepower = 35,35
yaccel = 0.5
ID = 1098

[State 440, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 440
attr = C, HP
damage = ceil(ifElse(fvar(11) * 23*.3 < 7*.3, 7*.3, fvar(11) * 23*.3)), 0
animtype  = Medium
hitflag = MAFD
guardflag = MA
pausetime = 0,6
guard.pausetime = 0,6
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -3  
guard.velocity = -6
air.velocity = -2,-1
down.velocity = -3,0
down.hittime = 20
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
fall.recover = 0
air.animtype = back
yaccel = 0.5
ID = 1098

[State 450, 3]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 450
attr = C, HP
animtype = Back
damage = ceil(ifElse(fvar(11) * 47*.3 < 7*.3, 7*.3, fvar(11) * 47*.3)), 0
hitflag = MAFD
guardflag = MA
pausetime = 0,9
guard.pausetime = 0,9
sparkno = -1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = s6,1
fall = 1
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = .5,-5
guard.velocity = 6
air.velocity = 2,-9
guard.velocity = -1
getpower= ifelse(p2movetype=H,40,210)
givepower = 35,35
yaccel = 0.5

[State 600, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 600
attr = A, NA
hitflag = MAF
damage = ceil(ifElse(fvar(11) * 16 < 7, 7, fvar(11) * 16)), 0
guardflag = MA
animtype = Light
pausetime = 0,3
sparkno =-1
guard.sparkno = s7000
sparkxy = -1,-1
hitsound = s3300, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= 40, 35
givepower = 35,35
yaccel = 0.5

[State 610, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 610
attr = A, NA
damage = ceil(ifElse(fvar(11) * 25 < 7, 7, fvar(11) * 25)), 0
guardflag = MA
hitflag = MAF
animtype  = Medium
pausetime = 0,6
sparkno = -1
guard.sparkno = s7000
sparkxy = -10,-70
hitsound = s3300, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4   
air.velocity = -2,-4
airguard.cornerpush.veloff= 0
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5

[State 610, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 615
attr = A, NA
damage = ceil(ifElse(fvar(11) * 25 < 7, 7, fvar(11) * 25)), 0
guardflag = MA
hitflag = MAF
animtype  = Medium
pausetime = 0,6
sparkno = -1
guard.sparkno = s7000
sparkxy = -10,-70
hitsound = s3300, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4   
air.fall = 1
air.velocity = -2,4
airguard.cornerpush.veloff= 0
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35

[State 620, 3]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 620
attr = A, NA
damage = ceil(ifElse(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 0
hitflag = MAF
guardflag = MA
animtype = Hard
pausetime = 0,9
sparkno = -1
guard.sparkno = s7000
sparkxy = -30,-50
hitsound = s3300, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -7,7
envshake.time = 20
envshake.freq = 60
envshake.ampl = 8
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5
air.fall = 1
fall.recover = 0

[State 630, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 630
attr = A, NA
damage = ceil(ifElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 0
hitflag = MAF
guardflag = MA
animtype = Light
pausetime = 0,3
sparkno = -1
guard.sparkno = s7000
sparkxy = -10,-50
hitsound = s3300, 1
guardsound = S6,0
ground.type = High
ground.slidetime = 8  
ground.hittime  = 15
ground.velocity = -3  
air.velocity = -2,-3
airguard.cornerpush.veloff= 0
getpower= 40, 35
givepower = 35,35
yaccel = 0.5
persistent = 0

[State 640, 2]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 640
attr = A, NA
damage = ceil(ifElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 0
guardflag = MA
hitflag = MAF
animtype  = Medium
sparkno = -1
guard.sparkno = s7000
sparkxy = -20,-50
hitsound = s3300, 1
guardsound = S6,0
ground.type = High
pausetime = 0,6
guard.pausetime = 0,6
ground.slidetime = 8
ground.hittime = 15
ground.velocity = -4  ;-8
air.velocity = -2,-2
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5

[State 650, 3]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 645
attr = A, NA
damage = ceil(ifElse(fvar(11) * 43 < 7, 7, fvar(11) * 43)), 0
hitflag = MAF
guardflag = MA
animtype = Hard
pausetime = 0,6
sparkno = -1
guard.sparkno = s7000
sparkxy = -30,-55
hitsound = s3300, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -10
air.velocity = 6,8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
air.fall = 1
fall.recover = 0
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5


[State 650, 3]
type = HitDef
triggerall = !movecontact
trigger1 = var(1) = 650
attr = A, NA
damage = ceil(ifElse(fvar(11) * 43 < 7, 7, fvar(11) * 43)), 0
hitflag = MAF
guardflag = MA
animtype = Hard
pausetime = 0,9
sparkno = -1
guard.sparkno = s7000
sparkxy = -30,-55
hitsound = s3300, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -10
air.velocity = 6,8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
air.fall = 1
fall.recover = 0
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= ifelse(p2movetype=H,40,140), 35
givepower = 35,35
yaccel = 0.5


[state 3103, destroyself]
type = destroyself
trigger1 = animtime = 0
;-----------------------------
;LITTLE BALL HELPERS
[Statedef 2932]
type = A
movetype = I
physics = N
anim = 2932   ;2505
sprpriority = 4
velset = (random%9)-4,-1-(random%3)

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1004, vel];During Genkidama
type = veladd
trigger1 = time>10
x = (rootdist x-14)/120.0
y = (rootdist y-190)/150.0

[State 41, Train]
type = AfterImage
trigger1 = !Time
time = 25
timegap = 1
framegap = 1
length = 8
palbright = 0,0,0
paladd = 0,0,50
palmul = .9,.9,.9
palcontrast = 120,120,120
palpostbright = 0,0,0
trans = add1


[state 1004, effect]
type = palfx
trigger1 = root,anim != 2935
trigger2 = (RootDist X <= 70) && (RootDist Y <= 70)
time = 1
add = ceil(100-(Time)*10),ceil(100-(Time)*10),ceil(100-(Time)*10)

[state 1004, effect]
type = palfx
trigger1 = (root,anim = 15999)
time = 1
add = -255,-255,-255

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = rootdist y >= 180
trigger2 = roundstate = 0
trigger3 = time > 300
;------------------------------------------
;Atomic Burst Helper
[statedef 3510]
type = S
movetype = A
physics = N
anim = 1
sprpriority = 7

[state 3510, muteki]
type = nothitby
trigger1 = 1
value = SCA

[state 3510, sprpriority]
type = sprpriority 
trigger1 = 1
value = 7
ignorehitpause = 1

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-240,240]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

[state 3510, varadd]
type = varadd
trigger1 = anim != 3511
var(1) = 1

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=NoShadow
ignorehitpause = 1

[state 3510, bind]
type = bindtoroot
trigger1 = anim != 3511
pos = 25,-38

[state 3510, bind]
type = bindtoroot
trigger1 = anim = 3511
pos = -24,14
persistent = 0


[State 2103, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1


[state 3200, changeanim]
type = changeanim
triggerall = anim!= 3511
trigger1 = root, anim = 3202 && root, animelemtime(3) = 0
value = 3511

[state 3200, playsnd]
type = playsnd
trigger1 = root, anim = 3202 && root, animelemtime(3) = 0
value = 3200,3

[State 650, 3]
type = HitDef
trigger1 = !movecontact
trigger2 = Numtarget
trigger2 = movecontact && target,ishelper
attr = A, HP
damage = ceil(ifElse(root,fvar(11) * 60 < 20, 20+time/2.5, root,fvar(11) * 60+time/2.5)), 20
hitflag = MAF
guardflag = MA
animtype = Hard
pausetime = 0,16
guard.pausetime = 0,22
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s3200,2
guardsound = S3200,4
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -16
air.velocity = -6,-8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
p2facing = 1
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
fall = 1
id = 3270


[state 3510, attackdist]
type = statetypeset
triggerall = anim = 3511
trigger1 = animelemtime(5) = 0
movetype = I


[state 3200, targetstate]
type = targetstate
triggerall = NumTarget(3270)
trigger1 = !(Target,ishelper)
trigger1 = movehit = 1
value = 3270
id = 3270
ignorehitpause = 0
persistent = 0


[State -2, Glass break sound effect];FA kill sound
type		= PlaySnd
triggerall	= NumTarget
triggerall          = !(Target, alive)
trigger1            = Target, time = 1
trigger1		= Target,StateNo = 1323 
value		= 1323, 0
ignorehitpause	= 1
persistent  = 0
[State -2, P2 Glass Break FX Left]
type		= Explod
triggerall	= NumTarget
triggerall          = !(Target, alive)
trigger1            = Target, time = 1
trigger1		= Target,StateNo = 1323  && !NumExplod(1323)
trigger1            = Target, Facing = 1 
persistent	= 0
ID		= 1323
anim		= 1323
postype		= left
pos		= -10, ceil(Target,screenpos y)-55
velocity		= 0, 0
accel		= 0, 0
removetime	= -2
sprpriority	= 3
ignorehitpause	= 1
persistent = 0

[State -2, P2 Glass Break FX Right]
type		= Explod
triggerall	= NumTarget
triggerall          = !(Target, alive)
trigger1            = Target, time = 1
trigger1		= Target,StateNo = 1323  && !NumExplod(1323) 
trigger1            = Target, Facing = -1
persistent	= 0
ID		= 1323
anim		= 1323
postype		= right
pos		= 10, ceil(Target,screenpos y)-55
facing              = -1
velocity		= 0, 0
accel		= 0, 0
removetime	= -2
sprpriority	= 3
ignorehitpause	= 1
persistent = 0



[state 3200, destroyself]
type = destroyself
trigger1 = time = (var(1) + 60)
trigger2 = root, stateno != 3200
trigger2 = anim != 3511
;------------------------------------------
;BackThrow Shot
[statedef 8000]
type = S
movetype = A
physics = N
juggle = 15
anim = 80001




[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(804)
trigger1 = movehit
value = 804
ID = 804
ignorehitpause = 1
persistent = 0

[State 200, 1]
type = HitDef
trigger1 = !movecontact
attr = C, HT
damage = 40, 10
animtype = Medium	
guardflag = MA
hitflag = MAF
pausetime = 3,3
guard.pausetime = 13,13
sparkno = s7020
guard.sparkno = s7000
sparkxy = 0,-60
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 15
ground.hittime  = 22
ground.velocity = -7
guard.velocity = -11
airguard.velocity = -9,-4
air.type = High	
air.velocity = -4,-4
air.hittime = 22
fall = 1
fall.recover = 0
air.animtype = back
getpower= ifelse(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
ID = 804

[state 80000, destroy]
type = destroyself
trigger1 = movecontact

;===================================================
;DASH COLLISION NOTIFICATION
[Statedef 13200]
type=A
physics=N
MoveType=I
anim = 15999
velset=0,0
sprpriority=6

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=NoShadow
ignorehitpause = 1

;[State -2, Explod]; Notification
;type = Explod
;trigger1 = !Time
;anim = 13200
;removeTime = -2
;supermove = 1
;sprpriority = 1
;id = 13200
;bindTime = -1
;ontop = 1
;ownpal = 1
;ignorehitpause = 1
;pausemoveTime = -1
;facing = facing
;scale = 0.5,0.5
;
;[state 17100,scale FX]
;type = modifyExplod
;trigger1 = numExplod(13200)
;trigger1 = Time>=10
;scale = 0.5+0.02(Time-10),0.5+0.02(Time-10)
;id = 13200

[State 8000, End]
type=DestroySelf
trigger1= Time>=40

;===================================================
; Limit basics comboability
[Statedef 15999]
type    = S
movetype= A
physics = N
anim = 15999
sprpriority = -5

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = numenemy
trigger1 = enemynear, movetype != H || (enemynear, stateno = [120,155]) || enemynear, ctrl
trigger2 = time = 24
;----------------------------------------------------------------------
;Apron
[Statedef 70300]
type = S
physics = N
sprpriority = 3
anim = 70400

[state 70300, BindToRoot]
type = BindToRoot
trigger1 = animelemtime(31) < 0
pos = 0,0


[state 70300, thrown]
type = velset
trigger1 = animelemtime(31) = 0
x = -9

[state 70300, offscreen]
type = destroyself
trigger1 = pos x != [-240,240]
;----------------------------------------------------------------------
;Boom
[Statedef 70301]
type = S
physics = N
sprpriority = 3
anim = 70401

[state 70300, thrown]
type = velset
trigger1 = !time
x = -9

[state 70300, offscreen]
type = destroyself
trigger1 = pos x != [-240,240]
;======================================================================
;LAND FX
[Statedef 17100]
type=A
movetype=I
physics=N
anim=15999
sprpriority=1
velset=0,0

[state 17100,bind]
type = bindtoparent
triggerall = root, stateno != 1100
trigger1 = !time
pos = -11,0

[state 17100,bind]
type = bindtoparent
triggerall = root, stateno = 1100
trigger1 = !time
pos = 27,-5

[state 17100, Landing Effect]
type=explod
trigger1=!time
anim=17100
id=17100
pos=0,0
postype=P1
sprpriority=-3
ownpal=1
supermovetime=-1

[state 17100]
type=removeexplod
trigger1=time>10

[State 17100]
type=destroyself
trigger1=time>10


;===================================================
;Pulse Effect during fall recovery (taken from Possessed Heita by The_None)
[Statedef 52100]
type    = S
movetype = I
physics = S
sprpriority = 4
anim = 15999
ctrl = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = ifelse(root,stateno=5201,ceil(parentdist x/3.0),parentdist x)
y = parentdist y

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = parent,anim

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1) = parent,animelemno(0)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time
value = var(0)
elem = var(1)

[State 0, VarSet]
type = VarAdd
trigger1 = time
fvar(0) = 11.2

[State 0, VarSet]
type = VarAdd
trigger1 = time
fvar(1) = 0.015

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1+fvar(1),1+fvar(1)

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = floor(0-fvar(0)),floor(0-fvar(0)),floor(0-fvar(0))

[State 0, ]
type = DestroySelf
trigger1 = root,stateno != 5201
trigger1 = root,stateno != 5210

;==========================================================
; SUPER BG - Street Fighter 3
[Statedef 19875]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = time <= 55
flag = noFG

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 10000, Explod]; White BG
type = Explod
trigger1 = time = 0
anim = 19877
id = 19875
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 99999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999

scale = 1.20,1.20
ignorehitpause = 1
persistent = 0

[State 10000, Explod SF3]
type = Explod
trigger1 = time = 0
anim = 19875
id = 10000
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999

scale = 1.20*0.9,1.20*1.05
ignorehitpause = 1
persistent = 0

[State 10000, pause]
type = Pause
trigger1 = Time = 0
time = 40
movetime = 40

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 44
id = 10000

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 55
id = 10500

;==========================================================
; SUPER BG - Super DBZ (Physics)
[Statedef 19885]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 1000, shake]
type = EnvShake
trigger1 = !(time%4) && time<150
time=4
freq=80
ampl=7

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = nokoslow
ignorehitpause = 1

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = nobardisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
trigger1 = time = 0
anim = 19884
id = 19884
pos =  160,120
postype = left
sprpriority = -4
facing = 1
bindtime = -1
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.20,1.20
ignorehitpause = 1
persistent = 0
removetime = -2

[State 10000, Explod Krak]
type = Explod
trigger1 = time = 0
anim = 19885
id = 19885
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999

scale = 1,1
ignorehitpause = 1
persistent = 0

[State 10000, Scale Explod]
type = ModifyExplod
trigger1 = time>6
scale = 1+.01*time, 1+.01*time
id = 19885

[State 10000, RemoveExplod Krak]
type = RemoveExplod
trigger1 = time = 44
id = 19885

[State 10000, Explod Space BG]
type = Explod
trigger1 = time = 23
anim = 19886
id = 19886
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.3,1.3
ignorehitpause = 1
persistent = 0

[State 10000, Explod planet left]
type = Explod
trigger1 = time = 23
anim = 19887
id = 19886
pos =  0,240
postype = left
sprpriority = -6
facing = 1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.2,1.2
ignorehitpause = 1
persistent = 0
;vel = -.2,0
bindtime = -1

[State 10000, Explod planet right]
type = Explod
trigger1 = time = 23
anim = 19888
id = 19886
pos =  320,240
postype = left
sprpriority = -6
facing = 1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.2,1.2
ignorehitpause = 1
persistent = 0
;vel = .2,0
bindtime = -1

[State 1000, Helper]
type = Helper
trigger1 = time>=23 && time<70 && !(time%5) && numhelper(19890)<80 && numhelper(19891)<80

name = "rocks"
id = 19890
pos = 160,20
postype = left
facing = 1
stateno = 19890
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 13300, black screen fade]
type = Explod
trigger1 = Time = 60
anim = 19883   ;2771
ID = 2771
postype = left
pos = 0,-50
bindtime = -1
removetime = 91
pausemovetime = 91
ontop = 1
scale = 2,3

[State 10000, RemoveExplod Krak]
type = RemoveExplod
trigger1 = time = 150
id = 19886

;------------------------------------------------------
;Rocks going up
[Statedef 19890]
type = A
movetype = I
physics = N
anim = 15999

[State 1003, Helper]
type = Helper
trigger1 = !time

name = "rocks"
id = 19891
pos = ((random%320)),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, Helper]
type = Helper
trigger1 = !time

name = "rocks"
id = 19891
pos = ((random%320)+320),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, Helper]
type = Helper
trigger1 = !time

name = "rocks"
id = 19891
pos = ((random%320)-320),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = time=2

;-----------------
[Statedef 19891]
type = A
movetype = I
physics = N
anim = 19890 + random%6
sprpriority = -5

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1004, vel]
type = velset
trigger1 = !time
y = -3-random%7

[State 1004, vel]
type = varset
trigger1 = !time
var(10) = random%2

[State 1004, assert]
type = angledraw
trigger1 = 1
value = ifelse(var(10)=0,5*time,-5*time)

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = time > 300
trigger2 = pos Y < -340
trigger3 = root,stateno = 180

;==========================================================
; SUPER BG - Super DBZ (Ki attacks)
[Statedef 19892]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 3001, screen]
type = PosSet
trigger1 = !time
x = 0
y = -ceil(screenpos Y)
ignorehitpause = 1

[State 3001, screen]
type = PosSet
trigger1 = 1
x = 0
ignorehitpause = 1

[State 1000, shake]
type = EnvShake
trigger1 = !(time%4) && time<150
time=4
freq=80
ampl=7

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = nokoslow
ignorehitpause = 1

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = nobardisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
trigger1 = !time
anim = 957
id = 11111
pos =  0,-30
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
scale = 2,2

[State 10000, Explod Zwang]
type = Explod
trigger1 = time = 0
anim = 19896
id = 19896
pos =  160,120
postype = left
sprpriority = -5
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
ignorehitpause = 1
scale = .9,1.2

[State 10000, Scale Explod]
type = ModifyExplod
trigger1 = time>50
scale = .9+.005*(time-50), 1.2+.005*(time-50)
id = 19896

[State 1003, Helper]
type = Helper
trigger1 = !time

name = "yellow_BG"
id = 19897
pos = 0,0
postype = left
facing = 1
stateno = 19897
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 13300, white screen fade]
type = Explod
trigger1 = Time = 60
anim = 19883
ID = 2771
postype = left
pos = 0,-50
bindtime = -1
removetime = 91
pausemovetime = 91
ontop = 1
scale = 2,3
ignorehitpause = 1

[State 10000, RemoveExplod zwang]
type = RemoveExplod
trigger1 = time = 140
id = 19896
[State 10000, RemoveExplod yellow BG]
type = RemoveExplod
trigger1 = time = 140
id = 19897
[State 10000, RemoveExplod white BG]
type = RemoveExplod
trigger1 = time = 140
id = 11111

[State 10000, pause]
type = Pause
trigger1 = !time
time = 20
movetime = 20
ignorehitpause = 1

;--------------------------------------
;Yellow Super BG Helper
[Statedef 19897]
type = S
movetype = I
physics = N
anim = 19897
sprpriority = -6

[State 1004, assert]
type = bindtoparent
trigger1 = 1
pos = 0,120
ignorehitpause = 1

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
flag2 = noFG
ignorehitpause = 1

[State 1004, assert]
type = angledraw
trigger1 = time < 50
value = 10*time
scale = .7,.7
ignorehitpause = 1

[State 1004, assert]
type = angledraw
trigger1 = time >= 50
value = 10*time
scale = .7+.01*(time-50),.7+.01*(time-50)
ignorehitpause = 1

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = time > 130

;==========================================================
; SUPER BG - Jojo's Bizarre Adventure
[Statedef 19900]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 15999
sprpriority = -21

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19910
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19911
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19912
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19913
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19900
id = 19900
pos = 0,0
postype = back
sprpriority = 5
bindtime = -1
scale = .84, 1.07
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0
ontop = 1

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[state haha]
type = varset
trigger1 = time = 0
var(3) = 0

[state haha]
type = varadd
trigger1 = time >= 5
trigger1 = var(3) < 220
var(3) = 5

[State that starts the inverted effect]
type           = PalFX
trigger1       = time >= 5
add            = var(3),var(3),var(3)
time           = 1
ignorehitpause = 1

[State 2030, 0]
type = AssertSpecial
Trigger1 = Time < ifelse(matchover, 120, 50)
flag = nofg
flag2 = nobardisplay
ignorehitpause = 1

[State haha]
type = RemoveExplod
trigger1 = Time = ifelse(matchover, 120, 50)
id = 8001

[State ChangeState!]
type = DestroySelf
trigger1 = RoundState = 0

;====================================
;Horizontal Speedlines Jojo
[Statedef 2623]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 15999
sprpriority = -21


[state 20000, turn]
type = turn
trigger1 = !time

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19910
id = 2623
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19911
id = 2623
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19912
id = 2623
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19913
id = 2623
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1


[State 2260, destroy explod]
type = RemoveExplod
trigger1 = root,stateno != [4000,4999]
ID = 2623

[State 2260, destroy]
type = DestroySelf
trigger1 = root,stateno != [4000,4999]

[Statedef 2803]
type = S
sprpriority = 3
anim = 2803


[state 2803, destroyself]
type = destroyself
trigger1 = !animtime 
;====================================
;Downwards Speedlines Jojo
[Statedef 19901]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 15999
sprpriority = -21


[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19920
id = 19920
pos = -4,259
postype = left
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
trans = addalpha
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19921
id = 19920
pos = -4,259
postype = left
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19922
id = 19920
pos = -4,259
postype = left
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19923
id = 19920
pos = -4,259
postype = left
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19923
id = 19920
pos = 10,259
postype = right
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
facing = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19922
id = 19920
pos = 10,259
postype = right
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
facing = -1
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19921
id = 19920
pos = 10,259
postype = right
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
facing = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1


[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19920
id = 19920
pos = 10,259
postype = right
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
facing = -1
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1


[state 4072, trans]
type = modifyexplod
triggerall = root, anim = 4002
trigger1 = root, animelemtime(5) >= 0
id = 19920
trans = addalpha
alpha = 150-(time*3),(time*3)

[State 2260, destroy explod]
type = RemoveExplod
trigger1 = root,stateno != 4002
trigger1 = root,stateno != 4100
trigger1 = root, stateno != 4200
trigger1 = root,stateno != 4300
trigger2 = root,anim = 4101 && root, animelemtime(2) = 0
trigger3 = root, anim = 4201 && root, animelemtime(4) = 0
trigger4 = root, anim = 4301 && root, animelemtime(7) = 4
ID = 19920

[State 2260, destroy]
type = DestroySelf
trigger1 = root,stateno != 4002
trigger1 = root, stateno != 4100
trigger1 = root, stateno != 4200
trigger1 = root, stateno != 4300
trigger2 = root,anim = 4101 && root, animelemtime(2) = 0
trigger3 = root, anim = 4201 && root, animelemtime(4) = 0
trigger4 = root, anim = 4301 && root, animelemtime(7) = 4
;====================================
;Upwards Speedlines Jojo
[Statedef 19902]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 15999
sprpriority = -21


[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19930
id = 19930
pos = -4,-108
postype = left
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
trans = addalpha
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19931
id = 19930
pos = -4,-108
postype = left
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19932
id = 19930
pos = -4,-108
postype = left
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19933
id = 19930
pos = -4,-108
postype = left
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19933
id = 19930
pos = 10,-108
postype = right
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
facing = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19932
id = 19930
pos = 10,-108
postype = right
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
facing = -1
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1


[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19931
id = 19930
pos = 10,-108
postype = right
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
removetime = -1
facing = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1


[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19930
id = 19930
pos = 10,-108
postype = right
sprpriority = -21
bindtime = -1
scale = 0.7,0.7
facing = -1
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1



[State 2260, destroy explod]
type = RemoveExplod
trigger1 = root,stateno != 4100
trigger1 = root,stateno != 4300
trigger2 = Numhelper(4110)
trigger2 = helper(4110),anim = 410204 && helper(4110), animtime = 0
trigger3 = root, stateno = 4300 && root,time = 460
ID = 19930

[State 2260, destroy]
type = DestroySelf
trigger1 = root, stateno != 4100
trigger1 = root, stateno != 4300
trigger2 = Numhelper(4110)
trigger2 = helper(4110),anim = 410204 && helper(4110), animtime = 0
trigger3 = root, stateno = 4300 && root,time = 460
;==========================================================
;Background - Straight Shooter
[Statedef 20000]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 15999
sprpriority = -21


[state 20000, turn]
type = turn
trigger1 = !time

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19910
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19911
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19912
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19913
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
trigger1 = Time = 0
anim = 19900
id = 19900
pos = 0,0
postype = back
sprpriority = 5
bindtime = -1
scale = .84, 1.07
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0
ontop = 1

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[state haha]
type = varset
trigger1 = time = 0
var(3) = 0

[state haha]
type = varadd
trigger1 = time >= 60
trigger1 = var(3) < 220
var(3) = 5

[State that starts the inverted effect]
type           = PalFX
trigger1       = time >= 60
add            = var(3),var(3),var(3)
time           = 1
ignorehitpause = 1

[State 2030, 0]
type = AssertSpecial
Trigger1 = Time < ifelse(matchover, 120, 50)
flag = nofg
flag2 = nobardisplay
ignorehitpause = 1

[State haha]
type = RemoveExplod
trigger1 = root, anim = 1210
id = 8001

[State ChangeState!]
type = DestroySelf
trigger1 = root,anim = 1210

[statedef 23000]
type = S
movetype = A
physics = N
anim = 332407
sprpriority = 8

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

[state 0, playsnd]
type = playsnd
trigger1 = anim = 332410
value = 32400,2
persistent = 0

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[state 0, changeanim]
type = changeanim
trigger1 = root,animelemtime(1) = 17
value = 332410


[state 23000, velset]
type = velset
trigger1 = root,animelemtime(1) >= 17
x = 11

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = anim = 332410
attr = A, HA
damage = ceil(ifElse(fvar(11) * 60 < 40, 40, fvar(11) * 60)), 5
animtype = Heavy
guardflag = MA
hitflag = MAFD
pausetime = 0,17
guard.pausetime = 0,17
sparkno = s2845
guard.sparkno = s7000
sparkxy = -20,-30
hitsound = s2511, 0
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = 1
guard.velocity = -1
airguard.velocity = -1,-1
air.type = High	
air.velocity = 1,-1
air.hittime = 12
fall.recover = 0
fall = 1
air.animtype = back
givepower = 30,20
envshake.time = 50
envshake.freq = 40
envshake.ampl = 5
yaccel = 0.5
ID = 3060

[state 300, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 5250
ignorehitpause = 1
persistent = 0

[state 0, destroyself]
type = destroyself
trigger1 = root, anim != 332405
;------------------------------------------
;Timed Explosion
[statedef 34040]
type = S
movetype = A
physics = N
sprpriority = 7



[state 3404, changeanim]
type = changeanim
trigger1 = !time
value = ifelse((root,anim = 3406),340600,ifelse((root,anim = 3407),340700,340800))




[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = anim = 340600
attr = S, HP
damage = ceil(ifElse(fvar(11) * 120 < 60, 60, fvar(11) * 120)), 0
animtype = Medium
guardflag = MA
hitflag = MAF
pausetime = 0, 11
guard.pausetime = 0,13
sparkno = -1
guard.sparkno = -1
sparkxy = -12,-55
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
fall = 1
airguard.velocity = -2,-1.1
air.type = High
fall.recover = 0	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
givepower = 35,35
yaccel = 0.5
ID = 3451

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = anim = 340700
attr = S, HP
damage = ceil(ifElse(fvar(11) * 80 < 40, 40, fvar(11) * 80)), 0
animtype = Back
guardflag = MA
hitflag = MAF
pausetime = 0, 11
guard.pausetime = 0,13
sparkno = -1
guard.sparkno = -1
sparkxy = -12,-55
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5,-5
guard.velocity = -6
fall = 1
airguard.velocity = -2,-1.1
air.type = High
fall.recover = 0	
air.velocity = -1,-6
air.hittime = 12
air.animtype = back
givepower = 25,25
yaccel = 0.5


[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = anim = 340800
attr = S, HP
damage = ceil(ifElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 0
animtype = Back
guardflag = MA
hitflag = MAF
pausetime = 0, 11
guard.pausetime = 0,13
sparkno = -1
guard.sparkno = -1
sparkxy = -12,-55
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -2.5
guard.velocity = -6
fall = 1
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -3,-3
air.hittime = 12
air.animtype = back
givepower = 15,15
yaccel = 0.5

[State 2103, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1


[state 300, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = numtarget(3451)
trigger1 = !(target, ishelper)
value = 3451
ignorehitpause = 1
persistent = 0

[state 34040]
type = destroyself
trigger1 = root, stateno != 3404
;F_KMH HELPER
[Statedef 3560]
type = A
physics = N
movetype = A
anim = 1
ctrl = 0
sprpriority = 5
hitcountpersist = 1
movehitpersist = 1

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
;time = 1
;facing = 0
pos = 0,0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 3560,0
volumescale = 255
channel = 7
lowpriority = 1
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = root,animelemtime(43) = 0
trigger2 = root,animelemtime(70) = 0
value = 3560,2

[State 3000, Gackt Beam Tail]
type = helper
trigger1 = !time
helpertype = normal
stateno = 3561
ID = 3561
name = "gackt tail"
postype = p1
pos = 0,-59
ownpal = 1

[State 3000, Gackt Beam Damage]
type = helper
trigger1 = !time
helpertype = normal
stateno = 3562
ID = 3562
name = "gackt damage"
postype = p1
pos = 130,-60
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
trigger1 = NumHelper(3562)
var(1) = ceil(abs(ScreenPos X - helper(3562),ScreenPos X))
ignorehitpause = 1
;persistent =


[State 0, Scale Tracker X]
type =null; VarAdd
triggerall = var(1)<30
trigger1 = NumHelper(3562)
trigger1 = Helper(3562),vel x>0
trigger2 = root,vel x<0
trigger2 = (root,BackEdgeDist>30) ;|| (root,AnimElemTime(5)<30)
;trigger2 = rootdist x<30
var(1) = 1
ignorehitpause = 0
;persistent =

[State 0, Scale Tracker Y]
type = VarAdd
triggerall = var(2)<10
trigger1 = root, animelemtime(96) >= 0
var(2) = 1
ignorehitpause = 0
;persistent =


[State 1061, End]
type = destroyself
trigger1 = var(2)>=10
;trigger2 = root,stateno!=3501
trigger2 = root, stateno != 3600 && root, stateno != 3610

;F_KMH Tail
[Statedef 3561]
type = A
physics = N
movetype = I
anim = 380100
ctrl = 0
sprpriority = 8

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1


[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
;facing = 0
pos = 0,-59
ignorehitpause = 1
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = NumHelper(3560)
;trigger1 = NumHelper(2312)
;trigger1 = Helper(2312),var(2)>=7
trigger1 = 1
value = 0
scale = 1,1-(Helper(3560),var(2))/10.0
ignorehitpause = 0
;persistent =


[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(43) = 0
value = 380104
elem = animelemno(0)

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(70) = 0
value = 380107
elem = animelemno(0)


[State 1061, End]
type = destroyself
trigger1 = !NumHelper(3560)



;F_KMH Damage
[Statedef 3562]
type = A
physics = N
movetype = A
;anim = 2312
ctrl = 0
sprpriority = 10
hitcountpersist = 1
movehitpersist = 1

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600



[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Root=%d | Kame=%d | DistX=%d | var(1)=%d | AElem=%d"
params = (root,pos X),pos X, abs((root,pos X)-pos X), var(1),-10+floor(abs((root,pos X)-pos X)/7)
ignorehitpause = 1
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1 ;!time
value = 380103
elem = IFElse((floor(abs((root,pos X)-pos X)/7)-10)<=0,1,floor(abs((root,pos X)-pos X)/7)-10);var(1)
ignorehitpause = 1
;persistent =

[State 3000, Gackt Beam Body]
type = helper
trigger1 = !NumHelper(3563)
trigger1 = !time;=4
helpertype = normal
stateno = 3563
ID = 3563
name = "gackt body"
postype = p1
pos = 0,2
ownpal = 1

[State 3000, Gackt Beam tip]
type = helper
trigger1 = !NumHelper(3564)
trigger1 = !time;=4
helpertype = normal
stateno = 3564
ID = 3564
name = "gackt tip"
postype = p1
pos = 50,0
ownpal = 1

[State 0, VelSet]
type = Veladd
trigger1 = ifelse(facing = 1,pos X < 160,pos X > -160)
x = 2;0.2
ignorehitpause = 1
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 =ifelse(facing = 1,pos X >= 300,pos X <= -300)
x = 0
;ignorehitpause =
;persistent =

[state 3600, posset]
type = null
trigger1 = (facing*pos X) >= (facing*160)
x = (facing*160)
ignorehitpause = 1

[State 0, StateTypeSet] ;buu fix
type = StateTypeSet
trigger1 = enemy,name = "Buu Z2"
trigger1 = enemy,stateno=301
movetype = I        ;I,A,H
ignorehitpause = 1
;persistent =

[State 3005, hit]
type = hitdef
triggerall = NumHelper(3561)
trigger1 = helper(3561),anim = 380107
attr = A,HP
hitflag = MAFD
guardflag = MA
priority = 7,Hit
damage = ceil(ifElse(root,fvar(11) * 3 < 2, 2, root,fvar(11) * 3)),1 ;ceil(13*root,fvar(12)), 3
getpower = 0,0
givepower = 5,5
pausetime = 1,1 ; 5,10
animtype = Heavy ;Back
air.animtype = heavy
fall.animtype = heavy
ground.type = Low
air.type = Low
ground.hittime = 4 ;16
ground.slidetime = 4 ;16
guard.hittime = 4 ;16
air.hittime = 4 ;13
airguard.ctrltime = 16
ground.velocity= 0,0
guard.velocity = -9
air.velocity = 0,0
airguard.velocity = -5.5, -1.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = -1
;hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
;forcestand = 1
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128
;palfx.time=32
p1sprpriority = 5
p2sprpriority = 3
getpower = 0,0
ID = 2310
;chainID = 2310

[State 3005, hit]
type = hitdef
triggerall = NumHelper(3561)
trigger1 = helper(3561),anim = 380104
attr = A,HP
hitflag = MAFD
guardflag = MA
priority = 7,Hit
damage = ceil(ifElse(root,fvar(11) * 3 < 2, 2, root,fvar(11) * 3)),1 ;ceil(13*root,fvar(12)), 3
getpower = 0,0
givepower = 5,5
pausetime = 2,2 ; 5,10
animtype = Heavy ;Back
air.animtype = heavy
fall.animtype = heavy
ground.type = Low
air.type = Low
ground.hittime = 4 ;16
ground.slidetime = 4 ;16
guard.hittime = 4 ;16
air.hittime = 4 ;13
airguard.ctrltime = 16
ground.velocity= 0,0
guard.velocity = -9
air.velocity = 0,0
airguard.velocity = -5.5, -1.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
kill = 0
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = -1
;hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
;forcestand = 1
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128
;palfx.time=32
p1sprpriority = 5
p2sprpriority = 3
getpower = 0,0
ID = 2310
;chainID = 2310

[State 3005, hit]
type = hitdef
triggerall = NumHelper(3561)
trigger1 = helper(3561),anim = 380100
attr = A,HP
hitflag = MAFD
guardflag = MA
priority = 7,Hit
damage = ceil(ifElse(root,fvar(11) * 3 < 2, 2, root,fvar(11) * 3)),1 ;ceil(13*root,fvar(12)), 3
getpower = 0,0
givepower = 5,5
pausetime = 3,3 ; 5,10
animtype = Heavy ;Back
air.animtype = heavy
fall.animtype = heavy
ground.type = Low
air.type = Low
ground.hittime = 4 ;16
ground.slidetime = 4 ;16
guard.hittime = 4 ;16
air.hittime = 4 ;13
airguard.ctrltime = 16
ground.velocity= 0,0
guard.velocity = -9
air.velocity = 0,0
kill = 0
airguard.velocity = -5.5, -1.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = -1
;hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
;forcestand = 1
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128
;palfx.time=32
p1sprpriority = 5
p2sprpriority = 3
getpower = 0,0
ID = 2310
;chainID = 2310


[State 2103, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = MoveHit = 1
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1

[State 0, Capture Anim]
type = VarSet
triggerall = !NumProjID(3590)
trigger1 = 1 ;movecontact
var(1) = AnimElemno(0)
ignorehitpause = 1
;persistent =

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumHelper(3561)
triggerall = helper(3561),anim = 380100
triggerall = numtarget
trigger1 = target, time=1
value = 3150,1 ;1000,0
volume = 0
channel = -1 ;7
lowpriority = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumHelper(3561)
triggerall = helper(3561),anim = 380104
triggerall = numtarget
trigger1 = target, time=1
value = 3150,3 ;1000,0
volume = 0
channel = -1 ;7
lowpriority = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumHelper(3561)
triggerall = helper(3561),anim = 380107
triggerall = numtarget
trigger1 = target, time=1
value = 3150,4 ;1000,0
volume = 0
channel = -1 ;7
lowpriority = 1
ignorehitpause = 1


[State 0, ChangeState]
type = ChangeState
triggerall = !NumProjID(3590)
trigger1 = numtarget
trigger1 = movecontact
trigger1 = HitPauseTime = 0 ;target,HitShakeOver=0
trigger2 = !numtarget
trigger2 = time>1 ;2 ;4
value = 3565
ctrl = 0
;anim =
ignorehitpause = 1
;persistent =

[State 3302, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
ID = 7020
anim=7020
sprpriority=6
postype=p2
pos=(target,const(size.ground.front)-random%40),-40-random%20 ;-77;floor(p2dist y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
;persistent=0
pausemovetime=100
supermovetime=100

[State 0, TargetBind]
type = TargetBind
;triggerall = !NumProjID(3590)
trigger1 = numtarget
trigger1 = movehit
time = 1
id = -1
pos = -20,40
ignorehitpause = 1
;persistent =


[State 0, RemoveExplod] ;hitspark
type = RemoveExplod
trigger1 = !NumHelper(3560)
id = 7020
ignorehitpause = 1
;persistent =

[State 1061, End]
type = destroyself
trigger1 = !NumHelper(3560)




;F_KMH Body
[Statedef 3563]
type = A
physics = N
movetype = I
anim = 380101
ctrl = 0
sprpriority = 7

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
;facing = 0
pos = 0,2;0
ignorehitpause = 1
;persistent =

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(43) = 0
value = 380105
elem = animelemno(0)

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(70) = 0
value = 380108
elem = animelemno(0)


[State 0, AngleDraw]
type = null ;AngleDraw
trigger1 = 1
value = 0
scale = 1+((helper(3560),var(1))/10.0),1
ignorehitpause = 0
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = NumHelper(3560)
trigger1 = 1
value = 0
;scale = 1+((helper(3560),var(1))/1.2),1-(Helper(3560),var(2))/10.0
scale = (helper(3560),var(1))/8,1-(Helper(3560),var(2))/10.0
ignorehitpause = 1 ;0
;persistent =


[State 1061, End]
type = destroyself
trigger1 = !NumHelper(3560)

;F_KMH Tip
[Statedef 3564]
type = A
physics = N
movetype = I
anim = 380102
ctrl = 0
sprpriority = 9

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
;facing = 0
pos = 50,1
ignorehitpause = 1
;persistent =

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(43) = 0
value = 380106
elem = animelemno(0)

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(70) = 0
value = 380109
elem = animelemno(0)


[State 0, AngleDraw]
type = AngleDraw
trigger1 = NumHelper(3560)
;trigger1 = NumHelper(2312)
;trigger1 = Helper(2312),var(2)>=7
trigger1 = 1
value = 0
scale = 1,1-(Helper(3560),var(2))/10.0
ignorehitpause = 0
;persistent =

[State 1061, End]
type = destroyself
trigger1 = !NumHelper(3560)


;Empty state for spawning Gackt
[Statedef 3565]
type = A
physics = N
movetype = I
ctrl = 0

[State 0, VarAdd] ;Number of hits
type = VarAdd
trigger1 = !time
var(2) = 1
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = !time
value = 3562
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

[State 1061, End]
type = destroyself
trigger1 = root, stateno != 3610
;Air F_KMH HELPER
[Statedef 3570]
type = A
physics = N
movetype = A
anim = 1
ctrl = 0
sprpriority = 5
hitcountpersist = 1
movehitpersist = 1

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
;time = 1
;facing = 0
pos = 0,-25
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 3560,0
volumescale = 255
channel = 7
lowpriority = 1
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = root,animelemtime(79) = 3
trigger2 = root,animelemtime(99) = 2
value = 3560,2

[State 3000, Gackt Beam Tail]
type = helper
trigger1 = !time
helpertype = normal
stateno = 3571
ID = 3571
name = "gackt tail"
postype = p1
pos = 0,-59
ownpal = 1

[State 3000, Gackt Beam Damage]
type = helper
trigger1 = !time
helpertype = normal
stateno = 3572
ID = 3572
name = "gackt damage"
postype = p1
pos = 130,-60
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
trigger1 = NumHelper(3572)
var(1) = ceil(abs(ScreenPos X - helper(3572),ScreenPos X))
ignorehitpause = 1
;persistent =


[State 0, Scale Tracker X]
type =null; VarAdd
triggerall = var(1)<30
trigger1 = NumHelper(3572)
trigger1 = Helper(3572),vel x>0
trigger2 = root,vel x<0
trigger2 = (root,BackEdgeDist>30) ;|| (root,AnimElemTime(5)<30)
;trigger2 = rootdist x<30
var(1) = 1
ignorehitpause = 0
;persistent =

[State 0, Scale Tracker Y]
type = VarAdd
triggerall = var(2)<10
trigger1 = root, animelemtime(119) >= 2
var(2) = 1
ignorehitpause = 0
;persistent =


[State 1061, End]
type = destroyself
trigger1 = var(2)>=10
;trigger2 = root,stateno!=3501
trigger2 = root, stateno != 3600 && root, stateno != 3610

;F_KMH Tail
[Statedef 3571]
type = A
physics = N
movetype = I
anim = 380100
ctrl = 0
sprpriority = 8

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1


[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
;facing = 0
pos = 0,-59
ignorehitpause = 1
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = NumHelper(3570)
;trigger1 = NumHelper(2312)
;trigger1 = Helper(2312),var(2)>=7
trigger1 = 1
value = 0
scale = 1,1-(Helper(3570),var(2))/10.0
ignorehitpause = 0
;persistent =


[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(79) = 3
value = 380104
elem = animelemno(0)

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(99) = 2
value = 380107
elem = animelemno(0)


[State 1061, End]
type = destroyself
trigger1 = !NumHelper(3570)



;F_KMH Damage
[Statedef 3572]
type = A
physics = N
movetype = A
;anim = 2312
ctrl = 0
sprpriority = 10
hitcountpersist = 1
movehitpersist = 1

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600


[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Root=%d | Kame=%d | DistX=%d | var(1)=%d | AElem=%d"
params = (root,pos X),pos X, abs((root,pos X)-pos X), var(1),-10+floor(abs((root,pos X)-pos X)/7)
ignorehitpause = 1
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1 ;!time
value = 380103
elem = IFElse((floor(abs((root,pos X)-pos X)/7)-10)<=0,1,floor(abs((root,pos X)-pos X)/7)-10);var(1)
ignorehitpause = 1
;persistent =

[State 3000, Gackt Beam Body]
type = helper
trigger1 = !NumHelper(3573)
trigger1 = !time;=4
helpertype = normal
stateno = 3573
ID = 3573
name = "gackt body"
postype = p1
pos = 0,0
ownpal = 1

[State 3000, Gackt Beam tip]
type = helper
trigger1 = !NumHelper(3574)
trigger1 = !time;=4
helpertype = normal
stateno = 3574
ID = 3574
name = "gackt tip"
postype = p1
pos = 50,0
ownpal = 1

[State 0, VelSet]
type = Veladd
trigger1 = ifelse(facing = 1,pos X < 160,pos X > -160)
x = 2;0.2
ignorehitpause = 1
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = ifelse(facing = 1,pos X >= 300,pos X <= -300)
x = 0
;ignorehitpause =
;persistent =

[state 3600, posset]
type = null
trigger1 = (facing*pos X) >= (facing*150)
x = (facing*150)

[State 0, StateTypeSet] ;buu fix
type = StateTypeSet
trigger1 = enemy,name = "Buu Z2"
trigger1 = enemy,stateno=301
movetype = I        ;I,A,H
ignorehitpause = 1
;persistent =

[State 3005, hit]
type = hitdef
triggerall = NumHelper(3571)
trigger1 = helper(3571),anim = 380107
attr = C,HP
hitflag = MAF;D
guardflag = MA
priority = 7,Hit
damage = ceil(ifElse(root,fvar(11) * 3 < 2, 2, root,fvar(11) * 3)),1 ;ceil(13*root,fvar(12)), 3
getpower = 0,0
givepower = 5,5
pausetime = 1,1 ; 5,10
animtype = Heavy ;Back
air.animtype = heavy
fall.animtype = heavy
ground.type = Low
air.type = Low
ground.hittime = 4 ;16
ground.slidetime = 4 ;16
guard.hittime = 4 ;16
air.hittime = 4 ;13
airguard.ctrltime = 16
ground.velocity= -5,0
guard.velocity = -9
air.velocity = -10,0
airguard.velocity = -5.5, -1.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = -1
;hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
;forcestand = 1
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128
;palfx.time=32
p1sprpriority = 5
p2sprpriority = 3
getpower = 0,0
ID = 2310
;chainID = 2310

[State 3005, hit]
type = hitdef
triggerall = NumHelper(3571)
trigger1 = helper(3571),anim = 380104
attr = C,HP
hitflag = MAF;D
guardflag = MA
priority = 7,Hit
damage = ceil(ifElse(root,fvar(11) * 3 < 2, 2, root,fvar(11) * 3)),1 ;ceil(13*root,fvar(12)), 3
getpower = 0,0
givepower = 5,5
pausetime = 2,2 ; 5,10
animtype = Heavy ;Back
air.animtype = heavy
fall.animtype = heavy
ground.type = Low
air.type = Low
ground.hittime = 4 ;16
ground.slidetime = 4 ;16
guard.hittime = 4 ;16
air.hittime = 4 ;13
airguard.ctrltime = 16
ground.velocity= -5,0
guard.velocity = -9
air.velocity = -10,0
airguard.velocity = -5.5, -1.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
kill = 0
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = -1
;hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
;forcestand = 1
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128
;palfx.time=32
p1sprpriority = 5
p2sprpriority = 3
getpower = 0,0
ID = 2310
;chainID = 2310

[State 3005, hit]
type = hitdef
triggerall = NumHelper(3571)
trigger1 = helper(3571),anim = 380100
attr = C,HP
hitflag = MAF;D
guardflag = MA
priority = 7,Hit
damage = ceil(ifElse(root,fvar(11) * 3 < 2, 2, root,fvar(11) * 3)),1 ;ceil(13*root,fvar(12)), 3
getpower = 0,0
givepower = 5,5
pausetime = 3,3 ; 5,10
animtype = Heavy ;Back
air.animtype = heavy
fall.animtype = heavy
ground.type = Low
air.type = Low
ground.hittime = 4 ;16
ground.slidetime = 4 ;16
guard.hittime = 4 ;16
air.hittime = 4 ;13
airguard.ctrltime = 16
ground.velocity= -5,0
guard.velocity = -9
air.velocity = -10,0
kill = 0
airguard.velocity = -5.5, -1.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = -1
;hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
;forcestand = 1
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128
;palfx.time=32
p1sprpriority = 5
p2sprpriority = 3
getpower = 0,0
ID = 2310
;chainID = 2310



[State 0, Capture Anim]
type = VarSet
triggerall = !NumProjID(3590)
trigger1 = 1 ;movecontact
var(1) = AnimElemno(0)
ignorehitpause = 1
;persistent =

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumHelper(3571)
triggerall = helper(3571),anim = 380100
triggerall = numtarget
trigger1 = target, time=1
value = 3150,1 ;1000,0
volume = 0
channel = -1 ;7
lowpriority = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumHelper(3571)
triggerall = helper(3571),anim = 380104
triggerall = numtarget
trigger1 = target, time=1
value = 3150,3 ;1000,0
volume = 0
channel = -1 ;7
lowpriority = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumHelper(3571)
triggerall = helper(3571),anim = 380107
triggerall = numtarget
trigger1 = target, time=1
value = 3150,4 ;1000,0
volume = 0
channel = -1 ;7
lowpriority = 1
ignorehitpause = 1


[State 3302, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
ID = 7020
anim=7020
sprpriority=6
postype=p2
pos=(target,const(size.ground.front)-random%40),-40-random%20 ;-77;floor(p2dist y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
;persistent=0
pausemovetime=100
supermovetime=100

[State 0, TargetBind]
type = TargetBind
;triggerall = !NumProjID(3590)
trigger1 = numtarget
trigger1 = movehit
time = 1
id = -1
pos = -20,40
ignorehitpause = 1
;persistent =


[State 0, RemoveExplod] ;hitspark
type = RemoveExplod
trigger1 = !NumHelper(3570)
id = 7020
ignorehitpause = 1
;persistent =

[State 1061, End]
type = destroyself
trigger1 = !NumHelper(3570)
trigger2 = var(2)>=10
trigger3 = root, stateno != 3600 && root, stateno != 3610


;F_KMH Body
[Statedef 3573]
type = A
physics = N
movetype = I
anim = 380101
ctrl = 0
sprpriority = 7

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
;facing = 0
pos = 2,2;0
ignorehitpause = 1
;persistent =

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(79) = 3
value = 380105
elem = animelemno(0)

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(99) = 2
value = 380108
elem = animelemno(0)

[state 3561, invisible]
type = assertspecial
trigger1 = anim = 380108
flag = invisible


[State 0, AngleDraw]
type = null ;AngleDraw
trigger1 = 1
value = 0
scale = 1+((helper(3560),var(1))/10.0),1
ignorehitpause = 0
;persistent =

[State 0, AngleDraw]
type = AngleDraw
trigger1 = NumHelper(3570)
trigger1 = 1
value = 0
;scale = 1+((helper(3560),var(1))/1.2),1-(Helper(3560),var(2))/10.0
scale = (helper(3570),var(1))/8,1-(Helper(3570),var(2))/10.0
ignorehitpause = 1 ;0
;persistent =


[State 1061, End]
type = destroyself
trigger1 = !NumHelper(3570)

;F_KMH Tip
[Statedef 3574]
type = A
physics = N
movetype = I
anim = 380102
ctrl = 0
sprpriority = 9

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
;facing = 0
pos = 50,1
ignorehitpause = 1
;persistent =

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(79) = 3
value = 380106
elem = animelemno(0)

[state 3561, changeanim]
type = changeanim
trigger1 = root,animelemtime(99) = 2
value = 380109
elem = animelemno(0)

[state 3561, invisible]
type = assertspecial
trigger1 = anim = 380109
flag = invisible



[State 0, AngleDraw]
type = AngleDraw
trigger1 = NumHelper(3570)
;trigger1 = NumHelper(2312)
;trigger1 = Helper(2312),var(2)>=7
trigger1 = 1
value = 0
scale = 1,1-(Helper(3570),var(2))/10.0
ignorehitpause = 0
;persistent =

[State 1061, End]
type = destroyself
trigger1 = !NumHelper(3570)


;Empty state for spawning Gackt
[Statedef 3575]
type = A
physics = N
movetype = I
ctrl = 0

[State 0, VarAdd] ;Number of hits
type = VarAdd
trigger1 = !time
var(2) = 1
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = !time
value = 3572
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

[State 1061, End]
type = destroyself
trigger1 = root, stateno != 3610


;---------------------------------
;Fly Aura helper
[Statedef 4071]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 4071
sprpriority = 1
velset = 0,0

[State 1902, BindToParent]
type = BindToParent
trigger1 = 1
pos = -3,-66

[state 4072, trans]
type = trans
triggerall = root, anim = 4002
trigger1 = root, animelemtime(5) >= 0
trans = addalpha
alpha = 350-(time*3),(time*3)


[state 4072, destroyself]
type = destroyself
trigger1 = root, anim != 4002 && root, anim != 4100
trigger1 = root, anim != 4200
trigger1 = root, anim != 4300
;------------------------------------------
;Finisher 1 Fireball
[statedef 4110]
type = S
movetype = A
physics = N
anim = 410202
sprpriority = 8


[state 4002, velset]
type = velset
trigger1 = !time
y = -5

[State 4500, Launch]
type = PlaySnd
trigger1 = !time
value = 4100,2

[state 4100, centering]
type = velmul
trigger1 = Vel Y != 0
trigger1 = time < 60
y = .90

[state 4110, changeanim]
type = changeanim
trigger1 = time = 40
value = 410203

[state 4002, velset]
type = velset
trigger1 = time = 40
y = -5

[state 4110, hitadd]
type = hitadd
triggerall = anim = 410203
trigger1 = time = 60
trigger2 = time > 60 && time%4 = 0
value = 1

[State 650, punch hit spark]
type = Explod
triggerall = anim = 410203
trigger1 = time = 60
trigger2 = time > 60 && time%4 = 0
anim = 330013
id = 330013
pos = -40,80
random = 64,52
postype = p2
ontop = 1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
scale = 1,1
persistent = 1

[state 4110, playsnd]
type = playsnd
triggerall = anim = 410203
trigger1 = time = 60
trigger2 = time > 60 && time%4 = 0
value = 4100, 9

[state 4110, envshake]
type = envshake
triggerall = anim = 410203
trigger1 = time = 60
;trigger2 = time > 60 && time%4 = 0
ampl = 13
freq = 80
time = 70

[state 4110, velset]
type = velset
triggerall = anim = 410203
trigger1 = time = 60
y = -.5

[state 4110, envshake]
type = envshake
triggerall = anim = 410203
trigger1 = !animtime
ampl = 25
freq = 40
time = 32

[state 4110, velset]
type = velset
triggerall = anim = 410203
trigger1 = !animtime
y = 0

[state 4110, changeanim]
type = changeanim
triggerall = anim = 410203
trigger1 = !animtime
value = 410204

[state -2, helper]
type = helper
triggerall = anim = 410204
trigger1 = animelem = 1
pos = 0,0
postype = left
stateno = 8601
helpertype = normal
name = "Fire"
sprpriority = -5
ownpal = 1
ignorehitpause = 1

[State 4500, Impact]
type = PlaySnd
triggerall = anim = 410204
trigger1 = animelem = 1
value = 4100,1


[state 4110, destroyself]
type = destroyself
trigger1 = anim = 410204 && animelemtime(9) = 0
;====================================
;FLAME FX - Final Impact
[Statedef 8600]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 9990, Explod]
type = Explod
trigger1 = time = 0
anim = 8600
ID = 8600
pos = 5,-45  ;(enemynear,const(size.mid.pos.x))-20,(enemynear,const(size.mid.pos.y))-10
postype = p2
removetime = 200
sprpriority = 3
bindtime = -1
ownpal = 1
facing = IfElse(random<500,1,-1) ;-1

[State 9990, Explod]
type = Explod
trigger1 = time = 0
anim = 8601
ID = 8601
pos = 15,-10   ;(enemynear,const(size.mid.pos.x))-40,(enemynear,const(size.mid.pos.y))+10
postype = p2
removetime = 200
sprpriority = 3
bindtime = -1
ownpal = 1
facing = IfElse(random<500,1,-1) ;-1

[State 9990, Explod]
type = Explod
trigger1 = time = 0
anim = 8601
ID = 8602
pos = -15,-20   ;(enemynear,const(size.mid.pos.x))+10,(enemynear,const(size.mid.pos.y))-30
postype = p2
removetime = 200
sprpriority = 4
bindtime = -1
ownpal = 1
facing = IfElse(random<500,1,-1) ;-1

[State 9990, ModifyExplod]
type = ModifyExplod
trigger1 = time = [190,200]
anim = 8600
ID = 8600
pos = 5,-45
facing = IfElse(random<500,1,-1) ;-1
trans = addalpha
alpha = 256-25*(time-190),0+25*(time-190)

[State 9990, ModifyExplod]
type = ModifyExplod
trigger1 = time = [190,200]
anim = 8601
ID = 8601
pos = 15,-10
facing = IfElse(random<500,1,-1) ;-1
trans = addalpha
alpha = 256-25*(time-190),0+25*(time-190)

[State 9990, ModifyExplod]
type = ModifyExplod
trigger1 = time = [190,200]
anim = 8601
ID = 8602
pos = -15,-20
facing = IfElse(random<500,1,-1) ;-1
trans = addalpha
alpha = 256-25*(time-190),0+25*(time-190)

[state 8600, noenemy]
type = removeexplod
trigger1 = !Numenemy
id = 8600


[state 8600, noenemy]
type = removeexplod
trigger1 = !Numenemy
id = 8601

[state 8600, noenemy]
type = removeexplod
trigger1 = !Numenemy
id = 8602

[State 9990, DestroySelf]
type = DestroySelf
trigger1 = time>=200
trigger2 = !Numenemy

;====================================
;FLAME FX - Finisher 1
[Statedef 8601]
type = S
velset = 0,0
sprpriority = 0
anim = 15999
ctrl = 0

[State 9990, Explod]
type = Explod
trigger1 = time = 0
anim = 8600
ID = 8600
pos = 5,-45  ;(enemynear,const(size.mid.pos.x))-20,(enemynear,const(size.mid.pos.y))-10
postype = p2
removetime = 110
sprpriority = 3
bindtime = -1
ownpal = 1
facing = IfElse(random<500,1,-1) ;-1

[State 9990, Explod]
type = Explod
trigger1 = time = 0
anim = 8601
ID = 8601
pos = 15,-10   ;(enemynear,const(size.mid.pos.x))-40,(enemynear,const(size.mid.pos.y))+10
postype = p2
removetime = 110
sprpriority = 3
bindtime = -1
ownpal = 1
facing = IfElse(random<500,1,-1) ;-1

[State 9990, Explod]
type = Explod
trigger1 = time = 0
anim = 8601
ID = 8602
pos = -15,-20   ;(enemynear,const(size.mid.pos.x))+10,(enemynear,const(size.mid.pos.y))-30
postype = p2
removetime = 110
sprpriority = 4
bindtime = -1
ownpal = 1
facing = IfElse(random<500,1,-1) ;-1

[State 9990, ModifyExplod]
type = ModifyExplod
trigger1 = time = [100,110]
anim = 8600
ID = 8600
pos = 5,-45
postype = p2
facing = IfElse(random<500,1,-1) ;-1
trans = addalpha
alpha = 256-25*(time-100),0+25*(time-100)

[State 9990, ModifyExplod]
type = ModifyExplod
trigger1 = time = [100,110]
anim = 8601
ID = 8601
pos = 15,-10
postype = p2
facing = IfElse(random<500,1,-1) ;-1
trans = addalpha
alpha = 256-25*(time-100),0+25*(time-100)

[State 9990, ModifyExplod]
type = ModifyExplod
trigger1 = time = [100,110]
anim = 8601
ID = 8602
pos = -15,-20
postype = p2
facing = IfElse(random<500,1,-1) ;-1
trans = addalpha
alpha = 256-25*(time-100),0+25*(time-100)


[State 9990, DestroySelf]
type = DestroySelf
trigger1 = time>=110
;--------------------------------------------
;Final Flash Parent Helper
[statedef 36000]
type = A
movetype = A
physics = N
anim = 15999

[state 36001, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 3000, Source]
type = helper
trigger1 = !time
helpertype = normal
stateno = 36001
ID = 36001
name = "Source"
postype = p1
pos = 0,0
ownpal = 1

[State 3000, Source]
type = helper
trigger1 = !time
helpertype = normal
stateno = 36002
ID = 36002
name = "Hitbox"
postype = p1
pos = 0,0
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
trigger1 = NumHelper(36002)
var(1) = ceil(abs(ScreenPos X - helper(36002),ScreenPos X))
ignorehitpause = 1

[State 0, Scale Tracker Y]
type = VarAdd
triggerall = var(2) < 10
trigger1 = root,animelemtime(97) >= 0
var(2) = 1
ignorehitpause = 0

[state 380000, destroyhelper]
type = destroyself
trigger1 = root, stateno != 3600

;Source
[statedef 36001]
type = A
movetype = A
physics = N
anim = 380100
sprpriority = 9

[state 36001, bind]
type = bindtoparent
trigger1 = 1
pos = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1



[state 380000, destroyhelper]
type = destroyself
trigger1 = root, stateno != 3600

;Hitbox
[statedef 36002]
type = A
movetype = A
physics = N
anim = 380103


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1

[State 3000, Head]
type = helper
trigger1 = !NumHelper(36003)
trigger1 = !time;=4
helpertype = normal
stateno = 36003
ID = 36003
name = "Head"
postype = p1
pos = 30,0
ownpal = 1

[State 3000, Beam Scaling]
type = helper
trigger1 = !NumHelper(36004)
trigger1 = !time;=4
helpertype = normal
stateno = 36004
ID = 36004
name = "Scaling"
postype = p1
pos = 0,0
ownpal = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1 ;!time
value = 380103
elem = IFElse((floor(abs((root,pos X)-pos X)/7)-10)<=0,1,floor(abs((root,pos X)-pos X)/7)-10);var(1)
ignorehitpause = 1


[state 3600, velset]
type = velset
trigger1 = frontedgebodydist > 0
x = 1

[state 3600, velset]
type = velset
trigger1 = frontedgebodydist < 0
x = 0

[State 3005, hit]
type = hitdef
trigger1 = 1
attr = A,HP
hitflag = MAF;D
guardflag = MA
priority = 7,Hit
damage = 8,4 ;ceil(13*root,fvar(12)), 3
getpower = 0,0
givepower = 20,20
pausetime = 4,4 ; 5,10
animtype = Heavy ;Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 4 ;16
ground.slidetime = 4 ;16
guard.hittime = 4 ;16
air.hittime = 4 ;13
airguard.ctrltime = 16
ground.velocity= -5,0
guard.velocity = -9
air.velocity = -5.5,-3.9
airguard.velocity = -5.5, -1.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=0
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = -1
;hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
;forcestand = 1
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128
;palfx.time=32
p1sprpriority = 5
p2sprpriority = 3
kill = 0 ;Cond(target,life<=4,1,0) ;0
getpower = 0,0


[state 380000, destroyhelper]
type = destroyself
trigger1 = root, stateno != 3600

;Head
[statedef 36003]
type = A
movetype = A
physics = N
anim = 380102
sprpriority = 9

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
;facing = 0
pos = 0,0
ignorehitpause = 1
;persistent =


[state 380000, destroyhelper]
type = destroyself
trigger1 = root, stateno != 3600

;Scaling
[statedef 36004]
type = A
movetype = A
physics = N
anim = 380101
sprpriority = 9
velset = 0,0

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
;facing = 0
pos = 0,50 ;0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
ignorehitpause = 1



[State 0, AngleDraw]
type = AngleDraw
trigger1 = NumHelper(36000)
trigger1 = 1
value = 0
scale = (helper(36000),var(1))/30,1-(Helper(36000),var(2))/10.0
ignorehitpause = 1 


[state 380000, destroyhelper]
type = destroyself
trigger1 = root, stateno != 3600
;==========================================================
; Dragon Ball - Rolling from opponent
[Statedef 18045]
physics = N
velset = 0, 0
anim = ifelse(matchno <= 7,18044 + (matchno),1)
sprpriority = -5

[State 3033, Pos]
type = posadd
trigger1 = !time && numenemy
x = enemy, p2dist X - 20
y = -5

[State 3033, scale]
type = angledraw
trigger1 = 1
scale = 1,1

[State 4302, scale]
type = angleadd
trigger1 = vel x < 0
value = -5*(vel X)

[State 3033, Vel]
type = velset
trigger1 = time = [0,40]
x = -2

[State 3033, Vel]
type = veladd
trigger1 = time>40 && (vel x <0)
x = 0.3

[State 3033, Vel]
type = velset
trigger1 = time>40 && (vel x >0)
x = 0


;------------------------------------------
;Ex royal buster Helper
[statedef 24100]
type = S
movetype = A
physics = N
anim = 24100
sprpriority = 7

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

[state 803, playsnd]
type = playsnd
trigger1 = !time
value = 2410,0


[State 200, 1]  
type = HitDef
triggerall = anim = 24100
trigger1 = (time % 3) = 0
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 10 < 7, 7, fvar(11) * 10)), 5
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 3,3 ;13,13
guard.pausetime = 3,9 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s2410, 1
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = 1,-3
guard.velocity = 4
airguard.velocity = 1,-2
air.type = Low
fall.recover = 0
fall = 1
air.velocity = 1,-3
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)


[state 24110, destroyhelper]
type = destroyself
trigger1 = time = 25


;=========================================
;Debris generator
[Statedef 66853]
type = A
movetype = I
physics = N
Anim = 15999

[State 1003, Helper 1]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 2]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 3]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 4]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 5]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125


[State 1003, Helper 6]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66854
pos = 0,0
postype = p1
facing = facing
stateno = 66854
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125


[State 1003, DestroySelf]
type = DestroySelf
trigger1 = Time=2




;Debris
[Statedef 66854]
type = A
movetype = I
physics = N
Anim = 6685 + random%3
sprpriority = 7

[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = 8-random%20
y = -17+random%10
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 1004, assert]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1004, vel]
type = VarSet
trigger1 = !Time
var(10) = random%2

[State 1004, assert]
type = AngleDraw
trigger1 = 1
value = IfElse(var(10)=0,5*Time,-5*Time)

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = pos y > -vel y

;=========================================
;Floating Debris generator
[Statedef 66855]
type = A
movetype = I
physics = N
Anim = 15999


[State 1003, Helper 1]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66856
pos = -45,0
postype = p1
facing = facing
stateno = 66856
keyctrl = 0
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 2]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66857
pos = 45,0
postype = p1
facing = facing
stateno = 66856
keyctrl = 0
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 3]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66858
pos = -100,-random%5
postype = p1
facing = facing
stateno = 66856
keyctrl = 0
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 4]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66859
pos = 100,-random%5
postype = p1
facing = facing
stateno = 66856
keyctrl = 0
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125

[State 1003, Helper 5]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66860
pos = -140,-random%5
postype = p1
facing = facing
stateno = 66856
keyctrl = 0
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125


[State 1003, Helper 6]
type = Helper
trigger1 = 1
Helpertype = Normal
name = "Debris"
id = 66861
pos = 140,-random%5
postype = p1
facing = facing
stateno = 66856
keyctrl = 0
ownpal = 0
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
;size.xscale = .125
;size.yscale = .125


[State 1003, DestroySelf]
type = DestroySelf
trigger1 = Time=2

;----------------------------------------------------------------
;Floating Debris
[Statedef 66856]
type = A
movetype = I
physics = N
Anim = 6688 + random%3
sprpriority = 10



[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = ifelse(rootdist X < 0,1,-1)*(.05+((random%10)/96))
y = -.2-((random%10)/10)
;ignorehitpause =
;persistent =


[State 1004, assert]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 66856, transparency]
type = trans
trigger1 = 1
trans = addalpha
alpha = 255-(time*2),(time*2)


[State 1004, vel]
type = VarSet
trigger1 = !Time
var(10) = random%101
;----------------------------------------------------------
;Spinning Squid
[Statedef 70201]
type = S
physics = N
anim = 18800
velset = 6,0

[state 70200, vroom]
type = playsnd
trigger1 = !time
value = 702,8

[state 181, 1]
type = assertspecial
trigger1 = pos X != [-240,240]
flag = roundnotover

[state 18500, destroyself]
type = destroyself
trigger1 = pos X != [-240,240]

;-----------------------------------------------------
;SSJ Transform Hair
[Statedef 70400]
type = S
anim = 708
sprpriority = 3

[state 704, bind]
type = BindToRoot
trigger1 = 1
pos = 0,0
ignorehitpause = 1

[state 70400, appear]
type = trans
trigger1 = time+6 < 256
trans = addalpha
alpha = (time+6)*18,256-((time+6)*18)


[State 17100, Transform Sound]
type = PlaySnd
trigger1 = animelemtime(25) = 0
value = 450,0





[state 704, destroyself]
type = destroyself
trigger1 = !animtime
trigger2 = root, stateno != 704
;======================================================================
;SSJ TRANSFORM CUTSCENE
[Statedef 70401]
type = A
movetype = I
physics = N
sprpriority = 4
velset = 0,0
anim = 711

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1


[State -2, Explod];Frame
type = Explod
trigger1 = !time
anim = 712
ID = 712
removetime = -1
sprpriority = 4
bindtime = -1
ownpal = 1
postype = p1
pos = 0,0
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999

[State 19300]
type = posset
trigger1 = !time
X = ifelse((root,facing=1),-290,290)
Y = -60

[State 19300]
type = velset
trigger1 = root,animelemtime(19)=0
X = 20

[State 19300]
type = velmul
trigger1 = root,animelemtime(22)>=0 && root,animelemtime(39)<0
X = 0.7


[State 17100, Appear Sound]
type = PlaySnd
trigger1 = root,animelemtime(32)=0
value = 193,2

[State 19300]
type = velset
trigger1 = root,animelemtime(49)=0
X = -15

[State 19300]
type = RemoveExplod
trigger1 = root,animelemtime(79)=0
ID = 712

[State 19300]
type = Destroyself
trigger1 = root,animelemtime(79)=0
trigger2 = root,StateNo != 704

;======================================================================
;Short SSJ TRANSFORM CUTSCENE
[Statedef 70500]
type = A
movetype = I
physics = N
sprpriority = 4
velset = 0,0
anim = 710

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1


[State -2, Explod];Frame
type = Explod
trigger1 = !time
anim = 709
ID = 709
removetime = -1
sprpriority = 4
bindtime = -1
ownpal = 1
postype = p1
pos = 0,0
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999

[State 19300]
type = posset
trigger1 = !time
X = ifelse((root,facing=1),-290,290)
Y = -70

[State 19300]
type = velset
trigger1 = root,animelemtime(1)= 40
X = 20

[State 19300]
type = velmul
trigger1 = root,animelemtime(1)>=49 && root,animelemtime(1)<120
X = 0.7


[State 19300]
type = velset
trigger1 = root,animelemtime(4)=0
X = -15

[State 19300]
type = RemoveExplod
trigger1 = root,animelemtime(17)=0
ID = 709

[State 19300]
type = Destroyself
trigger1 = root,animelemtime(17)=0
trigger2 = root,StateNo != 705
;====================================
; Broken Back - BG Arms + legs
[Statedef 245947]
type = S
movetype = H
physics = N
velset = 0,0
anim = 5947

[State 2260, bind]
type = bindtoroot
trigger1 = !ishelper
trigger1 = 1
pos = 0,0

[State 2260, bind]
type = bindtoparent
trigger1 = IsHelper
trigger1 = 1
pos = 0,0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = time = 126
;====================================
; RE Broken Back - BG Arms + legs
[Statedef 355947]
type = S
movetype = H
physics = N
velset = 0,0
anim = 5947

[State 2260, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = time = 19

;----------------------------------
[statedef 80000000]
type = S
movetype = A
physics = N
anim = 332403
sprpriority = 7

[state 8000000001, velset]
type = varset
trigger1 = !time
var(1) = ifelse(random < 500, -1,1)

[state 0, playsnd]
type = playsnd
trigger1 = !time
value = 33001,1

[state 0, velset]
type = velset
trigger1 = !time
x = ifelse(root,animelemtime(9) > 0,ifelse(root,animelemtime(17) > 0,6,4),2)



[State 1061, Hitdef]
type = HitDef
trigger1 = !movecontact
attr = A, HA
animtype  = hard
damage    = ceil(ifElse(fvar(11) * 5 < 3, 3, fvar(11) * 5)), 0
priority  = 4,Hit
guardflag = MA
hitflag = MAFD
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = -10,0
hitsound   = s33001,2
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 99
ground.velocity = 0,0
guard.velocity = -7
air.velocity = -3.8,-2
airguard.velocity = -3, -2
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
kill = 0
fall.envshake.time = 10
fall.envshake.ampl = 2
fall.envshake.freq = 176
yaccel = 0.5
fall.recover = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
givepower = 35,35
id = 3060

[state 300, targetstate]
type = targetstate
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 90000006
ignorehitpause = 1
persistent = 0

[state 80000, changestate]
type = changestate
trigger1 = movehit
value = 80000003

[state 80000, destroyself]
type = destroyself
trigger1 = (pos x!=[-240,240])
trigger2 = time>180
trigger3 = movehit

[statedef 80000001]
type = S
movetype = A
physics = N
anim = 332404
sprpriority = 7

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[state 8000000001, velset]
type = varset
trigger1 = !time
var(1) = ifelse(random < 500, -1,1)



[state 8000000001, velset]
type = varset
trigger1 = !time
var(2) = random%3

[state 80000001, posadd]
type = posadd
trigger1 = !time
x = var(2)*2


[state 0, velset]
type = velset
trigger1 = !time
x = 13

[state 0, velset]
type = velset
trigger1 = time = 1
y = var(1)*var(2)

[state 8000,angleset]
type = angleset
trigger1 = !time
value = -(var(1)*(var(2)*2))

[state 800001,angledraw]
type = angledraw
trigger1 = 1


[State 1061, Hitdef]
type = HitDef
triggerall = random < 499
trigger1 = !movecontact
attr = A, HA
animtype  = hard
damage    = ceil(ifElse(fvar(11) * 3 < 3, 3, fvar(11) * 3)), 2
priority  = 4,Hit
guardflag = MA
hitflag = MAFD
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = -10,0
hitsound   = s33001,3
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 99
ground.velocity = 0,0
guard.velocity =-7
air.velocity = -3.8,-2
airguard.velocity = -3, -2
envshake.time = 5
envshake.ampl = 2
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
kill = 0
yaccel = 0.5
fall.recover = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
id = 3060

[State 1061, Hitdef]
type = HitDef
triggerall = random >= 499
trigger1 = !movecontact
attr = A, HA
animtype  = hard
damage    = ceil(ifElse(fvar(11) * 3 < 3, 3, fvar(11) * 3)), 0
priority  = 4,Hit
guardflag = MA
hitflag = MAFD
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-50
hitsound   = s33001,3
guardsound = S6,0
ground.type = low
air.type = low
ground.slidetime = 20
ground.hittime  = 99
ground.velocity = 0,0
guard.velocity =-7
air.velocity = -3.8,-2
airguard.velocity = -3, -2
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
kill = 0
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
getpower = 0,0
fall.recover = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
givepower = 35,35
id = 3060


[state 80000, changestate]
type = changestate
trigger1 = movehit
value = 80000004

[state 80000, destroyself]
type = destroyself
trigger1 = (pos x!=[-240,240])
trigger2 = time>180


[statedef 80000002]
type = S
movetype = A
physics = N
anim = 1206
sprpriority = 7

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[state 80000, destroyself]
type = destroyself
trigger1 = root,anim != 332401

[statedef 80000003]
type = S
movetype = A
physics = N
anim = 332408
velset = 0,0
sprpriority = 7

[state 0, playsnd]
type = playsnd
trigger1 = !time
value = 33002,3+random%3

[state 80000, destroyself]
type = destroyself
trigger1 = animtime = 0

[statedef 80000004]
type = S
movetype = A
physics = N
anim = 332409
sprpriority = 7
velset = 0,0

[state 80000, destroyself]
type = destroyself
trigger1 = animtime = 0

[Statedef 80000005]
type = A
anim = 332415
sprpriority = -1

[state 8000005, fwoosh]
type = playsnd
trigger1 = !time
value = 32401,0


[state 80000005, changeanim]
type = changeanim
triggerall = anim = 332415
trigger1 = !animtime
value = 332416

[state 80000005, changeanim]
type = changeanim
triggerall = root,anim = 332405
trigger1 = root,animelemtime(3) = 0
value = 332417

[state 80000005, destroyself]
type = destroyself
triggerall = anim = 332417
trigger1 = !animtime

;========================<EXPLODSIVE BUFFERING HELPER>=============================
[StateDef 90000005]
type = A
physics = N
moveType = I
anim = 1
velSet = 0,0
ctrl = 0

[State 90000005, Turn]
type = Turn
trigger1 = (enemy, NumExplod(94646464) || enemy, NumExplod(92468246)) && !var(0)
trigger2 = !enemy, NumExplod(94646464) && !enemy, NumExplod(92468246) && var(0)
ignoreHitPause = 1

[State 90000005, Reverse Left/Right]
type = VarSet
trigger1 = (enemy, NumExplod(94646464) || enemy, NumExplod(92468246)) && !var(0)
var(0) = 1
ignoreHitPause = 1

[State 90000005, Reset Turn Variable]
type = VarSet
trigger1 = !enemy, NumExplod(94646464) && !enemy, NumExplod(92468246) && var(0)
var(0) = 0
ignoreHitPause = 1

[State 90000005, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "by JustMorphPointman"
ignoreHitPause = 1

;----------------------------
[statedef 90000006]
type = S
movetype = H
physics = N
ctrl = 0
velset = -.5,0
facep2 = 1

[state 0, changeanim]
type = changeanim
trigger1 = !time
value = ifelse(random < 499,332450,332451)

[state 0, changestate]
type = selfstate
trigger1 = time = 99
value = 0
ctrl = 1




