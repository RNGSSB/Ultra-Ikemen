;Knuckle Waterfall
[Statedef 3000]
type = A
movetype = A
physics = N
anim = 3000
velset = 0,0
poweradd = -1000
movehitpersist = 1
hitcountpersist = 1
ctrl = 0

[state 3000, UUURAAAAAAAAAAAAAA!]
type = playsnd
trigger1 = !time
value = 8,2
channel = 0

[state 1100, nothitby]
type = nothitby
trigger1 = time <= 52
value = SCA


[State 0, Projectile]
type = Projectile
triggerall = anim = 3002
trigger1 = animelemtime(5) > 0
trigger1 = movehit
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

;---------------Start-------------;
;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [5,45]
flag = noBG
flag2 = noFG

[State 1000, shake]
type = EnvShake
triggerall = anim = 3000
trigger1 = !(time%4)
time=4
freq=80
ampl=1.5+0.02*time

[State 3000, superpause]
type = superpause
trigger1 = time=5
time = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s5,100
darken = 0
movetime = 40


[State 0, Super FX]
type = Explod
trigger1 = time = 5
anim = 30000
id = 30000
pos = -114,30
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

;---------------Middle-------------;
[state 3000,changeanim]
type = changeanim
triggerall = anim = 3000
trigger1 = animtime = 0
value = 3001

[state 3000, velset]
type = velset
trigger1 = anim = 3001
y = 3


[State 200, 1]
type = HitDef
triggerall = anim = 3001
trigger1 = animelem = 2 || animelem = 5
attr = A, HA
damage = ceil(ifElse(fvar(11) * 15 < 3, 3, fvar(11) * 15)), 5
kill = 0
animtype = Heavy
guardflag = MA
hitflag = MAFD
pausetime = 3,3
guard.pausetime = 3,3
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-10
hitsound = s5, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = 1
guard.velocity = -1
airguard.velocity = -1,-1
air.type = High	
air.velocity = 1,-1
air.hittime = 12
fall = 1
p2facing = 1
fall.recover = 0
air.animtype = back
getpower= 0,0
givepower = 30,20
envshake.time = 6
envshake.freq = 60
envshake.ampl = 6
yaccel = 0.5
ID = 3050

[state 3000, velset]
type = velset
triggerall = movehit
trigger1 = anim = 3001
trigger1 = enemy,stateno = 3050 
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

[state 3000,changeanim]
type = changeanim
triggerall = movehit
triggerall = anim = 3001
triggerall = Pos Y >= 0
trigger1 = enemy,stateno = 3050 && hitcount > 6
value = 3002


[state 3000,changeanim]
type = changeanim
triggerall = anim = 3001
triggerall = Vel Y > 0 && Pos Y >= 0
trigger1 = enemy,stateno != 3050 
trigger2 = time > 50
value = 3003


;---------------Hit-------------;

[state 1201, playerpush]
type = playerpush
trigger1 = p2bodydist X > -30
value = 0


[state 3000, velset]
type = velset
trigger1 = anim = 3002
trigger1 = animelem = 6
x = -2.5
y = -6
persistent = 0

[State 9011, VelAdd]
type = VelAdd
triggerall = anim = 3002
trigger1 = animelemtime(6) >= 0
y = 0.35



[state 3000, break you]
type = playsnd
triggerall = anim = 3002
trigger1 = animelem = 1
value = 3000,5+random%2
channel = 0

[State 200, 1]
type = HitDef
triggerall = anim = 3002
trigger1 = animelem = 5
attr = A, HA
damage = ceil(ifElse(fvar(11) * 60 < 20, 20, fvar(11) * 60)), 5
animtype = Heavy
guardflag = MA
hitflag = MAFD
pausetime = 17,17
guard.pausetime = 17,17
sparkno = s3600
guard.sparkno = s7000
sparkxy = -20,-20
hitsound = s3000, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = 1
guard.velocity = -1
airguard.velocity = -1,-1
air.type = High	
air.velocity = 1,-1
air.hittime = 12
fall = 1
fall.recover = 0
air.animtype = back
getpower= 0,0
givepower = 30,20
envshake.time = 50
envshake.freq = 40
envshake.ampl = 5
yaccel = 0.5
ID = 3060


[State 200, 1]
type = PlaySnd
triggerall = anim = 3001
trigger1 = AnimElem = 2 || animelem = 5
value = 3000, 0
channel = 1

[state 2001, Ground Smash FX]
type = explod
triggerall = anim = 3002
trigger1 = animelem = 5
anim = 3500
id = 3500
pos = 9,-3
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 0
scale = 1,1


[state 3000,changestate]
type = changeanim
triggerall = anim = 3002
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger1 = animelemtime(11) >= 0
value = 3003

;---------------Whiff-------------;



[state 3000, velset]
type = velset
trigger1 = anim = 3003
x = 0
y = 0


[state 17100, Landing Effect]
type = explod
trigger1 = anim = 3003 && animelemtime(1) = 0
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 17100, Landing Sound]
type = PlaySnd
trigger1 = anim = 3003 && animelemtime(1) = 0
value = 40, 0
persistent = 0

[state 3000, posset]
type = posset
trigger1 = anim = 3003
y = 0




[state 3000, statetypeset]
type = statetypeset
trigger1 = anim = 3003
statetype = S

[State 1050, targetstate]
type = targetstate
trigger1 =  movehit = 1
trigger1 = numtarget(3050)
trigger1 = !(target, ishelper)
value = 3050
ID = 3050
ignorehitpause = 1
persistent = 1

[state 1050, targetbind]
type = targetbind
trigger1 =  movehit = 1
trigger1 = numtarget(3050)
trigger1 = !(target, ishelper)
pos = 0,0
ignorehitpause = 1
persistent = 1


[state 1050, targetstate]
type = targetstate
trigger1 =  movehit = 1
trigger1 = numtarget(3060)
trigger1 = !(target, ishelper)
value = 3060
ID = 3060
ignorehitpause = 1
persistent = 0

[State 1100, changestate]
type = changestate
triggerall = anim = 3003
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------------
;Hit By Knuckle Waterfall
[Statedef 3050]
type = A
movetype = H
physics = N
velset = 0, 1
ctrl = 0
anim = 5080

[state 3050, playerpush]
type =  playerpush
trigger1 = 1
value = 0

[state 3000, posset]
type = posset
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[state 3000, velset]
type = velset
trigger1 = pos Y >= 0 && Vel Y < 0
y =  0

[state 3050, changeanim]
type = changestate
trigger1 = pos Y >= 0 && Vel Y < 0
value = 3060

;----------------------------------------------
;Hit By Knuckle Waterfall Final
[Statedef 3060]
type = L
movetype = H
physics = N
velset= 0,0
ctrl = 0


[state 3050, invul]
type = nothitby
trigger1 = 1
value = SCA
time = 100

[state 3050, playerpush]
type =  playerpush
trigger1 = p2stateno = 3000
value = 0

[state 3060, changeanim]
type = changeanim2
trigger1 = !time
value = 3050

[state 3000, posset]
type = posset
trigger1 = pos y > 0
y = 0
ignorehitpause = 1



[state 3000, changestate]
type = selfstate
triggerall = time = 87
trigger1 = alive
value = 5120

[state 3000, changestate]
type = selfstate
triggerall = time = 20
triggerall = !alive
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
value = 5110


[state 1060, changestate]
type = changestate
triggerall = time = 20
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5110

;----------------------------------------------
;Emo Mode Activation
[Statedef 3100]
type = S
movetype = A
physics = S
anim = 3100
velset = 0,0
poweradd = -2000
ctrl = 0

[state 3102, varset]
type = varset
trigger1 = !time
var(54) = 0

[State 1003, Helper]
type = Helper
trigger1 = AnimElemTime(5)=1
trigger2=AnimElemTime(5)>1&&time%5=0
helpertype = Normal
name = "PerseEffect"
id = 2932
;pos = ((random%240)-120),((random%240)-120)
pos =((random%Const(Size.Ground.Front))-10),((random%Const(Size.Height))-50)
postype = p1
facing = 1
stateno = 2932
keyctrl = 0
ownpal = 1
sprpriority=-1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .02 - (.1*.5)
size.yscale = .02 - (.1*.5)
[State 1003, Helper]
type = Helper
trigger1 = AnimElemTime(5)=1
trigger2=AnimElemTime(5)>1&&time%40=0
helpertype = Normal
name = "PerseEffect"
id = 2932
pos =((random%Const(Size.Ground.Front))-10),0
;pos = 0,0;-ceil(random/10)
postype = p1
facing = 1
stateno = 2932
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .04 - (.1*.5)
size.yscale = .04 - (.1*.5)
[State 1003, Helper]
type = Helper
trigger1 = AnimElemTime(5)=1
trigger2=AnimElemTime(5)>1&&time%80=0
helpertype = Normal
name = "PerseEffect"
id = 2932
pos =((random%Const(Size.Ground.Front))-10),0
;pos = 0,0;-ceil(random/10)
postype = p1
facing = 1
stateno = 2932
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = .06 - (.1*.5)
size.yscale = .06 - (.1*.5)


[state 3100, varset]
type = varset
trigger1 = !time
var(28) = 1

[state 3100, varset]
type = varset
trigger1 = !time
var(19) = 1000

[state 2750, varset]
type = varset
trigger1 = !time
var(52) = 0
ignorehitpause = 1


[State 0, Helper]
type = Helper
trigger1 = AnimElemTime(3)=0 && anim = 3100
name = "Shield"
ID = 2705
stateno = 2705
pos = 0,0
postype = p1    ;p2,front,back,left,right
ownpal = 1
supermovetime = 999999
pausemovetime = 999999


[state 3100, playsnd]
type = playsnd
trigger1 = animelem = 6 && var(51) != 1
value = 3100,0

[state 3100, playsnd]
type = playsnd
trigger1 = animelem = 7 && var(51) != 1
value = 3100,1
persistent = 0


[state 3100, playsnd]
type = playsnd
trigger1 = animelemtime(6) = 0 && var(51) != 1
value = 3100,2

[State 3000, superpause]
type = superpause
trigger1 = animelemtime(6) = 0 && var(51) != 1
time = 145
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 145

[State 200, BGPalFX]
type = BGPalFX
trigger1 = animelemtime(6)>=0 && time<150
time = 1
add	= -100,-100,-100
mul	= 100,100,256
invertall = 0
color = 256

[state 3000, UUURAAAAAAAAAAAAAA!]
type = playsnd
triggerall = anim = 3100
trigger1 = animelemtime(3) = 0
value = 8,5
channel = 0
volumescale = 255



[State 3000, nhb]
type = NotHitBy
trigger1 = time<=97
time = 1
value = SCA

[State 1000, shake]
type = EnvShake
trigger1 = animelemtime(6)>=0
trigger1 = !(time%12)
time=12
freq=100
ampl=3+0.02*time

[State 0, RemapPal]
type = RemapPal
trigger1 = AnimElemTime(6)=0
trigger1 = var(58)
source = 1,1
dest = 2,Var(58)

[State 1900, Aura helper]
type = Explod
triggerall = anim = 3100
trigger1 = animelemtime(6)=0
id = 2700
anim = 2700
pos = 0,0
sprpriority = 7
postype = P1
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ignorehitpause = 1
persistent  = 0


[state 3100, varset]
type = varset
trigger1 = animelemtime(6) = 0
var(51) = 1



[state 3100, changeanim]
type = changeanim
trigger1 = anim = 3100 && time >= 150
value = 901

[State 1200, changestate]
type = changestate
triggerall = anim = 901
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------------
;Emo Exit
[Statedef 3101]
type = S
movetype = A
physics = S
anim = 2801
velset = 0,0
sprpriority = 3
ctrl = 0

[state 4100, flash white]
type = palfx
trigger1 = var(35) = 1
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[state 3101, assertspecial]
type = assertspecial
trigger1 = 1
flag = nomusic

[State 1900, Burst Aura]
type = explod
trigger1 = !time
anim = 2803
id = 2803
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1
removetime = -2
supermovetime = 9999
ignorehitpause = 1

[state 3101, playsnd]
type = playsnd
trigger1 = animelemtime(8) = 0
value = 8,6
channel = 0

[State 3000, superpause]
type = superpause
trigger1 = !time
time = 233
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 233

[State 200, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 221
add	= -100,-100,-100
mul	= 100,100,256
invertall = 0
color = 256

[State 1000, shake]
type = EnvShake
trigger1 = !(time%12)
time=12
freq=100
ampl=1

[state 3102, playsnd]
type = playsnd
trigger1 = animelem = 1
value = 3102,0
persistent = 0


[state 3102, playsnd]
type = playsnd
trigger1 = animelem = 9
value = 3102,5
persistent = 0


[state 3101, palfx]
type = null
trigger1 = animelemtime(5) >= 0 && time < 80
add = 0,0,ifelse(time*4 < 256,time*4,256)
mul = ifelse(256-time*4 > 0,256-time*4,0),ifelse(256-time*4 > 0,256-time*4,0),256
time = 1

[State 0,from sky lightning]
type = null
trigger1 =  time = 30 || time = 38 || time = 46 || time = 54 || time = 62
anim = 34500+random%6
sprpriority = 7
postype = p1
pos = -30,0
facing = 1
random = 20,0
scale = .7,2
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 0,from sky lightning]
type = null
trigger1 = time = 34 || time = 42 || time = 50 || time = 58 || time = 66
anim = 34500+random%6
sprpriority = 7
postype = p1
pos = 25,0
facing = 1
random = 20,0
scale = .7,2
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 0, lightning sound]
type = null
trigger1 =  time = 30 || time = 38 || time = 46 || time = 54 || time = 62 || time = 34 || time = 42 || time = 50 || time = 58 || time = 66
value = 2400,3
freqmul = .9 + (random/5000.0)
volumescale = 25
channel = 17

[State 1900, SSJ white circle]
type = explod
trigger1 = time = 66
anim = 2804
id = 2804
pos = 0,0
sprpriority = 4
ontop = 1
bindtime = -1
ownpal = 1
supermovetime = 9999
ignorehitpause = 1
removetime = -2

[state 3101, modifyexplod]
type = modifyexplod
trigger1 = time = 84
scale = 5,5
id = 2804



[State 1900, Fire fx]
type = explod
trigger1 = animelemtime(23) = 0
anim = 2802
id = 2802
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1
supermovetime = 9999
ignorehitpause = 1
removetime = -2



[State 4500, 1];transform theme
type = null
triggerall = cond(teammode = simul,cond(partner,name = "SSJ Vegeta Z2",partner,var(51) != 2,1),1)
triggerall = cond(enemynear, teammode != simul,cond(enemy,name = "SSJ Vegeta Z2",enemy,var(51) != 2,1),1)
triggerall = cond(enemynear,teammode = simul,cond(enemy(0),name = "SSJ Vegeta Z2",enemy(0),var(51) != 2,1),1)
triggerall = cond(enemynear,teammode = simul,cond(enemy(1),name = "SSJ Vegeta Z2",enemy(1),var(51) != 2,1),1)
trigger1 = animelemtime(39) = 0
value = 3102,1
channel = 18
loop = 1

[State 4500, 1];transform theme
type = PlaySnd
triggerall = animelemtime(39) = 0
trigger1 = cond(Numpartner, cond(partner ,name = "SSJ Vegeta Z2", partner, var(51) != 2,1),1)
trigger1 = cond(Numenemy, cond(enemy(0) ,name = "SSJ Vegeta Z2", enemy(0), var(51) != 2,1),1)
trigger1 = cond(Numenemy, cond(enemy(Numenemy = 2) ,name = "SSJ Vegeta Z2", enemy(Numenemy = 2), var(51) != 2,1),1)
value = 3102,1
channel = 18
loop = 1

[State 4500, 1];transform SND
type = PlaySnd
trigger1 = time = 60
value = 194,0
channel = 1



[State 0, RemapPal]
type = RemapPal
trigger1 = AnimElemTime(23)=0
trigger1 = var(58)
source = 1,1
dest = 3,Var(58)

[state 0, varset]
type = varset
trigger1 = AnimElemTime(23)=0
trigger1 = var(58)
var(51) = 2


[State 41, Train]
type = AfterImage
trigger1 = animtime = 0
time= -1
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,0,150
palpostbright= 0,0,150
trans= add



[State 1200, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------------
;Death
[Statedef 3102]
type = S
movetype = A
physics = S
anim = 5300
velset = 0,0
ctrl = 0

[state 3102, attackdist]
type = attackdist
trigger1 = 1
value = 0

[state 3102, detransform]
type = playsnd
trigger1 = !time
value = 3102,3
persistent = 0

[state 3102, palfx]
type = palfx
trigger1 = time < 10
add = 256,256,256
time = 1

[State 0, RemapPal] ;
type = RemapPal
trigger1 = !time
source = 1,1
dest = 1,Var(58)

[state 195, emo]
type = varset
trigger1 = !time
var(51) = 0

[state 3102, varset]
type = varset
trigger1 = !time
var(54) = 2

[state 3101, metergain]
type = powerset
trigger1 = !time
value = 0
ignorehitpause = 1

[State 1200, changestate]
type = changestate
trigger1 = time = 113
value = 11+(!NumExplod(90000001) && !NumExplod(90000002) && !NumExplod(90000003))
ctrl = 1
;--------------------------------------------
;Atomic Burst
[Statedef 3200]
type = S 
movetype = A
physics = S
anim = 3200
poweradd = -1000
sprpriority = 2
juggle = 0
ctrl = 0
velset = 0,0

[state 4100, flash white]
type = palfx
trigger1 = var(35) = 1
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[state 3200, varset]
type = varset
trigger1 = !time
var(39) = 0

[state 3200, !time]
type = playsnd
trigger1 = !time
value = 3200,5+random%2
channel = 0



[state 3200, posset]
type = posset
trigger1 = !time
y = 0

;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [2,58]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = time=2
time =58
p2defmul = 1
unhittable = 1
anim = -1
sound = s5,100
darken = 0
movetime = 58



[State 0, Super FX]
type = Explod
trigger1 = time = 2
anim = 30000
id = 30000
pos = -132,39
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[state 3200, playsnd]
type = playsnd
trigger1 = anim = 3200 && animtime = 0
value = 3200,0

;-----Charging-----------------------------
[State 3201, changeanim]
type = changeanim
triggerall = anim = 3200
trigger1 = animtime = 0
value = 3201

[State 200, 1]
type = PlaySnd
triggerall = anim = 3201
trigger1   = animelemtime(1) = 0
trigger2 = time % 50 = 0
value = 3300, 0


[State 0, Super FX]
type = Explod
triggerall = anim = 3201
trigger1 = !numexplod(32020)
anim = 32020
id = 32020
pos = 30,-75
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 9
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 1



[State 0, Super FX]
type = Helper
triggerall = anim = 3201
trigger1 = animelemtime(1) = 0
stateno = 3510
id = 3510
pos = 25,-38
postype = p1
sprpriority = 7
ownpal = 1
scale = 1,1
persistent = 0

[State 1000, shake]
type = EnvShake
triggerall = anim= 3201
trigger1 = !(time%8)
time=4
freq= 30
ampl=2

[state 3202, removeexplod]
type = removeexplod
trigger1 = anim = 3202
id = 32020

;--------Fire!------------------------------
[state 3202, fire]
type = changeanim
triggerall = var(39) = 1 && anim = 3201 
triggerall = !AILEVEL
trigger1 = command != "holdz" && command != "holdy" && command != "holdx"
trigger2 = time = 250
value = 3202

[state 3202, ai fire]
type = changeanim
triggerall = var(39) = 1 && anim = 3201 
triggerall = AILEVEL
trigger1 = (enemynear, movetype != H || enemynear, stateno = [150,155]) ;Enemy not hit
trigger1 = enemynear, pos y > -60 || enemynear, vel y > 0
trigger2 = enemynear, movetype = H && enemynear, pos y > -40 ;Enemy hit
trigger2 = enemynear, vel y > 0
trigger3 = prevstateno = 310
trigger4 = time = 250
value = 3202


[state 3202, varset]
type = varset
trigger1 = anim = 3201
trigger1 = animtime = 0
var(39) = 1



[State 1200, changestate]
type = changestate
triggerall = anim = 3202
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------
;Hit by Enhanced EX Superdash
[statedef 3270]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
velset = 0,0
facep2 = 1


[state 3270,screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -18
y = -9
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
trigger1 = animelemtime(2) = 0
y = 0.35



[State 2070, Hit wall]
type = ChangeState
triggerall = alive
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 3272

[State 2070, Hit wall]
type = ChangeState
triggerall = !alive
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1323

[State 2070, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
;Wall stick 1
[Statedef 3272]
type    = A
movetype= H
physics = N

[state 3272, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 1557, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1557, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[state 3270, lifeadd]
type = lifeadd
trigger1 = !time
value = -ceil(ifElse(enemy,fvar(11) * 20 < 10, 10, enemy,fvar(11) * 20))


[State 1557, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 3272, shake]
type = envshake
trigger1 = !time
freq = 40
ampl = 9
time = 5

[State 1557, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 2004

;[State 1557, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 1557, State]
type = ChangeState
trigger1 = time = 1
value = 3273


;------------------
;Bounce off
[Statedef 3273]
type    = A
movetype= H
physics = N

[state 3272, playerpush]
type = playerpush
trigger1 = 1
value = 0



[state 3270,screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1558, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1558, Vel X]
type = VelSet
trigger1 = Time = 0
x = 25

[State 1558, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1558, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 2070, Hit wall]
type = ChangeState
triggerall = alive
triggerall = time > 10
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 3274

[State 2070, Hit wall]
type = ChangeState
triggerall = !alive
triggerall = time > 10
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1323

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
;Wall stick 2
[Statedef 3274]
type    = A
movetype= H
physics = N

[state 3272, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 1557, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1557, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1557, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 3270, lifeadd]
type = lifeadd
trigger1 = !time
value = -ceil(ifElse(enemy,fvar(11) * 20 < 10, 10, enemy,fvar(11) * 20))


[state 3272, shake]
type = envshake
trigger1 = !time
freq = 40
ampl = 9
time = 5

[State 1557, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 2004

;[State 1557, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 1557, State]
type = ChangeState
trigger1 = time = 1
value = 3275


;------------------
;Bounce off
[Statedef 3275]
type    = A
movetype= H
physics = N

[State 1558, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1558, Vel X]
type = VelSet
trigger1 = Time = 0
x = 25

[State 1558, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1558, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 2070, Hit wall]
type = ChangeState
triggerall = alive
triggerall = time > 10
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 3276

[State 2070, Hit wall]
type = ChangeState
triggerall = !alive
triggerall = time > 10
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1323

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;------------------
;Wall stick 3
[Statedef 3276]
type    = A
movetype= H
physics = N

[state 3272, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 1557, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1557, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1557, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 3270, lifeadd]
type = lifeadd
trigger1 = !time
value = -ceil(ifElse(enemy,fvar(11) * 20 < 10, 10, enemy,fvar(11) * 20))


[state 3272, shake]
type = envshake
trigger1 = !time
freq = 40
ampl = 9
time = 5

[State 1557, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 2004

;[State 1557, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 1557, State]
type = ChangeState
trigger1 = time = 1
value = 3277


;------------------
;Bounce off
[Statedef 3277]
type    = A
movetype= H
physics = N


[state 3272, playerpush]
type = playerpush
trigger1 = 1
value = 0

[State 1558, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1558, Vel X]
type = VelSet
trigger1 = Time = 0
x = 25

[State 1558, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1558, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 2070, Hit wall]
type = ChangeState
triggerall = alive
triggerall = time > 10
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 3278

[State 2070, Hit wall]
type = ChangeState
triggerall = !alive
triggerall = time > 10
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1323

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
;Wall stick 4
[Statedef 3278]
type    = A
movetype= H
physics = N

[state 3272, playerpush]
type = playerpush
trigger1 = 1
value = 0


[State 1557, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1557, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1557, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[state 3270, lifeadd]
type = lifeadd
trigger1 = !time
value = -ceil(ifElse(enemy,fvar(11) * 20 < 10, 10, enemy,fvar(11) * 20))

[state 3272, shake]
type = envshake
trigger1 = !time
freq = 40
ampl = 9
time = 5

[State 1557, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 2004

;[State 1557, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 1557, State]
type = ChangeState
trigger1 = time = 1
value = 3279

;------------------
;Bounce off
[Statedef 3279]
type    = A
movetype= H
physics = N




[State 1558, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1558, Vel X]
type = VelSet
trigger1 = Time = 0
x = 18

[State 1558, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1558, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062



[state 1060, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100

;--------------------------------------------
;Light Final Impact
[Statedef 3400]
type = S 
movetype = A
physics = N
anim = 3400
poweradd = -1000
juggle = 0
ctrl = 0
velset = 0,0

[state 4100, flash white]
type = palfx
trigger1 = var(35) = 1
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[state 3420, width]
type = width
trigger1 = time > 50 && animelemtime(13) <= 0
value = 30,30

[state 3400, varset]
type = varset
trigger1 = !time
var(25) = 0

[state 3400, playsnd]
type = playsnd
trigger1 = animelem = 3
value = 3400,2
channel = 0

[State 0, Projectile]
type = Projectile
trigger1 = movehit = 1
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,52]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = !time
time = 52
p2defmul = 1
unhittable = 1
anim = -1
sound = s5,100
darken = 0
movetime = 52


[State 0, Super FX]
type = Explod
trigger1 = time = 5
anim = 30000
id = 30000
pos = -126,50
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0
;---------------------------

[state 3400, velset]
type = velset
trigger1 = animelemtime(6) = 0
x = 8

[state 3400, playsnd]
type = playsnd
trigger1 = animelemtime(6) = 0
value = 3400,0

[State 200, 1]  
type = HitDef
trigger1 = AnimElemTime(7)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 19,18 ;13,13
guard.pausetime = 19,18 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -40,-65
hitsound = s3400, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 35
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1
fall.recover = 0
air.type = High
air.velocity = -4,-7
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower = 0,0
givepower = 35,35
yaccel = 0.5


[state 3400, velset]
type = velset
trigger1 = animelemtime(8) = 0
x = 4

[state 3400, velmul]
type = velmul
trigger1 = animelemtime(13) >= 0
x = .80

[state 3400, posadd]
type = posadd
trigger1 = animelemtime(13) = 0
x = 10

[state 3400, palfx]
type = palfx
triggerall = movehit
trigger1 = time = 65
add = 255,255,255
time = 6

[state 3400, varset]
type = varset
trigger1 =time = 65 
var(25) = 1

[state 3400, varset]
type = varset
trigger1 = time = 72
var(25) = 0


[State 1200, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Second Impact
[Statedef 3401]
type = S 
movetype = A
physics = N
anim = 3401
juggle = 0
ctrl = 0
velset = 4,0


[state 3400, playsnd]
type = playsnd
trigger1 = animelem = 2
value = 0,2

[State 0, Projectile]
type = Projectile
trigger1 = movehit = 1
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

[State 200, 1]  
type = HitDef
triggerall = var(25) = 1
trigger1 = AnimElemTime(3)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 19,18 ;13,13
guard.pausetime = 19,18 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -40,-70
hitsound = s3400, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 35
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1
fall.recover = 0
air.type = High
air.velocity = -3,-7
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower = 0,0
givepower = 35,35
yaccel = 0.5

[State 200, 1]  
type = HitDef
triggerall = var(25) = 0
trigger1 = AnimElemTime(3)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 4, 4, fvar(11) * 20)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 9,9 ;13,13
guard.pausetime = 9,9 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -40,-60
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 35
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1
fall.recover = 0
air.type = High
air.velocity = -4,-6
air.hittime = 2
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5

[state 3400, varset]
type = varset
trigger1 = movehit = 1
var(25) = 0
ignorehitpause = 1

[state 3400, velmul]
type = velmul
trigger1 = animelemtime(7) >= 0
x = .80

[state 3400, palfx]
type = palfx
triggerall = movehit
trigger1 = time = 17
add = 255,255,255
time = 6

[state 3400, varset]
type = varset
trigger1 =time = 17 
var(25) = 1

[state 3400, varset]
type = varset
trigger1 = time = 24
var(25) = 0


[State 1200, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Third Strike
[Statedef 3402]
type = S 
movetype = A
physics = N
anim = 3402
juggle = 0
ctrl = 0
velset = 4,0

[state 3400, playsnd]
type = playsnd
trigger1 = animelem = 2
value = 0,5

[State 0, Projectile]
type = Projectile
trigger1 = movehit = 1
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

[State 200, 1]  
type = HitDef
triggerall = var(25) = 1
trigger1 = AnimElemTime(3)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 19,18 ;13,13
guard.pausetime = 19,18 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -40,-70
hitsound = s3400, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -3,-5
guard.velocity = -9
airguard.velocity = -2.5,-1.3
fall = 1
fall.recover = 0
air.type = High
air.velocity = -3,-5
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower = 0,0
givepower = 35,35
yaccel = 0.5

[State 200, 1]  
type = HitDef
triggerall = var(25) = 0
trigger1 = AnimElemTime(3)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 4, 4, fvar(11) * 20)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 9,9 ;13,13
guard.pausetime = 9,9 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -40,-60
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4,-4
guard.velocity = -9
fall = 1
airguard.velocity = -2.5,-1.3
fall.recover = 0
air.type = High
air.velocity = -4,-4
air.hittime = 28
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5

[state 3400, varset]
type = varset
trigger1 = movehit = 1
var(25) = 0
ignorehitpause = 1

[state 3400, palfx]
type = palfx
triggerall = movehit
trigger1 = time = 17
add = 255,255,255
time = 6

[state 3400, varset]
type = varset
trigger1 =time = 17
var(25) = 1

[state 3400, varset]
type = varset
trigger1 = time = 24
var(25) = 0

[state 3400, velmul]
type = velmul
trigger1 = animelemtime(9) >= 0
x = .80

[State 1200, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Fourth Wallop
[Statedef 3403]
type = S 
movetype = A
physics = N
anim = 3403
juggle = 0
ctrl = 0
velset = 4,0

[state 3400, playsnd]
type = playsnd
trigger1 = animelem = 1
value = 0,5

[State 0, Projectile]
type = Projectile
trigger1 = movehit = 1
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

[State 200, 1]  
type = HitDef
triggerall = var(25) = 1
trigger1 = AnimElemTime(2)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 19,18 ;13,13
guard.pausetime = 19,18 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -40,-80
hitsound = s3400, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -6,-12
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1
fall.recover = 0
air.type = High
air.velocity = -6,-12
air.hittime = 28
kill = 0
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower = 0,0
givepower = 35,35
yaccel = 0.5

[State 200, 1]  
type = HitDef
triggerall = var(25) = 0
trigger1 = AnimElemTime(2)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 4, 4, fvar(11) * 20)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 9,9 ;13,13
guard.pausetime = 9,9 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -40,-60
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -6,-12
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1
fall.recover = 0
air.type = High
kill = 0
air.velocity = -6,-12
air.hittime = 28
air.animtype = back
getpower = 0,0
givepower = 35,35
yaccel = 0.5

[state 3400, velmul]
type = velmul
trigger1 = animelemtime(7) >= 0
trigger1 = anim = 3403
x = .80


[state 300, targetstate]
type = targetstate
triggerall = anim = 3404
trigger1 = movehit
trigger1 = animelemtime(2) = 0
trigger1 = !(target, ishelper)
value = 3450
ignorehitpause = 1
persistent = 0


[State 1200, changestate]
type = changeanim
triggerall = movehit && anim = 3403
trigger1 = animelemtime(7)=  0
value = 3404

[state 3403, posadd]
type = posadd
trigger1 = animelemtime(1) = 0
trigger1 = anim = 3404
x = -10
y = -10

[state 3403, posadd]
type = velset
trigger1 = animelemtime(1) = 0
trigger1 = anim = 3404
x = -3
y = -1

;----------------Finger Miss(Somehow)-----------------------
[State 1200, changestate]
type = changeanim
triggerall = movehit && anim = 3404
trigger1 = animelem = 3
trigger1 = target,stateno != 3450
value = 3405

[state 4100, centering]
type = velmul
trigger1 = animelemtime(2) < 0
trigger1 = anim = 3405
x = .90
y = .90

[state 4100, centering]
type = velset
trigger1 = animelemtime(2) = 0
trigger1 = anim = 3405
x = 0
y = 0

[state 803, playsnd]
type = playsnd
trigger1 = animelemtime(2) = 0
trigger1 = anim = 3405
value = 2302,0


[state 3403, posset]
type = posset
trigger1 = animelemtime(4) = 0
trigger1 = anim = 3405
y = 0

[state 3403, posadd]
type = posadd
trigger1 = animelemtime(4) = 0
trigger1 = anim = 3405
x = 30
;-----------------------------------------------------

[State 1200, changestate]
type = changestate
triggerall = anim = 3404
trigger1 = animelem = 3
trigger1 = target,stateno = 3450
value = 3404


[State 1200, changestate]
type = changestate
triggerall = anim = 3403
trigger1 = animtime = 0
value = 0
ctrl = 1


[State 1200, changestate]
type = changestate
triggerall = anim = 3405
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Boom
[Statedef 3404]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0


[state 3404, playsnd]
type = playsnd
trigger1 = !time
value = 3400,4
channel = 1

[state 4100, centering]
type = velmul
trigger1 = Vel X < -.1
x = .90
y = .90


[State 0, Super FX]
type = Explod
triggerall = anim = 3404
trigger1 = animelemtime(3) = 0
anim = 340601
id = 340601
pos = 10,0
postype = p2
facing = -1
removetime = -2
sprpriority = 8
ownpal = 1
persistent = 0

[state 3404, playsnd]
type = playsnd
triggerall = anim = 3404
trigger1 = animelemtime(3) = 0
value = 3400,3
channel = 0

[state 3404, varset]
type = varset
trigger1 = !time
var(25) = 0

[State 0, Super FX]
type = Explod
trigger1 = !time
anim = 340500
id = 340500
pos = -40,8
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0


[state 3404, varset]
type = varset
triggerall = anim = 3404
trigger1 = time = 40
var(25) = 1


[state 3404, varset]
type = varset
triggerall = anim = 3404
trigger1 = time = 65
var(25) = 3

[state 3400, palfx]
type = palfx
triggerall = anim = 3404
trigger1 = time >= 65 && time <= 76
add = 255,255,255
time = 1

[state 3404, varset]
type = varset
triggerall = anim = 3404
trigger1 = time = 77
var(25) = 1


[state 3404, changeanim]
type = changeanim
trigger1 = !time
value = 3404
elem = 3

[state 3404, changeanim]
type = changeanim
triggerall = anim = 3404
trigger1 = time = 100
value = 3408


[state 3404, changeanim]
type = changeanim
triggerall = anim = 3404 && var(25) = 3
trigger1 = !AIlevel
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = AIlevel = [6,8]
value = 3406 

[state 3404, changeanim]
type = changeanim
triggerall = anim = 3404 && var(25) = 1
trigger1 = !AIlevel
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = AIlevel = [3,5]
value = 3407

[state 3404, changeanim]
type = changeanim
triggerall = anim = 3404 && var(25) = 0
trigger1 = !AIlevel
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = AIlevel = [1,2]
value = 3408


[State 0, Super FX]
type = Helper
triggerall = anim != 3404
trigger1 = animelemtime(1) = 0
stateno = 34040
id = 34040
pos = 0,0
postype = p2
facing = -1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 8
ownpal = 1
scale = 1,1
persistent = 0

[state 4100, centering]
type = velset
trigger1 = animelemtime(2) = 0
trigger1 = anim != 3404
x = 0
y = 0

[state 803, playsnd]
type = playsnd
trigger1 = animelemtime(2) = 0
trigger1 = anim != 3404
value = 2302,0


[state 3403, posset]
type = posset
trigger1 = animelemtime(4) = 0
trigger1 = anim != 3404
y = 0

[state 3403, posadd]
type = posadd
trigger1 = animelemtime(4) = 0
trigger1 = anim != 3404
x = 30

[state 3403, statetypeset]
type = statetypeset
trigger1 = animelemtime(4) = 0
trigger1 = anim != 3404
statetype = S


;------------Perfect-----------------


[state 3404, removeexplod]
type = removeexplod
trigger1 = animelemtime(1) = 0
id = 340500

[state -2, helper]
type = helper
triggerall = anim = 3406
trigger1 = animelemtime(1) = 0
pos = 0,0
postype = left
stateno = 8600
helpertype = normal
name = "Fire"
sprpriority = -5
ownpal = 1
ignorehitpause = 1

[state 3404, envshake]
type = envshake
triggerall = anim = 3406
trigger1 = animelemtime(1) = 0
ampl = 7
freq = 30
time = 60


[state 183, air]
type = playsnd
trigger1 = animelemtime(9) = 0
trigger1 = anim = 3406
value = 0,0


;-------------------------------

[state 3404, playsnd]
type = playsnd
triggerall = anim = 3406
trigger1 = animelemtime(1) = 0
value = 33000,2

[state 3404, playsnd]
type = playsnd
triggerall = anim = 3407
trigger1 = animelemtime(1) = 0
value = 33000,0

[state 3404, playsnd]
type = playsnd
triggerall = anim = 3408
trigger1 = animelemtime(1) = 0
value = 33002,2

[State 1200, changestate]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;--------------------------------------------
;Medium Final Impact
[Statedef 3410]
type = S 
movetype = A
physics = N
anim = 3400
poweradd = -1000
juggle = 0
ctrl = 0
velset = 0,0

[state 3420, width]
type = width
trigger1 = time > 50 && animelemtime(13) <= 0
value = 30,30

[state 3400, varset]
type = varset
trigger1 = !time
var(25) = 0

[state 3400, playsnd]
type = playsnd
trigger1 = animelem = 3
value = 3400,2
channel = 0

[State 0, Projectile]
type = Projectile
trigger1 = movehit = 1
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,50]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = !time
time = 51
p2defmul = 1
unhittable = 1
anim = -1
sound = s5,100
darken = 0
movetime = 51


[State 0, Super FX]
type = Explod
trigger1 = time = 5
anim = 30000
id = 30000
pos = -126,50
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0
;---------------------------

[state 3400, velset]
type = velset
trigger1 = animelemtime(6) = 0
x = 10

[state 3400, playsnd]
type = playsnd
trigger1 = animelemtime(6) = 0
value = 3400,0

[State 200, 1]  
type = HitDef
trigger1 = AnimElemTime(7)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 19,18 ;13,13
guard.pausetime = 19,18 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -40,-65
hitsound = s3400, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 35
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1
fall.recover = 0
air.type = High
air.velocity = -4,-4
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower  = 0,0
givepower = 35,35
yaccel = 0.5


[state 3400, velset]
type = velset
trigger1 = animelemtime(8) = 0
x = 4

[state 3400, velmul]
type = velmul
trigger1 = animelemtime(13) >= 0
x = .80

[state 3400, posadd]
type = posadd
trigger1 = animelemtime(13) = 0
x = 10

[state 3400, palfx]
type = palfx
triggerall = movehit
trigger1 = time = 65
add = 255,255,255
time = 6

[state 3400, varset]
type = varset
trigger1 =time = 65 
var(25) = 1

[state 3400, varset]
type = varset
trigger1 = time = 72
var(25) = 0


[State 1200, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Heavy Final Impact
[Statedef 3420]
type = S 
movetype = A
physics = N
anim = 3400
poweradd = -1000
juggle = 0
ctrl = 0
velset = 0,0

[state 3420, width]
type = width
trigger1 = time > 50 && animelemtime(13) <= 0
value = 30,30

[state 3400, varset]
type = varset
trigger1 = !time
var(25) = 0

[state 3400, playsnd]
type = playsnd
trigger1 = animelem = 3
value = 3400,2
channel = 0

[State 0, Projectile]
type = Projectile
trigger1 = movehit = 1
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,50]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = !time
time = 50
p2defmul = 1
unhittable = 1
anim = -1
sound = s5,100
darken = 0
movetime = 50


[State 0, Super FX]
type = Explod
trigger1 = time = 5
anim = 30000
id = 30000
pos = -126,50
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0
;---------------------------

[state 3400, velset]
type = velset
trigger1 = animelemtime(6) = 0
x = 16

[state 3400, playsnd]
type = playsnd
trigger1 = animelemtime(6) = 0
value = 3400,0

[State 200, 1]  
type = HitDef
trigger1 = AnimElemTime(7)=0
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 10
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 19,18 ;13,13
guard.pausetime = 19,18 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -40,-65
hitsound = s3400, 1
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 35
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1
fall.recover = 0
air.type = High
air.velocity = -7,-4
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 9
getpower = 0,0
givepower = 35,35
yaccel = 0.5


[state 3400, velset]
type = velset
trigger1 = animelemtime(8) = 0
x = 4

[state 3400, velmul]
type = velmul
trigger1 = animelemtime(13) >= 0
x = .80

[state 3400, posadd]
type = posadd
trigger1 = animelemtime(13) = 0
x = 10

[state 3400, palfx]
type = palfx
triggerall = movehit
trigger1 = time = 65
add = 255,255,255
time = 6

[state 3400, varset]
type = varset
trigger1 =time = 65 
var(25) = 1

[state 3400, varset]
type = varset
trigger1 = time = 72
var(25) = 0


[State 1200, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------
;Hit by Fourth Wallop
[statedef 3450]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0


[state 3450, turn]
type = turn
triggerall = facing = enemy,facing
trigger1 = !time

[state 3450, nothitby]
type = nothitby
trigger1 = 1
value = ,AA,AT

[state 3450, palfx]
type = palfx
trigger1 = 1
add = time*3,0,0
time = 1


[state 2450, changeanim2]
type = changeanim2
trigger1 = !time
value = 2450

[state 1060, changestate]
type = changestate
trigger1 = time =  300
value = 5030
ctrl = 1


;----------------------------
;Perfect Blasted Upwards 
[statedef 3451]
type = A
movetype = H
physics = N
anim = 5051
ctrl = 0
velset = -.1,-16

[state 3451, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 3450, nothitby]
type = nothitby
trigger1 = vel y < 0
value = SCA

[state 3451, camera]
type = screenbound
trigger1 = 1
value = 0

[state 3451, changeanim]
type = changeanim
trigger1 = vel y > 0
trigger1 = anim = 5051
value = 5061

[state 3451, veladd]
type = veladd
trigger1 =  time >= 40
y = .50


[state 1060, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100
;--------------------------------------------
;Emo Exit (old)
[Statedef 3501]
type = S 
movetype = A
physics = N
anim = 3700
juggle = 0
ctrl = 0
velset = 0,0


[state 3500, playsnd]
type = playsnd
trigger1 = time = 6
value = 2340,0+random%3
channel = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [5,100]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = time=5
time = 95
p2defmul = 1
unhittable = 1
anim = -1
sound = s5,100
darken = 0
movetime = 95


[State 0, Super FX]
type = Explod
trigger1 = time = 5
anim = 30000
id = 30000
pos = -110,45
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Helper
trigger1 = time = 101
stateno = 2800
id = 2800
pos = 30,0
postype = p1
supermovetime = 0
sprpriority = 8
ownpal = 1
scale = 1,1
persistent = 0


[State 1200, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Final Flash
[Statedef 3600]
type = S
movetype = A
physics = N
anim = 3804
poweradd = -2000
juggle = 0
ctrl = 0
velset = 0,0
sprpriority = 6

[state 3600, you'll be nothing but space dust after this]
type = playsnd
trigger1 = !time
value = 3600,5+random%2
channel = 0

[State 2103, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = animelemtime(99) >= 2
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1

[state 3600, playerpush]
type = playerpush
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 0


[state 3600, statetypeset]
type = statetypeset
trigger1 = animelemtime(3) = 0
trigger1 = anim = 3804
statetype = A


[state 3610, velset]
type = velset
triggerall = anim = 3804
trigger1 = animelemtime(10) = 0
x = -.1
y = -.05

[State 4500, 1];Small sound
type = PlaySnd
triggerall = anim = 3804
trigger1 = animelemtime(10)=0
value = 193,1
volumescale = 255


[State 4500, 2];long sound
type = PlaySnd
triggerall = anim = 3804
trigger1 = animelemtime(10)=0
value = 8,0
loop = 1
pan = 1
volumescale = 25
channel = 3

[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1

[state 3600, nothitby]
type = nothitby
trigger1 = time <= 69
trigger2 = anim = 3811
value = SCA

[State 0, Super FX]
type = Explod
trigger1 = animelemtime(6) = 0
anim = 380004
id = 380004
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
removeongethit = 1
supermove = 1
removetime = -2
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0


;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [16,61]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = time = 16
time = 45
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 45


[State 0, Hyper Charge FX]
type = Explod
trigger1 = time = 16
anim = 2441
id = 2441
pos = 0,-74
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0
;---------------------------

[State 0, Super FX]
type = Explod
triggerall = anim = 3804
trigger1 = animelemtime(10) = 0
anim = 380211
id = 380211
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
removeongethit = 1
supermove = 1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0


[State 650, 3]
type = HitDef
triggerall = anim = 3804
trigger1 = AnimElem = 10
attr = A, HA
damage = ceil(ifElse(fvar(11) * 20 < 10, 10, fvar(11) * 20)), 0
hitflag = MAFD
guardflag = MA
animtype = Hard
pausetime = 0,16
guard.pausetime = 0,25
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s3200,2
guardsound = S3200,4
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -16
air.velocity = -6,-8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 6
p2facing = 1
fall = 1
fall.recover = 0
p2facing = 1
ground.cornerpush.veloff = 0
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
kill = 0
id = 3270

[state 3600, stopsnd]
type = stopsnd
trigger1 = anim = 3804
trigger1 = animelemtime(28) = 0
channel = 3


[State 0, Super FX]
type = null
triggerall = anim = 3811
trigger1 = animelemtime(7) = 0
anim = 3803
id = 3803
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 9
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[state 3600, end it]
type = null
triggerall = anim = 3811
trigger1 = animelemtime(7) = 0
value = 3600,0
channel = 0

[State 0, Super FX]
type = Explod
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
anim = 380012
id = 380012
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(14) = 0
anim = 380001
id = 380001
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(14) = 0
anim = 380003
id = 380003
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 200, 1]
type = PlaySnd
triggerall = anim = 3811
trigger1   = animelemtime(14) = 0
trigger2   = animelemtime(57) > 0 && animelemtime(119) < 2
trigger2 = time % 50 = 0
trigger3 = time = 195 || time = 219 || time  = 241 || time = 258 || time = 275
value = 3300, 0
channel = 4

[state 3600, stopsnd]
type = stopsnd
trigger1 = time = 184 || time = 213 || time  = 236 || time = 253 || time = 270
channel = 4




[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(30) = 2
anim = 380200
id = 380200
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(30) = 2
anim = 380203
id = 380203
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(14) = 0
anim = 380212
id = 380212
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
anim = 380003
id = 380003
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 9
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
anim = 3802
id = 3802
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 10
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0


[State 1000, shake]
type = EnvShake
triggerall = anim=3811
trigger1 = time%4  = 0
time=4
freq=80
ampl=0.01*time


[state 3600, playsnd]
type = playsnd
triggerall = anim = 3811
trigger1 = time = 184 || time = 213 || time  = 236 || time = 253 || time = 270
value = 193,1


[state 3600, playsnd]
type = playsnd
triggerall = anim = 3811
trigger1 = animelemtime(33) = 0
value = 3600,1+random%2
channel = 0

[state 3600, playsnd]
type = playsnd
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
value = 3600,3+random%2
channel = 0

[state 3600, removeexplod]
type = removeexplod
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
id = 380211


[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3811
trigger1 = animelemtime(30) = 2
id = 380001

[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3811
trigger1 = animelemtime(30) = 2
id = 380003


[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3811
trigger1 = animelemtime(119) = 2
id = 380003

[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3811
trigger1 = animelemtime(14) = 0
id = 380012


[state 3600, attkdist]
type =AttackDist 
triggerall = anim = 3804
trigger1 = animelemtime(11) = 0
value = 0

[state 3600, changeanim]
type = changeanim
triggerall = anim = 3804
trigger1 = movehit 
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 3811

[state 3600, targetstate]
type = targetstate
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 3650
ignorehitpause = 1

[State 2500, bgpalfx1]
type = null
trigger1 = time < 112
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
time = 1
color=0
mul=0,0,0

[State 200, BGPalFX]
type = null
triggerall = animelemtime(58) < 0
trigger1 = time>=112
time = 1
add	= ceil(-280+time),ceil(-280+time),ceil(-280+time)
mul	= 256,256,256
invertall = 0
color = 256
;--------Fire-----------------

[State 0, Super FX]
type = Helper
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
stateno = 3570
id = 3570
pos = 0,-25
facing = 1
postype = p1
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
persistent = 0

[state 3600, velset]
type = velset
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
x = -15
y = 0


[state 3600, velset]
type = velmul
triggerall = anim = 3811
trigger1 = animelemtime(58) >= 0
trigger1 = vel X < 0
x = .93



[State -2, Explod]
type = RemoveExplod
trigger1 = animelemtime(129) = 0
id = 3802



[State 9011, VelAdd]
type = VelAdd
triggerall = Pos Y < 0
trigger1 = animelemtime(131) >= 0 && anim = 3811
trigger2 = animelemtime(131) >= 0 && anim = 3811
trigger3 = animelemtime(22) >= 0 && anim = 3804
y = 0.35

[state 311, posset]
type = posset
trigger1 = Pos Y > 0
y = 0

[state 311, statetypeset]
type = statetypeset
triggerall = anim = 48
trigger1 = vel y  = 0 && statetype = A
statetype = S
physics = S




[state 311, changeanim]
type = changeanim
triggerall = anim != 48
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 48

[state 311, posset]
type = velset
triggerall = anim = 48
trigger1 = animelemtime(1) = 0
y = 0

[state 52, Land FX]
type = helper
trigger1 = anim = 48 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 48 && animelemtime(1) = 1
value = 40, 0

[State 1200, changestate]
type = changestate
triggerall = anim = 48
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;(unused) Ground Final Flash
[Statedef 3601]
type = S 
movetype = A
physics = N
anim = 3800
poweradd = -2000
juggle = 0
ctrl = 0
velset = 0,0
sprpriority = 6

[state 4100, flash white]
type = palfx
trigger1 = var(35) = 1
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[State 2103, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = animelemtime(70) >= 0
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1

[state 3600, playerpush]
type = playerpush
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 0

[State 4500, 1];Small sound
type = PlaySnd
triggerall = anim = 3800
trigger1 = animelemtime(5)=0
value = 193,1
volumescale = 255


[State 4500, 2];long sound
type = PlaySnd
triggerall = anim = 3800
trigger1 = animelemtime(5)=0
value = 8,0
loop = 1
pan = 1
volumescale = 25
channel = 3

[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1

[state 3600, nothitby]
type = nothitby
trigger1 = time <= 69
trigger2 = anim = 3801
value = SCA


[State 0, Super FX]
type = Explod
trigger1 = !time
anim = 380000
id = 380000
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [16,61]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = time = 16
time = 45
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 45


[State 0, Hyper Charge FX]
type = Explod
trigger1 = time = 16
anim = 2441
id = 2441
pos = 0,-50
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0
;---------------------------

[State 0, Super FX]
type = Explod
triggerall = anim = 3800
trigger1 = animelemtime(5) = 0
anim = 380201
id = 380201
pos = 0,0
postype = p1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0


[State 650, 3]
type = HitDef
triggerall = anim = 3800
trigger1 = AnimElem = 5
attr = S, HA
damage = ceil(ifElse(fvar(11) * 60 < 20, 20, fvar(11) * 60)), 0
hitflag = MAFD
guardflag = MA
animtype = Hard
pausetime = 0,16
guard.pausetime = 0,25
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s3200,2
guardsound = S3200,4
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -16
air.velocity = -6,-8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 6
p2facing = 1
fall = 1
fall.recover = 0
p2facing = 1
ground.cornerpush.veloff = 0
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
kill = 0
id = 3270

[state 3600, stopsnd]
type = stopsnd
trigger1 = anim = 3800
trigger1 = animelemtime(23) = 0
channel = 3


[State 0, Super FX]
type = null
triggerall = anim = 3801
trigger1 = animelemtime(7) = 0
anim = 3803
id = 3803
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 9
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[state 3600, end it]
type = null
triggerall = anim = 3801
trigger1 = animelemtime(7) = 0
value = 3600,0
channel = 0

[State 0, Super FX]
type = Explod
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
anim = 380002
id = 380002
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3801
trigger1 = animelemtime(14) = 0
anim = 380001
id = 380001
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3801
trigger1 = animelemtime(14) = 0
anim = 380003
id = 380003
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 10
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 200, 1]
type = PlaySnd
triggerall = anim = 3801
trigger1   = animelemtime(14) = 0
trigger2   = animelemtime(14) > 0 && animelemtime(90) < 0
trigger2 = time % 40 = 0
trigger3 = time = 195 || time = 219 || time  = 241 || time = 258 || time = 275
value = 3300, 0
channel = 4

[state 3600, stopsnd]
type = stopsnd
trigger1 = time = 184 || time = 213 || time  = 236 || time = 253 || time = 270
channel = 4




[State 0, Super FX]
type = Explod
triggerall = anim = 3801
trigger1 = animelemtime(13) = 66
anim = 380200
id = 380200
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3801
trigger1 = animelemtime(14) = 66
anim = 380203
id = 380203
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3801
trigger1 = animelemtime(13) = 0
anim = 380202
id = 380202
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3801
trigger1 = animelemtime(15) = 0
anim = 3802
id = 3802
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 10
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0


[State 0, Super FX]
type = Explod
triggerall = anim = 3801
trigger1 = animelemtime(15) = 0
anim = 380003
id = 380003
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 10
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 1000, shake]
type = EnvShake
triggerall = anim=3801
trigger1 = time%4  = 0
time=4
freq=80
ampl=0.01*time




[state 3600, playsnd]
type = playsnd
trigger1 = time = 184 || time = 213 || time  = 236 || time = 253 || time = 270
value = 193,1





[state 3600, playsnd]
type = playsnd
triggerall = anim = 3801
trigger1 = animelemtime(14) = 0
value = 3600,1+random%2
channel = 0

[state 3600, playsnd]
type = playsnd
triggerall = anim = 3801
trigger1 = animelemtime(15) = 0
value = 3600,3+random%2
channel = 0

[state 3600, removeexplod]
type = removeexplod
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
id = 380201


[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3801
trigger1 = animelemtime(14) = 66
id = 380001

[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3801
trigger1 = animelemtime(14) = 66
id = 380003



[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3801
trigger1 = animelemtime(13) = 0
id = 380002


[state 3600, attkdist]
type =AttackDist 
triggerall = anim = 3800
trigger1 = animelemtime(6) = 0
value = 0

[state 3600, changeanim]
type = changeanim
triggerall = anim = 3800
trigger1 = movehit
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 3801

[state 3600, targetstate]
type = targetstate
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 3650
ignorehitpause = 1

[State 2500, bgpalfx1]
type = null
trigger1 = time < 110
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
time = 1
color=0
mul=0,0,0

[State 200, BGPalFX]
type = null
triggerall = animelemtime(15) < 0
trigger1 = time>=110
time = 1
add	= ceil(-280+time),ceil(-280+time),ceil(-280+time)
mul	= 256,256,256
invertall = 0
color = 256
;--------Fire-----------------

[State 0, Super FX]
type = Helper
triggerall = anim = 3801
trigger1 = animelemtime(15) = 0
stateno = 3560
id = 3560
pos = 0,0
facing = 1
postype = p1
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
persistent = 0

[state 3600, velset]
type = velset
triggerall = anim = 3801
trigger1 = animelemtime(15) = 0
x = -15


[state 3600, velset]
type = velmul
trigger1 = vel X < 0
x = .93


[state 3610, removeexplod]
type = removeexplod
trigger1 =  animelemtime(96) = 0
id = 380003

[state 3610, removeexplod]
type = removeexplod
trigger1 =  animelemtime(96) = 0
id = 380100
[state 3610, removeexplod]
type = removeexplod
trigger1 =  animelemtime(96) = 0
id = 380101

[state 3610, removeexplod]
type = removeexplod
trigger1 =  animelemtime(110) = 0
id = 3802





[State 1200, changestate]
type = changestate
triggerall = anim = 3800 || anim = 3801
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Air Final Flash
[Statedef 3610]
type = A 
movetype = A
physics = N
anim = 3810
poweradd = -2000
juggle = 0
ctrl = 0
velset = 0,0
sprpriority = 6

[state 3600, you'll be nothing but space dust after this]
type = playsnd
trigger1 = !time
value = 3600,5+random%2
channel = 0

[State 2103, Super BG Proj]
type = Projectile
triggerall = RoundState = 2
trigger1 = animelemtime(99) >= 2
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1

[state 3600, playerpush]
type = playerpush
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 0


[state 3610, velset]
type = velset
triggerall = anim = 3810
trigger1 = animelemtime(5) = 0
x = -.1
y = -.05

[State 4500, 1];Small sound
type = PlaySnd
triggerall = anim = 3810
trigger1 = animelemtime(5)=0
value = 193,1
volumescale = 255


[State 4500, 2];long sound
type = PlaySnd
triggerall = anim = 3810
trigger1 = animelemtime(5)=0
value = 8,0
loop = 1
pan = 1
volumescale = 25
channel = 3

[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1

[state 3600, nothitby]
type = nothitby
trigger1 = time <= 69
trigger2 = anim = 3811
value = SCA

[State 0, Super FX]
type = Explod
trigger1 = !time
anim = 380004
id = 380004
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [16,61]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = time = 16
time = 45
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 45


[State 0, Hyper Charge FX]
type = Explod
trigger1 = time = 16
anim = 2441
id = 2441
pos = 0,-74
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0
;---------------------------

[State 0, Super FX]
type = Explod
triggerall = anim = 3810
trigger1 = animelemtime(5) = 0
anim = 380211
id = 380211
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0


[State 650, 3]
type = HitDef
triggerall = anim = 3810
trigger1 = AnimElem = 5
attr = A, HA
damage = ceil(ifElse(fvar(11) * 20 < 10, 10, fvar(11) * 20)), 0
hitflag = MAFD
guardflag = MA
animtype = Hard
pausetime = 0,16
guard.pausetime = 0,25
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s3200,2
guardsound = S3200,4
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -16
air.velocity = -6,-8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 6
p2facing = 1
fall = 1
fall.recover = 0
p2facing = 1
ground.cornerpush.veloff = 0
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0, 0
givepower = 35,35
yaccel = 0.5
kill = 0
id = 3270

[state 3600, stopsnd]
type = stopsnd
trigger1 = anim = 3810
trigger1 = animelemtime(23) = 0
channel = 3


[State 0, Super FX]
type = null
triggerall = anim = 3811
trigger1 = animelemtime(7) = 0
anim = 3803
id = 3803
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 9
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[state 3600, end it]
type = null
triggerall = anim = 3811
trigger1 = animelemtime(7) = 0
value = 3600,0
channel = 0

[State 0, Super FX]
type = Explod
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
anim = 380012
id = 380012
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(14) = 0
anim = 380001
id = 380001
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(14) = 0
anim = 380003
id = 380003
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 200, 1]
type = PlaySnd
triggerall = anim = 3811
trigger1   = animelemtime(14) = 0
trigger2   = animelemtime(57) > 0 && animelemtime(119) < 2
trigger2 = time % 50 = 0
trigger3 = time = 195 || time = 219 || time  = 241 || time = 258 || time = 275
value = 3300, 0
channel = 4

[state 3600, stopsnd]
type = stopsnd
trigger1 = time = 184 || time = 213 || time  = 236 || time = 253 || time = 270
channel = 4




[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(30) = 2
anim = 380200
id = 380200
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(30) = 2
anim = 380203
id = 380203
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(14) = 0
anim = 380212
id = 380212
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
anim = 380003
id = 380003
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 9
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
anim = 3802
id = 3802
pos = -3,-25
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 10
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0


[State 1000, shake]
type = EnvShake
triggerall = anim=3811
trigger1 = time%4  = 0
time=4
freq=80
ampl=0.01*time




[state 3600, playsnd]
type = playsnd
triggerall = anim = 3811
trigger1 = time = 184 || time = 213 || time  = 236 || time = 253 || time = 270
value = 193,1





[state 3600, playsnd]
type = playsnd
triggerall = anim = 3811
trigger1 = animelemtime(33) = 0
value = 3600,1+random%2
channel = 0

[state 3600, playsnd]
type = playsnd
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
value = 3600,3+random%2
channel = 0

[state 3600, removeexplod]
type = removeexplod
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
id = 380211


[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3811
trigger1 = animelemtime(30) = 2
id = 380001

[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3811
trigger1 = animelemtime(30) = 2
id = 380003


[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3811
trigger1 = animelemtime(119) = 2
id = 380003

[state 3600, removeexplod]
type = removeexplod
trigger1 = anim = 3811
trigger1 = animelemtime(14) = 0
id = 380012


[state 3600, attkdist]
type =AttackDist 
triggerall = anim = 3810
trigger1 = animelemtime(6) = 0
value = 0

[state 3600, changeanim]
type = changeanim
triggerall = anim = 3810
trigger1 = movehit 
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 3811

[state 3600, targetstate]
type = targetstate
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 3650
ignorehitpause = 1

[State 2500, bgpalfx1]
type = null
trigger1 = time < 112
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
time = 1
color=0
mul=0,0,0

[State 200, BGPalFX]
type = null
triggerall = animelemtime(58) < 0
trigger1 = time>=112
time = 1
add	= ceil(-280+time),ceil(-280+time),ceil(-280+time)
mul	= 256,256,256
invertall = 0
color = 256
;--------Fire-----------------

[State 0, Super FX]
type = Helper
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
stateno = 3570
id = 3570
pos = 0,-25
facing = 1
postype = p1
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
persistent = 0

[state 3600, velset]
type = velset
triggerall = anim = 3811
trigger1 = animelemtime(58) = 0
x = -15
y = 0


[state 3600, velset]
type = velmul
triggerall = anim = 3811
trigger1 = animelemtime(58) >= 0
trigger1 = vel X < 0
x = .93

[State -2, Explod]
type = RemoveExplod
trigger1 = animelemtime(129) = 0
id = 3802


[State 9011, VelAdd]
type = VelAdd
triggerall = Pos Y < 0
trigger1 = animelemtime(131) >= 0 && anim = 3811
trigger2 = animelemtime(131) >= 0 && anim = 3811
trigger3 = animelemtime(22) >= 0 && anim = 3810
y = 0.35

[state 311, posset]
type = posset
trigger1 = Pos Y > 0
y = 0

[state 311, statetypeset]
type = statetypeset
triggerall = anim = 48
trigger1 = vel y  = 0 && statetype = A
statetype = S
physics = S



[state 311, changeanim]
type = changeanim
triggerall = anim != 48
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 48

[state 311, posset]
type = velset
triggerall = anim = 48
trigger1 = animelemtime(1) = 0
y = 0

[state 52, Land FX]
type = helper
trigger1 = anim = 48 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 48 && animelemtime(1) = 1
value = 40, 0

[State 1200, changestate]
type = changestate
triggerall = anim = 48
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------
;Launched Upwards
[statedef 3650]
type = A
movetype = H
physics = N
anim = 5051
ctrl = 0
velset = -2,-20


[state 3650, nothitby]
type = nothitby
trigger1 = vel y < 0
value = SCA



[state 3650, changeanim]
type = changeanim
triggerall = anim = 5051
trigger1 = vel y > 0
value = 5061


[state 3650, turn]
type = turn
trigger1 = !time
trigger1 = facing = enemy, facing

[state 3600, camera]
type = screenbound
trigger1 = time < 60
trigger2 = p2dist Y > 40
value = 0

[state 3650, velset]
type = velset
trigger1 = time = 60
x = 0

[state 3650, velset]
type = posset
trigger1 = time = 60
x = (enemynear,facing*50)+enemynear, pos X
y = -1250+(enemynear,pos Y)

[state 3650, velset]
type = posadd
trigger1 = BackEdgeBodyDist <  0
x = -(backedgebodydist)


[state 3650, veladd]
type = velset
trigger1 = time = 100 || time = 300
y = 16



[state 3650, velset]
type = velset
trigger1 = pos y >= enemynear, pos y-40 && vel y > 0
trigger1 = time < 300
y  = 0

[state 3650, selfstate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode != Simul
trigger2 = enemyNear,TeamMode != Simul
trigger3 = alive
value = 5100

[state 3650, selfstate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100
;--------------------------------------------
;Tryin something out
[Statedef 3700]
type = S 
movetype = A
physics = N
anim = 3300
poweradd = -2000
juggle = 0
ctrl = 0
velset = 0,0


[state 4000, posset]
type = posset
trigger1 = !time
y  = 0

;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [5,50]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = time= 5
time = 51
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 51

[State 0, Hyper Charge FX]
type = Explod
triggerall = anim = 3300
trigger1 = time = 5
anim = 2441
id = 2441
pos = -1,-24
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

;------------------------------------

[state 3300, velset]
type = veladd
trigger1 = animelemtime(3) = 0 
x = 20

[state 3300, velset]
type = velset
trigger1 = animelemtime(5) = 0
x = 0

[state 3400, playsnd]
type = playsnd
trigger1 = animelemtime(5) = 0
value = 0,2

[State 200, 1]  
type = HitDef
triggerall = anim = 3300
trigger1 = animelem = 6
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 10, 10, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 10,20 ;13,13
guard.pausetime = 10,30 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 40
ground.velocity = 0
guard.velocity = 2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
forcenofall = 1
kill = 0
air.velocity = 0,0
air.hittime = 40
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 2450

[state 3700, targetbind]
type = targetbind
triggerall = Numtarget(2450)
triggerall = target, name != "Vegetto Z2"
trigger1 = movehit  = 1
trigger1 = !(target,ishelper)
pos = 50,0 
ignorehitpause = 1

[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(2450)
trigger1 = movehit = 1
trigger1 = NumTarget
trigger1 = !(target,ishelper)
value = 2450
ID = 2450
ignorehitpause = 1
persistent = 0

[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "x"
trigger1 = movehit && animelemtime(7) >= 0
value = 3701

[state 3300, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;First Followup
[statedef 3701]
type = S
movetype = A
physics = N
anim = 330000
juggle = 0
ctrl = 0
velset = 0,0

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 200, snd];voice
type = playsnd
trigger1 = animelem=2 
value = 3,0
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330000
trigger1 = animelem = 6
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 15, 15, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8 ;13,13
guard.pausetime = 6,8 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
forcenofall = 1
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
kill = 0
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "x"
trigger1 = movehit
value = 3702

[state 130000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;Second Followup
[statedef 3702]
type = S
movetype = A
physics = N
anim = 330001
juggle = 0
ctrl = 0
velset = 0,0

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 0, posadd]
type= posadd
trigger1 = !time
x = 30
[State 200, snd];voice
type = playsnd
trigger1 = animelem=2 
value = 3,1
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330001
trigger1 = animelem = 4
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 15, 15, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8 ;13,13
guard.pausetime = 6,8 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
kill = 0
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "a"
trigger1 = movehit
value = 3703

[state 130000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;Third Followup
[statedef 3703]
type = S
movetype = A
physics = N
anim = 330002
juggle = 0
ctrl = 0
velset = 0,0

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 0, posadd]
type= posadd
trigger1 = !time
x = 30

[State 200, snd];voice
type = playsnd
trigger1 = animelem=2 
value = 3,2
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330002
trigger1 = animelem = 4
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 15, 15, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8 ;13,13
guard.pausetime = 6,8 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 5
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
kill = 0
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "a"
trigger1 = movehit
value = 3704

[state 330000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;Fourth Followup
[statedef 3704]
type = S
movetype = A
physics = N
anim = 330003
juggle = 0
ctrl = 0
velset = 0,0

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 0, posadd]
type= posadd
trigger1 = !time
x = 30

[State 200, snd];voice
type = playsnd
trigger1 = animelem=2 
value = 3,3
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330003
trigger1 = animelem = 4
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 15, 15, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8 ;13,13
guard.pausetime = 6,8 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
kill = 0
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "y"
trigger1 = movehit
value = 3705

[state 330000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;Fifth Followup
[statedef 3705]
type = S
movetype = A
physics = N
anim = 330004
juggle = 0
ctrl = 0
velset = 0,0

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 0, posadd]
type= posadd
trigger1 = !time
x = 30

[State 200, snd];voice
type = playsnd
trigger1 = animelem=2 
value = 3,4
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330004
trigger1 = animelem = 4
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 15, 15, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8 ;13,13
guard.pausetime = 6,8 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
Kill = 0
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "b"
trigger1 = movehit
value = 3706

[state 330000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;Sixth Followup
[statedef 3706]
type = S
movetype = A
physics = N
anim = 330005
juggle = 0
ctrl = 0
velset = 0,0


[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 0, posadd]
type= posadd
trigger1 = !time
x = 30

[State 200, snd];voice
type = playsnd
trigger1 = animelem=2 
value = 3,5
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330005
trigger1 = animelem = 4
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 15, 15, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8 ;13,13
guard.pausetime = 6,8 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 5
guardsound = S6,1
ground.type = High
kill = 0
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "z"
trigger1 = movehit
value = 3707

[state 330000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;Seventh Followup
[statedef 3707]
type = S
movetype = A
physics = N
anim = 330006
juggle = 0
ctrl = 0
velset = 0,0

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 0, posadd]
type= posadd
trigger1 = !time
x = 30

[State 200, snd];voice
type = playsnd
triggerall = anim = 330006
trigger1 = animelem=2 
value = 3,6
channel = 0

[state 420, statetypeset]
type = statetypeset
trigger1 = animelemtime(4) = 0
statetype = A

[state 420, velset]
type = velset
trigger1 =  animelemtime(4) = 0
x = 1.5
y = -5
persistent = 0

[state 420, veladd]
type = veladd
trigger1 = animelemtime(4) >= 0
y = 0.35

[State 200, 1]  
type = HitDef
triggerall = anim = 330006
trigger1 = animelem = 5
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 15, 15, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8 ;13,13
guard.pausetime = 6,8 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 2
guardsound = S6,1
ground.type = High
kill = 0
ground.slidetime = 15
ground.hittime  = 32
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[state 420, statetypeset]
type = statetypeset
trigger1 = Pos Y >= 0 && Vel Y > 0
statetype = S

[State 221, finish]
type = Changeanim
triggerall = anim= 330006
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 48

[state 0, posset]
type = velset
trigger1 = anim = 48
x = 0
y = 0

[state 0, posset]
type = posset
trigger1 = anim = 48
y = 0

[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "c"
triggerall = statetype = A
trigger1 = movehit && animelemtime(8) < 5
value = 3708


[state 330000, changestate]
type = changestate
triggerall = anim = 48
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;Eigth Followup
[statedef 3708]
type = A
movetype = A
physics = N
anim = 330007
juggle = 0
ctrl = 0


[state 420, veladd]
type = veladd
trigger1 = anim = 330007
y = 0.35

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 200, snd];voice
type = playsnd
triggerall = anim = 330007
trigger1 = animelem=2 
value = 3,13
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330007
trigger1 = animelem = 5
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 15, 15, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8 ;13,13
guard.pausetime = 6,8 ;13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10,-55
hitsound = s5, 5
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 32
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
Kill = 0
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 13
envshake.freq = 80
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[State 221, finish]
type = Changeanim
triggerall = anim= 330007
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 48

[state 0, posset]
type = velset
trigger1 = anim = 48
x = 0
y = 0

[state 0, posset]
type = posset
trigger1 = anim = 48
y = 0


[state 123456, 0]
type = changestate
triggerall = !Ailevel
triggerall = command = "z"
triggerall =  ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010104)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010006)))
trigger1 = movehit && anim= 48
trigger1 = enemynear, movetype = H
value = 3720


[state 123456, LVL 3]
type = changestate
triggerall = !Ailevel
triggerall = command = "c"
triggerall = power >= 1000
triggerall =  ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010104)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010006)))
trigger1 = movehit && anim= 48
trigger1 = enemynear, movetype = H
value = 3730

[state 330000, changestate]
type = changestate
triggerall = anim = 48
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;First Ender
[statedef 3720]
type = S
movetype = A
physics = N
anim = 330008
juggle = 0
ctrl = 0
velset = 0,0

[State 200, snd];voice
type = playsnd
trigger1 = animelem=2 
value = 3,14
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330008
trigger1 = animelem = 5
attr = S, SA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 10, 10, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 33,50 ;13,13
guard.pausetime = 33,50 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -15,-55
hitsound = s33000, 0
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
kill = 0
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 40
envshake.freq = 60
envshake.ampl = 10
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)


[state 123456, 0]
type = changestate
triggerall = !Ailevel
trigger1 = movehit && animtime = 0
value = 3721


[state 130000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;First Ender- Second Part
[statedef 3721]
type = S
movetype = A
physics = N
anim = 330009
juggle = 0
ctrl = 0
velset = 0,0

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 200, snd];voice
type = playsnd
trigger1 = animelem=2 
value = 3,15
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330009
trigger1 = animelem = 4
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 10, 10, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 33,50 ;13,13
guard.pausetime = 33,50 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -15,-55
hitsound = s33000, 0
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 40
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
kill = 0
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 40
envshake.freq = 60
envshake.ampl = 10
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = ifelse(prevstateno = 1100,2450,1098)

[state 123456, 0]
type = changestate
triggerall = !Ailevel
trigger1 = movehit && animtime = 0
value = 3722

[state 130000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;First Ender-Third Part
[statedef 3722]
type = S
movetype = A
physics = N
anim = 330010
juggle = 0
ctrl = 0
velset = 0,0

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[State 200, snd];voice
type = playsnd
triggerall = anim = 330010
trigger1 = animelem=1
value = 1400,11
channel = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 330010
trigger1 = animelem = 2
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 10, 10, fvar(11) * 40)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 10,30 ;13,13
guard.pausetime = 6,30 ;13,13
sparkno = s2512
guard.sparkno = s7000
sparkxy = -20,-70
hitsound = -1
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = -4
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
forcenofall = 1
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
kill = 0
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 30
envshake.freq = 60
envshake.ampl = 6
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 5104



[State 200, snd];voice
type = playsnd
trigger1 = NumExplod(332301)
value = 33000,2
persistent = 0
volume  = 355

[State 13100, explosion sound]
type = playsnd
triggerall = anim = 330010
trigger1 = animelem = 2
value = 33000,1
volume = 355

[State 0, Super FX]
type = Explod
triggerall = enemy, stateno = 5104
trigger1 = enemy, time %3 = 0
anim = 330013
id = 330013
pos = 0,0
random = 60,60
postype = p2
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
scale = 1,1
persistent = 1

[State 0, Super FX]
type = Explod
triggerall = enemy, stateno = 5105
trigger1 = !NumExplod(332301)
anim = 332301
id = 332301
pos = 0,10
postype = p2
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 10
ownpal = 1
scale = 1,1
persistent = 0


[State 2103, Super BG Proj]
type = Projectile
trigger1 = target,anim = 330012
ProjID = 3000	;Ki attack
projAnim = 15999
projremoveTime = 1
ignorehitpause = 1


[state 0, changeanim]
type = changeanim
triggerall = anim = 330010 
trigger1 = time > 90
value = 330011

[State 13100, Hmmmp]
type = playsnd
triggerall = anim = 330010 
trigger1 = animelemtime(6)=0
value = 181,6+random%3
channel = 0

[state 0, targetstate]
type = targetstate
triggerall = numtarget(5104)
trigger1 = movehit 
value = 5104
id = 5104
ignorehitpause = 1
persistent = 0

[state 0, changestate]
type = changestate
triggerall = anim = 330011
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------------------------------
;LVL 3 Ender
[statedef 3730]
type = S
movetype = A
physics = N
anim = 332400
juggle = 0
ctrl = 0
velset = 0,0

[state 1230000, assertspecial]
type = assertspecial
trigger1 = 1
flag = timerfreeze

[state 0, varset]
type = null
trigger1 = !time
var(21) = 0

[State 200, 1]  
type = HitDef
triggerall = anim = 332400
trigger1 = animelem = 4
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 20 < 10, 10, fvar(11) * 20)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 33,60 ;13,13
guard.pausetime = 33,60 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -15,-75
hitsound = s33001, 0
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 40
ground.velocity = 0
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
kill = 0
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 40
envshake.freq = 60
envshake.ampl = 10
getpower= 0,0
givepower = 35,35
yaccel = 0.5

[State 200, 1]  
type = HitDef
triggerall = anim = 332400
trigger1 = animelem = 10
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 20, 20, fvar(11) * 40)), 1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 33,50 ;13,13
guard.pausetime = 33,50 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -10,-40
hitsound = s33000, 0
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 99
ground.velocity = 0
guard.velocity = -2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
kill = 0
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 40
envshake.freq = 60
envshake.ampl = 10
getpower= 0,0
givepower = 35,35
yaccel = 0.5


[state 1230000, velset]
type = velset
triggerall = anim = 332400
trigger1 = animelemtime(19) = 0
x = -38

[state 123000, velmul]
type = velset
triggerall = anim = 332400
trigger1 = !animtime
x = 0

[state 324000, changeanim]
type = changeanim
triggerall = anim = 332400
trigger1 = !animtime
value = 332401


;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [84,157]
flag = noBG
flag2 = noFG

[State 3000, superpause]
type = superpause
trigger1 = time=84
time = 56
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,1
darken = 0
movetime = 56
poweradd = -1000


[State 0, Hyper Charge FX]
type = Explod
triggerall = anim = 332401
trigger1 = time = 102
anim = 2440
id = 2440
pos = 45,-62
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

;---------------------------------------------



[State 3101, dust FX]
type = null
triggerall = anim = 332401
trigger1 = animelemtime(1) = 37 || animelemtime(5) = 7 || animelemtime(9) = 5 || animelemtime(13) = 5 || animelemtime(17) = 3
trigger2 = animelemtime(21) = 3 || animelemtime(25) = 3
helpertype = normal
stateno = 80000000
ID = 80000000
name = "SLOW_PEW"
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 7

[State 0, Hyper Charge FX]
type = null
triggerall = anim = 332401
trigger1 = animelemtime(1) = 35 || animelemtime(5) = 5 || animelemtime(9) = 2 || animelemtime(13) = 2  
anim = 332402
id = 332402
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 1

[State 0, Hyper Charge FX]
type = null
triggerall = anim = 332401
trigger1 = animelemtime(17) = 1 ||animelemtime(21) = 1 || animelemtime(25) = 1 
anim = 332413
id = 332413
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 1

[State 0, Hyper Charge FX]
type =null
triggerall = anim = 332401
trigger1 = animelemtime(1) = 35 || animelemtime(5) = 5 || animelemtime(9) = 2 || animelemtime(13) = 2 
anim = 332412
id = 332412
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 10
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 1

[State 0, Hyper Charge FX]
type = null
triggerall = anim = 332401
trigger1 = animelemtime(17) = 1 || animelemtime(21) = 1 || animelemtime(25) = 1 
anim = 332411
id = 332411
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 10
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 1


[State 3101, background FX]
type = null
triggerall = anim = 332401
trigger1 = animelemtime(1) = 30
helpertype = normal
stateno = 80000005
ID = 80000005
name = "Background"
postype = left
pos = 158,0
ownpal = 1
size.yscale = .5
supermovetime = 9999
sprpriority = -1


[State 3101, dust FX]
type = helper
triggerall = anim = 332401
trigger1 = animelemtime(2) = 2
helpertype = normal
stateno = 80000001
ID = 80000001
name = "FAST_PEW"
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 7

[State 3101, dust FX]
type = helper
triggerall = anim = 332401
trigger1 = animelemtime(2) = 2
helpertype = normal
stateno = 80000001
ID = 80000001
name = "FAST_PEW"
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 7

[state 0, pew]
type = playsnd
triggerall = anim = 332401
trigger1 = animelemtime(2) = 2
value = 33001,2

[state 0, recoil]
type = playsnd
triggerall = anim = 332401
trigger1 = animelemtime(2) = 2
value = 33002,3+random%3

[State 0, Hyper Charge FX]
type = Explod
triggerall = anim = 332401
trigger1 = animelemtime(2) = 1
anim = 332402
id = 332402
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 10
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 1

[State 0, Hyper Charge FX]
type = Explod
triggerall = anim = 332401
trigger1 = animelemtime(2) = 1
anim = 332411
id = 332411
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 1




[State 200, BGPalFX]
type = null
triggerall = anim = 332401
trigger1 = animelemtime(1) = 0
time = 120
add = -100,-100,-100
mul = 100,100,256
invertall = 0
color = 256

[State 200, BGPalFX]
type = null
triggerall = anim = 332401
trigger1 = animelemtime(9) >= 0 && animelemtime(29) < 0
time = 1
add = ifelse((-100)+var(21)/2 < 0,0,(-100)+var(21)/2),ifelse((-100)+var(21)/2 < 0,0,(-100)+var(21)/2),ifelse((-100)+var(21)/2 < 0,0,(-100)+var(21)/2)
mul	= ifelse((100+var(21)) > 256,256,100+var(21)),ifelse((100+var(21)) > 256,256,100+var(21)),256
invertall = 0
color = 256

[state 0 ,varadd]
type = null
triggerall = anim = 332401 && animelemtime(29) < 0
trigger1 = animelemtime(9) > 0 && time%2 = 0
var(21) = 3


[State 3101, dust FX]
type = helper
triggerall = anim = 332401
trigger1 = animelemtime(2) = 0
helpertype = normal
stateno = 80000002
ID = 80000002
name = "dust"
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 7


[state 0, changeanim]
type = changeanim
trigger1 = time = 309
value = 332405

[state 0, velset]
type = velset
triggerall = anim = 332405
trigger1 = animelemtime(1) = 0
x = 0

[State 0, Hyper Charge FX]
type = Helper
triggerall = anim = 332405
trigger1 = animelemtime(1) = 0
stateno = 23000
id = 23000
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 8
ownpal = 1
scale = 1,1
persistent = 1

[State 0, Hyper Charge FX]
type = Explod
triggerall = anim = 332405
trigger1 = animelemtime(6) = 0
anim = 332414
id = 332414
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 1

[state 0, playsnd]
type = null
triggerall = anim = 332405
trigger1 = animelem = 7
value = 32400,1




[state 0, modifyexplod]
type = modifyExplod
triggerall = anim = 332405
trigger1 = animelemtime(8) = 0
pos = 0,3
postype = p1
id = 332414

[state 0, removeexplod]
type = RemoveExplod
triggerall = anim = 332405
trigger1 = animelemtime(11) = 0
id = 332414


[state 1230000,changestate]
type = changestate
triggerall = anim = 332405
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Elite Assault
[Statedef 4000]
type = S 
movetype = A
physics = N
anim = 4000
poweradd = ifelse(var(51) != 1,-3000, -2000)
juggle = 0
ctrl = 0
velset = 0,0

[state 4100, flash white]
type = palfx
trigger1 = var(35) = 1
add = 255,255,255
time = 3
ignorehitpause = 1
persistent = 0

[state 4000, varset]
type = varset
triggerall = var(51) = 1
trigger1 = !time
var(25) = 2

[state 4000, timeover]
type = assertspecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1

[state 730000, nothitby]
type = nothitby
trigger1 = movehit
value = SCA

[state 4000, posset]
type = posset
trigger1 = !time
y  = 0

[state 3101, Smoke FX]
type = explod
triggerall = anim = 4000
trigger1 = animelemtime(4) = 0 
anim = 1206
id = 1206
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[state 310, grunt]
type = playsnd
trigger1 = !time
value = 2845,0+random%3
channel = 0

[state 310, grunt]
type = playsnd
triggerall = anim = 4000
trigger1 = animelemtime(4) = 0
value = 40,1


;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,45]
flag = noBG
flag2 = noFG


[State 3000, superpause]
type = superpause
trigger1 = !time
time = 45
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,1
darken = 0
movetime = 45

[State 0, Hyper Charge FX]
type = Explod
triggerall = anim = 4000
trigger1 = !time
anim = 2440
id = 2440
pos =  0,-55
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

;------------------------------------

[state 4000, velset]
type = velset
triggerall = anim = 4000
trigger1 = animelemtime(4) = 0
x = 15

[State 200, 1]  
type = HitDef
triggerall = anim = 4000
trigger1 = animelem = 4
attr = S, HA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 30 < 10, 10, fvar(11) * 30)), 0
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 20,20 ;13,13
guard.pausetime = 20,20 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -5,-45
hitsound = s3000, 1
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = 4
guard.velocity = 2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
forcenofall = 1
kill = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = hard
ground.cornerpush.veloff = 0
envshake.time = 20
envshake.freq = 80
envshake.ampl = 8
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 4050




[state 4000, camera]
type = velset
triggerall = anim = 4000
trigger1 = animelemtime(7) = 0
x = 3

[state 4000, nothitby]
type = nothitby
trigger1 = movehit
value = SCA
ignorehitpause = 1

[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(4050)
trigger1 = movehit 
trigger1 = !(target,ishelper)
value = 4050
ID = 4050
ignorehitpause = 0
persistent = 0

[state 4000, changestate]
type = changestate
triggerall = Numtarget(4050)
trigger1 = movehit
trigger1 = !(target,ishelper)
value = 4001
ctrl = 0

[state 4000, changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Flip Kick
[Statedef 4001]
type = S 
movetype = A
physics = N
anim = 4001
juggle = 0
ctrl = 0
velset = 3,0


[state 4000, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[state 4000, varset]
type = varset
triggerall = var(51) = 1
trigger1 = !time
var(51) = 0

[state 4001, hitadd]
type = hitadd
trigger1 = animelemtime(10) = 0
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(4) > 0
flag = noBG
flag2 = noFG

[state 4000, timeover]
type = assertspecial
trigger1 = 1
flag = timerfreeze
flag2 = nobardisplay

[State 0, Explod] ;Piccolo Compatibility
type = Explod
trigger1 = animelemtime(2) = 0
anim = 5939
ID = 991901
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -1
removeongethit = 1


[state 4001, turn]
type = turn
trigger1 = animelemtime(4) = 0


[state 4001, posset]
type = posset
trigger1 = animelemtime(5) = 0
x = -50*facing

[state 4000, camera]
type = velset
triggerall = anim = 4001
trigger1 = animelemtime(3) = 0
x = 0

[State 250, 1]
type = PlaySnd
triggerall = anim = 4001
trigger1 = animelemtime(9) = 0
value = 0, 5


[State 250, 1]
type = PlaySnd
triggerall = anim = 4001
trigger1 = animelemtime(10) = 0
value = 4000, 6

[State 250, 1]
type = PlaySnd
triggerall = anim = 4001
trigger1 = animelemtime(2) = 0
value = 2302, 0

[State 250, 1]
type = PlaySnd
triggerall = anim = 4001
trigger1 = animelemtime(5) = 0
value = 2302, 0

[State 650, 2]
type = Explod
triggerall = anim = 4001
trigger1 = animelemtime(10) = 0
anim = 3600
pos = 0,-60
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[state 310, grunt]
type = playsnd
triggerall = anim = 4001
trigger1 = animelemtime(10) = 0
value = 3,0
channel = 0


[state 4000, Finisher 0]
type = changestate
trigger1 = animtime = 0
trigger1 = p2stateno = 4051
trigger1 = var(52) < 1000
trigger2 = var(51) = 2
trigger2 = animtime = 0
trigger2 = p2stateno = 4051
value = 4002

[state 4000, Finisher 1]
type = changestate
triggerall = var(51) != 2
trigger1 = animtime = 0
trigger1 = p2stateno = 4051
trigger1 = var(52) >= 1000 && var(52) < 2000
value = 4100

[state 4000, Finisher 2]
type = changestate
triggerall = var(51) != 2
trigger1 = animtime = 0
trigger1 = p2stateno = 4051
trigger1 = var(52) >= 2000 && var(52) < 3000
value = 4200

[state 4000, Finisher 3]
type = changestate
triggerall = var(51) != 2
trigger1 = animtime = 0
trigger1 = p2stateno = 4051
trigger1 = var(52) >= 3000
value = 4300
;--------------------------------------------
;Finisher 0 - Jump and Slam
[Statedef 4002]
type = S 
movetype = A
physics = N
anim = 4002
juggle = 0
ctrl = 0
velset = 0,0

[state 4000, timeover]
type = assertspecial
trigger1 = 1
flag = timerfreeze

[State 41, Train]
type = AfterImage
triggerall = var(51) = 2   ;Evolution afterimages
trigger1 = !time
time= -1
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,0,150
palpostbright= 0,0,150
trans= add

[state 4001, hitadd]
type = hitadd
trigger1 = animelemtime(18) = 0
value = 1

[state 4000, timeover]
type = assertspecial
trigger1 = 1
flag = timerfreeze
flag2 = nobardisplay

[State 1000, shake]
type = EnvShake
triggerall = animelemtime(6) < 0
trigger1 = !(time%4)
time=4
freq=80
ampl=2+0.02*time

[State 4500, 1];power up SFX
type = PlaySnd
trigger1 = !time
value = 193,1
volume = 500

[State 4500, 1];power up SFX 2
type = PlaySnd
trigger1 = !time
value = 4000,0
volume = 500


[State 4500, 1];fly sfx
type = PlaySnd
trigger1 = animelem = 3
value = 2700,2
volume = 500

[State 4500, 1];fly sfx 2
type = PlaySnd
trigger1 = animelem = 3
value = 4000,1
volume = 500

[state 17100, aura]
type = explod
trigger1 = !time
anim = 4070
id = 4070
pos = 8,33
postype = P1
sprpriority = -1
ownpal = 0
supermovetime = -1
removetime = 64
persistent = 0
bindtime = -1

[state 17100, aura]
type = helper
trigger1 = animelemtime(3) = 0
stateno = 4071
id = 4071
pos = -3,-68
postype = P1
sprpriority = -1
ownpal = 0
supermovetime = 9999
persistent = 0


[state 4001, helper]
type = helper
trigger1 = animelemtime(3) = 0
stateno = 19901
id = 19901
pos = 0,0
postype = back
sprpriority = -27
scale = 1,1
ownpal = 1


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[state 4002, velset]
type = velset
triggerall = animelem = 3
trigger1 = pos y > -30
y = -10

[state 4002, velset]
type = velset
trigger1 = pos y = -30
y = 0

[State 650, 2]
type = Explod
triggerall = anim = 4002
trigger1 = animelemtime(18) = 0
anim = 3600
pos = 0,-60
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 250, 1]
type = PlaySnd
triggerall = anim = 4002
trigger1 = animelemtime(17) = 0
value = 0, 2

[state 310, grunt]
type = playsnd
triggerall = anim = 4002
trigger1 = animelemtime(18) = 0
value = 3,4
channel = 0

[State 250, 1]
type = PlaySnd
triggerall = anim = 4002
trigger1 = animelemtime(18) = 0
value = 3000, 1

[State 250, 1]
type = PlaySnd
triggerall = anim = 4002
trigger1 = animelemtime(18) = 0
value = 4000, 2

[state 4000, changestate]
type = changestate
trigger1 = enemy, stateno = 4053
value = 4003
ctrl = 1

;--------------------------------------------
;Stomp
[Statedef 4003]
type = A 
movetype = A
physics = N
anim = 4003
juggle = 0
ctrl = 0


[State 0, Projectile]
type = Projectile
trigger1 = movehit 
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

[State 250, 1]
type = PlaySnd
trigger1 = !time
value = 4000, 3



[state 4000, timeover]
type = assertspecial
trigger1 = 1
flag = timerfreeze


[state 4003, posset]
type = posset
trigger1 = !time
y = -300

[state 4003, velset]
type = velset
trigger1 = time = 160
y = 20

[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0

[state 4004, changestate]
type = posset
trigger1 = !time
x = enemy, pos X + 10

[State 200, 1]  
type = HitDef
triggerall = time > 160
trigger1 = !movecontact
attr = S, NA
;damage = 50, 0
damage = ceil(ifElse(fvar(11) * 40 < 20, 20, fvar(11) * 40))
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,0 ;13,13
guard.pausetime = 0,0 ;13,13
sparkno = -1
guard.sparkno = s7000
sparkxy = -5,-45
hitsound = -1
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 28
ground.velocity = 4
guard.velocity = 2
airguard.velocity = -2.5,-1.3
air.type = Low
fall.recover = 0
forcenofall = 1
kill = 0
air.velocity = 0,-4
air.hittime = 28
air.fall = 1
air.animtype = back
ground.cornerpush.veloff = 0
envshake.time = 20
envshake.freq = 80
envshake.ampl = 8
getpower= 0,0
givepower = 35,35
yaccel = 0.5
ID = 4050


[state 4004, changeanim]
type = changeanim
triggerall = anim = 4003
trigger1 = pos Y >= 0 && Vel Y > 0
value = 4004

;-------Land-----------------

[state 4054, envshake]
type = envshake
triggerall = anim =4004
trigger1 = animelemtime(1) = 0
time = 30
freq = 50
ampl = 10

[state 2001, Ground Smash FX]
type = explod
triggerall = anim =4004
trigger1 = animelemtime(1) = 0
anim = 3500
id = 3500
pos = 9,-3
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 0
scale = 1,1



[State 250, 1]
type = PlaySnd
triggerall = anim = 4004
trigger1 = animelemtime(1) = 0
value = 4000, 5

[state 4001, hitadd]
type = hitadd
triggerall = anim = 4004
trigger1 = animelemtime(1) = 0
value = 1

[State 650, 2]
type = Explod
triggerall = anim = 4004
trigger1 = animelemtime(1) = 0
anim = 7030
pos = 0,0
postype = p1
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1


[state 4003, velset]
type = velset
triggerall = anim = 4004
trigger1 = animelemtime(1) = 0
y = 0

[State 0, RemoveExplod]  ;Piccolo's clones
type = RemoveExplod
triggerall = anim = 4004
trigger1 = animelemtime(1) = 0
id = 991901
persistent = 0

[state 4003, velset]
type = velset
triggerall = anim = 4004
trigger1 = animelemtime(4) = 0
x = -1.5
y = -5

[State 9011, VelAdd]
type = VelAdd
triggerall = anim = 4004
trigger1 = animelemtime(6) >= 0
y = 0.35



[state 4003, targetbind]
type = targetbind
trigger1 =  movehit = 1
trigger1 = !(target, ishelper)
pos = 0,0

[state 4003, targetstate]
type = targetstate
trigger1 =  movehit = 1
trigger1 = !(target, ishelper)
value = 4054
ignorehitpause = 1
persistent = 0

[state 4004, changestate]
type = changeanim
triggerall = anim = 4004
trigger1 = pos Y >= 0 && Vel Y > 0
value = 48

[state 4004, posset]
type = velset
trigger1 = anim = 48
x = 0
y = 0
[state 4004, posset]
type = posset
trigger1 = anim = 48
y = 0

[state 4004, changestate]
type = changestate
triggerall = anim = 48
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------
;Hit by Elite Assault
[statedef 4050]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
velset  = 0,0
ctrl = 0


[state 3650, turn]
type = turn
trigger1 = !time
trigger1 = facing = enemy, facing

[state 730000, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0

[State 4005, vel]
type = velset
trigger1 = time = 2
x = -18
persistent = 0

[state 4000, changestate]
type = changestate
trigger1 = enemy, anim = 4001
trigger1 = enemy,animelemtime(7) = 0
value = 4051

[state 4000, failed]
type = changestate
trigger1 = time = 100
value = 0
ctrl = 1
;-------------------------------------------------
;Fly Upwards
[statedef 4051]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
velset = -25,0

[state 4051, nothitby]
type = nothitby
trigger1 = 1
value = SCA


[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0

[state 4051, posset]
type = posset
trigger1 = !time
x = 305*enemy,facing
y = -20


[state 4051, velset]
type = velset
triggerall = enemy, anim = 4001
trigger1 = enemy,animelemtime(9) = 0
x = 0

[state 4001, turn]
type = turn
triggerall = enemy, anim = 4001
trigger1 = enemy,animelemtime(9) = 0

[state 4001, lifeadd]
type = lifeadd
triggerall = enemy, anim = 4001
trigger1 = enemy,animelemtime(9) = 0
value = -ceil(ifElse(fvar(11) * 80 < 50, 50, fvar(11) * 80))
kill = 0

[state 4051, changeanim]
type = changeanim2
triggerall = anim != 4051
triggerall = enemy, anim = 4001
trigger1 = enemy,animelemtime(9) = 0
value = 4051


[state 4051, changeanim]
type = changeanim
triggerall = anim = 4051
trigger1 = animtime = 0
value = 5051

[state 4051, changeanim]
type = changeanim
triggerall = anim = 5051
trigger1 = animtime = 0
value = 5051
elem = 3

[state 4051, velset]
type = velset
trigger1 = anim = 5051
y = -20

[state 4051, envshake]
type = envshake
trigger1 = anim = 4051 && animelemtime(1) = 0
time = 20
freq = 80
ampl = 8


[state 4000, changestate]
type = changestate
trigger1 = enemy, var(52) < 1000
trigger1 = pos Y < -300
trigger2 = enemy,var(51) = 2
trigger2 = pos Y < -300
value = 4052


[state 4000, changestate]
type = changestate
triggerall = enemy,var(51) != 2
triggerall = enemy, var(52) >= 1000 && enemy,var(52) < 2000
trigger1 = pos Y < -300
value = 4150

[state 4000, changestate]
type = changestate
triggerall = enemy,var(51) != 2
triggerall = enemy, var(52) >= 2000  && enemy, var(52) < 3000
trigger1 = pos Y < -300
value = 4250

[state 4000, changestate]
type = changestate
triggerall = enemy,var(51) != 2
triggerall = enemy, var(52) >= 3000 
trigger1 = pos Y < -300
value = 4350
;-------------------------------------------------
;Passed By
[statedef 4052]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[state 4052, assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[state 4052, velset]
type = velset
trigger1 = time = 100
y = 30

[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0

[state 4051, changeanim]
type = changeanim
triggerall = anim = 5051
trigger1 = animtime = -1
value = anim
elem = animelemno(0)

;-----Go Back Up----------

[state 4051, velset]
type = velset
trigger1 = enemy, animelemtime(4) = 0
y = -26

[state 4051, velset]
type = velset
trigger1 = enemy, animelemtime(18) = 0
y = 0



[state 4051, changeanim2]
type = changeanim2
trigger1 = enemy, animelemtime(18) = 0
value = 4052

[state 4051, changeanim]
type = changeanim
triggerall = anim = 4052
trigger1 = animtime = 0
value = 5061


[state 4051, velset]
type = velset
trigger1 = anim = 5061
y = 12


[state 4001, lifeadd]
type = lifeadd
trigger1 = enemy,animelemtime(18) = 0
value = -ceil(ifElse(fvar(11) * 80 < 50, 50, fvar(11) * 80))
kill = 0


[state 4051, envshake]
type = envshake
trigger1 = enemy, animelemtime(18) = 0
time = 30
freq = 80
ampl = 8


[state 4000, changestate]
type = changestate
trigger1 = anim = 5061 && pos Y > 20
value = 4053
ctrl = 1

;-------------------------------------------------
;Slammed into ground
[statedef 4053]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0


[state 4053, velset]
type = velset
trigger1 = time = 120
y = 40

[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0

[state 4053, posset]
type = posset
trigger1 = !time
y = -400


[state 4000, changestate]
type = changestate
triggerall = prevstateno != 4055
trigger1 = pos Y >= 0 && Vel Y > 0
value = 4055

;-------------------------------------------------
;Knee'd
[statedef 4054]
type = A
movetype = H
physics = N
ctrl = 0
anim = 5080

[state 4053, velset]
type = velset
trigger1 = !time
y = 20

[state 4004, changeanim]
type = changeanim2
triggerall = anim != 4053
trigger1 = pos Y >= 0 && Vel Y > 0
value = 4053

[state 4053, velset]
type = velset
trigger1 = anim = 4053
y = 0

[state 4055, lifeadd]
type = lifeadd
triggerall = anim = 4053
trigger1 = animelemtime(1) = 0
value = -ceil(ifElse(fvar(11) * 40 < 20, 20, fvar(11) * 40))


[state 4055, posset]
type = posset
trigger1 = anim = 4053
y = 0

[state 4000, changestate]
type = changestate
triggerall = anim = 4053
trigger1 = animtime = 0
value = 4056
ctrl = 1
;---------------------------------------------------------------------------
;P2 bouncing on the ground from a.SP
[Statedef 4055]
type    = L
movetype= H
physics = N
velset = 0,0

[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0



[state 4055, lifeadd]
type = lifeadd
trigger1 = !time
value = -ceil(ifElse(fvar(11) * 40 < 20, 20, fvar(11) * 40))
kill = 0

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0


;[State 5100, 10]
;type = PlaySnd
;trigger1 = Time = 1
;;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;value = f7,2

[State 5100, 5]
type = VelSet
trigger1 = AnimTime = 0
y = -8


[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 4057

;----------------------------------------------
;Hit By Stomp Final
[Statedef 4056]
type = L
movetype = H
physics = N
velset= 0,0
ctrl = 0

[state 3050, invul]
type = nothitby
trigger1 = 1
value = SCA
time = 100

[state 3050, playerpush]
type =  playerpush
trigger1 = p2stateno = 3000
value = 0

[state 3060, changeanim]
type = changeanim2
trigger1 = !time
value = 3050

[state 3000, posset]
type = posset
trigger1 = 1
y = 0
ignorehitpause = 1



[state 3000, changestate]
type = selfstate
triggerall = alive
trigger1 = time = 114
value = 5120

[state 3000, changestate]
type = selfstate
triggerall = !alive
triggerall = enemy,var(49) = 0
trigger1 = time >= 20
value = 5110


[state 1060, changestate]
type = changestate
triggerall = !alive
triggerall = enemy,var(49) = 1
trigger1 = time >= 20
value = 5110

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 4057]
type    = A
movetype= H
physics = N



[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= IfElse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = time > 0  ;Vans Fix !!!
y = .41


[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, Const(movement.air.gethit.groundlevel))
value = 5100 ;Downed get-hit (hit ground from fall)
;--------------------------------------------
;Finisher 1 - SSG Fireball
[Statedef 4100]
type = S 
movetype = A
physics = N
anim = 4100
juggle = 0
ctrl = 0
sprpriority = 6
velset = 5,0

[state 4100, centering]
type = velmul
trigger1 = Vel X != 0
x = .90

[state 4100, velset]
type = velset
trigger1 = Vel X < .2
x = 0

[state 4000, timeover]
type = assertspecial
trigger1 = 1
flag = timerfreeze
flag2 = nobardisplay

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 41, Train]
type = AfterImage
triggerall = var(51) = 2   ;Evolution afterimages
trigger1 = !time
time= -1
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,0,150
palpostbright= 0,0,150
trans= add


[State 1000, shake]
type = EnvShake
triggerall = anim = 4100
trigger1 = !(time%4)
time=4
freq=80
ampl=2+0.02*time

[State 4500, 1];power up SFX
type = PlaySnd
trigger1 = !time
value = 193,1
volume = 500

[State 4500, 1];power up SFX 2
type = PlaySnd
trigger1 = !time
value = 4000,0
volume = 500


[State 4500, 1];fly sfx
type = PlaySnd
triggerall = anim = 4100
trigger1 = animelem = 3
value = 2700,2
volume = 500

[State 4500, 1];fly sfx 2
type = PlaySnd
triggerall = anim = 4100
trigger1 = animelem = 3
value = 4000,1
volume = 500

[state 17100, aura]
type = explod
trigger1 = !time
anim = 4070
id = 4070
pos = 8,33
postype = P1
sprpriority = -1
ownpal = 0
supermovetime = -1
removetime = 64
persistent = 0
bindtime = -1

[state 17100, aura]
type = helper
triggerall = anim = 4100
trigger1 = animelemtime(3) = 0
stateno = 4071
id = 4071
pos = -3,-68
postype = P1
sprpriority = -1
ownpal = 0
supermovetime = 9999
persistent = 0

[state 4001, helper]
type = helper
triggerall = anim = 4100
trigger1 = animelemtime(3) = 0
stateno = 19901
id = 19901
pos = 0,0
postype = back
sprpriority = -27
scale = 1,1
ownpal = 1

[state 4002, velset]
type = velset
triggerall = anim = 4100
triggerall = animelem = 3
trigger1 = pos y > -9
y = -9

[state 4002, velset]
type = velset
triggerall = anim = 4100
trigger1 = pos y = -9
y = 0

[state 4100, palfx]
type = palfx
triggerall = anim = 4100
trigger1 = animelemtime(4) = 0 
add = 255,255,255
time = 3

[state 4100, playsnd]
type = playsnd
triggerall = anim = 4100
trigger1 = animelemtime(4) = 0 
value = 4100,5

[state 4100, playsnd]
type = playsnd
triggerall = anim = 4100
trigger1 = animelemtime(4) = 0 
value = 4100,6

[state 4100, changeanim]
type = changeanim
triggerall = anim = 4100
trigger1 = enemy,pos y > pos y - 147
value = 4101

[state 4002, velset]
type = velset
triggerall = anim = 4101
trigger1 = animelemtime(2) = 0
y = -.1

[State 650, 2]
type = Explod
triggerall = anim = 4101
trigger1 = animelemtime(2) = 0
anim = 3600
pos = 0,0
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 8
ownpal = 1

[state 4001, hitadd]
type = hitadd
triggerall = anim = 4101
trigger1 = animelemtime(2) = 0
value = 1

[state 4051, envshake]
type = envshake
triggerall = anim = 4101
trigger1 = animelemtime(2) = 0
time = 20
freq = 80
ampl = 8

[state 4150, kick woosh]
type = PlaySnd
triggerall = anim = 4101
trigger1 = animelemtime(1) = 0
value = 0, 5

[State 4150, kick sound]
type = PlaySnd
triggerall = anim = 4101
trigger1 = animelemtime(2) = 0
value = 4000, 6

[State 4150, kick sound]
type = PlaySnd
triggerall = anim = 4101
trigger1 = animelemtime(2) = 0
value = 4100, 3

[state 4002, velset]
type = velset
triggerall = anim = 4101
trigger1 = animelemtime(3) = 0
y = 0

[State 250, 1]
type = PlaySnd
triggerall = anim = 4101
trigger1 = animelemtime(3) = 0
value = 2302, 0

[state 4002, teleport]
type = posadd
triggerall = anim = 4101
trigger1 = animelemtime(5) = 0
y = -80


[State 650, Elbow]
type = Explod
triggerall = anim = 4101
trigger1 = animelemtime(10) = 0
anim = 3600
pos = -60,0
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 8
ownpal = 1

[state 4150, elbow woosh]
type = PlaySnd
triggerall = anim = 4101
trigger1 = animelemtime(9) = 0
value = 0, 2

[state 4002, velset]
type = velset
triggerall = anim = 4101
trigger1 = animelemtime(9) = 0
y = 3

[state 4002, velset]
type = velset
triggerall = anim = 4101
trigger1 = animelemtime(10) = 0
y = 0

[State 4150, elbow sound]
type = PlaySnd
triggerall = anim = 4101
trigger1 = animelemtime(10) = 0
value = 3000, 1

[state 4001, Elbow]
type = hitadd
triggerall = anim = 4101
trigger1 = animelemtime(10) = 0
value = 1

[state 4051, envshake]
type = envshake
triggerall = anim = 4101
trigger1 = animelemtime(10) = 0
time = 20
freq = 80
ampl = 8

[state 4002, velset]
type = velset
triggerall = anim = 4101
trigger1 = animelemtime(10) = 20
y = 3

[state 4100, centering]
type = velmul
triggerall = anim = 4101
trigger1 = animelemtime(10) >= 20
y = .91

[state 4002, velset]
type = velset
triggerall = anim = 4101
trigger1 = animelemtime(11) = 0
y = 5

[state 4100, centering]
type = velmul
triggerall = anim = 4101
trigger1 = animelemtime(11) >= 0
y = .90

[State 0, Super FX]
type = Explod
triggerall = anim = 4101
trigger1 = animelemtime(12) = 0
anim = 410100
id = 410100
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -1
sprpriority = 5
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 4101
trigger1 = animelemtime(12) = 0
anim = 410101
id = 410101
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 5
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 4500, Flame Charge]
type = PlaySnd
triggerall = anim = 4101
trigger1 = animelemtime(12) = 0
value = 4100,0


[State 0, Super FX]
type = Explod
triggerall = anim = 4101
trigger1 = animelemtime(13) = 0
anim = 410102
id = 410102
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 7
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 4500, Flame Charge]
type = PlaySnd
triggerall = anim = 4101
trigger1 = animelemtime(13) = 0
value = 4100,7+random%2
channel = 0

[State 4100, changeanim]
type = changeanim
triggerall = anim = 4101
trigger1 = !animtime
value = 4102

[state 4100, removeexplod]
type = removeexplod
triggerall = anim = 4102
trigger1 = animelemtime(1) = 0
id = 410100

[State 0, Super FX]
type = Explod
triggerall = anim = 4102
trigger1 = animelemtime(1) = 0
anim = 410200
id = 410200
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 5
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Super FX]
type = Explod
triggerall = anim = 4102
trigger1 = animelemtime(1) = 0
anim = 410201
id = 410201
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 7
ownpal = 1
bindtime = -1
scale = 1,1

[state 3000, Heugh]
type = null
triggerall = anim = 4102
trigger1 = animelemtime(1) = 0
value = 3,12
channel = 0

[State 0, Super FX]
type = Helper
triggerall = anim = 4102
trigger1 = animelemtime(2) = 0
stateno = 4110
id = 4110
pos = 0,0
postype = p1
supermovetime = 9999
pausemovetime = 9999
sprpriority = 8
ownpal = 1
scale = 1,1
persistent = 0

[state 4001, upwards speedlines]
type = helper
triggerall = anim = 4102
trigger1 = animelemtime(2) = 0
stateno = 19902
id = 19902
pos = 0,0
postype = back
sprpriority = -27
scale = 1,1
ownpal = 1

[state 4100, screenbound]
type = ScreenBound
trigger1 = anim = 4102
trigger1 = animelemtime(2) >= 0
trigger2 = anim = 4103
value = 0

[state 4100, velset]
type = velset
triggerall = anim = 4102
trigger1 = animelemtime(2) = 0
y = -10 

[state 4100, explosion]
type = hitadd
triggerall = NumHelper(4110) && anim = 4102
trigger1 = Helper(4110), anim = 410204 
value = 1


[state 4100, changeanim]
type = changeanim
triggerall = NumHelper(4110) && anim = 4102
trigger1 = Helper(4110), anim = 410204
value = 4103

[state 4100, changestate]
type = changestate
trigger1 = enemy, stateno = 4151
value = 4101

;--------------------------------------------
;Flight Landing
[Statedef 4101]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 6

[state 4101, bgpalfx]
type = bgpalfx
trigger1 = time < 30
trigger1 = time*7 < 150
add = 256-(time*13),150-(time*7),0
time = 1

[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1

[State 0, Projectile]
type = Projectile
trigger1 = anim = 4103
ProjID = 3001
projanim = 15999
projremovetime = 1
ignorehitpause=1

[State 0, Super FX]
type = Explod
trigger1 = enemy, pos y >= 0 && enemy, vel y > 0
anim = 8450
id = 8450
pos = 0,0
postype = p2
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 4150, kick sound]
type = PlaySnd
trigger1 = enemy, pos y >= 0 && enemy, vel y > 0
value = 4100, 4

[State 3078, Debris Generator]
type = Helper
trigger1 = enemy, pos y >= 0 && enemy, vel y > 0
helpertype = normal
name = "Debris Generator"
ID = 66853
stateno = 66853
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 0
pausemovetime = 0

[State 4003, X set]
type = posset
trigger1 = time=0
y = -500

[state 4003, posadd]
type = posadd
trigger1 = !time
x = -60

[State 3010, gravity]
type = Velset
trigger1 = time=0
Y = 4

[State 3010, speed down when arriving]
type = Velmul
trigger1 = (Pos Y > -70) && (Pos Y <= 0) && (vel Y > 0.5)
Y = 0.95

[State 3010, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[state 4101, flame explosion]
type = hitadd
trigger1 = enemy,pos y >= 0 && enemy, vel y > 0
value = 1
persistent  = 0


[state 4101, changeanim]
type = changeanim
triggerall = anim = 4103
trigger1 = pos y >= 0 && vel y > 0
value = 4104

[state 17100, Landing Effect]
type = explod
trigger1 = anim = 4104 && animelemtime(1) = 0
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1


[State 0, RemapPal]
type = RemapPal
trigger1 = anim = 4104 && animelemtime(1) = 0
source = 1,1
dest = 1,var(58)

[State 17100, Landing Sound]
type = PlaySnd
trigger1 = anim = 4104 && animelemtime(1) = 0
value = 40, 0
persistent = 0

[state 4101, velset]
type = velset
triggerall = anim = 4104
trigger1 = animelemtime(1) = 0
y = 0

[state 4101, posset]
type = posset
triggerall = anim = 4104
trigger1 = animelemtime(1) = 0
y = 0

[State 0, RemoveExplod]  ;Piccolo's clones
type = RemoveExplod
triggerall = anim = 4104
trigger1 = animelemtime(1) = 0
id = 991901
persistent = 0

[state 4101, changestate]
type = changestate
triggerall = anim = 4104
trigger1 = !animtime
value = 0
ctrl = 1
;-------------------------------------------------
;Kicked and Elbowed
[statedef 4150]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = 7
velset = 0,0

[state 4051, changeanim]
type = changeanim
triggerall = anim = 5051
trigger1 = animtime = -1
value = anim
elem = animelemno(0)

[state 4052, posset]
type = posset
trigger1 = time < 120
x = (enemy, pos X)+(30*enemy,facing)

[state 4052, assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[state 4052, velset]
type = velset
trigger1 = time = 140
y = 30

[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0

[state 4150, velset]
type = velset
triggerall = anim = 5051
trigger1 = pos Y > enemy,pos y - 147
y = 0

[state 4150, velset]
type = velset
trigger1 = enemy, anim = 4101 && enemy, animelemtime(2) = 0
y = -.1

[state 4150, broken back]
type = changeanim
trigger1 = enemy, anim = 4101 && enemy, animelemtime(1) = 0
value = ifelse(selfanimexist(5946),5946,5030)

[state 4001, lifeadd]
type = lifeadd
trigger1 = enemy, anim = 4101 && enemy, animelemtime(1) = 0
value = -ceil(ifElse(enemy,fvar(11) * 80 < 50, 50, enemy,fvar(11) * 80))
kill = 0

[state 2001, Broken Back (Back)]
type = explod
triggerall = anim = 5946
trigger1 = animelemtime(1) = 0
anim = 5947
id = 5947
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1
removetime = -1
bindtime = -1
persistent = 0
ignorehitpause = 0
scale = 1,1

[state 2001, removeexplod]
type = removeexplod
trigger1 = enemy, anim = 4101 && enemy, animelemtime(10) = 0
id = 5947


[state 4150, changeanim]
type = changeanim
trigger1 = enemy, anim = 4103 && enemy, animelemtime(1) = 0
value = 5061


[state 4150, hit by elbow]
type = changeanim2
trigger1 = enemy, anim = 4101 && enemy, animelemtime(10) = 0
value = 651

[state 4150, angledraw]
type = angledraw
trigger1 = enemy, anim = 4101 && enemy, animelemtime(10) >= 0
trigger2 = anim = 651
value = 90

[state 4150, posset]
type = posadd
trigger1 = enemy, anim = 4103 && enemy, animelemtime(1) = 0
x = -57
y = 50

[state 4150, posset]
type = posadd
trigger1 = enemy, anim = 4101 && enemy, animelemtime(10) = 0
x = 57

[state 4150, velset]
type = velset
trigger1 = enemy, anim = 4101 && enemy, animelemtime(10) = 0
y = 0

[state 4001, lifeadd]
type = lifeadd
trigger1 = enemy, anim = 4101 && enemy, animelemtime(10) = 0
value = -ceil(ifElse(enemy,fvar(11) * 80 < 50, 50, enemy,fvar(11) * 80))
kill = 0


[state 4150, velset]
type = velset
trigger1 = enemy, anim = 4101 && enemy, animelemtime(10) = 20
y = 30

[state 4150, velset]
type = velset
triggerall = enemy, anim = 4101
trigger1 = enemy, animelemtime(27) = 0
y = 0

[state 4150, velset]
type = velset
triggerall = enemy, anim = 4102
trigger1 = enemy, animelemtime(2) = 0
y = -48

[state 4150, velset]
type = velset
triggerall = enemy, anim = 4102
trigger1 = pos y < -30
y = -.5

[state 4150, velset]
type = velset
trigger1 = enemy, anim = 4103 && enemy, animelemtime(2) = 0
y = 20


[state 4001, lifeadd]
type = lifeadd
trigger1 = enemy, anim = 4103 && enemy, animelemtime(1) = 0
value = -ceil(ifElse(enemy,fvar(11) * 120 < 60, 60, enemy,fvar(11) * 120))
kill = 0
persistent = 0

[state 4150, changestate]
type = changestate
trigger1 = enemy, anim = 4103 && enemy, animelemtime(1) >= 30
trigger2 = time = 800
value = 4151

;-------------------------------------------------
;Falling Down
[statedef 4151]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = 7
velset = 0,25


[State 3010, ScreenBound]
type = ScreenBound
trigger1 = anim = 5061
value = 0

[State 4003, X set]
type = posset
trigger1 = time=0
y = -1000



;---------Hit Ground-----------------------

[state 1251, shake it]
type = envshake
triggerall = anim = 5061
trigger1 =  pos y >= 0 && vel y > 0
freq = 60
time = 25
ampl = 8

[state 4151, statetypeset]
type = statetypeset
triggerall = anim = 5061
trigger1 =  pos y >= 0 && vel y > 0
statetype = L

[state 4001, lifeadd]
type = lifeadd
triggerall = anim = 5061
trigger1 = pos y >= 0 && vel y > 0
value = -10

[state 4151, changeanim]
type = changeanim2
triggerall = anim = 5061
trigger1 = pos y >= 0 && vel y > 0
value = 4150


[state 4151, velset]
type = velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[state 4151, posset]
type = posset
trigger1 = pos y > 0
y = 0

[state 1060, changestate]
type = changestate
triggerall = anim = 4150
triggerall = animelemtime(2) = 10
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5150

[state 1060, changestate]
type = selfstate
triggerall = anim = 4150
triggerall = animelemtime(2) = 10
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode != Simul
trigger2 = enemyNear,TeamMode != Simul
trigger3 = alive
value = ifelse(alive,5120,5150)

;--------------------------------------------
;Finisher 2 - Big Bang Attack
[Statedef 4200]
type = S 
movetype = A
physics = N
anim = 4200
juggle = 0
ctrl = 0
sprpriority = 1
velset = 5,0

[state 4100, centering]
type = velmul
trigger1 = Vel X != 0
x = .90

[state 4100, velset]
type = velset
trigger1 = Vel X < .2
x = 0

[state 4000, timeover]
type = assertspecial
trigger1 = 1
flag = timerfreeze
flag2 = nobardisplay

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 41, Train]
type = AfterImage
triggerall = var(51) = 2   ;Evolution afterimages
trigger1 = !time
time= -1
timegap= 1
framegap= 4
length= 10
palbright= 0,0,0
palcontrast= 0,0,150
palpostbright= 0,0,150
trans= add


[State 1000, shake]
type = EnvShake
triggerall = anim = 4200
trigger1 = !(time%4)
time=4
freq=80
ampl=2+0.02*time

[State 4500, 1];power up SFX
type = PlaySnd
trigger1 = !time
value = 193,1
volume = 500

[State 4500, 1];power up SFX 2
type = PlaySnd
trigger1 = !time
value = 4000,0
volume = 500


[State 4500, 1];fly sfx
type = PlaySnd
triggerall = anim = 4200
trigger1 = animelem = 3
value = 2700,2
volume = 500

[State 4500, 1];fly sfx 2
type = PlaySnd
triggerall = anim = 4200
trigger1 = animelem = 3
value = 4000,1
volume = 500

[state 17100, aura]
type = explod
trigger1 = !time
anim = 4070
id = 4070
pos = 8,33
postype = P1
sprpriority = -1
ownpal = 0
supermovetime = -1
removetime = 64
persistent = 0
bindtime = -1

[state 17100, aura]
type = helper
triggerall = anim = 4200
trigger1 = animelemtime(3) = 0
stateno = 4071
id = 4071
pos = -3,-68
postype = P1
sprpriority = -1
ownpal = 0
supermovetime = 9999
persistent = 0

[state 4001, helper]
type = helper
triggerall = anim = 4200
trigger1 = animelemtime(3) = 0
stateno = 19901
id = 19901
pos = 0,0
postype = back
sprpriority = -27
scale = 1,1
ownpal = 1



[state 4002, velset]
type = velset
triggerall = anim = 4200
triggerall = animelem = 3
trigger1 = pos y > -9
y = -9

[state 4002, velset]
type = velset
triggerall = anim = 4200
trigger1 = pos y = -9
y = 0

[state 4200, changeanim]
type = changeanim
triggerall = anim = 4200
trigger1 = !animtime
value = 4201

[state 4200, posadd]
type = posadd
triggerall = anim = 4201
trigger1 = animelemtime(1) = 0
y = -60

[State 250, 1]
type = PlaySnd
triggerall = anim = 4201
trigger1 = animelemtime(1) = 0
value = 2302, 0

[State 250, 1]
type = PlaySnd
triggerall = anim = 4201
trigger1 = animelemtime(4) = 0
value = 2302, 0

[state 4200, changeanim]
type = changeanim
triggerall = anim = 4201 && animelemtime(8) >= 0
trigger1 = enemy, pos y <= 0
value = 4202


[State 650, 2]
type = Explod
triggerall = anim = 4202
trigger1 = animelemtime(2) = 0
anim = 3600
pos = -60,0
postype = p2
ignorehitpause = 1
persistent = 0
sprpriority = 8
ownpal = 1

[state 4001, hitadd]
type = hitadd
triggerall = anim = 4202
trigger1 = animelemtime(2) = 0
value = 1

[state 4051, envshake]
type = envshake
triggerall = anim = 4202
trigger1 = animelemtime(2) = 0
time = 20
freq = 70
ampl = 6

[state 4150, kick woosh]
type = PlaySnd
triggerall = anim = 4202
trigger1 = animelemtime(2) = 0
value = 0, 5

[State 4150, kick sound]
type = PlaySnd
triggerall = anim = 4202
trigger1 = animelemtime(2) = 0
value = 4000, 6

[State 4150, kick sound]
type = PlaySnd
triggerall = anim = 4202
trigger1 = animelemtime(2) = 0
value = 4100, 3

[state 4201, playsnd]
type = playsnd
triggerall = anim = 4202
trigger1 = animelemtime(2) = 0
value = 4201,1

[state 4200, velset]
type = velset
triggerall = anim = 4202
trigger1 = animelemtime(2) = 20
y = .1


[state 4200, changestate]
type = changestate
triggerall = anim = 4202
trigger1 = !animtime
value = 4201
;--------------------------------------------
;Big Bang Attack Fire
[Statedef 4201]
type = S 
movetype = A
physics = N
anim = 4203
sprpriority = 1
velset = 0,0

[state 4200, posset]
type = posset
trigger1 = !time
y  = 0

[state 4200, posadd]
type = posadd
trigger1 = !time
x = -30

[State 4150, kick sound]
type = PlaySnd
trigger1 = enemy, pos y >= 0 && enemy, vel y > 0
trigger1 = time > 30 && time < 60
value = 4100, 4
persistent = 0


[state 2001, Ground Smash FX]
type = explod
trigger1 = enemy, pos y >= 0 && enemy, vel y > 0
trigger1 = time > 30 && time < 60
anim = 3500
id = 3500
pos = 0,0
postype = P2
sprpriority = -3
ownpal = 1
removetime = -2
ignorehitpause = 0
scale = 1,1


[State 250, 1]
type = PlaySnd
triggerall = anim = 4203
trigger1 = animelemtime(2) = 0
value = 2302, 0

[state 4000, timeover]
type = assertspecial
trigger1 = time < 430
flag = timerfreeze
flag2 = nobardisplay



[state 4200, explod]
type = explod
triggerall = anim = 4203
trigger1 = animelemtime(6) = 0
anim = 4204
id = 4204
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removetime = -2
persistent  = 0

[state 4201, Bastard!]
type = playsnd
triggerall = anim = 4203
trigger1 = animelemtime(6) = 0
value = 4200,0+random%2
channel = 0

[state 4200, explod]
type = explod
triggerall = anim = 4203
trigger1 = animelemtime(6) = 0
anim = 4215
id = 4215
postype = p1
pos = 0,0
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -2
persistent  = 0


[state 4201, Charge sound]
type = playsnd
triggerall = anim = 4203
trigger1 = animelemtime(6) = 0
value = 4200,4


[state 4201, envshake]
type = envshake
triggerall = anim = 4203
trigger1 = animelemtime(6) = 0
ampl = 1
freq = 60
time = 74

[state 4201, Fire sound]
type = playsnd
trigger1 = time = 268
value = 4200,6

[state 4201, envshake]
type = envshake
triggerall = anim = 4203
triggerall = time%4 = 0
triggerall = anim = 4203
trigger1 = animelemtime(7) >= 0 && time < 290
ampl = ceil((time-200)/5)
freq = 60
time = 4

[state 4201, envshake]
type = envshake
triggerall = anim = 4203
trigger1 = time = 290
ampl = ceil((time-200)/5)
freq = 60
time = 30


[state 4201, Big Bang Attack!]
type = playsnd
triggerall = anim = 4203
trigger1 = animelemtime(8) = 0
value = 4200,2+random%2
channel = 0

[state 4200, explod]
type = explod
triggerall = anim = 4203
trigger1 = animelemtime(8) = 10
anim = 4210
id = 4210
postype = p1
pos = 0,0
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -2
persistent  = 0

[state 4201, Impact sound]
type = playsnd
trigger1 = time = 280
value = 4200,5

[state 4001, hitadd]
type = hitadd
trigger1 = time = 280
value = 1

[state 4001, targetlifeadd]
type = targetlifeadd
trigger1 = time = 280
value = -ceil(ifElse(fvar(11) * 80 < 50, 50, fvar(11) * 80))
kill = 0

[state 4200, explod]
type = explod
trigger1 = time = 280
anim = 4205
id = 4205
postype = p2
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -2
persistent  = 0

[state 4201, modifyexplod]
type = modifyexplod
trigger1 = time = 283
sprpriority = 6
id = 4205

[state 4201, assertspecial]
type = assertspecial
trigger1 = time > 286 && time <= 389
flag = noFG
flag2 = noBG

[state 4201, palfx]
type = palfx
trigger1 = time > 286 && time < 389
mul = 0,0,0
time = 1


[state 4200, explod]
type = explod
trigger1 = time = 289
anim = 4206
id = 4206
postype = p1
pos = 0,0
scale = 10,10
ownpal = 1
sprpriority = -1
bindtime = -1
removetime = -2
persistent  = 0

[state 4200, explod]
type = explod
trigger1 = time = 290
anim = 4207
id = 4207
postype = left
pos = 40,240
ownpal = 1
sprpriority = 7
bindtime = -1
removetime = -2
persistent  = 0

[state 4200, explod]
type = explod
trigger1 = time = 290
anim = 4207
id = 4207
postype = right
pos = -40,240
ownpal = 1
sprpriority = 7
facing = -1
bindtime = -1
removetime = -2
persistent  = 0


[state 4200, white transparent foreground]
type = explod
trigger1 = time = 290
anim = 4216
id = 4216
postype = p1
pos = 0,0
scale = 10,10
ownpal = 1
sprpriority = 10
bindtime = -1
removetime = -2
persistent  = 0

[state 4201, trans]
type = modifyexplod
trigger1 = time >= 290 && time <= 389
id = 4216
trans = addalpha
alpha = (time-290)*4,256-((time-290)*4)


[state 4200, kill circle]
type = null
triggerall = enemy, alive = 0
trigger1 = time = 370
anim = 4208
id = 4208
postype = p2
pos = 0,0
scale = 1,1
ownpal = 1
sprpriority = 8
bindtime = -1
removetime = -2
persistent  = 0


[state 4001, targetlifeadd]
type = targetlifeadd
trigger1 = time = 290
value = -ceil(ifElse(fvar(11) * 220 < 110, 110, fvar(11) * 220))


[state 4201, modifyexplod]
type = modifyexplod
trigger1 = time = 389
ontop = 1
id = 4206

[state 4201, changeanim]
type = changeanim
triggerall = enemy, alive
trigger1 = time = 389
value = 4209

[state 4201, changeanim]
type = changeanim
triggerall = enemy, alive = 0
trigger1 = time = 389
value = 4214

[state 4200, smoke]
type = explod
triggerall = time%8 = 0
trigger1 = time > 389 && time < 590
anim = 4211
id = 4211
postype = p1
random = 30,14
pos = 0,0
scale = 1,1
ownpal = 1
sprpriority = 2
bindtime = -1
removetime = -2

[State 0, RemapPal]
type = RemapPal
trigger1 = time = 400
source = 1,1
dest = 1,var(58)

[state 4000, timeover]
type = assertspecial
triggerall = enemy, alive = 0
trigger1 = time >= 290
flag = nomusic
flag2 = noFG

[state 3410, BG - Ground]
type = Explod
triggerall = enemy, alive = 0
trigger1 = time = 371
anim = 4213
scale = 1,1
pos = 0,0
postype = Left
sprpriority = -5
ownpal = 1
removetime = -1
supermovetime = 99999
supermove = 1
Pausemovetime = 99999

[state 3410, BG - Sky]
type = Explod
triggerall = enemy, alive = 0
trigger1 = time = 371
anim = 4212
scale = 1,1
pos = 0,0
postype = Left
sprpriority = -5
ownpal = 1
removetime = -1
supermovetime = 99999
supermove = 1
Pausemovetime = 99999

[state 4201, Special KO]
type = varset
triggerall = enemy, alive = 0
trigger1 = time = 371
var(49) = 2


[State 3410, PlaySND];Sound from Majin Vegeta Aftermath
type		= PlaySND
triggerall = enemy, alive = 0
trigger1 = time = 520
value		= 4201, 0
volumescale	= 175

	
[state 4201, changestate]
type = null
triggerall = enemy, alive = 0
trigger1 = time = 3701
value = 4202


[State 0, RemoveExplod]  ;Piccolo's clones
type = RemoveExplod
trigger1 = anim = 4209
id = 991901
persistent = 0

[state 4201, changestate]
type = changestate
triggerall = anim = 4209
trigger1 = !animtime
value = 0
ctrl = 1

[state 4201, changestate]
type = changestate
triggerall = anim = 4214
trigger1 = animelemtime(5) = 0
value = 0
ctrl = 1
;--------------------------------------------
;Special WINPOSE - Big Bang Attack 
[Statedef 4202]
type = S 
movetype = A
physics = N
sprpriority = 1
velset = 0,0

[state 3101, assertspecial]
type = assertspecial
trigger1 = 1
flag = nomusic
flag2 = noFG

[state 181, 1]
type = assertspecial
trigger1 = time < 150
flag = roundnotover

;-------------------------------------------------
;Stomped
[statedef 4250]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = 7
velset = 0,0

[state 4051, changeanim]
type = changeanim
triggerall = anim = 5051
trigger1 = animtime = -1
value = anim
elem = animelemno(0)

[state 4052, posset]
type = posset
trigger1 = time < 120
x = (enemy, pos X)

[state 4052, assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow


[state 4052, velset]
type = velset
trigger1 = time = 140
y = 40

[state 4052, velset]
type = velset
trigger1 = enemy, anim = 4201
trigger1 = enemy, animelemtime(3) = 40
y = -20


[state 4250, velset]
type = posset
trigger1 = pos y <= -20 && vel y <= -20
y = -20

[state 4250, velset]
type = velset
trigger1 = pos y <= -20 && vel y <= -20
y = 0

[state 4150, hit by elbow]
type = changeanim2
trigger1 = enemy, anim = 4202 && enemy, animelemtime(2) = 0
value = 651

[state 4150, angledraw]
type = angledraw
trigger1 = enemy, anim = 4202 && enemy, animelemtime(2) = 0
trigger2 = anim = 651
value = 90


[state 4150, posset]
type = posadd
trigger1 = enemy, anim = 4202 && enemy, animelemtime(2) = 0
x = 57
y = -50

[state 4250, velset]
type = velset
triggerall = pos y <= -20
trigger1 = enemy, anim = 4202 &&  enemy, animelemtime(2) = 20
y = 40

[state 4001, lifeadd]
type = lifeadd
trigger1 = enemy, anim = 4202 &&  enemy, animelemtime(2) = 20
value = -ceil(ifElse(enemy,fvar(11) * 80 < 50, 50, enemy,fvar(11) * 80))
kill = 0

[state 4250, posset]
type = posset
trigger1 = enemy, anim = 4203 && enemy, animelemtime(1) = 0
y = -2000

[state 4150, posset]
type = posadd
trigger1 = enemy, anim = 4203 && enemy, animelemtime(1) = 0
x = -57

[state 4250, changeanim]
type = changeanim
trigger1 = enemy, anim = 4203 && enemy, animelemtime(1) = 0
value = 5061


[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0

[state 4250, changestate]
type = changestate
triggerall = enemy, anim = 4203
trigger1 = pos y >= 0 && vel y > 0
value = 4251

[Statedef 4251]
type = L
movetype = H
physics = N
velset = 0,0

[state 4251, posset]
type = posset
trigger1 = !time
y = 0

[state 4251, changeanim2]
type = changeanim2
trigger1 = !time
value = 4251

[state 4251, envshake]
type = envshake
trigger1 = !time
ampl = 8
freq = 60
time = 80

[State 0, ChangeState]
type = ChangeState
trigger1 = enemy, time = 280
value = 4252
;---------------------------------------------
;Hit by Blast
[Statedef 4252]
type    = L
movetype= H
physics = N
sprpriority = 5

[state 4254, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 4254, changeanim2]
type = changeanim2
trigger1 = !time
value = 4250

[state 4253, palfx]
type = palfx
trigger1 = enemy, time >= 269 && enemy, time < 286
add = (enemy,time-268)*5,(enemy,time-268)*5,(enemy,time-268)*5
time = 1

[state 4253, palfx]
type = palfx
trigger1 = enemy, time >= 286 && enemy, time < 389
mul = 0,0,0
time = 1

[state 4253, velset]
type = posadd
triggerall = anim = 4250
trigger1 = animelemtime(2) = 0
y = -60

[state 4253, velset]
type = velset
triggerall = anim = 4250
trigger1 = animelemtime(2) = 0
y = -.1

[state 4253, posset]
type = posset
trigger1 = enemy, time = 389
y = 0

[state 4253, velset]
type = velset
trigger1 = !time
y = 0

[State 49999, 1]
type = LifeSet
triggerall = !alive
trigger1 = enemy,time = 390
value = 0

[State 49999, 1]
type = PosSet
triggerall = !alive
trigger1 = enemy,time = 390
y = 9000

[State 49999, 5]
type = ChangeAnim2
triggerall = anim != 15999
triggerall = !alive
trigger1 = enemy,time = 390
value = 15999

[State 182, 1]
type = screenbound
triggerall = !alive
trigger1 = enemy,time >= 390
movecamera = 0,0
value = 1

[State 49999, 1]
type = PosSet
triggerall = !alive
trigger1 = enemy,time = 390
y = 9000

[State 49999, 5]
type = ChangeAnim2
triggerall = !alive
trigger1 = enemy,time = 390
value = 15999


[state 4254, changestate]
type = changestate
triggerall = !alive
trigger1 = enemy,time = 390
value = 5150


[state 4253, posset]
type = posset
trigger1 = enemy, time = 390
y = -3000

[state 4254, changeanim]
type = changeanim
trigger1 = enemy, time = 390
value = 5061

[state 4253, velset]
type = velset
trigger1 = enemy,time > 390
y = 20

[state 4253, velset]
type = velset
trigger1 = enemy, time > 460
x = -2


[state 4201, trans]
type = null
trigger1 = enemy,time >= 289 && enemy, time <= 389
trans = addalpha
alpha = 256-((enemy,time-289)*4),(enemy,time-289)*4


[state 4254, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100


[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode = Simul
trigger1 = enemyNear,TeamMode = Simul
value = 5100
;--------------------------------------------
;Finisher 3 - Falling Empire 
[Statedef 4300]
type = S 
movetype = A
physics = N
anim = 4300
juggle = 0
ctrl = 0
sprpriority = 2
velset = 5,0

[state 4100, centering]
type = velmul
trigger1 = Vel X != 0
x = .90

[state 4100, velset]
type = velset
trigger1 = Vel X < .2
x = 0

[state 4000, timeover]
type = assertspecial
trigger1 = time <= 960
flag = timerfreeze
flag2 = nobardisplay

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time <= 960
flag = noBG
flag2 = noFG

[State 1000, shake]
type = EnvShake
triggerall = anim = 4300
trigger1 = !(time%4)
time=4
freq=80
ampl=2+0.02*time

[State 4500, 1];power up SFX
type = PlaySnd
trigger1 = !time
value = 193,1
volume = 500

[State 4500, 1];power up SFX 2
type = PlaySnd
trigger1 = !time
value = 4000,0
volume = 500


[State 4500, 1];fly sfx
type = PlaySnd
triggerall = anim = 4300
trigger1 = animelem = 3
value = 2700,2
volume = 500

[State 4500, 1];fly sfx 2
type = PlaySnd
triggerall = anim = 4300
trigger1 = animelem = 3
value = 4000,1
volume = 500

[state 17100, aura]
type = explod
trigger1 = !time
anim = 4070
id = 4070
pos = 8,33
postype = P1
sprpriority = -1
ownpal = 0
supermovetime = -1
removetime = 64
persistent = 0
bindtime = -1

[state 17100, aura]
type = helper
triggerall = anim = 4300
trigger1 = animelemtime(3) = 0
stateno = 4071
id = 4071
pos = -3,-68
postype = P1
sprpriority = -1
ownpal = 0
supermovetime = 9999
persistent = 0

[state 4001, Speedlines]
type = helper
triggerall = anim = 4300
trigger1 = animelemtime(3) = 0
stateno = 19901
id = 19901
pos = 0,0
postype = back
sprpriority = -27
scale = 1,1
ownpal = 1



[state 4002, velset]
type = velset
triggerall = anim = 4300
triggerall = animelem = 3
trigger1 = pos y > -72
y = -9

[state 4002, velset]
type = velset
triggerall = anim = 4300
trigger1 = pos y = -72
y = 0

[state 4200, changeanim]
type = changeanim
triggerall = anim = 4300
trigger1 = !animtime
value = 4301

;-------------Transformation------------------------------


[state 4500, assertspecial]
type = assertspecial
trigger1 = time >= 150
flag = nomusic

[State 4500, 1];transform theme
type = PlaySnd
trigger1 = anim = 4301
trigger1 = animelemtime(1) = 0
value = 3102,6
channel = 18


[State 0, RemapPal]
type = RemapPal
trigger1 = AnimElemTime(1)=0
trigger1 = anim = 4301
trigger1 = var(58)
source = 3,1
dest = 3,Var(58)

[State 1900, Spinning Aura]
type = Explod
triggerall = anim = 4301
trigger1 = animelemtime(1) = 0
id = 4306
anim = 4306
pos = 5,10
sprpriority = 4
postype = P1
ownpal = 1
removetime = -2
ignorehitpause = 1
persistent  = 0

[state 4300, end it]
type = playsnd
triggerall = anim = 4301
trigger1 = animelemtime(1) = 0
value = 4300,2+random%2
channel = 0

[state 4300, blue2 transform snd]
type = playsnd
triggerall = anim = 4301
trigger1 = animelemtime(7) = 2
value = 3102,0

[state 4300, black vegeta]
type = palfx
triggerall = anim = 4301
trigger1 = animelemtime(7) = 1
add = -255,-255,-255
time = 11


[state 4200, white screen]
type = explod
triggerall = animelemtime(7) = 2
trigger1 = anim = 4301
anim = 4206
id = 4206
postype = p1
pos = 0,0
scale = 10,10
ownpal = 1
sprpriority = -1
bindtime = -1
removetime = 11
persistent  = 0

[state 4200, black lines]
type = explod
triggerall = animelemtime(7) = 6
trigger1 = anim = 4301
anim = 4304
id = 4304
postype = left
pos = 165,240
scale = 1,1
ownpal = 1
sprpriority = 6
bindtime = -1
removetime = -2
persistent  = 0

[state 4300, white vegeta]
type = palfx
triggerall = anim = 4301
trigger1 = animelemtime(7) = 12
add = 255,255,255
time = 7

[state 4200, white lines]
type = explod
triggerall = animelemtime(7) = 13
trigger1 = anim = 4301
anim = 4305
id = 4305
postype = left
pos = 165,240
scale = 1,1
ownpal = 1
sprpriority = 6
bindtime = -1
removetime = -2
persistent  = 0

[state 4300, blue vegeta]
type = null
triggerall = anim = 4301
trigger1 = animelemtime(8) = 1
add = 0,0,256
mul = 0,0,256
time = 4

[State 1000, shake]
type = EnvShake
trigger1 = animelemtime(10) >= 0
trigger1 = anim = 4301
trigger1 = !(time%4)
time=4
freq=80
ampl=3


[State 0, RemapPal]
type = RemapPal
trigger1 = animelemtime(10) = 0
trigger1 = anim = 4301
source = 3,1
dest = 3,1



[State 0, Switch to Evolution Palette]
type = RemapPal
trigger1 = animelemtime(10) = 0
trigger1 = anim = 4301
source = 1,1
dest = 3,Var(58)

[State 1900, Evolution Aura]
type = Explod
trigger1 = animelemtime(10) = 0
trigger1 = anim = 4301
id = 4303
anim = 4303
pos = 0,0
sprpriority = 0
postype = P1
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 1
persistent  = 0

;----------------------Falling Punches-------------------------------
[state 4200, start punching]
type = changeanim
triggerall = anim = 4301
trigger1 = !animtime
value = 4302

[state 4350, waterfall sound]
type = playsnd
trigger1 = animelemtime(1) = 0 
trigger1 = anim = 4302
value = 4300,4

[state 4350, shift downwards]
type = velset
trigger1 = animelemtime(1) = 0 
trigger1 = anim = 4302
y = .3

[state 4001, Upwards speedlines]
type = helper
trigger1 = animelemtime(1) = 0 
trigger1 = anim = 4302
stateno = 19902
id = 19902
pos = 0,0
postype = back
sprpriority = -27
scale = 1,1
ownpal = 1
persistent = 0

[state 4300, remove evolution aura]
type = removeexplod
trigger1 = animelemtime(2) = 0
trigger1 = anim = 4302
id = 4303

[State 1900, Punch Aura]
type = Explod
trigger1 = animelemtime(2) = 0
trigger1 = anim = 4302
id = 4307
anim = 4307
pos = 0,0
sprpriority = 0
postype = P1
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 1
persistent  = 0

[state 4350, punch counter]
type = hitadd
trigger1 = animelemtime(3) = 0 || animelemtime(6) = 0
trigger1 = anim = 4302
value = 2

[state 4300, punch damage]
type = targetlifeadd
trigger1 = animelemtime(3) = 0 || animelemtime(6) = 0
trigger1 = anim = 4302
value = -ceil(ifElse(fvar(11) * 7 < 4, 4, fvar(11) * 7))
kill = 0


[State 650, punch hit spark]
type = Explod
trigger1 = animelemtime(3) = 0 || animelemtime(6) = 0
trigger1 = anim = 4302
anim = 7020
pos = 0,0
postype = p2
ignorehitpause = 1
sprpriority = 8
ownpal = 1

[state 4350, punch sound]
type = playsnd
trigger1 = animelemtime(3) = 0 || animelemtime(6) = 0
trigger1 = anim = 4302
value = 4300,5


[state 4350, punch shake]
type = envshake
triggerall = time < 460
trigger1 = animelemtime(3) = 0 || animelemtime(6) = 0
trigger1 = anim = 4302
time = 6
freq = 60
ampl = 6

[state 4350, stop]
type = velset
trigger1 = time = 460 
y = 0

[state 17100, Slam effect]
type=explod
trigger1 = time = 460 
anim=17100
id=17100
pos= 0,0
postype=P2
sprpriority=-3
ownpal=1
scale = 2,2
supermovetime=-1

[State 1000, shake]
type = EnvShake
trigger1 = time = 460 
time=50
freq=80
ampl=8

[state 1510, slam sound]
type = playsnd
trigger1 = time = 460 
value = 1500,3


[state 4350, posadd]
type = posadd
trigger1 = time = 520
y = 20

[state 17100, Harder Slam effect]
type=explod
trigger1 = time = 520 
anim=956
id=956
pos= 0,0
postype=P2
sprpriority=-3
ownpal=1
scale = 2,2
supermovetime=-1

[State 1000, shake]
type = EnvShake
trigger1 = time = 520 
time=70
freq=80
ampl=12

[State 250, harder slam sound]
type = PlaySnd
trigger1 = time = 520 
value = 4000, 5

[state 4350, posadd]
type = posadd
trigger1 = time = 600
y = 20

[State 0, Crater FX]
type = explod
trigger1 = time = 600
anim = 8451
id = 8451
pos = 0,-5
postype = p2
supermovetime = 9999
pausemovetime = 9999
supermove = 1
removetime = -2
sprpriority = 8
ownpal = 0
bindtime = -1
scale = 2,2
persistent = 0

[State 1000, shake]
type = EnvShake
trigger1 = time = 600 
time=90
freq=80
ampl=16

[State 4150, large slam sound]
type = PlaySnd
trigger1 = time = 600
value = 4100, 4

;-----------------Final Punch-------------------

[state 4300, remove punchy aura]
type = removeexplod
trigger1 = time = 690
id = 4307

[State 1900, Big Face Sprite]
type = Explod
trigger1 = time = 690
trigger1 = facing = 1
id = 4308
anim = 4308
pos = 160,240
sprpriority = 0
ontop = 1
postype = Left
ownpal = 1
bindtime = -1
removetime = -2
ignorehitpause = 1
persistent  = 0

[State 1900, Big Face Sprite]
type = Explod
trigger1 = time = 690
trigger1 = facing = -1
id = 4315
anim = 4315
pos = 160,240
sprpriority = 0
ontop = 1
postype = Left
ownpal = 1
bindtime = -1
removetime = -2
ignorehitpause = 1
persistent  = 0


[state 4200, black screen]
type = explod
trigger1 = time = 690
anim = 4310
id = 4310
postype = p1
pos = 0,0
scale = 10,10
ownpal = 1
sprpriority = 9
bindtime = -1
removetime = -2
persistent  = 0

[state 4300, changeanim]
type = changeanim
trigger1 = time = 690
value = 4309

[state 4350, zoom out sound]
type = playsnd
trigger1 = time = 702
value = 4300,6


[state 4300, ehhaaaaaaaaaaaaaaaaaa!]
type = playsnd
trigger1 = time = 730
value = 8,10
channel = 0


[state 4350,final punch sound]
type = playsnd
trigger1 = animelemtime(2) = 0
trigger1 = anim = 4309
value = 4300,6

;Thunder Strike hit sound
[State 901, thunder sound]
type = Playsnd
trigger1 = animelemtime(2) = 0
trigger1 = anim = 4309
value = 4311,0
ignorehitpause = 1

[state 1215, Thunder Strike FX]
type = explod
trigger1 = animelemtime(2) = 0
trigger1 = anim = 4309
anim = 4311
id = 4311
pos = 34,10
postype = P1
sprpriority = 5
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1


[State 1900, lightning ground burst]
type = null
trigger1 = animelemtime(3) = 0
trigger1 = anim = 4309
anim = 4312
Postype = P2
pos = 0,25
sprpriority = 8
bindtime = 1
ownpal = 1
ignorehitpause = 1
removetime = -2
persistent = 0


[State 1000, shake]
type = EnvShake
trigger1 = animelemtime(3) = 0
trigger1 = anim = 4309
time=90
freq=80
ampl=16

[state 4300, black vegeta]
type = palfx
trigger1 = time = 829
add = -255,-255,-255
mul = 0,0,0
time = 6

[state 4350,final punch sound]
type = playsnd
trigger1 = time = 830
value = 4300,8

[state 4200, white screen]
type = explod
trigger1 = time = 830
anim = 4206
id = 4206
postype = p1
pos = 0,0
scale = 10,10
ownpal = 1
sprpriority = -1
bindtime = -1
removetime = 6
persistent  = 0

[State 1900, lightning ground burst]
type = explod
trigger1 = time = 830
anim = 4317
Postype = P1
pos = 0,0
sprpriority = 8
bindtime = 1
ownpal = 1
ignorehitpause = 1
removetime = -2
persistent = 0

[state 4300, white vegeta]
type = palfx
trigger1 = time = 835
add = 255,255,255
time = 6

[state 4300, black vegeta]
type = palfx
trigger1 = time = 841
add = -255,-255,-255
mul = 0,0,0
time = 6

[state 4200, white screen]
type = explod
trigger1 = time = 842
anim = 4206
id = 4206
postype = p1
pos = 0,0
scale = 10,10
ownpal = 1
sprpriority = -1
bindtime = -1
removetime = 6
persistent  = 0


[state 4300, white vegeta]
type = palfx
trigger1 = time = 848
add = 255,255,255
time = 6

[state 4200, white screen]
type = explod
trigger1 = time = 854
anim = 4318
id = 4318
postype = p1
pos = 0,0
scale = 10,10
ownpal = 1
ontop = 1
bindtime = -1
removetime = -2
persistent  = 0

[State 1900, Big Face Sprite]
type = Explod
trigger1 = time = 854
id = 4316
anim = 4316
pos = 160,260
sprpriority = 0
ontop = 1
postype = Left
ownpal = 1
bindtime = -1
removetime = 162
ignorehitpause = 1
scale = .8,.8
persistent  = 0

[state 4300, modifyexplod]
type = modifyexplod
triggerall = NumExplod(4316)
trigger1 = time > 934
id = 4316
trans = addalpha
alpha = 255-((time-935)*11),(time-935)*11

[State 1900, white circle]
type = null
trigger1 = time = 860
anim = 90203
id = 90203
Postype = P2
pos = -10,-10
sprpriority = 9
bindtime = -1
ownpal = 1
ignorehitpause = 1
removetime = -2
scale = .005,.005

[State 1900, white circle]
type = null
trigger1 = numexplod(90203)
scale = .14*(time-860),.14*(time-860)
ID = 90203

[State 3078, Debris Generator]
type = null
trigger1 = time = 860
helpertype = normal
name = "Debris Generator"
ID = 66855
stateno = 66855
pos = -10,-54
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 0
pausemovetime = 0

[state 4300, final punch damage]
type = targetlifeadd
trigger1 = time = 880
value = -ceil(ifElse(fvar(11) * 140 < 60, 60, fvar(11) * 140))

[state 4300, remove Crater]
type = removeexplod
trigger1 = time = 930
id = 8451


[state 4300, posset]
type = posset
trigger1 = time = 930
y = 0

[state 4300, posset]
type = posadd
trigger1 = time = 930
x = -70

[state 4300, recovery]
type = changeanim
trigger1 = time = 960
value = 4313

;-------------End Pose-------------------------------
[state 4300, waterfall]
type = playsnd
trigger1 = time = 951
value = 3000,3+random%2
channel = 0


[state 4300, waterfall face]
type = explod
trigger1 = time = 951
anim = 4314
id = 4314
pos = 0,0
postype = P1
removetime = -2
sprpriority = 3
ownpal = 1
bindtime = -1
ignorehitpause = 1

[state 4300, remove waterfall face]
type = removeexplod
trigger1 = time = 1062
id = 4314


[State 200, hit ground sound]
type = PlaySnd
trigger1 = animelemtime(5)=0
trigger1 = anim = 4313
value = 5100,0
channel = 1

[state 17100, Landing Effect]
type = explod
trigger1 = animelemtime(5)=0
trigger1 = anim = 4313
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 1000, shake]
type = EnvShake
trigger1 = animelemtime(5)=0
trigger1 = anim = 4313
time=32
freq=60
ampl=4

[state 4300, varset]
type = varset
triggerall = anim = 4313
trigger1 = !animtime && Winko
var(51) = 2

[state 4300, varset]
type = varset
triggerall = anim = 4313
trigger1 = !animtime && Winko
var(25) = 0

[state 4300, end]
type = changestate
triggerall = anim = 4313
trigger1 = !animtime
value = 0
ctrl = 1
;-------------------------------------------------
;Pummeled
[statedef 4350]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = 1
velset = 0,0

[state 4051, changeanim]
type = changeanim
triggerall = anim = 5051
trigger1 = animtime = -1
value = anim
elem = animelemno(0)

[state 4052, posset]
type = posset
trigger1 = time < 120
x = (enemy, pos X)

[state 4052, velset]
type = velset
trigger1 = time = 140
y = 40

[state 4052, velset]
type = velset
trigger1 = enemy, anim = 4301
trigger1 = enemy, animelemtime(12) = 0
y = -30.5

[state 4350, getting punched]
type = changeanim2
trigger1 = enemy, animelemtime(2) = 0
trigger1 = enemy, anim = 4302
value = 4350

[state 4350, Align to punches]
type = posadd
trigger1 = enemy, animelemtime(2) = 0
trigger1 = enemy, anim = 4302
x = -25
y = -40

[state 4052, velset]
type = velset
trigger1 = enemy, animelemtime(2) = 0
trigger1 = enemy, anim = 4302
y = .3

[state 4350, stop]
type = velset
trigger1 = time = 459
y = 0

[state 4350, posadd]
type = posadd
trigger1 = time = 519
y = 20

[state 4350, posadd]
type = posadd
trigger1 = time = 599
y = 20

[state 4000, camera]
type = screenBound
trigger1 = 1
value = 0

[state 4300. assertspecial]
type = changeanim2
trigger1 = time = 690
value = 4351

[state 4300, posset]
type = posset
trigger1 = time = 930
y = 0

[state 4300, recovery]
type = changeanim2
trigger1 = time = 960
value = 4352

[state 4300, black]
type = palfx
trigger1 = enemy,time = 830
add = -255,-255,-255
mul = 0,0,0
time = 6

[state 4300, white]
type = palfx
trigger1 = enemy,time = 836
add = 255,255,255
time = 6

[state 4300, black]
type = palfx
trigger1 = enemy,time = 842
add = -255,-255,-255
mul = 0,0,0
time = 6

[state 4300, white]
type = palfx
trigger1 = time = 848
add = 255,255,255
time = 6

[state 4300, end]
type = selfstate
trigger1 = enemy, stateno != 4300
trigger2 = time >= 1200 ;failsafe
value = ifelse(alive,5120,5150)
;--------------------------------------------
;Beerus Appearance
[Statedef 4400]
type = S 
movetype = A
physics = S
velset = 0,0
anim = 4400
sprpriority = 2
ctrl = 0
poweradd = -3000

[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1

[state 4400, posset]
type = posset
trigger1 = !time
y = 0

;----Common Superpause Effects ------------
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [20,71]
flag = noBG
flag2 = noFG

[State 3000, superpause]
type = superpause
trigger1 = time= 20
time = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s703,1
darken = 0
movetime = 40
;-------------------------------------------------------------

[State 0, Surprise Line]
type = Explod
trigger1 = time = 20
anim = 44000
id = 44000
pos = 0,100
postype = back
supermovetime = 9999
pausemovetime = 9999
removetime = -1
sprpriority = -9
scale = 15,.5
vel = 45,0
ownpal = 1
persistent = 0

[state 4400, muteki]
type = nothitby
trigger1 = time > 10 && animelemtime(15) < 0
value = SCA

[State 810, hit]
type = hitdef
trigger1 = animelemtime(14) = 0
attr = S,HT
hitflag = M-
priority = 1,Miss
sparkno = -1
p1facing = 1
p2facing = 1
guard.dist = 0
fall = 0
fall.recover = 0
id = 4450



[State 1050, targetstate]
type = targetstate
triggerall = Numtarget(4450)
trigger1 = movehit 
trigger1 = !(target,ishelper)
value = 4450
ID = 4450
ignorehitpause = 1
persistent = 0

[state 4400, movehit]
type = changestate
trigger1 =  movehit = 1
trigger1 = numtarget
trigger1 = !(target, ishelper)
ignorehitpause = 1
value = 4401


;----------Miss-----------------------------------
[state 4401, beerus aura]
type = explod
trigger1 = animelemtime(16) = 0
anim = 4405
id = 4405
pos = 0,-60
postype = front
facing = -1
vel = -20,0
sprpriority = -1
removetime = 50

[state 4401, aura sound]
type = playsnd
trigger1 = animelemtime(16) = 0
value = 2700,2

[state 4400, changestate]
type = changestate
trigger1 = !animtime
trigger1 = anim = 4400
value = 0 
ctrl = 1
;--------------------------------------------------------------
;Beerus Success
[Statedef 4401]
type = S
movetype = A
physics = S
anim = 4401

[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1

[state 4401, nopush]
type = playerpush
trigger1 = 1 
value = 0

[state 4401, muteki]
type = nothitby
trigger1 = 1
value = SCA

[state 4401, beerus]
type = explod
trigger1 = time = 10
anim = 4403
id = 4403
pos = -60,0
postype = p2
sprpriority = -1
removetime = 120

[state 803, playsnd]
type = playsnd
trigger1 = time = 10
value = 2302,0

[state 4401, sweat drop]
type = helper
trigger1 = time = 40
stateno = 44000
id = 44000
pos = 0,0
postype = p1
sprpriority = 3

[State 0, question mark]
type = Explod
trigger1 = Facing = 1
trigger1 = Time = 60
anim = 4407
ID = 2208
pos = 50,enemy,Const(Size.Head.Pos.Y)-30
postype = p2
removetime = 70
scale = 1,1
sprpriority = -6
facing = -1

[State 0, question mark]
type = Explod
trigger1 = Facing = -1
trigger1 = Time = 60
anim = 4406
ID = 2208
pos = 50,enemy,Const(Size.Head.Pos.Y)-30
postype = p2
removetime = 70
scale = 1,1
sprpriority = -6
facing = 1

[state 4401, white screen]
type = explod
trigger1 = time = 100
anim = 4402
id = 4402
pos = 0,0
postype = p1
bindtime = -1
scale = 10,10
ontop = 1
removetime = -2

[state 4401, beerus]
type = helper
trigger1 = time = 150
stateno = 44001
id = 44001
pos = -160,-380
postype = front
ownpal = 1



[state 4400, changestate]
type = changestate
trigger1 = time = 150
value = 4402
;--------------------------------------------------------
;Dance
[Statedef 4402]
type = S
movetype = A
physics = S
anim = 4412

[state 4402, p2dance check]
type = varset
trigger1 = NumHelper(44003)
var(50) = Helper(44003), var(50)

[state 4401, bingo song]
type = playsnd
trigger1 = time = 15
abspan = 0
value = 4401,1
channel = 18

[state 4401, No Music]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
ignorehitpause = 1


[state 4401, nopush]
type = playerpush
trigger1 = 1 
value = 0

[state 4402, assertspecial]
type = assertSpecial
trigger1 = 1
flag = nobardisplay

[State 0, Explod] ;Piccolo Compatibility
type = Explod
trigger1 = !time
anim = 5939
ID = 991901
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -1
removeongethit = 1

[state 4402, rhythm]
type = helper
trigger1 = !time
stateno = 44002
id = 44002
postype = front
pos = -200,0
facing = 1

[state 4402, rhythm]
type = helper
trigger1 = !time
stateno = 44003
id = 44003
postype = front
pos = -120,0
facing = -1

[state 4402, posset]
type = posset
trigger1 = !time 
x = 100*-facing

[state 44002, darken background]
type = bgpalfx
trigger1 = 1
add = -200,-200,-200
time = 1


[state 4402, cycling through dances]
type = changeanim
trigger1 = !animtime
trigger1 = anim != 4417
value = anim+1

[state 4402, Bingo!]
type = playsnd
trigger1 = animelemtime(3) = 0
trigger1 = anim = 4412
value = 4400,0+random%2
channel = 0

[state 4402, Earth is a fun place to be, oh!]
type = playsnd
trigger1 = animelemtime(1) = 0
trigger1 = anim = 4413
value = 4400,2+random%2
channel = 0


[state 4402, The food is tasty too, yum!]
type = playsnd
trigger1 = animelemtime(1) = 0
trigger1 = anim = 4414
value = 4400,5+random%2
channel = 0


[state 4402, Let's go play, oh!]
type = playsnd
trigger1 = animelemtime(4) = 0
trigger1 = anim = 4415
value = 4400,8+random%2
channel = 0

[state 4402, Let's be friends, oh!]
type = playsnd
trigger1 = animelemtime(1) = 0
trigger1 = anim = 4416
value = 4400,10+random%2
channel = 0

[state 4402, Funtime Bingo!]
type = playsnd
trigger1 = animelemtime(1) = 0
trigger1 = anim = 4417
value = 4400,14+random%2
channel = 0


[state 4402, It's time to play some bingo!]
type = playsnd
trigger1 = animelemtime(12) = 0
trigger1 = anim = 4417
value = 4400,16
channel = 0

[state 4400, changestate]
type = changestate
trigger1 = !animtime
trigger1 = anim = 4417
value = 4403 
;--------------------------------------------------------
;Success 
[Statedef 4403]
type = S
movetype = A
physics = N
anim = 4450

[State 0, Timer Freeze]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
flag2 = nomusic
ignorehitpause = 1

[state 4403, muteki]
type = nothitby
trigger1 = 1
value = SCA

[state 4401, nopush]
type = playerpush
trigger1 = 1 
value = 0

[state 4403, gyaaah]
type = playsnd
trigger1 = animelemtime(2) = 0
trigger1 = anim = 4450
value = 4450,1
channel = 0

[state 4403, velset]
type = velset
trigger1 = animelemtime(22) = 0
trigger1 = anim = 4450
x = 23
y = -2

[State 115, dash Sound]
type = PlaySnd
trigger1 = animelemtime(22) = 0
trigger1 = anim = 4450
value = 100,0

[state 4403, velmul]
type = velmul
trigger1 = animelemtime(22) >= 0 && animelemtime(26) < 0
trigger1 = anim = 4450
x = .86
y = .89

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 25
value = 0, 2
channel = 1


[State 200, 1]  
type = HitDef
triggerall = NumHelper(44002) && NumHelper(44003)
trigger1 = AnimElemTime(26)=0
attr = S, HA
;damage = 50, 0
damage = 250+floor(abs(Helper(44002),var(3) - Helper(44003), var(3)) / 2),5+floor(abs(Helper(44002), var(3) - Helper(44003),var(3))/6)
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 19,18 ;13,13
guard.pausetime = 19,18 ;13,13
sparkno = s3600
guard.sparkno = s7000
sparkxy = -25,-90
hitsound = -1
guardsound = S6,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 35
ground.velocity = -7
guard.velocity = -9
airguard.velocity = -2.5,-1.3
air.fall = 1
fall.recover = 0
air.type = High
air.velocity = -4,-4
air.hittime = 28
air.animtype = back
envshake.time = 16
envshake.freq = 80
envshake.ampl = 14
getpower = 0,0
givepower = 35,35
yaccel = 0.5

[state 44005, ]
type = playsnd
trigger1 = movehit = 1
value = 4401, 3
abspan = 0
ignorehitpause = 1
persistent = 0

[state 4452, targetstate]
type = targetstate
trigger1 = Numtarget
trigger1 = movehit
trigger1 = !(target, ishelper)
value = 4452
persistent = 0


[state 4403, velset]
type = velset
trigger1 = animelemtime(26) = 0
trigger1 = anim = 4450
y = -4

[state 4403, velmul]
type = velmul
trigger1 = animelemtime(26) >= 0 && animelemtime(28) < 0
trigger1 = anim = 4450
y = .93


[state 4403, veladd]
type = veladd
trigger1 = animelemtime(28) >= 0
trigger1 = anim = 4450
y = .35

;------Land----------------


[state 803, changeanim]
type = changeanim
trigger1 = pos Y >= 0 && Vel y > 0
trigger1 = anim = 4450
value = 48

[state 420, rise]
type = statetypeset
triggerall = statetype = A
trigger1 = pos y >= 0 && vel y > 0
physics = S
statetype = S

[state 52, Land FX]
type = helper
trigger1 = anim = 48 && animelemtime(1) = 1
name = "LandFX"

StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State -3, Landing Sound]
type = PlaySnd
trigger1 = anim = 48 && animelemtime(1) = 1
value = 40, 0

[state 751, posset]
type = posset
trigger1 = pos y > 0
y = 0

[state 751, velset]
type = velset
trigger1 = pos y >= 0 && vel y > 0
y = 0


[State 0, RemoveExplod]  ;Piccolo's clones
type = RemoveExplod
trigger1 = !animtime
trigger1 = anim = 48
id = 991901
persistent = 0

[state 4400, changestate]
type = changestate
trigger1 = !animtime
trigger1 = anim = 48
value = 0 
ctrl = 1
;--------------------------------------------------------
;Fail
[Statedef 4404]
type = S
movetype = A
physics = S
anim = 4450

[State 0, RemoveExplod]  ;Piccolo's clones
type = RemoveExplod
trigger1 = !time
id = 991901
persistent = 0

[state 4400, changestate]
type = changestate
trigger1 = time = 100
value = 0 
ctrl = 1
;--------------------------------------------------------
;Hit By Beerus
[Statedef 4450]
type = S
movetype = H
physics = N
anim = 0
sprpriority = 3
ctrl = 0
velset = 0,0

[state 4401, nopush]
type = playerpush
trigger1 = 1 
value = 0

[state 4450, nothitby]
type = nothitby
trigger1 = 1
value = SCA


[state 4450, changestate]
type = changestate
trigger1 = time = 150
value = 4451
;--------------------------------------------------------
;P2 Dance
[Statedef 4451]
type = S
movetype = H
physics = N
sprpriority = 3
ctrl = 0
velset = 0,0

[state 4451, muteki]
type = nothitby
trigger1 = !(enemy, stateno = 4403 && enemy, animelemtime(26) >= 0)
value = SCA

[state 4451, playerpush]
type = playerpush
trigger1 = 1
value = 0


[state 4451, posset]
type = posset
trigger1 = !time 
x = 100*-facing

[state 4451, neutral]
type = changeanim
trigger1 = !time
trigger1 = SelfAnimExist(9006)
value = ifelse(SelfAnimExist(9006),9006,0)
;-------------------------------------------------------

[state 4451, LP]
type = changeanim
triggerall = enemy, stateno = 4402
triggerall = !(enemy, anim = 4417 && enemy, animelemtime(12) >= 0)
triggerall = !((anim = 9000 || anim = 20) && animelemtime(1) < 8)
trigger1 = command = "x"  
trigger2 = enemynear, numprojid(44060)
value = ifelse(SelfAnimExist(9000),9000,20)

[state 4451, MP]
type = changeanim
triggerall = enemy, stateno = 4402
triggerall = !(enemy, anim = 4417 && enemy, animelemtime(12) >= 0)
triggerall = !((anim = 9001 || anim = 200) && animelemtime(1) < 8)
trigger1 = command = "y" 
trigger2 = enemynear, numprojid(44061)
value = ifelse(SelfAnimExist(9001),9001,200)

[state 4451, HP]
type = changeanim
triggerall = enemy, stateno = 4402 
triggerall = !(enemy, anim = 4417 && enemy, animelemtime(12) >= 0)
triggerall = !((anim = 9002 || anim = 5040) && animelemtime(1) < 8)
trigger1 = command = "z"  
trigger2 = enemynear, numprojid(44062)
value = ifelse(SelfAnimExist(9002),9002,5040)

[state 4451, LK]
type = changeanim
trigger1 = command = "a" 
trigger1 = enemy, stateno = 4402
trigger1 = !(enemy, anim = 4417 && enemy, animelemtime(12) >= 0)
trigger1 = !((anim = 9003 || anim = 21) && animelemtime(1) < 8)
trigger2 = enemynear, numprojid(44063)
value = ifelse(SelfAnimExist(9003),9003,21)

[state 4451, MK]
type = changeanim
trigger1 = command = "b" 
trigger1 = enemy, stateno = 4402
trigger1 = !(enemy, anim = 4417 && enemy, animelemtime(12) >= 0)
trigger1 = !((anim = 9004 || anim = 11) && animelemtime(1) < 8)
trigger2 = enemynear, numprojid(44064)
value = ifelse(SelfAnimExist(9004),9004,11)


[state 4451, HK]
type = changeanim
trigger1 = command = "c" 
trigger1 = enemy, stateno = 4402
trigger1 = !(enemy, anim = 4417 && enemy, animelemtime(12) >= 0)
trigger1 = !((anim = 9005 || anim = 100) && animelemtime(1) < 8)
trigger2 = enemynear, numprojid(44065)
value = ifelse(SelfAnimExist(9005),9005,100)

[state 4451, animtime end]
type = changeanim
trigger1 = !animtime
trigger1 = ifelse(SelfAnimExist(9006),anim != 9006,anim != 0)
value = ifelse(SelfAnimExist(9006),9006,0)


[state 4451, finish]
type = changeanim
trigger1 = enemy, anim = 4450 && enemy, animelemtime(2) = 0
trigger1 = SelfAnimExist(9007)
trigger2 = enemy, stateno != [4402,4404]
value = ifelse(SelfAnimExist(9007),9007,0)
persistent = 0

[state 4450, changestate]
type = selfstate
trigger1 = time = 1150
trigger2 = enemy, statetype = L
value = 0
ctrl = 1
;----------------------------
;Perfect Blasted Upwards 
[statedef 4452]
type = A
movetype = H
physics = N
anim = 5051
juggle = 15
ctrl = 0
velset = -.1,-20

[state 3451, playerpush]
type = playerpush
trigger1 = 1
value = 0

[state 3450, nothitby]
type = nothitby
trigger1 = vel y < 0
value = SCA

[state 3451, camera]
type = screenbound
trigger1 = 1
value = 0

[state 3451, changeanim]
type = changeanim
trigger1 = vel y > 0
trigger1 = anim = 5051
value = 5061

[state 3451, veladd]
type = veladd
trigger1 =  time >= 10
y = 1


[state 1060, changestate]
type = selfstate
triggerall = pos Y >= 0 && Vel Y > 0
trigger1 = enemy,var(49) = 0
trigger2 = TeamMode = Simul
trigger2 = enemyNear,TeamMode = Simul
trigger3 = alive
value = 5100

[state 1060, changestate]
type = changestate
triggerall = pos Y >= 0 && Vel Y > 0
triggerall = !alive
trigger1 = enemy,var(49) != 0
trigger1 = TeamMode != Simul
trigger1 = enemyNear,TeamMode != Simul
value = 5100
;---------------------------------------------------------
;Appearing Beerus
[Statedef 44000]
type = A
movetype = I
physics = N
anim = 4404
velset = 0,.5
sprpriority = 3


[state 44000, velmul]
type = velmul
trigger1 = 1
y = .94

[state 44000,  y stop]
type = velset
trigger1 = vel y < .1
y = 0

[state 44000, shadow]
type = assertspecial
trigger1 = 1
flag = noShadow


[state 44000, destroyself]
type = destroyself
trigger1 = root, stateno != 4401
;---------------------------------------------------------
;Floating Beerus
[Statedef 44001]
type = A
movetype = I
physics = N
anim = 4408
velset = 0,0
sprpriority = -27

[state 44001, idletime]
type = varadd
trigger1 = anim = 4408
var(1) = 1

[state 44001, velset]
type = velset
trigger1 = anim != 4430
y = .2*cos(time/56.0)

[state 44001, velmul]
type = velmul
trigger1 = anim = 4430
y = .99

[state 44001, changeanim]
type = changeanim
trigger1 = var(1)%240 = 0
trigger1 = anim = 4408
value = 4409+random%3

[state 44001, back to idle]
type = changeanim
trigger1 = !animtime
trigger1 = anim != 4408 && anim != 4430 && anim != 4429
value = 4408


[state 44001, success]
type = changeanim
trigger1 = root, animelemtime(25) = 0
trigger1 = root, anim = 4417
trigger1 = Helper(44002),var(3) > Helper(44003),var(3)
value = 4429

[state 44001, fail]
type = changeanim
trigger1 = root, animelemtime(12) = 0
trigger1 = root, anim = 4417
trigger1 = !(Helper(44002),var(3) > Helper(44003),var(3))
value = 4430

[state 4402, charge ball]
type = explod
trigger1 = animelemtime(2) = 0
trigger1 = anim = 4430
anim = 332407
id = 332407
postype = p1
pos = -54,276
sprpriority = -26
bindtime = -1
scale = .5,.5
ownpal = 1
removetime = 90

[state 4402, finger beam]
type = helper
trigger1 = animelemtime(2) = 90
trigger1 = anim = 4430
stateno = 44004
id = 44004
postype = p1
pos = -41,205
sprpriority = -26
size.xscale = .45
size.yscale = .5
ownpal = 1

[state 803,  charge sound]
type = playsnd
trigger1 = animelemtime(1) = 0
trigger1 = anim = 4430
value = 4430,1

[state 803, teleport sound]
type = playsnd
trigger1 = animelemtime(1) = 0
trigger1 = anim = 4429
trigger2 = animelemtime(3) = 0
trigger2 = anim = 4430
value = 2302,0


[state 44000, destroyself]
type = destroyself
trigger1 = !animtime
trigger1 = anim = 4429  || anim = 4430 
;---------------------------------------------------
;Beerus Beam
[Statedef 44004]
type = A
movetype = I
physics = N
anim = 332406
velset = 0,0
sprpriority = -26

[state 803, shoot sound]
type = playsnd
trigger1 = !time
value = 4430,2

[state 44003, angledraw]
type = angledraw
trigger1 = 1
value = -125

[state 4402, ground shockwave]
type = explod
trigger1 = animelemtime(3) = 0
anim = 4449
id = 4449
postype = back
pos = floor(pos x)+ifelse(facing = 1,80,0),230
sprpriority = -24
bindtime = -1
ownpal = 1
removetime = -2

[state 4402, hitbox]
type = helper
trigger1 = animelemtime(3) = 0
stateno = 44005
id = 44005
postype = back
pos = floor(pos x)+ifelse(facing = 1,80,-80),0
sprpriority = -24
ownpal = 1



[state 44000, destroyself]
type = destroyself
trigger1 = animelemtime(7) = 0
;---------------------------------------------------
;Beerus Beam Hitbox
[Statedef 44005]
type = A
movetype = A
physics = N
anim = 44001
velset = 0,0
sprpriority = -26

[State 200, 1]
type = Hitdef
trigger1 = animelemtime(1) = 0
attr = A, HA
damage = 250+floor(abs(Helper(44002), var(3) - Helper(44003), var(3)) / 2), 5+floor(abs(Helper(44002),var(3) - Helper(44003),var(3))/6)
animtype = Heavy
guardflag = MA
hitflag = MAFD
pausetime = 40,40
guard.pausetime = 40,40
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20,-10
hitsound = s4430, 4
guardsound = S6,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
ground.velocity = 1,-6
guard.velocity = -1
airguard.velocity = -1,-1
air.type = High	
air.velocity = 1,-6
air.hittime = 12
fall = 1
envshake.time = 40
envshake.ampl = 10
envshake.freq = 60
fall.recover = 0
air.animtype = back
getpower= 0,0
givepower = 0,0
affectteam = F


[state 44005, ]
type = playsnd
trigger1 = movehit = 1
value = 4401, 2
ignorehitpause = 1
persistent = 0

[state 44000, destroyself]
type = destroyself
trigger1 = movehit