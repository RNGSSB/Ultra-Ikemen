;---------------------------------------------------------------------------
; MEGAMAN's constants and state file.                          by Jin Kazama
;---------------------------------------------------------------------------
;Var(01) = Used for Charging Fierce punch
;Var(02) = Win Pose Selector
;Var(03) = Used to Determine Leaf Shield's Behavior
;Var(04) = Used to Determine which weapon is Activated
;Var(05) = Rush Drill Timer
;Var(06) = Super Jump
;Var(07) = Projectile Hit
;Var(08) = Move Contact
;Var(09) = Screen Bound = 0 when this variable is true
;Var(10) = Recovery Roll
;Var(11) = Another Camera Variable
;---------------------------------------------------------------------------
[Data]
life = 1000
attack = 100
defence = 95
power = 3000
fall.defence_up = 100
liedown.time = 8
airjuggle = 3
sparkno = 2
guard.sparkno = S449
KO.echo = 0
volumescale = 75
volume = 75
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = .83
yscale = 1.07
ground.back = 20          ;Player width (back, ground)
ground.front = 20         ;Player width (front, ground)
air.back = 12             ;Player width (back, air)
air.front = 12            ;Player width (front, air)
height = 60               ;Height of player (for opponent to jump over)
attack.dist = 160         ;Default attack distance
proj.attack.dist = 90     ;Default attack distance for projectiles
proj.doscale = 0          ;Set to 1 to scale projectiles too   
head.pos = 0, -57         ;Approximate position of head
mid.pos = 0, -38          ;Approximate position of midsection
shadowoffset = -2         ;Number of pixels to vertically offset the shadow
draw.offset = 0,0         ;Player drawing offset in pixels (x, y)
front.width = 20

[Velocity]
walk.fwd  = 3.8           ;Walk forward
walk.back = -3.4          ;Walk backward
run.fwd  = 7.0, -3        ;Run forward (x, y)
run.back = -7, -2.5       ;Hop backward (x, y)
jump.neu = 0,-12      ;Neutral jumping velocity (x, y)
jump.back = -2.8          ;Jump back Speed (x, y)
jump.fwd = 2.8       ;Jump forward Speed (x, y)
runjump.back = -2,-8.1 ;Running jump speeds (opt)
runjump.fwd = 3.5,-8.1      ;
airjump.neu = 0,-9.4      ;
airjump.back = -1.5      ;Air jump speeds (opt)
airjump.fwd = 1.5       ;

[Movement]
airjump.num = 0           ;Number of air jumps allowed (opt)
airjump.height =  25      ;Minimum distance from ground before you can air jump (opt)
yaccel = .61            ;Vertical acceleration
stand.friction = .82      ;Friction coefficient when standing
crouch.friction = .82     ;Friction coefficient when crouching

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...


[Statedef 21]
type    = S
physics = S
sprpriority = 1

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 21, 1]
type = VelSet
triggerall = enemy, stateno != [191, 198]
trigger1 = command = "holdfwd"
x = 1.5

[State 21, 2]
type = VelSet
triggerall = enemy, stateno != [191, 198]
trigger1 = command = "holdback"
x = -1.5

[State 21, 3]
type = VelSet
triggerall = enemy, stateno != [191, 198]
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = command = "holdfwd" && anim != 22
value = 22

[State 21, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = command = "holdback" && anim != 23
value = 23

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = command != "holdfwd" && anim != 0
trigger1 = command != "holdback" && anim != 0
value = 0

[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 22, 23)

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

[state 11,2]
type = changestate
trigger1 = prevstateno = 10 && time < 4 && command = "holdup"
value = 90
;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[state 40,0]
type = varset
trigger1 = 1
v = 6
value = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[state 40,6]
type = posset
trigger1 = time = 0
y = 0

[State 40,7]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50,1]
type = VelSet
trigger1 = time = 1 && prevstateno = 448
x = const(velocity.jump.fwd.x)
y = const(velocity.jump.y)

[state 50,2]
type = veladd
trigger1 = var(6) = 1
y = -0.17

[State 50,3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[state 50,4]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = [400,575] 
trigger2 = prevstateno = [1000, 1050]
value = 88

[State 50,5]
type = ChangeAnim
trigger1 = Time = 0 && prevstateno != [400,575]
trigger1 = prevstateno != [1000, 1050]
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50,6]
type = ChangeAnim 
triggerall = prevstateno != [400,575]
triggerall = prevstateno != [1000,1050]
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[state 50,7]
type = changestate
triggerall = time = [17, 23]
triggerall = command = "holdfwd" && prevstateno = 40
trigger1 = facing = 1 && screenpos x = [0,25]
trigger2 = facing = -1 && screenpos x = [295,320]
value = 448

[state 50,8]
type = ChangeState
trigger1 = (screenpos x != [-1000,320]) && var(6) = 1 && facing = -1
trigger2 = (screenpos x != [0,1320]) && var(6) = 1 && facing = 1
value = 710

;---------------------------------------------------------------------------
; Super Jump Start
[Statedef 90]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 90,1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 90,2]
type = VelSet
trigger1 = AnimTime = 0
y = -17.5

[State 90,3]
type = VelSet
trigger1 = AnimTime = 0 && sysvar(1) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 90,4]
type = VelSet
trigger1 = AnimTime = 0 && sysvar(1) = -1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 90,5]
type = Explod
trigger1 = Time = 1
anim = 8250
id = 8250
pos = -120, -10
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[state 90,6]
type = varset
trigger1 = 1
v = 6
value = 1

[State 90,7]
type = ChangeState
trigger1 = AnimTime = 0
value = 91
ctrl = 1
;---------------------------------------------------------------------------
; Super Jump Up
[Statedef 91]
type    = A
physics = A
anim = 90

[state 91,15]
type = changeanim
trigger1 = time = 0 && prevstateno = [400,425]
value = 88

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[state 91,16]
type = veladd
trigger1 = time > 1
y = -0.208

[State 91,17]
type = veladd
trigger1 = time >= 5 && command = "holdback" && vel x > -1.3875
x = -0.126

[State 91,18]
type = veladd
trigger1 = time >= 5 && command = "holdfwd" && vel x < 3.3
x = 0.3

[state 91,19]
type = playsnd
trigger1 = time = 0
value = 0,1
volumescale = 200

[State 91,20]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(50) = 1

[state 50,7]
type = changestate
triggerall = time = [25, 75]
triggerall = command = "holdfwd" && prevstateno = 90
trigger1 = facing = 1 && screenpos x = [0,25]
trigger2 = facing = -1 && screenpos x = [295,320]
value = 448
;---------------------------------------------------------------------------
; Cling to Wall
[Statedef 448]
type    = A
physics = N
anim = 448

[state 448,1]
type = velset
trigger1 = 1
x = 0
y = 0

[state 448,2]
type = posset
trigger1 = facing = 1
x = -155

[state 448,3]
type = posset
trigger1 = facing = -1
x = 155

[state 448,4]
type = varset
trigger1 = 1
v = 6
value = 0

[state 448,6]
type = changestate
trigger1 = animtime = 0
value = 449
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 449]
type    = A
physics = A

[State 50,1]
type = VelSet
trigger1 = time = 1 && prevstateno = 448
x = 5
y = const(velocity.jump.y)

[state 50,2]
type = veladd
trigger1 = 1
y = 0.23

[State 50,3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[state 50,4]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = [400,575] 
trigger2 = prevstateno = [1000, 1050]
value = 88

[State 50,5]
type = ChangeAnim
trigger1 = Time = 0 && prevstateno != [400,575]
trigger1 = prevstateno != [1000, 1050]
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50,6]
type = ChangeAnim 
triggerall = prevstateno != [400,575]
triggerall = prevstateno != [1000,1050]
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[state 50,7]
type = changestate
triggerall = time = [17, 23]
triggerall = command = "holdfwd" && prevstateno = 40
trigger1 = facing = 1 && screenpos x = [0,25]
trigger2 = facing = -1 && screenpos x = [295,320]
value = 448

[state 50,8]
type = ChangeState
trigger1 = (screenpos x != [-1000,320]) && var(6) = 1 && facing = -1
trigger2 = (screenpos x != [0,1320]) && var(6) = 1 && facing = 1
value = 710

;---------------------------------------------------------------------------
;Falling

[Statedef 1211]
type    = A
movetype= I
physics = A
anim = 88
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[State 1211, Ctrl]
type = CtrlSet
trigger1 = prevstateno = 4100
value = 1

[State 1211, Ctrl]
type = CtrlSet
triggerall = prevstateno != 4100
trigger1 = Var(12) = 0
value = 1

[State 1211, Ctrl]
type = CtrlSet
triggerall = prevstateno != 4100
trigger1 = Var(12) = 1
value = 1

[State 112, 3]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .2

[State 112, 4]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.1

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 88

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 88

[State 1211, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 52

[state 50,8]
type = ChangeState
trigger1 = (screenpos x != [-1000,320]) && var(6) = 1 && facing = -1
trigger2 = (screenpos x != [0,1320]) && var(6) = 1 && facing = 1
value = 710

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = A
physics = N
anim = 100
ctrl = 0
sprpriority = 1

[State 100,1]
type = Explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
scale = 0.5,0.5
random = 30,abs(const(size.head.pos.y))
pos = -30,ceil(const(size.mid.pos.y))

[State 101, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,0

[State 100,2]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.fwd.x)
y = const(velocity.run.fwd.y)



[state 100,3]
type = veladd
trigger1 = time >= 1
y = 0.27

[State 100,4] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100,5] 
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100,6]
type = changestate
trigger1 = command = "holdup" && prevstateno != 710
value = 40

[State 100,6]
type = changestate
trigger1 = command = "release_z"
value = 211

[state 12,12]
type = ctrlset
trigger1 = prevstateno = 710 && screenpos x != [15,305]
value = 0

[state 12,12]
type = ctrlset
trigger1 = prevstateno = 710 && screenpos x = [15,305]
value = 1

[State -3, 3]
type = ScreenBound
trigger1 = prevstateno = 710
value = 0
movecamera = 0,0

[State 105, 2]
type = PosSet
triggerall = time > 2
trigger1 = command = "holddown" && command = "x"
trigger2 = command = "holddown" && command = "y"
trigger3 = command = "holddown" && command = "z"
trigger4 = command = "holddown" && command = "a"
trigger5 = command = "holddown" && command = "b"
trigger6 = command = "holddown" && command = "c"
y = 0

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "holddown" && command = "x"
trigger2 = command = "holddown" && command = "y"
trigger3 = command = "holddown" && command = "z"
trigger4 = command = "holddown" &&  command = "a"
trigger5 = command = "holddown" && command = "b"
trigger6 = command = "holddown" && command = "c"
y = 0
x = 7

[State 105, 2]
type = PosSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0
x = 7

[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = stateno = 10
value = 10


[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = command = "x"
value = 200

[State 105, 3a]
type = ChangeState
triggerall = time > 2
trigger1 = command = "y"
value = 205

[STate 105, 3b]
type = ChangeState
triggerall = time > 2
trigger1 = command = "z"
value = 210

[State 105, 3c]
type = ChangeState
triggerall = time > 2
trigger1 = command = "a"
value = 215

[State 105, 3d]
type = ChangeState
triggerall = time > 2
trigger1 = command = "b"
value = 220

[State 105, 3e]
type = ChangeState
triggerall = time > 2
trigger1 = command = "c"
value = 225

[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "x"
value = 300

[State 105, 3a]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "y"
value = 205

[STate 105, 3b]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "z"
value = 310

[State 105, 3c]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "a"
value = 315

[State 105, 3d]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "b"
value = 320

[State 105, 3e]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "c"
value = 325

[State 100,7]
type = ChangeState
triggerall = prevstateno != 710
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger2 = animtime = 0
value = 101

[State 100,7]
type = ChangeState
triggerall = prevstateno = 710
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger2 = animtime = 0
value = 102
;---------------------------------------------------------------------------
; RUN_FWD LAND
[Statedef 101]
type    = S
physics = S
anim = 101
sprpriority = 1

[state 101,1]
type = posset
trigger1 = time = 0
y = 0

[state 101,2]
type = velset
trigger1 = time >= 0
x = 2
y = 0

[State 101,3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_FWD LAND 2
[Statedef 102]
type    = S
physics = S
anim = 101
sprpriority = 1

[state 102,1]
type = posset
trigger1 = time = 0
y = 0

[state 102,2]
type = velset
trigger1 = time >= 0
x = 2
y = 0

[State 102,3]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 102,4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; RUN_Back Start
[Statedef 105]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 105,1]
type = ChangeState
trigger1 = animtime = 0
value = 106
ctrl = 0
;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 106]
type    = A
physics = N
anim = 106
ctrl = 0
sprpriority = 1

[State 100,6]
type = changestate
trigger1 = command = "release_z"
value = 211

[State 105, 2]
type = PosSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0
x = -7

[State 105, 2]
type = PosSet
triggerall = time > 2
trigger1 = command = "holddown" && command = "x"
trigger2 = command = "holddown" && command = "y"
trigger3 = command = "holddown" && command = "z"
trigger4 = command = "holddown" && command = "a"
trigger5 = command = "holddown" && command = "b"
trigger6 = command = "holddown" && command = "c"
y = 0

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "holddown" && command = "x"
trigger2 = command = "holddown" && command = "y"
trigger3 = command = "holddown" && command = "z"
trigger4 = command = "holddown" &&  command = "a"
trigger5 = command = "holddown" && command = "b"
trigger6 = command = "holddown" && command = "c"
y = 0
x = -7

[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = command = "x"
value = 200

[State 105, 3a]
type = ChangeState
triggerall = time > 2
trigger1 = command = "y"
value = 205

[STate 105, 3b]
type = ChangeState
triggerall = time > 2
trigger1 = command = "z"
value = 210

[State 105, 3c]
type = ChangeState
triggerall = time > 2
trigger1 = command = "a"
value = 215

[State 105, 3d]
type = ChangeState
triggerall = time > 2
trigger1 = command = "b"
value = 220

[State 105, 3e]
type = ChangeState
triggerall = time > 2
trigger1 = command = "c"
value = 225

[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "x"
value = 300

[State 105, 3a]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "y"
value = 205

[STate 105, 3b]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "z"
value = 310

[State 105, 3c]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "a"
value = 315

[State 105, 3d]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "b"
value = 320

[State 105, 3e]
type = ChangeState
triggerall = time > 2
trigger1 = command = "holddown" && command = "c"
value = 325

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[state 106,2]
type = veladd
trigger1 = time >= 1
y = 0.27

[State 106,3]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 106,4]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100,5]
type = changestate
trigger1 = command = "holdup"
value = 40

[State 106,6]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger2 = animtime = 0
value = 107
ctrl = 0
;---------------------------------------------------------------------------
; RUN_BACK LAND
[Statedef 107]
type    = S
physics = S
anim = 107
sprpriority = 1

[state 107,1]
type = posset
trigger1 = time >= 0
y = 0

[state 107,2]
type = velset
trigger1 = time >= 0
x = -2
y = 0

[State 107,3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150,1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150,2]
type = ChangeState
trigger1 = HitShakeOver
value = 151

[State 150,4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3
;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151,1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151,2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 151,3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151,5]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime)
value = 130
ctrl = 1
;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152,1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152,2]
type = ChangeState
trigger1 = HitShakeOver
value = 153

[State 152,4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4
;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153,1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153,2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 153,3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153,4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime)
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[state 170,1]
type = palfx
trigger1 = time = [10,12]
add = 50,50,50
time = 1

[state 170,2]
type = palfx
trigger1 = time = [13,15]
add = 100,100,100
time = 1

[state 170,3]
type = palfx
trigger1 = time = [16,18]
add = 150,150,150
time = 1

[state 170,4]
type = palfx
trigger1 = time = [19,21]
add = 200,200,200
time = 1

[state 170,5]
type = palfx
trigger1 = time = [22,24]
add = 250,250,250
time = 1

[state 170,6]
type = assertspecial
trigger1 = time > 24
flag = invisible

[State 170,7]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-45
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 0, -2
removetime = 100
removeongethit = 1

[State 170,8]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = -3,-43
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -1.5, -1.5
removetime = 100
removeongethit = 1

[State 170,9]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = -5,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -2, 0
removetime = 100
removeongethit = 1

[State 170,10]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = -3,-37
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -1.5, 1.5
removetime = 100
removeongethit = 1

[State 170,11]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-35
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 0, 2
removetime = 100
removeongethit = 1

[State 170,12]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 3,-37
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 1.5, 1.5
removetime = 100
removeongethit = 1

[State 170,13]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 5,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 2, 0
removetime = 100
removeongethit = 1

[State 170,14]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 3,-43
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 1.5, -1.5
removetime = 100
removeongethit = 1

[State 170,15]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -0.5, -1
removetime = 100
removeongethit = 1

[State 170,16]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -1, -0.5
removetime = 100
removeongethit = 1

[State 170,17]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -0.5, 1
removetime = 100
removeongethit = 1

[State 170,18]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -1, 0.5
removetime = 100
removeongethit = 1

[State 170,19]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 0.5, 1
removetime = 100
removeongethit = 1

[State 170,20]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 1, 0.5
removetime = 100
removeongethit = 1

[State 170,21]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 0.5, -1
removetime = 100
removeongethit = 1

[State 170,22]
type = Explod
trigger1 = Time = 24
anim = 444
id = 444
postype = p1
pos = 0,-40
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 1, -0.5
removetime = 100
removeongethit = 1

[state 170,24]
type = playsnd
trigger1 = time = 26
value = 11,2

[State 170,25]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[state 180,1]
type = varrandom
trigger1 = time = 0
v = 2
range = 1,6

[state 180,2]
type = varset
trigger1 = command = "hold_x"
v = 2
value = 1

[state 180,3]
type = varset
trigger1 = command = "hold_y"
v = 2
value = 2

[state 180,4]
type = varset
trigger1 = command = "hold_z"
v = 2
value = 3

[state 180,5]
type = varset
trigger1 = command = "hold_a"
v = 2
value = 4

[state 180,6]
type = varset
trigger1 = command = "hold_b"
v = 2
value = 5

[state 180,7]
type = varset
trigger1 = command = "hold_c"
v = 2
value = 6

[State 180,8]
type = ChangeState
trigger1 = var(2) = 1
value = 184

[State 180,9]
type = ChangeState
trigger1 = var(2) = 2
value = 181

[State 180,10]
type = ChangeState
trigger1 = var(2) = 3
value = 182

[State 180,11]
type = ChangeState
trigger1 = var(2) = 4
value = 186

[State 180,12]
type = ChangeState
trigger1 = var(2) = 5
value = 185

[State 180,13]
type = ChangeState
trigger1 = var(2) = 6
value = 183

;---------------------------------------------------------------------------
; Win pose 1 - Hold Rush
[Statedef 181]
type = S
ctrl = 0
anim = 0
velset = 0,0

[state 181,1]
type = changeanim
trigger1 = anim != 181 && helper(1100), anim = 1126
value = 181

[state 181,2]
type = playsnd
trigger1 = animelem = 12
value = 21,0
volume = 255
volumescale = 255

[State 181,3]
type     = assertspecial
trigger1 = Time = [0,300]
flag     = roundnotover

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Win pose 2 - Peace Sign
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[state 182,1]
type = playsnd
trigger1 = animelem = 2
value = 21,0
volume = 255
volumescale = 255

[State 182,3]
type     = assertspecial
trigger1 = Time = [0,180]
flag     = roundnotover

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Win pose 3 - Roll
[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 183,1]
type = Explod
trigger1 = time = 1
anim = 435
id = 435
postype = p1
pos = 320,0
ownpal = 1
bindtime = 1
sprpriority = 5
persistent = 0
velocity = -4,0
removetime = 65
removeongethit = 1

[State 183,2]
type = Explod
trigger1 = time = 65
anim = 436
id = 436
postype = p1
pos = 60,0
ownpal = 1
bindtime = -1
sprpriority = 5
removetime = 500
removeongethit = 1

[state 183,3]
type = playsnd
trigger1 = animelem = 7
value = 21,0
volume = 255
volumescale = 255

[State 183,4]
type     = assertspecial
trigger1 = Time = [0,180]
flag     = roundnotover

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

;--------------------------------------------------------------------------
; Win pose 4 - Helmet
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0

[state 184,1]
type = playsnd
trigger1 = animelem = 6
value = 21,0
volume = 255
volumescale = 255

[State 184,2]
type     = assertspecial
trigger1 = Time = [0,300]
flag     = roundnotover

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Win pose 5 - BirthDay
[Statedef 185]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 185,1]
type = Explod
trigger1 = time = 1
anim = 433
id = 433
postype = p1
pos = 320,0
ownpal = 1
bindtime = 1
sprpriority = 5
persistent = 0
velocity = -4,0
removetime = 65
removeongethit = 1

[State 185,2]
type = Explod
trigger1 = time = 65
anim = 434
id = 434
postype = p1
pos = 60,0
ownpal = 1
bindtime = -1
sprpriority = 5
removetime = 500
removeongethit = 1

[state 185,3]
type = playsnd
trigger1 = animelem = 2
value = 20,0

[state 185,4]
type = playsnd
trigger1 = animelem = 9
value = 20,3

[State 185,5]
type     = assertspecial
trigger1 = Time = [0,300]
flag     = roundnotover

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Win pose 6 - Five
[Statedef 186]
type = S
ctrl = 0
anim = 185
velset = 0,0

[state 186,2]
type = playsnd
trigger1 = animelem = 2
value = 21,0
volume = 255
volumescale = 255

[State 186,3]
type     = assertspecial
trigger1 = Time = [0,300]
flag     = roundnotover

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
Introduction Select
[Statedef 191]
type = S
ctrl = 0

[State 191,1]
type = ChangeState
trigger1 = 1
value = 192
;---------------------------------------------------------------------------
; Introduction
[Statedef 192]
type = S
ctrl = 0
velset = 0,0
anim = 192

[state 192,1]
type = Helper
trigger1 = numhelper(1100) = 0 && time = 5
name = "Rush"
ID = 1100
pos = -50, -245
postype = p1
stateno = 1100
size.shadowoffset = -7
supermovetime = 9999
ownpal = 1

[State 192,3]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 192,4]
type = AssertSpecial
trigger1 = time < 84
flag = NoShadow

[state 192,5]
type = palfx
trigger1 = time = [44,47]
add = 160,160,160
time = 1

[state 192,6]
type = palfx
trigger1 = time = [48,51]
add = 120,120,120
time = 1

[state 192,7]
type = palfx
trigger1 = time = [52,55]
add = 80,80,80
time = 1

[state 192,8]
type = palfx
trigger1 = time = [56,59]
add = 40,40,40
time = 1

[state 192,9]
type = playsnd
trigger1 = animelem = 10
value = 12,0
volume = 255
volumescale = 255

[state 192,10]
type = playsnd
trigger1 = animelem = 50
value = 12,1
volume = 255
volumescale = 255

[State 192,11] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195,1]
type = Explod
trigger1 = animelem = 11 && facing = 1
anim = 196
id = 196
postype = p1
pos = 60,0
ownpal = 1
bindtime = -1
sprpriority = 5
persistent = 0
removeongethit = 1

[State 195,2]
type = Explod
trigger1 = animelem = 11 && facing = -1
anim = 197
id = 196
postype = p1
pos = 60,0
ownpal = 1
bindtime = -1
sprpriority = 5
persistent = 0
removeongethit = 1

[state 195,3]
type = playsnd
trigger1 = animelem = 3
value = 7,0
volumescale = 255
volume = 255
channel = 0

[State 195,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Jab
[Statedef 200]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                                        
ctrl = 0                      
anim = 200                       
poweradd = 20                   
sprpriority = 2                 

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volumescale = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 200,3]
type = HitDef
trigger1 = animelem = 2
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 30,0
getpower = 20,0
givepower = 20,0
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,7
sparkno = S9999
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
ground.cornerpush.veloff = -6.5
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 50)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[state 200,4]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "holddown"
trigger1 = command != "hold_z"
value = 211
persistent = 1
ignorehitpause = 1

[state 200,5]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command = "holddown"
trigger1 = command != "hold_z"
value = 311
persistent = 1
ignorehitpause = 1

[state 200,6]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[State 200,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Strong
[Statedef 205]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                                       
ctrl = 0                      
anim = 205                       
poweradd = 35                   
sprpriority = 2                 

[state 205,0]
type = changeanim
trigger1 = time = 0 && prevstateno = [200,425]
value = 206

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volumescale = 50

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 205,6]
type = playsnd
trigger1 = animelem = 4
value = 10,1
volume = 255
volumescale = 255
channel = 0

[State 205,3]
type = HitDef
trigger1 = animelem = 5
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 45,0
getpower = 30,0
givepower = 20,0
pausetime = 7,7
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11.5,0
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 207,8]
type = posadd
trigger1 = time = 14 || time = 16 || time = 18 || time = 20
persistent = 1
x = 1

[state 207,8]
type = posadd
trigger1 = time = [10, 13]
persistent = 1
x = 2

[state 207,8]
type = posadd
trigger1 = time = 7 || time = 8 || time = 15
persistent = 1
x = 3

[state 207,8]
type = posadd
trigger1 = time = 9
x = 5

[state 205,7]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "holddown"
trigger1 = command != "hold_z"
value = 211
persistent = 1
ignorehitpause = 1

[state 205,8]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command = "holddown"
trigger1 = command != "hold_z"
value = 311
persistent = 1
ignorehitpause = 1

[state 205,9]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[State 205,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Fierce
[Statedef 210]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                                       
ctrl = 0                      
anim = 210                       
poweradd = 50                   
sprpriority = 2                 

[state 210,1]
type = posset
trigger1 = time = 0
y = 0

[State 210,2]
type = Explod
trigger1 = Time = 9
anim = 211
id = 211
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = 5
persistent = 0
removeongethit = 1

[State 210,3]
type = Projectile
trigger1 = time = 11
offset = 50, -49
projid = 1234
projanim = 212
projhitanim = 213
projsprpriority = 3
projscale = .83,1.07
velocity = 6.5,0
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
projstagebound = 200
accel = 0, 0
attr = A, NA
damage    = 40
hitflag = MAFP
guardflag = MA
priority = 3
pausetime = 9,11
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11.5,0
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
ID = 1234
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 210,5]
type = varset
trigger1 = time = 0
v = 1
value = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 205,6]
type = playsnd
trigger1 = time = 2
value = 10,2
volume = 255
volumescale = 255
channel = 0

[state 210,11]
type = playsnd
trigger1 = animelem = 3
volume = 255
volumescale = 255
value = 4,0

[State 210,13]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Fierce Power Shot
[Statedef 211]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 210                       
poweradd = 50                   
sprpriority = 2                 

[state 211,1]
type = posset
trigger1 = time = 0
y = 0

[state 211,2]
type = stopsnd
trigger1 = 1
channel = 2


[State 211,3]
type = Projectile
trigger1 = time = 11
offset = 50, -44
projID = 1234
projanim = 226
projhitanim = 227
projhits = (var(1)/140) + 3
projsprpriority = 3
velocity = 6,0
projscale = .83,1.07
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
projstagebound = 200
projmisstime = 1
accel = 0, 0
attr = A, NA
damage    = 30
hitflag = MAFP
guardflag = MA
animtype = Hard
priority = 3
pausetime = 4,8
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-25
hitsound = S5,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11,0
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4
p2stateno = 700

[state 211,4]
type = velset
trigger1 = time = 0 && prevstateno = 100
x = 4
y = 0

[state 211,5]
type = varset
trigger1 = time = 12
v = 1
value = 0

[State 211,6]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 211,8]
type = playsnd
trigger1 = time = 2
value = 4,3
volume = 255
volumescale = 255
channel = 0

[state 211,9]
type = playsnd
trigger1 = time = 1
volume = 205
volumescale = 205
value = 4,1

[State 211,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Short
[Statedef 215]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                                       
ctrl = 0                      
anim = 215                       
poweradd = 20                   
sprpriority = 2                 

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volumescale = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1


[State 215,3]
type = HitDef
trigger1 = animelem = 2
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 30,0
getpower = 20,0
givepower = 20,0
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,7
sparkno = S9999
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
ground.cornerpush.veloff = -6.5
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 215,4]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[state 215,6]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "holddown"
trigger1 = command != "hold_z"
value = 211
persistent = 1
ignorehitpause = 1

[state 215,7]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command = "holddown"
trigger1 = command != "hold_z"
value = 311
persistent = 1
ignorehitpause = 1

[State 215,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Forward
[Statedef 220]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                                        
ctrl = 0                      
anim = 220                       
poweradd = 35                   
sprpriority = 2                 

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volumescale = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 220,3]
type = HitDef
trigger1 = animelem = 5
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 45,0
getpower = 30,0
givepower = 20,0
pausetime = 7,12
guard.pausetime = 7,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -10.5,0
air.velocity = -7,-2
down.velocity = -9,-7
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 220,4]
type = posadd
trigger1 = animelem = 2
x = 15

[state 220,5]
type = posadd
trigger1 = animelem = 3
x = 12

[state 220,6]
type = posadd
trigger1 = animelem = 4
x = 5

[state 220,9]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[state 220,10]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[state 220,11]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "holddown"
trigger1 = command != "hold_z"
value = 211
persistent = 1
ignorehitpause = 1

[state 220,12]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command = "holddown"
trigger1 = command != "hold_z"
value = 311
persistent = 1
ignorehitpause = 1

[State 220,13]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Roundhouse
[Statedef 225]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                                     
ctrl = 0                      
anim = 225                       
poweradd = 50                   
sprpriority = 2                 

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 0,5
volumescale = 50

[state 210,11]
type = playsnd
trigger1 = animelem = 5
volume = 255
volumescale = 255
value = 10,2

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 225,3]
type = HitDef
trigger1 = animelem = 2
attr = S,NA
hitflag  = MAF
guardflag = MA
animtype = Up
damage = 60,0
getpower = 50,0
givepower = 20,0
pausetime = 9,7
guard.pausetime = 9,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime = 27
air.hittime = 27
guard.hittime = 17
yaccel = .82
ground.velocity = -0,-18.8
ground.cornerpush.veloff = 0
air.velocity = -0,-19.4
guard.velocity = -10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 420, Explod]
type = Explod
trigger1 = movehit
anim = 8020
ontop = 1
pos = 45,-60
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 1.1,1.0
ownpal = 1

[state 225,4]
type = varset
trigger1 = command != "hold_z"
v = 1
value = 0

[State 225,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Throw Attempt
[Statedef 249]
type = S
movetype = A
physics = S
velset = 0,0
anim = 249
ctrl = 0

[state 249,1]
type = varset
trigger1 = 1
v = 1
value = 0

[State 249,2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NT
priority = 5, hit
hitsound = S5,4
sparkno = S9999
sparkxy = 0, -55
p1facing = ifelse(Command = "holdfwd",-1,1)
p2facing = 1
p1stateno = 250
p2stateno = 251

[State 249,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Throw Success 
[Statedef 250]
type = S
movetype = A
physics = S
anim = 250
velset = 0,0

[state 200,6]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[state 250,1]
type = explod
trigger1 = time = 1
anim = 8005
pos = ceil(0*const(size.xscale)),ceil(-50*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[state 250,2]
type = varset
trigger1 = 1
v = 1
value = 0

[State 250,3]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 3, < 0 
postype = p1
pos = 35,0

[State 250,4]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0 
postype = p1
pos = 36,-61

[State 250,5]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0 
postype = p1
pos = 25,-69

[State 250,6]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0 
postype = p1
pos = -10,-61

[State 250,7]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 7, < 0 
postype = p1
pos = -40,0

[state 250,8]
type = varset
trigger1 = facing = 1 && time = 1
v = 1
value = 1

[state 250,9]
type = varset
trigger1 = facing = -1 && time = 1
v = 1
value = 2

[state 250,10]
type = turn
trigger1 = animtime = 0

[State 250,13]
type = Envshake
trigger1 = time = 27
persistent = 0
time = 15
freq = 70
ampl = -4

[state 250,14]
type = playsnd
trigger1 = time = 10
value = 10,2
volume = 255
volumescale = 255

[State 250,16]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Throw Attempt
[Statedef 252]
type = A
movetype = A
physics = A
velset = 0,0
anim = 252
ctrl = 0

[state 249,1]
type = varset
trigger1 = 1
v = 1
value = 0

[State 249,2]
type = HitDef
trigger1 = AnimElem = 1
attr = A, NT
priority = 5, hit
hitsound = S5,4
sparkno = S9999
sparkxy = 0, -55
p1facing = ifelse(Command = "holdfwd",-1,1)
p2facing = 1
p1stateno = 254
p2stateno = 256

[State 249,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Throw Success 
[Statedef 254]
type = A
movetype = A
physics = N
anim = 253
velset = 0,0

[state 250,1]
type = explod
trigger1 = time = 1
anim = 8005
pos = ceil(0*const(size.xscale)),ceil(-50*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[state 200,6]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[state 250,2]
type = varset
trigger1 = 1
v = 1
value = 0

[State 921, PosFreeze]
type = PosFreeze
trigger1 = animelem = 2,< 0
value = 1

[State 921, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 0
y = -2

[State 921, VelAdd]
type = VelAdd
trigger1 = animelem = 2,> 0
y = .45

[State 250,3]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 3, < 0 
postype = p1
pos = 35,0

[State 250,4]
type = TargetBind
trigger1 = AnimElem = 3, >= 0 && AnimElem = 4, < 0 
postype = p1
pos = 36,-61

[State 250,5]
type = TargetBind
trigger1 = AnimElem = 4, >= 0 && AnimElem = 5, < 0 
postype = p1
pos = 25,-69

[State 250,6]
type = TargetBind
trigger1 = AnimElem = 5, >= 0 && AnimElem = 6, < 0 
postype = p1
pos = -10,-61

[State 250,7]
type = TargetBind
trigger1 = AnimElem = 6, >= 0 && AnimElem = 7, < 0 
postype = p1
pos = -40,0

[state 250,8]
type = varset
trigger1 = facing = 1 && time = 1
v = 1
value = 1

[state 250,9]
type = varset
trigger1 = facing = -1 && time = 1
v = 1
value = 2

[State 250,13]
type = Envshake
trigger1 = time = 27
persistent = 0
time = 15
freq = 70
ampl = -4

[state 250,14]
type = playsnd
trigger1 = time = 10
value = 10,2
volume = 255
volumescale = 255

[State 250,16]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 0
ctrl = 1

[State 250,16]
type = ChangeState
trigger1 = animtime = 0
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Throw (Caught by)
[Statedef 256]
type = A
movetype = H
physics = N
velset = 0,0

[state 251,1]
type = screenbound
trigger1 = time > 0
value = 1

[state 251,2]
type = changeanim2
trigger1 = time = 0
value = 251

[State 251,4]
type = ChangeState
trigger1 = animtime = 0
value = 257

;Throw (Caught by)
[Statedef 257]
type = A
movetype = H
physics = N
velset = 9,9

[state 251,2]
type = changeanim2
trigger1 = time = 0
value = 254

[state 251,3]
type = lifeadd
trigger1 = time = 0
value = -150

[State 921, VelAdd]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State -3, Shake on Land]
type = EnvShake
trigger1 = pos y >= 0 && vel y > 0
time = 12
freq = 110
ampl = 3

[State 9001, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5110;ifelse(alive,5040,5050)

;---------------------------------------------------------------------------
;Spark Effect
[Statedef 255]
type = A
physics = N
anim = 255
velset = 0,0
sprpriority = 5

[state 255,1]
type = bindtoroot
trigger1 = root, statetype != C && root, facing = 1
pos = 4, -36
persistent = 1
time = 2

[state 255,2]
type = bindtoroot
trigger1 = root, statetype = C && root, facing = 1
pos = 4, -20
persistent = 1
time = 2

[state 255,3]
type = bindtoroot
trigger1 = root, statetype != C && root, facing = -1
pos = 4, -36
time = 2

[state 255,4]
type = bindtoroot
trigger1 = root, statetype = C && root, facing = -1
pos = 4, -20
time = 2

[state 255,5]
type = changeanim
trigger1 = root, var(1) >= 76 && anim != 256
value = 256

[State 255,6]
type = DestroySelf
trigger1 = root, var(1) = 0 || root, stateno = 411 || root, stateno = 311 || root, stateno = 211
;--------------------------------------------------------------------------
;Crouching light punch
[Statedef 300]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 20
ctrl = 0
anim = 300
sprpriority = 2

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volumescale = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 300,3]
type = HitDef
trigger1 = animelem = 2
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = Light
damage = 30,0
getpower = 20,0
givepower = 20,0
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,7
sparkno = S9999
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
ground.cornerpush.veloff = -6.5
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 30)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 300,4]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[state 300,6]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "holddown"
trigger1 = command != "hold_z"
value = 211
persistent = 1
ignorehitpause = 1

[state 300,7]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command = "holddown"
trigger1 = command != "hold_z"
value = 311
persistent = 1
ignorehitpause = 1

[State 300,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Crouching Strong
[Statedef 305]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 35
ctrl = 0
anim = 305
sprpriority = 2

[state 305,1]
type = posset
trigger1 = time = 0
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volumescale = 50

[state 205,6]
type = playsnd
trigger1 = animelem = 4
value = 10,1
volume = 255
volumescale = 255
channel = 0

[State 205,3]
type = HitDef
trigger1 = animelem = 4
attr = C,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 45,0
getpower = 30,0
givepower = 20,0
pausetime = 7,7
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11.5,0
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 305,5]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0


[state 207,8]
type = posadd
trigger1 = time = 14 || time = 16 || time = 18 || time = 20
persistent = 1
x = 1

[state 207,8]
type = posadd
trigger1 = time = [10, 13]
persistent = 1
x = 2

[state 207,8]
type = posadd
trigger1 = time = 7 || time = 8 || time = 15
persistent = 1
x = 3

[state 207,8]
type = posadd
trigger1 = time = 9
x = 5

[state 305,8]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "holddown"
trigger1 = command != "hold_z"
value = 211
persistent = 1
ignorehitpause = 1

[state 305,9]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command = "holddown"
trigger1 = command != "hold_z"
value = 311
persistent = 1
ignorehitpause = 1

[State 305,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Crouching Fierce
[Statedef 310]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 50
ctrl = 0
anim = 310
sprpriority = 2

[State 310,3]
type = Explod
trigger1 = Time = 9
anim = 311
id = 311
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = 5
persistent = 0
removeongethit = 1

[State 310,4]
type = Projectile
trigger1 = time = 11
offset = 61, -39
projid = 1234
projanim = 212
projhitanim = 213
projsprpriority = 3
projscale = .83,1.07
velocity = 6.5,0
projheightbound = -480, 0
projedgebound = 4000
projstagebound = 200
projscreenbound = 4000
accel = 0, 0
attr = A, NA
damage    = 40
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 9,11
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11.5,0
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 12,12]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state 205,6]
type = playsnd
trigger1 = time = 2
value = 10,2
volume = 255
volumescale = 255
channel = 0

[state 210,11]
type = playsnd
trigger1 = animelem = 3
volume = 255
volumescale = 255
value = 4,0

[State 310,11]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Crouching Fierce Power Shot
[Statedef 311]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 50
ctrl = 0
anim = 310
sprpriority = 2

[state 311,1]
type = posset
trigger1 = time = 0
y = 0

[state 311,2]
type = stopsnd
trigger1 = 1
channel = 2

[state 311,3]
type = velset
trigger1 = time = 0 && prevstateno = 100
x = 4
y = 0

[State 311,4]
type = Projectile
trigger1 = time = 11
offset = 61, -32
projID = 1234
projanim = 226
projhitanim = 227
projhits = (var(1)/140) + 3
projsprpriority = 3
velocity = 6,0
projscale = .83,1.07
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
projstagebound = 200
projmisstime = 1
accel = 0, 0
attr = A, NA
animtype = Hard
damage    = 30
hitflag = MAFP
guardflag = MA
priority = 3
pausetime = 4,8
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-25
hitsound = S5,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11,0
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4
p2stateno = 700

[state 311,5]
type = varset
trigger1 = time = 12
v = 1
value = 0

[State 211,6]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 211,8]
type = playsnd
trigger1 = time = 2
value = 4,3
volume = 255
volumescale = 255
channel = 0

[state 211,9]
type = playsnd
trigger1 = time = 1
volume = 205
volumescale = 205
value = 4,1

[State 311,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Crouching Short
[Statedef 315]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 20
ctrl = 0
anim = 315
sprpriority = 2

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volumescale = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 315,3]
type = HitDef
trigger1 = animelem = 2
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = Light
damage = 30,0
getpower = 20,0
givepower = 20,0
pausetime = 8,7
guard.pausetime = 8,7             
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,10
sparkno = S9999
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
down.velocity = -6.8,-9
ground.cornerpush.veloff = -6.5
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 20)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 315,4]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[state 315,6]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "holddown"
trigger1 = command != "hold_z"
value = 211
persistent = 1
ignorehitpause = 1

[state 315,7]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command = "holddown"
trigger1 = command != "hold_z"
value = 311
persistent = 1
ignorehitpause = 1

[State 315,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Crouching forward
[Statedef 320]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 35
ctrl = 0
anim = 320
sprpriority = 2

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volumescale = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 320,3]
type = HitDef
trigger1 = animelem = 4
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Medium
damage = 45,0
getpower = 30,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11.6,0
down.velocity = -6.8,-9
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 320,4]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[state 320,6]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "holddown"
trigger1 = command != "hold_z"
value = 211
persistent = 1
ignorehitpause = 1

[state 320,7]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command = "holddown"
trigger1 = command != "hold_z"
value = 311
persistent = 1
ignorehitpause = 1

[State 320,9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Crouching roundhouse
[Statedef 325]
type    = C
movetype= A
physics = N
juggle  = 1
poweradd= 50
ctrl = 0
anim = 325
sprpriority = 2

[state 325,3]
type = velset
trigger1 = time < 8
x = 0

[state 325,3]
type = velset
trigger1 = time = 8
x = 9

[state 325,4]
type = veladd
trigger1 = time > 8
x = - 0.3

[state 1,2]
type = velset
trigger1 = time > 36
x = 0

[State 325,5]
type = HitDef
trigger1 = Time = 9
attr = C, NA
damage    = 60
hitflag = MAFD
guardflag = LA
animtype = Hard
pausetime = 10,10
guard.pausetime = 9,9             
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-5
hitsound   = S5,2
guardsound = S6,0
ground.type = Trip
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0,-5
guard.velocity = -9
air.velocity = -3,-5
guard.velocity = -5
yaccel = .53
ground.cornerpush.veloff = 0
air.velocity = 0,-4
down.velocity = -6.8,-9
guard.velocity = -10
airguard.velocity = -6,-2
down.velocity = -9,-7
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 10
id = 4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 325,6]
type = varset
trigger1 = command != "hold_z"
v = 1
value = 0

[state 210,11]
type = playsnd
trigger1 = animelem = 5
volume = 255
volumescale = 255
value = 10,2

[state 210,11]
type = playsnd
trigger1 = animelem = 10
volume = 155
volumescale = 155
value = 0,2

[State 325,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Jump Jab
[Statedef 400]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 20
ctrl = 0
anim = 400
sprpriority = 2

[State 400,1]
type = HitDef
trigger1 = animelem = 2
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Light
air.animtype = Light
damage = 30,0
getpower = 20,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 11
yaccel = .92
ground.velocity = -6.5,0
down.velocity = -9,-7
ground.cornerpush.veloff = -6
air.cornerpush.veloff = 0
air.velocity = 0.4,-10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 400,2]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = floor (pos Y < -155)
y= - 0.16

[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volumescale = 50

[state 220,12]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "hold_z"
value = 411
persistent = 1
ignorehitpause = 1

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 400
triggerall = floor (pos Y < -155)
trigger1 = animelem = 4
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Strong
[Statedef 405]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 35
ctrl = 0
anim = 405
sprpriority = 2

[State 405,1]
type = HitDef
trigger1 = animelem = 4
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Medium
air.animtype = Medium
damage = 45,0
getpower = 30,0
givepower = 20,0
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 16
air.hittime = 12
yaccel = .92
down.velocity = -6,-7
ground.velocity = -12,0
ground.cornerpush.veloff = -11
air.cornerpush.veloff = 0
air.velocity = 0.4,-8
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 405,2]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = floor (pos Y < -155)
y= - 0.16

[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volumescale = 50

[state 210,11]
type = playsnd
trigger1 = animelem = 2
volume = 255
volumescale = 255
value = 10,2
[state 220,12]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "hold_z"
value = 411
persistent = 1
ignorehitpause = 1

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 405
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Fierce
[Statedef 410]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 410,1]
type = Explod
trigger1 = Time = 9
anim = 411
id = 411
postype = p1
pos = 0,0
ownpal = 1
bindtime = -1
sprpriority = 5
persistent = 0
removeongethit = 1

[State 410,2]
type = Projectile
trigger1 = time = 11 && prevstateno != [400,425]
offset = 77, -50
projanim = 212
projhitanim = 213
projsprpriority = 3
projscale = .83,1.07
velocity = 6.5,0
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
accel = 0, 0
attr = A, NA
damage    = 40
hitflag = MAFP
guardflag = MA
priority = 3
pausetime = 4,7
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,0
hitsound   = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
airguard.velocity = -7, -1
ground.velocity = -10.5
yaccel = 0.7
air.velocity = -8,4
air.fall = 0
p2stateno = 700

[State 410,2]
type = Projectile
trigger1 = time = 11 && (prevstateno = [400,425]) && var(6) = 1
offset = 77, -50
projanim = 212
projhitanim = 213
projsprpriority = 3
projscale = .83,1.07
velocity = 6.5,0
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
accel = 0, 0
attr = A, NA
damage    = 40
hitflag = MAFP
guardflag = MA
priority = 3
pausetime = 4,4
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,0
hitsound   = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
airguard.velocity = -7, -1
ground.velocity = -10.5
yaccel = 0.5
air.velocity = -16,8
air.fall = 0
fall.envshake.time = 10
p2stateno = 715

[State 410,2]
type = Projectile
trigger1 = time = 11 && (prevstateno = [400,425]) && var(6) = 0
offset = 77, -50
projanim = 212
projhitanim = 213
projsprpriority = 3
projscale = .83,1.07
velocity = 6.5,0
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
accel = 0, 0
attr = A, NA
damage    = 40
hitflag = MAFP
guardflag = MA
priority = 3
pausetime = 4,4
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,0
hitsound   = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
airguard.velocity = -7, -1
ground.velocity = -10.5
yaccel = 0.7
air.velocity = -8,4
air.fall = 0
p2stateno = 700

[State 410, 3]
type = varset
trigger1 = (prevstateno = [400,425]) && var(6) = 1 && projhit = 1
v = 9
value = 1
persistent = 0

[State 706, 5]
type = Helper
trigger1 = numhelper(708) = 0 && (prevstateno = [400,425]) && var(6) = 1 && projhit = 1
name = "Scroll Screen"
id = 708
stateno = 708
postype = p1
pos = 50, 0
bindtime = -1

[state 410,3]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state 410,9]
type = playsnd
trigger1 = time = 11
value = 4,0
volume = 255
volumescale = 255
channel = 7

[state 410,10]
type = playsnd
trigger1 = time = 2
value = 10,1
volume = 255
volumescale = 255

[State 91, VelAdd]
type = VelAdd
trigger1 = floor (pos Y < -155)
y= - 0.16

[state 425,6]
type = changestate
triggerall = anim = 410
triggerall = floor (pos Y < -155)
trigger1 = animelem = 7
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Fierce Power Shot
[Statedef 411]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 50
ctrl = 0
anim = 412
sprpriority = 2

[state 411,1]
type = velset
trigger1 = time >= 0 && pos y < -5
x = 0
y = 0.5

[state 411,2]
type = stopsnd
trigger1 = 1
channel = 2

[state 411,3]
type = velset
trigger1 = time >= 0 && pos y >= -5
y = 0

[State 411,4]
type = Projectile
trigger1 = time = 11
offset = 50, -44
projID = 1234
projanim = 226
projhitanim = 227
projhits = (var(1)/160) + 3
projsprpriority = 3
velocity = 6,0
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
projmisstime = 1
attr = A, NA
animtype = Hard
damage    = 30
hitflag = MAFP
guardflag = MA
priority = 3
pausetime = 4,8
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-25
hitsound = S5,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11,0
air.velocity = -7,3
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0

[state 411,5]
type = varset
trigger1 = time = 12
v = 1
value = 0

[state 211,8]
type = playsnd
trigger1 = time = 2
value = 4,3
volume = 255
volumescale = 255
channel = 0

[state 211,9]
type = playsnd
trigger1 = time = 1
volume = 205
volumescale = 205
channel = 7
value = 4,1

[state 411,9]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;Jump Short
[Statedef 415]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 20
ctrl = 0
anim = 415
sprpriority = 2

[State 415,1]
type = HitDef
trigger1 = animelem = 2
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Light
air.animtype = Light
damage = 30,0
getpower = 20,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 11
yaccel = .92
ground.velocity = -6.5,0
down.velocity = -6,-7
ground.cornerpush.veloff = -6
air.cornerpush.veloff = 0
air.velocity = 0.4,-10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
down.velocity = -6.8,-9
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 415,2]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = floor (pos Y < -155)

y= - 0.16

[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volumescale = 50

[state 220,12]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "hold_z"
value = 411
persistent = 1
ignorehitpause = 1

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 415
triggerall = floor (pos Y < -155)
trigger1 = animelem = 5
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Forward
[Statedef 420]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 35
ctrl = 0
anim = 420
sprpriority = 2

[State 420,1]
type = HitDef
trigger1 = animelem = 4
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Medium
air.animtype = Medium
damage = 45,0
getpower = 30,0
givepower = 20,0
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 16
air.hittime = 12
yaccel = .92
down.velocity = -6,-7
ground.velocity = -12,0
ground.cornerpush.veloff = -11
air.cornerpush.veloff = 0
air.velocity = -2.5,-8
airguard.velocity = -6,-2
fall.xvelocity = 0
down.velocity = -6.8,-9
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 420,2]
type = varset
trigger1 = command != "hold_z" && !MoveContact
v = 1
value = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = floor (pos Y < -155)

y= - 0.16

[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volumescale = 50

[state 220,12]
type = changestate
trigger1 = MoveContact && var(1) >= 90 && command != "hold_z"
value = 411
persistent = 1
ignorehitpause = 1

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 420
triggerall = floor (pos Y < -155)
trigger1 = animelem = 8
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Roundhouse
[Statedef 425]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 50
ctrl = 0
anim = 425
sprpriority = 2

[State 425,1]
type = HitDef
trigger1 = Time = 7 && prevstateno != [400,425]
attr = A, NA
damage    = 60
guardflag = MA
hitflag = MAFD
priority = 3
pausetime = 9,9
guard.pausetime = 9,9             
sparkno = S9999 
sparkxy = 0,-25
hitsound   = S5,2
guardsound = S6,0
guard.sparkno = S8050
ground.type = High
guard.velocity = -9
down.velocity = -9,-7
ground.velocity = -10.5
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = 0.7
air.velocity = -8,4
air.fall = 1
p2stateno = 700

[State 425,1]
type = HitDef
trigger1 = Time = 7 && (prevstateno = [400,425]) && var(6) = 1
attr = A, NA
damage    = 60
guardflag = MA
hitflag = MAFD
priority = 3
pausetime = 9,9
guard.pausetime = 9,9      
sparkno = S9999 
sparkxy = 0,-25
hitsound   = S5,2
guardsound = S6,0
guard.sparkno = S8050
ground.type = High
guard.velocity = -9
guard.sparkno = S449
ground.slidetime = 12
ground.hittime = 18
down.velocity = -9,-7
air.hittime = 6
ground.velocity = -10.5
air.velocity = -16,8
air.fall = 1
fall.envshake.time = 10
p2stateno = 715

[State 425,1]
type = HitDef
trigger1 = Time = 7 && (prevstateno = [400,425]) && var(6) = 0
attr = A, NA
damage    = 60
guardflag = MA
hitflag = MAFD
priority = 3
pausetime = 9,9
sparkno = S9999 
sparkxy = 0,-25
hitsound   = S5,2
guardsound = S6,0
guard.sparkno = S8050
ground.type = High
guard.velocity = -9
guard.sparkno = S449
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = 0.7
ground.velocity = -10.5
air.velocity = -8,4
air.fall = 1
p2stateno = 700

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 706, 5]
type = Helper
trigger1 = numhelper(708) = 0 && (prevstateno = [400,425]) && var(6) = 1 && MoveHit
name = "Scroll Screen"
id = 708
stateno = 708
postype = p1
pos = 50, 0
bindtime = -1

[State 425, 3]
type = varset
trigger1 = (prevstateno = [400,425]) && var(6) = 1 && MoveHit
v = 9
value = 1
persistent = 0

[state 425,2]
type = varset
trigger1 = command != "hold_z"
v = 1
value = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = floor (pos Y < -155)
y= - 0.16

[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volumescale = 50

[state 425,6]
type = changestate
triggerall = anim = 425
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Weak Mega Upper (start)
[Statedef 530]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 530                       
poweradd = 100                   
sprpriority = 2                 

[State 530,1]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[State 530,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 531
;---------------------------------------------------------------------------
; Weak Mega Upper (rising)
[Statedef 531]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 531                       
poweradd = 0                   
sprpriority = 2                 

[state 531,1]
type = veladd
trigger1 = var(6) = 1
y = -0.108

[State 531,2]
type = Explod
trigger1 = time = 0
anim = 534
id = 534
pos = 0, 0
postype = p1
removetime = -2
ignorehitpause = -1
scale = .83,1.07
bindtime = -1
persistent = 0
sprpriority = 3
removeongethit = 1
ownpal = 1

[state 531,3]
type = removeexplod
trigger1 = animelem = 2
id = 534

[state 531,4]
type = velset
trigger1 = time = 0
x = 4
y = -9.5

[state 531,5]
type = veladd
trigger1 = time = 2 || time = 4 || time = 6 || time = 8
persistent = 1
x = -1

[state 531,6]
type = velmul
trigger1 = time = 2
y = 2

[state 531,7]
type = velmul
trigger1 = time = 3
y = 0.5

[state 531,8]
type = veladd
trigger1 = 1
y = 0.64

[State 531,10]
type = HitDef
trigger1 = time = 1
attr = S,SA
animtype = Hard
damage    = 120,10
guardflag = MA
hitflag = MAF
pausetime = 9,10
guard.pausetime = 10,10
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 25
air.hittime = 25
guard.hittime = 17
yaccel = 1.09
ground.velocity = -11,-25
ground.cornerpush.veloff = -11
guard.velocity = -10
air.velocity = -11,-25
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 4
id = 1+4

[state 531,11]
type = playsnd
trigger1 = time = 0
value = 10,2
volume = 255
volumescale = 255

[State 531,12]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
;---------------------------------------------------------------------------
; Mega Upper (landing)
[Statedef 532]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 47                       
poweradd = 0                   
sprpriority = 2                 

[state 532,1]
type = posset
trigger1 = 1
y = 0

[State 532,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Medium Mega Upper (start)
[Statedef 533]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 530                       
poweradd = 100                   
sprpriority = 2                 

[State 533,1]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[State 533,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 534
;---------------------------------------------------------------------------
; Medium Mega Upper (rising)
[Statedef 534]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 532                       
poweradd = 0                   
sprpriority = 2                 

[state 534,1]
type = veladd
trigger1 = var(6) = 1
y = -0.108

[State 534,2]
type = Explod
trigger1 = time = 0
anim = 534
id = 534
pos = 0, 0
postype = p1
removetime = -2
ignorehitpause = -1
scale = .83,1.07
bindtime = -1
persistent = 0
sprpriority = 3
removeongethit = 1
ownpal = 1

[state 534,3]
type = removeexplod
trigger1 = animelem = 2
id = 534

[state 534,4]
type = velset
trigger1 = time = 0
x = 6
y = -12.9

[state 534,5]
type = veladd
trigger1 = time = 3 || time = 6
persistent = 1
x = -2

[state 534,6]
type = veladd
trigger1 = time = 9 || time = 12
persistent = 1
x = -1

[state 534,7]
type = velmul
trigger1 = time = 2
y = 2

[state 534,8]
type = velmul
trigger1 = time = 3
y = 0.5

[state 534,9]
type = veladd
trigger1 = 1
y = 0.64

[State 534,11]
type = HitDef
trigger1 = time = 1
attr = S,SA
animtype = Hard
damage    = 120,10
guardflag = MA
hitflag = MAF
pausetime = 9,10
guard.pausetime = 10,10
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 25
air.hittime = 25
guard.hittime = 17
yaccel = 1.09
ground.velocity = -13,-27
ground.cornerpush.veloff = -11
guard.velocity = -10
air.velocity = -13,-27
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 4
id = 1+4

[state 531,11]
type = playsnd
trigger1 = time = 0
value = 10,2
volume = 255
volumescale = 255

[State 534,13]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 532
;---------------------------------------------------------------------------
; Hard Mega Upper (start)
[Statedef 535]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 530                       
poweradd = 100                   
sprpriority = 2                 

[State 535,1]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[State 535,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 536
;---------------------------------------------------------------------------
; Hard Mega Upper (rising)
[Statedef 536]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 532                       
poweradd = 0                   
sprpriority = 2                 

[state 536,1]
type = veladd
trigger1 = var(6) = 1
y = -0.108

[State 536,3]
type = Explod
trigger1 = time = 0
anim = 534
id = 534
pos = 0, 0
postype = p1
removetime = -2
ignorehitpause = -1
scale = .83,1.07
bindtime = -1
persistent = 0
sprpriority = 3
removeongethit = 1
ownpal = 1

[state 536,4]
type = removeexplod
trigger1 = animelem = 2
id = 534

[state 536,5]
type = velset
trigger1 = time = 0
x = 8.5
y = - 15.5

[state 534,5]
type = veladd
trigger1 = time = 3 || time = 6
persistent = 1
x = -2

[state 534,6]
type = veladd
trigger1 = time = 9 || time = 18
persistent = 1
x = -2.2

[state 536,7]
type = velmul
trigger1 = time = 2
y = 2

[state 536,8]
type = velmul
trigger1 = time = 3
y = 0.5

[state 536,9]
type = veladd
trigger1 = 1
y = 0.71

[State 536,10]
type = HitDef
trigger1 = time = 1
attr = S,SA
animtype = Hard
damage    = 120,10
guardflag = MA
hitflag = MAF
pausetime = 9,10
guard.pausetime = 10,10
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 25
air.hittime = 25
guard.hittime = 17
yaccel = 1.09
ground.velocity = -15,-27
ground.cornerpush.veloff = -11
guard.velocity = -10
air.velocity = -15,-27
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 4
id = 1+4

[state 531,11]
type = playsnd
trigger1 = time = 0
value = 10,2
volume = 255
volumescale = 255

[State 536,12]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 532
;---------------------------------------------------------------------------
; Weak Mega Upper (start) air
[Statedef 560]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 530                       
poweradd = 100                   
sprpriority = 2                 

[State 560,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 531
;---------------------------------------------------------------------------
; Medium Mega Upper (start) air
[Statedef 561]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 530                       
poweradd = 100                   
sprpriority = 2                 

[State 561,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 534
;---------------------------------------------------------------------------
; Hard Mega Upper (start) air
[Statedef 562]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 530                       
poweradd = 100                   
sprpriority = 2                 

[State 562,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 536
;---------------------------------------------------------------------------
; TRIPPED (shaking)
[Statedef 326]
type    = A
movetype= H
physics = N
velset = 0,0

[State 326, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 326, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 327

[State 326, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

[state 326,4]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 326,5]
type = playerpush
trigger1 = 1
value = 0
;---------------------------------------------------------------------------
; TRIPPED (fall through air)
[Statedef 327]
type    = A
movetype= H
physics = N

[State 327, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 327, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 327, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 328

[state 327,4]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 327,5]
type = playerpush
trigger1 = 1
value = 0
;---------------------------------------------------------------------------
; TRIP LIEDOWN
[Statedef 328]
type    = L
movetype= H
physics = N

[State 328, EnvShake]
type = FallEnvShake
trigger1 = Time = 0   

[State 328, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 328, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 328, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 328, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 328, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 328, Var]
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 328, 8]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 328, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 328, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 328, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5110

[State 328, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 328, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 328, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 328, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[state 328,16]
type = playerpush
trigger1 = 1
value = 0

[state 328,17]
type = nothitby
trigger1 = time = 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 0
ignorehitpause = 1

[State 250,13]
type = Envshake
trigger1 = time = 0 && prevstateno = 720
persistent = 0
time = 15
freq = 70
ampl = -4

[state 328,18]
type = selfstate
trigger1 = alive && time = 3 && (prevstateno != [700,709]) && prevstateno != 720
trigger2 = alive && time = 5 && prevstateno = [700,709]
trigger3 = alive && time = 8 && prevstateno = 720
value = 5110

;---------------------------------------------------------------------------
;Throw (Caught by)
[Statedef 251]
type = A
movetype = H
physics = N
velset = 0,0

[state 251,1]
type = screenbound
trigger1 = time > 0
value = 1

[state 251,2]
type = changeanim2
trigger1 = time = 0
value = 251

[state 251,3]
type = lifeadd
trigger1 = time = 30
value = -150

[State 251,4]
type = Selfstate
trigger1 = animtime = 0
value = 5110

;---------------------------------------------------------------------------
; Not Aerial Raved A
[Statedef 700]
movetype= H
physics = N
velset = 0,0
ctrl = 0

[state 700,1]
type = selfstate
trigger1 = time = 0 && pos y >= 0 && command != "holddown"
value = 5000

[state 700,2]
type = selfstate
trigger1 = time = 0 && pos y >= 0 && command = "holddown"
value = 5010

[state 700, 3]
type = statetypeset
trigger1 = time = 1
value = A

[State 700, 4]
type = ChangeAnim
trigger1 = 1
value = 5012

[State 700, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 701
;---------------------------------------------------------------------------
; Not Aerial Raved B
[Statedef 701]
type    = A
movetype= H
physics = N
ctrl = 0

[State 701, 1]
type = VelAdd
trigger1 = 1
y = 0.5

[State 701, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 701, 3]
type = SelfState
trigger1 = !Alive && Pos Y >= 0 && Vel Y > 0
value = 5100

[State 701, 4]
type = ChangeState
trigger1 = AnimTime = 0 || Time >= 10
value = 702

[State 701, 5]
type = ChangeState
trigger1 = Alive && Pos Y >= 10 && Vel Y > 0
value = 703
;---------------------------------------------------------------------------
; Not Aerial Raved C
[Statedef 702]
type    = A
movetype= H
physics = N
ctrl = 0

[State 702, 1]
type = VelAdd
trigger1 = 1
y = 0.5

[State 702, 2]
type = ChangeAnim
trigger1 = Time = 0 && SelfAnimExist(5061)
value = 5061

[State 702, 3]
type = ChangeState
trigger1 = Pos Y >= 10 && Vel Y > 0 && Alive
value = 703

[State 702, 4]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0 && !Alive
value = 5100
;---------------------------------------------------------------------------
; Not Aerial Raved D
[Statedef 703]
type    = A
movetype= H
physics = N
anim = 5210
ctrl = 0

[State 703, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 703, 2]
type = VelSet
trigger1 = Time = 0
x = vel x / 2
y = -8

[State 703, 3]
type = Turn
trigger1 = P2Dist X < -10 && time = 0
persistent = 0

[State 703, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 703, 5]
type = VelAdd
trigger1 = 1
y = .82;gethitvar(yaccel)

[State 703, 6]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
ctrl = 1
;---------------------------------------------------------------------------
; Aerial Raved A
[Statedef 705]
movetype= H
physics = N
velset = 0,0
ctrl = 0

[state 705,1]
type = selfstate
trigger1 = time = 0 && pos y >= 0 && command != "holddown"
value = 5000

[state 705,2]
type = selfstate
trigger1 = time = 0 && pos y >= 0 && command = "holddown"
value = 5010

[state 705,3]
type = statetypeset
trigger1 = time = 1
value = A

[State 705,4]
type = ChangeAnim
trigger1 = 1
value = 5012

[State 705,5]
type = ChangeState
trigger1 = HitShakeOver
value = 706
;---------------------------------------------------------------------------
; Aerial Raved B
[Statedef 706]
type    = A
movetype= H
physics = N
ctrl = 0

[State 706, 1]
type = VelAdd
trigger1 = 1
y = 0.5

[State 706, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 706, 3]
type = ChangeState
trigger1 = AnimTime = 0 || Time >= 10
value = 707

[State 706, 4]
type = ScreenBound
trigger1 = 1 
value = 1
movecamera = 1,1

[State 702, 2]
type = ChangeAnim
trigger1 = SelfAnimExist(5061) && anim != 5061
value = 5061

[State 706, 6]
type = Changestate
trigger1 = Pos Y >= 10 && Vel Y > 0
value = 328
;---------------------------------------------------------------------------
; Aerial Raved C
[Statedef 707]
type    = A
movetype= H
physics = N
ctrl = 0

[State 707, 1]
type = VelAdd
trigger1 = 1
y = 0.5

[State 707, 2]
type = ChangeAnim
trigger1 = SelfAnimExist(5061) && anim != 5061
value = 5061

[State -3, 3]
type = ScreenBound
trigger1 = 1 
value = 1
movecamera = 1,1

[State 707, 3]
type = Changestate
trigger1 = Pos Y >= 10 && Vel Y > 0 
value = 328
;---------------------------------------------------------------------------
[Statedef 708]
type    = A
movetype= I
anim = 708
physics = N
ctrl = 0
sprpriority = -5

[state 12,12]
type = velset
trigger1 = time = 0
x = 18
y = 8

[state 12,12]
type = veladd
trigger1 = 1
y = 0.5

[State 708, 3]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,1

[State 708, 4]
type = Velset
trigger1 = p2stateno = 328 && p2movetype = H
x = 0
y = 0

[State 250,13]
type = Envshake
trigger1 = p2stateno = 328 && p2movetype = H
persistent = 0
time = 15
freq = 70
ampl = -4

[state 12,12]
type = destroyself
trigger1 = (root, stateno != [100,102]) && (root, stateno != 710) && vel x = 0
trigger1 = p2stateno != 5120

;---------------------------------------------------------------------------
; Aerial Raved A
[Statedef 715]
movetype= H
physics = N
velset = 0,0
ctrl = 0

[state 710,1]
type = selfstate
trigger1 = time = 0 && pos y >= 0 && command != "holddown"
value = 5000

[state 710,2]
type = selfstate
trigger1 = time = 0 && pos y >= 0 && command = "holddown"
value = 5010

[State 650, GA~b^[A]
type = PlaySnd
trigger1 = time = 1
value = 0,11

[state 710,3]
type = statetypeset
trigger1 = time = 1
value = A

[State 710,4]
type = ChangeAnim
trigger1 = 1
value = 5012

[State 710,5]
type = ChangeState
trigger1 = HitShakeOver
value = 716
;---------------------------------------------------------------------------
; Aerial Raved B
[Statedef 716]
type    = A
movetype= H
physics = N
ctrl = 0

[State 711, 1]
type = VelAdd
trigger1 = 1
y = 0.5

[State 711, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 711, 3]
type = ChangeState
trigger1 = AnimTime = 0 || Time >= 10
value = 717

[State 711, 4]
type = ScreenBound
trigger1 = 1 
value = 1
movecamera = 1,1

[State 711, 2]
type = ChangeAnim
trigger1 = SelfAnimExist(5061) && anim != 5061
value = 5061

[State 711, 6]
type = Changestate
trigger1 = Pos Y >= 10 && Vel Y > 0
value = 328
;---------------------------------------------------------------------------
; Aerial Raved C
[Statedef 717]
type    = A
movetype= H
physics = N
ctrl = 0

[State 712, 1]
type = VelAdd
trigger1 = 1
y = 0.5 

[State 712, 2]
type = ChangeAnim
trigger1 = SelfAnimExist(5061) && anim != 5061
value = 5061

[State 712, 3]
type = ScreenBound
trigger1 = 1 
value = 1
movecamera = 1,1

[State 712, 3]
type = Changestate
trigger1 = Pos Y >= 10 && Vel Y > 0 
value = 328
;---------------------------------------------------------------------------
; Rush Drill Hitby cont
[Statedef 720]
type    = A                     
movetype= H                    
physics = N                     
juggle  = 0                     
velset = -11,-16                    
ctrl = 0                      
sprpriority = 2                 

[state 12,12]
type = veladd
trigger1 = 1
y = 0.66

[state 251,2]
type = changeanim2
trigger1 = time = 0
trigger1 = !SelfAnimExist(5250)
value = 3340 

[state 251,2]
type = changeanim2
trigger1 = time = 0
trigger1 = SelfAnimExist(5250)
value = 5250 

[State 3430, 8]
type = ChangeAnim2
trigger1 = Vel Y > 0
trigger1 = !SelfAnimExist(5251)
value = 3350
persistent = 0

[State 3430, 8]
type = ChangeAnim2
trigger1 = Vel Y > 0
trigger1 = SelfAnimExist(5251)
value = 5251
persistent = 0

[State 531,12]
type = Selfstate
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5110

;---------------------------------------------------------------------------
;MEGAMAN'S MEGA BUSTER STATES                                  by Jin Kazama
;---------------------------------------------------------------------------
;Helper IDS - FlipTop       = 480
;             Weapon Sphere = 490
;             Tornado Hold  = 500
;             Leaf Shield   = 505
;             Rock Ball     = 515
;---------------------------------------------------------------------------
;Var(4) = Weapon Select | 0 = Tornado Hold | 1 = Rockball | 2 = Leaf Shield
;Var(6) = Counts the number of times the Rockball has bounced
;---------------------------------------------------------------------------
; Change Weapon to Rockball
[Statedef 480]
type = S
ctrl = 0
anim = 480
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 480,1]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 480,2]
type = Helper
trigger1 = time = 10
type = normal
name = "Flip Top"
ID = 480
pos = 90, -240
postype = p1
stateno = 481
ownpal = 1

[state 480,3]
type = playsnd
trigger1 = time = 2
value = 10,2
volume = 255
volumescale = 255

[State 480,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fliptop (Rockball) Falling
[Statedef 481]
type = A
ctrl = 0
anim = 481
velset = 0,8
physics = N
sprpriority = 4

[state 481,1]
type = playsnd
trigger1 = time = 5
value = 12,0
volume = 255
volumescale = 255

[state 481,2]
type = veladd
trigger1 = 1
y = 0.5

[State 481,3]
type = ChangeState
trigger1 = Pos Y > 0 && Vel Y >= 0
value = 482

;---------------------------------------------------------------------------
; Fliptop (Rockball) Deploy Sphere
[Statedef 482]
type = S
ctrl = 0
anim = 482
velset = 0,0
physics = S
sprpriority = 4

[state 482,1]
type = Helper
trigger1 = animelem = 7
type = normal
name = "Rockball Sphere"
ID = 490
pos = 0, -32
postype = p1
stateno = 490
ownpal = 1

[state 482,2]
type = posset
trigger1 = 1
y = 0

[State 482,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 483

;---------------------------------------------------------------------------
; Fliptop (Rockball) Escape
[Statedef 483]
type = A
ctrl = 0
anim = 483
velset = 0,-8
physics = N
sprpriority = 4

[State 483,1]
type = DestroySelf
trigger1 = Time = 40
;---------------------------------------------------------------------------
; Rockball Sphere (in the air)
[Statedef 490]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 490                       
poweradd = 0                   
sprpriority = 2                 

[state 490,1]
type = velset
trigger1 = time = 1
x = -2
y = -10

[state 490,2]
type = gravity
trigger1 = 1

[state 490,3]
type = ChangeState
trigger1 = rootdist x = [-30, 30]
trigger1 = rootdist y = [-5, 40]
value = 492

[State 490,4]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 491
;---------------------------------------------------------------------------
; Rockball Sphere (on the ground)
[Statedef 491]
type    = S                     
physics = S                     
velset = 0,0                    
ctrl = 0                      
anim = 490                       
poweradd = 0                   
sprpriority = 2                 

[state 491,1]
type = posset
trigger1 = time = 0
y = -7

[state 491,2]
type = ChangeState
trigger1 = rootdist x = [-30, 30]
trigger1 = rootdist y = [-5, 40]
value = 492

[state 491,3]
type = changeanim
trigger1 = time = 190
value = 491

[State 491,4]
type = DestroySelf
trigger1 = Time = 210
;---------------------------------------------------------------------------
; Rockball Sphere (Activate RockBall)
[Statedef 492]
type    = A                     
physics = N                     
velset = 0,0                    
ctrl = 0                      
anim = 492                       
poweradd = 0                   
sprpriority = 5                 

[state 481,1]
type = playsnd
trigger1 = time = 1
value = 4,4
volume = 255
volumescale = 255

[state 492,1]
type = changeanim
trigger1 = time = 0 && facing = -1
value = 484

[state 492,2]
type = velset
trigger1 = time = 20
x = -18

[State 492,3]
type = DestroySelf
trigger1 = Time = 60
;---------------------------------------------------------------------------
; Change Weapon to Tornado Hold
[Statedef 484]
type = S
ctrl = 0
anim = 480
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 484,1]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 484,2]
type = Helper
trigger1 = time = 10
type = normal
name = "Flip Top"
ID = 480
pos = 90, -240
postype = p1
stateno = 485
ownpal = 1

[state 484,3]
type = playsnd
trigger1 = time = 2
value = 10,2
volume = 255
volumescale = 255


[State 484,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Fliptop (Tornado Hold) Falling
[Statedef 485]
type = A
ctrl = 0
anim = 481
velset = 0,8
physics = N
sprpriority = 4

[state 485,1]
type = veladd
trigger1 = 1
y = 0.5

[state 485,2]
type = playsnd
trigger1 = time = 5
value = 12,0
volume = 255
volumescale = 255

[State 485,3]
type = ChangeState
trigger1 = Pos Y > 0 && Vel Y >= 0
value = 486
;---------------------------------------------------------------------------
; Fliptop (Tornado Hold) Deploy Sphere
[Statedef 486]
type = S
ctrl = 0
anim = 482
velset = 0,0
physics = S
sprpriority = 4

[state 486,1]
type = Helper
trigger1 = animelem = 7
type = normal
name = "Tornado Sphere"
ID = 490
pos = 0, -32
postype = p1
stateno = 493
ownpal = 1

[state 486,2]
type = posset
trigger1 = 1
y = 0

[State 486,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 483
;---------------------------------------------------------------------------
; Tornado Sphere (in the air)
[Statedef 493]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 493                       
poweradd = 0                   
sprpriority = 5                 

[state 493,1]
type = velset
trigger1 = time = 1
x = -2
y = -10

[state 493,2]
type = gravity
trigger1 = 1

[state 493,3]
type = ChangeState
trigger1 = rootdist x = [-30, 30]
trigger1 = rootdist y = [-5, 40]
value = 495

[State 493,4]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 494
;---------------------------------------------------------------------------
; Tornado Sphere (on the ground)
[Statedef 494]
type    = S                     
physics = S                     
velset = 0,0                    
ctrl = 0                      
anim = 493                       
poweradd = 0                   
sprpriority = 5                 

[state 494,1]
type = posset
trigger1 = time = 0
y = -7

[state 494,2]
type = ChangeState
trigger1 = rootdist x = [-30, 30]
trigger1 = rootdist y = [-5, 40]
value = 495

[state 494,3]
type = changeanim
trigger1 = time = 190
value = 494

[State 494,4]
type = DestroySelf
trigger1 = Time = 210
;---------------------------------------------------------------------------
; Tornado Sphere (Activate Tornado Hold)
[Statedef 495]
type    = A                     
physics = N                     
velset = 0,0                    
ctrl = 0                      
anim = 495                       
poweradd = 0                   
sprpriority = 5                 

[state 481,1]
type = playsnd
trigger1 = time = 1
value = 4,4
volume = 255
volumescale = 255

[state 495,1]
type = changeanim
trigger1 = time = 0 && facing = -1
value = 485

[state 495,2]
type = velset
trigger1 = time = 20
x = -18

[State 495,3]
type = DestroySelf
trigger1 = Time = 60
;---------------------------------------------------------------------------
; Change Weapon to Leaf Shield
[Statedef 488]
type = S
ctrl = 0
anim = 480
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 488,1]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 488,2]
type = Helper
trigger1 = time = 10
type = normal
name = "Flip Top"
ID = 480
pos = 90, -240
postype = p1
stateno = 487
ownpal = 1

[state 488,3]
type = playsnd
trigger1 = time = 2
value = 10,2
volume = 255
volumescale = 255

[State 488,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Fliptop (Leaf Shield) Falling
[Statedef 487]
type = A
ctrl = 0
anim = 481
velset = 0,8
physics = N
sprpriority = 4

[state 487,1]
type = veladd
trigger1 = 1
y = 0.5

[state 487,2]
type = playsnd
trigger1 = time = 5
value = 12,0
volume = 255
volumescale = 255


[State 487,3]
type = ChangeState
trigger1 = Pos Y > 0 && Vel Y >= 0
value = 489
;---------------------------------------------------------------------------
; Fliptop (Leaf Shield) Deploy Sphere
[Statedef 489]
type = S
ctrl = 0
anim = 482
velset = 0,0
physics = S
sprpriority = 4

[state 489,1]
type = Helper
trigger1 = animelem = 7
type = normal
name = "Leaf Sphere"
ID = 490
pos = 0, -32
postype = p1
stateno = 496
ownpal = 1

[state 489,2]
type = posset
trigger1 = 1
y = 0

[State 489,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 483
;---------------------------------------------------------------------------
; Leaf Sphere (in the air)
[Statedef 496]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 496                       
poweradd = 0                   
sprpriority = 5                 

[state 496,1]
type = velset
trigger1 = time = 1
x = -2
y = -10

[state 496,2]
type = gravity
trigger1 = 1

[state 496,3]
type = ChangeState
trigger1 = rootdist x = [-30, 30]
trigger1 = rootdist y = [-5, 40]
value = 498

[State 496,4]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 497
;---------------------------------------------------------------------------
; Leaf Sphere (on the ground)
[Statedef 497]
type    = S                     
physics = S                     
velset = 0,0                    
ctrl = 0                      
anim = 496                       
poweradd = 0                   
sprpriority = 5                 

[state 497,1]
type = posset
trigger1 = time = 0
y = -7

[state 497,2]
type = ChangeState
trigger1 = rootdist x = [-30, 30]
trigger1 = rootdist y = [-5, 40]
value = 498

[state 494,3]
type = changeanim
trigger1 = time = 190
value = 497

[State 494,4]
type = DestroySelf
trigger1 = Time = 210

;---------------------------------------------------------------------------
; Leaf Sphere (Activate Leaf Shield)
[Statedef 498]
type    = A                     
physics = N                     
velset = 0,0                    
ctrl = 0                      
anim = 498                       
poweradd = 0                   
sprpriority = 5   

[state 481,1]
type = playsnd
trigger1 = time = 1
value = 4,4
volume = 255
volumescale = 255              

[state 498,1]
type = changeanim
trigger1 = time = 0 && facing = -1
value = 486

[state 498,2]
type = velset
trigger1 = time = 20
x = -18

[State 498,3]
type = DestroySelf
trigger1 = Time = 60
;---------------------------------------------------------------------------
; Jab Tornado Hold
[Statedef 500]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 500                       
poweradd = 100                   
sprpriority = 2                 

[State 500,1]
type = Explod
trigger1 = time = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 500,2]
type = Helper
trigger1 = time = 13
scale = 83, 1.07
name = "Tornado"
ID = 500
pos = 20, -42
postype = p1
stateno = 503
ownpal = 1

[state 500,3]
type = nothitby
trigger1 = Time = [12,13]
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 500,4]
type = playsnd
trigger1 = time = 2
value = 3,3
volumescale = 255
volume = 255
channel = 0

[State 500,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Strong Tornado Hold
[Statedef 501]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 500                       
poweradd = 100                   
sprpriority = 2                 

[State 501,1]
type = Explod
trigger1 = time = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 501,2]
type = Helper
trigger1 = time = 13
scale = 83, 1.07
name = "Tornado"
ID = 500
pos = 20, -42
postype = p1
stateno = 503
ownpal = 1

[state 501,3]
type = nothitby
trigger1 = Time = [12,13]
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 501,4]
type = playsnd
trigger1 = time = 2
value = 3,3
volumescale = 255
volume = 255
channel = 0

[State 501,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Fierce Tornado Hold
[Statedef 502]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 503                      
poweradd = 100                   
sprpriority = 2                 

[State 502,1]
type = Explod
trigger1 = time = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 502,2]
type = Helper
trigger1 = time = 13
name = "Tornado"
ID = 500
pos = 20, -42
postype = p1
stateno = 503
scale = 83, 1.07
ownpal = 1

[state 502,3]
type = nothitby
trigger1 = Time = [12,13]
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 502,4]
type = playsnd
trigger1 = time = 2
value = 3,3
volumescale = 255
volume = 255
channel = 0

[State 502,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Tornado Hold (in the air)
[Statedef 503]
type    = A                     
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 501                       
poweradd = 0                   
sprpriority = 5                 

[state 503,1]
type = velmul
trigger1 = facing = 1 && screenpos x = [290,320]
trigger2 = facing = -1 && screenpos x = [0,30] 
x = 0

[state 503,2]
type = velset
trigger1 = time = 0 && root, stateno = 500
x = 6
y = 5.5

[state 503,3]
type = velset
trigger1 = time = 0 && root, stateno = 501
x = 8
y = -2

[state 503,4]
type = velset
trigger1 = time = 0 && root, stateno = 502
x = 9
y = -4

[state 503,5]
type = veladd
trigger1 = root, stateno != 500
y = 0.7

[State 503,6]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 504
;---------------------------------------------------------------------------
; Tornado Hold (on the ground)
[Statedef 504]
type    = S                     
movetype= A 
physics = S
velset = 0,0                    
ctrl = 0                      
anim = 502                       
poweradd = 0                   
sprpriority = 5                 

[state 504,1]
type = posset
trigger1 = 1
y = 0

[state 504,6]
type = playsnd
trigger1 = movehit = 1
value = 5,3
channel = 1

[State 504,5]
type = HitDef
trigger1 = time % 8 = 0 && hitcount < 3
attr = S,NA
hitflag  = MAFD
guardflag = MA
animtype = Up
damage   = 50,3
getpower = 50,0
givepower = 20,0
guardflag = MA
pausetime = 0,1
sparkno = S8002
guard.sparkno = S8050
sparkxy =  0,-65
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime = 11
air.hittime = 11
guard.hittime = 17
yaccel = 1.29
down.velocity = -9,-7
ground.velocity = 0.1,-12
ground.cornerpush.veloff = 0
air.velocity = 0.1,-12
guard.velocity = -10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 0
id = 1+4

[state 504,6]
type = playsnd
trigger1 = time = 2
value = 9,0
volume = 220
volumescale = 220

[state 504,7]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; Deploy Leaf Shield
[Statedef 505]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 507                       
poweradd = 100                   
sprpriority = 2                 

[State 505,1]
type = Explod
trigger1 = time = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 505,2]
type = Helper
trigger1 = time = 13
type = normal
name = "Leaf Shield"
ID = 505
pos = 0, -40
postype = p1
stateno = 506
facing = 1
ownpal = 1

[state 505,3]
type = playsnd
trigger1 = time = 2
value = 3,4
volume = 255
volumescale = 255

[State 505,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Leaf Shield (bound to Megaman)
[Statedef 506]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 505                       
poweradd = 0                   
sprpriority = 5                 

[state 506,1]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
stateno = 507
time = -1

[state 506,2]
type = BindToRoot
trigger1 = time > 0
pos = 0, -40
time = 2
facing = 1

[state 506,3]
type = ChangeState
trigger1 = root, stateno = [510,511]
value = 508

[State 506,4]
type = ChangeState
trigger1 = Time = 260 || root, movetype = H
trigger2 = Stateno = 1000
trigger3 = Stateno = 1030
trigger4 = Stateno = 1040
value = 507
;---------------------------------------------------------------------------
; Leaf Shield (disappearing)
[Statedef 507]
type    = S                     
movetype= A                    
physics = N                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 506                       
poweradd = 0                   
sprpriority = 5                 

[state 507,1]
type = nothitby
trigger1 = Time >= 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 507,2]
type = posadd
trigger1 = time % 2 = 0
y = 2

[State 507,3]
type = DestroySelf
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
; Leaf Shield (flying across the screen)
[Statedef 508]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 1                     
velset = 7,0                    
ctrl = 0                      
anim = 505                       
poweradd = 0                   
sprpriority = 5                 

[state 508,1]
type = velset
trigger1 = MoveContact
x = 4

[state 508,1]
type = velset
trigger1 = Moveguarded
x = 2

[state 508,2]
type = nothitby
trigger1 = Time >= 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 508,3]
type = BindToRoot
trigger1 = time = 0
pos = 0, -40
time = 18
facing = 1

[state 508,4]
type = playerpush
trigger1 = time > 0
value = 0

[state 504,6]
type = playsnd
trigger1 = movehit = 1
value = 5,2
channel = 1

[state 508,5]
type = hitdef
trigger1 = time % 2 = 0 && time > 6 && hitcount < 8 && p2statetype != A
attr = SCA, HP
damage = 20, 2
hitflag = MAFD
animtype = Hard
guardflag = MA
pausetime = 1, 4
guard.pausetime = 2, 3
sparkno = S(8002 + (Time % 2))
guard.sparkno = s8050
sparkxy = 0, var(20)
guardsound = S6,0
ground.type = High
ground.slidetime = 18
down.velocity = -9,-7
yaccel = 0.8
ground.hittime = 25
air.hittime = 9
ground.velocity = -10
guard.velocity = -16
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[state 508,5]
type = hitdef
trigger1 = time % 2 = 0 && time > 6 && hitcount < 8 && p2statetype = A
attr = SCA, HP
damage = 20, 2
hitflag = MAFD
animtype = Hard
guardflag = MA
pausetime = 1, 3
guard.pausetime = 2, 3
sparkno = S(8002 + (Time % 2))
guard.sparkno = s8050
sparkxy = 0, var(20)
guardsound = S6,0
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 25
air.hittime = 9
ground.velocity = -10
guard.velocity = -16
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[state 508,6]
type = varrandom
trigger1 = time % 2 = 0
v = 20
persisitent = 1
range = -30,30

[state 508,7]
type = DestroySelf
trigger1 = time = 130

[State 508,16]
type = ChangeState
trigger1 = moveguarded
value = 512

[State 508,16]
type = ChangeAnim
trigger1 = hitcount = 1
value = 508

[State 508,16]
type = ChangeAnim
trigger1 = hitcount = 2
value = 509

[State 508,16]
type = ChangeAnim
trigger1 = hitcount = 3
value = 510

[State 508,16]
type = ChangeAnim
trigger1 = hitcount = 4
value = 511

[State 508,16]
type = ChangeAnim
trigger1 = hitcount = 5
value = 512

[State 508,16]
type = ChangeAnim
trigger1 = hitcount = 6
value = 513

[State 508,16]
type = ChangeAnim
trigger1 = hitcount = 7
value = 513

[State 508,16]
type = ChangeState
trigger1 = hitcount = 8
value = 509

;---------------------------------------------------------------------------
; Leaf Shield (disappearing) 2
[Statedef 509]
type    = S                     
movetype= A                    
physics = N                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 514                       
poweradd = 0                   
sprpriority = 5                 

[state 509,1]
type = nothitby
trigger1 = Time >= 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 509,2]
type = posadd
trigger1 = time % 2 = 0
y = 2

[State 509,3]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Leaf Shield (disappearing) 2 - MOVEGUARD
[Statedef 512]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 1                    
velset = 0,0                    
ctrl = 0                      
anim = 506                     
poweradd = 0                   
sprpriority = 5  

[state 509,2]
type = posadd
trigger1 = time % 2 = 0
y = 2           

[State 509,3]
type = DestroySelf
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
; Shoot Leaf Shield
[Statedef 510]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 503                       
poweradd = 100                   
sprpriority = 2                 

[State 510,1]
type = Explod
trigger1 = time = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 510,2]
type = playsnd
trigger1 = time = 4
value = 10,1
volumescale = 255
volume = 255
channel = 0

[State 510,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Shoot Leaf Shield (air)
[Statedef 511]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 50
ctrl = 0
anim = 412
sprpriority = 2

[state 511,1]
type = velset
trigger1 = time >= 0 && pos y < -5
x = 0
y = 0.5

[state 511,2]
type = velset
trigger1 = time >= 0 && pos y >= -5
y = 0

[state 511,3]
type = playsnd
trigger1 = time = 2
value = 10,1
volumescale = 255
volume = 255
channel = 0

[state 511,4]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; Deploy Rockball
[Statedef 515]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 500                       
poweradd = 100                   
sprpriority = 2                 

[State 515,1]
type = Explod
trigger1 = time = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 515,2]
type = Helper
trigger1 = time = 13
type = normal
name = "Rockball"
ID = 515
pos = 30, -44
postype = p1
stateno = 516
facing = 1
ownpal = 1

[state 515,3]
type = playsnd
trigger1 = time = 2
value = 3,0
volume = 255
volumescale = 255

[State 515,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Rockball (in the air)
[Statedef 516]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 515                       
poweradd = 0                   
sprpriority = 5                 

[state 516,1]
type = velset
trigger1 = time = 0
x = 2

[state 516,2]
type = gravity
trigger1 = 1

[State 516,3]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -7
value = 517
;---------------------------------------------------------------------------
; Rockball (on the ground)
[Statedef 517]
type    = S                     
physics = S                     
velset = 0,0                    
ctrl = 0                      
anim = 515                       
poweradd = 0                   
sprpriority = 5                 

[state 517,1]
type = turn
trigger1 = facing = 1 && root, facing = -1
trigger2 = facing = -1 && root, facing = 1

[state 517,2]
type = posset
trigger1 = time = 0
y = -7

[state 517,3]
type = ChangeState
trigger1 = rootdist x = [-60, 30]
trigger1 = root, stateno = 220
trigger1 = root, animelem = 4
value = 519

[state 517,4]
type = ChangeState
triggerall = rootdist x = [-85, 10]
trigger1 = root, stateno = 315
trigger1 = root, animelem = 2
trigger2 = root, stateno = 320
trigger2 = root, animelem = 3
trigger3 = root, stateno = 325
trigger3 = root, animelem = 4, >= 0 && root, animelem = 10, < 0
value = 520

[state 517,5]
type = ChangeState
trigger1 = numhelper(515) > 1
value = 518
;---------------------------------------------------------------------------
; Rockball (destroy)
[Statedef 518]
type    = S                     
physics = S                     
velset = 0,0                    
ctrl = 0                      
anim = 8080                       
poweradd = 0                   
sprpriority = 5                 

[state 519,1]
type = playsnd
trigger1 = time = 0
value = 5,6
volume = 180
volumescale = 180

[state 518,1]
type = posset
trigger1 = time = 0
y = -7

[state 518,2]
type = DestroySelf
trigger1 = time = 10
;---------------------------------------------------------------------------
; Rockball (kicked high)
[Statedef 519]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 7,-4                    
ctrl = 0                      
anim = 516                       
poweradd = 0                   
sprpriority = 6  

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow                

[state 519,1]
type = playsnd
trigger1 = time = 0
value = 5,0

[State 519,3]
type = Explod
trigger1 = time = 0
anim = 8000
scale = 0.5,0.5
pos = 0, 0
postype = p1
removetime = -2
ignorehitpause = 1
bindtime = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 519,4]
type = HitDef
trigger1 = time = 0
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 95,0
getpower = 30,0
givepower = 20,0
pausetime = 0,7
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
down.velocity = -9,-7
air.hittime = 6
yaccel = .88
ground.velocity = -11.5,0
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4              

[state 519,5]
type = nothitby
trigger1 = Time >= 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 519,6]
type = varset
trigger1 = time = 0
v = 6
value = 0

[state 519,7]
type = varadd
trigger1 = screenpos x != [12,308]
trigger2 = screenpos y != [9,231]
trigger3 = var(6) < 4 && pos y >= -8 && vel y > 0
v = 6
value = 1

[state 519,8]
type = varadd
trigger1 = MoveContact
v = 6
persistent = 0
value = 2

[state 519,9]
type = VelMul
trigger1 = var(6) < 4 && screenpos x != [12,308]
x = -0.9

[state 519,10]
type = VelMul
trigger1 = var(6) < 4 && screenpos y != [9,231]
trigger2 = var(6) < 4 && pos y >= -8 && vel y > 0
y = -1

[state 519,11]
type = playsnd
trigger1 = var(6) < 4 && screenpos x != [12,308]
trigger2 = var(6) < 4 && screenpos y != [9,231]
trigger3 = var(6) < 4 && pos y >= -8 && vel y > 0
value = 3,2
persistent = 1

[state 519,12]
type = afterimage
trigger1 = time = 0
time = 500
PalBright = 0, 0, 100
PalContrast = 255, 255, 255
PalAdd = 0, 0, 0
PalMul = 0.5, 0.5, 1.8
framegap = 2
length = 11

[state 519,13]
type = changeanim
trigger1 = anim != 518 && vel x < 0
value = 518

[state 519,14]
type = changeanim
trigger1 = anim != 516 && vel x > 0
value = 516

[state 519,15]
type = playerpush
trigger1 = time > 0
value = 0

[State 519,16]
type = DestroySelf
trigger1 = screenpos x != [-100,420]
trigger2 = screenpos y != [-100,340]
;---------------------------------------------------------------------------
; Rockball (kicked low)
[Statedef 520]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 9,-4                    
ctrl = 0                      
anim = 516                       
poweradd = 0                   
sprpriority = 6 

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow                

[state 520,2]
type = playsnd
trigger1 = time = 0
value = 5,0

[state 520,3]
type = varadd
trigger1 = MoveContact
v = 6
persistent = 0
value = 2

[State 520,4]
type = Explod
trigger1 = time = 0
anim = 8000
scale = 0.5,0.5
pos = 0, 0
postype = p1
removetime = -2
ignorehitpause = 1
bindtime = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 520,5]
type = HitDef
trigger1 = time = 0
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 95,0
getpower = 30,0
givepower = 20,0
pausetime = 0,7
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 18
air.hittime = 6
yaccel = .88
ground.velocity = -11.5,0
down.velocity = -9,-7
air.velocity = -7,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4                 

[state 520,6]
type = nothitby
trigger1 = Time >= 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 520,7]
type = varset
trigger1 = time = 0
v = 6
value = 0

[state 520,8]
type = varadd
trigger1 = screenpos x != [12,308]
trigger2 = screenpos y != [9,231]
trigger3 = var(6) < 4 && pos y >= -8 && vel y > 0
v = 6
value = 1

[state 520,9]
type = VelMul
trigger1 = var(6) < 4 && screenpos x != [12,308]
x = -0.9

[state 520,10]
type = VelMul
trigger1 = var(6) < 4 && screenpos y != [9,231]
trigger2 = var(6) < 4 && pos y >= -8 && vel y > 0
y = -1

[state 520,11]
type = playsnd
trigger1 = var(6) < 4 && screenpos x != [12,308]
trigger2 = var(6) < 4 && screenpos y != [9,231]
trigger3 = var(6) < 4 && pos y >= -8 && vel y > 0
value = 3,2
persistent = 1

[state 520,12]
type = afterimage
trigger1 = time = 0
time = 500
PalBright = 0, 0, 200
PalContrast = 255, 255, 255
PalAdd = 0, 0, 0
PalMul = 0.5, 0.5, 1.8
framegap = 2
length = 11

[state 519,13]
type = changeanim
trigger1 = anim != 518 && vel x < 0
value = 518

[state 519,14]
type = changeanim
trigger1 = anim != 516 && vel x > 0
value = 516

[state 519,15]
type = playerpush
trigger1 = time > 0
value = 0

[State 519,16]
type = DestroySelf
trigger1 = screenpos x != [-100,420]
trigger2 = screenpos y != [-100,340]
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
; Hyper Megaman
[Statedef 1000]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1000                       
sprpriority = 2                 

[State 1000,1]
type = Explod
trigger1 = time = 2 && pos y = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[state 1000,2]
type = playerpush
trigger1 = 1
value = 0

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 5
var(14) = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 47
var(14) = 0

[State 3000, Helper]
type = Helper
trigger1 = animelem = 5
stateno = 8500
supermovetime = 99999999
pos = ceil(8*const(size.xscale)),ceil(-55*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 5
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 5,< 0
value = SCA

[state 1000,7]
type = playsnd
trigger1 = animelem = 1
value = 13,2
volume = 255
volumescale = 255
channel = 0

[state 1000,9]
type = palfx
trigger1 = time = [26,30]
add = 50,50,50
time = 1

[state 1000,10]
type = palfx
trigger1 = time = [31,35]
add = 100,100,100
time = 1

[state 1000,11]
type = palfx
trigger1 = time = [36,40]
add = 150,150,150
time = 1

[state 1000,12]
type = palfx
trigger1 = time = [41,57]
add = 200,200,200
time = 1

[state 1000,13]
type = palfx
triggerall = Time = [60,160]
trigger1 = Time % 10 = 6
sinadd = 100,100,100, 17
persistent = 1
time = 8

[state 1000,14]
type = playsnd
trigger1 = animelem = 34
value = 23,1
channel = 4

[State 1000,15]
type = Explod
trigger1 = animelem = 34
anim = 1001
id = 1000
postype = p1
pos = 93,-120
ownpal = 1
bindtime = -1
removetime = 55
scale = .83,1.07
sprpriority = 3
persistent = 0
removeongethit = 1

[state 1000,14]
type = playsnd
trigger1 = animelem = 16
value = 5,7
volume = 150
volumescale = 150

[State 0, Explod]
type=Explod
trigger1=AnimElem=16
anim=3032
pos=-119,-153
postype=p1
supermovetime=1
sprpriority=4
ownpal=1
removeongethit=1

[State 0, Explod]
type=Explod
trigger1=AnimElem=16
anim=3033
pos=-111,-174
postype=p1
supermovetime=1
sprpriority=4
ownpal=1
removeongethit=1

[State 0, Explod]
type=Explod
trigger1=AnimElem=16
anim=3034
pos=-75,-165
postype=p1
supermovetime=1
sprpriority=4
ownpal=1
removeongethit=1

[State 0, Explod]
type=Explod
trigger1=AnimElem=16
anim=3035
pos=-35,-181
postype=p1
supermovetime=1
sprpriority=4
ownpal=1
removeongethit=1

[State 0, Explod]
type=Explod
trigger1=AnimElem=16
anim=3021
pos=67,-159
postype=p1
supermovetime=1
sprpriority=4
ownpal=1
removeongethit=1

[State 0, Explod]
type=Explod
trigger1=AnimElem=16
anim=3024
pos=85,-24
postype=p1
supermovetime=1
sprpriority=4
ownpal=1
removeongethit=1

[State 0, Explod]
type=Explod
trigger1=AnimElem=16
anim=3025
ID=3040
pos= 83,-11
postype=p1
supermovetime=1
sprpriority=4
ownpal=1
removeongethit=1

[State 0, Explod]
type=Explod
trigger1=AnimElem=7
anim=3045
pos= 0,-60
postype=p1
supermovetime=1
sprpriority=4
ownpal=1
removeongethit=1

[State 1000,16]
type = Projectile
trigger1 = animelem = 34
offset = 104, -120
projid = 1002
projanim = 1002
projhits = 20
projsprpriority = -1
projscale = .83,1.07
projremovetime = 55
velocity = 0,0
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
projmisstime = 4
accel = 0, 0
attr = A, NA
animtype = Hard                 
guardflag = MA  
damage    = 20,5
hitflag = MAFP
guardflag = MA
priority = 3
pausetime = 0,3
sparkno = s9999
sparkxy = 0,0
guard.sparkno = s8050
guardsound = S6,0
air.type = low
ground.type = low
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = 0.7, -4
air.juggle = 0
yaccel = 0.99
air.velocity = 0.7,-0.2
air.fall = 1
p2stateno = 13001
fall = 1

[State 181, 3]
type = Explod
trigger1 = projhit1002 = 1
postype = P2
pos = 0, -35
sprpriority = 2
scale = 0.5,0.5
anim = 8003
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[state 1000,17]
type = playsnd
trigger1 = animelem = 34
value = 13,1
volume = 255
volumescale = 255
channel = 0

[state 1000,18]
type = nothitby
trigger1 = animelem = 33, >= 0 && animelem = 38, < 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 1000,21]
type = playsnd
trigger1 = projhit = 1
value = 5,2
volume = 215
volumescale = 215
channel = 3

[State 1000,22]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype = up
damage   = 30,5
hitflag = MAFD
guardflag = MA
pausetime = 10,10
sparkno = S8002
guard.sparkno = S8050
sparkxy =  0,-10
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
air.hittime = 20
ground.velocity = -3, -17
guard.velocity = -20
yaccel = 0.77
air.velocity = -3,-17
airguard.velocity = -20,-2
fall = 1

[State 0, VarSet]
type = VarSet
trigger1 = p2stateno = 13001
var(55) = 1
value = 0

[State 1000,23]
type = Projectile
trigger1 = time = 108 || time = 137
offset = 0, -93
projscale = .83,1.07
projanim = 1003
projremove = 0
projsprpriority = 5
velocity = 9,0
accel = 0, 0
attr = A, NA
damage    = 7,3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,5
pausetime = var(55),var(55)
sparkno = S8002 
guard.sparkno = S8050
sparkxy = 0,0
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
guard.sparkno = S449
ground.hittime  = 5
air.hittime = 5
yaccel = 1.00
down.velocity = -6.8,-9
ground.velocity = -11, -10
air.juggle = 0
air.velocity = var(55),var(55)
air.velocity = -11,-4
air.fall = 1
fall = 1

[State 1000,24]
type = Projectile
trigger1 = time = 102 || time = 124
offset = 53, -47
projanim = 1004
projscale = .83,1.07
projremove = 0
projsprpriority = 5
velocity = 9,0
accel = 0, 0
attr = A, NA
damage    = 7,3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,5
pausetime = var(55),var(55)
sparkno = S8002 
guard.sparkno = S8050
sparkxy = 0,0
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
guard.sparkno = S449
ground.hittime  = 5
air.hittime = 5
yaccel = 1.00
down.velocity = -6.8,-9
ground.velocity = -11, -10
air.juggle = 0
air.velocity = var(55),var(55)
air.velocity = -11,-4
air.fall = 1
fall = 1

[State 1000,25]
type = Projectile
trigger1 = time = 114 || time = 146
offset = -35, -40
projanim = 1005
projscale = .83,1.07
projremove = 0
projsprpriority = 5
velocity = 9,0
attr = A, NA
damage    = 7,3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,5
pausetime = var(55),var(55)
sparkno = S8002 
guard.sparkno = S8050
sparkxy = 0,0
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
guard.sparkno = S449
ground.hittime  = 5
air.hittime = 5
yaccel = 1.00
down.velocity = -6.8,-9
ground.velocity = -11, -10
air.juggle = 0
air.velocity = var(55),var(55)
air.velocity = -11,-4
air.fall = 1
fall = 1

[State 1000,26]
type = Projectile
trigger1 = time = 88 || time = 124
offset = -25, -117
projanim = 1006
projscale = .83,1.07
projremove = 0
projsprpriority = 5
projheightbound = -1000,1
velocity = 9,-9
attr = A, NA
damage    = 7,3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,5
pausetime = var(55),var(55)
sparkno = S8002 
guard.sparkno = S8050
sparkxy = 0,0
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
guard.sparkno = S449
ground.hittime  = 5
air.hittime = 5
yaccel = 1.00
down.velocity = -6.8,-9
ground.velocity = -11, -10
air.juggle = 0
air.velocity = var(55),var(55)
air.velocity = -11,-4
air.fall = 1
fall = 1

[State 1000,27]
type = Projectile
trigger1 = time = 88 || time = 124
offset = 25, -131
projanim = 1007
projscale = .83,1.07
projremove = 0
projsprpriority = 5
projheightbound = -1000,1
velocity = 9,-3
attr = A, NA
damage    = 7,3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,5
pausetime = var(55),var(55)
sparkno = S8002 
guard.sparkno = S8050
sparkxy = 0,0
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
guard.sparkno = S449
ground.hittime  = 5
air.hittime = 5
yaccel = 1.00
down.velocity = -6.8,-9
ground.velocity = -11, -10
air.juggle = 0
air.velocity = var(55),var(55)
air.velocity = -11,-4
air.fall = 1
fall = 1

[State 1000,28]
type = Projectile
trigger1 = time = 88 || time = 124
offset = -25, -131
projanim = 1008
projscale = .83,1.07
projremove = 0
projsprpriority = 5
projheightbound = -1000,1
velocity = 9,1.5
attr = A, NA
damage    = 7,3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,5
pausetime = var(55),var(55)
sparkno = S8002 
guard.sparkno = S8050
sparkxy = 0,0
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
guard.sparkno = S449
ground.hittime  = 5
air.hittime = 5
yaccel = 1.00
down.velocity = -6.8,-9
ground.velocity = -11, -10
air.juggle = 0
air.velocity = var(55),var(55)
air.velocity = -11,-4
air.fall = 1
fall = 1

[State 1000,29]
type = Projectile
trigger1 = time = 88 || time = 124
offset = 25, -117
projanim = 1009
projscale = .83,1.07
projremove = 0
projsprpriority = 5
projheightbound = -1000,1
velocity = 9,0
attr = A, NA
damage    = 7,3
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,5
pausetime = var(55),var(55)
sparkno = S8002 
guard.sparkno = S8050
sparkxy = 0,0
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
guard.sparkno = S449
ground.hittime  = 5
air.hittime = 5
yaccel = 1.00
down.velocity = -6.8,-9
ground.velocity = -11, -10
air.juggle = 0
air.velocity = var(55),var(55)
air.velocity = -11,-4
air.fall = 1
fall = 1


[state 1000,30]
type = Helper
trigger1 = animelem = 5
type = normal
name = "Beat"
ID = 1110
pos = -20, -270
postype = back
stateno = 1110
supermovetime = 9999
ownpal = 1

[state 1000,31]
type = Helper
trigger1 = animelem = 5
type = normal
name = "Flip Top"
ID = 1111
pos = 20, -260
postype = front
stateno = 1115
supermovetime = 9999
facing = -1
ownpal = 1

[State 1000,33]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; Hit by Hyper Rockman
[Statedef 13001]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5012

[State 10210, Turn]
type = Turn
trigger1 = !Time && !(p2dist X < 0 && facing != enemyNear, facing) && (facing = enemyNear, facing)
value = 1

[State 10210, VelSet]
type = VelSet
trigger1 = time = 1
x = 0.4
y = 0

[State 10210, ChangeAnim]
type = ChangeAnim
triggerall = ((enemyNear, StateNo = 3000) && (enemyNear, AnimElem = 33, >= 0)) || ((enemyNear, StateNo = 3050) && (enemyNear, AnimElem = 30, >= 0)) || ((enemyNear, StateNo != 3000) && (enemyNear, StateNo != 3050))
trigger1 = Time > 6
value = 5050

[State 10210, Gravity]
type = Gravity
triggerall = ((enemyNear, StateNo = 3000) && (enemyNear, AnimElem = 33, >= 0)) || ((enemyNear, StateNo = 3050) && (enemyNear, AnimElem = 30, >= 0)) || ((enemyNear, StateNo != 3000) && (enemyNear, StateNo != 3050))
trigger1 = Time > 6


[State 10210, VelSet]
type = VelSet
triggerall = ((enemyNear, StateNo = 3000) && (enemyNear, AnimElem = 33, >= 0)) || ((enemyNear, StateNo = 3050) && (enemyNear, AnimElem = 30, >= 0)) || ((enemyNear, StateNo != 3000) && (enemyNear, StateNo != 3050))
trigger1 = Time > 6
trigger1 = Alive
x = -3
y = -1
persistent = 0

[State 9910, VelAdd]
type = VelAdd
trigger1 = Time > 16
y = gethitvar(yaccel)

[State 10210, SelfState]
type = SelfState
trigger1 = Time > 16
value = 5050

;---------------------------------------------------------------------------
; Beat (for supers 1)
[Statedef 1110]
type = A
ctrl = 0
anim = 1110
velset = 0,0
physics = N
sprpriority = 4

[state 1110,1]
type = velset
trigger1 = 1
x = (rootdist x) / 15
y = (rootdist y - 50) / 7

[state 1110,2]
type = palfx
trigger1 = time = [8,9]
add = 100,100,100
time = 1

[state 1110,3]
type = palfx
trigger1 = time = [10,11]
add = 150,150,150
time = 1

[state 1110,4]
type = palfx
trigger1 = time = [12,13]
add = 200,200,200
time = 1

[state 1110,5]
type = palfx
trigger1 = time = [14,15]
add = 255,255,255
time = 1

[State 1110,6]
type = ChangeState
trigger1 = Time = 15
value = 1111
;---------------------------------------------------------------------------
; Beat (Super Move 2)
[Statedef 1111]
type = A
ctrl = 0
anim = 1110
physics = N
sprpriority = -4

[state 1111,1]
type = assertspecial
trigger1 = 1
flag = invisible

[state 1111,2]
type = bindtoroot
trigger1 = 1
time = 1
pos = 0, -50

[state 1111,3]
type = changestate
trigger1 = root, stateno != [1000, 1099]
trigger2 = root, stateno = 1000 && root, time = 180
trigger3 = root, stateno = 1032
value = 1112
;---------------------------------------------------------------------------
; Beat (Super Move 3)
[Statedef 1112]
type = A
ctrl = 0
anim = 1110
physics = N
sprpriority = -4

[state 1112,1]
type = velset
trigger1 = time = 0
x = -7
y = -7

[state 1112,2]
type = palfx
trigger1 = time = [0,2]
add = 255,255,255
time = 1

[state 1112,3]
type = palfx
trigger1 = time = [3,4]
add = 200,200,200
time = 1

[state 1112,4]
type = palfx
trigger1 = time = [5,6]
add = 150,150,150
time = 1

[state 1112,5]
type = palfx
trigger1 = time = [7,8]
add = 100,100,100
time = 1

[state 1112,6]
type = DestroySelf
trigger1 = time = 35
;---------------------------------------------------------------------------
; Fliptop (for supers 1)
[Statedef 1115]
type = A
ctrl = 0
anim = 1111
velset = 0,0
physics = N
sprpriority = 4

[state 1115,1]
type = velset
trigger1 = 1
x = rootdist x / 15
y = (rootdist y - 50)/ 7

[state 1115,2]
type = palfx
trigger1 = time = [8,9]
add = 100,100,100
time = 1

[state 1115,3]
type = palfx
trigger1 = time = [10,11]
add = 150,150,150
time = 1

[state 1115,4]
type = palfx
trigger1 = time = [12,13]
add = 200,200,200
time = 1

[state 1115,5]
type = palfx
trigger1 = time = [14,15]
add = 255,255,255
time = 1

[State 1115,6]
type = ChangeState
trigger1 = Time = 15
value = 1116
;---------------------------------------------------------------------------
; Flip Top (Super Move 2)
[Statedef 1116]
type = A
ctrl = 0
anim = 1111
physics = N
sprpriority = -4

[state 1116,1]
type = assertspecial
trigger1 = 1
flag = invisible

[state 1116,2]
type = bindtoroot
trigger1 = 1
time = 1
pos = 0, -50

[state 1116,3]
type = changestate
trigger1 = root, stateno != [1000, 1099]
trigger2 = root, stateno = 1000 && root, time = 180
value = 1117
;---------------------------------------------------------------------------
; Flip Top (Super Move 3)
[Statedef 1117]
type = A
ctrl = 0
anim = 1111
physics = N
sprpriority = -4

[state 1117,1]
type = velset
trigger1 = time = 0
x = -7
y = -7

[state 1117,2]
type = palfx
trigger1 = time = [0,2]
add = 255,255,255
time = 1

[state 1117,3]
type = palfx
trigger1 = time = [3,4]
add = 200,200,200
time = 1

[state 1117,4]
type = palfx
trigger1 = time = [5,6]
add = 150,150,150
time = 1

[state 1117,5]
type = palfx
trigger1 = time = [7,8]
add = 100,100,100
time = 1

[state 1117,6]
type = DestroySelf
trigger1 = time = 35
;---------------------------------------------------------------------------
; Beat Plane
[Statedef 1030]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1030                       
sprpriority = 2                 

[State 1030,0]
type = Explod
trigger1 = time = 2 && pos y = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 5
var(14) = 1

[State 3000, Helper]
type = Helper
trigger1 = animelem = 5
stateno = 8500
supermovetime = 99999999
pos = ceil(8*const(size.xscale)),ceil(-55*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 5
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 5,< 0
value = SCA

[State 3000, 10]
type = Helper
trigger1 = time = 71
name = "Timer"
StateNo = 3030
postype = left
pos = 0, 0
ownpal = 1  

[state 1030,5]
type = playsnd
trigger1 = animelem = 2
value = 14,1
volume = 255
volumescale = 255
channel = 0

[state 1030,6]
type = palfx
trigger1 = time = [26,30]
add = 50,50,50
time = 1

[state 1030,7]
type = palfx
trigger1 = time = [31,35]
add = 100,100,100
time = 1

[state 1030,8]
type = palfx
trigger1 = time = [36,40]
add = 150,150,150
time = 1

[state 1030,8]
type = palfx
trigger1 = time = [41,45]
add = 200,200,200
time = 1

[state 1030,8]
type = palfx
trigger1 = time = [46,63]
add = 255,255,255
time = 1

[state 1030,10]
type = Helper
trigger1 = animelem = 5
name = "Beat"
ID = 1110
pos = -20, -270
postype = back
stateno = 1110
supermovetime = 9999
ownpal = 1

[State 1030,11]
type = ChangeState
trigger1 = AnimTime = 0
value = 1031
ctrl = 0
;---------------------------------------------------------------------------
; Beat Plane (flight)
[Statedef 1031]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1031                       
poweradd = 0                   
sprpriority = 2                 

[state 1031,2]
type = palfx
trigger1 = time = [0,4]
trigger2 = time = [166, 170]
add = 255,255,255
time = 1
persistent = 1

[state 1031,3]
type = velset
trigger1 = command != "holdback" && command != "holdfwd"
x = 0

[state 1031,4]
type = velset
trigger1 = command != "holdup" && command != "holddown"
trigger2 = pos Y >= 0 && vel y > 0
trigger3 = screenpos y != [80,240]
y = 0

[state 1031,5]
type = velset
trigger1 = command = "holdfwd"
x = 6

[state 1031,6]
type = velset
trigger1 = command = "holdback"
x = -6

[state 1031,7]
type = velset
trigger1 = command = "holdup" && screenpos y = [80,240]
y = -6

[state 1031,8]
type = velset
trigger1 = command = "holddown" && Pos Y < 0
y = 6

[state 1031,9]
type = turn
trigger1 = p2dist x <= -5

[State 1031,10]
type = Explod
trigger1 = numexplod(1032) = 0 && facing = 1
anim = 1032
id = 1032
postype = p1
scale = .83,1.07
pos = -35,-53
ownpal = 0
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 1031,11]
type = Explod
trigger1 = numexplod(11032) = 0 && facing = -1
anim = 1032
id = 11032
postype = p1
scale = .83,1.07
pos = -35,-53
ownpal = 0
bindtime = -1
sprpriority = 2
removeongethit = 1

[state 1031,12]
type = removeexplod
trigger1 = facing = -1
id = 1032

[state 1031,13]
type = removeexplod
trigger1 = facing = 1
id = 11032

[State 1031,14]
type = Explod
trigger1 = numexplod(1037) = 0 && facing = 1
anim = 1037
id = 1037
postype = p1
scale = .83,1.07
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[State 1031,15]
type = Explod
trigger1 = numexplod(11037) = 0 && facing = -1
anim = 1037
id = 11037
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 1
removeongethit = 1

[state 1031,16]
type = removeexplod
trigger1 = facing = -1
id = 1037

[state 1031,17]
type = removeexplod
trigger1 = facing = 1
id = 11037

[State 1031,18]
type = Explod
trigger1 = numexplod(1034) = 0 && facing = 1
anim = 1034
id = 1034
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1031,19]
type = Explod
trigger1 = numexplod(11034) = 0 && facing = -1
anim = 1034
id = 11034
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 3
removeongethit = 1

[state 1031,20]
type = removeexplod
trigger1 = facing = -1
id = 1034

[state 1031,21]
type = removeexplod
trigger1 = facing = 1
id = 11034

[State 1031,22]
type = Explod
trigger1 = numexplod(1033) = 0 && facing = 1
anim = 1033
id = 1033
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 5
removeongethit = 1

[State 1031,23]
type = Explod
trigger1 = numexplod(11033) = 0 && facing = -1
anim = 1033
id = 11033
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 5
removeongethit = 1

[state 1031,24]
type = removeexplod
trigger1 = facing = -1
id = 1033

[state 1031,25]
type = removeexplod
trigger1 = facing = 1
id = 11033

[State 1031,26]
type = Explod
triggerall = numexplod(1038) = 0 && facing = 1
trigger1 = command = "a" || command = "b" || command = "c" && time % 1 = 0
anim = 1038
id = 1038
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 4
removetime = -2
removeongethit = 1

[State 1031,27]
type = Explod
triggerall = numexplod(11038) = 0 && facing = -1
trigger1 = command = "a" || command = "b" || command = "c" && time % 1 = 0
anim = 1038
id = 11038
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 4
removetime = -2
removeongethit = 1

[state 1031,28]
type = removeexplod
trigger1 = facing = -1
id = 1038

[state 1031,29]
type = removeexplod
trigger1 = facing = 1
id = 11038


[state 1031,31]
type = playsnd
triggerall = numexplod(4038) = 0
trigger1 = command = "x" || command = "y" || command = "z" && time % 1 = 0
value = 4,5
volume = 230
volumescale = 230

[State 1031,32]
type = Explod
triggerall = numexplod(4038) = 0
trigger1 = command = "x" || command = "y" || command = "z" && time % 1 = 0
anim = 1140
id = 4038
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 4
removetime = -2
removeongethit = 1

[State 1031,33]
type = Projectile
trigger1 = numexplod(4038) = 1 && time % 8 = 0
projanim = 1035
projhitanim = 1039
offset = 55, -29
velocity = 7
projsprpriority = 2
numhits = 1
attr = S, SA
damage   = 7,1
guardflag = MA
hitflag = MAFD
animtype = Medium
pausetime = 0,12
sparkno = S8002
sparkxy = 0,0
guard.sparkno = S8050
hitsound   = s5,2
guardsound = s6,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
down.velocity = -9,-7
guard.velocity = -8
ground.velocity = -8
air.animtype = back
air.velocity = -3,-1
airguard.velocity = -0.5

[State 1031,34]
type = Width
trigger1 = Time = [0, 180]
value = 40, 40

[State 1031,35]
type = Projectile
trigger1 = (numexplod(1038) = 1 || numexplod(11038) = 1) && time % 8 = 0
projanim = 1036
projhitanim = 8080
projid = 8080
projshadow = 68,68,68
offset = 0, -18
velocity = 4, 0
accel = 0,0.6
projsprpriority = 5
numhits = 1
attr = S, SA
damage   = 10,1
guardflag = MA
hitflag = MAFD
animtype = Medium
pausetime = 0,12
sparkno = S8002
sparkxy = 0,0
guard.sparkno = S8050
hitsound   = s5,6
guardsound = s6,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
guard.velocity = -8
down.velocity = -9,-7
ground.velocity = -8
air.animtype = back
air.velocity = -3,-1
airguard.velocity = -0.5

[State 1031,37]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0
value = 1032
ctrl = 0
;---------------------------------------------------------------------------
; Beat Plane (end)
[Statedef 1032]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = -1,-6                    
ctrl = 0                      
anim = 88                       
poweradd = 0                   
sprpriority = -1                 

[state 1032,1]
type = removeexplod
trigger1 = 1
id = 1033

[state 1032,2]
type = removeexplod
trigger1 = 1
id = 1034

[state 1032,3]
type = removeexplod
trigger1 = 1
id = 1032

[state 1032,4]
type = removeexplod
trigger1 = 1
id = 1037

[state 1032,5]
type = removeexplod
trigger1 = 1
id = 1038

[state 1032,6]
type = removeexplod
trigger1 = 1
id = 11038

[state 1032,7]
type = removeexplod
trigger1 = 1
id = 11037

[state 1032,8]
type = removeexplod
trigger1 = 1
id = 11033

[state 1032,9]
type = removeexplod
trigger1 = 1
id = 11034

[state 1032,10]
type = removeexplod
trigger1 = 1
id = 11032

[state 1032,11]
type = removeexplod
trigger1 = 1
id = 1046

[state 1032,12]
type = removeexplod
trigger1 = 1
id = 1047

[state 1032,13]
type = removeexplod
trigger1 = 1
id = 1048

[state 1032,14]
type = removeexplod
trigger1 = 1
id = 1049

[state 1032,15]
type = removeexplod
trigger1 = 1
id = 11046

[state 1032,16]
type = removeexplod
trigger1 = 1
id = 11047

[state 1032,17]
type = removeexplod
trigger1 = 1
id = 11048

[state 1032,18]
type = removeexplod
trigger1 = 1
id = 11049

[state 1032,19]
type = gravity
trigger1 = 1

[state 1032,20]
type = palfx
trigger1 = time = [0,4]
add = 250,250,250
time = 1

[state 1032,21]
type = palfx
trigger1 = time = [5,9]
add = 200,200,200
time = 1

[state 1032,22]
type = palfx
trigger1 = time = [10,14]
add = 150,150,150
time = 1

[state 1032,23]
type = palfx
trigger1 = time = [15,19]
add = 100,100,100
time = 1

[state 1032,24]
type = palfx
trigger1 = time = [20,24]
add = 50,50,50
time = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 1
var(14) = 0

[state 250,11]
type = explod
trigger1 = p2stateno = 328 && p2movetype = H
persistent = 0
anim = 8010
scale = 0.87,0.87
pos = 0, 0
ownpal = 1
sprpriority = 5

[State 1032,26]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
;---------------------------------------------------------------------------
; Rush Drill (start)
[Statedef 1040]
type    = S                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1030                       
sprpriority = 2                 

[State 1000,1]
type = Explod
trigger1 = time = 2 && pos y = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 5
var(14) = 1

[State 3000, Helper]
type = Helper
trigger1 = animelem = 5
stateno = 8500
supermovetime = 99999999
pos = ceil(8*const(size.xscale)),ceil(-55*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 5
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 5,< 0
value = SCA

[State 3000, 10]
type = Helper
trigger1 = time = 71
name = "Timer"
StateNo = 3030
postype = left
pos = 0, 0
ownpal = 1     

[state 1040,10]
type = playsnd
trigger1 = animelem = 2
value = 15,1
volume = 255
volumescale = 255

[state 1030,6]
type = palfx
trigger1 = time = [26,30]
add = 50,50,50
time = 1

[state 1030,7]
type = palfx
trigger1 = time = [31,35]
add = 100,100,100
time = 1

[state 1030,8]
type = palfx
trigger1 = time = [36,40]
add = 150,150,150
time = 1

[state 1030,8]
type = palfx
trigger1 = time = [41,45]
add = 200,200,200
time = 1

[state 1030,8]
type = palfx
trigger1 = time = [46,63]
add = 255,255,255
time = 1

[State 1040,11]
type = ChangeState
trigger1 = AnimTime = 0
value = 1041
ctrl = 0

;---------------------------------------------------------------------------
; Rush Drill (drilling)
[Statedef 1041]
type    = S                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1040                       
poweradd = 0                   
sprpriority = 2            

[state 1041,2]
type = playsnd
trigger1 = time = 3 && prevstateno = 1040
value = 15,2
volume = 220
volumescale = 220
channel = 5

[state 1041,3]
type = varset
trigger1 = time = 0 && prevstateno = 1040
v = 5
value = 170

[state 1041,4]
type = varadd
trigger1 = 1
v = 5
value = -1

[state 1041,5]
type = posset
trigger1 = pos y > 0
y = 0

[state 1041,6]
type = palfx
trigger1 = var(5) > 165
trigger2 = var(5) < 5
add = 255,255,255
time = 1
persistent = 1

[state 1041,7]
type = turn
trigger1 = p2dist x <= -5

[State 1041,8]
type = Explod
triggerall = numexplod(1041) = 0 && facing = 1
trigger1 = 1
anim = 1041
id = 1041
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,9]
type = Explod
triggerall = numexplod(11041) = 0 && facing = -1
trigger1 = 1
anim = 1041
id = 11041
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,10]
type = Explod
triggerall = numexplod(1042) = 0 && facing = 1
trigger1 = 1
anim = 1042
id = 1042
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,11]
type = Explod
triggerall = numexplod(11042) = 0 && facing = -1
trigger1 = 1
anim = 1042
id = 11042
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,12]
type = Explod
triggerall = numexplod(1043) = 0 && facing = 1
trigger1 = 1
anim = 1043
id = 1043
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,13]
type = Explod
triggerall = numexplod(11043) = 0 && facing = -1
trigger1 = 1
anim = 1043
id = 11043
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[state 1041,14]
type = removeexplod
trigger1 = facing = -1
trigger2 = vel x <= 0
trigger3 = vel x >= 4
id = 1041

[state 1041,15]
type = removeexplod
trigger1 = facing = 1
trigger2 = vel x <= 0
trigger3 = vel x >= 4
id = 11041

[state 1041,16]
type = removeexplod
trigger1 = facing = -1
trigger2 = vel x >= 0
id = 1042

[state 1041,17]
type = removeexplod
trigger1 = facing = 1
trigger2 = vel x >= 0
id = 11042

[state 1041,18]
type = removeexplod
trigger1 = facing = -1
trigger2 = vel x < 4
id = 1043

[state 1041,19]
type = removeexplod
trigger1 = facing = 1
trigger2 = vel x < 4
id = 11043

[State 1041,20]
type = Explod
triggerall = numexplod(1046) = 0 && facing = 1
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
anim = 1046
id = 1046
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,21]
type = Explod
triggerall = numexplod(11046) = 0 && facing = -1
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
anim = 1046
id = 11046
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,22]
type = Width
trigger1 = 1
value = 11, 29

[state 1041,23]
type = velset
trigger1 = command != "holdfwd" && command != "holdback" && vel x < 3
x = 0

[state 1041,24]
type = velset
trigger1 = command = "holdfwd" && vel x < 3.25
x = 3.25

[state 1041,25]
type = velmul
triggerall = command = "holdback" && vel x < 0
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
x = -9

[state 1041,26]
type = velset
trigger1 = Command = "holdback" && vel x < 0.1;3.25
x = -2.5

[state 1041,27]
type = velset
trigger1 = vel x > 8
x = 8

[state 1041,28]
type = veladd
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
x = (21 - vel x)

[state 1041,29]
type = veladd
trigger1 = vel x > 0
x = -0.25

[state 1000,21]
type = playsnd
trigger1 = movehit = 1
value = 5,2
volume = 215
volumescale = 215
channel = 3

[state 1041,31]
type = hitdef
trigger1 = var(5) > 14 && time % 7 = 0 && p2statetype != A
attr = A, NA
damage    = 13,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,-6
guardsound = S6,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 13
yaccel = 0.88
ground.velocity = -8
air.juggle = 0
air.velocity = -6,-5
air.fall = 1
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6

[state 1041,32]
type = hitdef
trigger1 = var(5) <= 14 && time % 7 = 0
attr = A, NA
animtype = up
damage    = 20,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S8002
sparkxy = 0,-6
guard.sparkno = S8050
guardsound = S6,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 60
ground.velocity = -3, -20
air.juggle = 0
air.velocity = -3,-20
air.fall = 1
fall = 1
yaccel = 0.76
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6
p2stateno = 720

[state 1041,34]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1
 
[state 1041,35]
type = changestate
trigger1 = command = "holdup" && command != "holdfwd" && command != "holdback"
value = 1042

[state 1041,36]
type = changestate
trigger1 = command = "holdup" && command = "holdfwd" && command != "holdback"
value = 1043

[state 1041,47]
type = changestate
trigger1 = command = "holdup" && command != "holdfwd" && command = "holdback"
value = 1044

[State 1041,38]
type = ChangeState
trigger1 = var(5) <= -1 && pos y < 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0 && pos y < 0
value = 1032
ctrl = 0

[State 1041,39]
type = ChangeState
trigger1 = var(5) <= -1 && pos y >= 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0 && pos y >= 0
value = 1045
ctrl = 0
;---------------------------------------------------------------------------
; Rush Drill (jump up)
[Statedef 1042]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1040                       
poweradd = 0                   
sprpriority = 2                 

[State 1042,1]
type = Explod
triggerall = numexplod(1047) = 0 && facing = 1
trigger1 = time = 1
anim = 1047
id = 1047
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[State 1042,2]
type = Explod
triggerall = numexplod(11047) = 0 && facing = -1
trigger1 = time = 1
anim = 1047
id = 11047
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[state 1042,3]
type = removeexplod
trigger1 = 1
id = 1041

[state 1042,4]
type = removeexplod
trigger1 = 1
id = 11041

[state 1042,5]
type = removeexplod
trigger1 = 1
id = 1042

[state 1042,6]
type = removeexplod
trigger1 = 1
id = 11042

[state 1042,7]
type = removeexplod
trigger1 = 1
id = 1043

[state 1042,8]
type = removeexplod
trigger1 = 1
id = 11043

[state 1042,9]
type = varadd
trigger1 = 1
v = 5
value = -1

[state 1042,10]
type = turn
trigger1 = p2dist x <= -5

[State 1042,11]
type = Width
trigger1 = 1
value = 11, 29

[state 1042,12]
type = veladd
trigger1 = time = 0
y = -9.5

[state 1042,13]
type = veladd
trigger1 = time > 1
y = 0.65

[state 1000,21]
type = playsnd
trigger1 = movehit = 1
value = 5,2
volume = 215
volumescale = 215
channel = 3

[state 1042,15]
type = hitdef
trigger1 = var(5) > 14 && time % 7 = 0
attr = A, NA
damage    = 13,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,-6
guardsound = S6,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 13
yaccel = 0.88
ground.velocity = -8
air.juggle = 0
air.velocity = -6,-5
air.fall = 1
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6

[state 1042,16]
type = hitdef
trigger1 = var(5) <= 14 && time % 7 = 0
attr = A, NA
animtype = up
damage    = 20,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S8002
sparkxy = 0,-6
guard.sparkno = S8050
guardsound = S6,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 60
ground.velocity = -3, -20
air.juggle = 0
air.velocity = -3,-20
air.fall = 1
fall = 1
yaccel = 0.76
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6
p2stateno = 720

[state 1042,18]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 1042,19]
type = changestate
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
value = 1041

[State 1042,20]
type = ChangeState
trigger1 = var(5) <= -1 && pos y < 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0 && pos y < 0
value = 1032
ctrl = 0

[State 1042,21]
type = ChangeState
trigger1 = var(5) <= -1 && pos y >= 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0 && pos y >= 0
value = 1045
ctrl = 0

;---------------------------------------------------------------------------
; Rush Drill (jump fwd)
[Statedef 1043]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1040                       
poweradd = 0                   
sprpriority = 2                 

[State 1043,1]
type = Explod
triggerall = numexplod(1048) = 0 && facing = 1
trigger1 = time = 1
anim = 1048
id = 1048
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[State 1043,2]
type = Explod
triggerall = numexplod(11048) = 0 && facing = -1
trigger1 = time = 1
anim = 1048
id = 11048
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[state 1043,3]
type = removeexplod
trigger1 = 1
id = 1046

[state 1043,4]
type = removeexplod
trigger1 = 1
id = 11046

[state 1043,5]
type = removeexplod
trigger1 = 1
id = 1041

[state 1043,6]
type = removeexplod
trigger1 = 1
id = 11041

[state 1043,7]
type = removeexplod
trigger1 = 1
id = 1042

[state 1043,8]
type = removeexplod
trigger1 = 1
id = 11042

[state 1043,9]
type = removeexplod
trigger1 = 1
id = 1043

[state 1043,10]
type = removeexplod
trigger1 = 1
id = 11043

[state 1043,11]
type = varadd
trigger1 = 1
v = 5
value = -1

[state 1043,12]
type = turn
trigger1 = p2dist x <= -5

[State 1043,13]
type = Width
trigger1 = 1
value = 11, 29

[state 1043,14]
type = veladd
trigger1 = time = 0
x = 3
y = -9.5

[state 1043,15]
type = veladd
trigger1 = time > 1
y = 0.65

[state 1000,21]
type = playsnd
trigger1 = movehit = 1
value = 5,2
volume = 215
volumescale = 215
channel = 3

[state 1043,17]
type = hitdef
trigger1 = var(5) > 14 && time % 7 = 0
attr = A, NA
damage    = 13,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,-6
guardsound = S6,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 13
yaccel = 0.88
ground.velocity = -8
air.juggle = 0
air.velocity = -6,-5
air.fall = 1
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6

[state 1043,18]
type = hitdef
trigger1 = var(5) <= 14 && time % 7 = 0
attr = A, NA
animtype = up
damage    = 20,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S8002
sparkxy = 0,-6
guard.sparkno = S8050
guardsound = S6,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 60
ground.velocity = -3, -20
air.juggle = 0
air.velocity = -3,-20
air.fall = 1
fall = 1
yaccel = 0.76
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6
p2stateno = 720

[state 1043,20]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 1043,21]
type = changestate
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
value = 1041

[State 1043,22]
type = ChangeState
trigger1 = var(5) <= -1 && pos y < 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0 && pos y < 0
value = 1032
ctrl = 0

[State 1043,23]
type = ChangeState
trigger1 = var(5) <= -1 && pos y >= 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0 && pos y >= 0
value = 1045
ctrl = 0
;---------------------------------------------------------------------------
; Rush Drill (jump back)
[Statedef 1044]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1040                       
poweradd = 0                   
sprpriority = 2                 

[State 1044,1]
type = Explod
triggerall = numexplod(1049) = 0 && facing = 1
trigger1 = time = 1
anim = 1049
id = 1049
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[State 1044,2]
type = Explod
triggerall = numexplod(11049) = 0 && facing = -1
trigger1 = time = 1
anim = 1049
id = 11049
postype = p1
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[state 1044,3]
type = removeexplod
trigger1 = 1
id = 1046

[state 1044,4]
type = removeexplod
trigger1 = 1
id = 11046

[state 1044,5]
type = removeexplod
trigger1 = 1
id = 1041

[state 1044,6]
type = removeexplod
trigger1 = 1
id = 11041

[state 1044,7]
type = removeexplod
trigger1 = 1
id = 1042

[state 1044,8]
type = removeexplod
trigger1 = 1
id = 11042

[state 1044,9]
type = removeexplod
trigger1 = 1
id = 1043

[state 1044,10]
type = removeexplod
trigger1 = 1
id = 11043

[state 1044,11]
type = varadd
trigger1 = 1
v = 5
value = -1

[state 1044,12]
type = turn
trigger1 = p2dist x <= -5

[State 1044,13]
type = Width
trigger1 = 1
value = 11, 29

[state 1044,14]
type = veladd
trigger1 = time = 0
x = -2.5
y = -9.5

[state 1044,15]
type = veladd
trigger1 = time > 1
y = 0.65

[state 1000,21]
type = playsnd
trigger1 = movehit = 1
value = 5,2
volume = 215
volumescale = 215
channel = 3

[state 1044,17]
type = hitdef
trigger1 = var(5) > 14 && time % 7 = 0
attr = A, NA
damage    = 13,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,-6
guardsound = S6,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 13
yaccel = 0.88
ground.velocity = -8
air.juggle = 0
air.velocity = -6,-5
air.fall = 1
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6

[state 1044,18]
type = hitdef
trigger1 = var(5) <= 14 && time % 7 = 0
attr = A, NA
animtype = up
damage    = 20,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S8002
sparkxy = 0,-6
guard.sparkno = S8050
guardsound = S6,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 60
ground.velocity = -3, -20
air.juggle = 0
air.velocity = -3,-20
air.fall = 1
fall = 1
yaccel = 0.76
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6
p2stateno = 720

[state 1044,20]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 1044,21]
type = changestate
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
value = 1041

[State 1044,22]
type = ChangeState
trigger1 = var(5) <= -1 && pos y < 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0 && pos y < 0
value = 1032
ctrl = 0

[State 1044,23]
type = ChangeState
trigger1 = var(5) <= -1 && pos y >= 0
trigger2 = numhelper(1750) = 1 && winko = 1 && p2life = 0 && pos y >= 0
value = 1045
ctrl = 0
;---------------------------------------------------------------------------
; Rush Drill (revert)
[Statedef 1045]
type    = S                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1045                       
poweradd = 0                   
sprpriority = 2                 

[state 1045,1]
type = palfx
trigger1 = time = [0,30]
add = 250,250,250
time = 1

[state 1045,2]
type = palfx
trigger1 = time = [31,33]
add = 200,200,200
time = 1

[state 1045,3]
type = palfx
trigger1 = time = [34,36]
add = 150,150,150
time = 1

[state 1045,4]
type = palfx
trigger1 = time = [37,39]
add = 100,100,100
time = 1

[state 1045,5]
type = palfx
trigger1 = time = [40,42]
add = 50,50,50
time = 1

[state 1045,6]
type = removeexplod
trigger1 = 1
id = 1046

[state 1045,7]
type = removeexplod
trigger1 = 1
id = 1047

[state 1045,8]
type = removeexplod
trigger1 = 1
id = 1048

[state 1045,9]
type = removeexplod
trigger1 = 1
id = 1049

[state 1045,10]
type = removeexplod
trigger1 = 1
id = 11046

[state 1045,11]
type = removeexplod
trigger1 = 1
id = 11047

[state 1045,12]
type = removeexplod
trigger1 = 1
id = 11048

[state 1045,13]
type = removeexplod
trigger1 = 1
id = 11049

[state 250,11]
type = explod
trigger1 = p2stateno = 328 && p2movetype = H
persistent = 0
anim = 8010
scale = 0.87,0.87
pos = 0, 0
ownpal = 1
sprpriority = 5

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 1
var(14) = 0

[State 1045,14]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Timer Rush Drill
[Statedef 3030]
type = A
movetype = I
physics = N
anim = 9999

[State 3030, 1]
type = VarSet
trigger1 = time = 0
v = 55
value = parent, var(56)

[State 3030, 2]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 0
ID = 7878
anim = 15900
postype = left
pos = 19, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 3]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 0
ID = 7879
anim = 15902
postype = left
pos = 142, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 4]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 0
ID = 7878
anim = 15901
postype = right
pos = -39, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 5]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 0
ID = 7979
anim = 15902
postype = right
pos = -143, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 6]
type = VarAdd
trigger1 = time > 0
fv = 0
value = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 0
fv = 1
value = fvar(0) / 325

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 0
ID = 7979
scale = fvar(1),0.5

[State 3030, 7]
type = VarSet
trigger1 = time > 0
fv = 1
value = fvar(0) / -325

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 0
ID = 7879
scale = fvar(1),0.5

[State 3030, 9]
type = ParentVarSet
trigger1 = fvar(0) > 165
v = 20
value = 1

[State 3030, 10]
type = RemoveExplod
trigger1 = fvar(0) > 165
trigger2 = parent, Win
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 3230
trigger5 = Parent, MoveType != H

[STate 3030, 11]
type = DestroySelf
trigger1 = fvar(0) > 165
trigger2 = 0
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 3230
trigger5 = Parent, MoveType != H

;---------------------------------------------------------------------------
;MEGAMAN'S RUSH STATES                                         by Jin Kazama
;---------------------------------------------------------------------------
; Rush Falling
[Statedef 1100]
type = A
ctrl = 0
anim = 1100
velset = 0,8
physics = N
sprpriority = -4

[state 1100,1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1100,2]
type = ChangeState
trigger1 = Time = 38
value = 1101
;---------------------------------------------------------------------------
; Rush Landing
[Statedef 1101]
type = S
ctrl = 0
anim = 1101
velset = 0,0
physics = S
sprpriority = -4

[state 1101,1]
type = posset
trigger1 = 1
y = 0

[state 1101,2]
type = palfx
trigger1 = time = [0,3]
add = 160,160,160
time = 1

[state 1101,3]
type = palfx
trigger1 = time = [4,7]
add = 120,120,120
time = 1

[state 1101,4]
type = palfx
trigger1 = time = [8,11]
add = 80,80,80
time = 1

[state 1101,5]
type = palfx
trigger1 = time = [12,15]
add = 40,40,40
time = 1

[State 1101,6]
type = ChangeState
trigger1 = AnimTime = 0
value = 1102
;---------------------------------------------------------------------------
; Rush Standing
[Statedef 1102]
type = S
ctrl = 0
anim = 1102
velset = 0,0
physics = S
sprpriority = -1

[state 1102,1]
type = posset
trigger1 = 1
y = 0

[state 1102,2]
type = turn
trigger1 = facing != root, facing

[state 1102,3]
type = velset
trigger1 = 1
x = 0

[state 1102,4]
type = palfx
trigger1 = 1
add = 0,0,0
time = 1

[State 1102,5] ;Walk Forward
type = ChangeState
trigger1 = rootdist x = [71, 180]
value = 1103

[State 1102,5] ;pre Walk Forward
type = ChangeState
triggerall = root, stateno = 21
trigger1 = rootdist x = [61, 170]
value = 1113

[State 1102,5] ;pre Walk Backward
type = ChangeState
triggerall = root, stateno = 21
trigger1 = rootdist x = [-200, -61]
value = 1114

[State 1102,6] ;Walk Backward
type = ChangeState
trigger1 = rootdist x = [-100, -51]
value = 1104

[State 1102,7] ;Run Forward
type = ChangeState
trigger1 = rootdist x = [141, 260]
value = 1105

[State 1102,8] ;Run Backward
type = ChangeState
trigger1 = rootdist x = [-260, -141]
value = 1106

[State 1102,9] ;Angry
type = ChangeState
trigger1 = root, var(1) > 10
value = 1107

[State 1102,10] ;Sad
type = ChangeState
trigger1 = root, life = 0
value = 1108

[state 1102,11]
type = ChangeState
trigger1 = root, stateno = 1000
trigger1 = root, animelem = 5, = 0
value = 1120

[state 1102,12]
type = ChangeState
trigger1 = root, stateno = 1030
trigger1 = root, animelem = 5, = 0
value = 1125

[state 1102,13]
type = ChangeState
trigger1 = root, stateno = 1040
trigger1 = root, animelem = 5, = 0
value = 1120

[state 1102,14]
type = changestate
trigger1 = root, stateno = 182 || root, stateno = 184 || root, stateno = 185
value = 1124

[state 1102,15]
type = changestate
trigger1 = root, stateno = 181
value = 1126
;---------------------------------------------------------------------------
; Rush Walking Forward
[Statedef 1103]
type = S
ctrl = 0
anim = 1103
velset = 3.5,0
physics = N
sprpriority = -1

[State 1103,1] ;Standing
type = ChangeState
trigger1 = rootdist x = [-50, 50]
value = 1102

[State 1103,2] ;Angry
type = ChangeState
trigger1 = root, var(1) > 10
value = 1107

[state 1103,3]
type = ChangeState
trigger1 = root, stateno = 1000
trigger1 = root, animelem = 5, = 0
value = 1120

[state 1103,4]
type = ChangeState
trigger1 = root, stateno = 1030
trigger1 = root, animelem = 5, = 0
value = 1125

[state 1103,5]
type = ChangeState
trigger1 = root, stateno = 1040
trigger1 = root, animelem = 5, = 0
value = 1120

;---------------------------------------------------------------------------
; Rush Pre Walking Forward
[Statedef 1113]
type = S
ctrl = 0
anim = 1113
velset = 3.5,0
physics = N
sprpriority = -1

[State 1103,1] ;Standing
type = ChangeState
trigger1 = time = 3
value = 1102

;---------------------------------------------------------------------------
; Rush Pre Walking Backward
[Statedef 1114]
type = S
ctrl = 0
anim = 1114
velset = -3.7,0
physics = N
sprpriority = -1

[State 1103,1] ;Standing
type = ChangeState
trigger1 = time = 3
value = 1102

;---------------------------------------------------------------------------
; Rush Walking Backward
[Statedef 1104]
type = S
ctrl = 0
anim = 1104
velset = -3,0
physics = N
sprpriority = -1

[State 1104,1] ;Standing
type = ChangeState
trigger1 = rootdist x = [-50, 50]
value = 1102

[State 1104,2] ;Angry
type = ChangeState
trigger1 = root, var(1) > 10
value = 1107

[state 1104,3]
type = ChangeState
trigger1 = root, stateno = 1000
trigger1 = root, animelem = 5, = 0
value = 1120

[state 1104,4]
type = ChangeState
trigger1 = root, stateno = 1030
trigger1 = root, animelem = 5, = 0
value = 1125

[state 1104,5]
type = ChangeState
trigger1 = root, stateno = 1040
trigger1 = root, animelem = 5, = 0
value = 1120
;---------------------------------------------------------------------------
; Rush Running Forward
[Statedef 1105]
type = S
ctrl = 0
anim = 1105
velset = 5,0
physics = N
sprpriority = -1

[State 1105,1] ;Standing
type = ChangeState
trigger1 = rootdist x = [-50, 100]
value = 1102

[State 1105,2] ;Angry
type = ChangeState
trigger1 = root, var(1) > 10
value = 1107

[state 1105,3]
type = ChangeState
trigger1 = root, stateno = 1000
trigger1 = root, animelem = 5, = 0
value = 1120

[state 1105,4]
type = ChangeState
trigger1 = root, stateno = 1030
trigger1 = root, animelem = 5, = 0
value = 1125

[state 1105,5]
type = ChangeState
trigger1 = root, stateno = 1040
trigger1 = root, animelem = 5, = 0
value = 1120
;---------------------------------------------------------------------------
; Rush Running Backward
[Statedef 1106]
type = S
ctrl = 0
anim = 1106
velset = -4,0
physics = N
sprpriority = -1

[State 1106,1] ;Standing
type = ChangeState
trigger1 = rootdist x = [-50, 100]
value = 1102

[State 1106,2] ;Angry
type = ChangeState
trigger1 = root, var(1) > 10
value = 1107

[state 1106,3]
type = ChangeState
trigger1 = root, stateno = 1000
trigger1 = root, animelem = 5, = 0
value = 1120

[state 1106,4]
type = ChangeState
trigger1 = root, stateno = 1030
trigger1 = root, animelem = 5, = 0
value = 1125

[state 1106,5]
type = ChangeState
trigger1 = root, stateno = 1040
trigger1 = root, animelem = 5, = 0
value = 1120
;---------------------------------------------------------------------------
; Rush Mad
[Statedef 1107]
type = S
ctrl = 0
anim = 1107
velset = 0,0
physics = S
sprpriority = -1

[state 1107,1]
type = velset
trigger1 = 1
x = 0

[State 1107,2] ;Standing
type = ChangeState
trigger1 = root, var(1) = 0
value = 1102

[state 1107,3]
type = ChangeState
trigger1 = root, stateno = 1000
trigger1 = root, animelem = 5, = 0
value = 1120

[state 1107,4]
type = ChangeState
trigger1 = root, stateno = 1030
trigger1 = root, animelem = 5, = 0
value = 1125

[state 1107,5]
type = ChangeState
trigger1 = root, stateno = 1040
trigger1 = root, animelem = 5, = 0
value = 1120
;---------------------------------------------------------------------------
; Rush Sad
[Statedef 1108]
type = S
ctrl = 0
anim = 1108
velset = 0,0
physics = S
sprpriority = -1

[state 1108,1]
type = velset
trigger1 = 1
x = 0

[State 1108,2] ;Standing
type = ChangeState
trigger1 = root, life != 0
value = 1102
;---------------------------------------------------------------------------
; Rush (Super Move 1)
[Statedef 1120]
type = A
ctrl = 0
anim = 1102
physics = N
sprpriority = 4

[state 1120,1]
type = velset
trigger1 = 1
x = rootdist x / 15
y = rootdist y / 7

[state 1120,2]
type = palfx
trigger1 = time = [0,3]
add = 100,100,100
time = 1

[state 1120,3]
type = palfx
trigger1 = time = [4,7]
add = 150,150,150
time = 1

[state 1120,4]
type = palfx
trigger1 = time = [8,11]
add = 200,200,200
time = 1

[state 1120,5]
type = palfx
trigger1 = time = [12,15]
add = 255,255,255
time = 1

[state 1120,6]
type = changestate
trigger1 = root, stateno != [1000, 1099]
value = 1122

[state 1120,7]
type = changestate
trigger1 = time = 15
value = 1121
;---------------------------------------------------------------------------
; Rush (Super Move 2)
[Statedef 1121]
type = A
ctrl = 0
anim = 1102
physics = N
sprpriority = -1

[state 1121,1]
type = assertspecial
trigger1 = 1
flag = invisible

[state 1121,2]
type = bindtoroot
trigger1 = 1
time = 1

[state 1121,3]
type = changestate
trigger1 = root, stateno != [1000, 1099]
trigger2 = root, stateno = 1000 && root, time = 180
trigger3 = root, stateno = 1045 && root, time = 15
trigger4 = root, stateno = 1032 && root, time = 3
value = 1122
;---------------------------------------------------------------------------
; Rush (Super Move 3)
[Statedef 1122]
type = A
ctrl = 0
anim = 1102
physics = N
sprpriority = -1

[state 1122,1]
type = velset
trigger1 = time = 0
x = -5
y = - (pos y) / 13

[state 1122,2]
type = velmul
trigger1 = pos y >= -5
y = 0

[state 1122,3]
type = palfx
trigger1 = time = [0,3]
add = 255,255,255
time = 1

[state 1122,4]
type = palfx
trigger1 = time = [4,7]
add = 200,200,200
time = 1

[state 1122,5]
type = palfx
trigger1 = time = [8,11]
add = 150,150,150
time = 1

[state 1122,6]
type = palfx
trigger1 = time = [12,15]
add = 100,100,100
time = 1

[state 1122,7]
type = changestate
trigger1 = time = 15
value = 1102
;---------------------------------------------------------------------------
; Rush Rising
[Statedef 1125]
type = A
ctrl = 0
anim = 1112
velset = 0,-8
physics = N
sprpriority = -1

[state 1125,1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 1125,2]
type = AssertSpecial
trigger1 = time > 30
flag = invisible

[state 1125,3]
type = velset
trigger1 = time = 30
y = 0

[State 1125,4]
type = ChangeState
trigger1 = root, stateno != [1030,1031]
value = 1100
;---------------------------------------------------------------------------
; Rush Win Pose w/ Dr Light
[Statedef 1124]
type = S
ctrl = 0
anim = 189
velset = 0,0
physics = S
sprpriority = -4

[state 1124,1]
type = posset
trigger1 = 1
y = -5

[state 1124,2]
type = velset
trigger1 = 1
x = 0
;---------------------------------------------------------------------------
; Rush Win Pose (being held by Megaman)
[Statedef 1126]
type = S
ctrl = 0
anim = 1103
velset = 0,0
physics = N
sprpriority = -4

[state 1126,1]
type = velset
trigger1 = time = 0 && rootdist x = [60, 4000]
x = 3.5

[state 1126,2]
type = velset
trigger1 = time = 0 && rootdist x = [-4000, 50]
x = -3.5

[state 1126,3]
type = changeanim
trigger1 = anim != 1104 && vel x < 0
value = 1104

[state 1126,4]
type = velmul
trigger1 = rootdist x = [40,50]
x = 0

[state 1126,5]
type = ChangeAnim
trigger1 = anim != 1126 && rootdist x = [40,50]
value = 1126

[state 1126,6]
type = sprpriority
trigger1 = anim = 1126
value = 5

;---------------------------------------------------------------------------
; Push Block (Stand)
[Statedef 1230]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 130
ctrl = 0

[State 1230, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 37

[State 1230, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "Push Block F"
pos = 0,0
postype = p1
stateno = 1260
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1230, Spark]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 1230, SFX]
type = PlaySnd
trigger1 = Time = 0
value = 1, 3
ignorehitpause = 1


[State 1230, Stop]
type = Velset
trigger1 = Time = [0,30]
x = 0
y = 0

[State 1230, Done]
type = ChangeState
trigger1 = time = 27
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; Push Block (Crouch)
[Statedef 1240]
type    = C
movetype= I
physics = C
velset = 0,0
anim = 131
ctrl = 0

[State 1240, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 37

[State 1240, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "Push Block F"
pos = 0,0
postype = p1
stateno = 1260
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1240, Spark]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 1240, SFX]
type = PlaySnd
trigger1 = Time = 0
value = 1, 3
ignorehitpause = 1

[State 1240, Stop]
type = Velset
trigger1 = Time = [0,30]
x = 0
y = 0

[State 1240, Done]
type = ChangeState
trigger1 = time = 27
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; Push Block (Air)
[Statedef 1250]
type    = A
movetype= I
physics = A
velset = 0,0
anim = 132
ctrl = 0

[State 1250, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 37

[State 1250, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "Push Block F"
pos = 0,0
postype = p1
stateno = 1260
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1250, Spark]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 1250, SFX]
type = PlaySnd
trigger1 = Time = 0
value = 1, 3
ignorehitpause = 1

[State 1250, Stop]
type = Velset
trigger1 = Time = [0,30]
x = 0
y = 0

[State 1250, Done]
type = ChangeState
trigger1 = time = 27
value = 132
ctrl = 1

;---------------------------------------------------------------------------
; Push Block Fwd
[Statedef 1260]
type    = A
movetype= I 
physics = N
velset = 0,0
anim = 1270

[State 1260, Not Get Hit]
type = NotHitBy
Trigger1 = Time >= 0
value = , AA ,AP ,AT
Time = 1

[State 1260, Push]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 1260, Shove]
type = VelSet
trigger1 = Time >= 0
x = 17

[State 1260, Done]
type = DestroySelf
trigger1 = Time = 30

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1]
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 3]
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 4]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 5] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 6] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[state 5150,7]
type = palfx
trigger1 = time = [60,62]
add = 50,50,50
time = 1

[state 5150,8]
type = palfx
trigger1 = time = [63,65]
add = 100,100,100
time = 1

[state 5150,9]
type = palfx
trigger1 = time = [66,68]
add = 150,150,150
time = 1

[state 5150,10]
type = palfx
trigger1 = time = [69,71]
add = 200,200,200
time = 1

[state 5150,11]
type = palfx
trigger1 = time = [72,74]
add = 250,250,250
time = 1

[state 5150,12]
type = assertspecial
trigger1 = time > 74
flag = invisible

[State 5150,13]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,-5
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 0, -2
removetime = 100
removeongethit = 1

[State 5150,14]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = -3,-3
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -1.5, -1.5
removetime = 100
removeongethit = 1

[State 5150,15]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = -5,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -2, 0
removetime = 100
removeongethit = 1

[State 5150,16]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = -3,3
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -1.5, 1.5
removetime = 100
removeongethit = 1

[State 5150,17]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,5
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 0, 2
removetime = 100
removeongethit = 1

[State 5150,18]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 3,3
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 1.5, 1.5
removetime = 100
removeongethit = 1

[State 5150,19]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 5,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 2, 0
removetime = 100
removeongethit = 1

[State 5150,20]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 3,-3
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 1.5, -1.5
removetime = 100
removeongethit = 1

[State 5150,21]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -0.5, -1
removetime = 100
removeongethit = 1

[State 5150,22]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -1, -0.5
removetime = 100
removeongethit = 1

[State 5150,23]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -0.5, 1
removetime = 100
removeongethit = 1

[State 5150,24]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = -1, 0.5
removetime = 100
removeongethit = 1

[State 5150,25]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 0.5, 1
removetime = 100
removeongethit = 1

[State 5150,26]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 1, 0.5
removetime = 100
removeongethit = 1

[State 5150,27]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 0.5, -1
removetime = 100
removeongethit = 1

[State 5150,28]
type = Explod
trigger1 = Time = 74
anim = 444
id = 444
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
sprpriority = -3
persistent = 0
velocity = 1, -0.5
removetime = 100
removeongethit = 1

[state 5150,29]
type = playsnd
trigger1 = time = 74
value = 11,2
volume = 255
volumescale = 255

[State 5150,30]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

; HIT_FALLRECOVER (on the ground) 
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,8,-4)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0


[State 5900, Helper]
type = Helper
trigger1 = roundsexisted = 0
stateno = 9999

[State 5900, VarSet]
type = VarSet
trigger1 = roundsexisted = 0
var(0) = palno = [7,12]

[State 5900, VarRangeSet] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0  && roundno >= 1
value = 0
first = 1
last = 59

[State 5900, VarRangeSet] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0  && roundno >= 1
fvalue = 0


;Put this in Statedef 5900 in your char's cns NOT common1
[State -2, def]
type = VarSet
trigger1 = partner,Authorname != "mouser-MvC2" && Partner,authorname != "DarkWolf13-MvC2"
trigger2 = teammode = single
trigger2 = roundstate < 1
trigger2 = time = [0,1]
var(33) = 0

; Like in vs Series, you always start with 1 power stock...
[State 190, PowerAdd]
type = PowerSet
triggerall = Roundno = 1
trigger1 = time = 0
value = 1000

[state 192,1]
type = Helper
trigger1 = numhelper(1100) = 0 && time = 5
name = "Rush"
ID = 1100
pos = -50, -245
postype = p1
stateno = 1100
size.shadowoffset = -7
supermovetime = 9999
ownpal = 1

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 192

[State 5900, ChangeState] ;Intro for round 1
type = ChangeState
triggerall = !roundsexisted && teammode = turns
trigger1 = roundno != 1
value = 192

[State 5900, ChangeState] ;Intro for round 1
type = ChangeState
triggerall  = roundsexisted
trigger1 = roundno != 1
value = 21

;---------------------------------------------------------------------------
; Waiting off screen after aerial rave
[Statedef 710]
type    = S                     
physics = S                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 0                       
poweradd = 0                   
sprpriority = 2                 


[state 710,1]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 710,2]
type = assertspecial
trigger1 = 1
flag = invisible

[state 710,3]
type = posset
trigger1 = facing = 1
x = -200
y = 0

[state 710,4]
type = posset
trigger1 = facing = -1
x = 200
y = 0

[State 710,5]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 710,6]
type = ChangeState
trigger1 = Time = 20
value = 100

;---------------------------------------------------------------------------
; Dizzy Up
[Statedef 5250]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 5250
poweradd = 0
velset = -3, -17
sprpriority = 1

[State 970, 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

;This resets the dizzy counter back to zero
[State 970, 3]
type = VarSet
trigger1 = Time = 0
v = 34
value = 0

[State 5250, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5250, Gravity]
type = VelAdd
trigger1 = 1
y = 0.3

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[State 5250, recavary]
type = ChangeState
trigger1 = time = 32
value = 5210
ctrl = 1

 

; nGtFNg 
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

; X[p[R{o(wp[) 
	
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 200
volumescale = 200
value = 1,0

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -8
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = f9951
sprpriority = -2
postype = left
under = 1
supermove = 1
bindtime = -1
removetime = 37
scale = 1,1
ownpal = 1


[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(14) = 1 && !numexplod(8505)
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
trigger1 = root,var(14) = 0 || root,var(14) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,WinKo
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
trigger1 = root,var(14) = 0
trigger2 = root,movetype = H


 
[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,17

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,16

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)
  

; VXep 
	 
; ^[QbgJo[ 
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)
 
; ^[Qbg_EA 
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)
 
; ^[QbgoEh 
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5040

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6

[State 9910, PosSet]
type = PosSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -5

[State 1300, 6]
type = PalFX
triggerall = name = "Dhalsim"
trigger1 = animelem = 1
time = 18
sinadd =  255,255,255,43
ignorehitpause = 0

[State 5100, 10]
type = PlaySnd
triggerall = name = "Dhalsim"
trigger1 = Time = 1
value = S3,0

[State 9910, VelSet]
type = VelSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -4
x = 0

[State 9910, VelAdd]
type = VelAdd
triggerall = name = "Dhalsim"
trigger1 = time = 1
y = 0

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .82;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52


; PRE-WALKING
[Statedef 22]
type    = S
physics = S
sprpriority = 0

[State 20, VelSet]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, VelSet]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, VelMul]
type = VelMul
trigger1 = var(51) = 1
x = 1.7

[State 20, ChangeAnim]
type = ChangeAnim
trigger1 = vel x > 0 &&  anim != 22
value = 22

[State 20, ChangeAnim]
type = ChangeAnim
trigger1 = vel x < 0 &&  anim != 23
value = 23


;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]


;[State -2, 0]
;type = DisplayToClipboard
;trigger1 = 1
;text = "Charge = %d Weapon = %d PosY = %d"
;params = Var(1), Var(4), Pos Y

[State 23080, StopSnd]
type = StopSnd
trigger1 = StateNo != 9000
trigger1 = StateNo != 410
trigger1 = StateNo != 1211
channel = 7

[State 0, PlaySnd]
type = PlaySnd
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,10
channel = 4
volume = 155
volumescale = 155

[State 0, PlaySnd]
type = PlaySnd
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,7
channel = 4
volume = 155
volumescale = 155

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1	= NumEnemy && Enemy, StateNo = 703  && !NumExplod(8010)
value = 0,7
channel = 4
volume = 155
volumescale = 155

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 703  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, -10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 20, 2]
type = envshake
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 228  && !NumExplod(8010)
time = 8
freq = 80
ampl = 3

[State 20, 2]
type = envshake
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
time = 8
freq = 80
ampl = 3




;[State -2, 0]
;type = DisplayToClipboard
;trigger1 = 1
;text = "Charge = %d Weapon = %d PosY = %d"
;params = Var(1), Var(4), Pos Y



[State -2, Pre-walking state]
type = ChangeState
;triggerall = !var(59)
trigger1 = prevstateno = 192
trigger2 = RoundNo != 1              ;Enable If Round Number is > 1
trigger2 = RoundState = 1           ;RoundState < 2 and
trigger2 = RoundState = 2
trigger2 = stateno = 0              ;Current state is 0
value = 21
ctrl = 0

[State -2, Remember the last Position (X)]
type = VarSet
triggerall = RoundState < 2
trigger1 = stateno = [0, 21] ;Enable after Intro
fvar(5) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(5) != 0
trigger1 = prevstateno != 192
x = fvar(5)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(5) = 0

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090


[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998

; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
trigger1 = var(42) && roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
trigger1 = var(42) && roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(20) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(20) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(20)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, O\]
type = Explod
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(20) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(20) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(20)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 240-const(size.head.pos.y)
id = 8596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy
var(20) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(8596)
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(20)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, O\]
type = Explod
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(8598)
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(20)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(21) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(21) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(21)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(21) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(21) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(21)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 240-enemy,const(size.head.pos.y)
id = 18596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy = 1
var(21) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(21)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(21)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

  

;------------------------------------------------------
;signs

[State -2, VS_Combo]
type = VarSet
triggerall = (var(38)!=10) || (var(38)=10 && movehit && statetype != A)
trigger1 = var(35) >= 3
trigger2 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = [5000,5899])
var(38) = 1+(var(35)>3)+(var(35)>5)+(var(35)>7)+(var(35)>9)+(var(35)>29)+(var(35)>59)+(var(35)>=100)-(var(35)=-1)
ignorehitpause = 1

[State -2, Air Combo]
type = VarSet
triggerall = var(35) >= 3 && statetype = A && var(38)!=10 && var(6)
trigger1 = (movehit)
var(38) = 10
ignorehitpause = 1


[State -2, Danger]
type = VarSet
trigger1 = var(40) !=1 && roundstate=2 && life <= Ceil(const(data.life)/5)
var(38) = 9
ignorehitpause = 1

; sound First attack
[State -2, First Attack]
type = PlaySnd
triggerall = var(35)=-1
triggerall = NumExplod(8050) = 0
trigger1 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
persistent = 0
value = 2,0
channel = 20
volume=255
ignorehitpause = 1

; Telop sound
[State -2, Combo Sound]
type = PlaySnd
trigger1 = NumExplod(8050) = 0
trigger1 = var(35)=0 && var(38)!=0
persistent = 0;1
value = 2,var(38)
channel = 20
volume=255
ignorehitpause = 1

[State -2, VarAdd] ;Normal Score Addition
type = VarAdd
triggerall = var(51) < 999999
trigger1 = enemynear,time<=0 && enemynear,gethitvar(hitshaketime)
trigger1 = enemynear,movetype=H && (enemynear,stateno!=[120,159])
var(51) = enemynear,gethitvar(damage) * 10
ignorehitpause=1

[State -2, Left]
type = explod
trigger1 = var(35)=0 && var(38)!=0
trigger2 = var(35)=-1 && (movehit || p2movetype = H && (p2stateno != [120,159]));p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
trigger3 = var(35)=0 && var(38)=10 && (movehit || p2movetype = H && (p2stateno != [120,159]))
triggerall = TeamSide = 1 && NumExplod(8050) = 0
anim = (8550 + var(38))
ID = 8050
postype = left
pos = 3,80
ontop = 1
bindtime = -1
removetime = 60
ownpal = 1
supermovetime = 60
pausemovetime = 60
scale = 0.5,0.5
persistent = 0
ignorehitpause = 1

[State -2, Right]
type = explod
trigger1 = var(35)=0 && var(38)!=0
trigger2 = var(35)=-1 && (movehit || p2movetype = H && (p2stateno != [120,159]));p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
trigger3 = var(35)=0 && var(38)=10 && (movehit || p2movetype = H && (p2stateno != [120,159]))
triggerall = TeamSide = 2 && NumExplod(8050) = 0
anim = (8650+ var(38));8011;8720;
ID = 8050
postype = right
pos = -10,80;130;82
ontop = 1
bindtime = -1
removetime = 60;90
ownpal = 1
supermovetime = 60;90
pausemovetime = 60;90
scale = 0.5,0.5
persistent = 0;1
ignorehitpause = 1

[State -2, VS_Combo]
type = VarAdd
trigger1 = enemynear, time = 0
trigger1 = enemynear, Hitshakeover = 0
trigger1 = (p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899]
trigger2 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
var(35) = 1 + (var(35)=-1)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
trigger1 = var(35)!=-1 && (p2movetype!=H || enemynear, ctrl)
trigger2 = var(35)=-1 && movetype = H ; p2stateno = [5000,5899])
var(35) = 0 - (roundstate<2)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
triggerall = numexplod(8050)!=0
trigger1 = var(35)=0
var(38) = 0
ignorehitpause = 1

[State -2, Is Danger]
type = VarSet
trigger1 = var(40) = 0 && life <= Ceil(const(data.life)/5)
;trigger1 = var(30) = 1 && roundstate!=2
var(40) = 1;(roundstate>1)
ignorehitpause = 1

[State -2, Is Danger]
type = VarSet
trigger1 = var(40) = 1 && life > Ceil(const(data.life)/5)
;trigger1 = var(30) = 1 && roundstate!=2
var(40) = 0;(roundstate>1)
ignorehitpause = 1

[State -2, Is First Attack p3]
type = VarSet
triggerall = numpartner=1
trigger1 = partner, movehit
trigger1 = partner, var(35) != -1
var(35) = 0
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = nomusic


;Wall Hit

[state 5100,2]
type = explod
triggerall = var(45)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
triggerall = var(45)
triggerall = numenemy
triggerall = enemynear,stateno != [120,159]
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,8
channel = 4
volume = 255

[state 200, 3]
type = varset
triggerall = var(45)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 45
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 24
value = var(23)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 23
value = var(25)+hitcount

[state -3, 2];combo hosei
type = varset
trigger1 = enemynear,movetype != H
v = 25
value = 0

;***************
[state -3, 2];combo
type = varset
trigger1 = var(23)>var(24)
v = 45
value = 1


; ^[Qbg 
[State -2, ^[Qbg]
type = VarSet
trigger1 = 1
var(12) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget
var(12) = target,id
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = !numtarget
var(13) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget && hitpausetime
var(13) = target,stateno = 5080
ignorehitpause = 1

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(12)) && !var(13)
trigger1 = playerID(var(12)),gethitvar(chainid) & 1
trigger1 = playerID(var(12)),stateno != [120,155]
trigger1 = playerID(var(12)),hitover && playerID(var(12)),alive && playerID(var(12)),hitshakeover
trigger1 = playerID(var(12)),statetype = A && playerID(var(12)),stateno != 9900
value = 9900

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(12)) && var(13)
trigger1 = playerID(var(12)),alive && playerID(var(12)),hitshakeover
trigger1 = playerID(var(12)),pos y >= 0 && playerID(var(12)),vel y > 0
trigger1 = playerID(var(12)),statetype = A && playerID(var(12)),stateno != 5201 && playerID(var(12)),stateno != 9910
value = 9901

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(12))
trigger1 = playerID(var(12)),gethitvar(chainid) & 2
trigger1 = playerID(var(12)),stateno != [120,155]
trigger1 = playerID(var(12)),alive && playerID(var(12)),hitshakeover
trigger1 = playerID(var(12)),pos y >= 0 && playerID(var(12)),vel y > 0
trigger1 = playerID(var(12)),statetype = A && playerID(var(12)),stateno != 9910
value = 9910

[State -2, Charge1]
type = VarAdd
triggerall = command = "hold_z" && var(1) < 2250
trigger1 = stateno != 211 && stateno != 311 && stateno != 411
trigger1 = stateno != 210 && stateno != 310 && stateno != 410
v = 1
value = 1

[State -2, Charge2]
type = VarSet
triggerall = stateno != 211 && stateno != 311 && stateno != 411
trigger1 = command = "release_z" && stateno != [200,420]
trigger1 = ctrl = 0
trigger2 = stateno = [180,189]
trigger3 = stateno = [1000,1050]
v = 1
value = 0

[State -2, Charge3]
type = Varset
triggerall = stateno != 211 && stateno != 311 && stateno != 411
trigger1 = command = "z" || life = 0 || win = 1
v = 1
value = 0

[state -2,Charge4]
type = playsnd
trigger1 = var(1) = 74
value = 4,2
volume = 200
volumescale = 200
channel = 2

[state -2,Charge5]
type = stopsnd
trigger1 = var(1) = 0
channel = 2

[state -2, Slow ChargeFX1]
type = palfx
triggerall = var(1) = [20, 76]
trigger1 = time % 56 = [12,15]
add = 160,160,160
time = 1

[state -2, Slow ChargeFX2]
type = palfx
triggerall = var(1) = [20, 76]
trigger1 = time % 56 = [8,11]
trigger2 = time % 56 = [16,19]
add = 120,120,120
time = 1

[state -2, Slow ChargeFX3]
type = palfx
triggerall = var(1) = [20, 76]
trigger1 = time % 56 = [4,7]
trigger2 = time % 56 = [20,23]
add = 80,80,80
time = 1

[state -2, Slow ChargeFX4]
type = palfx
triggerall = var(1) = [20, 76]
trigger1 = time % 56 = [0,3]
trigger2 = time % 56 = [24,27]
add = 40,40,40
time = 1

[state -2, Slow ChargeFX5]
type = palfx
triggerall = var(1) = [20, 76]
trigger1 = time % 56 = [32,35]
trigger2 = time % 56 = [48,51]
add = -40,-40,-40
time = 1

[state -2, Slow ChargeFX6]
type = palfx
triggerall = var(1) = [20, 76]
trigger1 = time % 56 = [36,39]
trigger2 = time % 56 = [44,47]
add = -80,-80,-80
time = 1

[state -2, Slow ChargeFX7]
type = palfx
triggerall = var(1) = [20, 76]
trigger1 = time % 56 = [40,43]
add = -120,-120,-120
time = 1

[state -2, Leaf Shield Invincibility]
type = nothitby
triggerall = NumHelper(505) = 1
trigger1 = Helper(505), stateno = [506, 507]
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state -2, Leaf Shield?]
type = varset
triggerall = NumHelper(505) = 1
trigger1 = helper(505), stateno = [507,509]
v = 3
value = 1

[state -2, Leaf Shield?]
type = varset
triggerall = NumHelper(505) = 1
trigger1 = helper(505), stateno != [507,509]
v = 3
value = 0

[State -2, Rockball Active]
type = VarSet
triggerall = NumHelper(490) = 1
trigger1 = helper(490), stateno = 492
v = 4
value = 1

[State -2, Tornado Hold Active]
type = VarSet
triggerall = NumHelper(490) = 1
trigger1 = helper(490), stateno = 495
v = 4
value = 0

[State -2, Leaf Shield Active]
type = VarSet
triggerall = NumHelper(490) = 1
trigger1 = helper(490), stateno = 498
v = 4
value = 2

[State -2,2]
type = playsnd
triggerall = random < 350 && time = 1 && alive = 1
trigger1  = stateno = 5000 && GetHitVar(animtype) = [0,1] 
trigger2  = stateno = 5010 && GetHitVar(animtype) = [0,1]
trigger3  = stateno = 5020 && GetHitVar(animtype) = [0,1]
value = 17,1
volume = 255
volumescale = 255
channel = 0

[State -2,3]
type = playsnd
triggerall = random < 350 && time = 1 && alive = 1
trigger1 = stateno = 5000 && GetHitVar(animtype) = [2,5]
trigger2 = stateno = 5010 && GetHitVar(animtype) = [2,5]
trigger3 = stateno = 5020 && GetHitVar(animtype) = [2,5] 
trigger4 = stateno = 5100
value = 17,2
volume = 255
volumescale = 255
channel = 0

[State Create Rush if Intro is skipped]
type = Helper
trigger1 = numhelper(1100) = 0 && RoundState != 0
trigger1 = stateno != [190,192]
type = normal
name = "Rush"
ID = 1100
pos = -50, -5
postype = p1
stateno = 1102
size.shadowoffset = -7
supermovetime = 9999
ownpal = 1

[state 2, OrangeFX1]
type = palfx
triggerall = var(1) > 76
trigger1 = time % 28 = [0,1]
add = 70,-8,-74
time = 1
color = 0
ignorehitpause = 1

[state 2, OrangeFX2]
type = palfx
triggerall = var(1) > 76
trigger1 = time % 28 = [2,3]
trigger2 = time % 28 = [26,27]
add = 102,24,-74
time = 1
color = 0
ignorehitpause = 1

[state 2, OrangeFX3]
type = palfx
triggerall = var(1) > 76
trigger1 = time % 28 = [4,5]
trigger2 = time % 28 = [24,25]
add = 134,56,-74
time = 1
color = 0
ignorehitpause = 1

[state 2, OrangeFX4]
type = palfx
triggerall = var(1) > 76
trigger1 = time % 28 = [6,7]
trigger2 = time % 28 = [22,23]
add = 166,88,-74
time = 1
color = 0
ignorehitpause = 1

[state 2, OrangeFX5]
type = palfx
triggerall = var(1) > 76
trigger1 = time % 28 = [8,9]
trigger2 = time % 28 = [20,21]
add = 166,104,-58
time = 1
color = 0
ignorehitpause = 1

[state 2, OrangeFX6]
type = palfx
triggerall = var(1) > 76
trigger1 = time % 28 = [10,11]
trigger2 = time % 28 = [18,19]
add = 166,120,-42
time = 1
ignorehitpause = 1
color = 0

[state 2, OrangeFX7]
type = palfx
triggerall = var(1) > 76
trigger1 = time % 28 = [12,13]
trigger2 = time % 28 = [16,17]
add = 166,136,-26
time = 1
ignorehitpause = 1
color = 0

[state 2, OrangeFX8]
type = palfx
triggerall = var(1) > 76
trigger1 = time % 28 = [14,15]
add = 166,152,-10
ignorehitpause = 1
color = 0
time = 1

[State Spark Helper]
type = Helper
trigger1 = numhelper(255) = 0 && var(1) >= 20
type = normal
name = "Charging Spark Effect"
ID = 255
pos = 0, -40
postype = p1
stateno = 255
supermovetime = 9999
ownpal = 1

[State -2,5]
type = VarSet
trigger1 = StateNo != 5050 && StateNo != 5071
v = 10
value = 0

[State -2, FireBall Dust Trail Start]
type = VarSet
trigger1 = 1
v = 7
value = 0

[State -2, FireBall Dust Trail End]
type = VarSet
trigger1 = ProjContact1234 = 1 || NumProjID(1234) = 0
v = 7
value = 1

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]



[state -3, 1]
type = varset
trigger1 = statetype != A && ctrl
v = 6
value = 0

[state -3, 2]
type = varset
trigger1 = statetype != A && ctrl && stateno != 100
v = 9
value = 0

[state -3, 2]
type = varset
trigger1 = statetype != A && ctrl
v = 11
value = 0

[State -3, 3]
type = ScreenBound
trigger1 = Var(9) = 1 && var(11) < 32 && stateno != 100
value = 0
movecamera = 0,0

[State -3, 4]
type = ScreenBound
trigger1 = Var(9) = 0 || (statetype = A && var(11) = 32 && stateno != 100)
value = 1
movecamera = 1,1

[state -3, 5]
type = varadd
trigger1 = var(9) = 1
v = 11
value = 1

;----------------------------------------------------------------------------------------;
;                                        Dizzy code                                      ;
;----------------------------------------------------------------------------------------;
[State -3, Varadd]
type = VarAdd
triggerall = (Time = 0) && (Var(36) < 15) && (Var(37) = 0)
trigger1 = (anim = 5000) || (anim = 5001) || (anim = 5010) || (anim = 5011) || (anim = 5020) || (anim = 5021)
v = 34
value = ((GetHitVar(animtype)=0)*100)+((GetHitVar(animtype)=1)*200)+((GetHitVar(animtype)=2)*250)+((GetHitVar(animtype)>=3)*300)

[State -3, VarSubtract]
type = VarAdd
trigger1 = Var(34) > 0
v = 34
value = ifelse(MoveType = A,-3,-2)

[State -3, VarSet]
type = VarSet
trigger1 = Var(34) < 0
v = 34
value = 0
ignorehitpause = 1

[State -3, ChangeState]
type = ChangeState
triggerall = Time = 1
trigger1 = (anim = 5000) || (anim = 5001) || (anim = 5010) || (anim = 5011) || (anim = 5020) || (anim = 5021)
trigger1 = (Var(34) >=20000) && (LoseKO = 0)
value = 5250
ignorehitpause = 1




