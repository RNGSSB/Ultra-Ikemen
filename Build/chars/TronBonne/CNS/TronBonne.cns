[data]
life = 1000
attack = 106
defence = 101
power = 9000
fall.defence_up = 50
liedown.time = 11
airjuggle = 15
sparkno = 2
guard.sparkno = 40
ko.echo = 0
volumescale = 155
volume = 155
intpersistindex = 51
floatpersistindex = 40

[size]
xscale = .83
yscale = 1.07       
ground.back = 19
ground.front = 19    
air.back = 12        
air.front = 12       
height = 60	     
attack.dist = 160   
proj.attack.dist = 90 
proj.doscale = 0     
head.pos = -7, -94   
mid.pos = 0, -47   
shadowoffset = 0     
draw.offset = 0,0    

[velocity]
walk.fwd  = 4.2      
walk.back = -3.2   
run.fwd  = 7, 0    
run.back = -7,-3.8 ;
jump.neu = 0,-11.3    
jump.back = -4,-11.3   
jump.fwd = 3.6,-11.3    
runjump.back = -2.55,-8.1 
runjump.fwd = 5.2,-8.1      
airjump.neu = 0,-8.8      
airjump.back = -3.55      
airjump.fwd = 3.5         

[movement]
airjump.num = 0    
airjump.height = 35  
yaccel = .61      
stand.friction = .8
crouch.friction = .8

;---------------------------------------------------------------------------
; Prewalking
[Statedef 21]
type    = S
physics = S
sprpriority = 1

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 21, 1]
type = VelSet
triggerall = enemy, stateno != 190
trigger1 = command = "holdfwd"
x = 1.5

[State 21, 2]
type = VelSet
triggerall = enemy, stateno != 190
trigger1 = command = "holdback"
x = -1.5

[State 21, 3]
type = VelSet
triggerall = enemy, stateno != 190
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = command = "holdfwd" && anim != 22
value = 22

[State 21, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = command = "holdback" && anim != 23
value = 23

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = command != "holdfwd" && anim != 0
trigger1 = command != "holdback" && anim != 0
value = 0

[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 22, 23)

;---------------------------------------------------------------------------
; initialize (at the start of the round)
[statedef 5900]
type = s

[state 870, push block]
type = helper
trigger1 = numhelper(3000) = 0
id = 3000
name = "Kobun"
pos = -70,-4
postype = p1
stateno = 3000
helpertype = normal
size.shadowoffset = -4
supermovetime = 999999
pausetime = 999999
ownpal = 1

; Like in vs Series, you always start with 1 power stock...
[State 190, PowerAdd]
type = PowerSet
triggerall = Roundno = 1
trigger1 = time = 0
value = 1000

[State 5900, ChangeState] ;Intro for round 1
type = ChangeState
triggerall  = roundsexisted
trigger1 = roundno != 1
value = 21

[state 191, 0]
type = changestate
;trigger1 = time = 0
trigger1 = roundno != 1
value = 0

[state 5900, 1] ;intro
type = changestate
trigger1 = roundno = 1
value = 190

; ===================== (Moves states) =======================
; Standing state
[statedef 0]
type = s
physics = s
velset = 0,0
sprpriority = 0

[State -3, wait out of the stage]
type = destroyself
trigger1 = Ishelper(3000)

[state 0, 1]
type = changeanim
trigger1 = anim != 0 && anim != 5
trigger2 = anim = 5 && animtime = 0 ;turn anim over
value = 0

[state 0, 3] ;stop moving if low velocity or 4 ticks pass
type = velset
trigger1 = abs(vel x) < 2
trigger2 = time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0

; Stand to Crouch
[statedef 10]
type    = c
physics = c
anim = 10

[state 10, 1]
type = velmul
trigger1 = time = 0
x = .75

[state 10, 1]
type = velset
trigger1 = time = 0
y = 0

[state 10, 1]
type = playsnd
trigger1 = time = 7
freqmul = .9
volume = 120
volumescale = 120
value = 5,31
channel = 5

[state 10, 2]
type = changestate
trigger1 = animtime = 0
value = 11

;---------------------------------------------------------------------------
; crouching
[statedef 11]
type    = c
physics = c
anim = 11
sprpriority = 0

[state 10, 1]
type = varset
trigger1 = time = 0
v = 0
value = 0

[state 10, 1]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state 10, 1]
type = varset
trigger1 = anim = 13
trigger1 = var(0) = 0
v = 1
value = 1

[state 10, 1]
type = varset
trigger1 = anim = 13
trigger1 = var(0) = 0
v = 0
value = 1

[state 10, 1]
type = varset
trigger1 = anim = 11
v = 0
value = 0

[state 10, 1]
type = varset
trigger1 = 1
v = 1
value = 0

[state 11, 1] ;
type = stopsnd
trigger1 = anim = 11
channel = 2

[state 11, 1] ;
type = changeanim
trigger1 = anim = 6 && animtime = 0
trigger2 = command != "holddownfwd" && command != "holddownback"
value = 11

;---------------------------------------------------------------------------
; crouch to stand
[statedef 12]
type    = s
physics = s
anim = 12

[state 10, 1]
type = playsnd
trigger1 = time = 6
volume = 120
volumescale = 120
value = 5,31
channel = 5

[state 10, 1]
type = velset
trigger1 = time = 0
y = 0

[state 12, 1]
type = changestate
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[state 12, 1]
type = playsnd
triggerall = anim = 20
trigger1 = animelem = 2
trigger2 = animelem = 7
value = 5,32
volume = 120
volumescale = 120
channel = 3

[state 12, 1]
type = playsnd
triggerall = anim = 21
trigger1 = animelem = 3
trigger2 = animelem = 8
value = 5,33
volume = 120
volumescale = 120
channel = 3

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21


;---------------------------------------------------------------------------
; Lose by Time Over
[statedef 170]
type = A
physics = N
ctrl = 0
velset = 0,0

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = numhelper(1712)
text = "SP var(14) = %d, SP Pos Y = %f"
params = (helper(1712), var(14)), (helper(1712), pos y)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 250
flag = roundnotover

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 5
value = 170

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 5
value = 5,36

[State 0, VelSet]
type = PosSet
trigger1 = Anim = 170
y = 0
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = Time = 5
anim = 8083
ID = 1700
pos = 0,-50
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
supermove
pausemove
scale = 0.75,0.75
sprpriority = 4
ontop = 1
shadow = -1
ownpal = 1
removeongethit = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 1 - Top Plate"
ID = 1701
stateno = 1701
pos = 0,-40
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 2 - Fist Arm"
ID = 1702
stateno = 1702
pos = -12,-25
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 3 - Turret Arm"
ID = 1703
stateno = 1703
pos = 12,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 4 - Severed Shoulder"
ID = 1704
stateno = 1704
pos = 11,-50
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 5 - Yellow Plate"
ID = 1705
stateno = 1705
pos = 11,-49
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 6 - Screw"
ID = 1706
stateno = 1706
pos = 5,-50
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 7 - Foot"
ID = 1707
stateno = 1707
pos = 2,-25
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 8 - Spring"
ID = 1708
stateno = 1708
pos = -4,-24
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 9 - Thing"
ID = 1709
stateno = 1709
pos = -4,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 10 - Bear"
ID = 1710
stateno = 1710
pos = 0,-43
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 11 - Red Plate"
ID = 1711
stateno = 1711
pos = 2,-48
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = Anim = 170
helpertype = normal ;player
name = "Piece 12 - Skull Plate"
ID = 1712
stateno = 1712
pos = 32,-48
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
persistent = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

;Top Plate
[Statedef 1701]
type = A
physics = n
ctrl = 0
anim = 1701

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = -8
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < -25
value = -30

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= -25
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= -25
x = 0
y = 0

;Fist Arm
[Statedef 1702]
type = A
physics = n
ctrl = 0
anim = 1702

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -1
y = -8.25
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < -8
value = -30

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= -8
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= -8
x = 0
y = 0

;Turret Arm
[Statedef 1703]
type = A
physics = n
ctrl = 0
anim = 1703

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 1
y = -7
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < -5
value = 15

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= -5
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= -5
x = 0
y = 0

;Severed Shoulder
[Statedef 1704]
type = A
physics = n
ctrl = 0
anim = 1704
sprpriority = 3

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -1.85
y = -7
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < 0
value = -15

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= 0
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= 0
x = 0
y = 0

;Yellow Plate
[Statedef 1705]
type = A
physics = n
ctrl = 0
anim = 1705

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -1
y = -8
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < 3
value = 15

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= 3
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= 3
x = 0
y = 0

;Screw
[Statedef 1706]
type = A
physics = n
ctrl = 0
anim = 1706

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -.5
y = -11
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 0
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < 4
value = -15

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= 4
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= 4
x = 0
y = 0

;Foot
[Statedef 1707]
type = A
physics = n
ctrl = 0
anim = 1707
sprpriority = 4

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = .15
y = -6
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 0
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < 3
value = 15

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= 3
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= 3
x = 0
y = 0

;Spring
[Statedef 1708]
type = A
physics = n
ctrl = 0
anim = 1708

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = .65
y = -7
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < 0
value = -15

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= 0
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= 0
x = 0
y = 0

;Thing
[Statedef 1709]
type = A
physics = n
ctrl = 0
anim = 1709

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -.25
y = -7
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < 5
value = 15

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= 5
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= 5
x = 0
y = 0

;Bear
[Statedef 1710]
type = A
physics = n
ctrl = 0
anim = 1710
sprpriority = 4

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = .7
y = -8.5
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < -15
value = 14

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= -15
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= -15
x = 0
y = 0

;Red Plate
[Statedef 1711]
type = A
physics = n
ctrl = 0
anim = 1711

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = .2
y = -10
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 3
y = .4

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = pos y < -35
value = 15

[State 0, AngleSet]
type = AngleSet
trigger1 = pos y >= -35
value = 1

[State 0, StateTypeSet]
type = VelSet
trigger1 = pos y >= -35
x = 0
y = 0

;Skull Plate
[Statedef 1712]
type = A
physics = n
ctrl = 0
anim = 1712
sprpriority = 5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 8, = 3
trigger1 = var(14) != 2
value = 1712

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = .275
y = -6.5
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Time >= 0
trigger1 = var(14) = 0
y = .3

[State 0, VarSet]
type = VarSet
trigger1 = pos y < -10
v = 14
value = 0
persistent = 0

[State 0, VarSet]
type = VarSet
trigger1 = !var(14)
trigger1 = pos y >= -10
v = 14
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(14) = 1
trigger1 = pos y >= -7
v = 14
value = 2

[State 0, VelSet]
type = VelSet
trigger1 = var(14) = 1
x = .75
y = -5
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = var(14) = 1

[State 0, VelSet]
type = VelSet
trigger1 = var(14) = 2
x = 1.275
y = 0
persistent = 0

; * To prevent uglyness while rolling
[State 0, PosAdd]
type = Null
trigger1 = root, time = 89 || root, time = 113
y = -2

[State 0, PosAdd]
type = Null
trigger1 = root, time = 90 || root, time = 114
y = 2
; *

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = var(14) = 2
trigger1 = root, time < 140
trigger1 = animelem = 9, < 0
value = 1712
elem = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = var(14) = 2

[State 0, AngleAdd]
type = AngleAdd
trigger1 = var(14) = 2
trigger1 = root, time < 125
value = -15

[State 0, AngleSet]
type = AngleSet
trigger1 = root, time = 125
value = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root, time = 140
value = 1712
elem = 9
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = root, time >= 125
x = 0
y = 0

;---------------------------------------------------------------------------
; Lose by Draw
[Statedef 175]
type = S

[State 180, 1]
type = ChangeState
trigger1 = !Time
trigger1 = !matchover
value = 170

;---------------------------------------------------------------------------
; Win state decider
[statedef 180]
type = s
ctrl = 0

[State 180, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = roundnotover

[state 180, 1]
type = changestate
trigger1 = time = 0
trigger1 = !numhelper(8500)
value = ifelse(winko,181+random%2,182)

[state 180, 1]
type = changestate
trigger1 = wintime
value = 181

;---------------------------------------------------------------------------
; Win 1
[statedef 181]
type = s
anim = 180
ctrl = 0

[state 180, 1]
type = playsnd
trigger1 = time = 3
value = 1,4
volume = 255
volumescale = 255

[state 180, 1]
type = assertspecial
trigger1 = time < 200
flag = roundnotover

;---------------------------------------------------------------------------
; Win 2
[statedef 182]
type = s
anim = 181
ctrl = 0

[state 180, 1]
type = playsnd
trigger1 = time = 3
value = 1,2
volume = 255
volumescale = 255

[State 0, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal ;player
name = "Chef Cart"
ID = 20186
stateno = 20186
pos = -20,-5
postype = back    ;p2,front,back,left,right
facing = 1

[state 180, 1]
type = assertspecial
trigger1 = time < 200
flag = roundnotover


;---------------------------------------------------------------------------
; Intro
[statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, VarSet]
type = VarSet
trigger1 = Anim = 190
trigger1 = AnimElem = 1
fv = 2
value = pos x
persistent = 0

[State 191, 1]
type = ChangeAnim
trigger1 = Anim = 190
trigger1 = animtime = 0
value = 191
persistent = 0

[State 191, 3]
type = PosSet
trigger1 = Anim = 191
trigger1 = animelem = 1
trigger1 = Facing = 1
x = pos x - 250

[State 191, 4]
type = PosSet
trigger1 = Anim = 191
trigger1 = animelem = 1
trigger1 = Facing = -1
x = pos x + 250

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 191
trigger1 = animelem = 1
x = 4.25
persistent = 0

[state 191, 2]
type = VelMul
trigger1 = anim = 191
trigger1 = ifelse(teamside = 2, pos x <= (ceil(fvar(2)) - 25), pos x >= (ceil(fvar(2)) - 25))
x = .9

[State 0, VelSet]
type = VelSet
trigger1 = anim = 191
trigger1 = ifelse(teamside = 2, pos x <= fvar(2), pos x >= fvar(2))
x = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 191
trigger1 = AnimElem = 4
trigger1 = ifelse(teamside = 2, pos x > fvar(2), pos x < fvar(2))
trigger1 = vel x != 0
value = 191
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 191
trigger1 = ifelse(teamside = 2, pos x <= fvar(2), pos x >= fvar(2))
value = 191
elem = 5
persistent = 0

[State 0, PosSet]
type = PosSet
trigger1 = anim = 191
trigger1 = AnimElem = 13
x = fvar(2)
persistent = 0

[state 191, 2]
type = screenbound
trigger1 = 1
value = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 191, Snd 1]
type = PlaySnd
trigger1 = anim = 191
trigger1 = AnimElem = 5
value = 1,8
channel = 0
volume = 255
volumescale = 255
persistent = 0

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = anim = 191
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[statedef 195]
type = s
movetype = I
physics = s
velset = 0,0
ctrl = 0
anim = 195

[state 191, 2] 
type = playsnd
trigger1 = time = 4
value = 1,5
volume = 255
volumescale = 255
channel = 0

[state 191, 2] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------
; jump initiate
[statedef 40]
type    = s
physics = s
ctrl = 0

[state 40, 1]
type = velset
trigger1 = time = 0
y = 0

[state 40, 2]
type = changeanim
trigger1 = time = 0
value = 40

[state 40, 1]
type = velset
;trigger1 = time = 0
;trigger1 = command = "holdfwd"
trigger1 = prevstateno = 101
;trigger1 = sysvar(1) = 1
x = 7

[state 40, 1]
type = velset
trigger1 = time = 0
trigger1 = command = "holdback"
trigger1 = prevstateno = 105
x = -6

[state 40, 4]
type = varset
trigger1 = time = 0
sysvar(1) = 0

[state 40, 5]
type = varset
trigger1 = command = "holdfwd"
sysvar(1) = 1

[state 40, 6]
type = varset
trigger1 = command = "holdback"
sysvar(1) = -1

[state 40, 7]
type = velset
trigger1 = animtime = 0
trigger1 = var(3) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1,const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[state 40, 8]
type = velset
trigger1 = animtime = 0
trigger1 = var(3) = 1
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1,3, -1.5))
y = -17

[state 40, 9]
type = velset
trigger1 = animtime = 0
trigger1 = prevstateno = 100
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[state 40, 11]
type = varset
trigger1 = time = 0
var(3) = 0

[state 40, 12]
type = varset
trigger1 = command = "du"
trigger2 = prevstateno = 420
trigger3 = prevstateno = 271
var(3) = 1

[state 50, playsnd]
type = playsnd
trigger1 = animtime = 0
trigger1 = var(3) = 1
value = s0,18
volumescale = 190
channel = 10

[state 40, 13]
type = varset
trigger1 = time = 0
var(12) = 0

[state 40, 14]
type = changestate
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------
; jump Up
[statedef 50]
type    = a
physics = a

[state 50, 1]
type = varset
trigger1 = time = 0
sysvar(1) = 0

[state 50, 2]
type = changeanim
trigger1 = time = 0
trigger1 = var(3) = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 41, 41))

[state 50, 3]
type = changeanim
trigger1 = time = 0
trigger1 = var(3) = 1
value = ifelse((vel x)=0, 50, ifelse((vel x)>0, 51, 52))

[state 50, 4]
type = varset
triggerall = time = 0
trigger1 = vel x = 0
var(1) = 0

[state 50, 5]
type = varset
triggerall = time = 0
trigger1 = vel x > 0
trigger2 = vel x < 0
var(1) = 1

[state 50, 6]
type = turn
trigger1 = p2dist x < 0
trigger1 = var(3) = 1

[state 50, 7]
type = veladd
trigger1 = var(3) = 1
trigger1 = command = "holdback"
trigger1 = vel x > -1.5
x = -.05

[state 50, 8]
type = veladd
trigger1 = var(3) = 1
trigger1 = command = "holdfwd"
trigger1 = vel x < 3
x = .99

[state 50, 9]
type = veladd
trigger1 = var(3) = 1
y = -0.12

[State 1000, FireB]
type = Explod
trigger1 = time = 0
trigger1 = var(3) = 1
anim = 8250
id = 8250
pos = -120, 9
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[state 50, 12]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > 0
value = 52

;---------------------------------------------------------
; jump land
[statedef 52]
type    = s
physics = s
facep2 = 1
velset = 0,0
ctrl = 0

[state 52, 1]
type = changeanim
trigger1 = time = 0
value = 47

[State 52, Helper]
type = Helper
trigger1 = time = 0
stateno = 8200
pos = 0,-14

[State 52, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 70
volumescale = 70
value = 5,35
channel = 5

[state 52, 3]
type = posset
trigger1 = time = 0
y = 0

[state 52, 4]
type = ctrlset
trigger1 = time = 1
value = 1

[state 52, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Dash Forward
[statedef 100]
type    = S
movetype= a
physics = n
ctrl = 1
anim = 100
sprpriority = 1

[state 100, 1]
type = velset
trigger1 = time = 0
x = 8.3

[state 192, 2]
type = playsnd
trigger1 = animelem = 1
value = 0, 17

[state 192, 2]
type = playsnd
trigger1 = animelem = 2
value = 5,34

[state 100, 4]
type = explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
scale = 0.5,0.5
random = 30,abs(const(size.head.pos.y))
pos = -30,ceil(const(size.mid.pos.y))

[state 100, 5]
type = assertspecial
trigger1 = 1
flag = nowalk

[state 100, 1]
type = varset
trigger1 = statetype = A
v = 6
value = 1

[state 100, 7]
type = changestate
triggerall = statetype != A
trigger1 = time = 20
trigger2 = prevstateno = 710
trigger2 = time = 15
value = 101
;------------------------
; Dash Forward (land)
[statedef 101]
type    = s
physics = s
ctrl = 0
anim = 101

[state 100, 1]
type = velset
trigger1 = animelem = 1
x = 6

[state 100, 1]
type = velset
trigger1 = animelem = 2
x = 0

[state 106, 3]
type = playsnd
trigger1 = time = 0
volume = 70
volumescale = 70
value = 5,35

[state 100, 7]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Forward
[statedef 102]
type    = A
movetype= a
physics = n
ctrl = 1
anim = 100
sprpriority = 1

[state 100, 1]
type = velset
trigger1 = time = 0
x = 8
y = 0

[state 192, 2]
type = playsnd
trigger1 = animelem = 1
value = 0, 17

[state 192, 2]
type = playsnd
trigger1 = animelem = 1
value = 5,34

[state 100, 4]
type = explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
scale = 0.5,0.5
random = 30,abs(const(size.head.pos.y))
pos = -30,ceil(const(size.mid.pos.y))

[state 100, 5]
type = assertspecial
trigger1 = 1
flag = nowalk

[state 100, 1]
type = varset
trigger1 = statetype = A
v = 5
value = 1

[state 100, 7]
type = changestate
triggerall = statetype = A
trigger1 = time = 25
value = 460
;---------------------------------------------------------
; Dash back
[statedef 105]
type    = s
movetype= a
physics = n
ctrl = 1
anim = 105
sprpriority = 1

[state 100, 1]
type = velset
trigger1 = time = 0
x = -8

[state 105, 1]
type = velset
trigger1 = time = 0
x = const(velocity.run.back.x)

[state 105, 4]
type = assertspecial
trigger1 = 1
flag = nowalk

[State 105,5] 
type = AssertSpecial
trigger1 = 1
flag = Nocrouchguard

[State 105,5] 
type = AssertSpecial
trigger1 = 1
flag = Nostandguard

[state 105, 6]
type = changestate
trigger1 = animtime = 0
value = 106

;---------------------------------------------------------
; Dash back (land)
[statedef 106]
type    = s
physics = s
ctrl = 0
anim = 106

[state 100, 1]
type = velset
trigger1 = animelem = 1
x = -8

[state 100, 1]
type = velset
trigger1 = animelem = 2
x = 0

[State 106, Explod]
type = Explod
trigger1 = time % 3 = 0
anim = 8200
scale = 2,2
ownpal = 1
pos = -10,0
sprpriority = 4

[state 106, 3]
type = playsnd
trigger1 = time = 0
volume = 70
volumescale = 70
value = 5,35

[state 106, 3]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Forward
[Statedef 112]
type    = A
physics = N
movetype = I
anim = 112
ctrl = 0 + (0*(var(11):=1))
velset = 0,0
sprpriority = -2

[State 112, 1]
type = VelSet
trigger1 = AnimElem = 1
x = 0

[State 112, 1]
type = VelSet
trigger1 = time>8
trigger1 = time<22
x = const(velocity.run.fwd.x) * 1.2

[State 112, 1]
type = VelSet
trigger1 = AnimElem = 5
y = 2.7

[State 112, 1]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[state 192, 2]
type = playsnd
trigger1 = animelem = 1
value = 5,34

[State 112, 2]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 112, 3]
type = CtrlSet
trigger1 = AnimElem = 5
value = 1

[State 112, NJ]
type = StateTypeSet
trigger1 = time = 34 && !var(33)
physics = A

[State 112, 4]
type = ChangeState
trigger1 = animtime = 0
value = 460
ctrl = 1

;---------------------------------------------------------------------------
; stand jab
[statedef 200]
type    = s                      
movetype= a                      
physics = s
anim = 200                  
juggle  = 1                      
ctrl = 0                         
poweradd = 20                    
sprpriority = 2                  

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 3, 1
volume = 255
volumescale = 255
channel = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,3
volume = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 200, 1]
type = hitdef
trigger1 = animelem = 2
attr = S, NA
animtype = Light
damage = 23,0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 7,7
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
guard.pausetime = 8,8
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0            

[state 200, 7]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; standing strong 
[statedef 210]
type    = s
movetype= a
physics = s
juggle  = 4
poweradd= 65
anim = 210
ctrl = 0
sprpriority = 2

[state 200, 1]
type = posadd
trigger1 = animelem = 2
x = 30

[state 200, 1]
type = playsnd
trigger1 = time = 1
volume = 120
volumescale = 120
value = 5,31
channel = 5

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 210, 2]
type = hitdef
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
trigger4 = animelem = 10
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Medium
damage = 20,0
getpower = 30,0
givepower = 20,0
pausetime = 5,7
guard.pausetime = 5,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -6,0
guard.velocity = -6
air.velocity = -8,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
ground.cornerpush.veloff = -4
down.velocity = -6,-7
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = 5+var(49),1
channel = 4
ignorehitpause = 1


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;stand Fierce
[statedef 220]
type    = s
movetype= a
physics = s
juggle  = 4
poweradd= 65
anim = 220
ctrl = 0
sprpriority = 2

[state 200, 1]
type = posadd
trigger1 = animelem = 3
x = 30

[state 200, 1]
type = playsnd
trigger1 = time = 4
value = 7, 9
volume = 100
volumescale = 100
channel = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 210, 2]
type = hitdef
trigger1 = animelem = 4
trigger2 = animelem = 13
trigger3 = animelem = 19
trigger4 = animelem = 23
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 50,0
getpower = 50,0
givepower = 20,0
pausetime = 13,13
guard.pausetime = 13,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 12
yaccel = .96
ground.velocity = -8.7,-10
guard.velocity = -8.7
air.velocity = -8.7,-10
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 61)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;hop'n'slash
[statedef 221]
type    = a
movetype= a
physics = n
anim = 221
ctrl = 0

[state 200, 1]
type = playsnd
trigger1 = time = 15
freqmul = 1.5
value = 5, 4

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 3, 1
channel = 0

[state 810]
type = veladd
trigger1 = time = 5
x = 4
y = -3

[state 210, 2]
type = hitdef
trigger1 = time = 0
attr = s, na
animtype  = back
damage    = 57,4
guarDFlag = l
pausetime = 5,5
sparkno = s6028
guard.sparkno = s6000
sparkxy = -15,-59
hitsound   = s0,2
guardsound = s6+var(49),0
ground.type = high
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -8,-6
air.velocity = -8,-5
fall.recover = 0

[state 810]
type = veladd
trigger1 = time > 5
x = -.2

[state 810]
type = veladd
trigger1 = time > 10
y = .5

[state 810]
type = changestate
trigger1 = time > 10
trigger1 = pos y >= 0
value = 222

;---------------------------------------------------------------------------
;hop'n'slash2
[statedef 222]
type    = s
movetype= a
physics = s
velset = 0,0
anim = 222
ctrl = 0

[state 810]
type = posset
trigger1 = 1
y = 0

[state 810]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------------
;stand Fierce
[statedef 223]
type    = s
movetype= a
physics = n
juggle  = 4
poweradd= 65
anim = 210
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 5, 4

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 210, 2]
type = hitdef
trigger1 = animelem = 3
attr = s, na
animtype  = back
damage    = 57,4
guarDFlag = ma
pausetime = 0,20
sparkno = s6029
guard.sparkno = s6000
sparkxy = -10,-52
hitsound = S5+var(49),2
guardsound = s6+var(49),0
ground.type = high
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 0
air.velocity = -5,-3

[state 210, 5]
type = changestate
trigger1 = command = "z"
trigger1 = p2dist x < 0
trigger1 = movecontact
value = 224
ctrl = 1

[state 210, 5]
type = playerpush
trigger1 = 1
value = 0

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;stand Fierce
[statedef 224]
type    = s
movetype= a
physics = s
juggle  = 4
poweradd= 65
anim = 1006
ctrl = 0
velset = 0,0
sprpriority = 2

[state 200, 1]
type = turn
trigger1 = time = 0

[state 200, 1]
type = velset
trigger1 = time = 1
x = 10

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 5, 4


[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.5
value = 5, 4

[state 210, 2]
type = hitdef
trigger1 = animelem = 4
attr = s, na
animtype  = back
damage    = 57,4
guarDFlag = ma
pausetime = 10,10
sparkno = s6030
guard.sparkno = s6000
sparkxy = -10,-52
hitsound = S5+var(49),2
guardsound = s6+var(49),0
ground.type = high
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = -10,-5
air.velocity = -10,-5

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; standing short
[statedef 230]
type    = s
movetype= a
physics = s
juggle  = 4
poweradd= 22
anim = 230
ctrl = 0
sprpriority = 2

[state 200, 1]
type = posadd
trigger1 = animelem = 2
x = 30

[state 200, 1]
type = playsnd
trigger1 = time = 1
volume = 120
volumescale = 120
value = 5,31
channel = 5

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 230, 1]
type = playsnd
trigger1 = animelem = 3
value = 1, 10
volume = 255
volumescale = 255
channel = 0

[state 230, 2]
type = hitdef
triggerall = p2statetype !=A
trigger1 = animelem = 3
attr = S, NA
animtype = Light
damage = 23,0
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 8,7
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-10
guard.pausetime = 8,8
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
down.velocity = -6,-7
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 10)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[state 230, 2]
type = hitdef
triggerall = p2statetype !=A
trigger1 = animelem = 5
attr = s, na
damage    = 72,2
hitflag  = MAFD
guardflag = MA
animtype = Hard
pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-10
guard.pausetime = 8,8
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = 0,-1
air.velocity = 0,-1
guard.velocity = -5
fall = 1
fall.recover=0
yaccel = .45

[state 230, 3]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; standing Forward
[statedef 240]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 240
poweradd= 65
ctrl = 0
sprpriority = 2

[state 240, 1]
type = playsnd
trigger1 = time = 3
value = 5, 34
volume = 150
volumescale = 150

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 870, push block]
type = helper
trigger1 = animelem = 3
id = 241
name = "Flame"
pos = 45,-64
stateno = 241
ownpal = 1

[state 240, 2]
type = hitdef
trigger1 = time%14 = 0
trigger1 = p2statetype != A
attr = S, NA
animtype = Medium
hitflag = MAF
guardflag = MA
damage    = 25,3
pausetime = 0,7
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,-60
hitsound = -1
guardsound = -1
ground.type = high
air.type = low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .99
ground.velocity = -6,0
guard.velocity = -7
air.velocity = -2,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4
p2sprpriority = 4
palfx.time = 32
palfx.add = 224,64,0
palfx.mul = 256,240,32
palfx.sinadd = 48,16,0,4
palfx.color = 8

[state 240, 2]
type = hitdef
trigger1 = time%14 = 0
trigger1 = p2statetype = A
attr = s, ap
animtype  = medium
damage    = 25,3
guarDFlag = ma
pausetime = 0,7
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,-60
hitsound = -1
guardsound = -1
ground.type = high
air.type = low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .99
ground.velocity = -6,0
guard.velocity = -7
air.velocity = -2,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4
p2sprpriority = 4
palfx.time = 32
palfx.add = 224,64,0
palfx.mul = 256,240,32
palfx.sinadd = 48,16,0,4
palfx.color = 8

[state 3001, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+var(49),1
channel = 4

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+var(49),0
channel = 4

[state 1060, 8]
type = explod
trigger1 = numexplod(6023) = 0
trigger1 = movehit
anim = 9999
id = 6023
pos = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear, const(size.mid.pos.y))
postype = p2
removetime = 20
sprpriority = -1
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[state 200, 1]
type = movehitreset
trigger1 = movecontact

[state 240, 4]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 241]
type    = a
movetype= a
physics = n
juggle  = 5
anim = 241
velset = 0,0
ctrl = 0

[state 200, 1]
type = sprpriority
trigger1 = 1
value = 9

[state 200, 1]
type = bindtoparent
trigger1 = 1
pos = 41,-69

[state 3001, attackmulset]
type = attackmulset
trigger1 = 1
value = parent, Fvar(0)
ignorehitpause = 1


[state 200, 1]
type = destroyself
trigger1 = animtime = 0
trigger2 = parent, stateno != 240

;-------------------------------------
[statedef 250]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 250
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 0
value = 7, 1
freqmul = 1.5
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = anim = 251
value = 1, 9
volume = 255
volumescale = 255
channel = 0
persistent = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 440, 3]
type = hitdef
trigger1 = time = 0
attr = s, na
damage  = 20,3
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
pausetime = 0,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-61
hitsound = s5+var(49),2
guardsound = s6+var(49),0
ground.type = low
air.type = low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 6
yaccel = .89
ground.velocity = -4,-11
guard.velocity = -9
air.velocity = -4,-11
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 2+4


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 61)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0 

[state 870, push blocka]
type = changeanim
trigger1 = anim = 250
trigger1 = animtime = 0
trigger1 = command != "hold c"
value = 251

[state 870, push blocka]
type = changeanim
trigger1 = command = "hold c" && time = 95
value = 251

[state 870, push blockb]
type = helper
trigger1 = anim = 251
trigger1 = animelem = 2
id = 251
name = "rock"
pos = 0,-126
stateno = 251
ownpal = 1

[state 240, 4]
type = changestate
trigger1 = anim = 251
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 251]
type    = a
movetype= a
physics = n
juggle  = 5
anim = 252
velset = 17,5
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = angledraw
trigger1 = 1

[state 200, 1]
type = angleadd
trigger1 = 1
value = -11

[state 200, 1]
type = sprpriority
trigger1 = 1
value = 3

[state 240, 2]
type = hitdef
trigger1 = time = 0
attr = a, sp
hitflag = MAF
guardflag = MA
animtype  = medium
damage    = 47,3
pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-30
hitsound = s5+parent,var(49),1
guardsound = s6+parent,var(49),0
ground.type = low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 2
yaccel = .99
ground.velocity = -7.5,0
guard.velocity = -7.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -2
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4 

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0 

[state 1060, 8]
type = playsnd
trigger1 = movecontact
value = 7,1
channel = 1

[state 1060, 8]
type = explod
trigger1 = movecontact
anim = 253
id = 253
pos = 0,0
velocity = 1,6
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = movehit
anim = 254
id = 253
pos = 0,0
velocity = 4,-4
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = movecontact
anim = 255
id = 253
pos = 0,0
velocity = -1,6
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = movecontact
anim = 256
id = 253
velocity = -3,-5
pos = 0,0
bindtime = 1
velocity = 1, 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = movecontact
anim = 257
velocity = -5,-3
id = 253
pos = 0,0
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = movecontact
anim = 258
velocity = 3,-5
id = 253
pos = 0,0
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1030, nothitby]
type = nothitby
trigger1 = time >= 0
time = 1
value = sca, na, sa, ha, nt, st, ht
ignorehitpause = 1

[state 1030, enDFromproj]
type = hitby
trigger1 = 1
value = sca, np, sp, hp, ap
ignorehitpause = 1

[state 1030, enDFromproj]
type = hitoverride
trigger1 = 1
slot = 7
time = 1
stateno = 252
attr = sca, np, sp, hp, ap
ignorehitpause = 1

[state 240, 4]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


[state 1060, 8]
type = destroyself
trigger1 = movecontact
trigger2 = FrontEdgeBodyDist < -70

;-------------------------------
[statedef 252]
type    = a
movetype= a
physics = n
juggle  = 5
anim = 9999
velset = 12,5
poweradd= 65
ctrl = 0
sprpriority = 2

[state 1060, 8]
type = playsnd
trigger1 = time = 0
value = 5,1
channel = 1

[state 1060, 8]
type = explod
trigger1 = time = 0
anim = 253
id = 253
pos = 0,0
velocity = 1,6
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = time = 0
anim = 254
id = 253
pos = 0,0
velocity = 4,-4
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = time = 0
anim = 255
id = 253
pos = 0,0
velocity = -1,6
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = time = 0
anim = 256
id = 253
velocity = -3,-5
pos = 0,0
bindtime = 1
velocity = 1, 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = time = 0
anim = 257
velocity = -5,-3
id = 253
pos = 0,0
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = explod
trigger1 = time = 0
anim = 258
velocity = 3,-5
id = 253
pos = 0,0
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1060, 8]
type = destroyself
trigger1 = time = 1

;-------------------------------------
[statedef 271]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 271
poweradd= 65
velset = 0,0
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 240, 2]
type = hitdef
trigger1 = animelem = 3
attr = s, na
animtype  = medium
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6026
guard.sparkno = s6000
sparkxy = -10,-54
hitsound = s0+var(49),0
guardsound = s0+var(49)+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -7
air.velocity = -2.2,-3.2

[state 240, 1]
type = changestate
trigger1 = command = "holdup"
trigger1 = movecontact
value = 40

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 272]
type    = a
movetype= a
physics = n
juggle  = 5
anim = 51
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 20
value = 1, 5
channel = 0

[state 240, 1]
type = velset
trigger1 = time = 0
x = 1
y = -15

[state 240, 1]
type = veladd
trigger1 = 1
y = .6

[state 240, 1]
type = changeanim
trigger1 = time = 20
value = 272

[state 240, 1]
type = posset
trigger1 = time >= 50
y = 0

[state 240, 1]
type = velset
trigger1 = time >= 50
y = 0
x = 0

[state 240, 2]
type = hitdef
trigger1 = time = 0
attr = s, na
animtype  = medium
damage    = 51,3
hitflag = mafd
pausetime = 10,10
sparkno = s6025
guard.sparkno = s6000
sparkxy = -10,0
hitsound = s0+var(49),2
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -7
air.velocity = -2.2,-3.2
palfx.time = 65
palfx.color = 0
palfx.add = 50,50,160
palfx.sinadd = 30,30,50,10

[state 3000, choque]
type = explod
trigger1 = numexplod(6018) = 0
trigger1 = movehit
anim = 6018
id = 6018
bindtime = 70
removetime = 65
postype = p2
pos = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear,const(size.mid.pos.y))
sprpriority = 5

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 273]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 273
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 240, 1]
type = velset
trigger1 = time < 6
x = 6

[state 240, 2]
type = hitdef
trigger1 = animelem = 3
attr = s, na
animtype  = medium
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6025
guard.sparkno = s6000
sparkxy = -10,-70
hitsound = s0+var(49),2
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -7
air.velocity = -2.2,-3.2

[state 240, 1]
type = changestate
trigger1 = command = "y"
trigger1 = movecontact
value = 274
ctrl = 1

[state 240, 1]
type = changestate
triggerall = movecontact
trigger1 = command = "b"
trigger2 = command = "c"
value = 277
ctrl = 1

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 274]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 274
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 240, 1]
type = velset
trigger1 = time < 6
x = 6

[state 240, 2]
type = hitdef
trigger1 = animelem = 5
attr = s, na
animtype  = back
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6027
guard.sparkno = s6000
sparkxy = -10,-53
hitsound = s0+var(49),2
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -7.3,-5.2
air.velocity = -7.2,-5.2

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 275]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 275
velset = 0,0
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 200, 1]
type = playsnd
trigger1 = time = 7
value = 3, 1
channel = 0

[state 240, 1]
type = velset
trigger1 = time < 6
x = 6

[state 240, 2]
type = hitdef
trigger1 = animelem = 4
attr = s, na
animtype  = Up
damage    = 51,3
guarDFlag = ma
pausetime = 20,20
sparkno = s27000
guard.sparkno = s6000
sparkxy = -10,-56
hitsound = s0+var(49),1
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -2,-8
air.velocity = -2,-8
fall = 1
fall.recover = 0
palfx.time = 75
palfx.color = 0
palfx.add = 50,50,160
palfx.sinadd = 30,30,50,10

[state 3000, choque]
type = explod
trigger1 = numexplod(6018) = 0
trigger1 = movehit
anim = 6018
id = 6018
bindtime = 70
removetime = 85
postype = p2
pos = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear,const(size.mid.pos.y))
sprpriority = 5

[state 200, 1]
type = playsnd
trigger1 = movehit
ignorehitpause = 1
value = 0, 31
persistent = 0

[state -2, First attack]
type = explod
trigger1 = movehit
anim = 27001
sprpriority = 3
postype = p1
pos = -40,-56
bindtime = 1
removeongethit = 1
supermove = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
[state -2, First attack]
type = explod
trigger1 = movehit
anim = 27001
sprpriority = 3
postype = p1
pos = -168,-56
bindtime = 1
removeongethit = 1
supermove = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
[state -2, First attack]
type = explod
trigger1 = movehit
anim = 27001
sprpriority = 3
postype = p1
pos = -298,-56
bindtime = 1
removeongethit = 1
supermove = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
[state -2, First attack]
type = explod
trigger1 = movehit
anim = 27001
sprpriority = 3
postype = p1
pos = 88,-56
bindtime = 1
removeongethit = 1
supermove = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
[state -2, First attack]
type = explod
trigger1 = movehit
anim = 27001
sprpriority = 3
postype = p1
pos = 216,-56
bindtime = 1
removeongethit = 1
supermove = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
[state -2, First attack]
type = explod
trigger1 = movehit
anim = 27001
sprpriority = 3
postype = p1
pos = 344,-56
bindtime = 1
removeongethit = 1
supermove = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 240, 1]
type = changestate
triggerall = movecontact
trigger1 = command = "y"
value = 272
ctrl = 1

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 276]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 276
velset = 0,0
poweradd= 65
ctrl = 0
sprpriority = 2

[state 240, 1]
type = velset
trigger1 = time < 6
x = 6

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 240, 1]
type = changestate
trigger1 = command = "y"
trigger1 = movecontact
value = 273
ctrl = 1

[state 240, 1]
type = changestate
trigger1 = command = "z"
trigger1 = movecontact
value = 278
ctrl = 1

[state 240, 2]
type = hitdef
trigger1 = animelem = 3
attr = s, na
animtype  = medium
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6026
guard.sparkno = s6000
sparkxy = -10,-87
hitsound = s0+var(49),1
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -7
air.velocity = -2.2,-3.2

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------
[statedef 277]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 277
velset = 0,0
poweradd= 65
ctrl = 0
sprpriority = 2

[state 240, 1]
type = velset
trigger1 = time < 6
x = 4

[state 240, 1]
type = playsnd
trigger1 = time = 1
value = 3, 0
channel = 0

[state 240, 2]
type = hitdef
trigger1 = animelem = 4
attr = s, na
animtype  = medium
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6002
guard.sparkno = s6000
sparkxy = -10,-17
hitsound = s0+var(49),4
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6
air.velocity = -2.2,-3.2

[state 240, 1]
type = changestate
triggerall = movecontact
trigger1 = command = "y"
value = 275
ctrl = 1

[state 240, 1]
type = changestate
triggerall = prevstateno = 280
triggerall = movecontact
trigger1 = command = "z"
value = 282
ctrl = 1

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------
[statedef 278]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 278
velset = 0,0
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 240, 1]
type = velset
trigger1 = time < 6
x = 4

[state 240, 2]
type = hitdef
trigger1 = animelem = 4
attr = s, na
animtype  = medium
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6028
guard.sparkno = s6000
sparkxy = -10,-41
hitsound = s0+var(49),1
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6
air.velocity = -2.2,-3.2

[state 240, 1]
type = changestate
triggerall = movecontact
trigger1 = command = "b"
trigger2 = command = "c"
value = 277
ctrl = 1

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 279]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 279
velset = 0,0
poweradd= 65
ctrl = 0
sprpriority = 2

[state 240, 1]
type = velset
trigger1 = time < 6
x = 4

[state 240, 2]
type = hitdef
trigger1 = animelem = 3
attr = s, na
animtype  = medium
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6029
guard.sparkno = s6000
sparkxy = -10,-52
hitsound = s0+var(49),2
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6
air.velocity = -2.2,-3.2

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 240, 1]
type = changestate
trigger1 = command = "z"
trigger1 = movecontact
value = 280
ctrl = 1

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 280]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 280
velset = 0,0
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 240, 1]
type = velset
trigger1 = time < 6
x = 4

[state 240, 2]
type = hitdef
trigger1 = animelem = 4
attr = s, na
animtype  = medium
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6026
guard.sparkno = s6000
sparkxy = -10,-34
hitsound = s0+var(49),2
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6
air.velocity = -2.2,-3.2

[state 240, 1]
type = changestate
trigger1 = command = "z"
trigger1 = movecontact
value = 281
ctrl = 1

[state 240, 1]
type = changestate
triggerall = movecontact
trigger1 = command = "b"
trigger2 = command = "c"
value = 277
ctrl = 1

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------
[statedef 281]
type    = s
movetype= a
physics = s
juggle  = 5
anim = 281
velset = 0,0
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
freqmul = 1.75
value = 5, 4

[state 240, 1]
type = velset
trigger1 = time < 6
x = 4

[state 240, 2]
type = hitdef
trigger1 = animelem = 4
attr = s, na
animtype  = medium
damage    = 51,3
guarDFlag = ma
pausetime = 10,10
sparkno = s6030
guard.sparkno = s6000
sparkxy = -10,-40
hitsound = s0+var(49),2
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6
air.velocity = -2.2,-3.2

[state 240, 1]
type = changestate
trigger1 = command = "z"
trigger1 = movecontact
value = 282
ctrl = 1

[state 240, 1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;guren3
[statedef 282]
type    = U
movetype= a
physics = n
anim = 100
velset = 8,0
poweradd = 60
ctrl = 0

[state 810, grab sound]
type = changestate
trigger1 = time = 10
value = 283

;---------------------------------------------------------------------------
;deadly raise
[statedef 283]
type    = a
movetype= a
physics = n
anim = 1100
ctrl = 0

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 1, 8

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 5, 2

[state 870, push block]
type = helper
trigger1 = time = 6
id = 1101
name = "spairaru"
pos = 0,0
postype = p1
stateno = 11000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 0

[state 240, 2]
type = hitdef
trigger1 = hitcount < 2
trigger1 = time%12 = 0
attr = s, na
animtype  = medium
damage    = 51,4
guarDFlag = ma
pausetime = 6,6
sparkno = s6025
guard.sparkno = s6000
sparkxy = -10,-75
hitsound = s0+var(49),1
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -1.2,-13
air.velocity = -1.2,-13

[state 240, 2]
type = hitdef
trigger1 = hitcount = 2
trigger1 = time%8 = 0
attr = s, na
animtype  = medium
damage    = 51,4
guarDFlag = ma
pausetime = 10,10
sparkno = s6001
guard.sparkno = s6000
sparkxy = -10,-75
hitsound = s0+var(49),2
guardsound = s0+var(49),8
ground.type = high
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -9,-12
air.velocity = -9,-12

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 1, 8
channel = 0

[state 810, grab sound]
type = velset
trigger1 = animelem = 3
x = 0

[state 810, grab sound]
type = velset
trigger1 = animelem = 3
y = -7.5

[state 810, grab sound]
type = changestate
trigger1 = time = 20
value = 1104

;---------------------------------------------------------------------------
;crouching light punch
[statedef 400]
type    = c
movetype= a
physics = c
juggle  = 5
poweradd= 15
anim = 400
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 3, 1
volume = 255
volumescale = 255
channel = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,3
volume = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0


[state 200, 1]
type = hitdef
trigger1 = animelem = 2
attr = S, NA
animtype = Light
damage = 23,0
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 7,7
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-30
guard.pausetime = 8,8
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
down.velocity = -6,-7
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 30)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[state 200, 1]
type = movehitreset
trigger1 = movecontact         

[state 400, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;crouching strong punch
[statedef 410]
type    = c
movetype= a
physics = c
juggle  = 6
poweradd= 50
anim = 410
ctrl = 0
sprpriority = 2

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state 183, 3]
type = playsnd
trigger1 = time = 12
value = 7,2
channel = 1

[state 870, push block]
type = helper
trigger1 = time%10 = 0
trigger1 = time > 9
trigger1 = time < 49
id = 411
name = "Ripple Laser"
pos = 52,-35
stateno = 411
ownpal = 1


[state 240, 2]
type = hitdef
trigger1 = time%25 = 0
attr = C, NA
animtype = Medium
hitflag = MAF
guardflag = MA
damage    = 25,3
pausetime = 0,7
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = low
air.type = low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 3
yaccel = .99
ground.velocity = -6,0
guard.velocity = -7
air.velocity = -2,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
down.velocity = -6,-7
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+var(49),1
channel = 4

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+var(49),0
channel = 4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 50)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[state 200, 1]
type = movehitreset
trigger1 = movecontact


[state 410, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;-------------------------------------
[statedef 411]
type    = a
movetype= a
physics = n
juggle  = 5
anim = 413
velset = 3,0
ctrl = 0

[state 183, 3]
type = explod
trigger1 = time = 0
anim = 411
id = 4110
name = "rippleA"
scale = .83,1.07   
pos = 0,0
bindtime = -1
sprpriority = 4
ownpal = 1

[state 183, 3]
type = explod
trigger1 = time = 0
anim = 412
id = 4110
name = "rippleB"
scale = .83,1.07   
pos = 0,0
bindtime = -1
sprpriority = -4
ownpal = 1

[state 12001]
type = varset
trigger1 = time = 0 
v = 0
value = 0

[state 12001]
type = varadd
trigger1 = time > 0
v = 0
value = 1

[state 12001]
type = modifyexplod
trigger1 = time > 0
id = 4110
scale = 1,(1+var(0)/95.00)
trans = addalpha
alpha = 256-(time*15), time*15

[state 3001, attackmulset]
type = attackmulset
trigger1 = 1
value = parent, Fvar(0)
ignorehitpause = 1 

[state 1030, nothitby]
type = nothitby
trigger1 = time >= 0
time = 1
value = sca, na, sa, ha, nt, st, ht
ignorehitpause = 1

[state 1030, enDFromproj]
type = hitby
trigger1 = 1
value = sca, np, sp, hp, ap
ignorehitpause = 1

[state 1030, enDFromproj]
type = hitoverride
trigger1 = 1
slot = 7
time = 1
stateno = 412
attr = sca, np, sp, hp, ap
ignorehitpause = 1

[state 3001, parentvaradd]
type = parentvaradd
trigger1 = movehit
v = 18
value = 1

[state 200, 1]
type = destroyself
trigger1 = time = 39

;----------------------------------
[statedef 412]
type    = a
movetype= a
physics = n
juggle  = 5
anim = 9999
velset = 3,0
ctrl = 0

[state 183, 3]
type = removeexplod
trigger1 = time = 0
id = 4110

[state 200, 1]
type = destroyself
trigger1 = time = 1

;---------------------------------
[statedef 420]
type    = c
movetype= a
physics = c
juggle  = 5
poweradd= 65
anim = 420
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 0
value = 3, 0
volume = 255
volumescale = 255
channel = 0
persistent = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state 200, 1]
type = playsnd
trigger1 = animelem = 4
value = 5, 36

[state , explod0]
type = explod
trigger1 = animelem = 4
anim = 421
id = 421
pos = 0, 0
postype = p1
sprpriority = 4
scale = .83,1.07   
ignorehitpause = 0
removeongethit = 1
ownpal = 1

[state 240, 2]
type = hitdef
trigger1 = animelem = 4
attr = C, NA
animtype = up
damage    = 63,4
hitflag = MAFD
guardflag = MA
priority = 5, Hit
pausetime = 12,12
guard.pausetime = 11,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 25
guard.hittime = 17
yaccel = .99
ground.velocity = 0,-18.6
guard.cornerpush.veloff = -18
down.velocity = -6,-7
ground.cornerpush.veloff = 0
air.velocity = 0,-18.6
guard.velocity = -10
airguard.velocity = -10.5,3
getpower= 7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Launcher Spark]
type = Explod
trigger1 = MoveHit
anim = 8020
pos = 60, -60
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
ownpal = 1
facing = -1

[state 240, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;crouching light kick
; cns Difficulty: easy
[statedef 430]
type    = c
movetype= a
physics = c
juggle  = 5
poweradd= 22
anim = 430
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 4
value = 7, 11

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state 430, 2]
type = hitdef
trigger1 = time%5 = 0
trigger1 = hitcount < 3
attr = c, na
damage    = 28,2
animtype  = light
hitflag = MAFD
guarDFlag = la
pausetime = 8,8
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = low
air.type = low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 6
yaccel = .99
ground.velocity = -6,0
guard.velocity = -6
air.velocity = -2,-2
ground.cornerpush.veloff = -5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
down.velocity = -6,-7
air.fall = 1
fall.recover = 0
id = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = 5+var(49),1
channel = 4
ignorehitpause = 1


[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+var(49),0
channel = 4
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[state 430, 3]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;crouch strong kick
[statedef 440]
type    = c
movetype= a
physics = c
juggle  = 4
poweradd= 70
anim = 440
ctrl = 0
sprpriority = 2

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state 200, 1]
type = playsnd
trigger1 = time = 4
value = 7, 14
volume = 100
volumescale = 100
channel = 0

[state 440, 3]
type = hitdef
trigger1 = time = 0
attr = c, na
damage  = 20,3
hitflag = MAFD
animtype = up
guarDFlag = MA
pausetime = 0,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 18
guard.hittime = 17
yaccel = .99
ground.velocity = -2,-13
guard.velocity = -8
guard.cornerpush.veloff = -12
ground.cornerpush.veloff = 0
air.velocity = -2,-13
guard.velocity = -10
airguard.velocity = -10.5,3
getpower= 7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 440, 2]
type = movehitreset
trigger1 = movecontact

[state 440, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------
[statedef 450]
type    = c
movetype= a
physics = n
juggle  = 7
poweradd= 70
anim = 450
ctrl = 0
sprpriority = 2

[state 10, 1]
type = velset
trigger1 = time = 0
trigger2 = command != "holdfwd" && command != "holdback"
y = 0
x = 0

[state 10, 1]
type = velset
triggerall = time = 0
trigger1 = command = "holdfwd"
x = 0.8

[state 10, 1]
type = veladd
triggerall = time = 0
trigger1 = command = "holdfwd"
x = 1.8

[state 10, 1]
type = velset
triggerall = time = 0
trigger1 = command = "holdback"
x = -0.8

[state 10, 1]
type = veladd
triggerall = time = 0
trigger1 = command = "holdback"
x = -1.3

[state 200, 1]
type = playsnd
trigger1 = animelem = 4
value = 7, 11

[state 440, 3]
type = hitdef
trigger1 = time = 0
attr = C, NA
animtype = hard
ground.type = trip
damage    = 72,3
hitflag = MAFD
guardflag = LA
priority = 5, Hit
pausetime = 10,11
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 20
air.hittime = 12
guard.hittime = 17
yaccel = .65
ground.velocity = 0,-4
guard.velocity = -10
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -13.5
air.velocity = 0,-4
airguard.velocity = -10.5,3
down.velocity = -6,-7
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 10
id = 4
getpower= 35
givepower= 35


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1001]
type = varrandom
trigger1 = 1
v = 0
range = -8, 8
ignorehitpause = 1

[state 1001]
type = varrandom
trigger1 = 1
v = 1
range = -5, -20
ignorehitpause = 1

[state 1001]
type = varrandom
trigger1 = 1
v = 2
range = 5, -10
ignorehitpause = 1

[State 52, Helper]
type = Helper
trigger1 = time = 3
stateno = 8200

[State 52, Helper]
type = Helper
trigger1 = time = 17
stateno = 8200

[state 440, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;jump light punch
; cns Difficulty: easy
[statedef 600]
type    = a
movetype= a
physics = a
poweradd= 11
anim = 600
ctrl = 0
sprpriority = 2

[state 410,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 3, 1
volume = 255
volumescale = 255
channel = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,3
volume = 50

[state 600, 2]
type = hitdef
trigger1 = time = 0
attr = A, NA
animtype = Light
damage    = 20,2
hitflag = MAFD
getpower= 21
givepower= 21
guardflag = HA
priority = 4, Hit
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-7
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-10.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 222, 5]
type = changestate
trigger1 = animtime = 0
value = 460

;---------------------------------------------------------------------------
;jump strong punch
; cns Difficulty: easy
[statedef 610]
type    = a
movetype= a
physics = a
anim = 610
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 1
value = 5,37

[state 420,3]
type = veladd
trigger1 = var(3) = 1
y = -0.19

[state , explod0]
type = explod
trigger1 = animelem = 1
anim = 611
id = 611
postype = p1
pos = 0, 0
bindtime = -1
sprpriority = 4
scale = .83,1.07   
removetime = -2
removeongethit = 1
ownpal = 1

[state 200, 1]
type = playsnd
trigger1 = animelem = 2
value = 3,0
volume = 255
volumescale = 255
channel = 0

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(6) = 1

[state 610, 3]
type = hitdef
trigger1 = time = 0
attr = A, NA
animtype = Medium
air.animtype = up
damage =  42,0
hitflag = MAFD
guardflag = HA
priority = 5, Hit
getpower= 21
givepower= 21
pausetime = 9,11
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 16
air.hittime = 13
yaccel = 1.19
down.velocity = -6,-7
guard.velocity = -10
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-7.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
palfx.time = 31
palfx.add = 40,96,240
palfx.mul = 176,240,240
palfx.sinadd = 8,32,64,4
palfx.color = 8
id = 1
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 222, 5]
type = changestate
trigger1 = animtime = 0
value = 460

[state 420, 5]
type = ctrlset
trigger1 = time = 33
value = 1

[statedef 620]
type    = a
movetype= a
physics = a
poweradd= 65
anim = 620
ctrl = 0
sprpriority = 2

[state 420,3]
type = veladd
trigger1 = var(3) = 1
y = -0.29

[state 200, 1]
type = playsnd
trigger1 = time = 4
value = 7, 9
volume = 100
volumescale = 100
channel = 9

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(19) > 1 && var(17) > 0
var(6) = 1

[State 620, HitDef]
type = HitDef
triggerall = !var(6)
trigger1 = time = 0
attr = A, NA
animtype = Back
air.animtype = back
damage =  62,0
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  35
givepower= 35
pausetime = 13, 13
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -16.4,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
triggerall = var(6)
trigger1 = time = 0
attr = A, NA
animtype = Back
air.animtype = back
damage =  62,0
hitflag = MAFD
guardflag = HA
priority = 6, Hit
givepower= 35
givepower= 35
pausetime = 13, 13
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -16.4,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 451,6]
type = changestate
trigger1 = time = 40
value = 460
ctrl = 1

;---------------------------------------------------------------------------
;jump light kick
; cns Difficulty: easy
[statedef 630]
type    = a
movetype= a
physics = a
poweradd= 20
anim = 630
ctrl = 0
sprpriority = 2

[state 420,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

[state 200, 1]
type = playsnd
trigger1 = time = 2
value = 7, 11

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(6) = 1

[state 630, 2]
type = hitdef
trigger1 = time%5 = 0
trigger1 = hitcount < 3
attr = A, NA
animtype = Light
damage    = 20,2
hitflag = MAFD
getpower= 21
givepower= 21
guardflag = HA
priority = 4, Hit
pausetime = 9,11
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 13
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-7
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-10.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = 5+var(49),1
channel = 4
ignorehitpause = 1

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+var(49),0
channel = 4
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[state 222, 5]
type = changestate
trigger1 = animtime = 0
value = 460

;---------------------------------------------------------------------------
;jump strong kick
; cns Difficulty: easy
[statedef 640]
type    = a
movetype= a
physics = a
poweradd= 65
anim = 640
ctrl = 0
sprpriority = 2

[state 240, 1]
type = playsnd
trigger1 = time = 2
value = 1, 10
volume = 255
volumescale = 255
channel = 0

[state 420,3]
type = veladd
trigger1 = var(3) = 1
y = -0.19

[state 200, 1]
type = playsnd
trigger1 = time = 1
volume = 120
volumescale = 120
value = 5,31
channel = 5

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(6) = 1

[state 640, 3]
type = hitdef
trigger1 = time = 0
attr = A, NA
animtype = Medium
air.animtype = up
damage =  42,0
hitflag = MAFD
guardflag = HA
priority = 5, Hit
getpower= 21
givepower= 21
pausetime = 9,11
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 16
air.hittime = 13
yaccel = 1.19
down.velocity = -6,-7
guard.velocity = -10
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-10.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 231, 4]
type = changestate
trigger1 = animtime = 0
value = 460

[statedef 650]
type    = a
movetype= a
physics = a
anim = 650
poweradd= 65
ctrl = 0
sprpriority = 2

[state 200, 1]
type = playsnd
trigger1 = time = 2
value = 7, 11

[state 420,3]
type = veladd
trigger1 = var(3) = 1
y = -0.29

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(19) > 1 && var(17) > 0
var(6) = 1

[State 620, HitDef]
type = HitDef
trigger1 = !var(6) && time = 0
attr = A, NA
animtype = Back
air.animtype = back
damage =  62,0
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  35
givepower= 35
pausetime = 13, 13
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .93
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -6,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(6) && time = 1
attr = A, NA
animtype = Back
air.animtype = back
damage =  62,0
hitflag = MAFD
guardflag = HA
priority = 6, Hit
givepower= 35
givepower= 35
pausetime = 13, 13
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .93
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -6,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 451,6]
type = changestate
trigger1 = animtime = 0
value = 460
ctrl = 1

; Oo 
[Statedef 701]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(4) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100


;----------------------------------------------------------
[statedef 800]
type    = s
movetype= a
physics = s
juggle  = 0
velset = 0,0
ctrl = 0
sprpriority = 2

[state 1000, changeanim]
type = changeanim
trigger1 = time = 0 && anim != 800
value = 800

[state 800, 1]
type = hitdef
trigger1 = time = 0
attr = s, nt
damage = 0
hitflag = ma-
priority = 1, miss
pausetime = 0,0
ground.type = low
animtype = medium
sparkno = s9999
guard.sparkno = s9999
sparkxy = -10,-58
hitsound = s5,4
guardsound = s6+var(49),0
sprpriority = 1
numhits = 1
p1facing = ifelse (command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 810
p2stateno = 8100
fall = 1
fall.recover = 0
kill = 0

[state 800, 2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------------
;le slash!
[statedef 810]
type    = a
movetype= a
physics = n
sprpriority = -2
anim = 810
poweradd = 60

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[state 810, grab sound]
type = targetbind
trigger1 = animelem = 2
pos = 58, -4

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 9

[state 810, grab sound]
type = targetbind
trigger1 = animelem = 3
pos = -25, -144

[state 810, grab sound]
type = targetbind
trigger1 = animelem = 4
pos = -23, -139

[state 810, grab sound]
type = targetlifeadd
trigger1 = animelem = 4
value = -100

[state 200, 1]
type = playsnd
trigger1 = animelem = 5
value = 3, 0
volume = 255
volumescale = 255

[state 810, state end]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

[statedef 8100]
type    = U
movetype= h
physics = n
sprpriority = -1
poweradd = 60

[state 810, state end]
type = changeanim2
trigger1 = time = 0
value = 820

[state 810, state end]
type = velset
trigger1 = animtime = 0
x = -14
y = -6.5

[state 810, state end]
type = changestate
trigger1 = animtime = 0
value = 8101

[Statedef 8101]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim2
trigger1 = AnimTime = 0
value = 821

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = .7

[State 5050, 4] ;Recover near ground
type = selfstate
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = selfstate
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[state 832, 8]
type = envshake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4

[State 5050, 6]
type = selfstate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110 ;HIT_BOUNCE

[statedef 801]
type    = a
movetype= a
physics = a
juggle  = 0
ctrl = 0
sprpriority = 2

[state 1000, changeanim]
type = varset
trigger1 = command = "z"
v = 0
value = 1

[state 1000, changeanim]
type = changeanim
trigger1 = time = 0 && anim != 850
value = 850

[state 800, 1]
type = hitdef
trigger1 = time = 0
attr = a, nt
damage = 0
animtype = hard
fall.animtype = hard
ground.type = low
hitflag = ma
priority = 1, miss
sparkno = s9999
guard.sparkno = s9999
sparkxy = -10,-58
hitsound = s5,4
guardsound = s6+var(49),0
numhits = 1
p1facing = ifelse (command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 811
p2stateno = 8100
fall = 1
fall.recover = 0
kill =0

[state 222, 5]
type = changestate
trigger1 = animtime = 0
value = 460

;---------------------------------------------------------------------------
;fly Up
[statedef 811]
type    = a
movetype= a
physics = n
anim = 811
velset = 0,0
poweradd = 60

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
y = 3

[state 810, grab sound]
type = targetbind
trigger1 = animelem = 2
pos = 58, -4

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 9

[state 810, grab sound]
type = targetbind
trigger1 = animelem = 3
pos = -25, -144

[state 810, grab sound]
type = targetbind
trigger1 = animelem = 4
pos = -23, -139

[state 810, grab sound]
type = targetlifeadd
trigger1 = animelem = 4
value = -100

[state 200, 1]
type = playsnd
trigger1 = animelem = 5
value = 3, 0
volume = 255
volumescale = 255

[state 810, state end]
type = changestate
trigger1 = animtime = 0
value = 460
ctrl = 1

;---------------------------------------------------------------------------
;thrown by rising throw
[statedef 820]
type    = a
movetype= h
physics = n
velset = 0,0

[state 820, 1]
type = sprpriority
trigger1 = 1
value = 1

[state 820, 1]
type = changeanim2
trigger1 = time = 0
value = 821+var(40)

[state 820, 1]
type = screenbound
trigger1 = 1
value = 0

[state 711, 6]
type = selfstate
trigger1 = enemynear, movetype != A
value = 5040
ctrl = 1

[state 711, 6]
type = velset
trigger1 = time = 51
x = -12
y = -3

[state 711, 6]
type = changestate
trigger1 = time = 51
value = 8101

;---------------------------------------------------------------------------
; Freeze
[statedef 920]
type    = U
movetype= h
physics = U
velset = 0,0
ctrl = 0

[state -2, 1]
type = afterimagetime
trigger1 = movetype = h
time = 0
ignorehitpause = 1

[state hahaha]
type = nothitby
trigger1 = time = 0
value = sca
time = 1

[state haha]
type = changeanim
trigger1 = 1
value = anim
elem = animelemno(0)

[state selfstate]
type = selfstate
trigger1 = time >= 100
value = 5050


; ===================== (Supers states) =======================
; Bonne Strike Light
[statedef 1000]
type    = U
movetype= a
physics = n
power = 100
ctrl = 0
anim = 1000+(2*statetype = A)
velset = 0,0

[state 820, 1]
type = playsnd
trigger1 = animelem = 2
value = 7,9
channel = 6

[state 820, 1]
type = playsnd
trigger1 = animelem = 2
value = 1,10
volume = 255
volumescale = 255
channel = 0

[state 820, 1]
type = velset
trigger1 = animelem = 2
x = 6

[state 820, 1]
type = veladd
trigger1 = animelem = 2
x = 6

[State G-FX, Move Dust]
type = Explod
triggerall = statetype = S
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 820, 1]
type = varset
trigger1 = time = 0
v = 0
value = 33

[state 820, 1]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state 810]
type = varadd
triggerall = var(0) > 3
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"
v = 0
value = 3

[state 820, 1]
type = varadd
trigger1 = vel x != 0
v = 0
value = -3

[State 1000, 6]
type = HitDef
triggerall = time%3 = 0
trigger1 = var(0) > 3
trigger2 = time<25
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 4,4
sparkxy = -10,-55
hitsound = -1
sparkno = s9999
givepower = 10,1
getpower = 20,5
guard.sparkno = s8050
guardsound = -1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6.5
air.velocity = -3.5, -5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .8
fall.xvelocity = 0
fall.yvelocity = -1
airguard.velocity = -10.5,3
down.velocity = -6,-7
air.fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
triggerall = p2statetype = A
triggerall = time%3 = 0
trigger1 = var(0) > 3
trigger2 = time<25
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 4,4
sparkxy = -10,-55
hitsound = -1
sparkno = s9999
givepower = 10,1
getpower = 20,5
guard.sparkno = s8050
guardsound = -1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6.5
air.velocity = -3.5, -5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = 1.3
fall.xvelocity = 0
airguard.velocity = -10.5,3
fall.yvelocity = -1
down.velocity = -6,-7
air.fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
trigger1 = var(0) <= 6
trigger1 = time > 26
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 11,11
sparkxy = -10,-55
hitsound = -1
guardsound = -1
sparkno = s9999
guard.sparkno = s8050
givepower = 10,1
getpower = 20,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.cornerpush.veloff = -35
air.cornerpush.veloff = -35
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
ground.velocity = -12,-11
down.velocity = -6,-7
air.velocity = -12, -5
yaccel = .9
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
airguard.velocity = -10.5,3
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
triggerall = p2statetype = A
trigger1 = var(0) <= 6
trigger1 = time > 26
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 11,11
sparkxy = -10,-55
hitsound = -1
guardsound = -1
sparkno = s9999
guard.sparkno = s8050
givepower = 10,1
getpower = 20,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.cornerpush.veloff = -35
air.cornerpush.veloff = -35
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
ground.velocity = -12,-11
down.velocity = -6,-7
air.velocity = -12, -5
yaccel = 1.3
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[state 820, 1]
type = playsnd
trigger1 = movehit
value = 5+var(49),3
channel = 4
ignorehitpause = 1

[state 820, 1]
type = playsnd
trigger1 = moveguarded
value = 6+var(49),0
channel = 4
ignorehitpause = 1

[state 820, 1]
type = varset
trigger1 = movecontact
v = 1
value = 1

[state 820, 1]
type = movehitreset
trigger1 = 1
ignorehitpause = 1

[state 183, 3]
type = explod
trigger1 = statetype != A
trigger1 = animelem = 4
anim = 10000
ID = 10000
pos = -46,-40
bindtime = -1
scale = .83,1.07  
sprpriority = 4
removeongethit = 1
removetime = 99999

[state 183, 3]
type = explod
trigger1 = statetype = A
trigger1 = animelem = 4
anim = 10000
ID = 10000
pos = -6,-51
bindtime = -1
scale = .83,1.07  
sprpriority = 4
removeongethit = 1
removetime = 99999

[state 820, 1]
type = changestate
trigger1 = var(1) = 1
trigger1 = var(0) <= 0
trigger2 = time = 28
trigger2 = var(1) = 0
trigger3 = time = 48
value = 1010+statetype = A

;---------------------------------------------------------------------------
; Bonne Strike Medium
[statedef 1001]
type    = U
movetype= a
physics = n
power = 100
ctrl = 0
anim = 1000+(2*statetype = A)
velset = 0,0

[state 820, 1]
type = playsnd
trigger1 = animelem = 2
value = 7,9
channel = 6

[state 820, 1]
type = playsnd
trigger1 = animelem = 2
value = 1,10
volume = 255
volumescale = 255
channel = 0

[state 820, 1]
type = velset
trigger1 = animelem = 2
x = 6

[state 820, 1]
type = veladd
trigger1 = animelem = 2
x = 6

[State G-FX, Move Dust]
type = Explod
triggerall = statetype = S
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 820, 1]
type = varset
trigger1 = time = 0
v = 0
value = 45

[state 820, 1]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state 810, grab sound]
type = varadd
triggerall = var(0) > 3
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"
v = 0
value = 3

[state 820, 1]
type = varadd
trigger1 = vel x != 0
v = 0
value = -3

[State 1000, 6]
type = HitDef
triggerall = time%3 = 0
trigger1 = var(0) > 3
trigger2 = time<30
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 4,4
sparkxy = -10,-55
hitsound = -1
sparkno = s9999
givepower = 10,1
getpower = 20,5
guard.sparkno = s8050
guardsound = -1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6.5
air.velocity = -3.5, -5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.velocity = -6,-7
yaccel = .8
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
triggerall = p2statetype = A
triggerall = time%3 = 0
trigger1 = var(0) > 3
trigger2 = time<30
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 4,4
sparkxy = -10,-55
hitsound = -1
sparkno = s9999
givepower = 10,1
getpower = 20,5
guard.sparkno = s8050
guardsound = -1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6.5
air.velocity = -3.5, -5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = 1.3
fall.xvelocity = 0
fall.yvelocity = -1
airguard.velocity = -10.5,3
down.velocity = -6,-7
air.fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
trigger1 = var(0) <= 6
trigger1 = time > 31
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 11,11
sparkxy = -10,-55
hitsound = -1
guardsound = -1
sparkno = s9999
guard.sparkno = s8050
givepower = 10,1
getpower = 20,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.cornerpush.veloff = -35
air.cornerpush.veloff = -35
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
ground.velocity = -12,-11
down.velocity = -6,-7
air.velocity = -12, -5
yaccel = .9
fall.xvelocity = 0
fall.yvelocity = -1
airguard.velocity = -10.5,3
air.fall = 1
fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
triggerall = p2statetype = A
trigger1 = var(0) <= 6
trigger1 = time > 31
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 11,11
sparkxy = -10,-55
hitsound = -1
guardsound = -1
sparkno = s9999
guard.sparkno = s8050
givepower = 10,1
getpower = 20,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.cornerpush.veloff = -35
air.cornerpush.veloff = -35
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
ground.velocity = -12,-11
air.velocity = -12, -5
yaccel = 1.3
airguard.velocity = -10.5,3
fall.xvelocity = 0
down.velocity = -6,-7
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[state 820, 1]
type = playsnd
trigger1 = movehit
value = 5+var(49),3
channel = 4
ignorehitpause = 1

[state 820, 1]
type = playsnd
trigger1 = moveguarded
value = 6+var(49),0
channel = 4
ignorehitpause = 1

[state 820, 1]
type = varset
trigger1 = movecontact
v = 1
value = 1

[state 820, 1]
type = movehitreset
trigger1 = 1
ignorehitpause = 1

[state 183, 3]
type = explod
trigger1 = statetype != A
trigger1 = animelem = 4
anim = 10000
ID = 10000
pos = -46,-40
bindtime = -1
scale = .83,1.07  
sprpriority = 4
removeongethit = 1
removetime = 99999

[state 183, 3]
type = explod
trigger1 = statetype = A
trigger1 = animelem = 4
anim = 10000
ID = 10000
pos = -6,-51
bindtime = -1
scale = .83,1.07  
sprpriority = 4
removeongethit = 1
removetime = 99999

[state 820, 1]
type = changestate
trigger1 = var(1) = 1
trigger1 = var(0) <= 0
trigger2 = time = 33
trigger2 = var(1) = 0
trigger3 = time = 55
value = 1010+statetype = A

;---------------------------------------------------------------------------
; Bonne Strike Hard
[statedef 1002]
type    = U
movetype= a
physics = n
ctrl = 0
power = 100
anim = 1000+(2*statetype = A)
velset = 0,0

[state 820, 1]
type = playsnd
trigger1 = animelem = 2
value = 7,9
channel = 6

[state 820, 1]
type = playsnd
trigger1 = animelem = 2
value = 1,10
volume = 255
volumescale = 255
channel = 0

[state 820, 1]
type = velset
trigger1 = animelem = 2
x = 6

[state 820, 1]
type = veladd
trigger1 = animelem = 2
x = 6

[State G-FX, Move Dust]
type = Explod
triggerall = statetype = S
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 820, 1]
type = varset
trigger1 = time = 0
v = 0
value = 55

[state 820, 1]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state 810, grab sound]
type = varadd
triggerall = var(0) > 3
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"
v = 0
value = 3

[state 820, 1]
type = varadd
trigger1 = vel x != 0
v = 0
value = -3

[State 1000, 6]
type = HitDef
triggerall = time%3 = 0
trigger1 = var(0) > 3
trigger2 = time<35
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 4,4
sparkxy = -10,-55
hitsound = -1
sparkno = s9999
givepower = 10,1
getpower = 20,5
guard.sparkno = s8050
guardsound = -1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6.5
air.velocity = -3.5, -5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.velocity = -6,-7
yaccel = .8
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
triggerall = p2statetype = A
triggerall = time%3 = 0
trigger1 = var(0) > 3
trigger2 = time<35
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 4,4
sparkxy = -10,-55
hitsound = -1
sparkno = s9999
givepower = 10,1
getpower = 20,5
guard.sparkno = s8050
guardsound = -1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -6.5
air.velocity = -3.5, -5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.velocity = -6,-7
yaccel = 1.3
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
trigger1 = var(0) <= 6
trigger1 = time > 36
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 11,11
sparkxy = -10,-55
hitsound = -1
guardsound = -1
sparkno = s9999
guard.sparkno = s8050
givepower = 10,1
getpower = 20,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.cornerpush.veloff = -35
air.cornerpush.veloff = -35
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
ground.velocity = -12,-11
down.velocity = -6,-7
air.velocity = -12, -5
yaccel = .9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State 1000, 6]
type = HitDef
triggerall = p2statetype = A
trigger1 = var(0) <= 6
trigger1 = time > 36
attr = S, SA
animtype  = Heavy
damage    = 17,3
guardflag = MA
hitflag = MAFD
pausetime = 11,11
sparkxy = -10,-55
hitsound = -1
guardsound = -1
sparkno = s9999
guard.sparkno = s8050
givepower = 10,1
getpower = 20,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.cornerpush.veloff = -35
air.cornerpush.veloff = -35
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
ground.velocity = -12,-11
air.velocity = -12, -5
down.velocity = -6,-7
yaccel = 1.3
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0
ID = 2+4
air.hittime = 5

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[state 820, 1]
type = playsnd
trigger1 = movehit
value = 5+var(49),3
channel = 4
ignorehitpause = 1

[state 820, 1]
type = playsnd
trigger1 = moveguarded
value = 6+var(49),0
channel = 4
ignorehitpause = 1

[state 820, 1]
type = varset
trigger1 = movecontact
v = 1
value = 1

[state 820, 1]
type = movehitreset
trigger1 = 1
ignorehitpause = 1

[state 183, 3]
type = explod
trigger1 = statetype != A
trigger1 = animelem = 4
anim = 10000
ID = 10000
pos = -46,-40
bindtime = -1
scale = .83,1.07  
sprpriority = 4
removeongethit = 1
removetime = 99999

[state 183, 3]
type = explod
trigger1 = statetype = A
trigger1 = animelem = 4
anim = 10000
ID = 10000
pos = -6,-51
bindtime = -1
scale = .83,1.07  
sprpriority = 4
removeongethit = 1
removetime = 99999

[state 820, 1]
type = changestate
trigger1 = var(1) = 1
trigger1 = var(0) <= 0
trigger2 = time = 38
trigger2 = var(1) = 0
trigger3 = time = 60
value = 1010+statetype = A

;---------------------------------------------------------------------------
; Bonne Strike end drill
[statedef 1010]
type    = S
movetype= I
physics = S
anim = 1001
ctrl = 0
velset = 0,0

[state 820, 1]
type = removeexplod
trigger1 = time = 0
ID = 10000

[state 820, 1]
type = stopsnd
trigger1 = animelem = 3
channel = 6

[state 820, 1]
type = changestate
trigger1 = animtime = 0
trigger1 = statetype != A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air Bonne Strike end drill
[statedef 1011]
type    = A
movetype= I
physics = a
anim = 1003
ctrl = 0

[state 820, 1]
type = velmul
trigger1 = vel X > 5
x = .9

[state 820, 1]
type = stopsnd
trigger1 = animelem = 3
channel = 6

[state 820, 1]
type = removeexplod
trigger1 = time = 0
ID = 10000

[state 820, 1]
type = changestate
trigger1 = animtime = 0
trigger1 = statetype = A
value = 460

;-----------------------------------
;Beacon Bomb - Light
[statedef 1100]
type    = s
movetype= a
physics = s
power = 100
anim = 1100
velset = 0,0
ctrl = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 1003]
type = playsnd
trigger1 = animelem = 2
value = 1,3
volume = 255
volumescale = 255
channel = 0

[state 183, 3]
type = playsnd
trigger1 = animelem = 7
value = 7, 8
volume = 255
volumescale = 255
freqmul = 1.5

[state 183, 3]
type = helper
trigger1 = target, stateno = 1110
trigger1 = numhelper(11000) = 0
stateno = 11000
id = 11000
name = "beacon"
postype = p2
pos = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear, const(size.mid.pos.y)+-20)
bindtime = -1
persistent = 0

[state 183, 3]
type = explod
trigger1 = animelem = 4
anim = 11001
pos = 58,-95
bindtime = -1
scale = .83,1.07  
sprpriority = 3
removeongethit = 1
removetime = 15

[state 183, 3]
type = explod
trigger1 = animelem = 7
anim = 11002
name = "pow"
pos = 62,-94
scale = .83,1.07  
bindtime = -1
sprpriority = 3

[state 200, 2]
type = hitdef
trigger1 = time = 0
trigger1 = p2stateno != 1110
attr = a, sa                    
damage    = 27,3             
animtype = hard         
air.animtype = Up
getpower = 60
givepower = 80,10
guarDFlag = ma          
hitflag = mafd                   
priority = 7                     
pausetime = 0,6
sparkxy = -10,-90
sparkno = s9999
guard.sparkno = s8050
sparkxy = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear, const(size.mid.pos.y))
hitsound = -1
guardsound = s6+var(49),0
ground.type = low            
ground.slidetime = 12        
ground.hittime  = 12            
ground.velocity = 0,0
air.slidetime = 12
air.hittime = 2
air.velocity = 0,0
airguard.velocity = -10.5,3
yaccel = .6
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
guard.velocity = -10
airguard.velocity = -4.3
p2stateno = 1110

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = 7,10
channel = 4
volume = 215
volumescale = 215
persistent = 0
ignorehitpause = 1


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X -32), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1003]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;Beacon Bomb - Medium
[statedef 1101]
type    = s
movetype= a
physics = s
anim = 1101
power = 100
velset = 0,0
ctrl = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 1003]
type = playsnd
trigger1 = animelem = 2
value = 1,3
volume = 255
volumescale = 255
channel = 0

[state 183, 3]
type = playsnd
trigger1 = animelem = 7
value = 7, 8
volume = 255
volumescale = 255
freqmul = 1.5


[state 183, 3]
type = helper
trigger1 = target, stateno = 1110
trigger1 = numhelper(11000) = 0
stateno = 11000
id = 11000
name = "beacon"
postype = p2
pos = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear, const(size.mid.pos.y)+-20)
bindtime = -1
persistent = 0

[state 183, 3]
type = explod
trigger1 = animelem = 4
anim = 11013
ID = 11000
pos = 61,-117
scale = .83,1.07 
bindtime = -1
sprpriority = 3
removeongethit = 1
removetime = 15

[state 183, 3]
type = explod
trigger1 = animelem = 7
anim = 11015
name = "pow"
pos = 53,-115
scale = .83,1.07 
bindtime = 1
sprpriority = 3

[state 200, 2]
type = hitdef
trigger1 = time = 0
trigger1 = p2stateno != 1110
attr = a, sa                    
damage    = 27,3             
animtype = hard         
air.animtype = Up
getpower = 60
givepower = 80,10
guarDFlag = ma          
hitflag = mafd                   
priority = 7       
sparkxy = -10,-90              
pausetime = 0,6
sparkno = s9999
guard.sparkno = s8050
sparkxy = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear, const(size.mid.pos.y))
hitsound = -1
guardsound = s6+var(49),0
ground.type = low            
ground.slidetime = 12        
ground.hittime  = 12            
ground.velocity = 0,0
air.slidetime = 12
air.hittime = 2
airguard.velocity = -10.5,3
air.velocity = 0,0
yaccel = .6
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
guard.velocity = -10
airguard.velocity = -4.3
p2stateno = 1110

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = 7,10
channel = 4
volume = 215
volumescale = 215
persistent = 0
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X -32), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1003]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;Beacon Bomb - Hard
[statedef 1102]
type    = s
movetype= a
physics = s
anim = 1102
power = 100
velset = 0,0
ctrl = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 1003]
type = playsnd
trigger1 = animelem = 2
value = 1,3
volume = 255
volumescale = 255
channel = 0

[state 183, 3]
type = playsnd
trigger1 = animelem = 7
value = 7, 8
volume = 255
volumescale = 255
freqmul = 1.5


[state 183, 3]
type = helper
trigger1 = numhelper(11000) = 0
trigger1 = target, stateno = 1110 
stateno = 11000
id = 11000
name = "beacon"
postype = p2
pos = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear, const(size.mid.pos.y)+-20)
bindtime = -1
persistent = 0

[state 183, 3]
type = explod
trigger1 = animelem = 4
anim = 11014
pos = 43,-123
bindtime = -1
scale = .83,1.07 
sprpriority = -3
removeongethit = 1
removetime = 15

[state 183, 3]
type = explod
trigger1 = animelem = 7
anim = 11016
name = "pow"
pos = 46,-127
scale = .83,1.07 
bindtime = 1
sprpriority = 3

[state 200, 2]
type = hitdef
trigger1 = p2stateno != 1110
trigger1 = time = 0
attr = a, sa                    
damage    = 27,3             
animtype = hard         
air.animtype = Up
getpower = 60
givepower = 80,10
guarDFlag = ma          
hitflag = mafd                   
priority = 7   
sparkxy = -10,-90                  
pausetime = 0,6
sparkno = s9999
guard.sparkno = s8050
sparkxy = Floor(enemynear, const(size.mid.pos.x)),Floor(enemynear, const(size.mid.pos.y))
hitsound = -1
guardsound = s6+var(49),0
ground.type = low            
ground.slidetime = 12        
ground.hittime  = 12            
ground.velocity = 0,0
air.slidetime = 12
airguard.velocity = -10.5,3
air.hittime = 2
air.velocity = 0,0
yaccel = .6
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
guard.velocity = -10
airguard.velocity = -4.3
p2stateno = 1110

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
value = 7,10
channel = 4
volume = 215
volumescale = 215
persistent = 0
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X -32), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1003]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------------------------
;Beacon Bomb - p2stateno
[statedef 1110]
type    = U
movetype= H
physics = n
velset = 0,0
sprpriority = -3

[state 183, 3]
type = changeanim
trigger1 = selfanimexist(5300)
value = 5300
persistent = 0

[state 183, 3]
type = selfstate
trigger1 = time = 160
trigger1 = statetype = A
value = 5040

[state 183, 3]
type = selfstate
triggerall = time = 30
trigger1 = statetype != A
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"
value = 5000

[state 183, 3]
type = selfstate
trigger1 = time = 160
trigger1 = statetype != A
value = 5000
;-----------------------------------
;Beacon Bomb - Trapped, calling kobun
[statedef 11000]
type    = a
movetype= a
physics = n
anim = 11000
velset = 0,0
sprpriority = 2

[state 183, 3]
type = posset
trigger1 = 1
x = enemynear,pos x + (enemynear, const(size.mid.pos.x))

[state 183, 3]
type = explod
trigger1 = time = 0
anim = 11003
id = 11001
name = "moresUBlim"
scale = .45,.45
pos = -10,-18
bindtime = -1
sprpriority = 3
removetime = 200

[state 183, 3]
type = explod
trigger1 = time = 0
anim = 11004
id = 11001
name = "moresUBlim"
scale = .45,.45
pos = 10,18
bindtime = -1
sprpriority = 3
removetime = 200

[state 183, 3]
type = explod
trigger1 = time = 0
anim = 11011
id = 11001
name = "moresUBlim"
scale = .45,.45
pos = -10,18
bindtime = -1
sprpriority = 3
removetime = 200

[state 183, 3]
type = explod
trigger1 = time = 0
anim = 11012
id = 11001
name = "moresUBlim"
scale = .45,.45
pos = 10,-18
bindtime = -1
sprpriority = 3
removetime = 200

[state 183, 3]
type = helper
trigger1 = time = 0
stateno = 11001
id = 11001
name = "kobun1"
pos = -15,ceil(-75+pos y)
postype = back
facing = 1
sprpriority = 4

[state 183, 3]
type = helper
trigger1 = time = 0
stateno = 11001
id = 11002
name = "kobun1"
pos = -15,ceil(-75+pos y)
postype = front
facing = -1
sprpriority = 4

[state 1003]
type = removeexplod
trigger1 = time = 160
trigger2 = enemynear, stateno != 1110
ID = 11001

[state 1003]
type = Destroyself
trigger1 = time = 160
trigger2 = enemynear, stateno != 1110

;-----------------------------------
;Beacon Bomb - Kobun phase one
[statedef 11001]
type = A
physics = N
movetype = A
anim = 11005
sprpriority = 3

[state 7010, BURNING]
type = playsnd
trigger1 = time = 0
value = 6,6
volume = 155
volumescale = 155
channel = 1

[State 0]
Type = DisplayToClipboard
Trigger1 = 1
Text = "Vel X = %f, Vel Y = %f, Pos X = %f, Pos Y = %f"
Params = Vel X, Vel Y, Pos X, Pos Y
ignorehitpause = 1

[State 0]
Type = AppendToClipboard
Trigger1 = 1
Text = "\nParentdist X = %f Parentdist Y = %f, BED = %d"
Params = Parentdist X,Parentdist Y, ceil(backedgedist)
ignorehitpause = 1


[state 0, VelSet]
type = VelSet
trigger1 = !Time
x = ((parentdist x - 14)/26);+(ifelse(ishelper(1022), (ifelse(parentdist x <= 45, -.785, -.4285)), .35)))
y = -4.15

[state 0, VelSet]
type = VelAdd
trigger1 = time < 32
y = .55

[state 7010, BURNING]
type = bindtoparent
trigger1 = time >= 27
trigger1 = facing = parent, facing
pos = -10,0

[state 7010, BURNING]
type = bindtoparent
trigger1 = time >= 27
trigger1 = facing != parent, facing
pos = 10,0


[state 0, VelSet]
type = VelSet
trigger1 = time = 26
y = 0
x = 0

[state 0, VelSet]
type = PosSet
trigger1 = time = 26
x = parent, pos x
y = parent, pos y

[state 7010, BURNING]
type = changeanim
trigger1 = time = 26
value = 11006

[state 7010, BURNING]
type = playsnd
trigger1 = anim = 11006
value = 5,4
persistent = 0

[state 7010, BURNING]
type = varset
trigger1 = time = 160
v = 0
value = 1

[state 7010, BURNING]
type = changestate
trigger1 = time = 160
trigger2 = numhelper(11000) = 0
value = 11002

;-----------------------------------
;Beacon Bomb - Kobun phase two
[statedef 11002]
type    = a
movetype= i
physics = n
velset = 0,0
sprpriority = 3

[state 7010, BURNING]
type = veladd
trigger1 = 1
y = .7

[state 7010, BURNING]
type = changeanim
trigger1 = var(0) = 1
value = 11007
persistent = 0

[state 7010, BURNING]
type = changeanim
trigger1 = var(0) = 0
value = 11009
persistent = 0

[state 7010, BURNING]
type = changestate
trigger1 = pos y >= 0
value = 11003

;Beacon Bomb - Kobun last phase
[statedef 11003]
type    = a
movetype= a
physics = n
velset = 0,0
sprpriority = 3

[state 7010, BURNING]
type = turn
trigger1 = time = 0
trigger1 = rootdist x < 0

[state 7010, BURNING]
type = changeanim
trigger1 = var(0) = 0
value = 35002
persistent = 0

[state 7010, BURNING]
type = changeanim
trigger1 = var(0) = 1
value = 11008
persistent = 0

[state 7010, BURNING]
type = playsnd
trigger1 = anim = 11008
value = 3,3
volume = 155
volumescale = 155
persistent = 0
channel = 1

[state 7010, BURNING]
type = posset
trigger1 = time = 0
y = 0

[state 7010, BURNING]
type = velset
trigger1 = time = 0
x = 4

[state 7010, BURNING]
type = poweradd
trigger1 = var(0) = 1
trigger1 = rootdist x = [-30,30]
trigger1 = rootdist y = [-20,0]
value = 300
persistent = 0

[state 7010, BURNING]
type = playsnd
trigger1 = var(0) = 1
trigger1 = rootdist x = [-30,30]
trigger1 = rootdist y = [-20,0]
value = 7, 15
persistent = 0

[state 7010, BURNING]
type = changeanim
trigger1 = var(0) = 1
trigger1 = rootdist x = [-30,30]
trigger1 = rootdist y = [-20,0]
value = 11010
persistent = 0

[state 1003]
type = destroyself
trigger1 = FrontEdgeBodyDist < -70

;-----------------------------------
;kobun launcher light
[statedef 1200]
type    = s
movetype= a
physics = s
power = 100
anim = 1200
ctrl = 0
velset = 0,0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 1003]
type = playsnd
trigger1 = animelem = 6
value = 5,38
volume = 255
volumescale = 255

[State 52, Helper]
type = Helper
trigger1 = animelem = 6
stateno = 8200
pos = 30,-134

[state 1003]
type = playsnd
trigger1 = time = 2
value = 1,9
volume = 255
volumescale = 255
channel = 0

[state 183, 3]
type = helper
trigger1 = animelem = 5
stateno = 12000
id = 12000
name = "kobun"
pos = 66,-97
bindtime = 0
ownpal = 1

[state 1003]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------
;kobun launcher medium
[statedef 1201]
type    = a
movetype= a
physics = n
power = 100
anim = 1200
ctrl = 0
velset = 0,0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 1003]
type = playsnd
trigger1 = animelem = 6
value = 5,38
volume = 255
volumescale = 255

[State 52, Helper]
type = Helper
trigger1 = animelem = 6
stateno = 8200
pos = 30,-134

[state 1003]
type = playsnd
trigger1 = time = 2
value = 1,9
volume = 255
volumescale = 255
channel = 0

[state 183, 3]
type = helper
trigger1 = animelem = 5
stateno = 12000
id = 12001
name = "kobun"
pos = 66,-97
bindtime = 0
ownpal = 1

[state 1003]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------
;kobun launcher hard
[statedef 1202]
type    = a
movetype= a
physics = n
power = 100
anim = 1200
ctrl = 0
velset = 0,0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[state 1003]
type = playsnd
trigger1 = animelem = 6
value = 5,38
volume = 255
volumescale = 255

[state 1003]
type = playsnd
trigger1 = time = 2
value = 1,9
volume = 255
volumescale = 255
channel = 0

[State 52, Helper]
type = Helper
trigger1 = animelem = 6
stateno = 8200
pos = 30,-134

[state 183, 3]
type = helper
trigger1 = animelem = 5
stateno = 12000
id = 12002
name = "kobun"
pos = 66,-97
bindtime = 0
ownpal = 1

[state 1003]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------------
;kobun launcher - Drop kobun
[statedef 12000]
type    = a
movetype= a
physics = n
anim = 12000
velset = 6.5,-5.5
sprpriority = 2

[state 200, 2]
type = hitdef
trigger1 = time = 0
attr = a, sp                    
damage    = 80,3            
animtype = hard             
getpower = 60
givepower = 20,5
guarDFlag = MA                    
hitflag = mafd                   
priority = 7                     
pausetime = 0,4
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,-90
hitsound = s5+parent,var(49),3
guardsound = s6+parent,var(49),0
ground.type = low            
ground.slidetime = 12        
ground.hittime  = 12            
ground.velocity = -7
air.slidetime = 12
air.hittime = 6
yaccel = .9
air.velocity = -11,-8
down.velocity = -2,-3
ID = 1+4
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
guard.velocity = -6.3
airguard.velocity = -10.5,3

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X -32), Floor(P2Dist Y - 100)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 1003]
type = varrandom
trigger1 = 1
v = 2
range = 0,1 

[state 183, 3]
type = velmul
trigger1 = Ishelper(12000)
trigger1 = time >= 5
x = .9
y = .9

[state 183, 3]
type = velmul
trigger1 = Ishelper(12001)
trigger1 = time >= 10
x = .9
y = .9

[state 183, 3]
type = velmul
trigger1 = Ishelper(12002)
trigger1 = time >= 10
x = .9
y = .9

[state 1003]
type = changestate
trigger1 = time = 20
trigger1 = ishelper(12000)
value = 12001

[state 1003]
type = changestate
trigger1 = time = 25
trigger1 = ishelper(12001)
value = 12001

[state 1003]
type = changestate
trigger1 = time = 25
trigger1 = ishelper(12002)
value = 12001

;-----------------------------------
;kobun fall
[statedef 12001]
type    = a
movetype= a
physics = n
anim = 12001
velset = 0,0
sprpriority = 3

[state 440, 2]
type = velset
trigger1 = time > 9
y = 2.5

[state 1003]
type = playsnd
trigger1 = time%20 = 0
trigger1 = time > 19
value = 7,5
volume = 150
volumescale = 150
channel = 5

[state 440, 2]
type = varrandom
trigger1 = 1
v = 0
range = 0,5

[state 440, 2]
type = varrandom
trigger1 = 1
v = 1
range = 14,16

[state 200, 2]
type = hitdef
trigger1 = time = 0
attr = a, sp                    
damage    = 85,3            
animtype = hard             
getpower = 33
givepower = 20,5
guarDFlag = ma                    
hitflag = mafd                   
priority = 7                     
pausetime = 0,4
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,-50
hitsound = s5+parent,var(49),3
guardsound = s6+parent,var(49),0
ground.type = low            
ground.slidetime = 12        
ground.hittime  = 12            
ground.velocity = -7
air.slidetime = 12
air.hittime = 6
yaccel = .9
air.velocity = -11,-4
down.velocity = -2,-3
ID = 1+4
guard.slidetime = 10
guard.hittime = 10
guard.ctrltime = 10
guard.velocity = -4.3
airguard.velocity = -10.5,3

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X -32), Floor(P2Dist Y - 100)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 440, 2]
type = varadd
trigger1 = movecontact
v = 2
value = 1
ignorehitpause = 1

[state 1030, nothitby]
type = nothitby
trigger1 = time >= 0
time = 1
value = sca, na, sa, ha, nt, st, ht
ignorehitpause = 1

[state 1030, enDFromproj]
type = hitby
trigger1 = 1
value = sca, np, sp, hp, ap
ignorehitpause = 1

[state 1030, enDFromproj]
type = hitoverride
trigger1 = 1
slot = 7
time = 1
stateno = 12002
attr = sca, np, sp, hp, ap
ignorehitpause = 1

[state 1003]
type = playerpush
trigger1 = 1
value = 0

[state 1003]
type = changestate
trigger1 = pos y >= -80
value = 12002

;-----------------------------------
;phantoom!
[statedef 12002]
type    = a
movetype= a
physics = n
anim = 12002
velset = 0,1
sprpriority = 3

[state 1003]
type = stopsnd
trigger1 = time = 0
channel = 5

[state 183, 3]
type = veladd
trigger1 = time > 1
y = .5

[state 1003]
type = changestate
trigger1 = pos y >= 0
value = 12003
;-----------------------------------
;phantoom!
[statedef 12003]
type    = a
movetype= a
physics = n
anim = 12003
velset = 0,0
sprpriority = 3

[state 1003]
type = turn
trigger1 = animelem = 7

[state 1003]
type = velset
trigger1 = animelem = 7
x = 6

[state 1003]
type = destroyself
trigger1 = FrontEdgeBodyDist < -70
value = 12005

;-----------------------------------
;phantoom!
[statedef 12004]
type    = a
movetype= i
physics = n
anim = 12005
velset = 0,0
sprpriority = 3

[state 183, 3]
type = explod
trigger1 = time = 0
anim = 12003
id = 12005
name = "ghost"
postype = p2
pos = Floor(enemynear, const(size.mid.pos.x)),-20
bindtime = -1
sprpriority = 3
removetime = -1
ownpal = 1

[state 12001]
type = removeexplod
trigger1 = time = 0
id = 12003

[state 12001]
type = varset
trigger1 = time = 0 
v = 0
value = 0

[state 12001]
type = varadd
trigger1 = time > 200
v = 0
value = 1

[state 12001]
type = modifyexplod
trigger1 = time > 200
id = 12005
scale = (1-var(0)/30.00),1

[state 12001,b]
type = removeexplod
trigger1 = time = 230
trigger2 = enemynear, movetype != H
trigger2 = time = 0
id = 12005

[state 12001,a]
type = changestate
trigger1 = enemynear, movetype != H
trigger1 = time = 0
value = 12006

[state 1003]
type = playerpush
trigger1 = 1
value = 0

[state 12001]
type = removeexplod
trigger1 = time = 0
id = 12003

[state 1003]
type = Destroyself
trigger1 = time = 231

;-----------------------------------
;phantoom!
[statedef 12006]
type    = a
movetype= i
physics = n
anim = 12005
velset = 0,0
sprpriority = 3

[state 183, 3]
type = explod
trigger1 = time = 0
anim = 12006
id = 12006
name = "ouch"
pos = 0,0
bindtime = -1
sprpriority = 3
removetime = -1
ownpal = 1

[state 12001]
type = modifyexplod
trigger1 = time < 20
id = 12006
scale = (1-time/20.00),1

[state 12001]
type = removeexplod
trigger1 = time = 0
id = 12003

[state 12001]
type = removeexplod
trigger1 = time = 20
id = 12006

[state 1003]
type = playerpush
trigger1 = 1
value = 0

[state 1003]
type = Destroyself
trigger1 = time = 21

;-----------------------------------
;phantoom!
[statedef 12005]
type    = a
movetype= i
physics = n
anim = 12004
velset = 0,0
sprpriority = 3

[state 12001]
type = modifyexplod
trigger1 = time < 20
id = 12003
scale = (1-time/20.00),1

[state 12001]
type = removeexplod
trigger1 = time = 20
id = 12003

[state 1003]
type = playerpush
trigger1 = 1
value = 0

[state 1003]
type = Destroyself
trigger1 = time = 21

; ===================== (Hyper states) =======================

;Chuushoku Rush - First hit
[statedef 4000]
type    = S
movetype= a
physics = S
anim = 4000
ctrl = 0
velset = 0,0

[State G-FX, Move Dust]
type = Explod
trigger1 = AnimElem = 4
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 3
var(47) = 1

[State 3000, VarSet]
type = VarSet
triggerall = !movecontact
trigger1 = AnimElem = 8
var(47) = 0

[State 3000, VarSet]
type = VarSet
triggerall = moveguarded
trigger1 = AnimElem = 8
var(47) = 0

[State 3000, VarSet]
type = VarSet
trigger1 = time = 130
var(47) = 0

[State 3000, Helper]
type = Helper
trigger1 = AnimElem = 3
stateno = 8500
supermovetime = 99999999
pos = ceil(25*const(size.xscale)),ceil(-100*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 3
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 3
value = SCA 

[state -2]
type = varadd
trigger1 = time = 0
v = 41
value = -4

[state 1003]
type = removeexplod
trigger1 = time = 0
ID = 10030

[state 820, 1]
type = varset
trigger1 = time = 0
v = 10
value = 0

[state 820, 1]
type = playsnd
trigger1 = animelem = 3
value = 1,1
volume = 255
volumescale = 255
channel = 0

[state 183, 3]
type = explod
trigger1 = animelem = 4
anim = 11001
pos = 58,-95
bindtime = -1
scale = .83,1.07  
sprpriority = 3
removeongethit = 1
removetime = 11

[state 183, 3]
type = explod
trigger1 = animelem = 6
anim = 11002
name = "pow"
pos = 62,-94
scale = .83,1.07  
bindtime = -1
sprpriority = 3

[state 183, 3]
type = playsnd
trigger1 = animelem = 6
value = 7, 8
volume = 200
volumescale = 200

[state 183, 3]
type = playsnd
trigger1 = animelem = 7
value = 1, 2
volume = 255
volumescale = 255
channel = 0

[state 200, 2]
type = hitdef
trigger1 = time = 0
attr = c, na
animtype  = Up
damage    = 65,5
guarDFlag = ma
pausetime = 10,12
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,-90
hitsound   = s5+var(49),2
guardsound = s6+var(49),0
ground.type = low
ground.slidetime = 12        
ground.hittime  = 12  
air.hittime  = 35
yaccel = .7
ground.velocity = -5,-26
guard.velocity = -13
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -18
airguard.velocity = -10.5,3
p2stateno = 4010

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 1000,1b]
type = movehitreset
trigger1 = time = 130

[State 1000,1b]
type = changestate
trigger1 = time = 190
trigger1 = movehit = 0
trigger2 = time = 120
trigger2 = !movecontact
trigger3 = time = 110
trigger3 = moveguarded
value = 4001

;---------------------------------------------------------------------------
;Chuushoku Rush - Ending
[statedef 4001]
type    = S
movetype= I
physics = S
anim = 4001
ctrl = 0
velset = 0,0

[State 1000,1]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Chuushoku Rush - p2stateno phase one
[statedef 4010]
type    = a
movetype= h
physics = n
anim = 5012+(200*var(40))
velset = 0,0

[state 6100, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1,0

[state 6100, 1]
type = changestate
trigger1 = hitshakeover
value = 4011

;---------------------------------------------------------
;Chuushoku Rush - p2stateno phase two
[statedef 4011]
type    = a
movetype= h
physics = n
anim = 5030+(200*var(40))
ctrl = 0

[state 6100, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1,0

[state 6101, 4]
type = changeanim
trigger1 = time = 0
trigger1 = selfanimexist(5035)
trigger1 = anim != [5051,5059] ;not if in hit Up anim
trigger1 = anim != 5090 ;not if hit off ground anim
value = 5035+(200*var(40))

[state 6101, 2]
type = hitvelset
trigger1 = time = 0
x = 1
y = 1

[state 6101, 3]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)


[state 6101, 6]
type = changestate
trigger1 = hitover
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 4012

;Chuushoku Rush - p2stateno phase three
[statedef 4012]
type    = a
movetype= h
physics = n
anim = 5060
ctrl = 0

[state 6100, 1]
type = changeanim
trigger1 = selfanimexist(5061)
value = 5061+(200*var(40))
persustent = 0

[state 6100, 1]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[state 6101, 3]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)+3

[state 6101, 6]
type = changestate
trigger1 = pos Y >= 0
trigger1 = time > 10
value = 4013

;Chuushoku Rush - p2stateno phase four
[statedef 4013]
type    = L
movetype= h
physics = n
anim = 5170
velset = 0,0
ctrl = 0

[state 6101, 6]
type = posset
trigger1 = 1
y = 0

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 0,7

[State 5110, 7]
type = Explod
trigger1 = Time = 0
trigger1 = !SysVar(0)
anim = 8010
scale = 0.81,0.81
ownpal = 1
pos = 0, 0
sprpriority = 5

[state 6101, 6]
type = changeanim
trigger1 = animtime = 0
trigger1 = anim = 5170
value = 5110+(200*var(40))

[state 6101, 6]
type = selfstate
trigger1 = time = 400
value = 5110

;---------------------------------------------------------------------------
;King Kobun
[statedef 4100]
type    = a
movetype= a
physics = n
anim = 4100
sprpriority = 2
ctrl = 0
velset = 0,0

[State G-FX, Move Dust]
type = Explod
trigger1 = AnimElem = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 1
var(47) = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 11
var(47) = 0

[State 3000, Helper]
type = Helper
trigger1 = AnimElem = 1
stateno = 8500
supermovetime = 99999999
pos = ceil(-20*const(size.xscale)),ceil(-110*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 1
value = SCA 

[state -2]
type = varadd
trigger1 = time = 0
v = 41
value = -4

[state 6102, 4]
type = playsnd
trigger1 = AnimElem = 2
value = 1,1
volume = 255
volumescale = 255
channel = 0

[state 6102, 4]
type = playsnd
trigger1 = AnimElem = 5
value = 7,2
volume = 255
volumescale = 255

[state 192, b]
type = varset
trigger1 = time = 0
v = 9
value = 0

[state 183, 3]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; landing anim
[statedef 460]
type    = a
movetype= a
physics = a
ctrl = 1 ;ifelse(var(3)=1,1,0)

[state hee]
type = ctrlset
trigger1 = var(3) = 0
value = 0

[state hee]
type = changeanim
trigger1 = time = 0
value = 460

[state 710,5]
type = screenbound
trigger1 = p2stateno = [715,717]
trigger2 = p2stateno = 328
value = 0
movecamera = 0,0

[state 460, 7]
type = veladd
trigger1 = var(3) = 1
trigger1 = command = "holdback"
trigger1 = vel x > -1.5
x = -.15

[state 460, 8]
type = veladd
trigger1 = var(3) = 1
trigger1 = command = "holdfwd"
trigger1 = vel x < 3
x = .15

[state 460, 9]
type = veladd
trigger1 = var(3) = 1
y = -0.14


[state 460, 1]
type = turn
trigger1 = p2dist x < 0
trigger1 = var(3) = 1

;---------------------------
[statedef 60120]
type    = a
movetype= I
physics = N
ctrl = 0
anim = 9999

[state 250,11]
type = explod
trigger1 = p2stateno = 328
persistent = 0
anim = 8010
scale = 0.81,0.81
pos = 0,-5
postype = p2
sprpriority = 5
velocity = 0, 0
bindtime = 1
ownpal = 1

[state 250,13]
type = envshake
trigger1 = p2stateno = 328
persistent = 0
time = 15
freq = 70
ampl = -4

[state 250,15]
type = playsnd
trigger1 = p2stateno = 328
persistent = 0
value = 0,7

[state 250,15]
type = destroyself
trigger1 = p2stateno != 328

;---------------------------------------------------------------------------
; override common states (use same number to override) :
;---------------------------------------------------------------------------



;---------------------------------------------------------------------------
; run_back land
[statedef 106]
type    = S
physics = S
anim = 106
sprpriority = 1

[state 106,1]
type = posset
trigger1 = time = 0
y = 0

[state 106,2]
type = velset
trigger1 = time >= 0
x = -6
y = 0

[state 106, sfx]
type = playsnd
trigger1 = time = 0
value = s0,27

[state 106,4] 
type = assertspecial
trigger1 = 1
flag = nowalk

[state 106,3]
type = changestate
trigger1 = time = 30
value = 0
ctrl = 1


;--------------------------
; Kobun standing
[statedef 3000]
type = s
ctrl = 0
velset = 0,0
physics = n
sprpriority = -1

[state 3000,2]
type = varset
trigger1 = time = 0
trigger1 = parent, movetype != H
v = 1
value = 0

[state 3000,2]
type = changestate
trigger1 = parent, stateno = 190
value = 3190

[state 3000,2]
type = varrandom
trigger1 = 1
v = 0
range = 0,2

[state 3000,2]
type = changeanim
trigger1 = time = 0
value = 3000+var(0)

[state 3000,2]
type = turn
trigger1 = Facing != parent, Facing

[state 3000,3]
type = velset
trigger1 = 1
x = 0

[state 3000,1]
type = posset
trigger1 = 1
y = -4

[state 3000,5]; forward
type = changestate
trigger1 = parentdist x > 60
value = 3001

[state 3000,5]; backward
type = changestate
trigger1 = parentdist x < 0
value = 3002

[state 3000,5]; backward
type = changestate
trigger1 = parentdist x < 0
value = 3002

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 40
trigger1 = parent, var(3) = 1
value = 3040

[state 3000,5]; taunt
type = changestate
trigger1 = parent, stateno = 195
value = 3050

[state 3000,5]
type = changestate
trigger1 = parent, stateno = 181
value = 3180

[state 3000,5]
type = changestate
trigger1 = parent, stateno = 182
value = 3181

[state 3000,5]; backward
type = changestate
trigger1 = parent, numhelper(11000)
value = 3100

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4000
value = 34000

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 170
value = 3170

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4100
trigger2 = parent, stateno = 4600
trigger3 = parent, stateno = 4700
value = 34100

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4200
value = 34200

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno != [120,159]
trigger1 = parent, movetype = H
value = 35000

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4500
value = 34500

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4510
value = 34510

[state 1060, 8]
type = changestate
trigger1 = parent,stateno = 4512
trigger1 = FrontEdgeBodyDist < -70
value = 34512

;--------------------------
; kobun forward
[statedef 3001]
type = s
ctrl = 0
physics = n
sprpriority = -1

[state 3000,5]; forward
type = changeanim
trigger1 = vel x = 4
trigger1 = anim != 11010
value = 11010

[state 3000,5]; forward
type = changeanim
trigger1 = vel x = 5
trigger1 = anim != 3004
value = 3004

[state 3000,5]; forward
type = velset
trigger1 = parentdist x > 120
x = 5

[state 3000,5]; forward
type = velset
trigger1 = parentdist x < 121
x = 4

[state 3000,5]; forward
type = changestate
trigger1 = parentdist x < 50
value = 3000

[state 3000,5]; forward
type = changestate
trigger1 = parentdist x < 0
value = 3002

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 40
trigger1 = parent, var(3) = 1
value = 3040

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4000
value = 34000

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4100
trigger2 = parent, stateno = 4600
trigger3 = parent, stateno = 4700
value = 34100

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4200
value = 34200

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno != [120,159]
trigger1 = parent, movetype = H
value = 35000

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4510
value = 34510

[state 1060, 8]
type = changestate
trigger1 = parent,stateno = 4512
trigger1 = FrontEdgeDist < -30
value = 34512

;--------------------------
;kobun backward
[statedef 3002]
type = s
ctrl = 0
velset = -4.4,0
physics = n
sprpriority = -1

[state 3000,5]; forward
type = changeanim
trigger1 = vel x = -4.4
trigger1 = anim != 3003
value = 3003

[state 3000,5]; forward
type = changeanim
trigger1 = vel x = -6
trigger1 = anim != 3005
value = 3005

[state 3000,5]; forward
type = velset
trigger1 = parentdist x < -50
x = -6

[state 3000,5]; forward
type = velset
trigger1 = parentdist x = [50,0]
x = -4.4

[state 3000,5]; forward
type = changestate
trigger1 = parentdist x > 37
value = 3000

[state 3000,5]; forward
type = changestate
trigger1 = parentdist x > 50
value = 3001

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 40
trigger1 = parent, var(3) = 1
value = 3040

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4000
value = 34000

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4100
trigger2 = parent, stateno = 4600
trigger3 = parent, stateno = 4700
value = 34100

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4200
value = 34200

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno != [120,159]
trigger1 = parent, movetype = H
value = 35000

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4510
value = 34510

[state 1060, 8]
type = changestate
trigger1 = parent,stateno = 4512
trigger1 = BackEdgeDist < -30
value = 34512

;--------------------------
;kobun jump
[statedef 3040]
type = a
ctrl = 0
physics = n
sprpriority = -1

[state 3000,5]; forward
type = changeanim
trigger1 = time = 4
value = 3040

[state 50, 7]
type = veladd
trigger1 = time > 4
trigger1 = parentdist x < 0
x = -.25

[state 50, 8]
type = veladd
trigger1 = time > 4
trigger1 = parentdist x > 70
x = .25

[state 3000,5]; forward
type = veladd
trigger1 = time = 4
y = -13

[state 3000,5]; forward
type = veladd
trigger1 = time > 10
y = .4

[state 3000,5]; forward
type = changestate
trigger1 = time > 15
trigger1 = pos y >= -4
value = 3000

;--------------------------
;kobun taunt
[statedef 3050]
type = s
ctrl = 0
physics = n
sprpriority = -1

[state 3000,5]
type = changeanim
trigger1 = time = 1
value = 3101

[state 191, 2] 
type = playsnd
trigger1 = time = 1
value = 3,3
volume = 255
volumescale = 255

[state 3000,5]; forward
type = changestate
trigger1 = animtime = 0
value = 3000

;--------------------------
;kobun lose by time over
[statedef 3170]
type = s
ctrl = 0
physics = n
sprpriority = -1

[state 3000,5]
type = changeanim
trigger1 = time = 1
value = 35001

;--------------------------
;kobun win 1
[statedef 3180]
type = s
ctrl = 0
physics = n
sprpriority = -1

[state 3000,5]
type = changeanim
trigger1 = time = 1
value = 3180

;--------------------------
;kobun win 2
[statedef 3181]
type = S
movetype = I
physics = N
anim = 3181
ctrl = 0
sprpriority = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = Time = 50
value = 20188
ctrl = 0
persistent = 0

;Chef Cart
[Statedef 20186]
type = S
movetype = I
physics = N
anim = 3182
ctrl = 0
velset = 2.5,0
sprpriority = 1

[State 0, VelSet]
type = VelSet
trigger1 = backedgedist > 40
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = numhelper(20188)
value = 3,3
volume = 255
volumescale = 255
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = backedgedist > 9
helpertype = normal ;player
name = "Spoonbot 1"
ID = 20187
stateno = 20187
pos = -10,3-(random%3)
postype = front    ;p2,front,back,left,right
facing = -1
ownpal = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = backedgedist > 20
helpertype = normal ;player
name = "Spoonbot 2"
ID = 20188
stateno = 20187
pos = -10,3-(random%3)
postype = front    ;p2,front,back,left,right
facing = -1
ownpal = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = backedgedist > 26
helpertype = normal ;player
name = "Spoonbot 3"
ID = 20189
stateno = 20187
pos = -10,3-(random%3)
postype = front    ;p2,front,back,left,right
facing = -1
ownpal = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = backedgedist > 31
helpertype = normal ;player
name = "Spoonbot 4"
ID = 20190
stateno = 20187
pos = -10,3-(random%3)
postype = front    ;p2,front,back,left,right
facing = -1
ownpal = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = backedgedist > 39
helpertype = normal ;player
name = "Spoonbot 5"
ID = 20191
stateno = 20187
pos = -10,3-(random%3)
postype = front    ;p2,front,back,left,right
facing = -1
ownpal = 1
persistent = 0

;Spoonbots
[Statedef 20187]
type = S
movetype = I
physics = N
anim = 20187
ctrl = 0
velset = 4,0
sprpriority = 4

[State 1030, VarAdd]
type = VarSet
trigger1 = var(3) > 0 ;&& (var(3) = 1)
v = 3
value = 0

[state 1030, 4]
type = VarSet
trigger1 = ishelper(20189)
trigger1 = (rootdist x = [-20,20]) && (var(3) != 1)
var(3) = 1
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(20187)
trigger1 = parentdist x <= -15
value = 20188
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(20188)
trigger1 = parentdist x <= -3
value = 20188
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(20189)
trigger1 = parentdist x <= 5
value = 20188
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(20190)
trigger1 = parentdist x <= 15
value = 20188
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(20191)
trigger1 = parentdist x <= 25
value = 20188
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 20188
x = 0

[State 0, Turn]
type = Turn
trigger1 = ishelper(20187) || ishelper(20188)
trigger1 = anim = 20188
persistent = 0

;Spoonbots
[Statedef 20188]
type = S
movetype = I
physics = N
anim = 20187
ctrl = 0
velset = -4,0
sprpriority = 4

[State 1030, VarAdd]
type = VarSet
trigger1 = var(3) > 0 ;&& (var(3) = 1)
v = 3
value = 0

[state 1030, 4]
type = VarSet
trigger1 = ishelper(20189)
trigger1 = (rootdist x = [-20,20]) && (var(3) != 1)
var(3) = 1
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3182
trigger1 = parentdist x <= -15
value = 20188
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 20188
x = 0

[State 0, Turn]
type = Turn
trigger1 = time = 1


;----------------------------------------------------------------------
[Statedef 20195]
type = A
movetype = I
physics = N
anim = 20195
ctrl = 0
sprpriority = -2

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Pos Y = %f, var(14) = %d"
params = pos y, var(14)
ignorehitpause = 1

[State 0]
Type = AppendToClipboard
Trigger1 = 1
Text = "\nRootdist X = %f, Rootdist Y = %f, Tron Alive? = %d"
Params = Rootdist X,Rootdist Y, (root, alive)
ignorehitpause = 1

[State 195, Snd 1]
type = PlaySnd
trigger1 = parent, stateno = 195 || parent, stateno = 181
trigger1 = parent, AnimElem = 1
value = 0,31
volume = -150
loop = 0
persistent = 0

[State 0, Turn]
type = Turn
trigger1 = !Time
trigger1 = parent, stateno = 185

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger2 = pos y >= 0
v = 14
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = anim = 20195
trigger1 = pos y < 0
v = 14
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 20195
trigger1 = AnimElem = 3
trigger1 = !var(14)
y = -3

[State 0, VelSet]
type = Gravity
trigger1 = Anim = 20195
trigger1 = animelem = 3, > 1 && animelem = 4, < 0

[State 0, VelSet]
type = ChangeAnim
trigger1 = anim = 20195 && animelem = 3, > 1 && animelem = 4, < 0
trigger1 = vel y > 0
trigger1 = !var(14)
value = 20195
elem = 4

[State 0, VelSet]
type = VelSet
trigger1 = anim = 20195
trigger1 = animelem = 4
y = 0

[State 0, VelSet]
type = PosSet
trigger1 = anim = 20195
trigger1 = animelem = 4
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = root, stateno != 195 && root, stateno != 181 && root, stateno != 185
trigger1 = !var(14)
value = 20000
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = root, stateno = 3000
trigger1 = !var(14)
value = 23000
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = root, stateno = 3100
trigger1 = !var(14)
value = 23150
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = root, stateno = 3300
trigger1 = !var(14)
value = 23300
persistent = 0

;--------------------------
;kobun beacon bomb
[statedef 3100]
type = s
ctrl = 0
physics = n
anim = 3100
sprpriority = -1

[state 3000,5]; forward
type = veladd
trigger1 = time = 9
y = -4

[state 3000,5]; forward
type = veladd
trigger1 = time > 9
y = .6

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 40
trigger1 = parent, var(3) = 1
value = 3040

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4000
value = 34000

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4100
trigger2 = parent, stateno = 4600
trigger3 = parent, stateno = 4700
value = 34100

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4200
value = 34200

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno != [120,159]
trigger1 = parent, movetype = H
value = 35000

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4500
value = 34500

[state 3000,5]; backward
type = changestate
trigger1 = parent, stateno = 4510
value = 34510

[state 1060, 8]
type = changestate
trigger1 = parent,stateno = 4512
trigger1 = FrontEdgeBodyDist < -70
value = 34512

[state 3000,5]; forward
type = changestate
trigger1 = time > 9
trigger1 = pos y >= -4
value = 3000

;--------------------------
;kobun Intro state
[statedef 3190]
type = s
ctrl = 0
velset = 0,0
anim = 3040
physics = n
sprpriority = 4

[state 3000,5]; forward
type = assertspecial
trigger1 = 1
flag = invisible

[state 3000,5]; forward
type = posset
trigger1 = time = 185
x = parent, pos x

[state 3000,5]; forward
type = posadd
trigger1 = time = 185
x = 25
y = -30

[state 3000,5]; forward
type = changestate
trigger1 = time = 188
value = 3191

;--------------------------
;kobun Intro state two
[statedef 3191]
type = a
physics = n
ctrl = 0
velset = 0,0
anim = 3191
sprpriority = 4

[state 3000,5]; forward
type = playsnd
trigger1 = time = 0
value = 6,6

[state 3000,5]; forward
type = veladd
trigger1 = time = 0
x = -2
y = -6

[state 3000,5]; forward
type = veladd
trigger1 = 1
y = .3

[state 3000,5]; forward
type = changestate
trigger1 = pos y >= -4
value = 3000

;--------------------------
;Kobun state - Chuushoku Rush hyper
[statedef 34000]
type = s
ctrl = 0
velset = 0,0
physics = n
anim = 3004
sprpriority = -1

[state 3000,5]; forward
type = turn
trigger1 = pos x < 0
trigger1 = facing = -1

[state 3000,5]; forward
type = turn
trigger1 = pos x > 0
trigger1 = facing = 1

[state 3000,5]; forward
type = posset
trigger1 = time = 0
y = -4

[state 3000,5]; forward
type = velset
trigger1 = time = 0
x = 7

[state 3000,5]; forward
type = changestate
trigger1 = pos x = [-10,10]
value = 34001

;--------------------------
;Kobun state - Chuushoku Rush hyper - chef anim
[statedef 34001]
type = s
ctrl = 0
velset = 0,0
physics = n
anim = 34000
sprpriority = -1

[state 3000,5]; forward
type = changestate
trigger1 = parent, stateno = 4000 && parent, movehit
value = 34002

[state 3000,5]; forward
type = changestate
trigger1 = time = 150
value = 3000

;--------------------------
;Kobun state - Chuushoku Rush hyper - hungry helper
[statedef 34002]
type = s
ctrl = 0
velset = 0,0
physics = n
anim = 34001
sprpriority = -1

[state 3000,2]
type = turn
trigger1 = Facing != parent, Facing

[state 870, push block]
type = varset
trigger1 = time = 0
v = 0
value = 0

[state 870, push block]
type = helper
trigger1 = time%2 = 0
trigger1 = time > 35
id = 40000+var(0)
name = "Hungry"
pos = -400,4
postype = p1
stateno = 40000
helpertype = normal
size.shadowoffset = -4
ownpal = 1

[state 870, push block]
type = varadd
trigger1 = time%2 = 0
trigger1 = time > 35
v = 0
value = 1

[state 3000,5]; forward
type = changestate
trigger1 = time >= 115
value = 34003

;--------------------------
;Kobun state - Chuushoku Rush hyper - pass anim
[statedef 34003]
type = s
movetype = I
physics = n
velset = 0,0
anim = 34002
sprpriority = -1

[state 3000,5]; forward
type = changeanim
trigger1 = time = 60
value = 34003

[state 3000,5]; forward
type = changestate
trigger1 = animtime = 0
trigger1 = anim = 34003
value = 3000

;--------------------------
;Kobun state - Chuushoku Rush hyper - projectile
[statedef 40000]
type = s
movetype = a
velset = 8,0
physics = n
anim = 9999
sprpriority = 3

[state 3000,5]; forward
type = posset
trigger1 = time = 0
trigger1 = facing = 1
x = -170
y = 0

[state 3000,5]; forward
type = posset
trigger1 = time = 0
trigger1 = facing = -1
x = 170
y = 0

[state 3000,5]; forward
type = varrandom
trigger1 = time = 0
v = 0
range = 0,7

[state 3000,5]; forward
type = varrandom
trigger1 = 1
v = 1
range = 1,2

[state 1060, 8]
type = changeanim
trigger1 = time = 0
trigger1 = Ishelper(40030) = 0
value = 40000+(10*var(0))

[state 1060, 8]
type = changeanim
trigger1 = time = 0
trigger1 = Ishelper(40030)
value = 40080

[state 210,3]
type = projectile
trigger1 = parentdist x <= 0
trigger1 = Ishelper(40030) = 0
offset = 0,0
projremove = 0
projid = 40001
projanim = 40000+(10*var(0))+var(1)
projhitanim = -1
projsprpriority = 3
velocity = 8,0
projscale = .83,1.07  
projheightbound = -480, 0
projedgebound = 20
projscreenbound = 20
projstagebound = 20
attr = s, hp
animtype  = hard
damage    = 5
givepower = 20
guarDFlag = M
hitflag = MFD
pausetime = 0,0
sparkno = s8002
guard.sparkno = s8050
sparkxy = 30,-15
hitsound = -1
guardsound = -1
ground.type = low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = 1
down.velocity = 1,0
yaccel = .6
air.hittime = 30
ID = 1
fall.recover = 0

[state 210,3]
type = projectile
trigger1 = parentdist x <= 0
trigger1 = Ishelper(40030)
offset = 0, 0
projid = 40001
projanim = 40081
projremove = 0
projsprpriority = 3
velocity = 8,0
projscale = .83,1.07  
projheightbound = -480, 0
projedgebound = 20
projscreenbound = 20
projstagebound = 20
attr = s, hp
animtype  = hard
givepower = 20
damage    = 8
guarDFlag = M
hitflag = MFD
pausetime = 0,0
sparkno = s8002
guard.sparkno = s8050
sparkxy = 30,-15
hitsound = -1
guardsound = -1
ground.type = low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = 1
down.velocity = 1,0
yaccel = .6
air.hittime = 30
ID = 1
fall.recover = 0

[state 230, 2]
type = hitdef
trigger1 = time = 0
attr = s, na
animtype  = hard
givepower = 20
damage    = 8
guarDFlag = MA
hitflag = MAFD
pausetime = 0,0
sparkno = s8002
guard.sparkno = s8050
sparkxy = 0,-15
hitsound = -1
guardsound = -1
ground.type = low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = 1
down.velocity = 1,0
yaccel = .6
air.hittime = 30
ID = 1
fall.recover = 0

[state 820, 1]
type = playsnd
trigger1 = movehit
value = 5+var(49),3
channel = 4
volume = 235
volumescale = 235
ignorehitpause = 1

[state 820, 1]
type = playsnd
trigger1 = moveguarded
value = 6+var(49),0
channel = 4
volume = 235
volumescale = 235
ignorehitpause = 1

[state 820, 1]
type = movehitreset
trigger1 = 1
ignorehitpause = 1

[state 1003]
type = changeanim
trigger1 = parentdist x <= 0
trigger1 = Ishelper(40030) = 0
value = 40000+(10*var(0))+var(1)

[state 1003]
type = playsnd
trigger1 = random < 300
trigger1 = anim = 40001 || anim = 40012 || anim = 40061 || anim = 40062
value = 3, 3
volume = 155
volumescale = 155
channel = 5

[state 1003]
type = playsnd
trigger1 = random < 300
trigger1 = anim = 40011
value = 3, 3
volume = 155
volumescale = 155
channel = 6

[state 1003]
type = playsnd
trigger1 = random < 300
trigger1 = anim = 40051
value = 3, 3
volume = 155
volumescale = 155
channel = 6

[state 1003]
type = playsnd
trigger1 = random < 300
trigger1 = anim = 40002 || anim = 40042 || anim = 40052 || anim = 40071
value = 3, 3
volume = 155
volumescale = 155
channel = 1

[state 1003]
type = playsnd
trigger1 = random < 300
trigger1 = anim = 40021 || anim = 40032
value = 3, 3
volume = 155
volumescale = 155
channel = 2

[state 1003]
type = playsnd
trigger1 = random < 300
trigger1 = anim = 40022 || anim = 40031 || anim = 40041
value = 3, 3
volume = 195
volumescale = 195
channel = 3

[state 1003]
type = destroyself
trigger1 = parentdist x <= 0

;--------------------------
;Kobun state - King Kobun hyper
[statedef 34100]
type = s
ctrl = 0
velset = 0,0
physics = n
anim = 3004
sprpriority = -1

[state 3000,5]; forward
type = posset
trigger1 = time = 0
y = -4

[state 3000,5]; forward
type = velset
trigger1 = time = 0
x = 3

[state 3000,5]; forward
type = velset
trigger1 = parentdist x <= -60
trigger1 = facing = parent, facing
x = 0

[state 3000,5]; forward
type = velset
trigger1 = parentdist x <= 70
trigger1 = facing != parent, facing
x = 0

[state 3000,5]; forward
type = turn
trigger1 = vel x = 0
trigger1 = facing != parent, facing

[state 3000,5]; forward
type = changeanim
trigger1 = vel x = 0
value = 41001

[state 3000,5]; forward
type = changestate
trigger1 = time = 50
trigger2 = parent, ID < partner, ID 
trigger2 = vel x = 0
trigger2 = parent,stateno = 4701
value = 34101

;--------------------------
;Kobun state - King Kobun hyper - phase one
[statedef 34101]
type = s
movetype = A
ctrl = 0
physics = n
anim = 41000
sprpriority = -1

[state 3000,5]; forward
type = varset
trigger1 = time != 0
trigger1 = enemynear, numhelper(9002)
v = 1
value = 39
persistent = 0

[state 3000,5]; forward
type = varset
trigger1 = time = 0
v = 2
value = 0

[state 3000,5]; forward
type = varadd
trigger1 = var(1) > 0
v = 1
value = -1

[state 3000,5]; forward
type = varadd
trigger1 = var(1) <= 0
v = 2
value = 1

[state 3000,5]; forward
type = playsnd
trigger1 = time = 0
value = 6, 2
volume = 255
volumescale = 255

[state 3000,5]; forward
type = playsnd
trigger1 = time = 0
value = 7, 3
volume = 255
volumescale = 255
freqmul = .8


[state 12001]
type = varset
trigger1 = !Time
fvar(13) = 1
persistent = 0

[State 0, VarSet]
type = VarSet
trigger1 = !Time
trigger2 = Anim = 41000
trigger2 = AnimElem = 14, > 1
trigger2 = AnimElem = 19, < 0
trigger2 = !movecontact
v = 16
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = Anim = 41000
trigger1 = animelem = 14, > 1
trigger1 = animelem = 31, < 0
trigger1 = movecontact = 1
v = 16
value = 1

[State 0, VelSet]
type = VelSet
triggerall = !movecontact
trigger1 = anim = 41000
trigger1 = AnimElem = 12
trigger1 = animelem = 31, < 0
x = 3
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = movecontact = 1
trigger1 = Anim = 41000
trigger1 = AnimElem = 31, < 0
x = -.2
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 41000
trigger1 = AnimElem = 31, > 1
trigger2 = p2dist x < 5
x = 0
ignorehitpause = 1

[state 3000,5]; forward
type = nothitby
trigger1 = var(2) < 40
value = sca

[state 12001]
type = varset
trigger1 = time = 0 
v = 0
value = 0

[state 12001]
type = varadd
triggerall = var(1) <= 0
trigger1 = var(2) > 9
trigger1 = var(2) < 31
v = 0
value = 1

[state 12001]
type = playsnd
trigger1 = animelem = 14
trigger2 = animelem = 22
trigger3 = animelem = 30
value = 7,6
volume = 255
volumescale = 255
channel = 3

[State 411, 11]
type = VarAdd
trigger1 = Anim = 41000
trigger1 = AnimElemTime(4) >= 0
trigger1 = AnimElemTime(10) <= 0
trigger1 = fvar(13) < 1.8
fvar(13) = .0325
ignorehitpause = 1

[state 12001]
type = varset
trigger1 = AnimElemTime(10) > 0
trigger1 = AnimElemTime(31) < 0
fvar(13) = 1.8
ignorehitpause = 1

[State 0, ModifyExplod]
type = AngleDraw
trigger1 = Anim = 41000
trigger1 = AnimElemTime(4) >= 0
scale = fVar(13),fVar(13)
ignorehitpause = 1

[state 3001, attackmulset]
type = attackmulset
trigger1 = 1
value = parent, Fvar(0)
ignorehitpause = 1

[State 1024, 1]
type = Hitdef
trigger1 = time < 20
trigger1 = time%6 = 0
trigger1 = movecontact = 0
attr = S, HA
hitflag = MAFD
animtype = Diagup
air.animtype = Diagup
damage    = 20, 3
pausetime = 3,10
guard.pausetime = 5,10
guardflag = MA
numhits = 1
getpower = 0
hitsound = s5+(parent,var(49)),2
guardsound = s6+(parent,var(49)),0
sparkno = s9999
guard.sparkno = s8050
sparkxy = 5,-35
ground.type = High
ground.hittime  = 10
ground.velocity = -1.5,-16
air.velocity = -1.5,-16
airguard.velocity = -10.5,3
guard.velocity = -6
down.velocity = -6,-7
yaccel = 1.1
air.hittime = 5
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
guard.velocity = -11
guard.hittime = 15
id = 2+4
guard.slidetime = 15
persistent = 0

[State 1024, 1]
type = Hitdef
triggerall = var(1) <= 0
trigger1 = time%4 = 0
trigger1 = time > 20
attr = S, HA
hitflag = MAFD
animtype = Hard
air.animtype = Hard
damage    = 30, 5
pausetime = 1,12
priority  = 4, Hit
guardflag = MA
hitsound = -1
sparkno = s9999
guard.sparkno = s8050
getpower = 0
sparkxy = -10,-90
guardsound = -1
ground.type = High
ground.hittime  = 14
ground.slidetime = 15
ground.velocity = 3,0
air.hittime = 5
airguard.velocity = -10.5,3
down.velocity = -6,-7
air.type = Low
yaccel = .8
fall.xvelocity = 0
fall.yvelocity = -1
guard.velocity = 0
air.fall = 1
fall.recover = 0
air.velocity = 1, -1
id = 2+4
ground.cornerpush.veloff = -1.25
persistent = 8

[State 1024, 1]
type = Hitdef
triggerall = var(1) <= 0
trigger1 = time%4 = 0
trigger1 = time > 20
attr = S, HA
hitflag = MAFD
animtype = Hard
air.animtype = Hard
damage    = 30, 5
pausetime = 1,12
priority  = 4, Hit
guardflag = MA
getpower = 0
hitsound = -1
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,-40
guardsound = -1
ground.type = High
ground.hittime  = 14
ground.slidetime = 15
ground.velocity = 3,0
airguard.velocity = -10.5,3
air.hittime = 5
down.velocity = -6,-7
air.type = Low
air.velocity = 1, -1
yaccel = .8
id = 2+4
fall.xvelocity = 0
guard.velocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = -1.25
persistent = 8

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1

[state 3001, parentvaradd]
type = parentvaradd
trigger1 = movehit
trigger1 = time > 20
v = 18
value = 1

[state 12001]
type = playsnd
trigger1 = time > 20
trigger1 = movehit
value = 5+(parent,var(49)),2
ignorehitpause = 1
channel = 4

[state 12001]
type = playsnd
trigger1 = time > 20
trigger1 = moveguarded
value = 6+(parent,var(49)),0
ignorehitpause = 1
channel = 4

[state 12001]
type = movehitreset
trigger1 = 1
ignorehitpause = 1

[state 12001]
type = playerpush
trigger1 = 1
value = 1

[state 1030, nothitby]
type = nothitby
trigger1 = time >= 0
time = 1
value = sca, na, sa, nt, st, ht, np
ignorehitpause = 1

[state 1030, enDFromproj]
type = hitby
trigger1 = 1
value = sca, sp, hp, ha
ignorehitpause = 1

[state 1030, enDFromproj]
type = hitoverride
trigger1 = 1
slot = 7
time = 1
stateno = 34101
attr = sca, sp, hp, ha
ignorehitpause = 1

[state 12001]
type = width
trigger1 = 1
player = 70,70

[state 12001]
type = changestate
trigger1 = animelem = 31
value = 34103

;Damage dampener

[State 0, Hit counter]
type = varset
trigger1 = numenemy
fvar(21) = enemynear,gethitvar(hitcount)
ignorehitpause = 1

[State 0, Reset var - opponent recovers]
type = varset
trigger1 = numenemy
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
fvar(21)=1

[State 0]
type = varset
trigger1 = 1
fvar(22) = ifelse(fvar(21)=0, 1, .9**fvar(21))
ignorehitpause=1

[State 0]
type = attackmulset
trigger1 = 1
value = fvar(22)
ignorehitpause = 1


;--------------------------
;Kobun state - King Kobun hyper - phase three
[statedef 34103]
type = s
ctrl = 0
velset = 0,0
physics = n
anim = 9999
sprpriority = -3

[state 3000,5]; forward
type = playsnd
trigger1 = time = 20
value = 7, 3
volume = 255
volumescale = 255
freqmul = .9

[state 50,5]
type = explod
trigger1 = time = 0
anim = 41002
id = 41005
postype = p1
pos = 0,0
ownpal = 1
bindtime = -1
removetime = -1
sprpriority = 5
scale = .83,1.07  
persistent = 0
pausemovetime = 99999
removeongethit = 0
ignorehitpause = 0

[state 12001]
type = varadd
trigger1 = time > 6
trigger1 = time < 28
v = 0
value = -1

[state 12001]
type = modifyexplod
trigger1 = time > 0
id = 41005
scale = (1+var(0)/37.76),(1+var(0)/20.00)

[state 12001]
type = removeexplod
trigger1 = time = 48
id = 41005

[state 12001]
type = changestate
trigger1 = time = 48
value = 3000

[statedef 34200]
type = s
ctrl = 0
velset = 0,0
physics = n
anim = 3004
sprpriority = -3

[state 3000,5]; forward
type = posset
trigger1 = time = 0
y = -4

[state 3000,5]; forward
type = velset
trigger1 = time = 0
x = 7

[state 3000,5]; forward
type = velset
trigger1 = parentdist x <= -60
trigger1 = facing = parent, facing
x = 0

[state 3000,5]; forward
type = velset
trigger1 = parentdist x <= 70
trigger1 = facing != parent, facing
x = 0

[state 3000,5]; forward
type = turn
trigger1 = vel x = 0
trigger1 = facing != parent, facing

[state 3000,5]; forward
type = changestate
trigger1 = vel x = 0
value = 34201

[statedef 34201]
type = s
ctrl = 0
velset = 0,0
physics = n
anim = 34200
sprpriority = -3

[state 3000,5]; forward
type = playsnd
trigger1 = time = 0
value = 6, 5

[state 3000,5]; forward
type = changeanim
trigger1 = time = 80
value = 34201

[state 3000,5]; forward
type = changestate
trigger1 = parent,stateno != 4200
value = 3000

;--------------------------
; Kobun standing
[statedef 35000]
type = s
ctrl = 0
velset = 0,0
physics = n
sprpriority = -4

[state 3000,3]
type = varadd
trigger1 = 1
v = 1
value = 1

[state 3000,2]
type = changeanim
trigger1 = var(1) < 30
value = 35000
persistent = 0

[state 3000,2]
type = changeanim
trigger1 = var(1) > 30
value = 35001
persistent = 0

[state 3000,2]
type = turn
trigger1 = parentdist x < 0

[state 3000,3]
type = velset
trigger1 = 1
x = 0

[state 3000,1]
type = posset
trigger1 = 1
y = -4

[state 3000,5]; forward
type = changestate
trigger1 = parentdist x > 110
value = 35001

[state 3000,5]; backward
type = changestate
trigger1 = parentdist x < -80
value = 35002

[state 3000,5]; forward
type = changestate
trigger1 = parent, movetype != H
trigger1 = parent, stateno != [5000,5999]
value = 3000

[state 3000,5]; forward
type = changestate
trigger1 = parent, stateno = [5150,5151]
value = 35150

;kobun forward-------------------------------
[statedef 35001]
type = s
ctrl = 0
physics = n
velset = 0,0
anim = 35002
sprpriority = -4

[state 3000,3]
type = varadd
trigger1 = 1
v = 1
value = 1

[state 3000,5]; forward
type = velset
trigger1 = time = 0
x = 3

[state 3000,5]; forward
type = changestate
trigger1 = parentdist x < 70
value = 35000

[state 3000,5]; forward
type = changestate
trigger1 = parent, movetype != H
trigger1 = parent, stateno != [5000,5999]
value = 3000

[state 1060, 8]
type = changestate
trigger1 = parent,stateno = 5150
value = 35150

;kobun backward----------------------------
[statedef 35002]
type = s
ctrl = 0
velset = 0,0
anim = 35003
physics = n
sprpriority = -4

[state 3000,3]
type = varadd
trigger1 = 1
v = 1
value = 1

[state 3000,5]; forward
type = velset
trigger1 = time = 0
x = -3

[state 3000,5]; forward
type = changestate
trigger1 = parentdist x > 20
value = 35000

[state 3000,5]; forward
type = changestate
trigger1 = parent, movetype != H
trigger1 = parent, stateno != [5000,5999]
value = 3000

;kobun backward----------------------------
[statedef 35150]
type = s
ctrl = 0
velset = 0,0
physics = n
sprpriority = -4

[state 3000,3]
type = varadd
trigger1 = 1
v = 1
value = 1

[state 3000,2]
type = changeanim
trigger1 = var(1) < 30
value = 35000
persistent = 0

[state 3000,2]
type = changeanim
trigger1 = var(1) > 30
value = 35001
persistent = 0

[state 3000,2]
type = turn
trigger1 = parentdist x < 0

[state 3000,2]
type = changeanim
trigger1 = time = 120
value = 35150
persistent = 0

[state 3000,5]; forward
type = velset
trigger1 = time = 120
x = 6

[state 1060, 8]
type = changestate
trigger1 = FrontEdgeBodyDist < -70
value = 34512

;--------------------

[Statedef 34500]
type = A
movetype = I
physics = N
anim = 34500	
sprpriority = 3
ctrl = 0

[State 4500, position]
type = PosSet
trigger1 = time = 0
x = -243*facing
y = -90

[State 4500, velocity]
type = VelSet
trigger1 = Anim != 45000
x = 18
y = 4

[State 4500, invincibility] ; the character cannot be hit until he has fully entered on the stage
type = NotHitBy
trigger1 = BackEdgeBodyDist <= 0
value = SCA
time = 2

[State 4500, invincibility] ; if partner was KOed, appear being invincible
type = NotHitBy
trigger1 = Partner, Life <= 0
value = SCA
time = 6

[State 4500, screen bound] ; Prevents the camera from following the char
type = ScreenBound
trigger1 = 1
value = 0

[State 4500, changestate] ; the character attacks his opponent when :
type = ChangeState
triggerall = BackEdgeBodyDist >= 0	; he is on the stage
trigger1 = partner, life > 0		; and his partner is alive
trigger1 = !Win && !Lose
value = 34501

[Statedef 34501]
type = A
movetype = A
physics = N
sprpriority = 3
ctrl = 0

[State 4500, velocity]
type = playsnd
trigger1 = time = 0
value = 6, 6

; Tag attack LV3
;[State 4502, LV3]
;type = changestate
;triggerall = selfanimexist (4100)	; <--- change this...
;trigger1 = power >= 2000
;value = 4100				; <--- and this for the super move!

; Tag attack LV2
;[State 4501, LV2]
;type = changestate
;triggerall = selfanimexist (4100)	; <--- change this...
;trigger1 = power >= 1000
;value = 4100				; <--- and this for the lv.2 move!

; Tag attack LV1
[State 4501, LV1]
type = ChangeState
trigger1 = pos y >= 0	; <--- change this...
value = 34502				; <--- and this for the lv.1 move!

;[State 4501, end state] ; cancel if:
;type = ChangeState
;trigger1 = Time = [0,1]
;value = 0
;ctrl = 1

[Statedef 34502]
type = S
movetype = I
physics = N
anim = 3194
sprpriority = 3
ctrl = 0
velset = 0,0

[State 4520, 0]
type = PosSet
trigger1 = 1
y = 0

[State 4520, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 3000

[Statedef 34510] ; Define your own taunt here
type = S
movetype = I
physics = S
anim = 34510
sprpriority = -2
velset = 0,0
ctrl = 0

[State 4510, invincibility] ; the character cannot be hit since he is leaving
type = NotHitBy
trigger1 = 1
value = SCA

[State 4510, ghost] ; Prevents the camera from following the char
type = PlayerPush
trigger1 = 1
value = 0

[State 4511, screen bound]
type = playsnd
trigger1 = time = 0
value = 6,1

[State 4511, screen bound]
type = ScreenBound
trigger1 = time > 15
value = 0

[State 4510, end state]
type = ChangeState
;trigger1 = time = 1
trigger1 = animtime = 0
value = 34511

[Statedef 34511]
type = S
movetype = I
physics = N
anim = 3004	; <- You can use the standard running animation or put another one
sprpriority = 2
ctrl = 0

[State 4512, invincibility]
type = varset
trigger1 = time = 0
v = 52
value = 1

[State 4511, velocity]
type = turn
trigger1 = time = 0

[State 4511, velocity]
type = VelSet
trigger1 = time = [0,1]
x = 12
y = 0

[State 4511, invincibility]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4511, ghost]
type = PlayerPush
trigger1 = 1
value = 0

[State 4511, screen bound]
type = ScreenBound
trigger1 = 1
value = 0

[State 4511, wait outside state]
type = ChangeState
trigger1 = FrontEdgeDist < -30
value = 34512

[Statedef 34512]
type = S
movetype = I
physics = N
anim = 0
velset = 0,0
ctrl = 0

[State 4512, turn] ; always face the same direction as partner
type = turn
trigger1 = facing != parent,facing

[State 4512, position] ; always stay behind and at the same distance of the char on the stage
type = posset
trigger1 = 1
x = (partner, pos x) - 1000*facing

[State 4500, changestate] ; the character attacks his opponent when :
type = ChangeState
;triggerall = BackEdgeBodyDist >= 0	; he is on the stage
trigger1 = parent, stateno = 4700
value = 34700

[State 4512, turn] ; always face the same direction as partner
type = changestate
trigger1 = parent, stateno = 4500
value = 34500

[State 4512, turn] ; always face the same direction as partner
type = changestate
trigger1 = parent, stateno = 4520
value = 3000

[Statedef 34700]
type    = A
movetype= a
physics = N
velset = 0,0
anim = 34500
ctrl = 0

[State 4500, screen bound] ; Prevents the camera from following the char
type = ScreenBound
trigger1 = 1
value = 0

[State 4500, position]
type = Posset
trigger1 = time = 0
trigger1 = facing = 1
x = (partner, pos x) - 257
y = -130

[State 4500, position]
type = Posset
trigger1 = time = 0
trigger1 = facing = -1
x = (partner, pos x) + 257
y = -130

[State 4500, position]
type = Posadd
trigger1 = 1
x = 16

[State 4500, velocity]
type = VelSet
trigger1 = time = 0
y = 3

[State 4500, velocity]
type = Veladd
trigger1 = 1
y = .7

; Tag attack LV1
[State 4501, LV1]
type = ChangeState
trigger1 = pos y >= 0
value = 34100

; ===================== (Advanced Guard) =======================
; Advanced Guard Helper
[Statedef 8060]
type = A
physics = N
anim = 8061
velset = -14,0
ctrl = 0

[State 8060, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 8060, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 8060, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 8060, DestroySelf]
type = DestroySelf
trigger1 = time = 16;24

; ===================== (Landing Effect) =======================
; Landing Effect
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

; HIT_FALLRECOVER (on the ground) 
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,8,-4)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


; ===================== (Hyper BG and Hyper Portait) =======================
; Hyper BG and Hyper Portait
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 200
volumescale = 200
value = 4,0

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(47) = 1 && !numexplod(8505) && stateno = 9100
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(47) = 0 || root,var(47) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(47) = 0
trigger2 = root,movetype = H


; ===================== (Hyper Combo Finish) =======================
; Hyper Combo Finish
[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,21

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,20

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)


; ===================== (P2 Recovery State) =======================
; P2 Recovery State - phase one
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)
 
; P2 Recovery State - phase two
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)
 
; P2 Recovery State - phase three
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5040

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6


[State 9910, PosSet]
type = PosSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -5

[State 1300, 6]
type = PalFX
triggerall = name = "Dhalsim"
trigger1 = animelem = 1
time = 18
sinadd =  255,255,255,43
ignorehitpause = 0

[State 5100, 10]
type = PlaySnd
triggerall = name = "Dhalsim"
trigger1 = Time = 1
value = S3,0

[State 9910, VelSet]
type = VelSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -4
x = 0

[State 9910, VelAdd]
type = VelAdd
triggerall = name = "Dhalsim"
trigger1 = time = 1
y = 0

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .82;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52

;---------------------------------------------------------------------------

[statedef -2]

; ===================== (Pre-walking) =======================

[State -2, Pre-walking state]
type = ChangeState
;triggerall = !var(59)
trigger1 = prevstateno = 190
trigger2 = RoundNo != 1              ;Enable If Round Number is > 1
trigger2 = RoundState = 1           ;RoundState < 2 and
trigger2 = RoundState = 2
trigger2 = stateno = 0              ;Current state is 0
value = 21
ctrl = 0

[State -2, Remember the last Position (X)]
type = VarSet
triggerall = RoundState < 2
trigger1 = stateno = [0, 21] ;Enable after Intro
fvar(5) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(5) != 0
trigger1 = prevstateno != 190
x = fvar(5)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(5) = 0

; ===================== (Recovery p2 effect and sound) =======================

[State 0, PlaySnd]
type = PlaySnd
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,10
channel = 4
volume = 155
volumescale = 155

[State 0, PlaySnd]
type = PlaySnd
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,7
channel = 4
volume = 155
volumescale = 155

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 20, 2]
type = envshake
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
time = 8
freq = 80
ampl = 3

; ===================== (p1 & p2 icon) =======================

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(13) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(13) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(13)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, O\]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(13) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(13) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(13)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 240-const(size.head.pos.y)
id = 8596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy
var(13) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8596)
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(13)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8598)
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(13)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(15) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(15) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(15)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(15) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(15) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(15)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 240-enemy,const(size.head.pos.y)
id = 18596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy = 1
var(15) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(15)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(15)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

  
; I 
[State -2, I]
type = AssertSpecial
trigger1 = roundstate > 2
flag = nowalk
 
; ~ 
[State -2, ~]
type = Width
trigger1 = vel x > 0 && movetype != H
edge = 5,5



; ===================== (Finish Round Helper) =======================

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090

[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998


; ===================== (Stop sounds & Remove explods) =======================

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 420
id = 421

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 610
id = 611

[State 23080, StopSnd]
type = StopSnd
trigger1 = StateNo != 9000
trigger1 = StateNo != 620
channel = 9

[State -2, A-Dash-CLR]
type = VarSet
triggerall = var(11)
trigger1 = stateno = 52
trigger2 = stateno = 0
var(11) = 0

; ===================== (System Messages) =======================

[State -2, VS_Combo]
type = VarSet
triggerall = (var(36)!=10) || (var(36)=10 && movehit && statetype != A)
trigger1 = var(35) >= 3
trigger2 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = [5000,5899])
var(36) = 1+(var(35)>3)+(var(35)>5)+(var(35)>7)+(var(35)>9)+(var(35)>29)+(var(35)>59)+(var(35)>=100)-(var(35)=-1)
ignorehitpause = 1

[State -2, Air Combo]
type = VarSet
triggerall = var(35) >= 3 && statetype = A && var(36)!=10 && var(6)
trigger1 = (movehit)
var(36) = 10
ignorehitpause = 1


[State -2, Danger]
type = VarSet
trigger1 = var(53) !=1 && roundstate=2 && life <= Ceil(const(data.life)/5)
var(36) = 9
ignorehitpause = 1

; sound First attack
[State -2, First Attack]
type = PlaySnd
triggerall = var(35)=-1
triggerall = NumExplod(8050) = 0
trigger1 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
persistent = 0
value = 2,0
channel = 14
volume=255
ignorehitpause = 1

; Telop sound
[State -2, Combo Sound]
type = PlaySnd
trigger1 = NumExplod(8050) = 0
trigger1 = var(35)=0 && var(36)!=0
persistent = 0;1
value = 2,var(36)
channel = 14
volume=255
ignorehitpause = 1

[State -2, Left]
type = explod
trigger1 = var(35)=0 && var(36)!=0
trigger2 = var(35)=-1 && (movehit || p2movetype = H && (p2stateno != [120,159]));p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
trigger3 = var(35)=0 && var(36)=10 && (movehit || p2movetype = H && (p2stateno != [120,159]))
triggerall = TeamSide = 1 && NumExplod(8050) = 0
anim = (8550 + var(36))
ID = 8050
postype = left
pos = 3,80
ontop = 1
bindtime = -1
removetime = 60
ownpal = 1
supermovetime = 60
pausemovetime = 60
scale = 0.5,0.5
persistent = 0
ignorehitpause = 1

[State -2, Right]
type = explod
trigger1 = var(35)=0 && var(36)!=0
trigger2 = var(35)=-1 && (movehit || p2movetype = H && (p2stateno != [120,159]));p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
trigger3 = var(35)=0 && var(36)=10 && (movehit || p2movetype = H && (p2stateno != [120,159]))
triggerall = TeamSide = 2 && NumExplod(8050) = 0
anim = (8650+ var(36));8011;8720;
ID = 8050
postype = right
pos = -10,80;130;82
ontop = 1
bindtime = -1
removetime = 60;90
ownpal = 1
supermovetime = 60;90
pausemovetime = 60;90
scale = 0.5,0.5
persistent = 0;1
ignorehitpause = 1

[State -2, VS_Combo]
type = VarAdd
trigger1 = enemynear, time = 0
trigger1 = enemynear, Hitshakeover = 0
trigger1 = (p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899]
trigger2 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
var(35) = 1 + (var(35)=-1)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
trigger1 = var(35)!=-1 && (p2movetype!=H || enemynear, ctrl)
trigger2 = var(35)=-1 && movetype = H;p2stateno = [5000,5899])
var(35) = 0 - (roundstate<2)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
triggerall = numexplod(8050)!=0
trigger1 = var(35)=0
var(36) = 0
ignorehitpause = 1

[State -2, Is Danger]
type = VarSet
trigger1 = var(53) = 0 && life <= Ceil(const(data.life)/5)
;trigger1 = var(30) = 1 && roundstate!=2
var(53) = 1;(roundstate>1)
ignorehitpause = 1

[State -2, Is Danger]
type = VarSet
trigger1 = var(53) = 1 && life > Ceil(const(data.life)/5)
;trigger1 = var(30) = 1 && roundstate!=2
var(53) = 0;(roundstate>1)
ignorehitpause = 1

[State -2, Is First Attack p3]
type = VarSet
triggerall = numpartner=1
trigger1 = partner, movehit
trigger1 = partner, var(35) != -1
var(35) = 0
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = nomusic

; ===================== (Advanced Guard) =======================
[State -2, AhoVOK[h]
type = Helper
trigger1 = var(48)
stateno = 8060
postype = p2
pos = 20,0
id = 8060

[State -2, AhoVOK[h]
type = PosFreeze
trigger1 = numhelper(8060)

[State -2, AhoVOK[h]
type = VelAdd
trigger1 = numhelper(8060)
trigger1 = statetype = A
y = -gethitvar(yaccel)

[State -2, AhoVOK[h]
type = Explod
trigger1 = var(48)
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.4, 0.4

[State -2, AhoVOK[h]
type = VarSet
trigger1 = var(48)
var(48) = 0

; ===================== (Air Combo Code) =======================

[State 650, GA~b^[A]
type = PlaySnd
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
value = 0,11

[State 620, GA~b^[A]
type = VarSet
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
var(6) = 2

[State -2, GA~b^[A]
type = VarSet
trigger1 = !numtarget
var(6) = 0

[State -2, GA~b^[A]
type = VarSet
trigger1 = var(6)= 2 && ctrl && statetype != A
var(6) = 3

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = var(6) = 2
trigger1 = pos x*facing < 50
value = 0
movecamera = 0,0
ignorehitpause = 1

[State -2, GA~b^[A]
type = ChangeState
triggerall = var(6) = 2
trigger1 = backedgebodydist < -5 && stateno != 100 && stateno != [701,702]
value = 701

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = stateno = 100 && prevstateno = 701
value = 0
movecamera = 0,0

[State -2, GA~b^[A]
type = NotHitBy
trigger1 = stateno = 100 && prevstateno = 701
value = SCA
 
; wp[A 
[State -2, wp[A]
type = VarSet
trigger1 = !numhelper
var(4) = 0
 
[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(19) = 0

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(17) = 0


; ===================== (Metal Hit Code) =======================

[state -2, metal]
type = varset
trigger1 = enemynear, name = "War Machine"
trigger2 = enemynear, name = "Iron Man"
trigger3 = enemynear, name = "Sentinel"
trigger4 = enemynear, name = "Doctor Doom"
trigger5 = enemynear, name = "Tron Bonne"
var(49) =10

[state -2, metal]
type = varset
trigger1 = enemynear, name = "War Machine"
trigger1 = enemynear, name = "Iron Man"
trigger1 = enemynear, name = "Sentinel"
trigger1 = enemynear, name = "Doctor Doom"
trigger1 = enemynear, name = "Tron Bonne"
var(49) =0 

[state -2, metal]
type = varset
triggerall = enemynear, Name = "Zangief"
trigger1 = enemynear, var(50)=1
var(49) =10

[state -2, metal]
type = varset
triggerall = enemynear, Name = "Zangief"
trigger1 = enemynear, var(50)=0
var(49) =0

[state 3000,A]; forward
type = playsnd
trigger1 = projhit40001 = 1
value = 5+var(49),3
channel = 4

[state -2]
type = removeexplod
trigger1 = stateno != [1100,1102]
ID = 11000

[state -2]
type = stopsnd
trigger1 = prevstateno = 11
;trigger1 = stateno != [0,450]
;trigger1 = stateno = [1000,4200]
channel = 2

[state -2]
type = stopsnd
trigger1 = prevstateno = 11
channel = 6

[state -2]
type = removeexplod
trigger1 = stateno != [1000,1002]
ID = 10000

; ===================== (p2Recovery states) =======================

[State -2, ^[Qbg]
type = VarSet
trigger1 = 1
var(8) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget
var(8) = target,id
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = !numtarget
var(9) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget && hitpausetime
var(9) = target,stateno = 5080
ignorehitpause = 1

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(8)) && !var(9)
trigger1 = playerID(var(8)),gethitvar(chainid) & 1
trigger1 = playerID(var(8)),stateno != [120,155]
trigger1 = playerID(var(8)),hitover && playerID(var(8)),alive && playerID(var(8)),hitshakeover
trigger1 = playerID(var(8)),statetype = A && playerID(var(8)),stateno != 9900
value = 9900

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(8)) && var(9)
trigger1 = playerID(var(8)),alive && playerID(var(8)),hitshakeover
trigger1 = playerID(var(8)),pos y >= 0 && playerID(var(8)),vel y > 0
trigger1 = playerID(var(8)),statetype = A && playerID(var(8)),stateno != 5201 && playerID(var(8)),stateno != 9910
value = 9901

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(8))
trigger1 = playerID(var(8)),gethitvar(chainid) & 2
trigger1 = playerID(var(8)),stateno != [120,155]
trigger1 = playerID(var(8)),alive && playerID(var(8)),hitshakeover
trigger1 = playerID(var(8)),pos y >= 0 && playerID(var(8)),vel y > 0
trigger1 = playerID(var(8)),statetype = A && playerID(var(8)),stateno != 9910
value = 9910


[state kobun doko da]
type = helper
trigger1 = numhelper(3000) = 0
trigger1 = roundstate != 0
trigger1 = stateno != 190
name = "kobun"
id = 3000
pos = -70, -4
stateno = 3000
size.shadowoffset = -6
supermovetime = 999999
pausemovetime = 999999
ownpal = 1

[state 100, 1]
type = varset
trigger1 = statetype != A
v = 5
value = 0

;==========================================================================
; get rid of trailing anims when hit
[state -2, 1]
type = removeexplod
trigger1 = movetype != a
id = 9001

[state 210, 5]
type = posset
trigger1 = prevstateno = 100
trigger2 = prevstateno = 105
y = 0

;--------------------------------------------------------------
; combo hitcount
[state -2, 1]
type = varadd
trigger1 = (hitpausetime = 1) && (p2movetype = h) && (movehit)
;trigger3 = (stateno = 801) && (time = 0)
;trigger4 = (stateno = 811) && (time = 0)
v = 18
value = 1
ignorehitpause = 1

[state -2, 1]
type = varset
trigger1 = p2movetype != h
v = 18
value = 0

[state -2]
type = varset
trigger1 = var(18) = 0
fvar(0) = 1; + (.25 * (var(41) > 0))
ignorehitpause = 1

[state -2]
type = attackmulset
trigger1 = 1
value = fvar(0)
ignorehitpause = 1

[state -2]
type = varset
trigger1 = var(18) > 0
trigger1 = var(18) <= 4
fvar(0) = .80; + (.25 * (var(41) > 0))
ignorehitpause = 1
[state -2]
type = varset
trigger1 = var(18) > 4
trigger1 = var(18) <= 11
fvar(0) = .60; + (.25 * (var(41) > 0))
ignorehitpause = 1
[state -2]
type = varset
trigger1 = var(18) > 11
trigger1 = var(18) <= 19
fvar(0) = .45; + (.25 * (var(41) > 0))
ignorehitpause = 1
[state -2]
type = varset
trigger1 = var(18) > 19
trigger1 = var(18) <= 26
fvar(0) = .3; + (.25 * (var(41) > 0))
ignorehitpause = 1
[state -2]
type = varset
trigger1 = var(18) > 26
trigger1 = var(18) <= 1000
fvar(0) = .2; + (.25 * (var(41) > 0))
ignorehitpause = 1

; get rid of trailing anims when hit
[state -2, 1]
type = afterimagetime
trigger1 = movetype != a
trigger2 = stateno = 2002
trigger3 = stateno = 100
trigger3 = stateno = 0
time = 1
ignorehitpause = 1

[state -2, hurt sound randomizer]
type = varrandom
trigger1 = 1
v = 7
range = 0,1

; ===================== (Wall hit) =======================

[state 5100,2]
type = explod
triggerall = var(42)
triggerall = enemy,stateno != [120,159]
trigger1 = numtarget
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
scale = 0.95,0.95
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0


[state 5100,2]
type = playsnd
triggerall = var(42)
triggerall = numenemy
triggerall = enemy,stateno != [120,159]
triggerall = numtarget
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,9

[state 200, 3]
type = varset
triggerall = var(42)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 42
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 24
value = var(23)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 23
value = hitcount

;***************
[state -3, 2];combo
type = varset
trigger1 = var(23)>var(24)
v = 42
value = 1

[state 250,11]
type = helper
trigger1 = p2stateno = 328
trigger1 = !numhelper(60120)
persistent = 0
stateno = 60120
ID = 60120
bindtime = 1
postype = p2
pos = 0,500 

[state -2]
type = Displaytoclipboard
trigger1 = time >= 0
text = "var(52) is %d,var(18) is %d"
params = var(52), var(18)
ignorehitpause = 1

;=================================================================================
[Statedef -3]


; ============= (Character HitSound) =============

[State 1120, _[W{CX]
type = PlaySnd
triggerall = alive && movetype = H
triggerall = random % 10 < 5
trigger1 = stateno = 5000 && time = 1
trigger2 = stateno = 5010 && time = 1
trigger3 = stateno = 5020 && time = 1
trigger4 = stateno = 5070 && time = 1
trigger5 = stateno = 5080 && time = 1
value = s5000,random%2
channel = 8
volume = 150
volumescale = 150

[State 0, StopSnd]
type = StopSnd
trigger1 =  !alive
channel =2
;ignorehitpau


