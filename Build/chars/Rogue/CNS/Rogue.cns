; Rogue's constants and state file.
;
; Variables:
; var(0) - Temporary variable
; var(1) - Is 1 if a speed power-up is active
; var(2) - Is 1 if a defense power-up is active
; var(3) - Is 1 if a super armor power-up is active
; var(4) - Timer for power-up mode
; var(5) - Is 1 if Rogue has a "stored" stolen super
; var(6) - Is 1 if Rogue is in "power-up stealing" mode, just for simplicity's sake
; var(7) - Is 1 if the player has inputed a "roll recovery" command while falling.
; var(8) - Another temporary variable
; var(9) - Is 1 if a power power-up is active.
; var(10) - When in Super Armor mode, counts the ticks since the last hit received
; var(11) - Holds previous State No when in Armor mode
; var(12) - Another temporary variable
; var(13) - AI Active?
; var(14) - p2's ID #
; var(15) - Is 1+ if AI is aircombo'ing
; var(16) - Set when a KO is made.
; var(17) - Combo Active (7)
; var(18) - Total hits of current combo (8)
; var(19) - Super Jump
; var(20) - New hits this tick which must be accounted for (10)
; var(21) - Helper hits to account for this tick (11)
; var(22) - Holds combo count
; var(23) - Holds facing at start of round
; var(24) - First Attack var
; var(25) - Hypergrav hit
; var(26) - Danger! variable
; var(27) - Holds value of ctrl when in Super Armor mode
; var(28) - Gethit PalFX ticker
; var(29) - Temp for super armor
; var(30) - "    "    "     "
; var(31) - 1 = KO'd
; var(32) - 1 = We're in a custom state
; var(33) - Count A for custom state detection
; var(34) - Count B for custom state detection
; var(35) - Aircombo active
;
; Float Vars:
; fvar(0) - Temp Var
; fvar(1) - Damage scaling constant
;
; Permanent variables:
; var(59) - If the player has chosen Move Steal mode, the value of this var corresponds to the            ;character whose moves are copied for this match.
;           
;		0 - Mode not active
;		1 - Cammy
;       2 - Cyclops
; 		3 - Dhalsim
;		4 - Juggernaut
;		5 - Ken
;		6 - Magneto
;		7 - Ryu
;		8 - Zangief
;		9 - Gouki
; var(58) - Used for Turns mode intro
; var(57) - AI was active
;
[Data]
  ;Amount of life to start with
life = 1000
power = 5000
  ;attack power (more is stronger)
attack = 112
  ;defensive power (more is stronger)
defence = 100
  ;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
  ;Time which player lies down for, before getting up
liedown.time = 15
  ;Number of points for juggling
airjuggle = 15
  ;Default hit spark number for HitDefs
sparkno = 2
  ;Default guard spark number
guard.sparkno = 40
  ;1 to enable echo on KO
KO.echo = 0
  ;Volume offset (negative for softer)
volumescale = 155
volume = 155
IntPersistIndex = 56
FloatPersistIndex = 40

[Size]
xscale = .83
yscale = 1.07  
ground.back = 17   ;Player width (back, ground)
ground.front = 17    ;Player width (front, ground)
air.back = 16        ;Player width (back, air)
air.front = 16       ;Player width (front, air)
height = 60	     ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too   
head.pos = -0, -80   ;Approximate position of head
mid.pos = -6, -53    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,-2    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3.5     ;Walk forward
walk.back = -2.5     ;Walk backward
run.fwd  = 6.8, 0    ;Run forward (x, y)
run.back = -6.3, 0 ;Hop backward (x, y)
jump.neu = 0,-13    ;Neutral jumping velocity (x, y)
jump.back = -2.7,-11.1    ;Jump back Speed (x, y)
jump.fwd = 2.7,-11.1   ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 4.5,-8.1      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
airjump.num = 0     ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .66         ;Vertical acceleration
stand.friction = .8
crouch.friction = .8

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

[Statedef 21]
type    = S
physics = S
sprpriority = 1

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 21, 1]
type = VelSet
triggerall = enemy, stateno != 191
trigger1 = command = "holdfwd"
x = 1.8

[State 21, 2]
type = VelSet
triggerall = enemy, stateno != 191
trigger1 = command = "holdback"
x = -1.55

[State 21, 3]
type = VelSet
triggerall = enemy, stateno != 191
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = command = "holdfwd" && anim != 22
value = 22

[State 21, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = command = "holdback" && anim != 22
value = 22

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = command != "holdfwd" && anim != 0
trigger1 = command != "holdback" && anim != 0
value = 0


[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 22, 0)

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
; CNS ƒŒƒxƒ‹: Šî–{
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = VarRandom
trigger1 = time = 0
v = 0
range = 0, 1000

[State 180, a]
type = ChangeState
trigger1 = time >= 2
trigger1 = var(0) <= 1000
trigger1 = var(0) >= 750
value = 183

[State 180, a]
type = ChangeState
trigger1 = time >= 2
trigger1 = wintime
value = 183

[State 180, b]
type = ChangeState
trigger1 = time >= 2
trigger1 = var(0) < 250
value = 184

[State 180, 2]
type = ChangeState
trigger1 = time >= 2
trigger1 = var(0) < 500
trigger1 = var(0) >= 250
value = 181

[State 180, 3]
type = ChangeState
trigger1 = Time >= 2
trigger1 = var(0) < 750
trigger1 = var(0) >= 500
value = 182

;---------------------------------------------------------
; Win Pose 1: "Bye bye, darlin'."
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 181, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 17
volume = 255
volumescale = 255

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 1
volume = 255
volumescale = 255
channel = 0

[State 181, 3]
type = Explod
trigger1 = AnimElem = 5
anim = 196
pos = 13, -93
postype = p1
bindtime = 1
vel = .7, -.6
scale = .83,1.07  
removetime = 30
ownpal = 1
ontop = 1

[State 181, 5]
type = AssertSpecial
trigger1 = time < 360
flag = RoundNotOver

;----------------------------------------------
; Win Pose 2: "I did it!"
[Statedef 182]
type = S
movetype = I
physics = S
velset = 0, 0
ctrl = 0

[State 182, 1]
type = ChangeAnim
trigger1 = time = 0
value = 182

[State 182, 2]
type = PlaySnd
trigger1 = time = 6
value = 3, 11
volume = 255
volumescale = 255
channel = 0

[State 182, 3]
type = AssertSpecial
trigger1 = time < 360
flag = RoundNotOver

;---------------------------------------------------
; Win Pose 3: "Ta daaa!"
[Statedef 183]
type = S
movetype = I
physics = S
velset = 0, 0
ctrl = 0

[State 183, 1]
type = ChangeAnim
trigger1 = time = 0
value = 183

[State 183, 2]
type = PlaySnd
trigger1 = time = 30
value = 3, 15
volume = 255
volumescale = 255
channel = 0

[State 183, 3]
type = AssertSpecial
trigger1 = time < 360
flag = RoundNotOver

;---------------------------------------------------
; Win Pose 4: "Easy win!"
[Statedef 184]
type = S
movetype = I
physics = N
ctrl = 0

[State 184, b]
type = VelSet
trigger1 = time = 0
x = -1
y = -10

[State 184, 1]
type = ChangeAnim
trigger1 = time = 0
value = 660

[State 184, 2]
type = Gravity
trigger1 = Pos Y <= -1

[State 184, 3]
type = ChangeAnim
trigger1 = time = 50 
value = ifelse(random < 500, 184, 185)

[State 184, a]
type = PlaySnd
trigger1 = time = 50
value = 3, 3
volume = 255
volumescale = 255
channel = 0

[State 184, 4]
type = VelSet
triggerall = time > 10
trigger1 = Pos Y >= -1
y = 0
x = 0

[State 184, 5]
type = PosSet
triggerall = time > 10
trigger1 = Pos Y > 0
y = 0

[State 184, 5]
type = AssertSpecial
trigger1 = time < 300
flag = roundnotover

;---------------------------------------------------------------------------
; Introduction State Decider
; 
[Statedef 190]
type = S
ctrl = 0
velset = 0,0
anim = 9999

[State 191, a]
type = AssertSpecial
trigger1 = 1
flag = intro

[State 191, b]
type = ScreenBound
trigger1 = 1
value = 0

[State 191, c]
type = VarSet
trigger1 = time = 0
v = 59
value = 0

[State 191, Set]
type = Varset
trigger1 = time = 0
v = 0
value = floor(Pos X)

[State 191, 1]
type = VarRandom
trigger1 = time = 0
v = 8
range = 1, 9

[State 191, 2]
type = ChangeState
trigger1 = time = 1
value = 191

;-----------------------------------------
; "Dive from Sky" intro (only used in powerup-stealing mode)
[Statedef 191]
type = A
movetype = I
anim = 190
sprpriority = 1
ctrl = 0

[State 191, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192, b]
type = ScreenBound
trigger1 = 1
value = 0

[State 192, 1]
type = PosAdd
trigger1 = time = 0
x = 300
y = -200

[State 192, 2]
type = VelSet
trigger1 = time = 30
x = -12.5
y = 9

[State 182, 3]
type = ChangeAnim
trigger1 = Pos Y > -1
value = 191
persistent = 0

[State 182, 4]
type = VelSet
trigger1 = Anim = 191
x = 0
y = 0
persistent = 0

[State 182, 5]
type = PosSet
trigger1 = Anim = 191
y = 0
persistent = 0

[State 182, 6]
type = PlaySnd
trigger1 = Anim = 191
value = 0,10
persistent = 0

[State 182, 7]
type = Explod
trigger1 = Anim = 191
anim = 6090
postype = p1
pos = -10, 0
bindtime = -1
removetime = -2
sprpriority = 3
persistent = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = Anim = 191
time = 15
freq = 70
ampl = -4
persistent = 0

[State 183, 9]
type = PlaySnd
triggerall = Anim = 191
trigger1 = AnimTime = 0
value = 3, 4
volume = 255
volumescale = 255
channel = 0

[State 183, 10]
type = ChangeState
triggerall = Anim = 191
trigger1 = AnimTime = 0
value = 0
persistent = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
;anim = 195
velset = 0,0
movetype = A
physics = S
sprpriority = 2

[State 195, Super Armor]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 195

[State 195, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 17
volume = 255
volumescale = 255

[State 195, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 1
volume = 255
volumescale = 255
channel = 0

[State 195, 3]
type = Explod
trigger1 = AnimElem = 5
anim = 196
pos = 16, -93
postype = p1
bindtime = 1
vel = .7, -.6
scale = .83,1.07  
removetime = 30
ownpal = 1
ontop = 1

[State 195, 4]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 1
pausetime = 1, 1
guard.pausetime = 5, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 22
air.hittime = 22
guard.hittime = 17
yaccel = .99
ground.velocity = -14,-22
ground.cornerpush.veloff = 0
air.velocity = -14,-22
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 1+4
kill = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 195, 5]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch
[Statedef 200]
type    = S                     
movetype= A              
physics = S                                          
ctrl = 0                        
poweradd = ifelse(PrevStateNo = 9000, 0, 20)                 
sprpriority = 2                

[State 200, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 200 + var(1)

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 200, 1]
type = hitdef
trigger1 = animelem = 2
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -7,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing medium punch
[Statedef 210]
type    = S
movetype= A
physics = S
poweradd= ifelse(PrevStateNo = 9000, 0, 50)
ctrl = 0

[State 210, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 210 + var(1)

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,10
volume = 255
volumescale = 255
channel = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State PosFreeze]
type = posfreeze
trigger1 = movecontact && movecontact < 19

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 210, HitDef]
type = HitDef
trigger1 = animelem = 3
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 3,10
guard.pausetime = 3,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -9.8,0
guard.velocity = -10
air.velocity = -8,0
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing hard punch 
[Statedef 220]
type = S
movetype = A
physics = S
poweradd = ifelse(PrevStateNo = 9000, 0, 80)
ctrl = 0

[State 220, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 220 + var(1)

[State 220, Clear Var]
type = VarSet
triggerall = PrevStateNo != 9000
trigger1 = time = 0
v = 0
value = 0

[State 220, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,10
volume = 255
volumescale = 255
channel = 0

[State 220, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State PosFreeze]
type = posfreeze
trigger1 = movecontact && movecontact < 19

[State 220, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 220, HitDef]
type = HitDef
trigger1 = animelem = 4
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Back
air.animtype = Back
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 3,9
guard.pausetime = 3,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 11
yaccel = 1.13
guard.velocity = -14
fall.yvelocity = -2
ground.velocity = -17,-17
ground.cornerpush.veloff = -24.5
air.velocity = -17,-17
airguard.velocity = -10.5,3
id = 4

[State 220, 8]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 225

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 220, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------
; Hit by Fierce
[Statedef 225]
type    = A
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5002

[State 225, 2]
type = ChangeState
trigger1 = Time = 8
value = 226

;---------------------------------------------------------
; Hit by Fierce - Flying
[Statedef 226]
type    = A
movetype= H
physics = N

[State 226, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5062

[State 226, 2]
type = VelAdd
trigger1 = 1
y = 1.31

[State 226, 3]
type = Null;Explod
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
anim = 7000
persistent = 0
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 226, 4]
type = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= -25)
trigger1 = alive
value = 227

[State 226, 5]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
trigger1 = alive = 0
value = 5100

;---------------------------------------------------------
; Hit by Fierce - Recover
[Statedef 227]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5040

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5050

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52

;---------------------------------------------------------------------------
; Standing light kick
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd= ifelse(PrevStateNo = 9000, 0, 14)
ctrl = 0
sprpriority = 2

[State 230, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 230 + var(1)

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 200, 1]
type = hitdef
trigger1 = animelem = 3
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -7,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium kick
[Statedef 240]
type    = S
movetype= A
physics = S
poweradd= ifelse(PrevStateNo = 9000, 0, 35)
ctrl = 0
sprpriority = 2

[State 240, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 240 + var(1)

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State PosFreeze]
type = posfreeze
trigger1 = movecontact && movecontact < 19

[State 210, HitDef]
type = HitDef
trigger1 = time = 0
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 3,10
guard.pausetime = 3,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -8.8,0
guard.velocity = -10
air.velocity = -9,0
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, ChangeAnim]
type = changeanim
trigger1 = anim != 242 && anim != 240 + var(1)
trigger2 = anim = 240 + var(1) && movecontact
value = 242

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Hard kick
[Statedef 250]
type    = S
movetype= A
physics = S
poweradd= ifelse(PrevStateNo = 9000, 0, 65)
ctrl = 0
sprpriority = 2

[State 250, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 250 + var(1)

[State 420, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State PosFreeze]
type = posfreeze
trigger1 = movecontact && movecontact < 19

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 250, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = 3,9
volume = 255
volumescale = 255
channel = 0

[State 420, HitDef]
type = HitDef
trigger1 = animelem = 3
attr = C,NA
hitflag  = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 3,9
guard.pausetime = 3,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 21
air.hittime = 24
guard.hittime = 17
yaccel = .98
ground.velocity = 0,-24
guard.velocity = -14
guard.cornerpush.veloff = -16
ground.cornerpush.veloff = 0
air.velocity = 0,-24
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 420, Explod]
type = Explod
trigger1 = movehit
anim = 8020
pos = 60, -109
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
ownpal = 1
facing = 1 

[State 8411, puntets]
type = explod
trigger1 = movehit
anim = 8007
postype = p2
pos = 0,-90
sprpriority = 4
facing = 1
persistent = 0
supermove = 1
ownpal = 1
scale = 0.6,0.6
vfacing = 1

[State 250, 3]
type = PosAdd
trigger1 = AnimElem = 8
x = -33

[State 0, ChangeAnim]
type = changeanim
trigger1 = anim != 252 && anim != 250 + var(1)
trigger2 = anim = 250 + var(1) && movecontact
value = 252

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch
[Statedef 400]
type    = C
movetype= A
physics = C
poweradd= ifelse(PrevStateNo = 9000, 0, 15)
ctrl = 0

[State 400, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 400 + var(1)

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state 200, 1]
type = hitdef
trigger1 = animelem = 2
attr = C,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -5,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching medium punch
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd= ifelse(PrevStateNo = 9000, 0, 40)
ctrl = 0

[State 410, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 410 + var(1)

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 3,9
volume = 255
volumescale = 255
channel = 0

[State 210, VelSet]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 410, 3]
type = VelSet
trigger1 = !var(3)
trigger1 = AnimElem = 3
trigger2 = var(3)
trigger2 = AnimElemNo(0) = 3
y = 0
x = 17 + (1.2 * var(1))
persistent = 0

[State 410, 4]
type = HitDef
trigger1 = animelem = 3
attr = C,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 9,10
guard.pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -10.8,0
guard.velocity = 0
air.velocity = -7,0
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching hard punch
[Statedef 420]
type    = C
movetype= A
physics = C
poweradd= ifelse(PrevStateNo = 9000, 0, 60)
ctrl = 0

[State 420, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 420 + var(1)

[State 420, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 250, PlaySnd]
type = PlaySnd
trigger1= animelem = 5
value = 3,10
volume = 255
volumescale = 255
channel = 0

[State 420, HitDef]
type = HitDef
trigger1 = time = 0
attr = C,NA
hitflag  = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 22
guard.hittime = 17
yaccel = .98
ground.velocity = -2.4,-19
guard.velocity = -14
guard.cornerpush.veloff = -16
ground.cornerpush.veloff = 0
air.velocity = -2.4,-19
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 420, Explod]
type = Explod
trigger1 = movehit
anim = 8020
pos = 60, -39
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
ownpal = 1
facing = 1 

[State 8411, puntets]
type = explod
trigger1 = movehit
anim = 8007
postype = p2
pos = 0,-90
sprpriority = 4
facing = 1
persistent = 0
supermove = 1
ownpal = 1
scale = 0.6,0.6
vfacing = 1

[State 420, c]
type = PosAdd
trigger1 = !var(3)
trigger1 = AnimElem = 11
trigger2 = var(3)
trigger2 = AnimElemNo(0) = 11
x = 20
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd= ifelse(PrevStateNo = 9000, 0, 15)
ctrl = 0

[State 430, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 430 + var(1)

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state 200, 1]
type = hitdef
trigger1 = animelem = 3
attr = C,NA
hitflag = MAFD
guardflag = LA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-10
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
down.cornerpush.veloff = -25.5
down.velocity = -6,-7
airguard.velocity = -10.5,3
air.velocity = -5,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 7)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
poweradd= ifelse(PrevStateNo = 9000, 0, 45)
ctrl = 0

[State 440, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 440 + var(1)

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,8
volume = 255
volumescale = 255
channel = 0


[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 410, 4]
type = HitDef
trigger1 = animelem = 3
attr = C,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -10.8,0
guard.velocity = -10
air.velocity = -7,0
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Hard Kick
[Statedef 450]
type    = C
movetype= A
physics = C
poweradd= ifelse(PrevStateNo = 9000, 0, 65)
ctrl = 0

[State 450, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 450 + var(1)

[State 210, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 0,5
volume = 40

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,8
volume = 255
volumescale = 255
channel = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 450, 3]
type = HitDef
trigger1 = animelem = 4
attr = C,NA
hitflag  = MAFD
guardflag = LA
animtype = Hard
damage = 65,0
getpower = 30,0
givepower = 20,0
pausetime = 7,9
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,Floor(P2Dist Y - 15)
hitsound = -1
guardsound = S6+var(49),0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 20
air.hittime = 12
guard.hittime = 17
yaccel = .86
ground.velocity = 0,-7.5
guard.velocity = -14
guard.cornerpush.veloff = -16
ground.cornerpush.veloff = 0
air.velocity = 0,-4
airguard.velocity = -10.5,3
down.cornerpush.veloff = -25.5
down.velocity = -6,-7
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 10
id = 4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 450, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 11
ctrl = 0
sprpriority = 2

[State 600, Additional Gravity]
type = VelAdd
trigger1 = var(1) = 1
y = .4

[state 410,3]
type = veladd
triggerall = var(1) = 0
triggerall = var(19)
trigger1 = floor (pos Y < -155)
y = -0.13

[state 410,3]
type = veladd
triggerall = var(1) = 1
triggerall = var(19)
trigger1 = floor (pos Y < -155)
y = -0.21

[State 600, VarAdd]
type = VarAdd
triggerall = Var(13) = 1
trigger1 = PlayerID(var(14)), GetHitVar(ChainID) = 984
v = 15
value = 1
persistent = 0

[State 600, a]
type = ChangeAnim
trigger1 = time = 0
value = 600 + var(1)

[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 600, HitDef]
type = HitDef
trigger1 = animelem = 2
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.02
ground.velocity = -6.5,0
guard.velocity = -5.5
down.velocity = -6,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -0.3,-8.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(19)
triggerall = anim = 600 + var(1)
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 45
ctrl = 0
sprpriority = 2

[State 610, Additional Gravity]
type = VelAdd
trigger1 = var(1) = 1
y = .4

[state 410,3]
type = veladd
triggerall = var(1) = 0
triggerall = var(19)
trigger1 = floor (pos Y < -155)
y = -0.13

[state 410,3]
type = veladd
triggerall = var(1) = 1
triggerall = var(19)
trigger1 = floor (pos Y < -155)
y = -0.21

[State 610, VarAdd]
type = VarAdd
triggerall = Var(13) = 1
trigger1 = PlayerID(var(14)), GetHitVar(ChainID) = 985
v = 15
value = 1
persistent = 0

[State 610, a]
type = ChangeAnim
trigger1 = time = 0
value = 610 + var(1)

[State 610, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 200, 1]
type = PlaySnd
trigger1 = Time = 4
value = 3,9
volume = 255
volumescale = 255
channel = 0

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(32) = 1

[state 610, 3]
type = hitdef
trigger1 = animelem = 3
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = up
damage = 35,0
getpower = 30,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.02
ground.velocity = -9.5,0
guard.velocity = -9
down.velocity = -6,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -0.3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(19)
triggerall = anim = 610 + var(1)
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1211
ctrl = 1

;---------------------------------------------------------------------
;Jump Hard Punch
[Statedef 620]
type    = A
movetype= A
physics = A
poweradd= 55
ctrl = 0
sprpriority = 2

[State 620, Additional Gravity]
type = VelAdd
trigger1 = var(1) = 1
y = .4

[State 620, VarAdd]
type = VarSet
triggerall = Var(13) = 1
trigger1 = PlayerID(var(14)), GetHitVar(ChainID) = 986
v = 15
value = 0
persistent = 0

[State 620, a]
type = ChangeAnim
trigger1 = time = 0
value = 620 + var(1)

[State 610, PlaySnd]
type = PlaySnd
trigger1 = time = 6
value = 0,5
volume = 40

[State 200, 1]
type = PlaySnd
trigger1 = Time = 6
value = 3, 10
volume = 255
volumescale = 255
channel = 0

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(32)
trigger1 = var(16) > 1 && var(38) > 0
var(32) = 1

[State 610, 3]
type = HitDef
trigger1 = !var(32) && animelem = 4
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 85,0
getpower = 50,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 2
yaccel = .93
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -13,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = 0,15
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(32) && animelem = 4
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 85,0
getpower = 50,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 2
yaccel = 1.13
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -6,2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = 0,15
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(19)
triggerall = anim = 620 + var(1)
triggerall = floor (pos Y < -155)
trigger1 = animelem = 10
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
sprpriority = 2

[State 630, Additional Gravity]
type = VelAdd
trigger1 = var(1) = 1
y = .4

[state 410,3]
type = veladd
triggerall = var(1) = 0
triggerall = var(19)
trigger1 = floor (pos Y < -155)
y = -0.13

[state 410,3]
type = veladd
triggerall = var(1) = 1
triggerall = var(19)
trigger1 = floor (pos Y < -155)
y = -0.21

[State 630, VarAdd]
type = VarAdd
triggerall = Var(13) = 1
trigger1 = PlayerID(var(14)), GetHitVar(ChainID) = 987
v = 15
value = 1
persistent = 0

[State 630, a]
type = ChangeAnim
trigger1 = time = 0
value = 635 + var(1)

[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(32) = 1

[State 600, HitDef]
type = HitDef
trigger1 = animelem = 3
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.02
ground.velocity = -6.5,0
guard.velocity = -5.5
down.velocity = -6,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -0.3,-8.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(19)
triggerall = anim = 635 + var(1)
triggerall = floor (pos Y < -155)
trigger1 = animelem = 7
value = 1211
ctrl = 1


;---------------------------------------------------------------------------
;Jump Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = A
poweradd= 45
ctrl = 0
sprpriority = 2

[State 640, Additional Gravity]
type = VelAdd
trigger1 = var(1) = 1
y = .4

[state 410,3]
type = veladd
triggerall = var(1) = 0
triggerall = var(19)
trigger1 = floor (pos Y < -155)
y = -0.13

[state 410,3]
type = veladd
triggerall = var(1) = 1
triggerall = var(19)
trigger1 = floor (pos Y < -155)
y = -0.21

[State 640, VarAdd]
type = VarAdd
triggerall = Var(13) = 1
trigger1 = PlayerID(var(14)), GetHitVar(ChainID) = 988
v = 15
value = 1
persistent = 0

[State 640, a]
type = ChangeAnim
trigger1 = time = 0
value = 640 + var(1)

[State 610, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(32) = 1

[state 610, 3]
type = hitdef
trigger1 = animelem = 3
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = up
damage = 35,0
getpower = 30,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.02
ground.velocity = -9.5,0
guard.velocity = -9
down.velocity = -6,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -0.3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(19)
triggerall = anim = 640 + var(1)
triggerall = floor (pos Y < -155)
trigger1 = animelem = 8
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Hard Kick
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 65
ctrl = 0
sprpriority = 2

[State 650, Additional Gravity]
type = VelAdd
trigger1 = var(1) = 1
y = .4

[State 650, VarAdd]
type = VarSet
triggerall = Var(13) = 1
trigger1 = PlayerID(var(14)), GetHitVar(ChainID) = 999
v = 15
value = 0
persistent = 0

[State 650, a]
type = ChangeAnim
trigger1 = time = 0
value = 650 + var(1)

[State 610, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 0,5
volume = 40

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(32)
trigger1 = var(16) > 1 && var(38) > 0
var(32) = 1

[State 610, 3]
type = HitDef
trigger1 = !var(32) && animelem = 4
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 85,0
getpower = 50,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -12,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -16,6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(32) && animelem = 4
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 85,0
getpower = 50,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -12,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -16,6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(19)
triggerall = anim = 650 + var(1)
triggerall = floor (pos Y < -155)
trigger1 = animelem = 10
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Dive Kick (down + c)
[Statedef 660]
type = A
movetype = A
physics = N
poweradd = 80
ctrl = 0
anim = 630

[State 610, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 0,5
volume = 40

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 660, 2]
type = Velset
trigger1 = AnimElem = 4
X = 4.5 + (var(1) * 2)
Y = 10 + (var(1) * 4)

[State 660, 3]
type = hitdef
trigger1 = time = 1
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .93
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -13,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -14,5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -15
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 660, b]
type = PosSet
trigger1 = Pos Y >= -1
y = 0

[State 660, c]
type = VelSet
trigger1 = Pos Y >= -1
y = 0

[State 660, 4]
type = ChangeState
trigger1 = Pos Y = 0
value = 52
ctrl = 1

[Statedef 700]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -150 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(36) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100

;---------------------------------------------------------------------------
;Basic Throw - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 670
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1   
sparkxy = -5, -73
sprpriority = 1       ;Draw in front of p2
p1facing = ifelse(command = "holdfwd",1,-1)
p2facing = 1
hitsound = S5,4
p1stateno = 810      
p2stateno = 820       
fall = 1              ;Force p2 into falling down

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------
; Throw - throwing the opponent
[Statedef 810]
type = A
physics = N
movetype = I
ctrl = 0

[State 810, f]
type = PlayerPush
trigger1 = 1
value = 0

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(-5*const(size.xscale)),ceil(-50*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 810, e]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 810, a]
type = ChangeAnim
trigger1 = time = 0
value = 680

[State 810, c]
type = VelSet
trigger1 = AnimElem = 1
x = 0
y = 0

[State 810, 2]
type = TargetBind
trigger1 = AnimElem = 1
pos = 26, -89
time = 9

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 2
pos = 25, -61
time = 6

[State 810, 4]
type = VelSet
trigger1 = AnimElem = 2
x = 1.3
y = -5

[State 810, 5]
type = TargetBind
trigger1 = AnimElem = 3
pos = 27, -89
time = 6

[State 810, 6]
type = TargetBind
trigger1 = AnimElem = 4
pos = 3, -130
time = 36

[State 810, 7]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 4
volume = 255
volumescale = 255
channel = 0

[State 810, 8]
type = VelSet
trigger1 = AnimElem = 23
x = 0
y = 0

[State 810, b]
type = TargetBind
trigger1 = AnimElem = 23
pos = 41, -75
time = 5

[State 810, 10]
type = PlaySnd
trigger1 = AnimElem = 25
value = s5+var(49),2

[State 810, f]
type = PlaySnd
trigger1 = AnimElem = 25
value = 3, 10
volume = 255
volumescale = 255
channel = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = AnimElem = 25
anim = 8004
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 810, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 25
value = -98 + (var(9) * 50)

[State 810, 12]
type = TargetVelSet
trigger1 = AnimElem = 26
x = 0
y = 15

[State 810, 13]
type = TargetState
trigger1 = AnimElem = 26
value = 821

[State 810, 13]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211
ctrl = 1

;---------------------------
; Thrown by normal throw
[Statedef 820]
type = A
physics = N
movetype = H
ctrl = 0

[State 820, a]
type = ScreenBound
trigger1 = 1
value = 0

[State 820, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 681

; Part 2
[Statedef 821]
type = A
movetype = H
physics = N
ctrl = 0

[State 821, 2]
type = SelfState
triggerall = time > 10
trigger1 = Pos Y > -1
value = 5110

[State 0, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4


[State 821, 3]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

;---------------------------------------------------------
; Air Throw
[Statedef 850]
type = A
physics = A
movetype = A
ctrl = 0
anim = 671

[State 850, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, NT          ;Attributes: Standing, Normal Throw
hitflag = A          
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1    
sparkxy = -5, -67
sprpriority = 1       ;Draw in front of p2
p1facing = ifelse(command = "holdfwd",1,-1)
p2facing = 1
hitsound = S5,4
p1stateno = 810      
p2stateno = 820      
fall = 1              ;Force p2 into falling down

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 850, 2]
type = ChangeState
Trigger1 = time = 3
value = 50
ctrl = 1


;==========================================================================
; SPECIALS

;--------------------------------------------------------------------------
; Jab Repeating Punch
[Statedef 1000]
type = S
physics = N
movetype = A
ctrl = 0
anim = 1000
velset = 0, 0
poweradd = 50

[State 1000, b]
type = Explod
triggerall = Pos Y >= 0
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 1]
type = VelSet
trigger1 = AnimElem = 2
y = 0
x = 4.3

[State 1000, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 25,0
getpower = 30,0
givepower = 20,0
pausetime = 3,5
guard.pausetime = 3,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -12.8,0
guard.velocity = -10
air.velocity = -12,-5
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, 2a]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 25,0
getpower = 30,0
givepower = 20,0
pausetime = 3,5
guard.pausetime = 3,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -12.8,0
guard.velocity = -10
air.velocity = -7,0
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State 1000, 3]
type = HitDef
trigger1 = AnimElem = 11
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 35,1
getpower = 31,0
givepower = 20,0
pausetime = 7,9
guard.pausetime = 7,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 14
guard.hittime = 17
guard.velocity = -13
yaccel = .99
ground.velocity = -9,-20
ground.cornerpush.veloff = -4
air.velocity = -10,-20
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 1+4

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
value = 3, 9
volume = 255
volumescale = 255
channel = 0

[State 1000, 5]
type = PlaySnd
trigger1 = AnimElem = 13
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 1000, 6]
type = VelSet
trigger1 = AnimElem = 13
x = 3
y = -7.5

[State 1000, 5]
type = StateTypeSet
trigger1 = AnimElem = 13 = 2
physics = A

[State 1000, 6]
type = VelSet
trigger1 = AnimElem = 14
x = 0

[State 620, ChangeState]
type = ChangeState
triggerall = animtime = 0
trigger1 = pos y >= 0
value = 52
ctrl = 1


;--------------------------------------------------------------------------
; Short Repeating Punch
[Statedef 1010]
type = S
physics = N
movetype = A
ctrl = 0
anim = 1010
velset = 0, 0
poweradd = 100


[State 1000, b]
type = Explod
triggerall = Pos Y >= 0
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1


[State 1010, 1]
type = VelSet
trigger1 = AnimElem = 2
y = 0
x = 4.5

[State 1010, 2]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 25,0
getpower = 30,0
givepower = 20,0
pausetime = 3,5
guard.pausetime = 3,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -12.8,0
guard.velocity = -10
air.velocity = -12,-5
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1010, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 25,0
getpower = 30,0
givepower = 20,0
pausetime = 3,5
guard.pausetime = 3,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -12.8,0
guard.velocity = -10
air.velocity = -12,-5
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State 1010, 3]
type = HitDef
trigger1 = AnimElem = 15
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 35,1
getpower = 31,0
givepower = 20,0
pausetime = 7,9
guard.pausetime = 7,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 14
guard.hittime = 17
yaccel = .99
ground.velocity = -9,-22
guard.velocity = -13
ground.cornerpush.veloff = -4
air.velocity = -10,-22
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 1+4

[State 1010, 4]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 10
value = 3, 9
volume = 255
volumescale = 255
channel = 0

[State 1010, 5]
type = PlaySnd
trigger1 = AnimElem = 15
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 1010, 6]
type = VelSet
trigger1 = AnimElem = 17
x = 3
y = -7.5

[State 1010, 5]
type = StateTypeSet
trigger1 = AnimElem = 17 = 2
physics = A

[State 1010, 6]
type = VelSet
trigger1 = AnimElem = 18
x = 0

[State 620, ChangeState]
type = ChangeState
triggerall = animtime = 0
trigger1 = pos y >= 0
value = 52
ctrl = 1

;--------------------------------------------------------------------------
; Fierce Repeating Punch
[Statedef 1020]
type = S
physics = N
movetype = A
ctrl = 0
anim = 1020
velset = 0, 0
poweradd = 120


[State 1000, b]
type = Explod
triggerall = Pos Y >= 0
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1020, 1]
type = VelSet
trigger1 = AnimElem = 2
y = 0
x = 4.8

[State 1020, 2]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 25,0
getpower = 30,0
givepower = 20,0
pausetime = 3,5
guard.pausetime = 3,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -10.8,0
guard.velocity = -10
air.velocity = -12,-5
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 5
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 5
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1020, 2a]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 14
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 25,0
getpower = 30,0
givepower = 20,0
pausetime = 3,5
guard.pausetime = 3,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -10.8,0
guard.velocity = -10
air.velocity = -12,-5
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State 1020, 3]
type = HitDef
trigger1 = AnimElem = 18
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 35,1
getpower = 31,0
givepower = 20,0
pausetime = 7,9
guard.pausetime = 7,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 14
guard.hittime = 17
yaccel = .99
ground.velocity = -9,-26
guard.velocity = -13
ground.cornerpush.veloff = -4
air.velocity = -10,-26
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 1+4

[State 1020, 4]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 10
trigger4 = AnimElem = 14
value = 3, 9
volume = 255
volumescale = 255
channel = 0

[State 1020, 5]
type = PlaySnd
trigger1 = AnimElem = 18
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 1020, 6]
type = VelSet
trigger1 = AnimElem = 20
x = 3
y = -7.5

[State 1020, 5]
type = StateTypeSet
trigger1 = AnimElem = 20 = 2
physics = A

[State 1020, 6]
type = VelSet
trigger1 = AnimElem = 21
x = 0

[State 620, ChangeState]
type = ChangeState
triggerall = animtime = 0
trigger1 = pos y >= 0
value = 52
ctrl = 1

;--------------------------------------------------------------------------
; Rising Repeating Punch
[Statedef 1030]
type = A
physics = N
movetype = A
anim = 1030
ctrl = 0
velset = 0, 0

[State 1030, a]
type = VarSet
trigger1 = time = 0
v = 0
value = 0

[State 1030, b]
type = VarAdd
trigger1 = command = "x" || command = "y" || command = "z"
v = 0
value = 1

[State 1030, 1]
type = Width
trigger1 = 1
value = -15, 10

[State 1000, b]
type = Explod
triggerall = Pos Y >= 0
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1030, 3]
type = VelSet
trigger1 = Anim = 1030
trigger1 = AnimElem = 3
x = 6.5
y = -7

[State 1030, 4]
type = HitDef
trigger1 = Anim = 1030 && AnimElem = 2
trigger2 = Anim = 1030 && AnimElem = 7
trigger3 = Anim = 1031 && AnimElem = 3
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 20, 4
pausetime = 7, 7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 20
guard.velocity = -14
yaccel = 0.89
ground.velocity = -3.5, -12
airguard.velocity = -10.5,3
air.velocity = -3.5, -10

[State 1030, c]
type = ChangeAnim
trigger1 = Anim = 1030
trigger1 = AnimTime = 0
value = ifelse((var(0) >= 3) || (var(13) = 1), 1031, 1032)

[State 1030, 5]
type = HitDef
trigger1 = Anim = 1031 && AnimElem = 8
trigger2 = Anim = 1032 && AnimElem = 4
attr = A, SA
hitflag = SCA
guardflag = MA
Animtype = Back
damage = 80, 4
pausetime = 10, 10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.slidetime = 12
ground.hittime = 14
air.hittime = 3
guard.velocity = -14
air.velocity = 0, 14
yaccel = 0.99
airguard.velocity = -10.5,3
fall = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 5
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 5
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1030, 6]
type = PlaySnd
trigger1 = Anim = 1030 && AnimElem = 4
trigger2 = Anim = 1030 && AnimElem = 7
trigger3 = Anim = 1031 && AnimElem = 3
value = 3, 9
volume = 255
volumescale = 255
channel = 0

[State 1030, 7]
type = PlaySnd
trigger1 = Anim = 1031 && AnimElem = 8
trigger2 = Anim = 1032 && AnimElem = 4
value = 3, 10
volume = 255
volumescale = 255
channel = 0

[State 1030, 8]
type = VelSet
trigger1 = Anim = 1031 && AnimElem = 6
trigger2 = Anim = 1032 && AnimElem = 2
x = 0
y = 0

[State 1030, 9]
type = ChangeState
trigger1 = Anim = 1031 || Anim = 1032
trigger1 = AnimTime = 0
value = 1221 

;--------------------------------------------------------------------------
; Diving Punch Short
[Statedef 1040]
type = A
physics = N
movetype = A
anim = 1042
velset = 0, -5
ctrl = 0

[State 1040, a]
type = PlaySnd
trigger1 = time = 0
value = 3, 9
volume = 255
volumescale = 255
channel = 0

[State 1040, b]
type = ChangeState
triggerall = time > 5
trigger1 = command = "a" || command = "b" || command = "c"
trigger2 = var(13) = 1
trigger2 = random <= 30
value = 1045

[State 1000, b]
type = Explod
triggerall = Pos Y >= 0
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1040, 2]
type = VelSet
trigger1 = time = 0
y = -5

[State 1040, 3]
type = ChangeAnim
trigger1 = time > 25
value = 1041
persistent = 0

[State 1040, 4]
type = VelSet
trigger1 = time > 25
y = 0
persistent = 0

[State 1040, 5]
type = ChangeAnim
trigger1 = time > 42
value = 1040

[State 1040, 6]
type = VelSet
trigger1 = time > 42
x = 13.5
y = 13

[State 1040, b]
type = PlaySnd
trigger1 = time = 42
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 1040, c]
type = Afterimage
trigger1 = time = 42
time = 99999999
framegap = 1
length = 8
palbright = 0,0,0
palcontrast = 224,256,256
paladd = 0,0,0
palmul = 1.0,1.0,1.0

[State 1040, 7]
type = HitDef
triggerall = HitCount < 3
trigger1 = anim = 1040
trigger1 = ifelse(moveguarded, (time % 3) = 1, 1)
attr = A, SA
hitflag = MAF
guardflag = HA
animtype = hard
damage = 35, 4
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = high
ground.slidetime = 13
ground.hittime = 13
guard.hittime = 13
ground.velocity = -12, -6
guard.velocity = -14	
air.hittime = 8
yaccel = .88
air.velocity = -15,-8
airguard.velocity = -10.5,3
guard.cornerpush.veloff = -16
fall = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1040, 8]
type = AfterImageTime
trigger1 = Pos Y >= -2
value = 1

[State 1040, 9]
type = PosSet
triggerall = Anim = 1040
trigger1 = Pos Y >= -2
y = 0

[State 1040, 10]
type = ChangeState
triggerall = anim = 1040
trigger1 = Pos Y >= -2
value = 1061
ctrl = 1

; Cancelled Diving Punch (MvC2 mode only)
[Statedef 1045]
type = A
movetype = A
physics = N
ctrl = 0
anim = 1041
velset = 0, 0
;velset = 11, 13

[State 1045, End Spin]
type = ChangeAnim
trigger1 = time = 15
value = 1040

[State 1045, Dive Downward]
type = VelSet
trigger1 = time = 15
x = 13.5
y = 13

[State 1045, a]
type = Playsnd
trigger1 = time = 15
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 1045, 1]
type = AfterImage
trigger1 = time = 15
time = 99999999
framegap = 1
length = 8
palbright = 0,0,0
palcontrast = 224,256,256
paladd = 0,0,0
palmul = 1.0,1.0,1.0

[State 1045, 7]
type = HitDef
triggerall = HitCount < 3
trigger1 = anim = 1040
trigger1 = ifelse(moveguarded, (time % 3) = 1, 1)
attr = A, SA
hitflag = MAFD
guardflag = HA
animtype = hard
damage = 35, 4
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = high
ground.slidetime = 13
ground.hittime = 13
guard.hittime = 13
ground.velocity = -12, -6
guard.velocity = -14	
air.hittime = 8
yaccel = .88
air.velocity = -15,-8
airguard.velocity = -10.5,3
guard.cornerpush.veloff = -16
fall = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1045, 8]
type = AfterImageTime
trigger1 = Pos Y >= -2
value = 1

[State 1045, 9]
type = PosSet
trigger1 = Pos Y >= -2
y = 0

[State 1045, 10]
type = ChangeState
trigger1 = Pos Y >= -2
value = 1061
ctrl = 1

;--------------------------------------------------------------------------
; Diving Punch Forward
[Statedef 1050]
type = A
physics = N
movetype = A
anim = 1042
velset = 0, -5
ctrl = 0

[State 1050, a]
type = PlaySnd
trigger1 = time = 0
value = 3, 9
volume = 255
volumescale = 255
channel = 0

[State 1050, b]
type = ChangeState
triggerall = time > 5
trigger1 = command = "a" || command = "b" || command = "c"
trigger2 = var(13) = 1
trigger2 = random <= 30
value = 1045

[State 1000, b]
type = Explod
triggerall = Pos Y >= 0
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1050, 2]
type = VelSet
trigger1 = time = 0
y = -6

[State 1050, 3]
type = ChangeAnim
trigger1 = time > 32
value = 1041
persistent = 0

[State 1050, 4]
type = VelSet
trigger1 = time > 32
y = 0
persistent = 0

[State 1050, 5]
type = ChangeAnim
trigger1 = time > 45
value = 1040

[State 1050, 6]
type = VelSet
trigger1 = time > 45
x = 13.5
y = 13

[State 1050, b]
type = PlaySnd
trigger1 = time = 45
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 1050, c]
type = Afterimage
trigger1 = time = 45
time = 99999999
framegap = 1
length = 8
palbright = 0,0,0
palcontrast = 224,256,256
paladd = 0,0,0
palmul = 1.0,1.0,1.0

[State 1050, 7]
type = HitDef
triggerall = HitCount < 3
trigger1 = anim = 1040
trigger1 = ifelse(moveguarded, (time % 3) = 1, 1)
attr = A, SA
hitflag = MAF
guardflag = HA
animtype = hard
damage = 35, 4
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = high
ground.slidetime = 13
ground.hittime = 13
guard.hittime = 13
ground.velocity = -12, -6
guard.velocity = -14	
air.hittime = 8
yaccel = .88
air.velocity = -15,-8
airguard.velocity = -10.5,3
guard.cornerpush.veloff = -16
fall = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1050, 8]
type = AfterImageTime
trigger1 = Pos Y >= -2
value = 1

[State 1050, 9]
type = PosSet
triggerall = Anim = 1040
trigger1 = Pos Y >= -2
y = 0

[State 1050, 10]
type = ChangeState
triggerall = anim = 1040
trigger1 = Pos Y >= -2
value = 1061
ctrl = 1

;--------------------------------------------------------------------------
; Diving Punch Roundhouse
[Statedef 1060]
type = A
physics = N
movetype = A
anim = 1042
velset = 0, -5
ctrl = 0

[State 1060, a]
type = PlaySnd
trigger1 = time = 0
value = 3, 9
volume = 255
volumescale = 255
channel = 0

[State 1060, b]
type = ChangeState
triggerall = time > 5
trigger1 = command = "a" || command = "b" || command = "c"
trigger2 = var(13) = 1
trigger2 = random <= 30
value = 1045

[State 1000, b]
type = Explod
triggerall = Pos Y >= 0
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1060, 2]
type = VelSet
trigger1 = time = 0
y = -7

[State 1060, 3]
type = ChangeAnim
trigger1 = time > 35
value = 1041
persistent = 0

[State 1060, 4]
type = VelSet
trigger1 = time > 35
y = 0
persistent = 0

[State 1060, 5]
type = ChangeAnim
trigger1 = time > 48
value = 1040

[State 1060, 6]
type = VelSet
trigger1 = time > 48
x = 13.5
y = 13

[State 1060, b]
type = PlaySnd
trigger1 = time = 48
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 1060, c]
type = Afterimage
trigger1 = time = 48
time = 99999999
framegap = 1
length = 8
palbright = 0,0,0
palcontrast = 224,256,256
paladd = 0,0,0
palmul = 1.0,1.0,1.0

[State 1060, 7]
type = HitDef
triggerall = HitCount < 3
trigger1 = anim = 1040
trigger1 = ifelse(moveguarded, (time % 3) = 1, 1)
attr = A, SA
hitflag = MAF
guardflag = HA
animtype = hard
damage = 35, 4
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = high
ground.slidetime = 13
ground.hittime = 13
guard.hittime = 13
ground.velocity = -12, -6
guard.velocity = -14	
air.hittime = 8
yaccel = .88
air.velocity = -15,-8
airguard.velocity = -10.5,3
guard.cornerpush.veloff = -16
fall = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),3
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1060, 8]
type = AfterImageTime
trigger1 = Pos Y >= -2
value = 1

[State 1060, 9]
type = PosSet
triggerall = Anim = 1040
trigger1 = Pos Y >= -2
y = 0

[State 1060, 10]
type = ChangeState
triggerall = anim = 1040
trigger1 = Pos Y >= -2
value = 1061
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 1061]
type    = S
physics = S
ctrl = 0
anim = 5190

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, Helper]
type = Helper
trigger1 = time = 0
stateno = 8200
pos = 0,-10

[State 52, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------
; Power Drain
[Statedef 1070]
type = A
physics = N
movetype = A
velset = 0, 0
ctrl = 0
anim = 1050

[State 1070, a]
type = Width
trigger1 = 1
value = 25, -5

[State 1070, 1]
type = Explod
triggerall = Pos Y >= 0
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1070, 2]
type = Afterimage
trigger1 = AnimElem = 3
time = 35
framegap = 1
length = 8
palbright = 0,0,0
palcontrast = 224,256,256
paladd = 0,0,0
palmul = 1.0,1.0,1.0

[State 1070, 3]
type = VelSet
trigger1 = AnimElem = 3
x = 8.5

[State 1070, 4]
type = HitDef
triggerall = Pos Y = 0
trigger1 = AnimElem = 3
attr = A, ST
hitflag = M
guardflag = 
priority = 1, Miss
sparkno = -1
sparkxy = -5, -63
hitsound = S5, 4
p2facing = -1
ID = 8338
p1stateno = 1100
p2stateno = 1080
forcestand = 1

[State 1070, 4a]
type = HitDef
triggerall = Pos Y < 0
trigger1 = AnimElem = 3
attr = A, ST
hitflag = AF
guardflag = 
priority = 1, Miss
sparkno = -1
sparkxy = -5, -63
hitsound = S5, 4
p2facing = -1
p1stateno = 1100
p2stateno = 1080
forcestand = 1

[State 1070, 5]
type = StateTypeSet
trigger1 = AnimElem = 9
physics = S

[State 1070, 6]
type = AfterImageTime
trigger1 = AnimTime = 0
value = 1

[State 1070, 7]
type = ChangeState
triggerall = animtime = 0
trigger1 = pos y >= 0
value = 0
ctrl =  1

[State 1070, 7]
type = ChangeState
triggerall = statetype = A
trigger1 = animtime = 0
value = 1221

; Hit by Power Drain
[Statedef 1080]
type = A
physics = N
movetype = H
velset = 0, 0
sprpriority = 0

[State 1080, a]
type = ScreenBound
trigger1 = Vel Y = 0
value = 0

[State 1080, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 1070

; Part 2
[Statedef 1081]
type = A
movetype = H
physics = N
ctrl = 0

[State 1081, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -(const(size.mid.pos.y))

[State 1081, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5050

[State 1081, 2]
type = Gravity
trigger1 = 1

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = 0.6

[State 1081, 3]
type = NotHitBy
triggerall = Vel Y > 0
triggerall = enemyNear, var(6) = 0 && enemyNear, var(0) != 1
trigger1 = Pos Y >= 0
value = SCA
time = const(data.liedown.time) + 30

[State 1081, 4]
type = NotHitBy
triggerall = enemyNear, var(6) = 0 && enemyNear, var(0) != 1
trigger1 = Pos Y < 0
value = SCA
time = 3

[State 912, EnvShake]
type = EnvShake
trigger1 = pos y >= 0 && vel y > 0
time = 15
freq = 70
ampl = -4


[State 1081, 5]
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

; Part 2 w/o NotHitBy's
[Statedef 1082]
type = A
movetype = H
physics = N
ctrl = 0

[State 1082, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -(const(size.mid.pos.y))

[State 1082, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5050

[State 1082, 2]
type = Gravity
trigger1 = 1

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = 0.6

[State 1082, 3]
type = HitBy
trigger1 = 1
value = S,HA
time = const(data.liedown.time) + 30

[State 1082, 4]
type = NotHitBy
trigger1 = 1
value = ,NA, SA, AP, AT
time = const(data.liedown.time) + 30

[State 912, EnvShake]
type = EnvShake
trigger1 = pos y >= 0 && vel y > 0
time = 15
freq = 70
ampl = -4


[State 1082, 5]
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

; Part 2 w/o NotHitBy's and no recovery
[Statedef 1083]
type = A
movetype = H
physics = N
ctrl = 0

[State 1083, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -(const(size.mid.pos.y))

[State 1083, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5050

[State 1083, 2]
type = Gravity
trigger1 = 1

[State 912, EnvShake]
type = EnvShake
trigger1 = pos y >= 0 && vel y > 0
time = 15
freq = 70
ampl = -4


[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = 0.6

[State 1083, 3]
type = HitBy
trigger1 = 1
value = S,HA
time = const(data.liedown.time) + 30

[State 1083 4]
type = NotHitBy
trigger1 = 1
value = ,NA, SA, AP, AT
time = const(data.liedown.time) + 30

[State 1083, 5]
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

; Heart Spawner
[Statedef 1090]
type = S
physics = N
movetype = I
anim = 9999

[State 1090, 1]
type = VarRandom
trigger1 = (time % 2) = 0
v = 0
range = -2, 2

[State 1090, 2]
type = VarRandom
trigger1 = (time % 2) = 0
v = 1
range = -2, 2

[State 1090, 3]
type = Explod
trigger1 = (time % 2) = 1
anim = 196
postype = p1
pos = 0, 0 
bindtime = 1
removetime = 20
vel = var(0), var(1)
ontop = 1

[State 1090, 4]
type = DestroySelf
trigger1 = parent, animElem = 23
trigger2 = time > 6000

;----------------------------------------
; Power Drain effect states (here's where it gets fun)
;
; Throw state
[Statedef 1100]
type = A
physics = N
movetype = I
velset = 0, 0
anim = 1060
sprpriority = 1

[State 1100, Activate Suppression]
type = VarSet
trigger1 = time = 0
v = 36
value = 1

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(-5*const(size.xscale)),ceil(-50*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 1100, a]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1100, b]
type = PlayerPush
trigger1 = 1
value = 0

[State 1100, c]
type = TargetLifeAdd
trigger1 = AnimElem = 23
value = -80

[State 1100, d]
type = VarSet
trigger1 = time = 0
v = 9
value = 0

[State 1100, f]
type = VarSet
trigger1 = time = 0
v = 1
value = 0

[State 1100, g]
type = VarSet
trigger1 = time = 0
v = 2
value = 0

[State 1100, h]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 1100, i]
type = TargetPowerAdd
trigger1 = AnimElem = 23
value = 90

[State 1100, j]
type = PowerAdd
triggerall = PrevStateNo != 2030
triggerall = (var(5) && var(59)) || var(6)
trigger1 = AnimElem = 23
value = 100

[State 1100, k]
type = VarSet
trigger1 = time = 0
v = 0
value = ifelse(PrevStateNo = 2030, 1, 0)

[State 1100, l]
type = VarSet
trigger1 = time = 0
v = 25
value = ifelse(PrevStateNo = 2030, 1, 0)

[State 1100, 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 23, -99

[State 1100, 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = -24, -101

[State 1100, 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = -31, -103

[State 1100, 4]
type = TargetBind
trigger1 = AnimElem = 4
pos = -50, -99

[State 1100, 5]
type = TargetBind
trigger1 = AnimElem = 6
pos = -39, -87

[State 1100, 6]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3, 13
volume = 255
volumescale = 255
channel = 0

[State 1100, 6]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3, 17
volume = 255
volumescale = 255


[State 1100, 7]
type = Helper
trigger1 = AnimElem = 6
name = "Heart Spawner"
pos = -29, -86
postype = p1
stateno = 1090

[State 1100, 8]
type = TargetBind
trigger1 = AnimElem = 7
pos = -41, -90

[State 1100, 9]
type = TargetBind
trigger1 = AnimElem = 8
pos = -28, -88

[State 1100, 10]
type = TargetBind
trigger1 = AnimElem = 23
pos = -54, -90

[State 1100, 10a]
type = TargetState
trigger1 = AnimTime = 0
trigger1 = PrevStateNo != 2030
trigger1 = !var(6)
value = 1081

[State 1100, 10b]
type = TargetState
trigger1 = AnimTime = 0
trigger1 = PrevStateNo != 2030
trigger1 = var(6)
value = 1082

[State 1100, 10c]
type = TargetState
trigger1 = AnimTime = 0
trigger1 = PrevStateNo = 2030
value = 1083

[State 1100, 11]
type = TargetVelSet
trigger1 = AnimTime = 0
x = -15
y = -8

[State 1100, 13]
type = Turn
trigger1 = AnimTime = 0

[State 1100, 14]
type = ChangeState 
trigger1 = AnimTime = 0
value = 1110

;-----------------
; Power Drain - decide power
[Statedef 1110]
type = A
movetype = I
physics = N
anim = 48

[State 1100, z]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1110, 1]
type = ChangeState
trigger1 = var(59) > 0
value = 1130

[State 1110, 2]
type = VarRandom
trigger1 = time = 0
v = 12
range = 0, 1000

[State 1110, 3]
type = ChangeState
triggerall = time = 1
trigger1 = enemynear, name = "Captain America"
trigger2 = enemynear, name = "Colossus"
trigger3 = enemynear, name = "Guile"
trigger4 = enemynear, name = "Doctor Doom"
trigger5 = enemynear, name = "Iceman"
trigger6 = enemynear, name = "Iron Man"
trigger7 = enemynear, name = "Jin"
trigger8 = enemynear, name = "Magneto"
trigger9 = enemynear, name = "Omega Red"
trigger10 = enemynear, name = "Roll"
trigger11 = enemynear, name = "Ruby Heart"
trigger12 = enemynear, name = "Sakura"
trigger13 = enemynear, name = "Silver Samuari"
trigger14 = enemynear, name = "Spiral"
trigger15 = enemynear, name = "Tron Bonne"
trigger16 = enemynear, name = "War Machine"
trigger17 = enemynear, name = "Zangief"
trigger18= enemynear, name = "Norimaro"
value = 1111

[State 1110, 4]
type = ChangeState
triggerall = time = 1
trigger1 = enemynear, name = "Anakaris"
trigger2 = enemynear, name = "B.B.Hood"
trigger3 = enemynear, name = "Dan"
trigger4 = enemynear, name = "Dhalsim"
trigger5 = enemynear, name = "Jill"
trigger6 = enemynear, name = "Servbot"
trigger7 = enemynear, name = "Shuma-Gorath"
value = 1112

[State 1110, 5]
type = ChangeState
triggerall = time = 1
trigger1 = enemynear, name = "Akuma"
trigger2 = enemynear, name = "Amingo"
trigger3 = enemynear, name = "M.Bison"
trigger4 = enemynear, name = "Blackheart"
trigger5 = enemynear, name = "Cable"
trigger6 = enemynear, name = "Captain Commando"
trigger7 = enemynear, name = "Charlie"
trigger8 = enemynear, name = "Cyclops"
trigger9 = enemynear, name = "Ken"
trigger10 = enemynear, name = "Megaman"
trigger11 = enemynear, name = "Ryu"
trigger12 = enemynear, name = "Sabretooth"
trigger13 = enemynear, name = "Thanos"
trigger14 = enemynear, name = "Venom"
value = 1113

[State 1110, 6]
type = ChangeState
triggerall = time = 1
trigger1 = enemynear, name = "Cammy"
trigger2 = enemynear, name = "Chun-Li"
trigger3 = enemynear, name = "Felicia"
trigger4 = enemynear, name = "Gambit"
trigger5 = enemynear, name = "Hayato"
trigger6 = enemynear, name = "Marrow"
trigger7 = enemynear, name = "Morrigan"
trigger8 = enemynear, name = "Psylocke"
trigger9 = enemynear, name = "Sonson"
trigger10 = enemynear, name = "Spider-man"
trigger11 = enemynear, name = "Storm"
trigger12 = enemynear, name = "Strider Hiryu"
trigger13 = enemynear, name = "Wolverine"
value = 1114

[State 1110, 7]
type = ChangeState
triggerall = time = 1
trigger1 = enemynear, name = "Hulk"
trigger2 = enemynear, name = "Juggernaut"
trigger3 = enemynear, name = "Sentinel"
value = 1115


[State 1110, 4]
type = ChangeState
triggerall = time = 1
triggerall = enemynear, name != "Captain America"
triggerall = enemynear, name != "Colossus"
triggerall = enemynear, name != "Guile"
triggerall = enemynear, name != "Doctor Doom"
triggerall = enemynear, name != "Iceman"
triggerall = enemynear, name != "Iron Man"
triggerall = enemynear, name != "Jin"
triggerall = enemynear, name != "Magneto"
triggerall = enemynear, name != "Omega Red"
triggerall = enemynear, name != "Roll"
triggerall = enemynear, name != "Ruby Heart"
triggerall = enemynear, name != "Sakura"
triggerall = enemynear, name != "Silver Samuari"
triggerall = enemynear, name != "Spiral"
triggerall = enemynear, name != "Tron Bonne"
triggerall = enemynear, name != "War Machine"
triggerall = enemynear, name != "Zangief"
triggerall= enemynear, name != "Norimaro"
triggerall = enemynear, name != "Anakaris"
triggerall = enemynear, name != "B.B.Hood"
triggerall = enemynear, name != "Dan"
triggerall = enemynear, name != "Dhalsim"
triggerall = enemynear, name != "Jill"
triggerall = enemynear, name != "Servbot"
triggerall = enemynear, name != "Shuma-Gorath"
triggerall = enemynear, name != "Akuma"
triggerall = enemynear, name != "Amingo"
triggerall = enemynear, name != "M.Bison"
triggerall = enemynear, name != "Blackheart"
triggerall = enemynear, name != "Cable"
triggerall = enemynear, name != "Captain Commando"
triggerall = enemynear, name != "Charlie"
triggerall = enemynear, name != "Cyclops"
triggerall = enemynear, name != "Ken"
triggerall = enemynear, name != "Megaman"
triggerall = enemynear, name != "Ryu"
triggerall = enemynear, name != "Sabretooth"
triggerall = enemynear, name != "Thanos"
triggerall = enemynear, name != "Venom"
triggerall = enemynear, name != "Cammy"
triggerall = enemynear, name != "Chun-Li"
triggerall = enemynear, name != "Felicia"
triggerall = enemynear, name != "Gambit"
triggerall = enemynear, name != "Hayato"
triggerall = enemynear, name != "Marrow"
triggerall = enemynear, name != "Morrigan"
triggerall = enemynear, name != "Psylocke"
triggerall = enemynear, name != "Sonson"
triggerall = enemynear, name != "Spider-man"
triggerall = enemynear, name != "Storm"
triggerall = enemynear, name != "Strider Hiryu"
triggerall = enemynear, name != "Wolverine"
triggerall = enemynear, name != "Hulk"
triggerall = enemynear, name != "Juggernaut"
triggerall = enemynear, name != "Sentinel"
triggerall = enemynear, name != "Rogue"
trigger1 = var(12) >= 0
trigger1 = var(12) < 200
value = 1111


[State 1110, 4]
type = ChangeState
triggerall = time = 1
triggerall = enemynear, name != "Captain America"
triggerall = enemynear, name != "Colossus"
triggerall = enemynear, name != "Guile"
triggerall = enemynear, name != "Doctor Doom"
triggerall = enemynear, name != "Iceman"
triggerall = enemynear, name != "Iron Man"
triggerall = enemynear, name != "Jin"
triggerall = enemynear, name != "Magneto"
triggerall = enemynear, name != "Omega Red"
triggerall = enemynear, name != "Roll"
triggerall = enemynear, name != "Ruby Heart"
triggerall = enemynear, name != "Sakura"
triggerall = enemynear, name != "Silver Samuari"
triggerall = enemynear, name != "Spiral"
triggerall = enemynear, name != "Tron Bonne"
triggerall = enemynear, name != "War Machine"
triggerall = enemynear, name != "Zangief"
triggerall= enemynear, name != "Norimaro"
triggerall = enemynear, name != "Anakaris"
triggerall = enemynear, name != "B.B.Hood"
triggerall = enemynear, name != "Dan"
triggerall = enemynear, name != "Dhalsim"
triggerall = enemynear, name != "Jill"
triggerall = enemynear, name != "Servbot"
triggerall = enemynear, name != "Shuma-Gorath"
triggerall = enemynear, name != "Akuma"
triggerall = enemynear, name != "Amingo"
triggerall = enemynear, name != "M.Bison"
triggerall = enemynear, name != "Blackheart"
triggerall = enemynear, name != "Cable"
triggerall = enemynear, name != "Captain Commando"
triggerall = enemynear, name != "Charlie"
triggerall = enemynear, name != "Cyclops"
triggerall = enemynear, name != "Ken"
triggerall = enemynear, name != "Megaman"
triggerall = enemynear, name != "Ryu"
triggerall = enemynear, name != "Sabretooth"
triggerall = enemynear, name != "Thanos"
triggerall = enemynear, name != "Venom"
triggerall = enemynear, name != "Cammy"
triggerall = enemynear, name != "Chun-Li"
triggerall = enemynear, name != "Felicia"
triggerall = enemynear, name != "Gambit"
triggerall = enemynear, name != "Hayato"
triggerall = enemynear, name != "Marrow"
triggerall = enemynear, name != "Morrigan"
triggerall = enemynear, name != "Psylocke"
triggerall = enemynear, name != "Sonson"
triggerall = enemynear, name != "Spider-man"
triggerall = enemynear, name != "Storm"
triggerall = enemynear, name != "Strider Hiryu"
triggerall = enemynear, name != "Wolverine"
triggerall = enemynear, name != "Hulk"
triggerall = enemynear, name != "Juggernaut"
triggerall = enemynear, name != "Sentinel"
triggerall = enemynear, name != "Rogue"
trigger1 = var(12) >= 200
trigger1 = var(12) < 400
value = 1112

[State 1110, 4]
type = ChangeState
triggerall = time = 1
triggerall = enemynear, name != "Captain America"
triggerall = enemynear, name != "Colossus"
triggerall = enemynear, name != "Guile"
triggerall = enemynear, name != "Doctor Doom"
triggerall = enemynear, name != "Iceman"
triggerall = enemynear, name != "Iron Man"
triggerall = enemynear, name != "Jin"
triggerall = enemynear, name != "Magneto"
triggerall = enemynear, name != "Omega Red"
triggerall = enemynear, name != "Roll"
triggerall = enemynear, name != "Ruby Heart"
triggerall = enemynear, name != "Sakura"
triggerall = enemynear, name != "Silver Samuari"
triggerall = enemynear, name != "Spiral"
triggerall = enemynear, name != "Tron Bonne"
triggerall = enemynear, name != "War Machine"
triggerall = enemynear, name != "Zangief"
triggerall= enemynear, name != "Norimaro"
triggerall = enemynear, name != "Anakaris"
triggerall = enemynear, name != "B.B.Hood"
triggerall = enemynear, name != "Dan"
triggerall = enemynear, name != "Dhalsim"
triggerall = enemynear, name != "Jill"
triggerall = enemynear, name != "Servbot"
triggerall = enemynear, name != "Shuma-Gorath"
triggerall = enemynear, name != "Akuma"
triggerall = enemynear, name != "Amingo"
triggerall = enemynear, name != "M.Bison"
triggerall = enemynear, name != "Blackheart"
triggerall = enemynear, name != "Cable"
triggerall = enemynear, name != "Captain Commando"
triggerall = enemynear, name != "Charlie"
triggerall = enemynear, name != "Cyclops"
triggerall = enemynear, name != "Ken"
triggerall = enemynear, name != "Megaman"
triggerall = enemynear, name != "Ryu"
triggerall = enemynear, name != "Sabretooth"
triggerall = enemynear, name != "Thanos"
triggerall = enemynear, name != "Venom"
triggerall = enemynear, name != "Cammy"
triggerall = enemynear, name != "Chun-Li"
triggerall = enemynear, name != "Felicia"
triggerall = enemynear, name != "Gambit"
triggerall = enemynear, name != "Hayato"
triggerall = enemynear, name != "Marrow"
triggerall = enemynear, name != "Morrigan"
triggerall = enemynear, name != "Psylocke"
triggerall = enemynear, name != "Sonson"
triggerall = enemynear, name != "Spider-man"
triggerall = enemynear, name != "Storm"
triggerall = enemynear, name != "Strider Hiryu"
triggerall = enemynear, name != "Wolverine"
triggerall = enemynear, name != "Hulk"
triggerall = enemynear, name != "Juggernaut"
triggerall = enemynear, name != "Sentinel"
triggerall = enemynear, name != "Rogue"
trigger1 = var(12) >= 400
trigger1 = var(12) < 600
value = 1113

[State 1110, 4]
type = ChangeState
triggerall = time = 1
triggerall = enemynear, name != "Captain America"
triggerall = enemynear, name != "Colossus"
triggerall = enemynear, name != "Guile"
triggerall = enemynear, name != "Doctor Doom"
triggerall = enemynear, name != "Iceman"
triggerall = enemynear, name != "Iron Man"
triggerall = enemynear, name != "Jin"
triggerall = enemynear, name != "Magneto"
triggerall = enemynear, name != "Omega Red"
triggerall = enemynear, name != "Roll"
triggerall = enemynear, name != "Ruby Heart"
triggerall = enemynear, name != "Sakura"
triggerall = enemynear, name != "Silver Samuari"
triggerall = enemynear, name != "Spiral"
triggerall = enemynear, name != "Tron Bonne"
triggerall = enemynear, name != "War Machine"
triggerall = enemynear, name != "Zangief"
triggerall= enemynear, name != "Norimaro"
triggerall = enemynear, name != "Anakaris"
triggerall = enemynear, name != "B.B.Hood"
triggerall = enemynear, name != "Dan"
triggerall = enemynear, name != "Dhalsim"
triggerall = enemynear, name != "Jill"
triggerall = enemynear, name != "Servbot"
triggerall = enemynear, name != "Shuma-Gorath"
triggerall = enemynear, name != "Akuma"
triggerall = enemynear, name != "Amingo"
triggerall = enemynear, name != "M.Bison"
triggerall = enemynear, name != "Blackheart"
triggerall = enemynear, name != "Cable"
triggerall = enemynear, name != "Captain Commando"
triggerall = enemynear, name != "Charlie"
triggerall = enemynear, name != "Cyclops"
triggerall = enemynear, name != "Ken"
triggerall = enemynear, name != "Megaman"
triggerall = enemynear, name != "Ryu"
triggerall = enemynear, name != "Sabretooth"
triggerall = enemynear, name != "Thanos"
triggerall = enemynear, name != "Venom"
triggerall = enemynear, name != "Cammy"
triggerall = enemynear, name != "Chun-Li"
triggerall = enemynear, name != "Felicia"
triggerall = enemynear, name != "Gambit"
triggerall = enemynear, name != "Hayato"
triggerall = enemynear, name != "Marrow"
triggerall = enemynear, name != "Morrigan"
triggerall = enemynear, name != "Psylocke"
triggerall = enemynear, name != "Sonson"
triggerall = enemynear, name != "Spider-man"
triggerall = enemynear, name != "Storm"
triggerall = enemynear, name != "Strider Hiryu"
triggerall = enemynear, name != "Wolverine"
triggerall = enemynear, name != "Hulk"
triggerall = enemynear, name != "Juggernaut"
triggerall = enemynear, name != "Sentinel"
triggerall = enemynear, name != "Rogue"
trigger1 = var(12) >= 600
trigger1 = var(12) < 800
value = 1114

[State 1110, 4]
type = ChangeState
triggerall = time = 1
triggerall = enemynear, name != "Captain America"
triggerall = enemynear, name != "Colossus"
triggerall = enemynear, name != "Guile"
triggerall = enemynear, name != "Doctor Doom"
triggerall = enemynear, name != "Iceman"
triggerall = enemynear, name != "Iron Man"
triggerall = enemynear, name != "Jin"
triggerall = enemynear, name != "Magneto"
triggerall = enemynear, name != "Omega Red"
triggerall = enemynear, name != "Roll"
triggerall = enemynear, name != "Ruby Heart"
triggerall = enemynear, name != "Sakura"
triggerall = enemynear, name != "Silver Samuari"
triggerall = enemynear, name != "Spiral"
triggerall = enemynear, name != "Tron Bonne"
triggerall = enemynear, name != "War Machine"
triggerall = enemynear, name != "Zangief"
triggerall= enemynear, name != "Norimaro"
triggerall = enemynear, name != "Anakaris"
triggerall = enemynear, name != "B.B.Hood"
triggerall = enemynear, name != "Dan"
triggerall = enemynear, name != "Dhalsim"
triggerall = enemynear, name != "Jill"
triggerall = enemynear, name != "Servbot"
triggerall = enemynear, name != "Shuma-Gorath"
triggerall = enemynear, name != "Akuma"
triggerall = enemynear, name != "Amingo"
triggerall = enemynear, name != "M.Bison"
triggerall = enemynear, name != "Blackheart"
triggerall = enemynear, name != "Cable"
triggerall = enemynear, name != "Captain Commando"
triggerall = enemynear, name != "Charlie"
triggerall = enemynear, name != "Cyclops"
triggerall = enemynear, name != "Ken"
triggerall = enemynear, name != "Megaman"
triggerall = enemynear, name != "Ryu"
triggerall = enemynear, name != "Sabretooth"
triggerall = enemynear, name != "Thanos"
triggerall = enemynear, name != "Venom"
triggerall = enemynear, name != "Cammy"
triggerall = enemynear, name != "Chun-Li"
triggerall = enemynear, name != "Felicia"
triggerall = enemynear, name != "Gambit"
triggerall = enemynear, name != "Hayato"
triggerall = enemynear, name != "Marrow"
triggerall = enemynear, name != "Morrigan"
triggerall = enemynear, name != "Psylocke"
triggerall = enemynear, name != "Sonson"
triggerall = enemynear, name != "Spider-man"
triggerall = enemynear, name != "Storm"
triggerall = enemynear, name != "Strider Hiryu"
triggerall = enemynear, name != "Wolverine"
triggerall = enemynear, name != "Hulk"
triggerall = enemynear, name != "Juggernaut"
triggerall = enemynear, name != "Sentinel"
triggerall = enemynear, name != "Rogue"
trigger1 = var(12) >= 800
trigger1 = var(12) <= 1000
value = 1115

[State 1110, 8]
type = ChangeState
trigger1 = time = 2
value = 1221

; Defense power up
[Statedef 1111]
type = A
physics = N
movetype = I

[State 1100, z]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1111, a]
type = DefenceMulSet
trigger1 = time = 0
value = 10

[State 1111, 1]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 1111, 2]
type = VarSet
trigger1 = time = 0
v = 2
value = 1

[State 1111, 3]
type = PlaySnd
trigger1 = time = 0
value = 7, 0
volume = 255
volumescale = 255

[State 1112, 4]
type = Explod
trigger1 = time = 0
anim = 8990
postype = p1
pos = ifelse(facing = 1, -51, 51), -50
scale = 0.4,0.4
facing = ifelse(facing = 1, 1, -1)
removetime = 49
ownpal = 1
ontop = 1
bindtime = -1


[State 1113, 5]
type = Helper
trigger1 = time = 0
name = "Timer"
postype = p1
pos = -42, -4
stateno = 1121
ownpal = 1


[State 1111, 6]
type = ChangeState
trigger1 = time = 1
value = 1221

; Life power up
[Statedef 1112]
type = A
physics = N
movetype = I

[State 1100, z]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1112, 1]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 1112, 2]
type = LifeAdd
trigger1 = time = 0
value = 40

[State 1111, 3]
type = PlaySnd
trigger1 = time = 0
value = 7, 1
volume = 255
volumescale = 255

[State 1112, 4]
type = Explod
trigger1 = time = 0
anim = 8991
postype = p1
pos = ifelse(facing = 1, -30, 30), -50
scale = 0.4,0.4
facing = ifelse(facing = 1, 1, -1)
removetime = 49
ownpal = 1
ontop = 1
bindtime = -1

[State 1112, 6]
type = ChangeState
trigger1 = time = 1
value = 1221

; Power power up
[Statedef 1113]
type = A
physics = N
movetype = I

[State 1100, z]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1113, a]
type = AttackMulSet
trigger1 = time = 0
value = 1.95

[State 1113, 1]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 1113, 2]
type = VarSet
trigger1 = time = 0
v = 9
value = 1

[State 1111, 3]
type = PlaySnd
trigger1 = time = 0
value = 7, 2
volume = 255
volumescale = 255

[State 1112, 4]
type = Explod
trigger1 = time = 0
anim = 8992
postype = p1
pos = ifelse(facing = 1, -45, 45), -50
scale = 0.4,0.4
facing = ifelse(facing = 1, 1, -1)
removetime = 49
ownpal = 1
ontop = 1
bindtime = -1


[State 1113, 5]
type = Helper
trigger1 = time = 0
name = "Timer"
postype = p1
pos = -42, -4
stateno = 1123
ownpal = 1


[State 1113, 6]
type = ChangeState
trigger1 = time = 1
value = 1221

; Speed power up
[Statedef 1114]
type = A
physics = N
movetype = I

[State 1100, z]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1114, 1]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 1114, 2]
type = VarSet
trigger1 = time = 0
v = 1
value = 1

[State 1111, 3]
type = PlaySnd
trigger1 = time = 0
value = 7, 3
volume = 255
volumescale = 255

[State 1112, 4]
type = Explod
trigger1 = time = 0
anim = 8993
postype = p1
pos = ifelse(facing = 1, -40, 40), -50
scale = 0.4,0.4
facing = ifelse(facing = 1, 1, -1)
removetime = 49
ownpal = 1
ontop = 1
bindtime = -1


[State 1113, 5]
type = Helper
trigger1 = time = 0
name = "Timer"
postype = p1
pos = -42, -4
stateno = 1124
ownpal = 1

[State 1114, 6]
type = ChangeState
trigger1 = time = 1
value = 1221

; Super armor power up
[Statedef 1115]
type = A
physics = N
movetype = I

[State 1100, z]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1115, a]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 1115, b]
type = VarSet
trigger1 = time = 0
v = 31
value = 0

[State 1115, 1]
type = VarSet
trigger1 = time = 0
v = 4
value = 0

[State 1115, 2]
type = VarSet
trigger1 = time = 0
v = 3
value = 1

[State 1111, 3]
type = PlaySnd
trigger1 = time = 0
value = 7, 4
volume = 255
volumescale = 255

[State 1112, 4]
type = Explod
trigger1 = time = 0
anim = 8994
postype = p1
pos = ifelse(facing = 1, -45, 45), -50
scale = 0.4,0.4
facing = ifelse(facing = 1, 1, -1)
removetime = 49
ownpal = 1
ontop = 1
bindtime = -1


[State 1113, 5]
type = Helper
trigger1 = time = 0
name = "Timer"
postype = p1
pos = -42, -4
stateno = 1125
ownpal = 1

[State 1115, 6]
type = ChangeState
trigger1 = time = 1
value = 1221

;----------------------------
; Timer helper char
;[Statedef 1120]
;type = S
;movetype = I
;physics = N
;velset = 0, 0
;anim = 6060

;[State 1120, a]
;type = AssertSpecial
;trigger1 = 1
;flag = NoShadow
;ignorehitpause = 1

;[State 1120, 1]
;type = Turn
;trigger1 = facing = -1

;[State 1120, 2]
;type = BindToParent
;trigger1 = 1
;pos = ifelse(parent, facing = 1, -49, 49), 4
;ignorehitpause = 1

;[State 1120, 3]
;type = Explod
;trigger1 = time = 0
;ID = 56
;anim = 6070
;postype = p1
;pos = 1, 14
;bindtime = -1
;removetime = -1
;ontop = 1

;[State 1120, 4]
;type = ModifyExplod
;trigger1 = 1
;ID = 56
;scale = (700-parent,Var(4))/700.0,1
;ontop = 1
;ignorehitpause = 1

;[State 1120, 5]
;type = RemoveExplod
;trigger1 = parent, var(4) >= 700
;trigger2 = Win
;trigger3 = Lose
;trigger4 = parent, StateNo = 1100
;ID = 56
;ignorehitpause = 1

;[State 1120, 6]
;type = DestroySelf
;triggerall = NumExplod(56) = 0
;trigger1 = parent, var(4) >= 700
;trigger2 = Win
;trigger3 = Lose
;trigger4 = parent, StateNo = 1100
;ignorehitpause = 1

;----------------------------
; Defense Up Timer
[Statedef 1121]
type    = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 3030, 1]
type = VarSet
trigger1 = time = 0
v = 42
value = parent, var(43)

[State 3030, 2]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 1
ID = 7878
anim = 8588
postype = left
pos = 19, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 3]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 1
ID = 7879
anim = 8582
postype = left
pos = 142, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 4]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 1
ID = 7878
anim = 8589
postype = right
pos = -39, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 5]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 1
ID = 7979
anim = 8582
postype = right
pos = -143, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 6]
type = VarAdd
trigger1 = time > 1
fv = 0
value = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 1
fv = 1
value = fvar(0) / 1215
ignorehitpause = 1

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 1
ID = 7979
scale = fvar(1),0.5
ignorehitpause = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 1
fv = 1
value = fvar(0) / -1215
ignorehitpause = 1

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 1
ID = 7879
scale = fvar(1),0.5
ignorehitpause = 1

[State 3030, 9]
type = ParentVarSet
trigger1 = fvar(0) > 610
v = 20
value = 1
ignorehitpause = 1

[State 3030, 10]
type = RemoveExplod
trigger1 = fvar(0) > 610
trigger2 = parent, Win
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 1100
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 2021
ignorehitpause = 1


[STate 3030, 11]
type = DestroySelf
trigger1 = fvar(0) > 610
trigger2 = 0
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 1100
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 2021
ignorehitpause = 1

;----------------------------
; Power Up Timer
[Statedef 1123]
type    = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 3030, 1]
type = VarSet
trigger1 = time = 0
v = 42
value = parent, var(43)

[State 3030, 2]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 1
ID = 7878
anim = 8580
postype = left
pos = 19, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 3]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 1
ID = 7879
anim = 8582
postype = left
pos = 142, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 4]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 1
ID = 7878
anim = 8581
postype = right
pos = -39, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 5]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 1
ID = 7979
anim = 8582
postype = right
pos = -143, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 6]
type = VarAdd
trigger1 = time > 1
fv = 0
value = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 1
fv = 1
value = fvar(0) / 1215
ignorehitpause = 1

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 1
ID = 7979
scale = fvar(1),0.5
ignorehitpause = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 1
fv = 1
value = fvar(0) / -1215
ignorehitpause = 1

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 1
ID = 7879
scale = fvar(1),0.5
ignorehitpause = 1

[State 3030, 9]
type = ParentVarSet
trigger1 = fvar(0) > 610
v = 20
value = 1
ignorehitpause = 1

[State 3030, 10]
type = RemoveExplod
trigger1 = fvar(0) > 610
trigger2 = parent, Win
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 1100
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 2021
ignorehitpause = 1


[STate 3030, 11]
type = DestroySelf
trigger1 = fvar(0) > 610
trigger2 = 0
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 1100
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 2021
ignorehitpause = 1

;----------------------------
; Speed Up Timer
[Statedef 1124]
type    = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 3030, 1]
type = VarSet
trigger1 = time = 0
v = 42
value = parent, var(43)

[State 3030, 2]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 1
ID = 7878
anim = 8584
postype = left
pos = 19, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 3]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 1
ID = 7879
anim = 8582
postype = left
pos = 142, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 4]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 1
ID = 7878
anim = 8585
postype = right
pos = -39, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 5]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 1
ID = 7979
anim = 8582
postype = right
pos = -143, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 6]
type = VarAdd
trigger1 = time > 1
fv = 0
value = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 1
fv = 1
value = fvar(0) / 1215
ignorehitpause = 1

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 1
ID = 7979
scale = fvar(1),0.5
ignorehitpause = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 1
fv = 1
value = fvar(0) / -1215
ignorehitpause = 1

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 1
ID = 7879
scale = fvar(1),0.5
ignorehitpause = 1

[State 3030, 9]
type = ParentVarSet
trigger1 = fvar(0) > 610
v = 20
value = 1
ignorehitpause = 1

[State 3030, 10]
type = RemoveExplod
trigger1 = fvar(0) > 610
trigger2 = parent, Win
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 1100
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 2021
ignorehitpause = 1


[STate 3030, 11]
type = DestroySelf
trigger1 = fvar(0) > 610
trigger2 = 0
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 1100
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 2021
ignorehitpause = 1

;----------------------------
; Super Armor Timer
[Statedef 1125]
type    = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 3030, 1]
type = VarSet
trigger1 = time = 0
v = 42
value = parent, var(43)

[State 3030, 2]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 1
ID = 7878
anim = 8586
postype = left
pos = 19, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 3]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 1
ID = 7879
anim = 8582
postype = left
pos = 142, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 4]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 1
ID = 7878
anim = 8587
postype = right
pos = -39, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 5]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 1
ID = 7979
anim = 8582
postype = right
pos = -143, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 6]
type = VarAdd
trigger1 = time > 1
fv = 0
value = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 1
fv = 1
value = fvar(0) / 1215
ignorehitpause = 1

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 1
ID = 7979
scale = fvar(1),0.5
ignorehitpause = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 1
fv = 1
value = fvar(0) / -1215
ignorehitpause = 1

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 1
ID = 7879
scale = fvar(1),0.5
ignorehitpause = 1

[State 3030, 9]
type = ParentVarSet
trigger1 = fvar(0) > 610
v = 20
value = 1
ignorehitpause = 1

[State 3030, 10]
type = RemoveExplod
trigger1 = fvar(0) > 610
trigger2 = parent, Win
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 1100
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 2021
ignorehitpause = 1


[STate 3030, 11]
type = DestroySelf
trigger1 = fvar(0) > 610
trigger2 = 0
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 1100
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 2021
ignorehitpause = 1



;-----------------------------------------
; Get Super if in Stolen Move mode
[Statedef 1130]
type = A
movetype = I
physics = N

[State 1100, z]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1130, 1]
type = VarSet
trigger1 = var(5) = 0
trigger1 = time = 1
v = 5
value = 1

[State 1130, 2]
type = PowerAdd
trigger1 = var(5) = 1
trigger1 = time = 0
value = 250

[State 1130, 3]
type = PlaySnd
trigger1 = time = 0
value = 7, ifelse(var(5) = 0, 7, 8)

[State 1130, 4]
type = Explod
trigger1 = var(5) = 0
trigger1 = time = 0
anim = 6130
ID = 999
postype = p1
pos = 0, 10
ownpal = 1
bindtime = -1
removetime = -1
facing = ifelse(facing = 1, 1, -1)
ontop = 1

[State 1130, 5]
type = ChangeState
trigger1 = time = 2
value = 1221

;============================================================

; Goodnight Sugah
[Statedef 2000]
type = S
physics = S
movetype = I
;anim = 2000
velset = 0, 0
ctrl = 0

[State 2000, Super Armor]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 2000

[State 2000, Timer Var]
type = VarSet
triggerall = PrevStateNo != 9000
trigger1 = time = 0
v = 8
value = 0

[State 3000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
scale = .5,.5
supermove = 1
sprpriority = 4
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 3
var(36) = 1

[State 3000, Helper]
type = Helper
trigger1 = animelem = 3
stateno = 8500
supermovetime = 99999999
pos = 0,ceil(-80*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 3
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 2000, a]
type = NotHitBy
trigger1 = var(8) < 9
value = SCA

[State 2000, c]
type = VarSet
trigger1 = var(8) = 0
v = 0
value = 0

[State 2000, 1]
type = PlaySnd
triggerall = Anim = 2000
trigger1 = AnimElem = 3
value = 3, 4
volume = 255
volumescale = 255
channel = 0

[State 2000, 3]
type = ChangeState 
trigger1 = AnimTime = 0
value = 2010

[State 2000, Increment]
type = VarAdd
trigger1 = 1
v = 8
value = 1

;============================================================
; Goodnight Sugah - Dash
[Statedef 2010]
type = S
movetype = A
physics = N
;anim = 2010

[State 2010, Super Armor]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 2010

[State 2010, Timer Var]
type = VarSet
triggerall = PrevStateNo != 9000
trigger1 = time = 0
v = 8
value = 0

[State 2010, Invincibility]
type = NotHitBy
trigger1 = var(8) <= 4
value = SCA

[State 2010, 2]
type = VelSet
trigger1 = AnimElem = 2
x = 11
persistent = 0

[State 2010, 3]
type = HitDef
trigger1 = time = 0
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Hard
damage    = 70,5
hitflag = maf
guarDFlag = ma
pausetime = 13,20
guard.pausetime = 10,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = 4,0
guard.velocity = -16
airguard.velocity = -10.5,3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = -4,0
yaccel = .88
kill = 0

[State 220, 8]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 2011

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2010, 4]
type = ChangeAnim
trigger1 = Moveguarded
value = 2010
elem = 11
persistent = 0

[State 3000, VarSet]
type = VarSet
trigger1 =Moveguarded
var(36) = 0

[State 3000, VarSet]
type = VarSet
trigger1 =animtime = 0
var(36) = 0

[state hee]
type = changestate
trigger1 = movehit  && p2stateno = 2011
value = 2020

[State 2010, 5]
type = StateTypeSet
trigger1 = AnimElem = 11
physics = S

[State 2010, 6]
type = AfterImageTime
trigger1 = AnimTime = 0
time = 1

[State 2010, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 2010, Increment]
type = VarAdd
trigger1 = 1
v = 8
value = 1

;---------------------------------------------------------------------------
;Goodnight Sugah - First hit
[statedef 2011]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1182, pos]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1182, vel]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1182, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 1182, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 1182, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 1182, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1182, 6]
type = SelfState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001 ;HITG_SLIDE

[State 1182, 7]
type = SelfState
trigger1 = HitShakeOver
value = 5030

[State 1182, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 1182, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 1182, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


;============================================================
; Goodnight Sugah - Hits
[Statedef 2020]
type = S
movetype = A
physics = N
velset = 2.4, 0
anim = 2020

[State 2020, g]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2020, 1]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
trigger3 = AnimElem = 12
trigger4 = AnimElem = 19
trigger5 = AnimElem = 24
attr = s, ha
animtype  = hard
damage    = 11,5
hitflag = maf
guarDFlag = ma
pausetime = 2,4
hittime = 40
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = -1
guardsound = S6+var(49),0
ground.type = high
ground.slidetime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.hittime  = 20
ground.velocity = 1
air.velocity = -2,0
kill = 0

[State 2020, 1]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 9
trigger3 = AnimElem = 14
trigger4 = AnimElem = 22
attr = s, ha
animtype  = hard
damage    = 11,5
hitflag = maf
guarDFlag = ma
pausetime = 2,4
hittime = 40
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.hittime  = 20
ground.velocity = 1
air.velocity = -2,0
kill = 0

[State 2020, a] 
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 14
trigger5 = AnimElem = 22
value = 3, 9
volume = 255
volumescale = 255
channel = 0

[State 2020, b]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 12
trigger3 = AnimElem = 18
trigger4 = AnimElem = 23
value = 3, 10
volume = 255
volumescale = 255
channel = 0

[State 2020, c]
type = PlaySnd
trigger1 = AnimElem = 28
value = 3, 8
volume = 255
volumescale = 255
channel = 0

[State 2020, 9]
type = HitDef
trigger1 = AnimElem = 28
attr = S, HA
hitflag  = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = 21,0
getpower = 50,0
givepower = 20,0
pausetime = 4,5
guard.pausetime = 4,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 21
air.hittime = 24
guard.hittime = 17
yaccel = .98
ground.velocity = 0,-29
guard.velocity = -14
guard.cornerpush.veloff = -16
ground.cornerpush.veloff = 0
air.velocity = 0,-29
airguard.velocity = -10.5,3
p2stateno = 2033
fall = 1
fall.recover = 0
kill = 0
givepower = 30
getpower = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 5
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 6
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 7
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 8
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 9
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 10
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 5
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 6
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 7
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 8
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 9
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 10
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0	

[State 2020, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 2030


;----------------------------------------
; Goodnight Sugah Kiss
[Statedef 2021]
type = A
physics = N
movetype = I
velset = 0, 0
anim = 1060
sprpriority = 1

[State 1100, Activate Suppression]
type = VarSet
trigger1 = time = 0
v = 36
value = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 23
var(36) = 0

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(-5*const(size.xscale)),ceil(-50*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 1100, a]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 1100, b]
type = PlayerPush
trigger1 = 1
value = 0

[State 1100, c]
type = TargetLifeAdd
trigger1 = AnimElem = 22
value = -120

[State 1100, d]
type = VarSet
trigger1 = time = 0
v = 9
value = 0

[State 1100, f]
type = VarSet
trigger1 = time = 0
v = 1
value = 0

[State 1100, g]
type = VarSet
trigger1 = time = 0
v = 2
value = 0

[State 1100, h]
type = VarSet
trigger1 = time = 0
v = 3
value = 0

[State 1100, i]
type = TargetPowerAdd
trigger1 = AnimElem = 23
value = 90

[State 1100, j]
type = PowerAdd
triggerall = PrevStateNo != 2030
triggerall = (var(5) && var(59)) || var(6)
trigger1 = AnimElem = 23
value = 100

[State 1100, k]
type = VarSet
trigger1 = time = 0
v = 0
value = ifelse(PrevStateNo = 2030, 1, 0)

[State 1100, l]
type = VarSet
trigger1 = time = 0
v = 25
value = ifelse(PrevStateNo = 2030, 1, 0)

[State 1100, 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 23, -99

[State 1100, 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = -24, -101

[State 1100, 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = -31, -103

[State 1100, 4]
type = TargetBind
trigger1 = AnimElem = 4
pos = -50, -99

[State 1100, 5]
type = TargetBind
trigger1 = AnimElem = 6
pos = -39, -87

[State 1100, 6]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3, 7
volume = 255
volumescale = 255
channel = 0

[State 1100, 6]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3, 17
volume = 255
volumescale = 255


[State 1100, 7]
type = Helper
trigger1 = AnimElem = 6
name = "Heart Spawner"
pos = -29, -86
postype = p1
stateno = 1090

[State 1100, 8]
type = TargetBind
trigger1 = AnimElem = 7
pos = -41, -90

[State 1100, 9]
type = TargetBind
trigger1 = AnimElem = 8
pos = -28, -88

[State 1100, 10]
type = TargetBind
trigger1 = AnimElem = 23
pos = -54, -90

[State 1100, 10a]
type = TargetState
trigger1 = AnimTime = 0
trigger1 = PrevStateNo != 2030
trigger1 = !var(6)
value = 1081

[State 1100, 10b]
type = TargetState
trigger1 = AnimTime = 0
trigger1 = PrevStateNo != 2030
trigger1 = var(6)
value = 1082

[State 1100, 10c]
type = TargetState
trigger1 = AnimTime = 0
trigger1 = PrevStateNo = 2030
value = 1083

[State 1100, 11]
type = TargetVelSet
trigger1 = AnimTime = 0
x = -15
y = -8

[State 1100, 13]
type = Turn
trigger1 = AnimTime = 0

[State 1100, 14]
type = ChangeState 
trigger1 = AnimTime = 0
value = 1110


; Go up after opponent
[Statedef 2030]
type = A
movetype = A
physics = N
anim = 2025
velset = 0, -16

[State 2030, 1]
type = PosAdd
trigger1 = time = 0
x = 15

[State 2030, 2]
type = HitDef
trigger1 = time = 0
attr = A, HT
hitflag = +MAF
guardflag = 
priority = 7, Hit
sparkno = -1
guard.sparkno = -1
hitsound = S5, 4
ID = 8338
p1stateno = 2021
p2stateno = 1080
p2facing = -1
getpower = 0

[State 2030, 3]
type = ChangeState
trigger1 = time > 80
value = 1221
ctrl = 1

; Getting hit by Goodnight Sugah
[Statedef 2031]
type = S
movetype = H
physics = S
ctrl = 0
velset = .4, 0

[State 2031, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 2026

[State 2031, 2]
type = HitBy
trigger1 = 1
value = S, HA

[State 2031, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 2031, 4]
type = SelfState
trigger1 = time > 300
value = 0
ctrl = 1

; Get hit by attack
[Statedef 2032]
type = S
movetype = H
physics = S
ctrl = 0

[State 2032, 1]
type = ChangeAnim2
trigger1 = time = 0
value = ifelse(gethitvar(groundtype) = 1, 2027, 2028)

[State 2032, 2]
type = ChangeState
trigger1 = Anim = 2027 || Anim = 2028
trigger1 = AnimTime = 0
value = 2031

[State 2032, 3]
type = HitBy
trigger1 = 1
value = S, HA

[State 2032, 4]
type = PlayerPush
trigger1 = 1
value = 0

[State 2032, 5]
type = SelfState
trigger1 = time > 300
value = 0
ctrl = 1

; Hit Upwards
[Statedef 2033]
type = A
movetype = H
physics = N

[State 2033, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 2029

[State 2033, 2]
type = VelSet
trigger1 = time = 0
y = -19

[State 2033, 3]
type = HitBy
trigger1 = 1
value = A, HT

[State 2033, 4]
type = Gravity
trigger1 = time > 2

[State 2033, 5]
type = PlayerPush
trigger1 = 1
value = 0

[State 2033, 6]
type = SelfState
trigger1 = Pos Y >= -1
trigger1 = time > 30
value = 5110

;---------------------------------------------------------
; Hyper Repeating Punches
[Statedef 2040]
type = S
movetype = A
physics = N
;anim = 2030
velset = 0, 0
ctrl = 0

[State 2000, Super Armor]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 2031

[State 2000, Timer Var]
type = VarSet
triggerall = PrevStateNo != 9000
trigger1 = time = 0
v = 8
value = 0

[State 2000, a]
type = NotHitBy
trigger1 = var(8) <= 7
value = SCA

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 1
var(36) = 1

[State 3000, Helper]
type = Helper
trigger1 = animelem = 1
stateno = 8500
supermovetime = 99999999
pos = 0,ceil(-80*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 2040, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 2041

;---------------------------------------------------------
; Hyper Repeating Punches - Hits
[Statedef 2041]
type = S
movetype = A
physics = N
;anim = 2030
velset = 0, 0
ctrl = 0

[State 3000, Explod]
type = Explod
trigger1 = animelem = 1
anim = 8300
id = 8300
scale = .5,.5
supermove = 1
sprpriority = 4
ownpal = 1

[State 2000, Super Armor]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 2030

[State 2000, Timer Var]
type = VarSet
triggerall = PrevStateNo != 9000
trigger1 = time = 0
v = 8
value = 0

[State 2000, a]
type = NotHitBy
trigger1 = var(8) <= 7
value = SCA

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 38
var(36) = 0

[State 2040, a]
type = Width
trigger1 = 1
value = 20, -10

[State 2040, 5]
type = VelSet
trigger1 = AnimElem = 2
x = 7

[State 2040, 6]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 11
trigger3 = AnimElem = 19
trigger4 = AnimElem = 26
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 2,4
guard.pausetime = 2,4
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -10.8,0
guard.velocity = -10
air.velocity = -12,-5
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State 2040, 6]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 15
trigger3 = AnimElem = 22
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 2,4
guard.pausetime = 2,4
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = .88
ground.velocity = -10.8,0
guard.velocity = -10
air.velocity = -12,-5
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 5
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 6
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 7
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 8
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 5
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 6
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 7
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 8
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 2040, 7]
type = HitDef
trigger1 = AnimElem = 29
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,1
getpower = 31,0
givepower = 20,0
pausetime = 7,9
guard.pausetime = 7,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 34
air.hittime = 27
guard.hittime = 17
yaccel = .99
ground.velocity = -11,-29
ground.cornerpush.veloff = -4
air.velocity = -11,-29
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 1+4

[State 2040, b]
type = VelAdd
trigger1 = AnimElem = 28
x = -3

[State 2040, 8]
type = StateTypeSet
trigger1 = AnimElem = 29
physics = S

[State 2040, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 2040, Increment]
type = VarAdd
trigger1 = 1
v = 8
value = 1

;-------------------------------------------------
; Stand gethits
[Statedef 2390]
type    = S
movetype= H
physics = N
velset = 0,0

[State 2390, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 2390, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 2390, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 2390, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 2390, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 2390, 6]
type = Null ;ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001 ;HITG_SLIDE

[State 2390, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 2411

[State 2390, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 2390, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 2390, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

; Crouching Gethit
[Statedef 2400]
type    = C
movetype= H
physics = N
velset = 0,0

[State 2400, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 2400, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 2400, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 2400, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 2400, 5]
type = Null ;ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5011 ;HITC_SLIDE

[State 2400, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 2411

[State 2400, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 2400, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 2400, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

; Air Gethit
[Statedef 2410]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2410, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 2410, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 2410, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 2410, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 2410, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 2411

[State 2410, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 2410, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 2410, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

; Fly through air
[Statedef 2411]
type    = A
movetype= H
physics = N
ctrl = 0

[State 2411, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 2411, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 2411, 3]
type = Null ;ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 2411, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 2413 ;HITA_FALL

[State 2411, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2412 ;HITA_UP (transition)

; HitA_fall
[Statedef 2412]
type    = A
movetype= H
physics = N

[State 2412, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 2412, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 2412, 3]
type = Null ;ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 2412, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 2413 ;HITA_FALL

;HITA_FALL: Knocked up, falling
[Statedef 2413]
type    = A
movetype= H
physics = N

[State 2413, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 2413, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 2413, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 2413, 4] ;Recover near ground
type = Null ;ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 2413, 5]; Recover in mid air
type = Null ;ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 2413, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 2430 ;HIT_BOUNCE

; Liedown Hit
[Statedef 2420]
type    = L
movetype= H
physics = N
velset = 0,0

[State 2420, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 2420, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 2420, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 2420, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 2420, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 2461 ;HITL_SLIDE

[State 2420, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 2411 ;HITA_UP

; Bounce off ground
[Statedef 2430]
type    = L
movetype= H
physics = N

[State 2430, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 2430, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 2430, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 2430, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 2430, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 2430, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2430, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 2430, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 2430, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 2440 ;HIT_LIEDOWN

[State 2430, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 2430, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 2430, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 2430, 11]
type = PosFreeze
trigger1 = 1

[State 2430, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 2431

[State 2430, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

; Bounce Up
[Statedef 2431]
type    = L
movetype= H
physics = N

[State 2431, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 2431, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 2431, 3]
type = HitFallVel
trigger1 = Time = 0

[State 2431, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 2431, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 2431, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 2440

; Liedown
[Statedef 2440]
type    = L
movetype= H
physics = N

[State 2440, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 2440, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 2440, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 2440, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 2440, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 2440, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2440, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 2440, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 2440, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 2440, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 2440, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 2440, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 2440, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 2440, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 2440, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 2440, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 2440, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 2440, 3]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2440, 5]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 2440, 16]
type = SelfState
trigger1 = time = 80
value = 5120

;-----------------------------
; HITL_SLIDE
[Statedef 2461]
type    = L
movetype= H
physics = C

[State 2461, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 2461, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 2461, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 2461, 4]
type = ChangeState
trigger1 = HitOver
value = 2440 ;HIT_LIEDOWN


;===================================================================
;---------------------------------------------------
; Super Armor State
[Statedef 9000]
type = U
movetype = H

[State 9000, a]
type = VarSet
trigger1 = time = 0
v = 28
value = 1

[State 9000, b]
type = VarSet
trigger1 = time <= 0
v = 30
value = AnimElemNo(0)
ignorehitpause = 1

[State 9000, 1]
type = OffSet
trigger1 = time%4 = 0
x=3
y=0

[State 9000, 1]
type = OffSet
trigger1 = time%4 = 2
x=-3
y=0

[State 9000, End]
type = posadd
trigger1 = (time >= 9) && (Life > 0)
x =-(23-time)

[State 9000, 1]
type = VarSet
trigger1 = time = 0
v = 29
value = var(10)

[State 9000, 2]
type = Null ;VarSet
trigger1 = time = 0
v = 4
value = 0

[State 9000, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 9000, VarSet]
type = VarSet
trigger1 = Life <= 0
v = 31
value = 1

[State 9000, ChangeState];Dead
type = ChangeState
trigger1 = Life <= 0
value = ifelse(StateType = A, 5020,5000)

[State 9000, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = Anim
elem = var(30)

[State 9000, End]
type = ChangeState
trigger1 = (time >= floor(gethitvar(hittime) * 0.8)) && (Life > 0)
value = var(11)
ctrl = var(27)

;==========================================================================
; OVERRIDE COMMON STATES
;==========================================================================

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, Clear AirCombo Var]
type = VarSet
trigger1 = time = 0
v = 35
value = 0

[State 0, a]
type = CtrlSet
trigger1 = PrevStateNo = 9000
value = 1

[State 0, b]
type = VarSet
trigger1 = time = 0
v = 15
value = 0

[State 0, c]
type = ChangeAnim
trigger1 = Anim = 1
trigger1 = var(1) = 0
value = 0
elem = AnimElemNo(0)

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5 && Anim != 1
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = ifelse(var(1) = 1, 1, 0)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0
ctrl = 1

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11


;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0
ctrl = 1

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x) + (var(1) * 2)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x) + (var(1) * -2)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5 && Anim != 2
trigger2 = Anim = 5 && AnimTime = 0
value = ifelse(var(1) = 1, 2, 20)

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5 && Anim != 3
trigger2 = Anim = 5 && AnimTime = 0
value = ifelse(var(1) = 1, 3, 21)

;-------------------------------------------------------------------------
;Super Jump
[Statedef 99]
type    = A
physics = A
ctrl = 1
velset = 0, -18.5

[State 700, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 51

[State 1000, FireB]
type = Explod
trigger1 = time = 0
anim = 8250
id = 8250
pos = -120, 9
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[State 8411, puntets]
type = explod
trigger1 = time = 0
anim = 8007
postype = p1
pos = -20,-110
sprpriority = 4
facing = 1
persistent = 0
supermove = 1
ownpal = 1
scale = 0.57,0.57
vfacing = 1

[State 8411, puntets]
type = explod
trigger1 = time = 0
anim = 8008
postype = p1
pos = -20,-110
sprpriority = 4
facing = 1
persistent = 0
supermove = 1
ownpal = 1
scale = 0.57,0.57
vfacing = 1

[State 52,  Airjump Var]
type = VarSet
trigger1 = time = 0
v = 19
value = 1

[state 40, 11]
type = varset
trigger1 = time = 0
var(19) = 1


[State 91, VelAdd]
type = VelAdd
trigger1 = var(1) = 0
trigger1 = time > 1
y= -0.11

[State 91, VelAdd]
type = VelAdd
trigger1 = var(1) = 0
trigger1 = time > 40
y= -0.12

[State 50, Additional Gravity]
type = VelAdd
trigger1 = var(1) = 1
trigger1 = time > 1
y= -0.11

[State 50, Additional Gravity]
type = VelAdd
trigger1 = var(1) = 1
trigger1 = time > 40
y= -0.12

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 190

[state veladd]
type = veladd
trigger1 = vel X< 4
trigger1 = command = "holdfwd" && command != "holdback"
x = 0.25

[state veladd]
type = veladd
trigger1 = vel X> -4
trigger1 = command != "holdfwd" && command = "holdback"
x = -0.07

[State 999, 2a]
type = VelSet
trigger1 = Anim = 52
trigger1 = Time = [0,2]
x = 2.6

[State 999, 2b]
type = VelSet
trigger1 = Anim = 53
trigger1 = Time = [0,2]
x = -2.6

[State 1310, 6]
type = Turn
;trigger1 = Time = 10
trigger1 = p2dist X < -5

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 52

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 53

[State 9002, SelfState]
type = SelfState
trigger1 = time>10 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
;Falling

[Statedef 1211]
type    = A
movetype= I
physics = A
anim = 48
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= -0.21

[State 1211, Ctrl]
type = CtrlSet
trigger1 = prevstateno = 4100
value = 1

[State 112, 3]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .2

[State 112, 4]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.2

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 49

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 50

[State 1211, ChangeState]
type = ChangeState
trigger1 = time>10 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
;Falling

[Statedef 1221]
type    = A
movetype= I
physics = A
anim = 48
ctrl = 0
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= -0.21

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 49

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 50

[State 1211, ChangeState]
type = ChangeState
trigger1 = time>10 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = N
anim = 100
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 105, 2]
type = PosSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0

[State 105, 2]
type = PosSet
trigger1 = command = "holddown"
y = 0

[State 105, 2]
type = VelSet
trigger1 = command = "holddown"
y = 0
x = 14

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holddown"
value = 10
ctrl = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = command="holdup"||command="holdfwd"||command="holdback"||command="holddown"||command="x"||command="y"||command="z"||command="a"||command="b"||command="c"||command="start"
statetype = S    

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0
x = 14

[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = command = "x"
value = 200

[State 105, 3a]
type = ChangeState
triggerall = time > 2
trigger1 = command = "y"
value = 210

[STate 105, 3b]
type = ChangeState
triggerall = time > 2
trigger1 = command = "z"
value = 220

[State 105, 3c]
type = ChangeState
triggerall = time > 2
trigger1 = command = "a"
value = 230

[State 105, 3d]
type = ChangeState
triggerall = time > 2
trigger1 = command = "b"
value = 240

[State 105, 3e]
type = ChangeState
triggerall = time > 2
trigger1 = command = "c"
value = 250


[State 101, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,1

[State 101, Explod]
type = Explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
scale = 0.5,0.5
random = 30,abs(const(size.head.pos.y))
pos = -30,ceil(const(size.mid.pos.y)/1)

[State 100, 9] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 11]
type = StateTypeSet
trigger1 = AnimElem = 12
physics = S

[State 100, 20]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = S
physics = N
anim = 105
sprpriority = 1

[State 105, a]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 105, 2]
type = PosSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0

[State 105, 2]
type = PosSet
trigger1 = command = "holddown"
y = 0

[State 105, 2]
type = VelSet
trigger1 = command = "holddown"
y = 0
x = -14

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holddown"
value = 10
ctrl = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = command="holdup"||command="holdfwd"||command="holdback"||command="holddown"||command="x"||command="y"||command="z"||command="a"||command="b"||command="c"||command="start"
statetype = S    

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0
x = -14

[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = command = "x"
value = 200

[State 105, 3a]
type = ChangeState
triggerall = time > 2
trigger1 = command = "y"
value = 210

[STate 105, 3b]
type = ChangeState
triggerall = time > 2
trigger1 = command = "z"
value = 220

[State 105, 3c]
type = ChangeState
triggerall = time > 2
trigger1 = command = "a"
value = 230

[State 105, 3d]
type = ChangeState
triggerall = time > 2
trigger1 = command = "b"
value = 240

[State 105, 3e]
type = ChangeState
triggerall = time > 2
trigger1 = command = "c"
value = 250

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 13
x = 0

[State 105, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------
; Airdash
[Statedef 110]
type = A
movetype = I
physics = N
ctrl = 0 + (0*(var(54):=1))

[State 740, 1]
type = ChangeAnim
trigger1 = time = 0
value = 100

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 740, 2]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.fwd.x)
y = 0

[State 750, 3]
type = ChangeState
trigger1 = AnimElem = 9
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0


[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

[State 190, 3]
type = Varset
trigger1 = (time = 0) && (Var(58) != 1)
var(58) = 1

; HIT_FALLRECOVER (on the ground) 
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,10,-7)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 191, Auto-Activate AI]
type = VarSet
trigger1 = var(57)
v = 13
value = 1

[State 5900, 3] ;Change palette
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

; Like in vs Series, you always start with 1 power stock...
[State 190, PowerAdd]
type = PowerSet
triggerall = Roundno = 1
trigger1 = time = 0
value = 1000

[State 191, c]
type = VarSet
trigger1 = time = 0
trigger1 = PalNo = [1,6]
v = 6
value = 1

[State 191, a]
type = VarRandom
trigger1 = (roundno != 1) && (Var(58) != 1)
trigger1 = PalNo = [7,12]
trigger1 = var(8) = 0
v = 8
range = 1, 9

[State 191, b]
type = VarSet
trigger1 = (roundno != 1) && (Var(58) != 1)
trigger1 = PalNo = [7,12]
v = 0
value = Pos X

[state 191, 0]
type = changestate
trigger1 = (roundno != 1) && (Var(58) != 1)
trigger1 = PalNo = [7,12]
value = 7000

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

[state 5900, a]
type = changestate
;trigger1 = time = 0
trigger1 = roundno != 1
value = 0

[State 5900, b] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 5900, ChangeState] ;Intro for round 1
type = ChangeState
triggerall  = roundsexisted
trigger1 = roundno != 1
value = 21


; ƒAƒhƒoƒ“ƒVƒ“ƒOƒK[ƒh(ƒwƒ‹ƒp[) 
[Statedef 8060]
type = A
physics = N
anim = 8061
velset = -14,0
ctrl = 0

[State 8060, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,18

[State 8060, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 8060, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 8060, DestroySelf]
type = DestroySelf
trigger1 = time = 16;24

; ’…’nƒGƒtƒFƒNƒg 
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

; ƒX[ƒp[ƒRƒ“ƒ{‰‰o(ƒwƒ‹ƒp[) 
	 
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 200
volumescale = 200
value = 1,0

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = f9951
sprpriority = -2
postype = left
under = 1
supermove = 1
bindtime = -1
removetime = 37
scale = 1,1
ownpal = 1


[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(36) = 1 && !numexplod(8505)
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
trigger1 = root,var(36) = 0 || root,var(36) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
trigger1 = root,var(36) = 0
trigger2 = root,movetype = H
 
[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,4

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 2,12

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay
flag3 = nomusic

; [State 8510, AssertSpecial]
; type = AssertSpecial
; trigger1 = (StageVar(Info.Name) != "Absolute Cloud-Night")
; flag = nomusic

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
scale = .5,.5
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)

; ƒ^[ƒQƒbƒgƒŠƒJƒo[ 
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)
 
; ƒ^[ƒQƒbƒgƒ_ƒEƒ“’ÇŒ‚•œ‹A 
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)
 
; ƒ^[ƒQƒbƒgƒoƒEƒ“ƒh 
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5210

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA


[State 9910, PosSet]
type = PosSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -5

[State 1300, 6]
type = PalFX
triggerall = name = "Dhalsim"
trigger1 = animelem = 1
time = 18
sinadd =  255,255,255,43
ignorehitpause = 0

[State 5100, 10]
type = PlaySnd
triggerall = name = "Dhalsim"
trigger1 = Time = 1
value = S3,0

[State 9910, VelSet]
type = VelSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -4
x = 0

[State 9910, VelAdd]
type = VelAdd
triggerall = name = "Dhalsim"
trigger1 = time = 1
y = 0



[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .99;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52

;==========================================================================
; Statedef -2
;==========================================================================
[Statedef -2]

; ===================== (Recovery p2 effect and sound) =======================

[State 0, PlaySnd]
type = PlaySnd
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
triggerall = name = "Blackheart"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,10
channel = 4
volume = 155
volumescale = 155

[State 0, PlaySnd]
type = PlaySnd
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,7
channel = 4
volume = 155
volumescale = 155

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 20, 2]
type = envshake
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
triggerall = name = "Blackheart"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
time = 8
freq = 80
ampl = 3


[State 0, PosSet]
type = PosSet
trigger1 = prevstateno = 100
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = prevstateno = 105
y = 0

[State -2, A-Dash-CLR]
type = VarSet
triggerall = var(54)
trigger1 = stateno = 52
trigger2 = stateno = 0
var(54) = 0

; ‰æ–ÊŠO•\Ž¦(Ž©•ª) 
	
; ƒvƒŒƒCƒ„[•\Ž¦ 
[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; –îˆó•\Ž¦(‰ñ“]) 
[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(29) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(29) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(29)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
triggerall =roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(29) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(29) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(29)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, ‰æ–ÊŠO•\Ž¦]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 220-const(size.head.pos.y)
id = 8596

[State -2, ‰æ–ÊŠO•\Ž¦]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, ‰æ–ÊŠO•\Ž¦]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, ‰æ–ÊŠO•\Ž¦]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, ‰æ–ÊŠO•\Ž¦]
type = VarSet
trigger1 = numenemy
var(29) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; –îˆó•\Ž¦ 
[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8596)
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(29)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8598)
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(29)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; ‰æ–ÊŠO•\Ž¦(‘ŠŽè) 
	
; ƒvƒŒƒCƒ„[•\Ž¦ 
[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; –îˆó•\Ž¦(‰ñ“]) 
[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(21) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(21) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(21)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(21) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(21) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(21)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, ‰æ–ÊŠO•\Ž¦]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 220-enemy,const(size.head.pos.y)
id = 18596

[State -2, ‰æ–ÊŠO•\Ž¦]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, ‰æ–ÊŠO•\Ž¦]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, ‰æ–ÊŠO•\Ž¦]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, ‰æ–ÊŠO•\Ž¦]
type = VarSet
trigger1 = numenemy = 1
var(21) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; –îˆó•\Ž¦ 
[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(21)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, ‰æ–ÊŠO•\Ž¦]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(21)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

; ===================== (Prewalking) =======================

[State -2, Remember the last Position (X)]
type = VarSet
triggerall = RoundState < 2
trigger1 = stateno = [0, 21] ;Enable after Intro
fvar(3) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(3) != 0
trigger1 = prevstateno != 191
x = fvar(3)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(3) = 0

[State -2, Pre-walking state]
type = ChangeState
;triggerall = !var(59)
trigger1 = prevstateno = 191
trigger2 = RoundNo != 1              ;Enable If Round Number is > 1
trigger2 = RoundState = 1           ;RoundState < 2 and
trigger2 = stateno = 0              ;Current state is 0
value = 21
ctrl = 0

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090

[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998

; ===================== (System Messages) =======================

[State -2, VS_Combo]
type = VarSet
triggerall = (var(31)!=10) || (var(31)=10 && movehit && statetype != A)
trigger1 = var(52) >= 3
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = [5000,5899])
var(31) = 1+(var(52)>4)+(var(52)>5)+(var(52)>7)+(var(52)>9)+(var(52)>29)+(var(52)>49)+(var(52)>69)-(var(52)=-1)
ignorehitpause = 1

[State -2, Air Combo]
type = VarSet
triggerall = var(52) >= 3 && statetype = A && var(31)!=10 && var(32)
trigger1 = (movehit)
var(31) = 10
ignorehitpause = 1

[State -2, Danger]
type = VarSet
trigger1 = var(53) !=1 && roundstate=2 && life = [1,250]
var(31) = 9
ignorehitpause = 1

; sound First attack
[State -2, First Attack]
type = PlaySnd
trigger1 = var(52)=0 && var(31)!=0
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
triggerall = NumExplod(8701) = 0
persistent = 0
value = 2,0
channel = 14
volume=255
ignorehitpause = 1

; Telop sound
[State -2, Combo Sound]
type = PlaySnd
trigger1 = NumExplod(8701) = 0
trigger1 = var(52)=0 && var(31)!=0
persistent = 0;1
value = 2,var(31)
channel = 14
volume=255
ignorehitpause = 1

[State -2, Left]
type = explod
trigger1 = var(52)=0 && var(31)!=0
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
triggerall = TeamSide = 1 && NumExplod(8701) = 0
anim = (8550 + var(31))
ID = 8701
postype = left
pos = 3,80
ontop = 1
bindtime = -1
removetime = 60
ownpal = 1
supermovetime = 60
pausemovetime = 60
scale = 0.5,0.5
persistent = 0
ignorehitpause = 1

[State -2, Right]
type = explod
trigger1 = var(52)=0 && var(31)!=0
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
triggerall = TeamSide = 2 && NumExplod(8701) = 0
anim = (8650+ var(31));8011;8720;
ID = 8701
postype = right
pos = -10,80;130;82
ontop = 1
bindtime = -1
removetime = 60;90
ownpal = 1
supermovetime = 60;90
pausemovetime = 60;90
scale = 0.5,0.5
persistent = 0;1
ignorehitpause = 1

[State -2, VS_Combo]
type = VarAdd
trigger1 = enemynear, time = 0
trigger1 = enemynear, Hitshakeover = 0
trigger1 = (p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899]
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
var(52) = 1 + (var(52)=-1)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
trigger1 = var(52)!=-1 && (p2movetype!=H || enemynear, ctrl)
trigger2 = var(52)=-1 && movetype = H;p2stateno = [5000,5899])
var(52) = 0 - (roundstate<2)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
triggerall = numexplod(8701)!=0
trigger1 = var(52)=0
var(31) = 0
ignorehitpause = 1

[State -2, Score]
type = Varadd
trigger1 = enemynear, time=0
trigger1 = enemynear, Hitshakeover=0
trigger1 = moveguarded || p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899])
trigger2 = var(52)=-1 && (movehit || p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
trigger3 = roundstate=4 && time=0 && stateno = [180,189]
var(22) = ceil(stateno/50)*var(52) + (life)*(roundstate=4) + (moveguarded)
ignorehitpause = 1

[State -2, Normalize Score]
type = Varset
triggerall = numpartner=1
trigger1 = var(22)< partner, var(22)
var(22) = partner, var(22)

[State -2, Is Danger]
type = VarSet
trigger2 = var(53) = 0 && life <= 250
trigger1 = var(53) = 1 && roundstate!=2
var(53) = (roundstate>1)
ignorehitpause = 1

[State -2, Is First Attack p3]
type = VarSet
triggerall = numpartner=1
trigger1 = partner, movehit
trigger1 = partner, var(52) != -1
var(52) = 0
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = nomusic

; ƒAƒhƒoƒ“ƒVƒ“ƒOƒK[ƒh 
[State -2, ƒAƒhƒoƒ“ƒVƒ“ƒOƒK[ƒh]
type = Helper
trigger1 = var(51)
stateno = 8060
postype = p2
pos = 20,0
id = 8060

[State -2, ƒAƒhƒoƒ“ƒVƒ“ƒOƒK[ƒh]
type = PosFreeze
trigger1 = numhelper(8060)

[State -2, ƒAƒhƒoƒ“ƒVƒ“ƒOƒK[ƒh]
type = VelAdd
trigger1 = numhelper(8060)
trigger1 = statetype = A
y = -gethitvar(yaccel)

[State -2, ƒAƒhƒoƒ“ƒVƒ“ƒOƒK[ƒh]
type = Explod
trigger1 = var(51)
anim = 8060
pos = 47,-85
ontop = 1
scale = 0.5, 0.5


[State -2, ƒAƒhƒoƒ“ƒVƒ“ƒOƒK[ƒh]
type = VarSet
trigger1 = var(51)
var(51) = 0


; ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A 
[State 650, ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A]
type = PlaySnd
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
value = 0,11

[State 620, ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A]
type = VarSet
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
var(32) = 2

[State -2, ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A]
type = VarSet
trigger1 = !numtarget
var(32) = 0

[State -2, ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A]
type = VarSet
trigger1 = var(32)= 2 && ctrl && statetype != A
var(32) = 3

[State -2, ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A]
type = ScreenBound
trigger1 = var(32) = 2
value = ifelse(pos x*facing > 0,1,0)
movecamera = 0,0
ignorehitpause = 1

[State -2, ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A]
type = ChangeState
triggerall = var(32) = 2
trigger1 = backedgebodydist < -20 && stateno != 100 && stateno != [700,701]
value = 700

[State -2, ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A]
type = ScreenBound
trigger1 = stateno = 100 && prevstateno = 700
value = 0
movecamera = 0,0

[State -2, ƒGƒŠƒAƒ‹ƒŠƒ~ƒbƒ^[ŠÖ˜A]
type = NotHitBy
trigger1 = stateno = 100 && prevstateno = 700
value = SCA
 
; ƒwƒ‹ƒp[ŠÖ˜A 
[State -2, ƒwƒ‹ƒp[ŠÖ˜A]
type = VarSet
trigger1 = !numhelper
var(36) = 0

; ƒRƒ“ƒ{” 
[State -2, ƒRƒ“ƒ{”]
type = VarSet
trigger1 = statetype = A && prevstateno = [600,699)
trigger1 = stateno = [1000,5000)
var(35) = 1

[State -2, ƒRƒ“ƒ{”]
type = VarAdd
trigger1 = movehit = 1
trigger2 = projhit = 1
var(16) = 1

[State -2, ƒRƒ“ƒ{”]
type = VarAdd
triggerall = statetype = A && numtarget
triggerall = target,statetype = A
triggerall = movehit = 1 || projhit = 1
trigger1 = stateno = [600,699)
trigger2 = var(35) && stateno = [1000,5000)
var(38) = 1

[State -2, ƒRƒ“ƒ{”]
type = VarSet
;trigger1 = !numtarget
trigger1 = !numenemy
trigger2 = numenemy
trigger2 = enemynear,movetype != H
var(35) = 0

[State -2, ƒRƒ“ƒ{”]
type = VarSet
trigger1 = !numtarget
var(16) = 0

[State -2, ƒRƒ“ƒ{”]
type = VarSet
trigger1 = !numtarget
var(38) = 0

; ƒ_ƒ[ƒWˆ— 
[State -2, ƒ_ƒ[ƒWˆ—]
type = VarSet
trigger1 = movetype = H
var(36) = 0

[State -2, ƒ_ƒ[ƒWˆ—]
type = AfterImage
trigger1 = movetype = H
time = 0
 
; ƒ^[ƒQƒbƒg§Œä 
[State -2, ƒ^[ƒQƒbƒg§Œä]
type = VarSet
trigger1 = 1
var(37) = 0
ignorehitpause = 1

[State -2, ƒ^[ƒQƒbƒg§Œä]
type = VarSet
trigger1 = numtarget
var(37) = target,id
ignorehitpause = 1

[State -2, ƒ^[ƒQƒbƒg§Œä]
type = VarSet
trigger1 = !numtarget
var(39) = 0
ignorehitpause = 1

[State -2, ƒ^[ƒQƒbƒg§Œä]
type = VarSet
trigger1 = numtarget && hitpausetime
var(39) = target,stateno = 5080
ignorehitpause = 1

[State -2, ƒ^[ƒQƒbƒg§Œä]
type = TargetState
trigger1 = playeridexist(var(37)) && !var(39)
trigger1 = playerID(var(37)),gethitvar(chainid) & 1
trigger1 = playerID(var(37)),stateno != [120,155]
trigger1 = playerID(var(37)),hitover && playerID(var(37)),alive && playerID(var(37)),hitshakeover
trigger1 = playerID(var(37)),statetype = A && playerID(var(37)),stateno != 9900
value = 9900

[State -2, ƒ^[ƒQƒbƒg§Œä]
type = TargetState
trigger1 = playeridexist(var(37)) && var(39)
trigger1 = playerID(var(37)),alive && playerID(var(37)),hitshakeover
trigger1 = playerID(var(37)),pos y >= 0 && playerID(var(37)),vel y > 0
trigger1 = playerID(var(37)),statetype = A && playerID(var(37)),stateno != 5201 && playerID(var(37)),stateno != 9910
value = 9901

[State -2, ƒ^[ƒQƒbƒg§Œä]
type = TargetState
trigger1 = playeridexist(var(37))
trigger1 = playerID(var(37)),gethitvar(chainid) & 2
trigger1 = playerID(var(37)),stateno != [120,155]
trigger1 = playerID(var(37)),alive && playerID(var(37)),hitshakeover
trigger1 = playerID(var(37)),pos y >= 0 && playerID(var(37)),vel y > 0
trigger1 = playerID(var(37)),statetype = A && playerID(var(37)),stateno != 9910
value = 9910


; ===================== (Metal Hit Code) =======================

[state -2, metal]
type = varset
trigger1 = enemynear, name = "War Machine"
trigger2 = enemynear, name = "Iron Man"
trigger3 = enemynear, name = "Sentinel"
trigger4 = enemynear, name = "Doctor Doom"
trigger5 = enemynear, name = "Tron Bonne"
var(49) =10

[state -2, metal]
type = varset
trigger1 = enemynear, name = "War Machine"
trigger1 = enemynear, name = "Iron Man"
trigger1 = enemynear, name = "Sentinel"
trigger1 = enemynear, name = "Doctor Doom"
trigger1 = enemynear, name = "Tron Bonne"
var(49) =0 

[state -2, metal]
type = varset
triggerall = enemynear, Name = "Zangief"
trigger1 = enemynear, var(50)=1
var(49) =10

[state -2, metal]
type = varset
triggerall = enemynear, Name = "Zangief"
trigger1 = enemynear, var(50)=0
var(49) =0 

; ===================== (Wall hit) =======================

[state 5100,2]
type = explod
triggerall = var(45)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
scale = 0.9,0.9
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
triggerall = var(45)
triggerall = numenemy
triggerall = enemynear,stateno != [120,159]
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,8
channel = 4
volume = 255

[state 200, 3]
type = varset
triggerall = var(45)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 45
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 24
value = var(26)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 26
value = var(25)+hitcount

[state -3, 2];combo hosei
type = varset
trigger1 = enemynear,movetype != H
v = 25
value = 0

;***************
[state -3, 2];combo
type = varset
trigger1 = var(26)>var(24)
v = 45
value = 1

; Custom state check
[State -2, Check if in custom state]
type = RemoveExplod
triggerall = var(3)
trigger1 = var(33) - var(34) = 0
ID = 9076

[State -2, Set Var if in Custom state]
type = VarSet
triggerall = var(3)
triggerall = (StateNo != 5000) && (StateNo != 5010)
trigger1 = 1
v = 32
value = ifelse(var(33) - var(34) = 0, 1, 0)

[State -2, Set Var]
type = VarSet
trigger1 = var(3)
v = 34
value = var(33)

; Power-up States
[State -2, Increment Timer]
type = VarAdd
trigger1 = var(1)
trigger2 = var(2)
trigger3 = var(3)
trigger4 = var(9)
v = 4
value = 1
ignorehitpause = 1

[State -2, Leave PowerUp Mode]
type = VarSet
triggerall = var(1) = 1
trigger1 = var(4) >= 620
v = 1
value = 0

[State -2, Leave PowerUp Mode]
type = VarSet
triggerall = var(2) = 1
trigger1 = var(4) >= 620
v = 2
value = 0

[State -2, Leave PowerUp Mode]
type = VarSet
triggerall = var(3) = 1
trigger1 = var(4) >= 620
v = 3
value = 0

[State -2, Leave PowerUp Mode]
type = VarSet
triggerall = var(9) = 1
trigger1 = var(4) >= 620
v = 9
value = 0

[State -2, Set Defense]
type = DefenceMulSet
trigger1 = var(2) = 1
value = .5

[State -2, Set Power]
type = AttackMulSet
trigger1 = var(9) = 1
value = 1.25

[State -2, Set Defense]
type = DefenceMulSet
trigger1 = var(2) = 0
value = 1

[State -2, Remove Afterimage if gethit]
type = AfterImageTime
trigger1 = Movetype = H
trigger2 = StateNo = 0
value = 1

; If in AI mode, get nearest enemy's ID
[State -2, Get Enemy ID]
type = VarSet
trigger1 = Var(13) = 1 || Var(13) = 0
v = 14
value = EnemyNear, ID

; Guard triggers for AI (from BB Hood)
[State -2, Stand guard]
type = ChangeState
triggerall = var(13) > 0
triggerall = StateType != A
triggerall = PlayerID(var(14)), StateType != C
triggerall = PlayerID(var(14)), MoveType = A
trigger1 = ctrl = 1
value = 130

[State -2, S-to-C guard]
type = ChangeState
triggerall = var(13) > 0
triggerall = StateType != A
triggerall = PlayerID(var(14)), statetype = C
triggerall = PlayerID(var(14)), Movetype = A
trigger1 = stateno = 150
value = 152

[State -2, Crouch guard]
type = ChangeState
triggerall = var(13) > 0
triggerall = StateType != A
triggerall = PlayerID(var(14)), statetype = C
triggerall = PlayerID(var(14)), Movetype = A
trigger1 = ctrl = 1
value = 131

[State -2, C-to-S guard]
type = ChangeState
triggerall = var(13) > 0
triggerall = StateType != A
triggerall = PlayerID(var(14)), statetype != C
triggerall = PlayerID(var(14)), Movetype = A
trigger1 = stateno = 152
value = 150

[State -2, Air guard]
type = ChangeState
triggerall = var(13) > 0
triggerall = StateType = A
triggerall = PlayerID(var(14)), Movetype = A
trigger1 = ctrl = 1
value = 132

[State -2, Clear Var 58]
type = VarSet
trigger1 = MatchOver 
trigger2 = TeamMode = Turns
trigger2 = Lose
v = 58
value = 0

[State -2, Kill AI When Fight Is Over]
type = VarSet
triggerall = var(13) = 1
trigger1 = RoundState = 3
trigger2 = RoundState = 4
v = 13
value = 0

; Set Attack Ratio for Damage Dampening

[State -2, Set]
type = VarSet
trigger1 = var(18) = 0
fv = 1
value = 1 + (var(9) * .25)
ignorehitpause = 1

[State -2, 1st decrease]
type = VarSet
trigger1 = var(18) > 4
trigger1 = var(18) <= 7
fv = 1
value = .70 + (var(9) * .25)
ignorehitpause = 1

[State -2, 2nd Decrease]
type = VarSet
trigger1 = var(18) > 7
trigger1 = var(18) <= 9
fv = 1
value = .50 + (var(9) * .25)
ignorehitpause = 1

[State -2, 3rd Decrease]
type = VarSet
trigger1 = var(18) > 9
trigger1 = var(18) <= 13
fv = 1
value = .40 + (var(9) * .25)
ignorehitpause = 1

[State -2, 4th Decrease]
type = VarSet
trigger1 = var(18) > 13
trigger1 = var(18) <= 20
fv = 1
value = .25 + (var(9) * .25)
ignorehitpause = 1

[State -2, Set Damage]
type = AttackMulSet
trigger1 = 1
value = fvar(1)
ignorehitpause = 1

[State -2, Clear Helper Hits]
type = VarSet
trigger1 = var(17)
v = 21
value = 0

[State -2, Leave Combo Counting Mode]
type = VarSet
triggerall = var(17)
trigger1 = P2MoveType != H || WinKO
v = 22
value = var(18)
ignorehitpause = 1

[State -2, Leave Combo Counting Mode]
type = VarSet
triggerall = var(17)
trigger1 = P2MoveType != H || WinKO
v = 18
value = 0
ignorehitpause = 1

[State -2, Leave Combo Counting Mode]
type = VarSet
triggerall = var(17)
trigger1 = P2MoveType != H || WinKO
v = 19
value = 0
ignorehitpause = 1

[State -2, Leave Combo Counting Mode]
type = VarSet
triggerall = var(17)
trigger1 = P2MoveType != H || WinKO
v = 17
value = 0
ignorehitpause = 1

[State -2, Get Facing]
type = VarSet
triggerall = var(23) = 0
trigger1 = RoundState = 2
v = 23
value = Facing

; Gethit PalFX
[State -2, PalfX]
type = PalFX
triggerall = var(3)
triggerall = var(28) > 0
trigger1 = (var(28) % 4) = 1
add = 128,40,0
mul = 256,256,256
color = 256
time = 2
ignorehitpause = 1

[State -2, Add]
type = VarAdd
triggerall = var(3)
trigger1 = var(28) > 0
v = 28
value = 1
ignorehitpause = 1

[State -2, Clear]
type = VarSet
triggerall = var(3)
trigger1 = var(28) > 16
v = 28
value = 0 
ignorehitpause = 1

; End-of-tick updates

[State -2, Hit Count]
type = VarSet
trigger1 = var(17)
v = 19
value = HitCount

;==========================================================================
; Statedef -3
;==========================================================================
[Statedef -3]

; Record AI being active
[State -3, Record AI]
type = VarSet
triggerall = var(13)
trigger1 = !var(57)
v = 57
value = 1

[State -3, Increment]
type = VarAdd
trigger1 = var(3)
v = 33
value = 1

; Gethit sounds (Used BB Hood as reference)
; Ow sound randomizer

[State -3, 1]
type = VarRandom
trigger1 = StateNo = 5000
trigger1 = time = 1
v = 0

; Super Armor controllers
[State -3, Increment Counter]
type = VarAdd
triggerall = var(3)
trigger1 = Stateno = 9000
v = 10
value = 5

[State -3, Decrement Counter]
type = VarAdd
triggerall = var(3)
trigger1 = (StateNo != 9000) && (Var(10) > 0)&& (MoveType != H)
v = 10
value = -1
ignorehitpause = 1

[State -3, Save StateNo]
type = VarSet
triggerall = var(3)
trigger1 = (MoveType != H) && (StateNo != 9000)
var(11) = StateNo

[State -3, Save Ctrl]
type = VarSet
triggerall = var(3)
trigger1 = (MoveType != H) && (StateNo != 9000)
var(27) = Ctrl

; ƒ_ƒ[ƒWƒ{ƒCƒX 
[State 1120, ƒ_ƒ[ƒWƒ{ƒCƒX]
type = PlaySnd
triggerall = alive && movetype = H
triggerall = random % 10 < 5
trigger1 = stateno = 5000 && time = 1
trigger2 = stateno = 5010 && time = 1
trigger3 = stateno = 5020 && time = 1
trigger4 = stateno = 5070 && time = 1
trigger5 = stateno = 5080 && time = 1
value = s5000,random%2
channel = 2
volume = 200
volumescale = 200

[State 0, StopSnd]
type = StopSnd
trigger1 =  !alive
channel =2
;ignorehitpau
