;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 10000   ;パワーゲージ最大値
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 113    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 255      ;キャラの標準の音量（最小-255・最大255

;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale = .833			;水平方向の縮尺（通常１）
yscale = 1.07			;垂直方向の縮尺（通常１）
ground.back = 20		;キャラの幅(後方,地上)
ground.front = 20		;キャラの幅(前方,地上)
air.back = 15			;キャラの幅(後方,空中)
air.front = 15		;キャラの幅(前方,空中)
height = 65			;キャラの高さ
attack.dist = 160		;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 90	;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0		;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = -6, -105		;頭の大体の座標
mid.pos = 8, -72		;体の中心の大体の座標
shadowoffset = 0		;影の垂直方向のオフセット
draw.offset = 0,0		;使用しない

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd  = 2.6      ;前進の速度
walk.back = -2     ;後退の速度
run.fwd  = 6.5, 0    ;前ダッシュの速度（ホップする時はyを-にする）
run.back = -6.1,-3.8 ;後ダッシュの速度（ホップする時はyを-にする）
jump.neu = 0,-10.7	　 ;垂直ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.back = -2.5	   ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd = 3.33		　 ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -4.5,-11	   ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される） 
runjump.fwd = 4.5,-11	   ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu = 0,-8.1      ;２段ジャンプ以降の垂直ジャンプの速度(オプション)
airjump.back = -2.55      ;２段ジャンプ以降の後ジャンプの速度(オプション)
airjump.fwd = 2.5         ;２段ジャンプ以降の前ジャンプの速度

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .6       ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S
ctrl = 0

[State 180, win]
type=changestate
trigger1= prevstateno=183 || prevstateno=184
value=prevstateno

[State 0, end]
type = VarRandom
trigger1 = !time
v = 14
range = 0,1

[State 0, end]
type = changestate
trigger1 = !Ishelper && !var(0)
trigger1 = time > 0
value = ifelse(matchover,182,ifelse(var(14),181,185))

[State 0, end]
type = changestate
trigger1 = !Ishelper && var(0)
trigger1 = time > 100
value = 183

[State 0, end]
type = changestate
trigger1 = Ishelper(10000)
trigger1 = time > 0
value = ifelse(matchover,10181,10180)
;---------------------------------------------------------------------------
;勝利1
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 195]
type = playsnd
trigger1 = anim = 180 && animelem = 3
value = 100,9
channel = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 0, helper]
type = helper
trigger1 = !fvar(11)
trigger1 = time = 1
trigger2 = fvar(11) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
;勝利2
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 195]
type = playsnd
trigger1 = animelemtime(4) = 0
value = 100,15
channel = 0
persistent = 0

[state 0, helper]
type = helper
trigger1 = !fvar(11)
trigger1 = time = 1
trigger2 = fvar(11) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
;勝利3
[Statedef 185]
type = S
ctrl = 0
anim = 199
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 195]
type = playsnd
trigger1 = !time
value = 100,17
channel = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 0, helper]
type = helper
trigger1 = !fvar(11)
trigger1 = time = 1
trigger2 = fvar(11) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
;勝利（on時本体）
[Statedef 183]
type = S
ctrl = 0
velset = 0,0

[State 195]
type = changeanim
trigger1 = !time
trigger1 = prevstateno != 180
value = 180+(random%2)

[State 195]
type = playsnd
trigger1 = prevstateno != 180
trigger1 = anim = 180 && animelem = 3
value = 100,9
channel = 0

[State 195]
type = playsnd
trigger1 = prevstateno != 180
trigger1 = anim = 181
trigger1 = animelemtime(4) = 0
value = 100,15
channel = 0
persistent = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
[Statedef 184]
type = S
ctrl = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State -3, end]
type = changestate
trigger1 = time >= 1
value = 183
;---------------------------------------------------------------------------
;勝利(Son)
[Statedef 10180]
type = S
ctrl = 0
anim = 10180
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 195]
type = playsnd
trigger1 = animelemtime(4) = 0
value = 100,16
channel = 0

[state 0, helper]
type = helper
trigger1 = !root,fvar(11)
trigger1 = time = 1
trigger2 = root,fvar(11) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100
;---------------------------------------------------------------------------
;勝利(Son)2
[Statedef 10181]
type = S
ctrl = 0
anim = 10181
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 195]
type = playsnd
trigger1 = animelemtime(4) = 0
value = 100,2
channel = 0

[state 0, helper]
type = helper
trigger1 = !root,fvar(11)
trigger1 = time = 1
trigger2 = root,fvar(11) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100
;---------------------------------------------------------------------------
;勝利(待機)
[Statedef 10185]
type = S
ctrl = 0
anim = 10000
velset = 0,0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, win]
type = changestate
trigger1 = root,stateno = 183 || root,stateno = 171
value = ifelse(win,180,170)

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 0, power]
type = powerset
trigger1 = roundsexisted = 0
trigger1 = !time
trigger1 = power < 1000
value = 1000

[State 0, end]
type = changestate
triggerall = enemy,authorname = "warusaki3" || enemy,authorname = "kikurage" || enemy,authorname = "Shio"
trigger1 = p2name = "dio"
trigger2 = p2name = "final dio"
trigger3 = p2name = "shadow dio"
trigger4 = p2name = "Shadow Dio"
trigger5 = p2name = "DIO BRANDO"
value = 194

[State -2, 3]
type = ChangeState
triggerall = teamside = 1
trigger1 = (P2Name = "devo" || P4Name = "devo") && EnemyNear,AuthorName = "Nimame"
value = 191+(random%2)

[State -2, 3]
type = ChangeState
triggerall = teamside = 2
trigger1 = (P2Name = "devo" || P4Name = "devo") && EnemyNear,AuthorName = "Nimame"
value = 191+(P2stateno=191)

[State 0, end]
type = changestate
trigger1 = 1
value = 191 + (random%2)
;---------------------------------------------------------------------------
;イントロ1
[Statedef 191]
type = S
ctrl = 0
anim = 9999

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
pos = -42,-10
postype = p1
name = "intro1"
stateno = 196
id = 196
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 30
value = 190

[State -2, Voice]
type = PlaySnd
trigger1 = time = 50
value = 100,17
channel = 0

[State -2, Voice]
type = PlaySnd
trigger1 = anim = 190
trigger1 = animelemtime(18)=0
value = 190,1

[State 0, explod]
type = explod
trigger1 = anim = 190
trigger1 = animelemtime(18)=0
anim = 6001
id = 6001
facing = -1
postype = p1
pos = -50,-55
sprpriority = 3
ownpal = 1

[State 191, ステート変更]
type = ChangeState
trigger1 = anim = 190
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
;イントロ2
[Statedef 192]
type = S
physics = S
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Intro

[State 0, anim]
type = changeanim
triggerall = time > 0
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger1 = enemy,time >= 16
trigger2 = time > 240
trigger3 = roundsexisted = 0
trigger3 = roundno > 1
trigger4 = p2name = "jotaro" && enemy,authorname = "y.y" && p2stateno = 160
trigger5 = p2name = "joseph" && enemy,authorname = "y.y" && p2stateno = 160
trigger6 = p2name = "Hol horse" && enemy,authorname = "y.y" && p2stateno = 160
trigger8 = p2name = "Jotaro Kujo" && enemy,authorname = "warusaki3" && p2stateno = 192
value = 197
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 197 && animelem = 2
value = 100,15
channel = 0

[State 0, end]
type = changestate
trigger1 = anim = 197 && !animtime
value = 0

;---------------------------------------------------------------------------
;イントロ3(DIO)
[Statedef 194]
type = S
ctrl = 0

[State 0, anim]
type = changeanim
triggerall = time > 0
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger1 = enemy,time >= 16
value = 195
persistent = 0

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State -2, Voice]
type = PlaySnd
trigger1 = anim = 195 && animelemtime(1) = 0
value = 100,0
channel = 0
persistent = 0

[State 191, ステート変更]
type = ChangeState
trigger1 = anim = 195 && !animtime
value = 0
;---------------------------------------------------------------------------
;off挑発1
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 198
velset = 0,0
sprpriority = 0

[State 195]
type = playsnd
trigger1 = animelemtime(2)=0
value = 100,9
channel = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;off挑発2
[Statedef 188]
type = S
movetype = I
physics = S
ctrl = 0
anim = 199
velset = 0,0
sprpriority = 0

[State 195]
type = playsnd
trigger1 = animelemtime(3)=0
value = 100,15
channel = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = time = 80
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;off挑発3
[Statedef 189]
type = S
movetype = I
physics = S
ctrl = 0
anim = 189
velset = 0,0
sprpriority = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;冷蔵庫
[Statedef 196]
anim = 191

[State 195]
type = playsnd
trigger1 = animelemtime(2) = 0
value = 190,0

[State 195]
type = velset
trigger1 = time = 198
x = -5
y = -3

[state 0, helper]
type = helper
trigger1 = time = 198
helpertype = normal
pos = 0,0
postype = p1
name = "intro2"
stateno = 197
id = 197
ownpal = 1

[state 0, helper]
type = helper
trigger1 = time = 198
helpertype = normal
pos = 0,0
postype = p1
name = "intro3"
stateno = 198
id = 198
ownpal = 1

[state 0, helper]
type = helper
trigger1 = time = 198
helpertype = normal
pos = 0,0
postype = p1
name = "intro4"
stateno = 199
id = 199
ownpal = 1

[state 0, helper]
type = helper
trigger1 = time = 198
helpertype = normal
pos = 0,0
postype = p1
name = "intro5"
stateno = 193
id = 193
ownpal = 1

[State 195]
type = destroyself
trigger1 = !animtime
;---------------------------------------------------------------------------
;ワイン
[Statedef 197]
anim = 192
sprpriority = 2
velset = 0,0

[State 195]
type = veladd
trigger1 = time < 14
y = .6

[State 195]
type = AssertSpecial
trigger1 = time > 14
trigger1 = !(gametime%2)
flag = invisible

[State 195]
type = velset
trigger1 = !time
x = 1

[State 195]
type = velset
trigger1 = time = 14
x = 2
y = -1

[State 195]
type = veladd
trigger1 = time > 14
x = -.05
y = .1

[State 195]
type = destroyself
trigger1 = time = 38
;---------------------------------------------------------------------------
;缶1
[Statedef 198]
anim = 193
sprpriority = 2
velset = 0,0

[State 195]
type = veladd
trigger1 = time < 20
y = .3

[State 195]
type = AssertSpecial
trigger1 = time > 20
trigger1 = !(gametime%2)
flag = invisible

[State 195]
type = velset
trigger1 = !time
x = .4

[State 195]
type = velset
trigger1 = time = 20
x = .3
y = -2

[State 195]
type = veladd
trigger1 = time > 20
x = -.02
y = .1

[State 195]
type = destroyself
trigger1 = time = 58
;---------------------------------------------------------------------------
;缶2
[Statedef 199]
anim = 194
sprpriority = 2
velset = 0,0

[State 195]
type = veladd
trigger1 = time < 15
y = .4

[State 195]
type = AssertSpecial
trigger1 = time > 15
trigger1 = !(gametime%2)
flag = invisible

[State 195]
type = velset
trigger1 = !time
x = .8

[State 195]
type = velset
trigger1 = time = 15
x = .6
y = -2

[State 195]
type = veladd
trigger1 = time > 15
x = -.01
y = .1

[State 195]
type = destroyself
trigger1 = time = 55
;---------------------------------------------------------------------------
;缶3
[Statedef 193]
anim = 196
sprpriority = 2
velset = 0,0

[State 195]
type = AssertSpecial
trigger1 = time > 20
trigger1 = !(gametime%2)
flag = invisible

[State 195]
type = velset
trigger1 = !time
x = -.3
y = -2

[State 195]
type = veladd
trigger1 = time < 22
x = .01
y = .4

[State 195]
type = velset
trigger1 = time = 22
x = -1
y = -2

[State 195]
type = destroyself
trigger1 = time = 35
;---------------------------------------------------------------------------
;on挑発1
[Statedef 10195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 10195
velset = 0,0

[State 0, var]
type = parentvarset
trigger1 = time = 2
var(6) = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = Ishelper(10000)
trigger1 = root,stateno = 3500 && root,time >= 1
value = 3550
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = root,movetype != H
trigger1 = Ishelper(10000)
trigger1 = root,stateno = [900,910]
value = 9500

[State 0, end]
type = changestate
trigger1 = 1
trigger1 = !root,var(0)
value = 9400

[State 195]
type = playsnd
trigger1 = anim = 10195 && animelemtime(4) = 0
value = 100,16
channel = 0
persistent = 0

[State 195, ステート変更]
type = Changeanim
trigger1 = anim != 10198
trigger1 = time = 60
value = 10198

[State 195, ステート変更]
type = Changestate
trigger1 = anim = 10198 && !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;on挑発2
[Statedef 10196]
type = S
movetype = I
physics = S
ctrl = 0
anim = 10196
velset = 0,0

[State 0, var]
type = parentvarset
trigger1 = time = 2
var(6) = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = Ishelper(10000)
trigger1 = root,stateno = 3500 && root,time >= 1
value = 3550
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = root,movetype != H
trigger1 = Ishelper(10000)
trigger1 = root,stateno = [900,910]
value = 9500

[State 0, end]
type = changestate
trigger1 = 1
trigger1 = !root,var(0)
value = 9400

[State 195]
type = playsnd
trigger1 = anim = 10196 && animelemtime(4) = 0
value = 100,16
channel = 0
persistent = 0

[State 195, ステート変更]
type = Changeanim
trigger1 = anim != 10198
trigger1 = time = 60
value = 10198

[State 195, ステート変更]
type = Changestate
trigger1 = anim = 10198 && !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;on挑発3
[Statedef 10197]
type = S
movetype = I
physics = S
ctrl = 0
anim = 10197
velset = 0,0

[State 0, var]
type = parentvarset
trigger1 = time = 2
var(6) = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = IsHelper
slot = 0
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = Ishelper(10000)
trigger1 = root,stateno = 3500 && root,time >= 1
value = 3550
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = root,movetype != H
trigger1 = Ishelper(10000)
trigger1 = root,stateno = [900,910]
value = 9500

[State 0, end]
type = changestate
trigger1 = 1
trigger1 = !root,var(0)
value = 9400

[State 195]
type = playsnd
trigger1 = animelemtime(10) = 0
value = 100,2
channel = 0

[State 195, ステート変更]
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;回り込み
[Statedef 300]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
velset = 0,0
sprpriority = -1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, hitby]
type = hitby
Trigger1 = ifelse(((helper(20032*(numhelper(20032)>0)),var(10)) = 0),1,Animtime<=-8)
value = SCA,AT

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,15
channel = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[state 0, helper]
type = helper
trigger1 = animelem = 3
helpertype = normal
name = "Image"
stateno = 305
id = 305
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 1

[State 0, vel]
type = veladd
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(6) <= 0
x = .95

[State 0, vel]
type = velmul
trigger1 = animelemtime(6) > 2
x = .92

[State 0, vel]
type = velset
trigger1 = animelem = 9
x = 0

[State 0, var]
type = varset
trigger1 = !animtime
var(56) = 8

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 305]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
vel = 0,0
sprpriority = -3

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, vel]
type = veladd
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(6) <= 0
x = .95

[State 0, vel]
type = velmul
trigger1 = animelemtime(6) > 2
x = .92

[State 0, vel]
type = velset
trigger1 = animelem = 9
x = 0

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 300

;===========================================================================
; 通常攻撃技
;===========================================================================
;Soff立ち弱
[Statedef 200]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),201,200)
poweradd = 0
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = anim = 200 && animelemtime(8) = 0
trigger2 = anim = 201 && animelemtime(7) = 0
x = 0

[State 0, vel]
type = velmul
trigger1 = prevstateno = [100,105]
trigger1 = !var(34)
x = .95

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,10

[State 0, hit]
type = hitdef
trigger1 = anim = 200
trigger1 = animelem = 3
attr = S, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -14,-70
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
guard.ctrltime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-4.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
id = 200
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 201
trigger1 = animelem = 3
attr = S, NA
damage = ceil(ifelse((35*fvar(0))<7,7,(35*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -14,-70
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -4,ifelse(var(40)<12,-1.5+(var(40)*.12),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
id = 200
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(6) > 1 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(6) > 1 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(6) > 1 && command = "holddown" && prevstateno != [100,105]
value = 10
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff立ち中
[Statedef 210]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),211,210)
poweradd = 40*!(var(9)=2)
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = anim = 210 && animelemtime(5) = 0
trigger3 = anim = 211 && animelemtime(5) = 0
x = 0

[State 0, vel]
type = velmul
trigger1 = prevstateno = [100,105]
trigger1 = !var(34)
x = .95

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,11

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, NA
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = up
pausetime = 0,11
sparkno = s6001
sparkxy = -14,-70
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50*!(var(9)=2),0
givepower = 25*!(var(9)=2),0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -1.2,-8.0*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -5
air.velocity = -1.2,-8.0*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.type = Low
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 1
fall.recovertime = 32;ifelse(var(40)<=7,32-var(40)*3,11)
air.fall = 1
yaccel = .36
id = 210
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 10
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;===========================================================================
;Soff6中
[Statedef 215]
type = S
movetype = A
physics = N
ctrl = 0
anim = 215
poweradd = 40*!(var(9)=2)
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger2 = animelemtime(9) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 0
x = 8

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = animelemtime(5) > 0
x = .9

[State 0, vel]
type = velmul
trigger1 = movecontact = 1
x = .6

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 100,9
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 0,11

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
attr = S, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6002
sparkxy = -15,-50
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50*!(var(9)=2),0
givepower = 25*!(var(9)=2),0
ground.type = Low
ground.slidetime = 24
ground.hittime = 24
ground.velocity = -5,-10*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -2
air.velocity = -5,-10*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.type = Low
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
fall.recovertime = 32
air.fall = 0
yaccel = .36
id = 215
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 6
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff立ち強
[Statedef 220]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse(prevstateno=100,221,220)
poweradd = 50*!(var(9)=2)
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = animelemtime(5) = 2
trigger2 = prevstateno = 105
x = 0

[State 0, vel]
type = velmul
trigger1 = prevstateno = 105
trigger1 = !var(34)
x = .95

[State 0, vel]
type = velset
trigger1 = anim = 221
trigger1 = animelemtime(2) = 0
x = 9

[State 0, vel]
type = velmul
trigger1 = anim = 221 && !var(34)
trigger1 = animelemtime(5) > 0
x = .9

[State 0, vel]
type = velmul
trigger1 = anim = 221
trigger1 = movecontact = 1
x = .6

[State 0, snd]
type = playsnd
trigger1 = anim = 221
trigger1 = animelem = 2
value = 100,9
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 220
trigger1 = animelem = 3
value = 0,12

[State 0, snd]
type = playsnd
trigger1 = anim = 221
trigger1 = animelem = 2
value = 0,12

[State 0, hit]
type = hitdef
triggerall = anim = 220
triggerall = !movecontact
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = S, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = high
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -14,-65
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60*!(var(9)=2),0
givepower = 30*!(var(9)=2),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -3,8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 0
air.fall = 0
yaccel = .36
id = 220
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = anim = 221
triggerall = !movecontact
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
attr = S, NA
damage = ceil(ifelse((77*fvar(0))<7,7,(77*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -15,-50
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 60*!(var(9)=2),0
givepower = 30*!(var(9)=2),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5,-8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -2
air.velocity = -5,-8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.type = Low
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 1
fall.recovertime = 32
air.fall = 0
yaccel = .36
id = 221
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 12
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff屈弱
[Statedef 400]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
poweradd = 0
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = !animtime
x = 0

[State 0, vel]
type = velmul
trigger1 = prevstateno = [100,105]
trigger1 = !var(34)
x = .95

[State 200, Snd]
type = playsnd
trigger1 = anim = 400
trigger1 = animelem = 2
trigger2 = anim = 401
trigger2 = animelem = 4
value = 0,10

[State 0, hit]
type = hitdef
trigger1 = anim = 400
trigger1 = animelem = 2
attr = C, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -20,-7
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
id = 400
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 401
trigger1 = animelem = 4
attr = C, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -20,-7
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5
air.type = Low
air.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
id = 400
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(4) > 1 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(4) > 1 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(4) > 1 && command != "holddown" && command != "holdfwd" && command != "holdback" && prevstateno != [100,105]
value = 12
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff屈中
[Statedef 410]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno = [100,105]),411,410)
poweradd = 40*!(var(9)=2)
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = anim = 410 && animelemtime(4) = 0
trigger3 = anim = 411 && animelemtime(8) = 0
x = 0

[State 0, vel]
type = velmul
trigger1 = prevstateno = [100,105]
trigger1 = !var(34)
x = .95

[State 200, Snd]
type = playsnd
trigger1 = anim = 410
trigger1 = animelem = 5
trigger2 = anim = 411
trigger2 = animelem = 7
value = 0,10

[State 0, vel]
type = velset
trigger1 = prevstateno != [100,105]
trigger1 = !time
x = 5

[State 0, snd]
type = playsnd
trigger1 = prevstateno = [100,105]
trigger1 = !time
value = 100,9
channel = 0

[State 0, hit]
type = hitdef
trigger1 = anim = 410
trigger1 = animelem = 5
attr = C, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = L
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6001
sparkxy = -20,-7
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50*!(var(9)=2),0
givepower = 25*!(var(9)=2),0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = 410
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 411
trigger1 = animelem = 7
attr = C, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),0
priority = 4,Hit
hitflag = MAF
guardflag = L
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6001
sparkxy = -20,-7
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50*!(var(9)=2),0
givepower = 25*!(var(9)=2),0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -8
guard.velocity = -7
air.type = Low
air.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = 411
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 10
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1
;===========================================================================
;本体屈強
[Statedef 420]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno = [100,105]),421,420)
poweradd = 50*!(var(9)=2)
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = anim = 421 && animelemtime(6) = 0 && prevstateno = 105
trigger3 = anim = 421 && animelemtime(9) = 0 && prevstateno = 100
x = 0

[State 0, vel]
type = velmul
trigger1 = prevstateno = [100,105]
trigger1 = !var(34)
x = .95

[State 0, snd]
type = playsnd
triggerall = anim = 420
trigger1 = animelem = 2
trigger2 = animelem = 5
value = 0,11

[State 0, snd]
type = playsnd
triggerall = anim = 421
trigger1 = animelem = 4
trigger2 = animelem = 7
value = 0,11

[State 0, snd]
type = playsnd
trigger1 = prevstateno = [100,105]
trigger1 = !time
value = 100,9
channel = 0

[State 0, hit]
type = hitdef
trigger1 = anim = 420
trigger1 = animelem = 2
attr = C, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),3
priority = 5,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,3
sparkno = s6002
sparkxy = -20,-7
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 30,0
givepower = 15,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0
guard.velocity = 0
air.type = high
air.velocity = -3,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18;22
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = 420
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 420
trigger1 = animelem = 5
attr = C, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),3
priority = 5,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6002
sparkxy = -20,-7
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 30,0
givepower = 15,0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-3
guard.velocity = -5
air.type = high
air.velocity = -3,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 1
air.fall = 0
guard.kill = 0
yaccel = .36
id = 420
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 421
trigger1 = animelem = 4
attr = C, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),3
priority = 5,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,3
sparkno = s6002
sparkxy = -14,-7
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 30,0
givepower = 15,0
ground.type = high
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0
guard.velocity = 0
air.type = high
air.velocity = -3,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 22
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = 420
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 421
trigger1 = animelem = 7
attr = C, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),3
priority = 5,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6002
sparkxy = -12,-7
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 30,0
givepower = 15,0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5
guard.velocity = -5
air.type = high
air.velocity = -3,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 1
air.fall = 1
guard.kill = 0
yaccel = .36
id = 420
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
triggerall = movecontact = 1
trigger1 = anim = 420
trigger1 = animelemtime(2) > 0
trigger1 = animelemtime(3) < 0
trigger2 = anim = 421
trigger2 = animelemtime(4) > 0
trigger2 = animelemtime(5) < 0
var(8) = 2
ignorehitpause = 1
persistent = 0

[State 0, var]
type = varset
triggerall = movecontact = 1
trigger1 = anim = 420
trigger1 = animelemtime(5) > 0
trigger1 = animelemtime(6) < 0
trigger2 = anim = 421
trigger2 = animelemtime(7) > 0
trigger2 = animelemtime(8) < 0
var(8) = 12
ignorehitpause = 1
persistent = 0

[State 220, CornerPush]
type = VarSet
triggerall = movecontact = 1
trigger1 = anim = 420
trigger1 = animelemtime(5) > 0
trigger1 = animelemtime(6) < 0
trigger2 = anim = 421
trigger2 = animelemtime(7) > 0
trigger2 = animelemtime(8) < 0
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff3強
[Statedef 425]
type = C
movetype = A
physics = N
ctrl = 0
anim = 425
poweradd = 50*!(var(9)=2)
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger2 = animelemtime(8) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 0
x = 5

[State 200, Snd]
type = playsnd
trigger1 = animelem = 10
value = 0,10

[State 0, hit]
type = hitdef
trigger1 = animelem = 10
attr = C, NA
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = L
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6002
sparkxy = -20,-7
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60*!(var(9)=2),0
givepower = 30*!(var(9)=2),0
ground.type = trip
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-3
guard.velocity = -8
air.type = Low
air.velocity = -3,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 1
air.fall = 1
guard.kill = 0
yaccel = .36
id = 425
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 12
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;ジャンプ弱
[Statedef 600]
type    = A
movetype= A
physics = N
poweradd = 30
ctrl = 0
anim = 600
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Animelem = 3
value = 0, 10

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = A, NA
damage = ceil(ifelse((35*fvar(0))<7,7,(35*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -12,-70
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 0
fall.recovertime = 32
yaccel = .36
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse(var(5)||var(4)=2,.4,.5)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中
[Statedef 610]
type    = A
movetype= A
physics = N
poweradd = 40*!(var(9)=2)
ctrl = 0
anim = 610
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Animelem = 3
value = 0, 10

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = A, NA
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6001
sparkxy = -12,-70
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50*!(var(9)=2),0
givepower = 25*!(var(9)=2),0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 0
fall.recovertime = 32
yaccel = .36
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse(var(5)||var(4)=2,.4,.5)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 620]
type    = A
movetype= A
physics = N
poweradd = 50*!(var(9)=2)
ctrl = 0
anim = 620
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Animelem = 3
value = 0, 11

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = A, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6002
sparkxy = -12,-40
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60*!(var(9)=2),0
givepower = 30*!(var(9)=2),0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 0
fall.recovertime = 32
yaccel = .36
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse(var(5)||var(4)=2,.4,.5)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
; 投げ技
;===========================================================================
;掴み
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800

[State 0, hit]
type = hitdef
triggerall = !fvar(8)
trigger1 = p2movetype != H && (p2stateno != [40,42])
trigger1 = animelemtime(1) >= 0
attr = S,NT
priority = 1,Miss
hitflag = M-
sparkno = -1
hitsound = s0,10
;p1stateno = 810
p2stateno = 820
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
fall = 1
id = 800

[State 901, Throw]
type = ChangeState
trigger1 = numtarget(800)
trigger1 = target,stateno = 820
value = 810
persistent = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 220

;---------------------------------------------------------------------------
;成功
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
sprpriority = -1

[State 0, end]
type = changestate
triggerall = numtarget
trigger1 = time = [1,4]
trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "y" || target,command = "z" || target,command = "b" || target,command = "c"
value = 830

[State 810, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = !time
value = 0, 16

[State 0, snd]
type = playsnd
trigger1 = time = 5
value = 100, 3

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !time
pos = ceil(60*const(size.xscale)),0
postype = P1
time = -1

[State 0, spr]
type = sprpriority
trigger1 = animelemtime(2) = 0
value = 2

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = animelemtime(2) = 0
pos = ceil(30*const(size.xscale)),0
postype = P1
time = -1

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, target]
type = targetstate
triggerall = numtarget
trigger1 = !animtime
value = 821

[State 810]
type = Changestate
trigger1 = !animtime
value = 811
ctrl = 0
;---------------------------------------------------------------------------
;投げ中
[Statedef 811]
type    = S
movetype= A
physics = N
anim = 811

[State 810, 掴んだ相手の向き]
type = TargetFacing
triggerall = numtarget
trigger1 = !time
value = 1

[State 903, Vel]
type = VelSet
trigger1 = !time
x = 2
y = -7

[State 903, Vel]
type = Veladd
trigger1 = time > 15
y = .4

[State 903, Vel]
type = Veladd
trigger1 = time > 40
y = 1.3

[State 903, Vel]
type = TargetBind
triggerall = numtarget
trigger1 = animelemtime(1) >= 0
time = 1
pos = 25, -75

[State 810, 掴んだ相手の向き]
type = TargetFacing
triggerall = numtarget
trigger1 = animelemtime(2) = 0
value = -1

[State 903, Vel]
type = TargetBind
triggerall = numtarget
trigger1 = animelemtime(2) >= 0
time = 1
pos = -48, -116

[State 903, Vel]
type = TargetBind
triggerall = numtarget
trigger1 = animelemtime(3) >= 0
time = 1
pos = -40, -133

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = animelemtime(3) >= 0
edge = 60,0 ;画面端を押す幅を変える（オレンジの線）

[State 903, Vel]
type = TargetBind
triggerall = numtarget
trigger1 = animelemtime(4) >= 0
time = 1
pos = 0, -140

[State 0, snd]
type = playsnd
trigger1 = animelemtime(3) = 0
value = 0, 11

[State 903, Vel]
type = TargetBind
triggerall = numtarget
trigger1 = animelemtime(5) >= 0
time = 1
pos = 60, -105

[State 0, explod]
type = explod
trigger1 = !numexplod(8101)
trigger1 = animelemtime(6) = 0
anim = 8101
id = 8101
facing = 1
postype = p2
pos = 0,5
sprpriority = -3
ownpal = 1

[State 903, Vel]
type = TargetBind
triggerall = numtarget
trigger1 = animelemtime(6) >= 0
time = 1
pos = 70, 5

[State 903, Vel]
type = VelSet
trigger1 = animelemtime(5) > 0
trigger1 = pos y > -16
x = 0
y = 0

[State 903, Vel]
type = posSet
trigger1 = animelemtime(6) = 0
y = -10

[State 0, snd]
type = playsnd
trigger1 = animelemtime(6) = 0
value = 0, 27

[State 903, EnvShake]
type = EnvShake
trigger1 = animelemtime(6) = 0
time = 15
ampl = 10

[State 0, target]
type = targetstate
triggerall = numtarget
trigger1 = animelemtime(6) = 16
value = 822

[State 810, ステート変更]
type = ChangeState
trigger1 = animelemtime(6) = 16
value = 813

;---------------------------------------------------------------------------
;投げ終了
[Statedef 813]
type    = A
movetype= A
physics = N
velset = -2,-3.6
sprpriority = 0
anim = 812

[State 0, life]
type = targetlifeadd
triggerall = numtarget
trigger1 = !time
value = ceil(ifelse(-91*fvar(0)>-7,-7,-91*fvar(0)))

[State 820, 相手のアニメ変更]
type = veladd
trigger1 = 1
y = .2

[State 820, 相手のアニメ変更]
type = Changestate
trigger1 = pos Y > 0 && time > 10
value = 52
;---------------------------------------------------------------------------
;相手１
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 0

[State 820, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = !time
value = 820
;---------------------------------------------------------------------------
;相手２
[Statedef 821]
type    = A
movetype= H
physics = N

[State 820, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = !Time
value = 821

[State 0, nhb]
type = selfstate
trigger1 = time > 60
value = 5050

;---------------------------------------------------------------------------
;相手３
[Statedef 822]
type    = A
movetype =  H
physics = N
velset = 0,0
poweradd = 0
sprpriority = -2

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = !time
trigger1 = SelfAnimExist(5051)
value = 5051

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = !time     ;If no transition anim
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 903, Vel]
type = VelSet
trigger1 = !time
x = -3
y = -4

[State 903, Vel]
type = veladd
trigger1 = 1
x = .03
y = 0.2

[State 903, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 821, 2] 
type = SelfState
triggerall = Time > 20
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Time > 20
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 903, 2]
type = SelfState
trigger1 = Time > 14
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;投げぬけ（自分）（y.yさん製作）
[Statedef 830]
type = A
movetype = I
physics = A
anim = 5210+Ishelper(10000)*10000
velset = -3,-5

[State 0, target]
type = targetbind
triggerall = numtarget
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
triggerall = numtarget
trigger1 = !time
value = 840

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げ抜け（相手）
[Statedef 840]
type = A
movetype = I
physics = N
velset = -3,-6

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5210

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .45

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1
;---------------------------------------------------------------------------
;掴み（スタンド）
[Statedef 10800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 10800

[State 0, hit]
type = hitdef
triggerall = !root,fvar(9)
trigger1 = p2movetype != H && (p2stateno != [40,42])
trigger1 = animelem = 1
attr = S,NT
priority = 1,Miss
hitflag = M-
sparkno = -1
hitsound = s0,10
;p1stateno = 10810
p2stateno = 10820
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
fall = 1
id = 10800

[State 901, Throw]
type = ChangeState
trigger1 = numtarget(10800)
trigger1 = target,stateno = 10820
value = 10810
persistent = 0

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = 1
trigger1 = !root,var(0)
value = 9400

[State 0, end]
type = changestate
trigger1 = !animtime
value = 10220

;---------------------------------------------------------------------------
;成功
[Statedef 10810]
type    = S
movetype= A
physics = N
anim = 10810
sprpriority = -1

[State 0, end]
type = changestate
triggerall = numtarget
trigger1 = time = [1,4]
trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "y" || target,command = "z" || target,command = "b" || target,command = "c"
value = 830

[State 810, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = !time
value = 0, 16

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,6

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !time
pos = ceil(60*const(size.xscale)),0
postype = P1
time = 1

[State 0, spr]
type = sprpriority
trigger1 = animelemtime(3) = 0
value = 2

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, target]
type = targetstate
triggerall = numtarget
trigger1 = animelemtime(6) = 8
value = 10821

[State 0, life]
type = targetlifeadd
triggerall = numtarget
trigger1 = animelemtime(6) = 8
value = ceil(ifelse(-91*root,fvar(0)>-7,-7,-91*root,fvar(0)))

[State 0, end]
type = parentvaradd
trigger1 = animelemtime(6) = 8
var(40) = 1

[State 0, snd]
type = playsnd
trigger1 = animelemtime(6) = 0
value = 0,7

[State 0, explod]
type = explod
trigger1 = animelemtime(6) = 0
anim = 6003
id = 6003
pos = ceil(14*const(size.xscale)),ceil(-40*const(size.yscale))
postype = p2
facing = -1
sprpriority = 2

[State 0, explod]
type = explod
trigger1 = animelemtime(6) = 0
anim = 6301
id = 6301
pos = ceil(14*const(size.xscale)),ceil(-40*const(size.yscale))
postype = p2
facing = -1
sprpriority = 3

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = 1
trigger1 = !root,var(0)
value = 9400

[State 810]
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;相手１
[Statedef 10820]
type    = S
movetype =  H
physics = N
velset = 0,0
sprpriority = 0

[State 810]
type = Changeanim2
trigger1 = !time
value = 10820

[State 0, nhb]
type = selfstate
trigger1 = time > 60
value = 5050

;---------------------------------------------------------------------------
;相手２
[Statedef 10821]
type    = A
movetype =  H
physics = N
velset = 0,0
poweradd = 0

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = !time
trigger1 = SelfAnimExist(5051)
value = 5051

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = !time     ;If no transition anim
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 903, Vel]
type = VelSet
trigger1 = !time
x = -6
y = -7

[State 903, Vel]
type = veladd
trigger1 = 1
y = 0.3

[State 903, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 821, 2] 
type = selfState
triggerall = Time > 20
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Time > 20
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 

[State 903, 2]
type = SelfState
trigger1 = Time > 14
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
;===========================================================================
; 必殺技
;===========================================================================
;ピラニアダイブ(本体)
[Statedef 1000]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ピラニアダイブ(スタンド)
[Statedef 1050]
type = U
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 180]
type = Helper
trigger1 = !time
name = "Effect"
helpertype = normal
stateno = 30900
id = 30900
facing = ifelse(root,facing = 1,1,-1)
pos = 0,-30
postype = p1
ownpal = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(10) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, turn]
type = turn
trigger1 = animelem = 6
trigger1 = p2dist x < 0
persistent = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(2) = ifelse(root,command = "Piranha3",2,ifelse(root,command = "Piranha2",1,0))

[State 0, vel]
type = changeanim
trigger1 = !time
value = 1050+root,var(2)

[State 0, power]
type = poweradd
trigger1 = anim = 1050+root,var(2)
trigger1 = animelemtime(9) = 0
value = 20

[State 0, pal]
type = palfx
triggerall = anim = 1050+root,var(2)
trigger1 = animelemtime(2) >=0
trigger1 = animelemtime(6) < 0
trigger1 = time%2
add = 128,128,256
time = 1
ignorehitpause = 1

[State 10001]
type = PalFX
triggerall = anim = 1050+root,var(2)
trigger1 = animelemtime(1) >=0
trigger1 = animelemtime(2) < 0
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,33

[State 10001];!
type = Explod
trigger1 = !time
anim = 7200
ID = 7200
pos = 0, -70
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, vel]
type = playsnd
trigger1 = anim = 1050+root,var(2)
trigger1 = animelemtime(9) = 0
value = 100,18
channel = 0

[State 0, explod]
type = explod
trigger1 = anim = 1050+root,var(2)
trigger1 = animelemtime(11) = 0
anim = 8040
id = 8040
pos = 0,0
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1

[State 0, vel]
type = velset
trigger1 = anim = 1050+root,var(2)
trigger1 = animelemtime(11) = 0
x = ifelse(root,var(2)=2,6,5)

[State 0, vel]
type = changeanim
triggerall = anim = 1050+root,var(2)
trigger1 = !animtime
trigger2 = p2bodydist x <= 15 && animelemtime(11) > 0
value = 1055

[State 0, vel]
type = velset
trigger1 = anim = 1055
trigger1 = animelemtime(1) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = anim = 1055
trigger1 = animelemtime(1) = 0
x = 5
y = -5.5
[State 0, vel]
type = veladd
trigger1 = anim = 1055
trigger1 = animelemtime(1) > 0
y = .48
[State 0, vel]
type = velmul
triggerall = anim = 1055
trigger1 = animelemtime(2) = 5
x = .4

[State 0, vel]
type = changestate
trigger1 = anim = 1055
trigger1 = animelemtime(2) > 2
trigger1 = pos y > 0
value = 9000

[State 0, hit]
type = hitdef
trigger1 = anim = 1055
trigger1 = animelem = 2
attr = A, SA
damage = ceil(ifelse((56*root,fvar(0))<7,7,(56*root,fvar(0)))),ceil(ifelse((56*root,fvar(0)*.25)<7,7,(56*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6001
sparkxy = -10,-60
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 20,0
ground.type = low
ground.slidetime = 20
ground.hittime = 20
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -5.5
air.type = low
air.velocity = 0,-5.5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 0
yaccel = .36
id = 11000
guard.kill = 0
sprpriority = 2
p2facing = 1

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,7+(moveguarded=1)*2
ignorehitpause = 1
channel = 2

[state -2, var]
type = poweradd
trigger1 = movehit = 1
value = 40
ignorehitpause = 1

[State 10000, VarSet]
type = ParentVarSet
trigger1 = movehit
var(26) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, vel]
type = changestate
trigger1 = anim = 1055
trigger1 = movehit = 1
value = 1051

[State 0, vel]
type = changestate
trigger1 = anim = 1055
trigger1 = moveguarded = 1
value = 1055
;---------------------------------------------------------------------------
;ピラニアダイブ(スタンド)2
[Statedef 1051]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, vel]
type = changeanim
trigger1 = !time
value = 1060+root,var(2)

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, vel]
type = velset
trigger1 = animelemtime(1) = 3
x = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 1060
trigger1 = animelem = 2
trigger2 = anim = 1061
trigger2 = animelem = 7
trigger3 = anim = 1062
trigger3 = animelem = 14
attr = A, SA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6001
sparkxy = -10,-45
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 20
ground.hittime = 20
guard.ctrltime = 20
ground.velocity = -6
guard.velocity = -5.5
air.type = low
air.velocity = -4,-2*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
yaccel = .36
id = 11000
guard.kill = 0
sprpriority = 2
fall.recovertime = 18
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 1061
trigger1 = animelem = 2 || animelem = 4
trigger2 = anim = 1062
trigger2 = animelem = 2 || animelem = 5 || animelem = 8 || animelem = 11
attr = A, SA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6001
sparkxy = -10,-45
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 20
ground.hittime = 20
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -5.5
air.type = low
air.velocity = 0,-.5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
yaccel = .36
id = 11000
guard.kill = 0
sprpriority = 2
p2facing = 1

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,7+(moveguarded=1)*2
ignorehitpause = 1
channel = 2

[State 10000, VarSet]
type = ParentVarSet
trigger1 = movehit
var(26) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, vel]
type = changestate
trigger1 = !animtime
trigger2 = moveguarded = 1
value = 1055

;---------------------------------------------------------------------------
;ピラニアダイブ(スタンド)終了
[Statedef 1055]
type = A
movetype = I
physics = N
ctrl = 0
velset = -1.5,-3
sprpriority = 2
anim = 9503

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, assert]
type = assertspecial
trigger1 = time%2
flag = Invisible

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 10001]
type = PalFX
trigger1 = 1
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, vel]
type = posadd
trigger1 = !time
y = -20

[State 0, vel]
type = velmul
trigger1 = time = 8
x = .4

[State 0, vel]
type = veladd
trigger1 = time > 10
y = .6

[State 0, vel]
type = changestate
trigger1 = pos y > 0 && time > 5
value = 10000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650
;---------------------------------------------------------------------------
;ホッピングハンター(本体)
[Statedef 1100]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ホッピングハンター(スタンド)
[Statedef 1150]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 180]
type = Helper
trigger1 = !time
name = "Effect"
helpertype = normal
stateno = 30900
id = 30900
facing = ifelse(root,facing = 1,1,-1)
pos = 0,-30
postype = p1
ownpal = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(10) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = Width
trigger1 = 1
edge = 50,0

[state 1001,1]
type = Helper
trigger1 = time = 0
helpertype = normal
ID = 1155
stateno = 1155
supermovetime = 0
pausemovetime = 0

[State 0, turn]
type = turn
trigger1 = animelem = 6
trigger1 = p2dist x < 0
persistent = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(2) = ifelse(root,command = "Hopping3",2,ifelse(root,command = "Hopping2",1,0))

[State 0, vel]
type = changeanim
trigger1 = !time
value = 1150+root,var(2)

[State 0, power]
type = poweradd
trigger1 = anim = 1150+root,var(2)
trigger1 = animelemtime(8) = 0
value = 20

[State 0, pal]
type = palfx
triggerall = anim = 1150+root,var(2)
trigger1 = animelemtime(2) >=0
trigger1 = animelemtime(6) < 0
trigger1 = time%2
add = 128,128,256
time = 1
ignorehitpause = 1

[State 10001]
type = PalFX
triggerall = anim = 1150+root,var(2)
trigger1 = animelemtime(1) >=0
trigger1 = animelemtime(2) < 0
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,33

[State 10001];!
type = Explod
trigger1 = !time
anim = 7200
ID = 7200
pos = 0, -70
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, vel]
type = playsnd
trigger1 = anim = 1150+root,var(2)
trigger1 = animelemtime(8) = 0
value = 100,14
channel = 0

[State 0, vel]
type = playsnd
trigger1 = anim = 1150+root,var(2)
trigger1 = animelemtime(13) = 0
value = 0,34

[State 0, shake]
type = envshake
trigger1 = animelemtime(13) = 0
time = 8
ampl = -4

[State 0, vel]
type = velset
trigger1 = anim = 1150+root,var(2)
trigger1 = animelemtime(8) = 0
y = -6.5

[State 0, vel]
type = veladd
trigger1 = anim = 1150+root,var(2)
trigger1 = animelemtime(10) >= 0
y = .4

[State 0, vel]
type = velset
trigger1 = anim = 1150+root,var(2)
trigger1 = animelemtime(8) = 0
x = ifelse(root,var(2)=2,2.8,ifelse(root,var(2)=1,1.8,.8))

[State 0, vel]
type = posset
trigger1 = anim = 1150+root,var(2)
trigger1 = animelemtime(13) >= 0
y = -70

[State 0, vel]
type = velset
trigger1 = anim = 1150+root,var(2)
trigger1 = animelemtime(13) >= 0
x = 0
y = 0

[State 10001];!
type = Explod
trigger1 = animelemtime(13) = 1
anim = 8100
ID = 8100
pos = 35, 75
postype = p1
bindtime = 1
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
removeongethit = 0

[State 10001]
type = removeExplod
trigger1 = movecontact
id = 8100

[State 0, hit]
type = hitdef
trigger1 = animelem = 13 && root,var(2) = 0
attr = A, SA
damage = ceil(ifelse((14*root,fvar(0))<7,7,(14*root,fvar(0)))),ceil(ifelse((14*root,fvar(0)*.25)<7,7,(14*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,31
sparkno = s6005
sparkxy = -20,10
guard.sparkno = s6010
hitsound = s0,31
guardsound = s0,9
getpower = 0,0
givepower = 20,0
ground.type = low
ground.slidetime = 0
ground.hittime = 0
ground.velocity = 0
guard.velocity = 0
air.type = low
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
yaccel = .36
id = 11100
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 13 && root,var(2) = 1
attr = A, SA
damage = ceil(ifelse((21*root,fvar(0))<7,7,(21*root,fvar(0)))),ceil(ifelse((21*root,fvar(0)*.25)<7,7,(21*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,31
sparkno = s6005
sparkxy = -20,10
guard.sparkno = s6010
hitsound = s0,31
guardsound = s0,9
getpower = 0,0
givepower = 20,0
ground.type = low
ground.slidetime = 0
ground.hittime = 0
ground.velocity = 0
guard.velocity = 0
air.type = low
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
yaccel = .36
id = 11100
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 13 && root,var(2)=2
attr = A, SA
damage = ceil(ifelse((28*root,fvar(0))<7,7,(28*root,fvar(0)))),ceil(ifelse((28*root,fvar(0)*.25)<7,7,(28*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,31
sparkno = s6005
sparkxy = -20,10
guard.sparkno = s6010
hitsound = s0,31
guardsound = s0,9
getpower = 0,0
givepower = 20,0
ground.type = low
ground.slidetime = 0
ground.hittime = 0
ground.velocity = 0
guard.velocity = 0
air.type = low
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
yaccel = .36
id = 11100
guard.kill = 0
sprpriority = 2
p2facing = 1

[state -2, var]
type = poweradd
trigger1 = movehit = 1
value = 40

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 10000,4]
type = ChangeState
trigger1 = !animtime
value = 1151

;---------------------------------------------------------------------------
;ホッピングハンター(スタンド)終了
[Statedef 1151]
type = A
movetype = I
physics = N
ctrl = 0
velset = -1.6,-1
sprpriority = 2
anim = 9504

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, assert]
type = assertspecial
trigger1 = time%2
flag = Invisible

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 10001]
type = PalFX
trigger1 = 1
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, vel]
type = veladd
trigger1 = time > 5
y = .6

[State 0, vel]
type = changestate
trigger1 = pos y > 0 && time > 5
value = 10000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650
;-------------------------------------------------------------------------------
;ホッピングヘルパー
[Statedef 1155]
sprpriority = -10
anim = 1155

[state 1380]
type = Nothitby
trigger1 = 1
value = SCA

[state 1380]
type = BindToParent
trigger1 = 1
facing = 0
pos = 0, 40

[state 1380]
type = PlayerPush
trigger1 = 1
value = 1

[state 1380]
type = DestroySelf
trigger1 = parent,stateno != 1150
trigger1 = parent,stateno != 11100
trigger1 = parent,stateno != 31100
;---------------------------------------------------------------------------
;プロペラカッター(本体)
[Statedef 1200]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;プロペラカッター(スタンド)
[Statedef 1250]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 180]
type = Helper
trigger1 = !time
name = "Effect"
helpertype = normal
stateno = 30900
id = 30900
facing = ifelse(root,facing = 1,1,-1)
pos = 0,-30
postype = p1
ownpal = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(10) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[state 1001,1]
type = Helper
trigger1 = !numhelper(1255)
trigger1 = AnimElem = 12
helpertype = normal
ID = 1255
stateno = 1255
supermovetime = 0
pausemovetime = 0

[State 0, turn]
type = turn
trigger1 = animelem = 6
trigger1 = p2dist x < 0
persistent = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(2) = ifelse(root,command = "Propeller3",2,ifelse(root,command = "Propeller2",1,0))

[State 0, vel]
type = changeanim
trigger1 = !time
value = 1250+root,var(2)

[State 0, power]
type = poweradd
trigger1 = anim = 1250+root,var(2)
trigger1 = animelemtime(9) = 0
value = 20

[State 0, pal]
type = palfx
triggerall = anim = 1250+root,var(2)
trigger1 = animelemtime(2) >=0
trigger1 = animelemtime(6) < 0
trigger1 = time%2
add = 128,128,256
time = 1
ignorehitpause = 1

[State 10001]
type = PalFX
triggerall = anim = 1150+root,var(2)
trigger1 = animelemtime(1) >=0
trigger1 = animelemtime(2) < 0
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,33

[State 10001];!
type = Explod
trigger1 = !time
anim = 7200
ID = 7200
pos = 0, -70
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, vel]
type = playsnd
trigger1 = animelemtime(9) = 0
value = 100,2
channel = 0

[State 0, vel]
type = playsnd
triggerall = root,var(2) = 0
trigger1 = animelem = 12
trigger2 = animelem = 15
value = 0,10

[State 0, vel]
type = playsnd
triggerall = root,var(2) = 1
trigger1 = animelem = 12
trigger2 = animelem = 15
trigger3 = animelem = 17
trigger4 = animelem = 20
trigger5 = animelem = 22
value = 0,10

[State 0, vel]
type = playsnd
triggerall = root,var(2) = 2
trigger1 = animelem = 12
trigger2 = animelem = 14
trigger3 = animelem = 16
trigger4 = animelem = 18
trigger5 = animelem = 20
trigger6 = animelem = 22
value = 0,10

[State 0, hit]
type = hitdef
triggerall = root,var(2) = 0
trigger1 = animelem = 12
attr = S, SA
damage = ceil(ifelse((28*root,fvar(0))<7,7,(28*root,fvar(0)))),ceil(ifelse((28*root,fvar(0)*.25)<7,7,(28*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6002
sparkxy = -20,-50
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 12
guard.velocity = -8
air.type = high
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = root,var(2) = 0
trigger1 = animelem = 14 || animelem = 16
attr = S, SA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6001
sparkxy = -20,-50
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = high
ground.slidetime = ifelse(var(12)<2,19,13)
ground.hittime = ifelse(var(12)<2,19,13)
ground.velocity = ifelse(var(12)<2,3,-3)
guard.velocity = -5.5
air.type = high
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = ifelse(var(12)<2,19,16)
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = root,var(2) = 1
trigger1 = animelem = 12
attr = S, SA
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6002
sparkxy = -20,-50
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 12
guard.velocity = -8
air.type = high
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = root,var(2) = 1
trigger1 = animelem = 15 || animelem = 17 || animelem = 19 || animelem = 21
attr = S, SA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6001
sparkxy = -20,-50
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = high
ground.slidetime = ifelse(var(12)<2,19,13)
ground.hittime = ifelse(var(12)<2,19,13)
ground.velocity = ifelse(var(12)<2||var(12)=3,3,-3)
guard.velocity = -8
air.type = high
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = ifelse(var(12)<2,19,16)
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = root,var(2) = 2
trigger1 = animelem = 12
attr = S, SA
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6002
sparkxy = -20,-50
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 12
guard.velocity = -8
air.type = high
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = root,var(2) = 2
trigger1 = animelem = 15 || animelem = 17 || animelem = 20 || animelem = 22 || animelem = 25
attr = S, SA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6001
sparkxy = -20,-50
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = high
ground.slidetime = ifelse(var(12)<2,19,13)
ground.hittime = ifelse(var(12)<2,19,13)
ground.velocity = ifelse(var(12)<2||var(12)=3||var(12)=5,3,-3)
guard.velocity = -8
air.type = high
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = ifelse(var(12)<2,19,16)
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,7+(moveguarded=1)*2
ignorehitpause = 1
channel = 2

[state -2, var]
type = poweradd
trigger1 = movehit = 1
value = 30
ignorehitpause = 1

[state -2, var]
type = varset
trigger1 = !time
var(12) = 0
[state -2, var]
type = varadd
trigger1 = movehit = 1
var(12) = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movehit = 1 && var(12) >= 2
trigger1 = (var(12) = 2 || !(var(12)%2=0))
fvar(3) = 8.3
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movehit = 1 && var(12) >= 2
trigger1 = (var(12) != 2 || (var(12)%2=0))
fvar(3) = 0
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = moveguarded = 1
fvar(3) = 16
ignorehitpause = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 10000,4]
type = ChangeState
trigger1 = !animtime
value = 1251

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

;-------------------------------------------------------------------------------
;プロペラヘルパー
[Statedef 1255]
sprpriority = 3
anim = 1255+root,var(2)

[state 1380]
type = BindToParent
trigger1 = 1
facing = 1
pos = 0, 0

[state 1380]
type = changestate
trigger1 = parent,stateno != 1250
value = 1260
;-------------------------------------------------------------------------------
;プロペラヘルパー（終了）
[Statedef 1260]
sprpriority = 3
anim = 1260

[State 0, assert]
type = assertspecial
trigger1 = time%2
flag = Invisible

[State 0, assert]
type = velset
trigger1 = !time
x = ifelse(root,var(2)=2,-5,ifelse(root,var(2)=1,-3,-2))
y = -4

[State 0, assert]
type = veladd
trigger1 = time > 10
y = .4

[state 1380]
type = destroyself
trigger1 = time = 40

;---------------------------------------------------------------------------
;プロペラカッター(スタンド)終了
[Statedef 1251]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, assert]
type = assertspecial
trigger1 = time%2
flag = Invisible

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 10001]
type = PalFX
trigger1 = 1
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, vel]
type = changestate
trigger1 = !animtime
value = 10000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650
;===========================================================================
;スタンド出現攻撃(本体)
[Statedef 920]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, end]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, end]
type = changestate
trigger1 = !animtime
value = 20000
ctrl = 0

;---------------------------------------------------------------------------
;スタンド出現攻撃(スタンド)
[Statedef 970]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 10950

[State 0, var]
type = parentvarset
trigger1 = !time
var(0) = 10000

[State 0, var]
type = parentvarset
trigger1 = !time
var(10) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 10001];煙
type = Explod
trigger1 = !time
anim = 8010
ID = 8010
pos = -20, 0
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[state 1001,1]
type = Helper
trigger1 = !numhelper(10955)
trigger1 = AnimElem = 12
helpertype = normal
ID = 10955
stateno = 10955
supermovetime = 0
pausemovetime = 0

[State 0, turn]
type = turn
triggerall = anim = 10950
trigger1 = animelem = 6
trigger1 = p2dist x < 0
persistent = 0

[State 0, power]
type = poweradd
trigger1 = anim = 10950
trigger1 = animelemtime(6) = 0
value = 20

[State 0, pal]
type = palfx
triggerall = anim = 10950
trigger1 = animelemtime(2) >=0
trigger1 = animelemtime(6) < 0
trigger1 = time%2
add = 128,128,256
time = 1
ignorehitpause = 1

[State 10001]
type = PalFX
triggerall = anim = 10950
trigger1 = animelemtime(1) >=0
trigger1 = animelemtime(2) < 0
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,33

[State 10001];!
type = Explod
trigger1 = !time
anim = 7200
ID = 7200
pos = 0, -70
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = 1
trigger1 = !root,var(0)
value = 9400

[State 0, var]
type = posadd
trigger1 = animelemtime(12) >= 0 && anim != 10951
x = ifelse(command = "holdfwd",1,ifelse(command = "holdback",-1,0))

[State 0, vel]
type = playsnd
triggerall = anim = 10950
trigger1 = animelemtime(9) = 0
value = 100,2
channel = 0

[State 0, vel]
type = playsnd
triggerall = anim = 10950
trigger1 = animelem = 12
trigger2 = animelem = 15
trigger3 = animelem = 17
trigger4 = animelem = 20
trigger5 = animelem = 22
value = 0,10

[State 0, hit]
type = hitdef
trigger1 = anim = 10950
trigger1 = animelem = 12
attr = S, SA
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6002
sparkxy = -20,-50
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 12
guard.velocity = -8
air.type = high
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = anim = 10950
trigger1 = animelem = 15 || animelem = 17 || animelem = 19
trigger2 = anim = 11231
trigger2 = animelem = 2 || animelem = 4 || animelem = 6
attr = S, SA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6001
sparkxy = -20,-50
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = high
ground.slidetime = ifelse(var(12)<2,19,13)
ground.hittime = ifelse(var(12)<2,19,13)
ground.velocity = ifelse(var(12)=1,3,ifelse(var(12)%2=1,3,-3))
;ground.velocity = ifelse(var(12)%2=0||var(12)<2,3,-3)
guard.velocity = -8
air.type = high
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = ifelse(var(12)<2,19,16)
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,7+(moveguarded=1)*2
ignorehitpause = 1
channel = 2

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(44) = 1

[State 0, power]
type = poweradd
trigger1 = movehit = 1
value = 30

[state -2, var]
type = varset
trigger1 = !time
var(12) = 0
[state -2, var]
type = varadd
trigger1 = movehit = 1
var(12) = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movehit = 1 && var(12) >= 2
trigger1 = (var(12) = 2 || !(var(12)%2=0))
fvar(3) = 8.3
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movehit = 1 && var(12) >= 2
trigger1 = (var(12) != 2 || (var(12)%2=0))
fvar(3) = 0
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = moveguarded = 1
fvar(3) = 16
ignorehitpause = 1

[State 10000,4]
type = Changeanim
triggerall = anim = 10950
;trigger1 = !var(11)
trigger1 = time = 48
value = 11231

[state -2, var]
type = varset
trigger1 = !time
trigger2 = command = "x"
trigger3 = command = "y"
trigger4 = command = "z"
trigger5 = command = "b"
var(11) = 15
IgnoreHitPause = 1

[state -2, var]
type = varadd
trigger1 = time > 45
var(11) = -1
IgnoreHitPause = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 10000,4]
type = Changeanim
triggerall = anim = 10950 || anim = 11231
trigger1 = !var(11)
trigger2 = time = 103
value = 10951

[State 10000,4]
type = ChangeState
trigger1 = anim = 10951 && !animtime
value = 0
ctrl = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

;-------------------------------------------------------------------------------
[Statedef 10955]
sprpriority = 3
anim = 1255

[state 1380]
type = changeanim
triggerall = anim != 11207 && parent,time >= 24
trigger1 = parent,anim = 11231 && parent,time <= 80
value = 11207

[state 1380]
type = changeanim
triggerall = anim != 11208 && parent,time >= 24
trigger1 = parent,anim = 11231 && parent,time >= 80
value = 11208

[state 1380]
type = BindToParent
trigger1 = 1
facing = 1
pos = 0, 0

[state 1380]
type = changestate
trigger1 = parent,anim != 10950 && parent,anim != 11231
value = 1260
;-------------------------------------------------------------------------------
;プロペラヘルパー（終了）
[Statedef 1260]
sprpriority = 3
anim = 1260

[State 0, assert]
type = assertspecial
trigger1 = time%2
flag = Invisible

[State 0, assert]
type = velset
trigger1 = !time
x = ifelse(root,var(2)=2,-5,ifelse(root,var(2)=1||prevstateno=10955,-3,-2))
y = -4

[State 0, assert]
type = veladd
trigger1 = time > 10
y = .4

[state 1380]
type = destroyself
trigger1 = time = 40

;===========================================================================
; 超必殺技
;===========================================================================
;ジャンキーカーニバル（本体)
[Statedef 3000]
type = S
movetype = I
physics = S
ctrl = 0
anim = 3000
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, end]
type = changeanim
triggerall = !var(0)
trigger1 = anim != 3001
trigger1 = helper(10000),stateno = 3060
value = 3001

[State 0, end]
type = changeanim
triggerall = var(0)
trigger1 = anim != 3001
trigger1 = helper(10000),stateno = 13060
value = 3001

[State 0, nhb]
type = nothitby
trigger1 = !time
trigger2 = helper(10000),stateno = 3050
trigger3 = helper(10000),stateno = 3055 && helper(10000),time <= 30
value = SCA
time = 1
ignorehitpause = 1

[State 0, nhb]
type = null;nothitby
trigger1 = var(0)
trigger1 = !time
value = SCA
time = 30
ignorehitpause = 1

[State 0, nhb]
type = nothitby
triggerall = !var(0)
trigger1 = helper(10000),numtarget
trigger1 = helper(10000),movehit = 1
trigger2 = helper(10000),stateno = 3070
value = SCA
ignorehitpause = 1

[State 0, nhb]
type = nothitby
triggerall = var(0)
trigger1 = helper(10000),movehit = 1 && helper(10000),numtarget
trigger2 = helper(10000),stateno = 13070
value = SCA
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = anim = 3001 && !animtime
value = ifelse(!var(0),0,20000)
ctrl = ifelse(!var(0),1,0)

[State 0, end]
type = changestate
trigger1 = helper(10000),stateno = 3070 && helper(10000),time = 15
value = 3010

[State 0, end]
type = changestate
trigger1 = helper(10000),stateno = 13070 && helper(10000),time = 15
value = 3020

[State 0, end]
type = changestate
trigger1 = var(0) && time >= 5
trigger1 = helper(10000),stateno != [13000,13099]
value = 20000
ctrl = 0

[State 0, end]
type = changestate
trigger1 = !var(0) && time >= 5
trigger1 = helper(10000),stateno != [3050,3099]
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 3010]
type = S
movetype = I
physics = N
anim = 3010

[State 0, end]
type = playsnd
trigger1 = !time
value = 100,15
channel = 0

[State 0, end]
type = changeanim
trigger1 = anim != 3011
trigger1 = helper(10000),stateno = 3075 && helper(10000),time = 58
value = 3011

[State 0, end]
type = changestate
trigger1 = anim = 3011 && !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 3020]
type = S
movetype = I
physics = N
anim = 3010

[State 0, end]
type = playsnd
trigger1 = !time
value = 100,15
channel = 0

[State 0, end]
type = changeanim
trigger1 = anim != 3011
trigger1 = helper(10000),stateno = 13075 && helper(10000),time = 58
value = 3011

[State 0, end]
type = changestate
trigger1 = anim = 3011 && !animtime
value = 20000
ctrl = 0
;---------------------------------------------------------------------------
;Soffジャンキーカーニバル(スタンド)
[Statedef 3050]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 3050

[State 180]
type = Helper
trigger1 = !time
name = "Effect"
helpertype = normal
stateno = 30900
id = 30900
facing = ifelse(root,facing = 1,1,-1)
pos = 0,-30
postype = p1
ownpal = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, turn]
type = turn
trigger1 = animelem = 8
trigger1 = p2dist x < 0
persistent = 0

[State 0, pal]
type = palfx
trigger1 = animelemtime(2) >=0
trigger1 = animelemtime(6) < 0
trigger1 = time%2
add = 128,128,256
time = 1
ignorehitpause = 1

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,33

[State 10001];!
type = Explod
trigger1 = !time
anim = 7200
ID = 7200
pos = 0, -70
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, vel]
type = playsnd
trigger1 = animelemtime(8) = 0
value = 100,16
channel = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 220, 3]
type = Changestate
triggerall = time >= 16
trigger1 = command != "hold_x" && command != "hold_y" && command != "hold_z" && command != "hold_b"
trigger2 = time >= 100
value = 3055

;---------------------------------------------------------------------------
;ジャンキーカーニバルその２
[Statedef 3055]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3055

[state -2, var]
type = playsnd
trigger1 = animelemtime(4) = 0
value = 0,12

[State 0, explod]
type = explod
trigger1 = time = 32
anim = 8040
id = 8040
pos = 0,0
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1

[state 1001,1]
type = Helper
trigger1 = !numhelper(3056)
trigger1 = time = 32
helpertype = normal
ID = 3056
stateno = 3056
supermovetime = 0
pausemovetime = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, nhb]
type = nothitby
trigger1 = time <= 35
value = SCA

[State 0, nhb]
type = nothitby
trigger1 = time >= 35
value = ,AT

[State 0, nhb]
type = nothitby
triggerall = numtarget
trigger1 = movehit = 1
value = SCA
ignorehitpause = 1

[State 0, stopsnd]
type = targetstate
trigger1 = numtarget(3050)
trigger1 = root,movetype = H
value = 3081
id = 3050
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, super]
type = superpause
trigger1 = !time
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = !time
anim = 7100
id = 7100
pos = ceil(10*const(size.xscale)),ceil(-40*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, nhb]
type = velset
trigger1 = animelemtime(4) = 0
x = 8

[State 0, nhb]
type = velmul
trigger1 = animelemtime(5) = 2
x = .5

[State 0, hit]
type = hitdef
trigger1 = animelem = 4
attr = S, HA
damage = ceil(ifelse((56*root,fvar(0))<7,7,(56*root,fvar(0)))),ceil(ifelse((56*root,fvar(0)*.25)<7,7,(56*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 16,145;132
guard.pausetime = 16,16
sparkno = s6002
sparkxy = -15,-10
guard.sparkno = s6010
hitsound = s0,31
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0
guard.velocity = 0
air.type = low
air.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1
kill = 0
id = 3050
p2facing = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[state -2, var]
type = null;parentvaradd
trigger1 = movehit = 1
var(44) = 1

[State 220, 3]
type = TargetState
triggerall = numtarget
triggerall = animelemtime(4) >= 0
trigger1 = movehit
value = 3080
ignorehitpause = 1
id = 3050

[State 220, 3]
type = ChangeState
triggerall = numtarget
triggerall = animelemtime(4) >= 0
trigger1 = movehit && target,stateno = 3080
value = 3070
ignorehitpause = 0

[State 220, 3]
type = Changestate
trigger1 = anim = 3055
trigger1 = !animtime
value = 3060

;---------------------------------------------------------------------------
;ジャンキーカーニバル(スタンド)終了
[Statedef 3060]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 9506

[State 0, var]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, assert]
type = assertspecial
trigger1 = time%2
flag = Invisible

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 10001]
type = PalFX
trigger1 = 1
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, vel]
type = changestate
trigger1 = !animtime
value = 10000
;---------------------------------------------------------------------------
;ジャンキーカーニバル(スタンド)乱舞
[Statedef 3070]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 3060

[State 903, Vel]
type = helper
trigger1 = !time
stateno = 3090
id = 3090
pos = -30,-40
postype = p1
ownpal = 1
persistent = 0

[State 0, var]
type = hitadd
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(9) = 0
trigger3 = animelemtime(14) = 0
trigger4 = animelemtime(21) = 0
trigger5 = animelemtime(28) = 0
trigger6 = animelemtime(35) = 0
trigger7 = animelemtime(45) = 0
trigger8 = animelemtime(52) = 0
trigger9 = animelemtime(59) = 0
trigger10 = animelemtime(64) = 0
trigger11 = animelemtime(71) = 0
trigger12 = animelemtime(77) = 0
trigger13 = animelemtime(85) = 0
value = numtarget

[State 0, var]
type = targetlifeadd
triggerall = numtarget
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(9) = 0
trigger3 = animelemtime(14) = 0
trigger4 = animelemtime(21) = 0
trigger5 = animelemtime(28) = 0
trigger6 = animelemtime(35) = 0
trigger7 = animelemtime(45) = 0
trigger8 = animelemtime(52) = 0
trigger9 = animelemtime(59) = 0
trigger10 = animelemtime(64) = 0
trigger11 = animelemtime(71) = 0
trigger12 = animelemtime(77) = 0
trigger13 = animelemtime(85) = 0
value = ceil(ifelse(-14*root,fvar(0)>-7,-7,-14*root,fvar(0)))
kill = 0

[State 0, var]
type = targetpoweradd
triggerall = numtarget
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(9) = 0
trigger3 = animelemtime(14) = 0
trigger4 = animelemtime(21) = 0
trigger5 = animelemtime(28) = 0
trigger6 = animelemtime(35) = 0
trigger7 = animelemtime(45) = 0
trigger8 = animelemtime(52) = 0
trigger9 = animelemtime(59) = 0
trigger10 = animelemtime(64) = 0
trigger11 = animelemtime(71) = 0
trigger12 = animelemtime(77) = 0
trigger13 = animelemtime(85) = 0
value = 10

[State 0, var]
type = playsnd
trigger1 = !time
value = 100,6

[State 0, var]
type = playsnd
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(77) = 0
value = 0,4

[State 0, var]
type = playsnd
trigger1 = animelemtime(14) = 0
trigger2 = animelemtime(45) = 0
trigger3 = animelemtime(59) = 0
value = 0,6

[State 0, var]
type = playsnd
trigger1 = animelemtime(9) = 0
trigger2 = animelemtime(28) = 0
trigger3 = animelemtime(52) = 0
trigger4 = animelemtime(64) = 0
value = 0,7

[State 0, var]
type = playsnd
trigger1 = animelemtime(21) = 0
trigger2 = animelemtime(35) = 0
trigger3 = animelemtime(71) = 0
trigger4 = animelemtime(85) = 0
value = 0,8

[State 0, var]
type = explod
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(21) = 0
trigger3 = animelemtime(35) = 0
trigger4 = animelemtime(71) = 0
trigger5 = animelemtime(80) = 0
facing = 1
postype = p2
pos = 5,-20
anim = 6001
sprpriority = 3
ownpal = 1

[State 0, var]
type = explod
trigger1 = animelemtime(9) = 0
trigger2 = animelemtime(14) = 0
trigger3 = animelemtime(64) = 0
facing = 1
postype = p2
pos = 5,-20
anim = 6002
sprpriority = 3
ownpal = 1

[State 0, var]
type = explod
trigger1 = animelemtime(28) = 0
facing = 1
postype = p2
pos = 0,-10
anim = 6002
sprpriority = 3
ownpal = 1

[State 0, var]
type = explod
trigger1 = animelemtime(45) = 0
trigger2 = animelemtime(77) = 0
facing = 1
postype = p2
pos = 0,-50
anim = 6002
sprpriority = 3
ownpal = 1

[State 0, var]
type = explod
trigger1 = animelemtime(52) = 0
facing = 1
postype = p2
pos = 0,-60
anim = 6002
sprpriority = 3
ownpal = 1

[State 0, var]
type = explod
trigger1 = animelemtime(59) = 0
facing = 1
postype = p2
pos = 0,-10
anim = 6002
sprpriority = 3
ownpal = 1

[State 0, var]
type = explod
trigger1 = animelemtime(85) = 0
facing = 1
postype = p2
pos = 0,-10
anim = 6004
sprpriority = 3
ownpal = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 90
removetime = 30
length = 6
timegap = 6
;framegap = 3
palbright = 0,0,0
palcontrast = 256,256,256
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0,0,0

[State 702]
type = TargetBind
triggerall = numtarget
trigger1 = !time
time = 1
pos = 40, 0

[State 1100, Velocity]
type = PosAdd
trigger1 = animelemtime(18) = 0
trigger2 = animelemtime(32) = 0
trigger3 = animelemtime(58) = 0
trigger4 = animelemtime(62) = 0
trigger5 = animelemtime(68) = 0
trigger6 = animelemtime(75) = 0
x = 80

[State 702]
type = Turn
trigger1 = animelemtime(18) = 0
trigger2 = animelemtime(32) = 0
trigger3 = animelemtime(58) = 0
trigger4 = animelemtime(62) = 0
trigger5 = animelemtime(68) = 0
trigger6 = animelemtime(75) = 0

[State 5050, 2] ;Coming down anim
type = targetstate
triggerall = numtarget
trigger1 = target,time = 130
value = 3085

[State 5050, 2]
type = Changestate
trigger1 = !animtime
value = 3075
;---------------------------------------------------------------------------
;ジャンキーカーニバル(スタンド)乱舞締め
[Statedef 3075]
type = A
movetype = A
physics = N
ctrl = 0
velset = -2.5,-12
sprpriority = 2
anim = 3065

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 903, Vel]
type = playsnd
trigger1 = animelemtime(5) = 0
value = 100,10
persistent = 0

[State 903, Vel]
type = veladd
trigger1 = anim != 9506
trigger1 = animelemtime(5) <= 0
y = .6
;y = 0.45

[State 903, Vel]
type = veladd
trigger1 = anim != 9506
trigger1 = animelemtime(5) >= 0
y = .4

[State 903, Vel]
type = velset
trigger1 = anim != 9506
trigger1 = animelemtime(6) = 0
x = -3
y = -8
persistent = 0

[State 903, Vel]
type = changestate
trigger1 = pos Y > 0 && time > 10
value = 3060

[State 903, Vel]
type = helper
trigger1 = animelemtime(5) = 1
stateno = 3076
id = 3076
pos = 8,-50
postype = p1
ownpal = 1
persistent = 0
;---------------------------------------------------------------------------
[Statedef 3090]
anim = 3081

[state -1]
type = AngleDraw
trigger1 = time < 7
scale = .01-(-.3*(time+0)),2
;scale = .01-(-.025*(time+20)),2

[state -1]
type = AngleDraw
trigger1 = time > 6
scale = 2,2

[state -1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state -1]
type = changeanim
trigger1 = time = 6
value = 3080

[state -1]
type = DestroySelf
trigger1 = parent,stateno != 3070
trigger1 = parent,stateno != 13070
;---------------------------------------------------------------------------
;ドライヤー
[Statedef 3076]
type = A
movetype = A
physics = N
velset = 4,-3
sprpriority = 1
anim = 3070

[State 903, Vel]
type = veladd
trigger1 = time > 5
y = 0.2

[State 0, hit]
type = hitdef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
attr = A, HP
damage = ceil(ifelse((28*root,fvar(0))<7,7,(14*root,fvar(0)))),ceil(ifelse((28*root,fvar(0)*.25)<7,7,(28*root,fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = s6003
sparkxy = 0,-20
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
guard.velocity = -5.5
air.type = low
air.velocity = -3,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 16
fall = 0
air.fall = 1
fall.recover = 0
guard.kill = 0
sprpriority = 2
yaccel = .36
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
id = 3001
persistent = 0

[state 4100, 1]
type = envcolor
trigger1 = movehit
time = 1
persistent = 0
ignorehitpause = 1

[state 11250]
type = helper
triggerall = numtarget
trigger1 = movehit=1
id = 9020
stateno=9020
pos = 0,0
postype = p2
ignorehitpause=1

[State 0, end]
type = destroyself
trigger1 = movecontact = 1
trigger2 = time = 60
;---------------------------------------------------------------------------
;感電（相手）
[statedef 9020]
type = S
ctrl = 0
anim = 6315
sprpriority = 3

[state 9020]
type = VarSet
trigger1 = !time
var(0) = enemynear,id

[state 9020]
type = PosSet
trigger1 = 1
x = playerid(var(0)),pos x
y = playerid(var(0)),pos y

[state 9020]
type = PosAdd
trigger1 = 1
y = -floor(20*const(size.yscale))*ifelse(facing!=playerid(var(0)),facing,-1,1)

[State 0, Helper]
type = Explod
trigger1 = !time
id = 7200
anim = 6315
pos = 0+floor(15*const(size.xscale))*ifelse(facing!=playerid(var(0)),facing,-1,1),0-floor(30*const(size.yscale))
postype=p1
ownpal = 1
ontop = 1
sprpriority = 3
scale = .8333333,1.07142857142857
ignorehitpause=1
bindtime=-1
removetime=-1

[State 0, Helper]
type = Explod
trigger1 = !time
id = 7201
anim = 6315
pos = 0-floor(15*const(size.xscale))*ifelse(facing!=playerid(var(0)),facing,-1,1),0-floor(50*const(size.yscale))
postype=p1
ownpal = 1
ontop = 1
sprpriority = 3
scale = .8333333,1.07142857142857
ignorehitpause=1
bindtime=-1
removetime=-1

[state 0]
type = RemoveExplod
trigger1 = time>=112
trigger2 = NumHelper(9020)>1&&time

[state 0]
type = DestroySelf
trigger1 = time>=112
trigger2 = NumHelper(9020)>1&&time
;---------------------------------------------------------------------------
;ジャンキーカーニバル(相手1)
[Statedef 3080]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = playerpush
trigger1 = 1
value = 0

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = !time
trigger2 = time = 9
value = 5070

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = time = 56
value = 5001

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = time = 1
trigger2 = time = 23
trigger3 = time = 41
trigger4 = time = 62
trigger5 = time = 70
value = 5002

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = time = 32
trigger2 = time = 112
value = 5012

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim = 5070
value = anim

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim != 5070
trigger1 = !animtime
value = anim
elem = animelemno(-1)

[State 702]
type = Turn
trigger1 = time = 23
trigger2 = time = 41
trigger3 = time = 70
trigger4 = time = 76
trigger5 = time = 84
trigger6 = time = 94

;---------------------------------------------------------------------------
;ジャンキーカーニバル(相手もどる)
[Statedef 3081]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 0

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = selfstate
trigger1 = !Time
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ジャンキーカーニバル(相手2)
[Statedef 3085]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = !Time
trigger1 = SelfAnimExist(5051)
value = 5051

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = !Time     ;If no transition anim
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 903, Vel]
type = VelSet
trigger1 = !Time
x = -2
y = -12

[State 903, Vel]
type = veladd
trigger1 = 1
y = 0.4

[State 2601, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
;-------------------------------------------------------------------------------
;ジャンキーヘルパー
[Statedef 3056]
sprpriority = -1
anim = 3056

[state 1380]
type = BindToParent
trigger1 = 1
facing = 1
pos = 0, 0

[state 1380]
type = changestate
trigger1 = parent,stateno != 3055
trigger1 = parent,stateno != 13005
value = 3057

;-------------------------------------------------------------------------------
;ジャンキーヘルパー終了
[Statedef 3057]
sprpriority = 3
anim = 3058

[State 0, assert]
type = assertspecial
trigger1 = time%2
flag = Invisible

[State 0, assert]
type = velset
trigger1 = !time
x = -3
y = 1

[State 0, assert]
type = veladd
trigger1 = time > 10
y = .4

[state 1380]
type = destroyself
trigger1 = time = 20

;---------------------------------------------------------------------------
;バレルロールクラッシャー(本体)
[Statedef 3100]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, nhb]
type = nothitby
trigger1 = !time
value = SCA
time = 1
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = !time
var(11) = 60

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Soffバレルロールクラッシャー(スタンド)
[Statedef 3150]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 3150

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 100,00]
type = Afterimage
trigger1 = !time
trans = add1
TimeGap = 3
FrameGap = 3
time = 100
palcolor = 0
PalBright = 20,20,80
PalContrast = 80,80,255
length = 10
palinvertall = 1
ignorehitpause=1

[State 100,00]
type = Afterimage
trigger1 = animelemtime(15) = 1
trans = add1
TimeGap = 3
FrameGap = 3
time = 9999
palcolor = 0
PalBright = 20,20,80
PalContrast = 80,80,255
length = 10
palinvertall = 1
ignorehitpause=1

[State 0, end]
type = parentvarset
trigger1 = !root,var(11)
trigger1 = !time
var(11) = 60

[State 0, var]
type = parentvarset
trigger1 = !time
var(10) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,33

[State 0, turn]
type = turn
trigger1 = animelem = 7
trigger1 = p2dist x < 0
persistent = 0

[State 0, pal]
type = palfx
trigger1 = animelemtime(2) >=0
trigger1 = animelemtime(6) < 0
trigger1 = time%2
add = 128,128,256
time = 1
ignorehitpause = 1

[State 10001];!
type = Explod
trigger1 = !time
anim = 7200
ID = 7200
pos = 0, -70
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = time <= 40
value = SCA

[State 0, nhb]
type = nothitby
trigger1 = time >= 40
value = ,AT

[State 100,00]
type = Afterimage
trigger1 = animelemtime(15) = 0
time = 1
ignorehitpause=1

[State 0, super]
type = superpause
trigger1 = animelemtime(15) = 0
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = animelemtime(15) = 0
anim = 7100
id = 7100
pos = ceil(37*const(size.xscale)),ceil(-30*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = animelemtime(15) = 0
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = velset
trigger1 = animelemtime(9) = 0
x = -1
y = -5.5

State 0, type]
type = StateTypeSet
trigger1 = animelemtime(9) = 0
statetype = A

[State 0, var]
type = veladd
trigger1 = animelemtime(10) > 0
trigger1 = animelemtime(15) <= 0
y = .6

[State 0, var]
type = velset
trigger1 = animelemtime(15) = 0
x = 0
y = 0

[State 0, end]
type = playsnd
trigger1 = !var(13)
trigger1 = animelemtime(15) = 0
value = 100,18
persistent = 0

[State 0, var]
type = velset
trigger1 = animelemtime(16) >= 0
x = ifelse(var(14)<=1,10,0)
y = 0
;2

[State 0, var]
type = varset
trigger1 = !time
var(13) = 0
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = !time
var(14) = 0
ignorehitpause = 1

[State -2, クリップボード]
type     = DisplayToClipBoard
trigger1 = 1
text     = "vel=%d,v15=%d"
params   = var(14),var(15)
IgnoreHitPause = 1

[State 0, end]
type = playsnd
trigger1 = !var(13)
trigger1 = animelemtime(16) = 0
value = 100,20
channel = 0

[State 0, explod]
type = explod
trigger1 = movehit = 1
anim = 6310+(random%2)*2
id = 6310
pos = ceil(37*const(size.xscale)),ceil(-30*const(size.yscale))
postype = p1
scale = .833,1.07
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 4100, 1]
type = envcolor
trigger1 = movehit
value = 0,0,0
time = 1
persistent = 0
ignorehitpause = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact && !var(15)
trigger1 = animelem = 16
trigger2 = animelem = 17
trigger3 = animelem = 19
trigger4 = animelem = 21
trigger5 = animelem = 23
trigger6 = animelem = 25
trigger7 = animelem = 27
trigger8 = animelem = 29
trigger9 = animelem = 31
trigger10 = animelem = 33
trigger11 = animelem = 35
trigger12 = animelem = 37
trigger13 = animelem = 39
attr = A, HA
damage = ceil(ifelse((91*root,fvar(0))<7,7,(91*root,fvar(0)))),ceil(ifelse((91*root,fvar(0)*.25)<7,7,(91*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 12,12;12,9;6,9
sparkno = s6004
sparkxy = -15,-30
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.ctrltime = 10
ground.velocity = -3;0
guard.velocity = -3;0
air.type = low
air.velocity = -3,-.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 9
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = movecontact && !var(15)
trigger1 = animelem = 16
trigger2 = animelem = 17
trigger3 = animelem = 19
trigger4 = animelem = 21
trigger5 = animelem = 23
trigger6 = animelem = 25
trigger7 = animelem = 27
trigger8 = animelem = 29
trigger9 = animelem = 31
trigger10 = animelem = 33
trigger11 = animelem = 35
trigger12 = animelem = 37
trigger13 = animelem = 39

trigger14 = animelem = 18
trigger15 = animelem = 20
trigger16 = animelem = 22
trigger17 = animelem = 24
trigger18 = animelem = 26
trigger19 = animelem = 28
trigger20 = animelem = 30
trigger21 = animelem = 32
trigger22 = animelem = 34
trigger23 = animelem = 36
trigger24 = animelem = 38
attr = A, HA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 6,8;6,9
sparkno = s6004
sparkxy = -15,-30
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.ctrltime = 10
ground.velocity = -3;0
guard.velocity = -3;0
air.type = low
air.velocity = -3,-.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 9
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, var]
type = varset
trigger1 = !var(15)
trigger1 = movecontact = 1
var(15) = ifelse(var(13)=0,11,5)
ignorehitpause = 1
[State 0, var]
type = varadd
trigger1 = var(15)
var(15) = -1
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(14)
var(14) = -1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = !var(14)
trigger1 = movecontact = 1
var(14) = ifelse(var(13)=0,15,10)
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(13) = 1
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 10000,4]
type = Changestate
trigger1 = !animtime
value = 3155

[State 0, var]
type = changeanim
trigger1 = anim = 3150
trigger1 = movecontact = 1
trigger1 = anim != 3160
value = 3160
elem = animelemno(-1)
ignorehitpause = 1

[State 0, var]
type = changeanim
trigger1 = anim = 3160
trigger1 = var(14) = 1
trigger1 = anim != 3150
value = 3150
elem = animelemno(0)
ignorehitpause = 1

;---------------------------------------------------------------------------
;特殊キャンセルバレルロールクラッシャー(本体)
[Statedef 3130]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 0

[State 0, end]
type = varset
trigger1 = !time
var(0) = 0

[State 0, end]
type = varset
trigger1 = !time
var(11) = 60

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;特殊キャンセルver
[Statedef 3180]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 13150

[State 100,00]
type = Afterimage
trigger1 = !time
trans = add1
TimeGap = 3
FrameGap = 3
time = 100
palcolor = 0
PalBright = 20,20,80
PalContrast = 80,80,255
length = 10
palinvertall = 1
ignorehitpause=1

[State 100,00]
type = Afterimage
trigger1 = animelemtime(6) = 1
trans = add1
TimeGap = 3
FrameGap = 3
time = 9999
palcolor = 0
PalBright = 20,20,80
PalContrast = 80,80,255
length = 10
palinvertall = 1
ignorehitpause=1

[State 100,00]
type = Afterimage
trigger1 = animelemtime(6) = 0
time = 1

[State 0, end]
type = parentvarset
trigger1 = !root,var(11)
trigger1 = !time
var(11) = 60

[State 0, var]
type = parentvarset
trigger1 = !time
var(10) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = p2dist x < 0
persistent = 0

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = time <= 40
value = SCA

[State 0, nhb]
type = nothitby
trigger1 = time >= 40
value = ,AT

[State 0, super]
type = superpause
trigger1 = animelemtime(6) = 0
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = animelemtime(6) = 0
anim = 7100
id = 7100
pos = ceil(37*const(size.xscale)),ceil(-30*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = animelemtime(6) = 0
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = velset
trigger1 = !time
x = -1
y = 0

[State 0, var]
type = veladd
trigger1 = animelemtime(1) > 0
trigger1 = animelemtime(6) <= 0
y = 1

[State 0, var]
type = velset
trigger1 = pos y >= -25
y = 0

[State 0, var]
type = velset
trigger1 = animelemtime(6) = 0
x = 0
y = 0

[State 0, end]
type = playsnd
trigger1 = !var(13)
trigger1 = animelemtime(6) = 0
value = 100,18
persistent = 0

[State 0, var]
type = velset
trigger1 = animelemtime(7) >= 0
x = ifelse(var(14)<=1,10,0)
y = 0
;2

[State 0, var]
type = varset
trigger1 = !time
var(13) = 0
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = !time
var(14) = 0
ignorehitpause = 1

[State -2, クリップボード]
type     = DisplayToClipBoard
trigger1 = 1
text     = "vel=%d,v15=%d"
params   = var(14),var(15)
IgnoreHitPause = 1

[State 0, end]
type = playsnd
trigger1 = !var(13)
trigger1 = animelemtime(7) = 0
value = 100,20
channel = 0


[State 0, explod]
type = explod
trigger1 = movehit = 1
anim = 6310+(random%2)*2
id = 6310
pos = ceil(37*const(size.xscale)),ceil(-30*const(size.yscale))
postype = p1
scale = .833,1.07
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 4100, 1]
type = envcolor
trigger1 = movehit
value = 0,0,0
time = 1
persistent = 0
ignorehitpause = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact && !var(15)
trigger1 = animelem = 7
trigger2 = animelem = 8
trigger3 = animelem = 10
trigger4 = animelem = 12
trigger5 = animelem = 14
trigger6 = animelem = 16
trigger7 = animelem = 18
trigger8 = animelem = 20
trigger9 = animelem = 22
trigger10 = animelem = 24
trigger11 = animelem = 26
trigger12 = animelem = 28
trigger13 = animelem = 30
attr = A, HA
damage = ceil(ifelse((91*root,fvar(0))<7,7,(91*root,fvar(0)))),ceil(ifelse((91*root,fvar(0)*.25)<7,7,(91*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 12,12;12,9;6,9
sparkno = s6004
sparkxy = -15,-30
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.ctrltime = 10
ground.velocity = -3;0
guard.velocity = -3;0
air.type = low
air.velocity = -3,-.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 9
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = movecontact && !var(15)
trigger1 = animelem = 7
trigger2 = animelem = 8
trigger3 = animelem = 10
trigger4 = animelem = 12
trigger5 = animelem = 14
trigger6 = animelem = 16
trigger7 = animelem = 18
trigger8 = animelem = 20
trigger9 = animelem = 22
trigger10 = animelem = 24
trigger11 = animelem = 26
trigger12 = animelem = 28
trigger13 = animelem = 30

trigger14 = animelem = 9
trigger15 = animelem = 11
trigger16 = animelem = 13
trigger17 = animelem = 15
trigger18 = animelem = 17
trigger19 = animelem = 19
trigger20 = animelem = 21
trigger21 = animelem = 23
trigger22 = animelem = 25
trigger23 = animelem = 27
trigger24 = animelem = 29
attr = A, HA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 6,8;6,9
sparkno = s6004
sparkxy = -15,-30
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.ctrltime = 10
ground.velocity = -3;0
guard.velocity = -3;0
air.type = low
air.velocity = -3,-.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 9
fall = 0
air.fall = 1
fall.recover = 0
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, var]
type = varset
trigger1 = !var(15)
trigger1 = movecontact = 1
var(15) = ifelse(var(13)=0,11,5)
ignorehitpause = 1
[State 0, var]
type = varadd
trigger1 = var(15)
var(15) = -1
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(14)
var(14) = -1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = !var(14)
trigger1 = movecontact = 1
var(14) = ifelse(var(13)=0,15,10)
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(13) = 1
ignorehitpause = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 10000,4]
type = Changestate
trigger1 = !animtime
value = 3155

[State 0, var]
type = changeanim
trigger1 = anim = 13150
trigger1 = movecontact = 1
trigger1 = anim != 13160
value = 13160
elem = animelemno(-1)
ignorehitpause = 1

[State 0, var]
type = changeanim
trigger1 = anim = 13160
trigger1 = var(14) = 1
trigger1 = anim != 13150
value = 13150
elem = animelemno(0)
ignorehitpause = 1

;---------------------------------------------------------------------------
;バレルロールクラッシャー終了
[Statedef 3155]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 3155

[State 100,00]
type = Afterimage
trigger1 = !time
trans = add1
TimeGap = 3
FrameGap = 3
time = 100
palcolor = 0
PalBright = 20,20,80
PalContrast = 80,80,255
length = 10
palinvertall = 1
ignorehitpause=1

[State 100,00]
type = Afterimage
trigger1 = !time
time = 1

[State 0, vel]
type = nothitby
trigger1 = 1
value = SCA

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, assert]
type = assertspecial
trigger1 = anim = 9506
trigger1 = time%2
flag = Invisible

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 10001]
type = PalFX
trigger1 = anim = 9506
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, vel]
type = velset
trigger1 = !time
x = 2

[State 0, vel]
type = veladd
trigger1 = 1
y = .4

[State 0, vel]
type = velset
trigger1 = pos y > 0
x = 0
y = 0

[State 0, vel]
type = posset
trigger1 = pos y > 0
y = 0

[State 0, vel]
type = changeanim
trigger1 = pos y = 0 && anim != 9506
value = 9506
elem = 2

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 0, vel]
type = changestate
trigger1 = anim = 9506 && !animtime
value = 10000

;---------------------------------------------------------------------------
;リセントメント(本体)
[Statedef 3200]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1000
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, nhb]
type = nothitby
trigger1 = !time
value = SCA
time = 1
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = !time
var(11) = 30

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Soffリセントメント(スタンド)
[Statedef 3250]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 3250

[State 180]
type = Helper
trigger1 = !time
name = "Effect"
helpertype = normal
stateno = 30900
id = 30900
facing = ifelse(root,facing = 1,1,-1)
pos = 0,-30
postype = p1
ownpal = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(10) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,33

[State 0, turn]
type = turn
trigger1 = animelem = 8
trigger1 = p2dist x < 0
persistent = 0

[State 100,00]
type = Afterimage
trigger1 = !time
trans = add1
TimeGap = 3
FrameGap = 3
time = 100
palcolor = 0
PalBright = 20,20,80
PalContrast = 80,80,255
length = 10
palinvertall = 1
ignorehitpause=1

[State 100,00]
type = Afterimage
trigger1 = animelemtime(11) = 1
trans = add1
TimeGap = 3
FrameGap = 3
time = 9999
palcolor = 0
PalBright = 20,20,80
PalContrast = 80,80,255
length = 10
palinvertall = 1
ignorehitpause=1

[State 100,00]
type = Afterimage
trigger1 = animelemtime(11) = 0
time = 1

[State 0, pal]
type = palfx
trigger1 = animelemtime(2) >=0
trigger1 = animelemtime(6) < 0
trigger1 = time%2
add = 128,128,256
time = 1
ignorehitpause = 1

[State 10001];!
type = Explod
trigger1 = !time
anim = 7200
ID = 7200
pos = 0, -70
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9600
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = time <= 40
value = SCA

[State 0, nhb]
type = nothitby
trigger1 = time >= 40
value = ,AT

[State 0, super]
type = superpause
trigger1 = animelemtime(11) = 0
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = animelemtime(11) = 0
anim = 7100
id = 7100
pos = ceil(10*const(size.xscale)),ceil(-40*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = animelemtime(12) = 0
anim = 8103
id = 8103
pos = ceil(0*const(size.xscale)),ceil(5*const(size.yscale))
postype = p1
scale = .833,1.07
sprpriority = -2
removeongethit = 1
[State 0, explod]
type = explod
trigger1 = animelemtime(12) = 0
anim = 8104
id = 8104
pos = ceil(-10*const(size.xscale)),ceil(5*const(size.yscale))
postype = p1
scale = .833,1.07
sprpriority = -2
removeongethit = 1

[State 0, explod]
type = explod
trigger1 = animelemtime(9) = 0
anim = 8102
id = 8102
pos = ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype = p1
scale = .833,1.07
sprpriority = -2

[state 0, helper]
type = helper
trigger1 = animelemtime(11) = 0
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, type]
type = StateTypeSet
trigger1 = animelemtime(12) = 0
statetype = A

[State 0, var]
type = velset
trigger1 = animelemtime(11) = 0
x = 0
y = 0

[State 0, end]
type = playsnd
trigger1 = animelemtime(11) = 0
value = 100,21

[state 4100, 1]
type = envcolor
trigger1 = movehit
trigger1 = animelemtime(12) >= 0
trigger1 = animelemtime(13) < 0
value = 0,0,0
time = 1
persistent = 0
ignorehitpause = 1

[State 0, end]
type = playsnd
trigger1 = animelemtime(20) = 0
trigger2 = animelemtime(26) = 0
trigger3 = animelemtime(32) = 0
value = 0,12

[State 0, var]
type = velset
trigger1 = animelemtime(12) = 0
y = -3
[State 0, var]
type = velset
trigger1 = animelemtime(20) = 0
y = -2
[State 0, var]
type = velset
trigger1 = animelemtime(25) = 0
y = -1

[State 0, var]
type = velset
trigger1 = animelemtime(12) = 0
trigger2 = animelemtime(16) = 0
trigger3 = animelemtime(20) = 0
trigger4 = animelemtime(24) = 0
trigger5 = animelemtime(28) = 0
trigger6 = animelemtime(32) = 0
x = 8
[State 0, var]
type = velset
trigger1 = animelemtime(14) = 0
trigger2 = animelemtime(18) = 0
trigger3 = animelemtime(22) = 0
trigger4 = animelemtime(26) = 0
trigger5 = animelemtime(30) = 0
trigger6 = animelemtime(34) = 0
x = -8

[State 0, hit]
type = hitdef
trigger1 = animelem = 12
attr = A, HA
damage = ceil(ifelse((91*root,fvar(0))<7,7,(91*root,fvar(0)))),ceil(ifelse((91*root,fvar(0)*.25)<7,7,(91*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -15,-30
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 6
ground.hittime = 6
ground.velocity = 0,-5.5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = 6
air.type = low
air.velocity = 0,-5.5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 9
fall = 1
fall.recovertime = 20
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 14
trigger2 = animelem = 16
trigger3 = animelem = 18
trigger4 = animelem = 20
trigger5 = animelem = 22
trigger6 = animelem = 24
trigger7 = animelem = 28
trigger8 = animelem = 30
trigger9 = animelem = 32
attr = A, HA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -15,-30
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 6
ground.hittime = 6
guard.hittime = 6
guard.ctrltime = 6
ground.velocity = 0,-5.5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
air.velocity = 0,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = 6
air.type = low
airguard.velocity = -4,ifelse(root,var(40)<5,-5+(root,var(40)*.04),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 9
fall = 1
fall.recovertime = 20
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

[state -2, var]
type = hitdef
trigger1 = animelem = 34
attr = A, HA
damage = ceil(ifelse((7*root,fvar(0))<7,7,(7*root,fvar(0)))),ceil(ifelse((7*root,fvar(0)*.25)<7,7,(7*root,fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -15,-30
guard.sparkno = s6010
hitsound = -1;s0,7
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 6
ground.hittime = 6
guard.hittime = 6
guard.ctrltime = 6
ground.velocity = -3,-4*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
air.velocity = -5,0*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
airguard.velocity = -4,ifelse(root,var(40)<6,-2+(root,var(40)*.08),0)
guard.velocity = 0
air.type = low
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 9
fall = 1
fall.recovertime = 20
air.fall = 1
yaccel = .36
guard.kill = 0
sprpriority = 2
p2facing = 1

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,7+(moveguarded=1)*2
ignorehitpause = 1
channel = 2

[state -2, var]
type = parentvaradd
trigger1 = root,var(44) != 2
var(44) = 1

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 10000,4]
type = Changestate
trigger1 = !animtime
value = 3255

;---------------------------------------------------------------------------
;リセントメント終了
[Statedef 3255]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2
anim = 15036

[State 100,00]
type = Afterimage
trigger1 = !time
time = 1

[State 0, vel]
type = nothitby
trigger1 = 1
value = SCA

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = playerpush
trigger1 = 1
value = 1

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 10001]
type = PalFX
trigger1 = anim = 9501
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, assert]
type = assertspecial
trigger1 = anim = 9501
trigger1 = time%2
flag = Invisible

[State 0, vel]
type = veladd
trigger1 = 1
y = .4

[State 0, vel]
type = velset
trigger1 = pos y > 0
x = 0
y = 0

[State 0, vel]
type = posset
trigger1 = pos y > 0
y = 0

[State 0, vel]
type = changeanim
trigger1 = pos y = 0 && anim != 9501
value = 9501

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 0, vel]
type = changestate
trigger1 = anim = 9501
value = 10000

;===========================================================================
; システムなど
;===========================================================================
;スタンドon
[Statedef 10900]
anim = 20900
velset = 0,0
ctrl = 0
sprpriority = -2

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,19

[State 0, var]
type = varset
trigger1 = !time
var(49) = 40

[state 1001,0]
type = VarSet
trigger1 = time = 0
var(0) = 10000

[State 10000,4]
type = ChangeState
trigger1 = time = 1
value = 20000

;---------------------------------------------------------------------------
;スタンド発現(Air)
[Statedef 10910]
type = A
movetype = I
physics = N
anim = 20910
ctrl = 0
sprpriority = -2

[State 0, gravity]
type = varset
trigger1 = !time
var(15) = 15

[State 10000,4]
type = playsnd
trigger1 = !time
value = 100,19

[State 0, var]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, var]
type = varset
trigger1 = !time
var(49) = 40

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse(var(5)||var(4)=2,.4,.5)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;on時本体
[Statedef 20000]
velset = 0,0
ctrl = 0

[State 0, type]
type = StateTypeSet
trigger1 = helper(10000),statetype = S
statetype = S

[State 0, type]
type = StateTypeSet
trigger1 = helper(10000),statetype = C
statetype = C

[State 0, end]
type = turn
trigger1 = p2dist x < 0

[State 0, spr]
type = sprpriority
trigger1 = 1
value = -2

[State 0, anim]
type = changeanim
triggerall = helper(10000),time
triggerall = anim != 1000
triggerall = !var(6)
trigger1 = helper(10000),stateno = 11000
trigger2 = helper(10000),stateno = 11100
trigger3 = helper(10000),stateno = 11150
trigger4 = helper(10000),stateno = 11200
trigger5 = helper(10000),stateno = [10195,10197]
value = 1000

[State 0, anim]
type = changeanim
triggerall = helper(10000),time
triggerall = anim != 1001
trigger1 = helper(10000),stateno = 13100
trigger2 = helper(10000),stateno = 13150
trigger3 = helper(10000),stateno = 13200
value = 1001

[State 0, anim]
type = changeanim
triggerall = helper(10000),time
triggerall = anim != 1000
triggerall = !var(6)
trigger1 = helper(10000),stateno = 11000
trigger2 = helper(10000),stateno = 11100
trigger3 = helper(10000),stateno = 11150
trigger4 = helper(10000),stateno = 11200
value = 1000

[State 0, var]
type = varset
trigger1 = helper(10000),stateno != 11000
trigger1 = helper(10000),stateno != 11100
trigger1 = helper(10000),stateno != 11150
trigger1 = helper(10000),stateno != 11200
trigger1 = helper(10000),stateno != [10195,10197]
var(6) = 0

[State 0, anim]
type = changeanim
triggerall = helper(10000),time
triggerall = anim != helper(10000),anim-10000
triggerall = SelfAnimExist(helper(10000),anim-10000)
trigger1 = helper(10000),stateno = 10
trigger2 = helper(10000),stateno = 12
value = helper(10000),anim-10000

[State 0, anims]
type = changeanim
triggerall = anim != 20901 && anim != 20900
trigger1 = helper(10000),statetype = S && anim != 1000
trigger2 = anim = 12 && !animtime
trigger3 = helper(10000),stateno = 0 && helper(10000),prevstateno != 52
trigger4 = anim = 47 && !animtime
trigger5 = anim = 1000 && !animtime
trigger6 = helper(10000),stateno = 13105
trigger7 = helper(10000),stateno = 13205
trigger8 = helper(10000),stateno = [110,119]
value = 20901

[State 0, animc]
type = changeanim
triggerall = anim != 11
trigger1 = helper(10000),statetype = C
trigger1 = anim = 10 && !animtime
trigger2 = helper(10000),stateno = 11 && anim != 10
trigger3 = anim != [195,199]
trigger3 = (helper(10000),statetype = C && helper(10000),stateno = 196 && (anim != [195,199])) || (helper(10000),stateno = [10400,10520])
trigger3 = (helper(10000),prevstateno != [100,105]) || ((anim=101||anim=106)&&!animtime)
value = 11

[State 0,var];歩き
type = changestate
trigger1 = (Facing*Helper(10000),Facing*Helper(10000),RootDist X*-1) = [-30,40]
trigger1 = helper(10000),stateno = 20 && helper(10000),anim = 10021
value = 20020

[State 0,var];ダッシュ
type = changestate
trigger1 = (Facing*Helper(10000),Facing*Helper(10000),RootDist X*-1) = [-30,40]
trigger1 = helper(10000),stateno = 105
value = 20105

[State 0,var];ジャンプ
type = changestate
triggerall = command != "holdfwd"
trigger1 = (Facing*Helper(10000),Facing*Helper(10000),RootDist X*-1) = [-30,40]
trigger1 = helper(10000),stateno = 40
value = 20040

[State 0,var];ガーキャン
type = changestate
trigger1 = helper(10000),time = 2
trigger1 = helper(10000),stateno = 10700
value = 20700

[State 0,var];ガード
type = changestate
triggerall = (Facing*Helper(10000),Facing*Helper(10000),RootDist X*-1) = [-40,40]
triggerall = helper(10000),facing = facing
trigger1 = helper(10000),stateno = [120,159]
value = 20120

;---------------------------------------------------------------------------
;on時本体（歩き）
[Statedef 20020]
type = S
velset = 0,0
physics = S

[State 20, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)*1.5

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 0, end]
type = turn
trigger1 = p2dist x < 0

[State 0, end]
type = changestate
trigger1 = helper(10000),stateno != 20
trigger2 = helper(10000),anim != 10021
value = 20000
;---------------------------------------------------------------------------
;on時本体（ジャンプ開始）
[Statedef 20040]
type = S
physics = S
anim = 40
velset = 0,0

[State 0, sysvar]
type = varset
trigger1 = !time
sysvar(1) = command = "holdfwd"-command = "holdback"

[State 0, var]
type = varset
trigger1 = !time
var(4) = 0

[State 0, var]
type = varset
triggerall = !time
trigger1 = command = "longjump"
var(4) = 1

[State 0, var]
type = varset
trigger1 = !time
var(5) = 0

[State 0, var]
type = varset
trigger1 = command != "holdup"
var(5) = 1

[State 0, vel]
type = velset
trigger1 = !animtime
x = ifelse(!sysvar(1),0,ifelse(sysvar(1)=1,const(velocity.jump.fwd.x),const(velocity.jump.back.x)))*ifelse(var(4)&&(!var(0)||(var(0)&&!var(5))),1.72,1)

[State 0, vel]
type = null;velset
trigger1 = !animtime
y = const(velocity.jump.y)*ifelse(var(5),.8,1)*ifelse(var(4)&&!sysvar(1),1.2,1)*.9

[State 40, 8]
type = VelSet
trigger1 = !animtime
y = const(velocity.jump.y)*ifelse(var(4),1,1)*.9

[State 40, 8]
type = VelMul
trigger1 = !animtime
trigger1 = var(5)
y = .64
persistent = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 20050
;------------------------------------------------------------------------------------------
;on時本体（ジャンプ）
[Statedef 20050]
type = A
physics = N
anim = 41

[State 4030, Gravity]
type = VelAdd
trigger1 = 1
y = ifelse(var(5)||var(4),.4,.6)

[State 0, sysvar]
type = varset
trigger1 = !time
sysvar(1) = 0

[State 0, anim]
type = changeanim
triggerall = anim != 20910
trigger1 = vel y > -2
trigger1 = SelfAnimExist(anim + 3)
value = anim + 3
persistent = 0

[State 0, anim]
type = changeanim
triggerall = anim != 20910
trigger1 = helper(10000),stateno = 11150
trigger2 = helper(10000),stateno = 13100
trigger3 = helper(10000),stateno = 13150
trigger4 = helper(10000),stateno = 13200
value = 20910

[State 0, end]
type = changestate
trigger1 = pos y >= 0 && vel y > 0 && time > 5
value = 20052
;------------------------------------------------------------------------------------------
;on時本体（着地）
[Statedef 20052]
type = S
physics = S
anim = 47

[State 0, vel]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = p2dist x < 0

[State 0, end]
type = changestate
trigger1 = time = 1
value = 20000

;---------------------------------------------------------------------------
;on時本体（ダッシュ）
[Statedef 20105]
type = S
velset = 0,0
movetype = I
physics = N
anim = 105
velset = 0,0

[State 0, vel]
type = velset
trigger1 = time = 3
x = const(velocity.run.back.x)

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoWalk
flag2 = NoAutoTurn

[State 0, end]
type = changestate
trigger1 = helper(10000),stateno != 105
value = 20000

;---------------------------------------------------------------------------
;on時本体（ガード）
[Statedef 20120]
type = U
velset = 0,0
movetype = I
physics = S
velset = 0,0

[State 0, type]
type = changeanim
trigger1 = helper(10000),statetype = S
value = 20120
ignorehitpause = 1

[State 0, type]
type = changeanim
trigger1 = helper(10000),statetype = C
value = 20121
ignorehitpause = 1

[State 0, type]
type = StateTypeSet
trigger1 = helper(10000),statetype = S
statetype = S

[State 0, type]
type = StateTypeSet
trigger1 = helper(10000),statetype = C
statetype = C

[State 0, spr]
type = velset
triggerall = (Facing*Helper(10000),Facing*Helper(10000),RootDist X*-1) = [-40,40]
triggerall = helper(10000),facing = facing
trigger1 = helper(10000),stateno = 151
trigger2 = helper(10000),stateno = 153
trigger3 = helper(10000),stateno = 155
x = helper(10000),vel x

[State 0, spr]
type = velset
trigger1 = helper(10000),stateno != 151
trigger1 = helper(10000),stateno != 153
trigger1 = helper(10000),stateno != 155
x = 0

[State 0, end]
type = changestate
trigger1 = helper(10000),stateno != [120,159]
value = 20000

;---------------------------------------------------------------------------
;on時本体（ガーキャン）
[Statedef 20700]
type = S
velset = 0,0
movetype = I
physics = S
anim = 20700

[State 0, explod]
type = explod
trigger1 = !time
anim = 6306
facing = 1
postype = p1
pos = -20,-100
sprpriority = -2
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 0, explod]
type = explod
trigger1 = animelemtime(7) = 0
anim = 6301
facing = 1
postype = p1
pos = 5,-95
sprpriority = -2
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 0, pal]
type = palfx
trigger1 = time < 8
trigger1 = time%2
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = changestate
trigger1 = helper(10000),stateno != 10700
trigger2 = !animtime
value = 20000
;---------------------------------------------------------------------------
;ガードキャンセル
[Statedef 700]
type = S
movetype = A
physics = N
ctrl = 0
anim = 700
poweradd = ifelse(((helper(20032*(numhelper(20032)>0)),var(10)) = 0),0,-1000)
sprpriority = 0
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger2 = animelemtime(5) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 0
x = 8

[State 0, vel]
type = velmul
trigger1 = movecontact = 1
x = .6

[State 0, pal]
type = palfx
trigger1 = time < 10
trigger1 = time%2
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = time <= 9
trigger2 = ((helper(20032*(numhelper(20032)>0)),var(10)) = 1)
trigger2 = 1
value = SCA
time = 1

[State 0, hit]
type = pause
triggerall = ((helper(20032*(numhelper(20032)>0)),var(10)) = 1)
trigger1 = time = 1
time = 20

[State 0, hit]
type = playsnd
triggerall = ((helper(20032*(numhelper(20032)>0)),var(10)) = 1)
trigger1 = time = 1
value = 700,100

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
attr = S, NA
damage = ceil(ifelse((49*fvar(0))<7,7,(49*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,5
sparkno = s6002
sparkxy = -15,-50
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 26
ground.hittime = 26
ground.velocity = -5,-9*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -5.5
air.velocity = -5,-9*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.type = Low
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 26
fall = 1
fall.recovertime = 32
air.fall = 0
yaccel = .36
p2facing = 1
kill = ((helper(20032*(numhelper(20032)>0)),var(10)) = 0)

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 4
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;スタンド解除（地上）
[Statedef 900]
type = S
movetype = I
physics = S
anim = 900
ctrl = 0
velset = 0,0
sprpriority = 0

[State 0, var]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 0, end]
type = changestate
trigger1 = helper(10000),stateno = 10000
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;スタンド解除（Air）
[Statedef 910]
type = A
movetype = I
physics = N
ctrl = 0

[State 0, anim]
type = changeanim
trigger1 = anim != 44
trigger1 = vel y > -2
trigger1 = SelfAnimExist(anim + 3)
value = anim + 3
persistent = 0

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse(var(5)||var(4)=2,.4,.5)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
;アドバンシングガード
[Statedef 710]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6020
id = 6020
pos = ceil(28*const(size.xscale)),ifelse(statetype=C&&!var(0),ceil(-45*const(size.xscale)),ceil(-90*const(size.xscale)))
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "AVG"
stateno = 715
id = 715
pos = -10,0
postype = p1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.ground.back = 20
size.ground.front = 20
size.height = 240

[State 810, 1]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8030
id = 8030
pos = 0,0
postype = p2
ownpal = 1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 0,20

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,9
channel = 0

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150+Ishelper(10000)*10000

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151+Ishelper(10000)*10000

[State 0, state]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, nhb]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 0, end]
type = changestate
trigger1 = time = 1
value = 151+(command = "holddown")*2

;---------------------------------------------------------------------------
;アドバンシングガード2
[Statedef 711]
type = U
movetype = I
physics = N

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150+Ishelper(10000)*10000

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151+Ishelper(10000)*10000

[State 0, state]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, end]
type = changestate
trigger1 = numhelper(715)
trigger1 = command = "holdback"
value = 151+(command = "holddown")*2

[State 0, end]
type = changestate
trigger1 = !numhelper(715)
value = 130+(command = "holddown")
ctrl = 1

;---------------------------------------------------------------------------
;アドバンシングガード(ヘルパー)
[Statedef 715]
type = S
movetype = I
physics = N
anim = 715
velset = 0,0

[State 0, push]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = !time
x = 20

[State 0, vel]
type = veladd
trigger1 = time > 0
x = -1

[State 0, end]
type = DestroySelf
trigger1 = time = 15

;===========================================================================
;スパコン背景
[Statedef 7000]
ctrl = 0
anim = 9999

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = time <= 29
flag = NoFG
flag2 = NoBG

[State 0, explod]
type = explod
trigger1 = !time
anim = 7300
id = 7300
pos = 0,0
postype = back
removetime = 30
scale = .84,1.08
sprpriority = -20
pausemovetime = 30
supermovetime = 30

;cut in
[State 0, explod]
type = explod
trigger1 = time = 7
anim = 7000
id = 7000
pos = -20,170
postype = back
removetime = 23
sprpriority = -10
pausemovetime = 23
supermovetime = 23

[State 8000, ModifyExplod-3]
type = ModifyExplod
trigger1 = Numexplod(7000)
Id = 7000
postype = back
pos = ceil(-20+((random%16)*ifelse((time%6=[1,3]),-1,1))),ceil(170+((random%16)*ifelse((time%6=[1,3]),-1,1)))
scale = ifelse(time>=22,2,.2+((time-6)*.125))*.833,ifelse(time>=22,2,.2+((time-6)*.125))*1.07

[State 0, end]
type = DestroySelf
trigger1 = time = 31

;---------------------------------------------------------------------------
; アドバンシングガード(煙)
[Statedef 8030]
type = S
movetype = I
physics = N
velset = 0,0
anim = 8030
sprpriority = 4

[State 0, pos]
type = posset
trigger1 = 1
x = enemynear,pos x
y = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, end]
type = DestroySelf
trigger1 = !animtime
;===========================================================================
;メッセージアイコン
[Statedef 7500]
ctrl = 0
anim = 9999

[State 0, var];STAND ON
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 920
var(0) = 1
ignorehitpause = 1

[State 0, var];DANGER!
type = varset
trigger1 = root,var(0)
trigger1 = root,fvar(2) <= 20
;trigger1 = root,var(23) != 2 && !root,var(23);デム
var(0) = 2
ignorehitpause = 1

[State 0, var];STAND CRASH!
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,time = 1
trigger1 = root,stateno = 700
trigger2 = helper(10000),time = 1
trigger2 = helper(10000),stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = roundstate = 2
trigger1 = time > 1
trigger1 = var(0)
value = 7500+var(0)

;---------------------------------------------------------------------------
;STAND ON
[Statedef 7501]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7500
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7505
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !root,var(0)
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
;trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,time = 1
trigger1 = root,stateno = 700
trigger2 = helper(10000),time = 1
trigger2 = helper(10000),stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 1
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;DANGER!
[Statedef 7502]
ctrl = 0
anim = 9999

[State 0, explod];消す
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod];DANGER
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7501
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7506
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod];移動
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod];ちょっと戻る
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod];移動
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod];ちょっと戻る
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,fvar(2) > 20
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 920
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,time = 1
trigger1 = root,stateno = 700
trigger2 = helper(10000),time = 1
trigger2 = helper(10000),stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 2
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;STAND CRUSH
[Statedef 7503]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7502
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7507
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 4000
trigger1 = root,stateno != 4100
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 920
var(0) = 1
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,time = 1
trigger1 = root,stateno = 700
trigger2 = helper(10000),time = 1
trigger2 = helper(10000),stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 3
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;FIRST ATTACK
[Statedef 7504]
ctrl = 0
anim = 20000

[State 0, var]
type = varset
trigger1 = !time
var(8) = 2
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7503
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7508
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 920
var(0) = 1
ignorehitpause = 1

[State 0, var];DANGER!
type = varset
trigger1 = root,var(0)
trigger1 = root,fvar(2) <= 20
;trigger1 = root,var(23) != 2 && !root,var(23);デム
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,time = 1
trigger1 = root,stateno = 700
trigger2 = helper(10000),time = 1
trigger2 = helper(10000),stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;------------------------------------------------------------------------------
;GUARD CANCEL
[Statedef 7505]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7504
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7509
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno = 700
trigger2 = helper(10000),stateno = 10700
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 920
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 5
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;===========================================================================
;勝利時画面移動停止
[Statedef 6000]
ctrl = 0
anim = 20000

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = roundstate != [3,4]
trigger1 = root,movetype = H
;===========================================================================
;画面移動停止2
[Statedef 6001]
ctrl = 0
anim = 20000

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = parent,stateno != [110,119]
;===========================================================================
;勝利アイコン
[Statedef 9100]
ctrl = 0
anim = 20000

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "config"
stateno = 9105
id = 9105
pausemovetime = 999999
supermovetime = 999999

;「WIN」
[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 1
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9102
pos = -285,80
postype = left
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time <= 20
id = 9102
pos = ceil(-285+(time*15)),80
postype = left

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time >= 81
id = 9102
pos = ceil(15-((time-80)*15)),80
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 2
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9103
pos = 130,80
postype = right
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time <= 20
id = 9103
pos = ceil(130-(time*15)),80
postype = right

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time >= 81
id = 9103
pos = ceil(-170+((time-80)*15)),80
postype = right

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 0,28

;「To Be Continued...」
[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 1
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(11)
trigger2 = root,fvar(11)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9100
id = 9100
pos = 412,210
postype = left
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9100)
trigger1 = time <= 40
id = 9100
pos = ceil(412-((time-20)*20)),210
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 2
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(11)
trigger2 = root,fvar(11)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9101
id = 9101
pos = -412,210
postype = right
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9101)
trigger1 = time <= 40
id = 9101
pos = ceil(-412+((time-20)*20)),210
postype = right
;===========================================================================
;敗北演出
[Statedef 9200]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
removetime = 60
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8200
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8205
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8201
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8206
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8202
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8207
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8203
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8208
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北演出2(蜂の巣)
[Statedef 9201]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
fvar(2) = 0
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time > 6
fvar(2) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = 0;-1
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;穴
[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9110
pos = 16,17
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9111
pos = 24,117
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110
id = 9112
pos = 9,212
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9113
pos = 40,18
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9114
pos = 43,115
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9115
pos = 22,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9116
pos = 92,4
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9117
pos = 89,127
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9118
pos = 36,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9111
id = 9119
pos = 119,38
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110
id = 9120
pos = 124,100
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 12
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110+var(10)
id = 9121
pos = 88,188
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9111
id = 9122
pos = 133,112
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9110
id = 9123
pos = 131,190
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9124
pos = 177,68
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9125
pos = 157,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 22
anim = 9110
id = 9126
pos = 166,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -14
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 9110
id = 9127
pos = 187,28
postype = back
bindtime = -1
ownpal = 0
sprpriority = -13
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9110)
id = 9110
pos = ceil(16-fvar(2)),17
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9111)
id = 9111
pos = ceil(24-fvar(2)),117
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9112)
id = 9112
pos = ceil(9-fvar(2)),212
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9113)
id = 9113
pos = ceil(40-fvar(2)),18
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9114)
id = 9114
pos = ceil(43-fvar(2)),115
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9115)
id = 9115
pos = ceil(22-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9116)
id = 9116
pos = ceil(92-fvar(2)),4
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9117)
id = 9117
pos = ceil(89-fvar(2)),127
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9118)
id = 9118
pos = ceil(36-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9119)
id = 9119
pos = ceil(119-fvar(2)),38
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9120)
id = 9120
pos = ceil(124-fvar(2)),100
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9121)
id = 9121
pos = ceil(81-fvar(2)),188
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9122)
id = 9122
pos = ceil(133-fvar(2)),112
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9123)
id = 9123
pos = ceil(131-fvar(2)),190
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9124)
id = 9124
pos = ceil(177-fvar(2)),68
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9125)
id = 9125
pos = ceil(166-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9126)
id = 9126
pos = ceil(157-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9127)
id = 9127
pos = ceil(187-fvar(2)),28
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9110

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9111

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9112

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9113

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9114

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9115

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9116

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9117

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9118

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9119

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9120

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9121

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9122

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9123

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9124

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9125

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9126

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9127

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北演出3(血)
[Statedef 9202]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(2) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time >= 6
fvar(2) = fvar(0)
ignorehitpause = 1


;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;血
[State 0, explod]
type = explod
trigger1 = time = 3
anim = 9150+random%3
id = 9150
pos = 42,9
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 4
anim = 9150+random%3
id = 9151
pos = 18,122
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 5
anim = 9150+random%3
id = 9152
pos = 24,196
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9150+random%3
id = 9153
pos = 180,55
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 7
anim = 9150+random%3
id = 9154
pos = 30,103
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9150+random%3
id = 9155
pos = 68,172
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9150+random%3
id = 9156
pos = 206,44
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 10
anim = 9150+random%3
id = 9157
pos = 49,106
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 11
anim = 9150+random%3
id = 9158
pos = 156,230
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9150+random%3
id = 9159
pos = 130,138
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 13
anim = 9150+random%3
id = 9160
pos = 191,227
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 9150+random%3
id = 9161
pos = 128,115
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9150)
id = 9150
pos = ceil(42-fvar(2)),9
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9151)
id = 9151
pos = ceil(18-fvar(2)),122
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9152)
id = 9152
pos = ceil(24-fvar(2)),196
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9153)
id = 9153
pos = ceil(180-fvar(2)),55
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9154)
id = 9154
pos = ceil(30-fvar(2)),103
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9155)
id = 9155
pos = ceil(68-fvar(2)),172
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9156)
id = 9156
pos = ceil(206-fvar(2)),44
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9157)
id = 9157
pos = ceil(49-fvar(2)),106
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9158)
id = 9158
pos = ceil(156-fvar(2)),230
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9159)
id = 9159
pos = ceil(166-fvar(2)),138
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9160)
id = 9160
pos = ceil(191-fvar(2)),227
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9161)
id = 9161
pos = ceil(128-fvar(2)),115
postype = back
ignorehitpause = 1



[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9150

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9151

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9152

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9153

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9154

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9155

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9156

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9157

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9158

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9159

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9160

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9161

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北時演出（横切断）
[Statedef 9203]
ctrl = 0
anim = 9999
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = 1*root,const(size.yscale)
;fvar(36) = -.55*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;---------------------------------------------------------------------------
;敗北時演出（縦切断）
[Statedef 9204]
ctrl = 0
anim = 9999
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -1.88*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 1.88*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = 2.3*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;---------------------------------------------------------------------------
;スタンドゲージ
[Statedef 20032]
ctrl = 0
anim = 20000
ownpal = 1

;------------------------------------------------------
[State -2, クリップボード]
type     = DisplayToClipBoard
trigger1 = 1
text     = "stand=%d"
params   = var(5)
IgnoreHitPause = 1
;config呼び出し
[State 6000, Helper]
type = Helper
trigger1 = time = 1
id = 7525
name = "config"
pos = -300,0
postype = Left
stateno = 7525
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 6000, Explod];ゲージ
type = Explod
trigger1 = !NumExplod(16001)
trigger1 = time >= 2
trigger1 = teamside = 1
anim = 16001
id = 16001
postype = L
pos = 140+var(4),48+var(5)
ownpal = 0
bindtime = -1
ignorehitpause = 1
sprpriority = -102
pausemovetime = -1
supermovetime = -1
facing = 1

[State 6000, Explod];ゲージ
type = Explod
trigger1 = !NumExplod(16001)
trigger1 = time >= 2
trigger1 = teamside = 2
anim = 16051
id = 16001
postype = R
pos = -140+var(4),48+var(5)
ownpal = 0
bindtime = -1
ignorehitpause = 1
sprpriority = -102
pausemovetime = -1
supermovetime = -1
facing = 1

[State 6000, Explod];枠
type = Explod
trigger1 = !NumExplod(16000)
trigger1 = time >= 2
anim = ifelse(teamside=1,16000,16050)
id = 16000
postype = Back
pos = 140+var(4),48+var(5)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -101
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 6000, Explod];STAND
type = Explod
trigger1 = root,var(0)
trigger1 = !NumExplod(6003)
trigger1 = time >= 2
anim = 7510
id = 6003
postype = Back
pos = ifelse(teamside=1,102,137)+var(4),51+var(5)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -100
facing = ifelse(teamside=1,1,-1)
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 6000, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(16001)
Id = 16001
scale = ifelse(root,fvar(2)>=88,88.5,root,fvar(2)),1
ignorehitpause = 1

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 16000

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 16001

[state 0, var]
type = varadd
trigger1 = var(1)
var(1) = -1

[state 0, var]
type = varset
trigger1 = fvar(0) - root,fvar(2) > 0
var(1) = 8

[state 0, var]
type = varset
trigger1 = 1
fvar(0) = root,fvar(2)

[State 0, pal]
type = palfx
trigger1 = root,var(9) != 2 || (root,var(9) = 2 && !(time%4))
trigger1 = var(1) = 8 || var(1) = 4
trigger2 = root,fvar(2) <= 20
trigger2 = !var(1) && time%4=0
time = 2
add = 128,-256,-256

[State -3];スタンドの文字を消す
type = removeexplod
trigger1 = parent,var(0) = 0
trigger2 = win
trigger3 = lose
id = 6003

;×
[State 0, explod]
type = explod
trigger1 = root,var(50)
trigger1 = !numexplod(7522)
trigger1 = time > 0
anim = 7522
id = 7522
pos = ifelse(teamside=1,110,235)+var(4),46+var(5)
postype = left
bindtime = -1
scale = .5,.5
sprpriority = -100
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = !root,var(50)
trigger1 = numexplod(7522)
trigger2 = win
trigger3 = lose
id = 7522

[State 0, explod]
type = varset
trigger1 = 1
var(0) = root,var(0)

[State 0, explod]
type = varset
trigger1 = helper(10000),stateno = [150,156]
var(5) = helper(10000),gethitvar(damage)

[State 0, explod]
type = parentvaradd
trigger1 = var(5)
fvar(2) = -var(5)

[State 0, explod]
type = varset
trigger1 = var(5)
var(5) = 0

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;アドガ用
[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(16) = 0

[State 8500, 1]
type = varset
trigger1 = parent,stateno = 150
trigger2 = parent,stateno = 152
var(16) = parent,GetHitVar(ctrltime)

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(15) = 0

[State 8500, 1]
type = varadd
trigger1 = parent,stateno = 153
var(15) = 1

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(14) = 0

[State 8500, 1]
type = varadd
trigger1 = parent,stateno = 151
var(14) = 1

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(13) = 0

[State 8500, 1]
type = varset
trigger1 = parent,stateno = 150
trigger2 = parent,stateno = 152
var(13) = parent,GetHitVar(hittime)

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;アドガ用(人形)
[State 8500, 1]
type = varset
trigger1 = helper(10000),stateno != [150,715]
var(26) = 0

[State 8500, 1]
type = varset
trigger1 = helper(10000),stateno = 150
trigger2 = helper(10000),stateno = 152
var(26) = helper(10000),GetHitVar(ctrltime)

[State 8500, 1]
type = varset
trigger1 = helper(10000),stateno != [150,715]
var(25) = 0

[State 8500, 1]
type = varadd
trigger1 = helper(10000),stateno = 153
var(25) = 1

[State 8500, 1]
type = varset
trigger1 = helper(10000),stateno != [150,715]
var(24) = 0

[State 8500, 1]
type = varadd
trigger1 = helper(10000),stateno = 151
var(24) = 1

[State 8500, 1]
type = varset
trigger1 = helper(10000),stateno != [150,715]
var(23) = 0

[State 8500, 1]
type = varset
trigger1 = helper(10000),stateno = 150
trigger2 = helper(10000),stateno = 152
var(23) = helper(10000),GetHitVar(hittime)

;---------------------------------------------------------------------------
;敵横吹っ飛び（生存時）
[Statedef 1281]
type = A
movetype = H
physics = N
anim = 5030
velset = -10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .22

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
value = 1282

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び（壁激突）
[Statedef 1282]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 821, 2] 
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 6
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 6
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 6
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 6

[State 0, vel]
type = veladd
trigger1 = time > 6
y = .32

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵吹っ飛び（死亡時）
[Statedef 1290]
type = A
movetype = H
physics = N
anim = 5030
velset = -8,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030
trigger1 = !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●

;---------------------------------------------------------------------------
;敵横吹っ飛び2（生存時）
[Statedef 1283]
type = A
movetype = H
physics = N
anim = 5030
velset = 10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .22

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 1284

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び2（壁激突）
[Statedef 1284]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 821, 2] 
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 6
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 6
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 6
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 6

[State 0, vel]
type = veladd
trigger1 = time > 6
y = .32

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵吹っ飛び2（死亡時）
[Statedef 1293]
type = A
movetype = H
physics = N
anim = 5030
velset = 8,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030
trigger1 = !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100
;===========================================================================
;STAND_CRASH
[Statedef 4000]
type = U
movetype = H
physics = N
velset = 0,0

[State 0, var]
type = varadd
trigger1 = !time
var(52) = 27
ignorehitpause = 1

[State 0, pause]
type = pause
trigger1 = time = 1;!time
time = 6
movetime = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,22

[State 0, explod]
type = explod
trigger1 = !time
anim = 7600
id = 7600
pos = 160,120
postype = left
bindtime = -1
removetime = 8
scale = .833,1.08
sprpriority = -20
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = numexplod(7600)
flag = NoFG
flag2 = NoBG

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = helper(10000),GetHitVar(animtype) != [3,5]
value = ifelse((helper(10000),GetHitVar(groundtype) = 1),4000,4010)

[State 0, anim]
type = changeanim
trigger1 = Time = 0
trigger1 = helper(10000),GetHitVar(animtype) = [3,5]
value = 4030

[State 0, anim]
type = changeanim
triggerall = anim = 5030
trigger1 = animelem = 3
value = anim
elem = 2

[State 5000, 4] ;Freeze anim
type = ChangeAnim
triggerall = anim != 5030
trigger1 = !animtime
value = anim
elem = 2

[State 0, state]
type = statetypeset
trigger1 = !time
trigger1 = helper(10000),GetHitVar(yvel) != 0 || helper(10000),GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
trigger1 = helper(10000),GetHitVar(yvel) = 0 && !helper(10000),GetHitVar(fall)
value = 4001

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
value = 4030

;---------------------------------------------------------------------------
;HITG_SLIDE
[Statedef 4001]
type = S
movetype = H
physics = N

[State 0, vel]
type = null;velset
trigger1 = !var(52)
x = -fvar(15)
persistent = 0

[State 0, anim]
type = changeanim
triggerall = prevstateno = 4000
trigger1 = !var(52)
value = 5006 + (helper(10000),GetHitVar(groundtype)=2)*10

[State 0, anim]
type = changeanim
triggerall = prevstateno = 4100
trigger1 = var(52)
value = 4101

[State 0, vel]
type = velmul
trigger1 = !var(52)
x = .85

[State 0, vel]
type = velset
trigger1 = !var(53)
x = 0

[State 0, defence]
type = defencemulset
trigger1 = !var(53)
value = 1

[State 0, explod]
type = explod
trigger1 = !var(52)
anim = 8030
id = 8030
pos = 0,0
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, end]
type = changestate
trigger1 = !var(53)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;HITA_UP (initial going up)
[Statedef 4030]
type = A
movetype = H
physics = N
ctrl = 0

[State 0, vel]
type = velset
trigger1 = !time
x = helper(10000),gethitvar(xvel)*ifelse(facing = -1,-1,1)
y = helper(10000),gethitvar(yvel)

[State 0, vel]
type = veladd
trigger1 = 1
y = fvar(10)

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = !var(53)
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 15040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = !var(53)
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 15050

[State 0, end]
type = changestate
trigger1 = !animtime
value = 15035

;---------------------------------------------------------------------------
;HITA_UP_T (transition)
[Statedef 4035]
type = A
movetype = H
physics = N

[State 0, vel]
type = veladd
trigger1 = 1
y = fvar(10)

[State 0, anim]
type = null;changeanim
trigger1 = !time
trigger1 = SelfAnimExist(5035)
trigger1 = anim != [5051,5059]
trigger1 = anim != 5090
value = 5035

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = !var(53)
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 5040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = !var(53)
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 5050

;---------------------------------------------------------------------------
;HITG_SHAKE
[Statedef 4100]
type = S
movetype = H
physics = N
velset = 0,0

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, var]
type = varadd
trigger1 = !time
var(52) = 27
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = !time
var(53) = 50
ignorehitpause = 1

[State 0, pause]
type = pause
trigger1 = time = 1;!time
time = 6
movetime = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,22

[State 0, explod];石仮面
type = explod
trigger1 = !time
anim = 7600
id = 7600
pos = 160,120
postype = left
bindtime = -1
removetime = 8
scale = .833,1.08
sprpriority = -30
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = numexplod(7600)
flag = NoFG
flag2 = NoBG

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = statetype != A
value = 4100

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = statetype = A
value = 4030

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim

[State 0, state] ;State type gets set to aerial if getting hit up
type = statetypeset
trigger1 = !time
trigger1 = helper(10000),GetHitVar(yvel) != 0 || helper(10000),GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
trigger1 = helper(10000),GetHitVar(yvel) = 0 && !helper(10000),GetHitVar(fall)
value = 4001

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
value = 4030

;===========================================================================
;クラッシュ時スタンド
[Statedef 9400]
type = U
movetype = H
velset = 0,0
ctrl = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(16) = 0

[State 0, var]
type = parentvarset
trigger1 = prevstateno = [150,155]
var(16) = 1

[State 0, var]
type = parentvarset
triggerall = root,stateno = [15000,15070]
trigger1 = prevstateno != [150,155]
var(16) = 2

[State 0, var]
type = varset
trigger1 = !time
fvar(15) = GetHitVar(xvel)
IgnoreHitPause = 1
[State 0, var]
type = parentvarset
trigger1 = !time
fvar(16) = GetHitVar(yvel)
IgnoreHitPause = 1
[State 0, var]
type = parentvarset
trigger1 = !time
fvar(17) = GetHitVar(yaccel)
IgnoreHitPause = 1

[State 0, var]
type = parentvarset
trigger1 = time = 1
fvar(15) = fvar(15)
[State 0, var]
type = parentvarset
trigger1 = time = 1
fvar(16) = fvar(15)
[State 0, var]
type = parentvarset
trigger1 = time = 1
fvar(17) = fvar(17)

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = AfterImage
trigger1 = 1
time = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0]
type = StopSnd
trigger1 = time = 0
channel = 0

[State 0]
type = changestate
trigger1 = root,stateno = 4100
value = 9450

[state -3, var]
type = parentvarset
trigger1 = !time
var(52) = gethitvar(hitshaketime)
ignorehitpause = 1

[state -3, var]
type = parentvarset
trigger1 = !time
var(53) = gethitvar(hittime)
ignorehitpause = 1

[State 0, end]
type = posset
trigger1 = pos y > 0
y = 0

[State 0]
type = posfreeze
trigger1 = 1
value = 1
;
[state 0]
type = varset
trigger1 = !time
var(58) = floor(root,fvar(8))

[state 0]
type = varadd
trigger1 = var(58)
var(58) = -1

[state 0]
type = changeanim
trigger1 = !time
value = 14000

[State 0]
type = changestate
triggerall = time >= 5
trigger1 = !var(58)
trigger1 = !gethitvar(hitshaketime)
value = 9401

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0
;===========================================================================
;本体クラッシュ時スタンド2
[Statedef 9401]
movetype = H
anim = 15036
ctrl = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(16) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0]
type = velset
trigger1 = !time
x = -root,fvar(6)

[State 0]
type = veladd
trigger1 = !time
trigger1 = root,fvar(7) <= -3
y = root,fvar(7)

[State 0]
type = velset
trigger1 = !time
trigger1 = root,fvar(7) >= -3
y = -3

[State 0, end]
type = veladd
trigger1 = 1
y = .4

[State 0]
type = changeanim
trigger1 = animelemtime(6) > 0
trigger1 = pos y > 0 && time > 8
value = 9501
persistent = 0

[State 0, end]
type = playsnd
trigger1 = anim = 9501
value = 0,18
persistent = 0

[State 0]
type = changestate
trigger1 = anim = 9501
trigger1 = pos y > 0 && time > 8
value = 10000

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0
;===========================================================================
;クラッシュ時スタンド
[Statedef 9450]
type = U
movetype = H
velset = 0,0
ctrl = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(16) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 10001]
type = PalFX
trigger1 = 1
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0]
type = changeanim
trigger1 = gethitvar(hitshaketime)
value = 9450

[State 0]
type = changeanim
trigger1 = !gethitvar(hitshaketime)
trigger1 = anim != 9450
value = 9450

[State 0]
type = velset
trigger1 = animelemtime(2) = 0
x = -1

[State 0]
type = changestate
trigger1 = !animtime
value = ifelse(statetype=A,9401,10000)
;===========================================================================
;スタンド解除（スタンド）
[Statedef 9500]
type = U
movetype = I
velset = 0,0
ctrl = 0
anim = 9502

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0]
type = changestate
trigger1 = !time
trigger1 = statetype = A
value = 9510

[State 0, end]
type = playsnd
trigger1 = !time
value = 100,13

[State 10001]
type = PalFX
trigger1 = 1
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0]
type = changestate
trigger1 = !animtime
value = 10000
;===========================================================================
;スタンド解除（スタンドair）
[Statedef 9510]
type = A
movetype = I
velset = 0,0
ctrl = 0
anim = 15036

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0]
type = velset
trigger1 = !time
x = ifelse(command="holdfwd",4,ifelse(command="holdback",-4,0))

[State 0]
type = turn
trigger1 = !time
trigger1 = command = "holdfwd"

[State 0, end]
type = veladd
trigger1 = 1
y = .4

[State 0, end]
type = playsnd
trigger1 = !time
value = 100,13

[State 10001]
type = PalFX
trigger1 = 1
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0]
type = changeanim
trigger1 = animelemtime(6) > 0
trigger1 = pos y > 0
value = 9501
persistent = 0

[State 0, end]
type = playsnd
trigger1 = anim = 9501
value = 0,35
persistent = 0

[State 0]
type = changestate
trigger1 = anim = 9501
trigger1 = pos y > 0
value = 10000

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

;===========================================================================
;スタンド消去1
[Statedef 9000]
type = U
movetype = I
physics = N
ctrl = 0
sprpriority = 2
anim = 9000

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = velset
trigger1 = !time
y = 0

[State 0, pos]
type = velmul
trigger1 = !time
x = ifelse(root,var(2)=0,.4,ifelse(root,var(2)=1,.8,1.2))

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, assert]
type = assertspecial
trigger1 = (time = [1,20]) && !(time%2)
flag = Invisible

[State 0, end]
type = changestate
trigger1 = time >= 20
value = 10000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9650

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

;---------------------------------------------------------------------------
;被ダメ時スタンド消去(スタンド被ダメ)
[Statedef 9600]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9600
velset = 0,0
sprpriority = -1

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(20) = GetHitVar(damage)

[State -1, Run Fwd]
type = ParentVarAdd
triggerall = root,fvar(2) = (0,88]
trigger1 = time = 0
fvar(2) = -2-ceil(var(20)*.25)
ignorehitpause = 1

[State 0, stopsnd]
type = AfterImage
trigger1 = 1
time = 1

[State 0, stopsnd]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = HitShakeOver
value = 9620

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0
;===========================================================================
;被ダメ時スタンド消去(スタンド被ダメ)2
[Statedef 9620]
movetype = H
anim = 15036
ctrl = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0]
type = velset
trigger1 = !time
x = -gethitvar(xvel)

[State 0]
type = veladd
trigger1 = !time
y = -3

[State 0, end]
type = veladd
trigger1 = 1
y = .4

[State 0]
type = changeanim
trigger1 = animelemtime(6) > 0
trigger1 = pos y > 0 && time > 8
value = 9501
persistent = 0

[State 0, end]
type = playsnd
trigger1 = anim = 9501
value = 0,18
persistent = 0

[State 0]
type = changestate
trigger1 = anim = 9501
trigger1 = pos y > 0 && time > 8
value = 10000

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0
;===========================================================================
;被ダメ時スタンド消去(本体被ダメ)
[Statedef 9650]
movetype = H
anim = 15036
ctrl = 0

[State 0, stopsnd]
type = AfterImage
trigger1 = 1
time = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0]
type = velset
trigger1 = !time
x = -root,fvar(6)

[State 0]
type = veladd
trigger1 = !time
y = -3

[State 0, end]
type = veladd
trigger1 = 1
y = .4

[State 0]
type = changeanim
trigger1 = animelemtime(6) > 0
trigger1 = pos y > 0 && time > 8
value = 9501
persistent = 0

[State 0, end]
type = playsnd
trigger1 = anim = 9501
value = 0,18
persistent = 0

[State 0]
type = changestate
trigger1 = anim = 9501
trigger1 = pos y > 0 && time > 8
value = 10000

[State 10001]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

;===========================================================================
;スタンド待機
[Statedef 10000]
type = U
movetype = I
ctrl = 0
velset = 0,0
sprpriority = 2

[State 0, btr]
type = statetypeset
trigger1 = root,movetype = H
movetype = H
[State 0, btr]
type = statetypeset
trigger1 = root,movetype != H
movetype = I

[State 0, var];保険
type = parentvaradd
trigger1 = !time
trigger1 = !root,fvar(2) && root,var(9) = 2
fvar(2) = 1
[State 0, var];保険2
type = parentvarset
trigger1 = !time
trigger1 = root,var(9) = 2
var(50) = 0

[State 0, var]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, var]
type = parentvarset
trigger1 = !time
var(54) = 0

[State 0, var]
type = parentvarset
trigger1 = parent,var(9) = 2
trigger1 = !time
var(23) = 120

[State 0, var]
type = varset
trigger1 = !time
var(33) = 0

[State 0, var]
type = varset
trigger1 = !time
var(34) = 0

[State 0, var]
type = varset
trigger1 = !time
var(35) = 0

[state -2, helper]
type = helper
trigger1 = !numhelper(40000)
helpertype = normal
stateno = 40000
id = 40000
pos = 0, 0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0

[State 0, end]
type = posset
trigger1 = !time
y = 0

[State 0, end]
type = parentvarset
trigger1 = anim = 9500
trigger2 = anim = 9501 && animelemtime(7) = 0
var(9) = 0

[State 10001]
type = ScreenBound
trigger1 = 1
trigger1 = root,alive
value = 1
movecamera = 1,0

[State 10001]
type = PalFX
trigger1 = 1
time = 1
add = 30,30,30
mul = 100,100,100
color = 256

[State 0, end]
type = changeanim
trigger1 = anim != 9500 && anim != 9501
trigger1 = !time
value = 9500

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 920
value = 970

[State 0, end]
type = changestate
trigger1 = root,var(0)
value = 9501

[State 0, end];即キャン（スタンド出現攻撃）
type = changestate
triggerall = root,movetype != H
triggerall = root,command = "Sonattack" || helper(99999),var(16) > 0
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 215
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
trigger6 = root,stateno = 410
trigger7 = root,stateno = 420
trigger8 = root,stateno = 425
value = 970

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 3000
trigger2 = root,stateno = 3100
trigger3 = root,stateno = 3200
value = root,stateno + 50

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
value = root,stateno + 50

[State 0, end];air
type = changestate
triggerall = root,movetype != H
;triggerall = root,time = 1
triggerall = root,var(10)
trigger1 = root,stateno = 600
trigger2 = root,stateno = 610
trigger3 = root,stateno = 620
value = root,var(10) + 50

[State 0, end];即キャン（ジャンキーカーニバル）
type = changestate
triggerall = root,movetype != H && power >= 1000
triggerall = root,command = "236aa" || root,command = "236b" || helper(99999),var(5) > 0
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 215
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
trigger6 = root,stateno = 410
trigger7 = root,stateno = 420
trigger8 = root,stateno = 425
value = 3050

[State 0, end];即キャン（バレルロールクラッシャー）
type = changestate
triggerall = root,movetype != H && power >= 1000
triggerall = root,command = "214aa" || root,command = "214b" || helper(99999),var(6) > 0
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 215
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
trigger6 = root,stateno = 410
trigger7 = root,stateno = 420
trigger8 = root,stateno = 425
value = 3150

[State 0, end];即キャン（リセントメント）
type = changestate
triggerall = root,movetype != H && power >= 1000 
triggerall = root,command = "623aa" || root,command = "623b" || helper(99999),var(4) > 0
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 215
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
trigger6 = root,stateno = 410
trigger7 = root,stateno = 420
trigger8 = root,stateno = 425
value = 3250

[State 0, end];即キャン（ピラニアダイブ）
type = changestate
triggerall = root,movetype != H
triggerall = root,command = "Piranha1" || root,command = "Piranha2" || root,command = "Piranha3" || helper(99999),var(13) > 0
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 215
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
trigger6 = root,stateno = 410
trigger7 = root,stateno = 420
trigger8 = root,stateno = 425
value = 1050

[State 0, end];即キャン（ホッピングハンター）
type = changestate
triggerall = root,movetype != H
triggerall = root,command = "Hopping1" || root,command = "Hopping2" || root,command = "Hopping3" || helper(99999),var(14) > 0
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 215
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
trigger6 = root,stateno = 410
trigger7 = root,stateno = 420
trigger8 = root,stateno = 425
value = 1150

[State 0, end];即キャン（プロペラカッター）
type = changestate
triggerall = root,movetype != H
triggerall = root,command = "Propeller1" || root,command = "Propeller2" || root,command = "Propeller3" || helper(99999),var(15) > 0
trigger1 = root,stateno = 200
trigger2 = root,stateno = 210
trigger3 = root,stateno = 215
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
trigger6 = root,stateno = 410
trigger7 = root,stateno = 420
trigger8 = root,stateno = 425
value = 1250

[State 0, end]
type = changestate
triggerall = root,movetype != H && power >= 1000
trigger1 = root,stateno = 3500 && root,time = 13
value = 3550

[State 0, var]
type = parentvarset
trigger1 = root,var(10)
var(10) = 0

;===========================================================================
;スタンド発現（スタンド）
[Statedef 9501]
type = S
movetype = I
physics = N
ctrl = 1
anim = 10900

[State 180]
type = Helper
trigger1 = !time
name = "Effect"
helpertype = normal
stateno = 30900
id = 30900
facing = ifelse(root,facing = 1,1,-1)
pos = 0,-30
postype = p1
ownpal = 1

[State 0, pal]
type = palfx
trigger1 = time < 8
trigger1 = time%2
add = 128,128,256
time = 1
ignorehitpause = 1

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,14

[State 0, end]
type = playsnd
trigger1 = !time
value = 0,33

[State 10001];煙
type = Explod
trigger1 = !time
anim = 8010
ID = 8010
pos = -20, 0
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 10001];!
type = Explod
trigger1 = !time
anim = 7200
ID = 7200
pos = 0, -70
postype = p1
bindtime = 1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 10001]
type = ScreenBound
trigger1 = Ishelper
value = 1
movecamera = 1,0

[State 0, end]
type = playerpush
trigger1 = Ishelper
value = 1

[State 0, end]
type = changestate
trigger1 = (command = "x" || command = "b") && command != "holddown" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10205

[State 0, end]
type = changestate
trigger1 = (command = "x" || command = "b") && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10200

[State 0, end]
type = changestate
trigger1 = command = "y" && command != "holddown" && command = "holdback"
trigger1 = statetype != A
trigger1 = !time
value = 10216

[State 0, end]
type = changestate
trigger1 = command = "y" && command != "holddown" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10215

[State 0, end]
type = changestate
trigger1 = command = "y" && command = "holddown" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10415

[State 0, end]
type = changestate
trigger1 = command = "z" && command = "holddown" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10425

[State 0, end]
type = changestate
trigger1 = command = "y" && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10210

[State 0, end]
type = changestate
trigger1 = command = "z" && command != "holddown" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10222

[State 0, end]
type = changestate
trigger1 = command = "z" && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10220

[State 0, end]
type = changestate
trigger1 = (command = "x" || command = "b") && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10400

[State 0, end]
type = changestate
trigger1 = command = "y" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10410

[State 0, end]
type = changestate
trigger1 = command = "z" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10420

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = p2dist x < 0

[State 10000,4]
type = ChangeState
trigger1 = !animtime
value = 0
;---------------------------------------------------------------------------
;スタンド発現（ヴィジョン）
[Statedef 30900]
type = S
physics = N
anim = 20920
SprPriority = 2

[State 0, scale]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, scale]
type = varset
trigger1 = !time
;var(0) = ifelse(helper(10000),pos x - root,pos x <= 0,1,2)
var(0) = ifelse(root,pos x - parent,pos x <= 0,1,2)

[State 0, scale]
type = posadd
trigger1 = !time && facing = 1
x = ifelse(var(0)=1,-80,80)

[State 10000,4]
type = velset
trigger1 = !time && facing = 1
x = ifelse(var(0)=1,10,-10)

[State 0, scale]
type = posadd
trigger1 = !time && facing = -1
x = ifelse(var(0)=1,80,-80)

[State 10000,4]
type = velset
trigger1 = !time && facing = -1
x = ifelse(var(0)=1,-10,10)

[State 10000,4]
type = velset
trigger1 = time = 5
x = 0

[State 10000,4]
type = posadd
trigger1 = 1
y = 1

[State 10000,4]
type = Changeanim
trigger1 = time = 5
value = 20921

[State 0, scale]
type = angledraw
trigger1 = time <= 9
scale = 1,.02+time*.1

[State 0, scale]
type = angledraw
trigger1 = time >= 9
scale = 1,1

[State 10000,4]
type = destroyself
trigger1 = anim = 20921 && !animtime

;---------------------------------------------------------------------------
;スタンド解除（ヴィジョン）
[Statedef 30910]
type = S
physics = N
anim = 20920
SprPriority = 2

[State 0, scale]
type = varset
trigger1 = !time
var(0) = ifelse(helper(10000),pos x - root,pos x <= 0,1,2)

[State 0, scale]
type = parentvarset
trigger1 = !time
var(12) = 0

[State 0, scale]
type = posadd
trigger1 = !time
x = ifelse(var(0)=1,-80,80)

[State 10000,4]
type = velset
trigger1 = !time
x = ifelse(var(0)=1,10,-10)

[State 10000,4]
type = velset
trigger1 = time = 5
x = 0

[State 10000,4]
type = posadd
trigger1 = 1
y = 1

[State 10000,4]
type = Changeanim
trigger1 = time = 5
value = 20921

[State 0, scale]
type = angledraw
trigger1 = time <= 9
scale = 1,.02+time*.1

[State 0, scale]
type = angledraw
trigger1 = time >= 9
scale = 1,1

[State 10000,4]
type = destroyself
trigger1 = anim = 20921 && !animtime

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 890]
type    = A
movetype= H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040
;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 895]
type    = L
movetype= H
physics = N
anim = 5070
velset = 0,0

[State 5071, 1]
type = VelSet
trigger1 = Time = 0
x = -10

[State 5071, 2]
type = VelMul
trigger1 = 1
x = .88

[State 5071, 1]
type = VelSet
trigger1 = Time = 16
x = 0

[State 5071, 4] ;Hit ground
type = SelfState
trigger1 = Time = 16
value = 5110

;---------------------------------------------------------------------------
;スタンドヴィジョン
[Statedef 40000]
anim = 9999
SprPriority = 0

[State 8500, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8500, 1]
type = BindToParent
trigger1 = 1
time = 1
facing = 1
pos = 0, 0

[State 10000,4]
type = Changestate
trigger1 = parent,stateno = 9450 && parent,time = 1
value = 44100

[State 10000,4]
type = Changestate
trigger1 = parent,stateno = [120,155]
value = 40120

[State 10000,4]
type = Changestate
trigger1 = parent,stateno = 10200 && parent,time = 3
trigger2 = parent,stateno = 10300 && parent,time = 3
trigger3 = parent,stateno = 10205 && parent,time = 3
trigger4 = parent,stateno = 10305 && parent,time = 3
trigger5 = parent,stateno = 10306 && parent,time = 6
trigger6 = parent,stateno = 10307 && parent,time = 1
trigger7 = parent,stateno = 10210 && parent,time = 4 && parent,prevstateno != 100
trigger8 = parent,stateno = 10210 && parent,time = 5 && parent,prevstateno = 100
trigger9 = parent,stateno = 10310 && parent,time = 5
trigger10= parent,stateno = 10220 && parent,time = 8 && parent,prevstateno != [100,105]
trigger11= parent,stateno = 10220 && parent,time = 6 && parent,prevstateno = [100,105]
trigger12= parent,stateno = 10320 && parent,time = 5
trigger13= parent,stateno = 10215 && parent,time = 5
trigger14= parent,stateno = 10315 && parent,time = 7
trigger15= parent,stateno = 10216 && parent,time = 5
trigger16= parent,stateno = 10400 && parent,time = 3
trigger17= parent,stateno = 10500 && parent,time = 4
trigger18= parent,stateno = 10410 && parent,time = 4
trigger19= parent,stateno = 10415 && parent,time = 7
trigger20= parent,stateno = 10425 && parent,time = 6
trigger21= parent,stateno = 10510 && parent,time = 4
trigger22= parent,stateno = 10420 && parent,time = 8 && parent,prevstateno != [100,105]
trigger23= parent,stateno = 10420 && parent,time = 10 && parent,prevstateno = [100,105]
trigger24= parent,stateno = 10520 && parent,time = 4
trigger25= parent,stateno = 10600 && parent,time = 3
trigger26= parent,stateno = 10610 && parent,time = 4
trigger27= parent,stateno = 10615 && parent,time = 11
trigger28= parent,stateno = 10620 && parent,time = 10
trigger29= parent,stateno = 1250 && parent,animelemtime(9) = 0
trigger30= parent,stateno = 11200 && parent,time = 1
value = 40200

[State 10000,4]
type = Changestate
trigger1 = parent,stateno = 30200 && parent,time = 2
trigger2 = parent,stateno = 30300 && parent,time = 2
trigger3 = parent,stateno = 30205 && parent,time = 2
trigger4 = parent,stateno = 30305 && parent,time = 2
trigger5 = parent,stateno = 30306 && parent,time = 4
trigger6 = parent,stateno = 30307 && parent,time = 1
trigger7 = parent,stateno = 30210 && parent,time = 3
trigger8 = parent,stateno = 30310 && parent,time = 4
trigger9= parent,stateno = 30220 && parent,time = 5
trigger10= parent,stateno = 30320 && parent,time = 4
trigger11= parent,stateno = 30215 && parent,time = 4
trigger12= parent,stateno = 30315 && parent,time = 5
trigger13= parent,stateno = 30216 && parent,time = 4
trigger14= parent,stateno = 30400 && parent,time = 2
trigger15= parent,stateno = 30500 && parent,time = 3
trigger16= parent,stateno = 30410 && parent,time = 3
trigger17= parent,stateno = 30510 && parent,time = 3
trigger18= parent,stateno = 30420 && parent,time = 6
trigger19= parent,stateno = 30520 && parent,time = 3
trigger20= parent,stateno = 31200 && parent,time = 1
value = 40200

;---------------------------------------------------------------------------
;スタンドヴィジョン（ガード）
[Statedef 40120]
anim = 9999
SprPriority = 2

[State 8500, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8500, 1]
type = BindToParent
trigger1 = 1
time = 1
facing = 1
pos = 0, 0

[State 10000,4]
type = Changeanim
trigger1 = parent,anim = [10120,10159]
trigger1 = anim != parent,anim+5
value = parent,anim+5

[State 10000,4]
type = Changestate
trigger1 = parent,stateno != [120,155]
value = 40000
;=============================================================================
;攻撃時のスタンド像
[Statedef 40200]

[state 19000,bind]
type = varset
trigger1 = !time
var(0) = parent,stateno

[state 19000,anim]
type = removeexplod
trigger1 = !time
id = 19000
[state 19000,anim]
type = removeexplod
trigger1 = !time
id = 19100
[state 19000,anim]
type = removeexplod
trigger1 = !time
id = 19200
[state 19000,anim]
type = removeexplod
trigger1 = !time
id = 19300

[state 19000,anim]
type = explod
triggerall = !numexplod(19000)
trigger1 = parent,stateno = 10200
trigger2 = parent,stateno = 10205
trigger3 = parent,stateno = 10300
trigger4 = parent,stateno = 10305
trigger5 = parent,stateno = 10306
trigger6 = parent,stateno = 10220
trigger7 = parent,stateno = 10320
trigger8 = parent,stateno = 10620
trigger9 = parent,stateno = 1250
trigger10 = parent,stateno = 11200
anim = 19000
id = 19000
bindtime = -1
scale = .833,1.07
ownpal = 1
pos = ifelse(var(0)=10200||var(0)=10300||var(0)=10306,-20,ifelse(var(0)=10205||var(0)=10305,4,-15)),ifelse(var(0)=10200||var(0)=10300||var(0)=10306,-23,ifelse(var(0)=10205||var(0)=10305,-30,ifelse(var(0)=1250||var(0)=11200,-20,-45)))
postype = p1
ignorehitpause = 1

[state 19000,anim]
type = explod
triggerall = !numexplod(19000)
trigger1 = parent,stateno = 30200
trigger2 = parent,stateno = 30205
trigger3 = parent,stateno = 30300
trigger4 = parent,stateno = 30305
trigger5 = parent,stateno = 30306
trigger6 = parent,stateno = 30220
trigger7 = parent,stateno = 30320
trigger8 = parent,stateno = 31200
anim = 19000
id = 19000
bindtime = -1
scale = .833,1.07
ownpal = 1
pos = ifelse(var(0)=30200||var(0)=30300||var(0)=30306,-20,ifelse(var(0)=30205||var(0)=30305,4,-15)),ifelse(var(0)=30200||var(0)=30300||var(0)=30306,-23,ifelse(var(0)=30205||var(0)=30305,-30,ifelse(var(0)=31200,-20,-45)))
postype = p1
ignorehitpause = 1

[state 19000,anim]
type = explod
triggerall = !numexplod(19100)
trigger1 = parent,stateno = 10215
trigger2 = parent,stateno = 10315
trigger3 = parent,stateno = [10600,10610]
trigger4 = parent,stateno = 10210 && parent,prevstateno = 100
anim = 19100
id = 19100
bindtime = -1
scale = .833,1.07
ownpal = 1
pos = 18,ifelse(var(0)=10210||var(0)=10215||var(0)=10315,-58,-38)
postype = p1
ignorehitpause = 1

[state 19000,anim]
type = explod
triggerall = !numexplod(19100)
trigger1 = parent,stateno = 30215
trigger2 = parent,stateno = 30315
anim = 19100
id = 19100
bindtime = -1
scale = .833,1.07
ownpal = 1
pos = 18,ifelse(var(0)=30215||var(0)=30315,-58,-38)
postype = p1
ignorehitpause = 1

[state 19000,anim]
type = explod
triggerall = !numexplod(19200)
trigger1 = parent,stateno = 10210 && parent,prevstateno != 100
trigger2 = parent,stateno = 10310
trigger3 = parent,stateno = 10420
trigger4 = parent,stateno = 10520
trigger5 = parent,stateno = 10216
trigger6 = parent,stateno = 10307
trigger7 = parent,stateno = 10415
trigger8 = parent,stateno = 10425
trigger9 = parent,stateno = 10615
anim = 19200
id = 19200
bindtime = -1
scale = .833,1.07
ownpal = 1
pos = ifelse(var(0)=10210||var(0)=10310||var(0)=10307,-30,ifelse(var(0)=10415||var(0)=10425||var(0)=10615,-25,-35)),ifelse(var(0)=10210||var(0)=10310||var(0)=10307,-14,ifelse(var(0)=10415||var(0)=10425,-5,-40))
postype = p1
ignorehitpause = 1

[state 19000,anim]
type = explod
triggerall = !numexplod(19200)
trigger1 = parent,stateno = 30210 && parent,prevstateno != 100
trigger2 = parent,stateno = 30310
trigger3 = parent,stateno = 30420
trigger4 = parent,stateno = 30520
trigger5 = parent,stateno = 30216
trigger6 = parent,stateno = 30307
anim = 19200
id = 19200
bindtime = -1
scale = .833,1.07
ownpal = 1
pos = ifelse(var(0)=30210||var(0)=30310||var(0)=30307,-30,ifelse(var(0)=30415||var(0)=30425,-25,-35)),ifelse(var(0)=30210||var(0)=30310||var(0)=30307,-14,ifelse(var(0)=30415||var(0)=30425||var(0)=10615,-5,-40))
postype = p1
ignorehitpause = 1

[state 19000,anim]
type = explod
triggerall = !numexplod(19300)
trigger1 = parent,stateno = [10400,10410]
trigger2 = parent,stateno = [10500,10510]
anim = 19300
id = 19300
bindtime = -1
scale = .833,1.07
ownpal = 1
pos = 33,-15
postype = p1
ignorehitpause = 1

[state 19000,anim]
type = explod
triggerall = !numexplod(19300)
trigger1 = parent,stateno = [30400,30410]
trigger2 = parent,stateno = [30500,30510]
anim = 19300
id = 19300
bindtime = -1
scale = .833,1.07
ownpal = 1
pos = 33,-15
postype = p1
ignorehitpause = 1

[state 19000,destroy]
type = changestate
trigger1 = time = 1
value = 40000

;---------------------------------------------------------------------------
;スタンドヴィジョン（スタンドクラッシュ）
[Statedef 44100]
anim = 14100
SprPriority = 2

[State 8500, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8500, 1]
type = BindToParent
trigger1 = 1
time = 1
facing = 1
pos = 0, 0

[State 10000,4]
type = Changestate
trigger1 = !animtime
value = 40000

;-------------------------------------------------------------------------
[statedef 99999]
type = A
movetype = I
physics = N
ctrl = 0
anim = 9999

[state 99999, 間違いで本体が来たら立ちへ移行]
type = selfstate
trigger1 = !ishelper
value = 0

[state 99999, 不可視化]
type = assertspecial
trigger1 = 1
flag = invisible
flag2= noshadow

[state 99999, 無敵化]
type = nothitby
trigger1 = 1
value = SCA,AA,AP,AT

[state 99999, posset]
type = posset
trigger1 = 1
x = root,pos X
y = 9999

[state 99999, turn]
type = turn
trigger1 = !root,var(0)
trigger1 = root,facing != facing

[state 99999, turn]
type = turn
trigger1 = root,var(0)
trigger1 = helper(10000),facing != facing

;Sonリセントメント
[State -1]
type = varset
trigger1 = command = "623aa" || command = "623b"
v = 0
value = 5

;Sonジャンキーカーニバル
[State -1, 11100]
type = varset
trigger1 = command = "236aa" || command = "236b"
v = 1
value = 5

;Sonバレルロールクラッシャー
[State -1, 11100]
type = varset
trigger1 = command = "214aa" || command = "214b"
v = 2
value = 5

;Sonバレルロールクラッシャー(Air)
[State -1, 11100]
type = varset
trigger1 = command = "214aa" || command = "214b"
v = 3
value = 5

;Soffリセントメント
[State -1,Light Kung Fu Knee]
type = varset
trigger1 = command = "623aa" || command = "623b"
v = 4
value = 5

;Soffジャンキーカーニバル
[State -1, 11000]
type = varset
trigger1 = command = "236aa" || command = "236b"
v = 5
value = 5

;Soffバレルロールクラッシャー
[State -1, 11000]
type = varset
trigger1 = command = "214aa" || command = "214b"
v = 6
value = 5

;Soffバレルロールクラッシャー(特キャン)
[State -1, 11100]
type = varset
trigger1 = command = "214aa" || command = "214b"
v = 7
value = 5

;タンデム
[State -1, 11101]
type = varset
trigger1 = command = "dem"
v = 8
value = 5

;Sonピラニアダイブ
[State -1, 11102]
type = varset
trigger1 = command = "Piranha1" || command = "Piranha2" || command = "Piranha3"
v = 9
value = 5

;Sonホッピングハンター
[State -1, 11200]
type = varset
trigger1 = command = "Hopping1" || command = "Hopping2" || command = "Hopping3"
v = 10
value = 5

;Sonホッピングハンター(Air)
[State -1, 11300]
type = varset
trigger1 = command = "Hopping1" || command = "Hopping2" || command = "Hopping3"
v = 11
value = 5

;Sonプロペラカッター
[State -1, 11400]
type = varset
trigger1 = command = "Propeller1" || command = "Propeller2" || command = "Propeller3"
v = 12
value = 5

;Soffピラニアダイブ
[State -1, 11500]
type = varset
trigger1 = command = "Piranha1" || command = "Piranha2" || command = "Piranha3"
v = 13
value = 5

;Soffホッピングハンター
[State -1, 11100]
type = varset
trigger1 = command = "Hopping1" || command = "Hopping2" || command = "Hopping3"
v = 14
value = 5

;Soffプロペラカッター
[State -1, 11200]
type = varset
trigger1 = command = "Propeller1" || command = "Propeller2" || command = "Propeller3"
v = 15
value = 5

;スタンド出現攻撃
[State -1, 11300]
type = varset
trigger1 = command = "Sonattack"
v = 16
value = 5

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(0) > 0
var(0) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(1) > 0
var(1) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(2) > 0
var(2) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(3) > 0
var(3) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(4) > 0
var(4) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(5) > 0
var(5) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(6) > 0
var(6) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(7) > 0
var(7) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(8) > 0
var(8) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(9) > 0
var(9) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(10) > 0
var(10) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(11) > 0
var(11) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(12) > 0
var(12) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(13) > 0
var(13) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(14) > 0
var(14) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(15) > 0
var(15) = -1

[State 99999, 真空波動拳先行入力フレーム減算]
type = varadd
trigger1 = var(16) > 0
var(16) = -1

[ja.Quotes]
victory1 = "俺は呪いのデーボ…"
victory2 = "このトンチキがーッ！\nフハハハハハー！"
victory3 = "おめーの「○△□×ッ」噛みきってやるぜ！"
victory4 = "恨めば恨むほど強くなる…\nそれが俺のスタンドだ！"
victory5 = "いてえよォおおおお\nグフヘヘヘッ"
victory6 = "うらみはらさでおくべきか"
victory7 = "うけけけけけけけけッ！！"
victory8 = "出会ったものはみな呪い殺す…"
