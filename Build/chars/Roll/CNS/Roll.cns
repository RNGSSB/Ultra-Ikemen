; Rolls's constants and state file.

[Data]
life = 1000
attack = 85
defence = 85
power = 5000
fall.defence_up = 50
liedown.time = 15
airjuggle = 15
sparkno = S4000
guard.sparkno = S4023
KO.echo = 0
volumescale = 155
volume = 155
IntPersistIndex = 59
FloatPersistIndex = 40

[Size]
xscale = .83
yscale = 1.07  
ground.back = 14     ;Player width (back, ground)
ground.front = 16    ;Player width (front, ground)
air.back = 12        ;Player width (back, air)
air.front = 12       ;Player width (front, air)
height = 60          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -5, -60   ;Approximate position of head
mid.pos = -5, -30    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,-2    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3.2        ;Walk forward
walk.back = -2.7    ;Walk backward
run.fwd  = 6.5,-1.86    ;Run forward (x, y)
run.back = -5.8,-1.86   ;Hop backward (x, y)
jump.neu = 0,-9.5    ;Neutral jumping velocity (x, y)
jump.back = -2.5     ;Jump back Speed (x, y)
jump.fwd = 2.5       ;Jump forward Speed (x, y)
runjump.back = -2.55,-3
runjump.fwd = 3.5,-3
airjump.neu = 0,-10.5      ;.
airjump.back = -2.5      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
yaccel = .58         ;Vertical acceleration
stand.friction = .8
crouch.friction = .8

;---------------------------------------------------------------------------
; Variables Definitions
; Roll
; Var(0) - Special Power
; Var(1) - Leafshield On
; Var(2) - Super Jump
; Var(3) - Camera Hit Down
; Var(4) - Next state in case of missed throw
; Var(59) - AI
;
; Rock Ball
; Var(0) - Special Power
;
; Leaf Shield
; Var(0) - Center X
; Var(1) - Center Y

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...


[Statedef 21]
type    = S
physics = S
sprpriority = 1

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 21, 1]
type = VelSet
triggerall = enemy, stateno != [191, 199]
trigger1 = command = "holdfwd"
x = 1.6

[State 21, 2]
type = VelSet
triggerall = enemy, stateno != [191, 199]
trigger1 = command = "holdback"
x = -1.6

[State 21, 3]
type = VelSet
triggerall = enemy, stateno != [191, 199]
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = command = "holdfwd" && anim != 22
value = 22

[State 21, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = command = "holdback" && anim != 23
value = 23

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = command != "holdfwd" && anim != 0
trigger1 = command != "holdback" && anim != 0
value = 0


[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 22, 0)

;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 170, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 170, 0

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = command = "holdx"
value = 181

[State 180, 1]
type = ChangeState
trigger1 = wintime
value = 181


[State 180, 2]
type = ChangeState
trigger1 = command = "holda"
value = 182

[State 180, 3]
type = ChangeState
trigger1 = command = "holdz"
value = 184

[State 180, 4]
type = ChangeState
trigger1 = command = "holdy"
value = 185

[State 180, 5]
type = ChangeState
trigger1 = command = "holdb"
value = 2306

[State 180, 6]
type = ChangeState
trigger1 = command = "holdc"
value = 2310

[State 180, 7]
type = ChangeState
trigger1 = Random < 167
value = 181

[State 180, 8]
type = ChangeState
trigger1 = Random < 200
value = 182

[State 180, 9]
type = ChangeState
trigger1 = Random < 250
value = 184

[State 180, 10]
type = ChangeState
trigger1 = Random > 333
value = 185

[State 180, 11]
type = ChangeState
trigger1 = Random > 500
value = 2306

[State 180, 12]
type = ChangeState
trigger1 = Time = 0
value = 2310

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = PlaySnd
trigger1 = Time = 2
value = 3,21
volume = 255
volumescale = 255
channel = 0

[State 181, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 2
[Statedef 182]
type = S
ctrl = 0
velset = 0,0

[State 182, 1]
type = PlaySnd
trigger1 = Anim = 181
trigger1 = AnimElem = 1, = 2
value = 181, 0

[State 182, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, 3]
type = Helper
trigger1 = Time = 0
name = "Rush"
ID  = 183
stateno = 183
pos = 0, -300

[State 182, 4]
type = ChangeAnim
trigger1 = Anim != 181
trigger1 = Anim != 182
trigger1 = helper(183), Pos Y = 0
value = 182

[State 182, 5]
type = ChangeAnim
trigger1 = Anim = 182
trigger1 = AnimTime = 0
value = 181

[State 182, 6]
type = AssertSpecial
trigger1 = time < 200
flag = roundnotover

;---------------------------------------------------------------------------
; Summon Rush Win
[Statedef 183]
type    = A
movetype= I
physics = N
velset = 0,10
anim = 183
sprpriority = 2

[State 183, 1]
type = AssertSpecial
trigger1 = Pos Y < 0
flag = noshadow

[State 183, 2]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 183, 3]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 183, 4]
type = ChangeAnim
trigger1 = Pos Y < 0
value = 183

;---------------------------------------------------------------------------
; Win pose 3
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0

[State 184, 1]
type = PlaySnd
trigger1 = Time = 2
value = 3,20
volume = 255
volumescale = 255
channel = 0

[State 184, 2]
type = PalFX
trigger1 = Time = 11
time = 3
add = 51, 51, 51

[State 184, 3]
type = PalFX
trigger1 = Time = 14
time = 4
add = 102, 102, 102

[State 184, 4]
type = PalFX
trigger1 = Time = 18
time = 3
add = 154, 154, 154

[State 184, 5]
type = PalFX
trigger1 = Time = 21
time = 3
add = 205, 205, 205

[State 184, 6]
type = PalFX
trigger1 = Time = 24
time = 6
add = 256, 256, 256

[State 184, 7]
type = PalFX
trigger1 = Time = 30
time = 3
add = 205, 205, 205

[State 184, 8]
type = PalFX
trigger1 = Time = 33
time = 4
add = 154, 154, 154

[State 184, 9]
type = PalFX
trigger1 = Time = 37
time = 3
add = 102, 102, 102

[State 184, 10]
type = PalFX
trigger1 = Time = 40
time = 4
add = 51, 51, 51

[State 184, 11]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 4
[Statedef 185]
type = S
ctrl = 0
velset = 0,0

[State 185, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 185, 2]
type = Helper
trigger1 = Time = 0
name = "Eddie"
ID  = 186
stateno = 186
pos = FrontEdgeDist + 50, 0

[State 185, 3]
type = ChangeAnim
trigger1 = Anim != 185
trigger1 = helper(186), ParentDist X > -46
value = 185

[State 185, 4]
type = AssertSpecial
trigger1 = time < 180
flag = roundnotover

;---------------------------------------------------------------------------
; Summon Fliptop Win
[Statedef 186]
type    = S
movetype= I
physics = N
velset = -4,0
anim = 186
sprpriority = 2

[State 186, 1]
type = ChangeAnim
trigger1 = ParentDist X >= -31
trigger1 = Anim = 186
value = 187

[State 186, 2]
type = VelSet
trigger1 = ParentDist X >= -31
x = 0

[State 186, 3]
type = BindtoParent
trigger1 = ParentDist X = -31
pos = 31, 0

[State 186, 4]
type = DestroySelf
trigger1 = parent, Anim = 185
trigger1 = parent, AnimElem = 4

;---------------------------------------------------------------------------
; Win pose 5
[Statedef 2306]
type = S
ctrl = 0
velset = 0,0

[State 2306, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 2306, 3]
type = Helper
trigger1 = Time = 0
name = "Beat Plane"
ID  = 2300
stateno = 2300
pos = 80, -300
facing = -1

[State 2306, 4]
type = ChangeAnim
trigger1 = Anim != 2306
trigger1 = helper(2300), stateno = 2301
value = 2306

[State 2306, 5]
type = AssertSpecial
trigger1 = time < 150
flag = roundnotover

;---------------------------------------------------------------------------
; Beat Plane
[Statedef 2300]
type    = A
movetype= A
physics = N
velset = 0,4
anim = 3201
sprpriority = 2

[State 2300, 1]
type = Helper
trigger1 = Time = 0
stateno = 2302

[State 2300, 2]
type = Helper
trigger1 = Time = 0
stateno = 2303

[State 2300, 3]
type = Helper
trigger1 = Time = 0
stateno = 2304

[State 2300, 4]
type = Helper
trigger1 = Time = 0
stateno = 2305

[State 2300, 6]
type = ChangeState
trigger1 = Pos Y > -14
value = 2301

;---------------------------------------------------------------------------
; Beat Plane
[Statedef 2301]
type    = A
movetype= A
physics = N
velset = 0,0

[State 2301, 1]
type = PosSet
trigger1 = 1
y = 10*sin((Time % 360)/(2*pi))-14

;---------------------------------------------------------------------------
; Beat Plane - Megaman
[Statedef 2302]
type    = A
movetype= A
physics = N
juggle  = 4
ctrl = 0
velset = 0,0
anim = 2302
sprpriority = 3

[State 2302, 1]
type = BindtoParent
trigger1 = 1
x = 0
y = 0

[State 2302, 1]
type = ChangeAnim
trigger1 = parent, stateno = 2301
trigger1 = anim != 2303
value = 2303

;---------------------------------------------------------------------------
; Beat Plane - Scarf
[Statedef 2303]
type    = A
movetype= A
physics = N
juggle  = 4
ctrl = 0
velset = 0,0
anim = 3204
sprpriority = 3

[State 2303, 1]
type = BindtoParent
trigger1 = 1
x = 0
y = 2

;---------------------------------------------------------------------------
; Beat Plane - Wing
[Statedef 2304]
type    = A
movetype= A
physics = N
juggle  = 4
ctrl = 0
velset = 0,0
anim = 3205
sprpriority = 3

[State 2304, 1]
type = BindtoParent
trigger1 = 1
x = 0
y = 0

;---------------------------------------------------------------------------
; Beat Plane - Propeller
[Statedef 2305]
type    = A
movetype= A
physics = N
juggle  = 4
ctrl = 0
velset = 0,0
anim = 3206
sprpriority = 3

[State 2305, 1]
type = BindtoParent
trigger1 = 1
x = 0
y = 0

;---------------------------------------------------------------------------
; Win pose 6
[Statedef 2310]
type = S
ctrl = 0
velset = 0,0
sprpriority = 3

[State 2310, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 2310, 2]
type = Helper
trigger1 = Time = 0
name = "Megaman"
ID  = 2311
stateno = 2311
pos = FrontEdgeDist + 100, 0

[State 2310, 3]
type = ChangeAnim
trigger1 = Anim != 2310
trigger1 = helper(2311), Anim = 2312
trigger1 = helper(2311), AnimElem = 10, = 5
value = 2310

[State 2310, 4]
type = AssertSpecial
trigger1 = time < 200
flag = roundnotover

;---------------------------------------------------------------------------
; Megaman
[Statedef 2311]
type    = S
movetype= I
physics = N
velset = -3.5,0
anim = 2311
sprpriority = 2

[State 2311, 1]
type = ChangeAnim
trigger1 = ParentDist X >= -53
trigger1 = Anim = 2311
value = 2312

[State 2311, 2]
type = VelSet
trigger1 = ParentDist X >= -53
x = 0

[State 2311, 3]
type = BindtoParent
trigger1 = ParentDist X = -53
pos = 53, 0

;---------------------------------------------------------------------------
; Introduction state decider
[Statedef 190]
type = S

[State 191, 1]
type = ChangeState
trigger1 = Random < 333
value = 191

[State 191, 2]
type = ChangeState
trigger1 = Random < 500
value = 196

[State 191, 3]
type = ChangeState
trigger1 = Time = 0
value = 199

;---------------------------------------------------------------------------
; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 192, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 192, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192, 3] ;Change to stand state when done
type = ChangeState
trigger1 = Anim = 195
trigger1 = AnimTime = 0
value = 0

[State 192, 4]
type = ChangeAnim
trigger1 = Anim = 190
trigger1 = AnimTime = 0
value = 195

[State 192, 5]
type = PlaySnd
trigger1 = Anim = 190
trigger1 = AnimElem = 13
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 192, 6]
type = PlaySnd
trigger1 = Anim = 190
trigger1 = AnimElem = 16
value = 5,2

[State 192, 7]
type = Explod
trigger1 = Anim = 190
trigger1 = AnimElem = 16
anim = 8000
scale = 0.5,0.5
pos = 46,-23
sprpriority = 7

[State 192, 8]
type = PlaySnd
trigger1 = Anim = 195
trigger1 = AnimElem = 1, = 2
value = 3,16
volume = 255
volumescale = 255
channel = 0

[State 192, 9]
type = Helper
trigger1 = Time = 0
name = "Eddie"
ID  = 192
stateno = 193
pos = 58, 0

;---------------------------------------------------------------------------
; Fliptop Intro
[Statedef 193]
type    = S
movetype= I
physics = N
anim = 2000
sprpriority = 2

[State 193, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 2000

[State 193, 2]
type = ChangeAnim
trigger1 = parent, AnimElem = 16
trigger1 = parent, Anim = 190
value  = 2002

[State 193, 3]
type = VelSet
trigger1 = parent, AnimElem = 16
trigger1 = parent, Anim = 190
x = 2
y = -2

[State 193, 4]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.5

[State 193, 5]
type = ChangeAnim
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 2001

[State 193, 6]
type = VelSet
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = 0
y = 0

[State 193, 7]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 193, 8]
type = ChangeAnim
trigger1 = Anim = 2001
trigger1 = AnimTime = 0
value = 2003

[State 193, 9]
type = VelSet
trigger1 = Anim = 2003
trigger1 = AnimTime = 0
x = -4

[State 193, 10]
type = ChangeAnim
trigger1 = Anim = 2003
trigger1 = AnimTime = 0
value = 186

[State 193, 11]
type = DestroySelf
trigger1 = BackEdgeDist < -100

;---------------------------------------------------------------------------
; Introduction 2
[Statedef 196]
type = S
ctrl = 0
anim = 196
velset = 0,0
sprpriority = 3

[State 196, 1] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 196, 2]
type = Helper
trigger1 = Time = 0
name = "Rush"
ID  = 197
stateno = 197
postype = front
pos = 100, 0

[State 196, 3]
type = PosSet
trigger1 = Anim = 196
trigger1 = helper(197), ParentDist X > 0
y = -5

[State 196, 4]
type = VelSet
trigger1 = Anim = 196
trigger1 = helper(197), ParentDist X > 0
y = -3

[State 196, 5]
type = ChangeAnim
trigger1 = Anim = 196
trigger1 = helper(197), ParentDist X > 0
value = 105

[State 196, 6]
type = VelAdd
trigger1 = Anim = 105
y = .5

[State 196, 7]
type = VelSet
trigger1 = Anim = 105
trigger1 = Pos Y >= 0
y = 0

[State 196, 8]
type = PosSet
trigger1 = Anim = 105
trigger1 = Pos Y > 0
y = 0

[State 196, 9]
type = PlaySnd
trigger1 = Anim = 105
trigger1 = Pos Y = 0
value = 3,23
volume = 255
volumescale = 255
channel = 0

[State 196, 10]
type = ChangeAnim
trigger1 = Anim = 105
trigger1 = Pos Y = 0
value = 47

[State 196, 11]
type = ChangeState
trigger1 = Anim = 47
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Rush Intro
[Statedef 197]
type    = S
movetype= I
physics = N
anim = 2100
sprpriority = 2

[State 197, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 2100

[State 197, 2]
type = VelSet
trigger1 = RoundState = 1
x = -4

[State 197, 8]
type = Helper
trigger1 = Time = 0
name = "Rider"
ID  = 198
stateno = 198

[State 197, 11]
type = DestroySelf
trigger1 = BackEdgeDist < -100

;---------------------------------------------------------------------------
; Rush Ride
[Statedef 198]
type    = S
movetype= I
physics = N
anim = 198
sprpriority = 3

[State 198, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 198

[State 198, 2]
type = BindtoParent
trigger1 = 1
pos = 0,0

[State 198, 3]
type = DestroySelf
trigger1 = RootDist X > 0

;---------------------------------------------------------------------------
; Introduction 3
[Statedef 199]
type = S
ctrl = 0
anim = 196
velset = 0,0
sprpriority = 3

[State 199, 1] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 199, 2]
type = Helper
trigger1 = Time = 0
name = "Beat"
ID  = 201
stateno = 192
postype = Back
pos = -100, -127

[State 199, 3]
type = PlaySnd
trigger1 = Time = 116
value = 3,24
volume = 255
volumescale = 255
channel = 0

[State 199, 4]
type = ChangeAnim
trigger1 = Time = 110
value = 47

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Anim = 47
trigger1 = AnimTime = 0
value = 0,0

[State 52, Helper]
type = Helper
trigger1 = Anim = 47
trigger1 = AnimTime = 0
stateno = 8200
pos = 0,-10


[State 199, 4]
type = ChangeState
trigger1 = Anim = 47
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Beat Intro
[Statedef 192]
type    = S
movetype= I
physics = N
anim = 2200
sprpriority = 2

[State 201, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 2200

[State 201, 2]
type = VelSet
trigger1 = RoundState = 1
x = 4

[State 201, 2]
type = VelAdd
trigger1 = FrontEdgeDist < 180
y = -.2

[State 201, 3]
type = Helper
trigger1 = Time = 0
name = "Rider"
ID  = 202
stateno = 194

[State 201, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -100
trigger2 = Pos Y < -300

;---------------------------------------------------------------------------
; Beat Ride
[Statedef 194]
type    = S
movetype= I
physics = N
anim = 199
sprpriority = 3

[State 202, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 199

[State 202, 2]
type = BindtoParent
trigger1 = Anim = 199
trigger1 = FrontEdgeDist >= 180
pos = 0,0

[State 202, 3]
type = VelSet
trigger1 = Anim = 199
trigger1 = FrontEdgeDist < 180
x = -2
y = -4

[State 202, 4]
type = PosAdd
trigger1 = Anim = 199
trigger1 = FrontEdgeDist < 180
x = 10
y = 67

[State 202, 5]
type = ChangeAnim
trigger1 = Anim = 199
trigger1 = FrontEdgeDist < 180
value = 202

[State 202, 6]
type = VelAdd
trigger1 = Anim = 202
y = 0.5

[State 202, 7]
type = DestroySelf
trigger1 = Pos Y >= 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 700]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = PlaySnd
trigger1 = Time = 3
value = 3,16
volume = 255
volumescale = 255
channel = 0


[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                     ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 200, 1]
type = hitdef
trigger1 = animelem = 3
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 7,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-30
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = 1.18
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -4.8
airguard.velocity = -10.5,3
air.velocity = -6,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 30)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing medium punch
[Statedef 210]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
anim = 210
sprpriority = 2

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 210, HitDef]
type = HitDef
trigger1 = animelem = 3
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = 0.79
ground.velocity = -9.5,0
guard.velocity = -10
air.velocity = -5,-4
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong punch
[Statedef 220]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
anim = 220
sprpriority = 2

[State 220, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 220, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 220, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Up
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 18
yaccel = .88
ground.velocity = -13.3,0
guard.velocity = -14
air.velocity = -3.5,-18.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1


[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 220, 4]
type = PosAdd
trigger1 = AnimElem = 2
x = 3

[State 220, 5]
type = VelSet
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 6, < 0
x = 1

[State 220, 6]
type = PosAdd
trigger1 = AnimTime = 0
x = -3

[State 220, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 220, 8]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

;---------------------------------------------------------------------------
; Standing light kick
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd= 22
ctrl = 0
anim = 230
sprpriority = 2

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 200, 1]
type = hitdef
trigger1 = animelem = 3
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 7,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = 1.18
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -4.8
airguard.velocity = -10.5,3
air.velocity = -6,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing medium kick
[Statedef 240]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
anim = 240
sprpriority = 2

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 210, HitDef]
type = HitDef
trigger1 = time = 0
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 8
yaccel = 1.18
ground.velocity = -9.5,0
guard.velocity = -10
air.velocity = -7,0
ground.cornerpush.veloff = -9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick
[Statedef 250]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
anim = 250
sprpriority = 2

[State 220, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 220, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 220, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 250, 4]
type = HitDef
trigger1 = Time = 0
attr = S,NA
hitflag  = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 9,7
guard.pausetime = 9,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 18
air.hittime = 18
guard.hittime = 17
yaccel = 1.06
ground.velocity = 0,-15.4
guard.velocity = -14
guard.cornerpush.veloff = -18
ground.cornerpush.veloff = 0
air.velocity = 0,-15.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
volume = 200
volumescale = 200
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 420, Explod]
type = Explod
trigger1 = movehit
anim = 8020
pos = 60, -19
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
ownpal = 1
facing = 1 

[State 8411, puntets]
type = explod
trigger1 = movehit
anim = 8007
postype = p2
pos = 0,-50
sprpriority = 4
facing = 1
persistent = 0
supermove = 1
ownpal = 1
scale = 0.6,0.6
vfacing = 1

[State 250, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch
[Statedef 400]
type    = C
movetype= A
physics = C
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state 200, 1]
type = hitdef
trigger1 = animelem = 3
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 7,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 14
ground.hittime = 10
air.hittime = 8
yaccel = 1.18
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -4.8
airguard.velocity = -10.5,3
down.velocity = -6,-7
airguard.velocity = -10.5,3
air.velocity = -6,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching strong punch
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2


[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, HitDef]
type = HitDef
trigger1 = animelem = 5
attr = C,NA
hitflag = MAF
guardflag = MA
animtype = Up
air.animtype = Up
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 16
ground.hittime = 8
air.hittime = 8
guard.hittime = 17
yaccel = 1.06
ground.velocity = 1.5,-7.4
guard.velocity = -14
guard.cornerpush.veloff = -18
ground.cornerpush.veloff = 0
air.velocity = 1.5,-7.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 410, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching strong punch
[Statedef 420]
type    = C
movetype= A
physics = C
poweradd= 50
ctrl = 0
anim = 420
sprpriority = 2

[State 220, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 220, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C,NA
hitflag = MAF
guardflag = MA
animtype = Hard
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 6
yaccel = .88
ground.velocity = -13.3,0
guard.velocity = -14
air.velocity = -9,0
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 220, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd= 22
ctrl = 0
anim = 430
sprpriority = 2

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[state 200, 1]
type = hitdef
trigger1 = animelem = 3
attr = C,NA
hitflag = MAFD
guardflag = LA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 7,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 14
ground.hittime = 10
air.hittime = 8
yaccel = 1.18
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -4.8
down.cornerpush.veloff = -25.5
down.velocity = -6,-7
airguard.velocity = -10.5,3
air.velocity = -5,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch medium kick
[Statedef 440]
type    = C
movetype= A
physics = C
poweradd= 45
ctrl = 0
anim = 440
sprpriority = 2

[State 210, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 240, 6]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, HitDef]
type = HitDef
trigger1 = animelem = 5
attr = C,NA
hitflag = MAFD
guardflag = LA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 7,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-11
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
air.hittime = 8
yaccel = 1.18
ground.velocity = -9,0
guard.velocity = -10
ground.cornerpush.veloff = -9.5
down.cornerpush.veloff = -25.5
down.velocity = -6,-7
airguard.velocity = -10.5,3
air.velocity = -6,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 11)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 440, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
[Statedef 450]
type    = C
movetype= A
physics = N
poweradd= 70
ctrl = 0
anim = 450
sprpriority = 2

[State 450, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,24
volume = 115
volumescale = 115

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 220, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1


[State 450, 3]
type = HitDef
trigger1 = Time = 0
attr = C,NA
hitflag  = MAFD
guardflag = LA
animtype = Hard
damage = 65,0
getpower = 30,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,Floor(P2Dist Y - 15)
hitsound = -1
guardsound = S6+var(49),0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 20
air.hittime = 12
guard.hittime = 17
yaccel = .86
ground.velocity = 0,-6
guard.velocity = -14
guard.cornerpush.veloff = -16
ground.cornerpush.veloff = 0
air.velocity = 0,-4
airguard.velocity = -10.5,3
down.cornerpush.veloff = -25.5
down.velocity = -6,-7
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 10
id = 4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 450, 4]
type = VelSet
trigger1 = AnimElemTime(3) > 0
x = 7.4 -.32*AnimElemTime(3)
y = 0

[State 450, 5]
type = VelSet
trigger1 = Vel X < 0
x = 0
y = 0

[State 450, 5]
type = VelSet
trigger1 = animelem = 9
x = 0
y = 0


[State 450, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 450, 8]
type = PosSet
trigger1 = (PrevStateNo = 100) || (PrevStateNo = 105)
y = 0

;---------------------------------------------------------------------------
;Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 1
y= -0.27

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 24
y= -0.02


[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 600, CtrlSet]
type = CtrlSet
trigger1 = var(29)
trigger1 = animelem = 7
value = 1

[State 600, HitDef]
type = HitDef
trigger1 = time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.32
ground.velocity = -6.5,0
guard.velocity = -5.5
down.velocity = -6,-7
ground.cornerpush.veloff = ifelse(var(20)||var(29),0,-8)
air.velocity = 0.7,-9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(29)
triggerall = anim = 600
triggerall = floor (pos Y < -155)
trigger1 = animelem = 7
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 65
ctrl = 0
anim = 610
sprpriority = 2

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 1
y= -0.27

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 24
y= -0.02

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(6) = 1

[state 610, hitdef]
type = hitdef
trigger1 = time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = up
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.32
ground.velocity = -9.5,0
guard.velocity = -9
down.velocity = -6,-7
ground.cornerpush.veloff = ifelse(var(20)||var(29),0,-8)
air.velocity = -0.3,-8.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, CtrlSet]
type = CtrlSet
trigger1 = var(29)
trigger1 = animelem = 7
value = 1

[State 620, ChangeState]
type = ChangeState
triggerall = var(29)
triggerall = anim = 610
triggerall = floor (pos Y < -155)
trigger1 = animelem = 7
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = A
poweradd= 65
ctrl = 0
anim = 620
sprpriority = 2

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 1
y= -0.27

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 24
y= -0.02

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 620, CtrlSet]
type = CtrlSet
trigger1 = var(29)
trigger1 = animelem = 7
value = 1

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(18) > 1 && var(19) > 0
var(6) = 1


[State 620, HitDef]
type = HitDef
trigger1 = !var(6) && time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 6,7
guard.pausetime = 6,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = 0.91
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -12,0
ground.cornerpush.veloff = ifelse(var(6)||var(29),0,-8)
air.velocity = -14,6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(6) && time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 6,7
guard.pausetime = 6,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = 0.91
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -12,0
ground.cornerpush.veloff = ifelse(var(6)||var(29),0,-8)
air.velocity = -14,6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64


[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
volume = 200
volumescale = 200
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(29)
triggerall = anim = 620
triggerall = floor (pos Y < -155)
trigger1 = animelem = 7
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
anim = 630
sprpriority = 2

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 1
y= -0.27

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 24
y= -0.02

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(6) = 1

[State 600, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,3
volume = 40

[State 600, CtrlSet]
type = CtrlSet
trigger1 = var(29)
trigger1 = animelem = 7
value = 1

[State 600, HitDef]
type = HitDef
trigger1 = time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.32
ground.velocity = -6.5,0
guard.velocity = -5.5
down.velocity = -6,-7
ground.cornerpush.veloff = ifelse(var(20)||var(29),0,-8)
air.velocity = 0.7,-9.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),0
channel = 6
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(29)
triggerall = anim = 630
triggerall = floor (pos Y < -155)
trigger1 = animelem = 7
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = A
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 1
y= -0.27

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 24
y= -0.02

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,4
volume = 40

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(6) = 1

[state 610, hitdef]
type = hitdef
trigger1 = time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = up
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 6,6
guard.pausetime = 6,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.32
ground.velocity = -9.5,0
guard.velocity = -9
down.velocity = -6,-7
ground.cornerpush.veloff = ifelse(var(20)||var(29),0,-8)
air.velocity = -0.3,-8.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),1
channel = 6
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, CtrlSet]
type = CtrlSet
trigger1 = var(29)
trigger1 = animelem = 13
value = 1

[State 620, ChangeState]
type = ChangeState
triggerall = var(29)
triggerall = anim = 640
triggerall = floor (pos Y < -155)
trigger1 = animelem = 13
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Strong Kick
[Statedef 650]
type    = A
movetype= A
physics = A
poweradd= 65
ctrl = 0
anim = 650
sprpriority = 2

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 1
y= -0.27

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 24
y= -0.02

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State 620, CtrlSet]
type = CtrlSet
trigger1 = var(29)
trigger1 = animelem = 8
value = 1

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(18) > 1 && var(19) > 0
var(6) = 1


[State 620, HitDef]
type = HitDef
trigger1 = !var(6) && time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = 0.91
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -12,0
ground.cornerpush.veloff = ifelse(var(6)||var(29),0,-8)
air.velocity = -14,6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(6) && time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = 0.91
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -12,0
ground.cornerpush.veloff = ifelse(var(6)||var(29),0,-8)
air.velocity = -14,6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64


[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
volume = 200
volumescale = 200
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(29)
triggerall = anim = 650
triggerall = floor (pos Y < -155)
trigger1 = animelem = 8
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Jump strong kick up
[Statedef 655]
type    = A
movetype= A
physics = A
poweradd= 65
ctrl = 0
anim = 655
sprpriority = 2


[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 1
y= -0.27

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 24
y= -0.02

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,5
volume = 40

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 620, CtrlSet]
type = CtrlSet
trigger1 = var(29)
trigger1 = animelem = 8
value = 1

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(18) > 1 && var(19) > 0
var(6) = 1


[State 620, HitDef]
type = HitDef
trigger1 = !var(6) && time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 6,7
guard.pausetime = 6,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = 0.91
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -12,0
ground.cornerpush.veloff = ifelse(var(6)||var(29),0,-8)
air.velocity = -14,6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(6) && time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Back
air.animtype = back
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 6,7
guard.pausetime = 6,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = 0.91
down.velocity = -6,-7
guard.velocity = -14
ground.velocity = -12,0
ground.cornerpush.veloff = ifelse(var(6)||var(29),0,-8)
air.velocity = -14,6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64


[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
volume = 200
volumescale = 200
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = var(29)
triggerall = anim = 655
triggerall = floor (pos Y < -155)
trigger1 = animelem = 8
value = 1211
ctrl = 1

; Oo 
[Statedef 710]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(5) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100
  

;---------------------------------------------------------------------------
;Throw - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit state. This prevents KFM from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
sprpriority = 1       ;Draw in front of p2
hitsound = S5,4
p1facing = ifelse (command = "holdfwd", 1, -1) ;Turn if holding forwards
p2facing = 1          ;Force p2 to face KFM
p1stateno = 810       ;On success, KFM changes to state 810
p2stateno = 820       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
fall.yvelocity = -.5
fall.envshake.time = 8
fall.envshake.ampl = -4
fall.envshake.freq = 60


[State 900, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 220

;---------------------------------------------------------------------------
;Throw - Throwing the opponent
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 60

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(-5*const(size.xscale)),ceil(-50*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 16, -43

[State 810, Width 2]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(3) < 0
edge = 60,60

[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 38, -45

[State 810, Hurt 3]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = -78

[State 810, Throw 3]
type = TargetState
trigger1 = AnimElem = 3
value = 821

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Thrown by Throw
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[State 820, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

;---------------------------------------------------------------------------
;Thrown by Throw - thrown into the air
[Statedef 821]
type    = A
movetype= H
physics = N
velset = -8,16
poweradd = 40

[State 821, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 821

[State 9001, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9001, VelAdd]
type = VelAdd
trigger1 = 1
y = .72

[State 0, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110 ;Hit ground

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 822]
type    = L
movetype= H
physics = N

[State 822, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 822, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 822, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 822, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 822, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 822, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 822, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 822, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 822, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 822, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 822, 11]
type = PosFreeze
trigger1 = 1

[State 822, 12]
type = SelfState
trigger1 = AnimTime = 0
value = 5101

[State 822, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
;Throw - Attempt
[Statedef 830]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 800
sprpriority = 2

[State 830, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = A-
priority = 1, Miss
sparkno = -1
sprpriority = 1
hitsound = S5,4
p1facing = ifelse (command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 840
p2stateno = 820
guard.dist = 0
fall = 1
fall.yvelocity = -.5
fall.yvelocity = -.5
fall.envshake.time = 8
fall.envshake.ampl = -4
fall.envshake.freq = 60

[State 900, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 620

;---------------------------------------------------------------------------
;Throw - Throwing the opponent
[Statedef 840]
type    = A
movetype= A
physics = N
anim = 810
velset = 0,0
poweradd = 60

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(-5*const(size.xscale)),ceil(-50*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 840, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 16, -46

[State 840, Width 2]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(3) < 0
edge = 60,60

[State 840, Bind 2]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 38, -45

[State 840, Hurt 3]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = -78

[State 840, Throw 3]
type = TargetState
trigger1 = AnimElem = 3
value = 821

[State 840, State End]
type = ChangeState
trigger1 = AnimElem = 6
value = 1221

[State 840, StateTypeSet] ;State type gets set to ground
type = StateTypeSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
type = S
physics = S

[State 840, VelSet] ;Land
type = PosSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0

[State 840, VelSet] ;Land
type = VelSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0

[State 0, VelAdd]
type = VelSet
trigger1 = time>16
y = 4.44

;---------------------------------------------------------------------------
; Buster
[Statedef 1000]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1000
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,11
volume = 255
volumescale = 255
channel = 0

[State 1000, 3]
type = PlaySnd
trigger1 = AnimElem = 7, = 2
value = 3,17
volume = 155
volumescale = 155

[state -2, Slow ChargeFX1]
type = palfx
trigger1 = time % 56 = [12,15]
add = 160,160,160
time = 1

[State 1000, 4]
type = Explod
trigger1 = AnimElem = 7
anim = 1001
bindtime = -1
sprpriority = 5

[State 1000, 5]
type = Projectile
trigger1 = AnimElem = 7, = 2
ProjID = 1000
projanim = 1002
projhitanim = 1003
projscale = .83,1.07  
offset = 0, 0
velocity = 5, 0
attr = S, SP
damage    = 65,2
getpower  = 60
givepower = 40
guardflag = MA
hitflag = MAFD
pausetime = 0,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = 20,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 6
yaccel = .88
ground.velocity = -13.3,0
guard.velocity = -14
air.velocity = -9,0
down.cornerpush.veloff = -25.5
down.velocity = -6,-7
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[state 200, 1]
type = playsnd
trigger1 = projhit = 1
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = projhit = 1
anim = 8006
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Buster in Air
[Statedef 1010]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
anim = 1010
sprpriority = 2
hitcountpersist = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,11
volume = 255
volumescale = 255
channel = 0

[State 1000, 3]
type = PlaySnd
trigger1 = AnimElem = 7, = 2
value = 3,17
volume = 155
volumescale = 155

[state -2, Slow ChargeFX1]
type = palfx
trigger1 = time % 56 = [12,15]
add = 160,160,160
time = 1

[State 1010, 3]
type = Explod
trigger1 = AnimElem = 7
anim = 1001
bindtime = -1
sprpriority = 5

[State 1010, 4]
type = Projectile
trigger1 = AnimElem = 7, = 2
projID = 1010
projanim = 1002
projhitanim = 1003
offset = 0, -5
projscale = .83,1.07  
velocity = 5, 0
attr = S, SP
damage    = 65,2
getpower  = 60
givepower = 40
guardflag = MA
pausetime = 0,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = 20,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 6
air.hittime = 6
yaccel = .88
ground.velocity = -6,-4
guard.velocity = -14
air.velocity = -9,0
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0

[state 200, 1]
type = playsnd
trigger1 = projhit = 1
value = s5+var(49),2
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = projhit = 1
anim = 8006
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1010, 5]
type = VelSet
trigger1 = Vel X > .25
x = .25

[State 1010, 6]
type = VelSet
trigger1 = Vel X < -.25
x = -.25

[State 1010, 7]
type = VelMul
trigger1 = Time = 0
trigger1 = Vel Y <= 2
trigger1 = Vel Y >= -2
y = .25

[State 1010, 8]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y > 2
y = 1.2

[State 1010, 9]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y < -2
y = -.6

[State 1010, 10]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 1010, 11]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1010, 11]
type = VarSet
trigger1 = ProjHitTime(1010) = 1
trigger1 = HitCount >= 1
trigger1 = P2StateType = A
ignorehitpause = 1
v = 3
value = 1

[State 1010, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Throw Bouquet
[Statedef 1100]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1100
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,5
volume = 255
volumescale = 255
channel = 0


[State 1100, 2]
type = Helper
trigger1 = AnimElem = 2
stateno = 1101

[State 1100, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Bouquet
[Statedef 1101]
type    = A
movetype= A
physics = N
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1101
sprpriority = 1

[State 1101, 1]
type = BindtoParent
trigger1 = Time < 16
pos = -34, -50

[State 1101, 2]
type = BindtoParent
trigger1 = Time = 16
trigger2 = Time = 17
pos = 3, -81

[State 1101, 3]
type = VelSet
trigger1 = Time = 17
x = 2
y = -4.59

[State 1101, 4]
type = VelAdd
trigger1 = Vel X > 0
x = -.035

[State 1101, 5]
type = VelAdd
trigger1 = Time > 17
y = .17

[State 1101, 6]
type = HitDef
trigger1 = Time >= 17
attr = A, SP
animtype  = Light
damage    = 35
guardflag = MA
pausetime = 5,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 13
yaccel = .88
ground.velocity = -7.5,0
guard.velocity = -8
air.velocity = -9,0
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 0
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1101, 7]
type = PlaySnd
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
channel = 7
ignorehitpause = 1
persistent = 0
volume = 200
volumescale = 200
value = 5,10

[State 1101, 8]
type = Explod
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
anim = 8083
scale = 0.4,0.4
pos = 10,30
ignorehitpause = 1
sprpriority = 5

[State 1101, 9]
type = DestroySelf
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
trigger3 = Time < 17
trigger3 = (Parent, StateNo != 1100 && Parent, StateNo != 1130)
ignorehitpause = 1

;---------------------------------------------------------------------------
; Throw Bouquet
[Statedef 1110]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1100
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,5
volume = 255
volumescale = 255
channel = 0


[State 1110, 3]
type = Helper
trigger1 = AnimElem = 2
name = "Flowers"
stateno = 1111

[State 1110, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Bouquet
[Statedef 1111]
type    = A
movetype= A
physics = N
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1101
sprpriority = 1

[State 1111, 1]
type = BindtoParent
trigger1 = Time < 16
pos = -34, -50

[State 1111, 2]
type = BindtoParent
trigger1 = Time = 16
trigger2 = Time = 17
pos = 3, -81

[State 1111, 3]
type = VelSet
trigger1 = Time = 17
x = 4
y = -4.59

[State 1111, 4]
type = VelAdd
trigger1 = Vel X > 0
x = -.07

[State 1111, 5]
type = VelAdd
trigger1 = Time > 17
y = .17

[State 1111, 6]
type = HitDef
trigger1 = Time >= 17
attr = A, SP
animtype  = Light
damage    = 57
guardflag = MA
pausetime = 5,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 13
yaccel = .88
ground.velocity = -7.5,0
guard.velocity = -8
air.velocity = -9,0
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 0
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1101, 7]
type = PlaySnd
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
channel = 7
ignorehitpause = 1
persistent = 0
volume = 200
volumescale = 200
value = 5,10

[State 1101, 8]
type = Explod
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
anim = 8083
scale = 0.4,0.4
pos = 10,30
ignorehitpause = 1
sprpriority = 5

[State 1111, 9]
type = DestroySelf
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
trigger3 = Time < 17
trigger3 = (Parent, StateNo != 1110 && Parent, StateNo != 1140)
ignorehitpause = 1

;---------------------------------------------------------------------------
; Throw Bouquet
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1100
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,5
volume = 255
volumescale = 255
channel = 0


[State 1120, 3]
type = Helper
trigger1 = AnimElem = 2
name = "Flowers"
stateno = 1121

[State 1120, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Bouquet
[Statedef 1121]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1101
sprpriority = 1

[State 1121, 1]
type = BindtoParent
trigger1 = Time < 16
pos = -34, -50

[State 1121, 2]
type = BindtoParent
trigger1 = Time = 16
trigger2 = Time = 17
pos = 3, -81

[State 1121, 3]
type = VelSet
trigger1 = Time = 17
x = 8
y = -5.39

[State 1121, 4]
type = VelAdd
trigger1 = Vel X > 0
x = -.15

[State 1121, 5]
type = VelAdd
trigger1 = Time > 17
y = .17

[State 1121, 6]
type = HitDef
trigger1 = Time >= 17
attr = A, SP
animtype  = Light
damage    = 57
guardflag = MA
pausetime = 5,5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 13
yaccel = .88
ground.velocity = -7.5,0
guard.velocity = -8
air.velocity = -9,0
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 0
fall.recover = 0
id = 2+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1101, 7]
type = PlaySnd
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
channel = 7
ignorehitpause = 1
persistent = 0
volume = 200
volumescale = 200
value = 5,10

[State 1101, 8]
type = Explod
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
anim = 8083
scale = 0.4,0.4
pos = 10,30
ignorehitpause = 1
sprpriority = 5

[State 1121, 9]
type = DestroySelf
trigger1 = MoveContact
trigger2 = Vel Y > 0
trigger2 = Pos Y > -19
trigger3 = Time < 17
trigger3 = (Parent, StateNo != 1120 && Parent, StateNo != 1150)
ignorehitpause = 1

;---------------------------------------------------------------------------
; Throw Bouquet (Short in Air)
[Statedef 1130]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
anim = 1110
sprpriority = 2

[State 1130, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,5
volume = 255
volumescale = 255
channel = 0

[State 1130, 2]
type = Helper
trigger1 = AnimElem = 2
name = "Flowers"
stateno = 1101

[State 1130, 3]
type = VelSet
trigger1 = Vel X > .25
x = .25

[State 1130, 4]
type = VelSet
trigger1 = Vel X < -.25
x = -.25

[State 1130, 5]
type = VelMul
trigger1 = Time = 0
trigger1 = Vel Y <= 2
trigger1 = Vel Y >= -2
y = .25

[State 1130, 6]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y > 2
y = 1.2

[State 1130, 7]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y < -2
y = -.5

[State 1130, 8]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 1130, 9]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1130, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Throw Bouquet (Medium in Air)
[Statedef 1140]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
anim = 1110
sprpriority = 2

[State 1140, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,5
volume = 255
volumescale = 255
channel = 0

[State 1140, 2]
type = Helper
trigger1 = AnimElem = 2
stateno = 1111

[State 1140, 3]
type = VelSet
trigger1 = Vel X > .25
x = .25

[State 1140, 4]
type = VelSet
trigger1 = Vel X < -.25
x = -.25

[State 1140, 5]
type = VelMul
trigger1 = Time = 0
trigger1 = Vel Y <= 2
trigger1 = Vel Y >= -2
y = .25

[State 1140, 6]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y > 2
y = 1.2

[State 1140, 7]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y < -2
y = -.5

[State 1140, 8]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 1140, 9]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1140, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Throw Bouquet (Long in Air)
[Statedef 1150]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
anim = 1110
sprpriority = 2

[State 1150, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,5
volume = 255
volumescale = 255
channel = 0

[State 1150, 2]
type = Helper
trigger1 = AnimElem = 2
name = "Flowers"
stateno = 1121

[State 1150, 3]
type = VelSet
trigger1 = Vel X > .25
x = .25

[State 1150, 4]
type = VelSet
trigger1 = Vel X < -.25
x = -.25

[State 1150, 5]
type = VelMul
trigger1 = Time = 0
trigger1 = Vel Y <= 2
trigger1 = Vel Y >= -2
y = .25

[State 1150, 6]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y > 2
y = .5

[State 1150, 7]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y < -2
y = 1.2

[State 1150, 8]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 1150, 9]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1150, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Rock Ball (Short Punch)
[Statedef 1200]
type    = S
movetype= I
physics = S
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1200
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1200, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 1200, 4]
type = Helper
trigger1 = AnimElem = 7
type = normal
name = "Rockball"
ID = 515
pos = 30, -44
postype = p1
stateno = 1201
facing = 1
ownpal = 1



[State 1200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Rock Ball
[Statedef 1201]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1202                       
poweradd = 0                   
sprpriority = 5                 

[state 516,1]
type = velset
trigger1 = time = 0
x = 2

[state 516,2]
type = gravity
trigger1 = 1

[State 516,3]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -7
value = 1202
;---------------------------------------------------------------------------
; Rockball (on the ground)
[Statedef 1202]
type    = S                     
physics = S                     
velset = 0,0                    
ctrl = 0                      
anim = 1202                       
poweradd = 0                   
sprpriority = 5                 

[state 517,1]
type = turn
trigger1 = facing = 1 && root, facing = -1
trigger2 = facing = -1 && root, facing = 1

[state 517,2]
type = posset
trigger1 = time = 0
y = -7

[state 517,3]
type = ChangeState
trigger1 = rootdist x = [-60, 30]
trigger1 = root, stateno = 230
trigger1 = root, animelem = 3
trigger2 = root, stateno = 250
trigger2 = root, animelem = 7
value = 1204

[state 517,4]
type = ChangeState
triggerall = rootdist x = [-85, 10]
trigger1 = root, stateno = 430
trigger1 = root, animelem = 3
trigger2 = root, stateno = 440
trigger2 = root, animelem = 5
trigger3 = root, stateno = 450
trigger3 = root, animelem = 3, >= 0 && root, animelem = 7, < 0
value = 1205

[state 517,5]
type = ChangeState
trigger1 = numhelper(515) > 1
value = 1203
;---------------------------------------------------------------------------
; Rockball (destroy)
[Statedef 1203]
type    = S                     
physics = S                     
velset = 0,0                    
ctrl = 0                      
anim = 9999                       
poweradd = 0                   
sprpriority = 5                 

[State 1101, 7]
type = PlaySnd
trigger1 = time = 0
channel = 7
ignorehitpause = 1
persistent = 0
volume = 200
volumescale = 200
value = 5,10

[State 1101, 8]
type = Explod
trigger1 = time = 0
anim = 8083
scale = 0.4,0.4
pos = 10,30
ignorehitpause = 1
sprpriority = 5

[state 518,1]
type = posset
trigger1 = time = 0
y = -7

[state 518,2]
type = DestroySelf
trigger1 = time = 10

;---------------------------------------------------------------------------
; Rockball (kicked high)
[Statedef 1204]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 7,-4                    
ctrl = 0                      
anim = 1201                       
poweradd = 0                   
sprpriority = 6  

[State 4000]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 6
persistent = 0
ignorehitpause = 1


[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow                

[state 519,1]
type = playsnd
trigger1 = time = 0
value = s5,0
channel = 6
ignorehitpause = 1
persistent = 0


[State 519,3]
type = Explod
trigger1 = time = 0
anim = 8000
scale = 0.5,0.5
pos = 0, 0
postype = p1
removetime = -2
ignorehitpause = 1
bindtime = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 519,4]
type = HitDef
trigger1 = time = 0
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 95,0
getpower = 30,0
givepower = 20,0
pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 6
yaccel = .88
ground.velocity = -9,0
guard.velocity = -9
air.velocity = -9,0
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 0
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0            

[state 519,5]
type = nothitby
trigger1 = Time >= 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 519,6]
type = varset
trigger1 = time = 0
v = 16
value = 0

[state 519,7]
type = varadd
trigger1 = screenpos x != [12,308]
trigger2 = screenpos y != [9,231]
trigger3 = var(16) < 4 && pos y >= -8 && vel y > 0
v = 16
value = 1

[state 519,8]
type = varadd
trigger1 = MoveContact
v = 16
persistent = 0
value = 2

[state 519,9]
type = VelMul
trigger1 = var(16) < 4 && screenpos x != [12,308]
x = -0.9

[state 519,10]
type = VelMul
trigger1 = var(16) < 4 && screenpos y != [9,231]
trigger2 = var(16) < 4 && pos y >= -8 && vel y > 0
y = -1

[state 519,11]
type = playsnd
trigger1 = var(16) < 4 && screenpos x != [12,308]
trigger2 = var(16) < 4 && screenpos y != [9,231]
trigger3 = var(16) < 4 && pos y >= -8 && vel y > 0
value = 3,0
volume = 140
volumescale = 140
channel = 8
persistent = 1


[state 519,12]
type = afterimage
trigger1 = time = 0
time = 500
PalBright = 0, 0, 100
PalContrast = 255, 255, 255
PalAdd = 0, 0, 0
PalMul = 0.5, 0.5, 1.8
framegap = 2
length = 11

[state 519,13]
type = changeanim
trigger1 = anim != 1203 && vel x < 0
value = 1203

[state 519,14]
type = changeanim
trigger1 = anim != 1201 && vel x > 0
value = 1201

[state 519,15]
type = playerpush
trigger1 = time > 0
value = 0

[State 519,16]
type = DestroySelf
trigger1 = screenpos x != [-100,420]
trigger2 = screenpos y != [-100,340]
;---------------------------------------------------------------------------
; Rockball (kicked low)
[Statedef 1205]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 9,-4                    
ctrl = 0                      
anim = 1201                       
poweradd = 0                   
sprpriority = 6 

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow                

[state 519,1]
type = playsnd
trigger1 = time = 0
value = s5,0
channel = 6
ignorehitpause = 1
persistent = 0

[State 4000]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 6
persistent = 0
ignorehitpause = 1

[State 519,3]
type = Explod
trigger1 = time = 0
anim = 8000
scale = 0.5,0.5
pos = 0, 0
postype = p1
removetime = -2
ignorehitpause = 1
bindtime = 1
persistent = 0
sprpriority = 5
ownpal = 1

[state 520,3]
type = varadd
trigger1 = MoveContact
v = 16
persistent = 0
value = 2

[State 520,5]
type = HitDef
trigger1 = time = 0
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 95,0
getpower = 30,0
givepower = 20,0
pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 6
yaccel = .88
ground.velocity = -9,0
guard.velocity = -9
air.velocity = -9,0
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 0
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0                 

[state 520,6]
type = nothitby
trigger1 = Time >= 0
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 520,7]
type = varset
trigger1 = time = 0
v = 16
value = 0

[state 520,8]
type = varadd
trigger1 = screenpos x != [12,308]
trigger2 = screenpos y != [9,231]
trigger3 = var(16) < 4 && pos y >= -8 && vel y > 0
v = 16
value = 1

[state 520,9]
type = VelMul
trigger1 = var(16) < 4 && screenpos x != [12,308]
x = -0.9

[state 520,10]
type = VelMul
trigger1 = var(16) < 4 && screenpos y != [9,231]
trigger2 = var(16) < 4 && pos y >= -8 && vel y > 0
y = -1

[state 520,11]
type = playsnd
trigger1 = var(16) < 4 && screenpos x != [12,308]
trigger2 = var(16) < 4 && screenpos y != [9,231]
trigger3 = var(16) < 4 && pos y >= -8 && vel y > 0
value = 3,0
volume = 140
volumescale = 140
channel = 8
persistent = 1


[state 520,12]
type = afterimage
trigger1 = time = 0
time = 500
PalBright = 0, 0, 200
PalContrast = 255, 255, 255
PalAdd = 0, 0, 0
PalMul = 0.5, 0.5, 1.8
framegap = 2
length = 11

[state 519,13]
type = changeanim
trigger1 = anim != 1203 && vel x < 0
value = 1203

[state 519,14]
type = changeanim
trigger1 = anim != 1201 && vel x > 0
value = 1201

[state 519,15]
type = playerpush
trigger1 = time > 0
value = 0

[State 519,16]
type = DestroySelf
trigger1 = screenpos x != [-100,420]
trigger2 = screenpos y != [-100,340]

;---------------------------------------------------------------------------
; Jab Tornado Hold
[Statedef 1300]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 1300                       
poweradd = 100                   
sprpriority = 2                 

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,14
volume = 255
volumescale = 255
channel = 0

[state 500,2]
type = Helper
trigger1 = time = 13
scale = 83, 1.07
name = "Tornado"
ID = 1300
pos = 20, -42
postype = p1
stateno = 1303
ownpal = 1

[state 500,3]
type = nothitby
trigger1 = Time = [12,13]
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[State 500,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Strong Tornado Hold
[Statedef 1301]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 1300                       
poweradd = 100                   
sprpriority = 2                 

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,14
volume = 255
volumescale = 255
channel = 0

[state 501,2]
type = Helper
trigger1 = time = 13
scale = 83, 1.07
name = "Tornado"
ID = 1300
pos = 20, -42
postype = p1
stateno = 1303
ownpal = 1

[state 501,3]
type = nothitby
trigger1 = Time = [12,13]
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[State 501,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Fierce Tornado Hold
[Statedef 1302]
type    = S                     
movetype= A                    
physics = S                     
juggle  = 1                     
velset = 0,0                    
ctrl = 0                      
anim = 1300                      
poweradd = 100                   
sprpriority = 2                 

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,14
volume = 255
volumescale = 255
channel = 0


[state 502,2]
type = Helper
trigger1 = time = 13
name = "Tornado"
ID = 1300
pos = 20, -42
postype = p1
stateno = 1303
scale = 83, 1.07
ownpal = 1

[state 502,3]
type = nothitby
trigger1 = Time = [12,13]
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[State 502,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Tornado Hold (in the air)
[Statedef 1303]
type    = A                     
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 1301                       
poweradd = 0                   
sprpriority = 5                 

[state 503,1]
type = velmul
trigger1 = facing = 1 && screenpos x = [290,320]
trigger2 = facing = -1 && screenpos x = [0,30] 
x = 0

[state 503,2]
type = velset
trigger1 = time = 0 && root, stateno = 1300
x = 6
y = 5.5

[state 503,3]
type = velset
trigger1 = time = 0 && root, stateno = 1301
x = 8
y = -2

[state 503,4]
type = velset
trigger1 = time = 0 && root, stateno = 1302
x = 9
y = -4

[state 503,5]
type = veladd
trigger1 = root, stateno != 1300
y = 0.7

[State 503,6]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1304
;---------------------------------------------------------------------------
; Tornado Hold (on the ground)
[Statedef 1304]
type    = S                     
movetype= A 
physics = S
velset = 0,0                    
ctrl = 0                      
anim = 1302                       
poweradd = 0                   
sprpriority = 5                 

[state 504,1]
type = posset
trigger1 = 1
y = 0

[State 504,5]
type = HitDef
trigger1 = time % 8 = 0 && hitcount < 3
attr = S,NA
hitflag  = MAFD
guardflag = MAfd
animtype = Up
damage   = 34,3
getpower = 50,0
givepower = 20,0
guardflag = MA
pausetime = 0,3
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 11
air.hittime = 11
guard.hittime = 17
yaccel = 1.29
down.velocity = -9,-7
ground.velocity = 0.1,-12
ground.cornerpush.veloff = 0
air.velocity = 0.1,-12
guard.velocity = -10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+parent,var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+parent,var(49),1
channel = 6
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 504,6]
type = playsnd
trigger1 = time = 2
value = 3,26
volume = 220
volumescale = 220

[state 504,7]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; Leaf Shield (Short Punch)
[Statedef 1400]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1400
sprpriority = 2


[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 1400, 3]
type = Helper
trigger1 = AnimElem = 7
trigger1 = NumHelper(1401) = 0
name = "Leaf Shield"
ID = 1401
stateno = 1401

[State 1400, 4]
type = VarSet
trigger1 = AnimElem = 7
v = 1
value = 1

[State 1400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1401]
type    = S
movetype= I
physics = N
anim = 1401
ctrl = 0


[State 1401, 1]
type = BindtoParent
trigger1 = Vel X = 0
pos = 0, -28

[State 1401, 2]
type = Helper
trigger1 = Time = 0
ID = 1402
name = "Leaf Shield"
stateno = 1402

[State 1401, 3]
type = Helper
trigger1 = Time = 0
ID = 1403
stateno = 1403

[State 1401, 4]
type = Helper
trigger1 = Time = 0
ID = 1404
stateno = 1404

[State 1401, 5]
type = Helper
trigger1 = Time = 0
ID = 1405
stateno = 1405

[State 1401, 6]
type = Helper
trigger1 = Time = 0
ID = 1406
stateno = 1406

[State 1401, 7]
type = Helper
trigger1 = Time = 0
ID = 1407
stateno = 1407

[State 1401, 8]
type = Helper
trigger1 = Time = 0
ID = 1408
stateno = 1408

[State 1401, 9]
type = Helper
trigger1 = Time = 0
ID = 1409
stateno = 1409

[State 1401, 10]
type = VarAdd
trigger1 = 1
v = 0
value = 7

[State 1401, 11]
type = VarAdd
trigger1 = var(0) >= 360
v = 0
value = -360


[State 1400, 12]
type = ParentVarSet
trigger1 = Time = 250
trigger2 = (parent, stateno = 1410) || (parent, stateno = 1413)
trigger2 = parent, animelem = 7
trigger3 = parent, Time = 22
trigger3 = (parent, stateno = 3000) || (parent, stateno = 3100) || (parent, stateno = 3200)
v = 1
value = 0

[State 1401, 13]
type = ChangeState
trigger1 = (parent, stateno = 1410) || (parent, stateno = 1413)
trigger1 = parent, animelem = 7
value = 1414

[State 1401, 15]
type = ChangeState
trigger1 = Time = 250
value = 1411

[State 1401, 16]
type = ChangeState
trigger1 = parent, Time = 22
trigger1 = (parent, stateno = 3000) || (parent, stateno = 3100) || (parent, stateno = 3200)
value = 1412

[State 1401, 17]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AP, AT
stateno = 1412

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1402]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1402
sprpriority = 4

[State 1402, 1]
type = BindtoParent
trigger1 = 1
pos = 35 * cos(Pi/180*(parent, var(0))), 35 * sin(Pi/180*(parent, var(0)))

[State 1402, 2]
type = StateTypeSet
trigger1 = parent, vel X != 0
movetype = A

[State 4001, snd]
type = parentvarset
trigger1 = movehit
v = 15
value = 1
persistent = 0
ignorehitpause = 1

[State 4001, snd]
type = parentvarset
trigger1 = moveguarded
v = 15
value = 29
persistent = 0
ignorehitpause = 1


[State 1402, 3]
type = HitDef
trigger1 = parent, vel X != 0
attr = A, SP
animtype  = Light
damage    = 13,2
guardflag = MA
pausetime = 2, 5
guard.pausetime = 2, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 15
air.hittime = 9
ground.velocity = -13.5
guard.velocity = -11
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1402, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -50
trigger2 = BackEdgeDist < -50
trigger3 = MoveContact
trigger4 = (Anim = 1411) || (Anim = 1412)
trigger4 = AnimTime = 0

[State 1402, 5]
type = ChangeAnim
trigger1 = parent, stateno = 1411
trigger1 = Anim != 1411
value = 1411

[State 1402, 6]
type = ChangeAnim
trigger1 = parent, stateno = 1412
trigger1 = Anim != 1412
value = 1412

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1403]
type    = A
movetype= I
physics = N
anim = 1402
sprpriority = 4

[State 1403, 1]
type = BindtoParent
trigger1 = 1
pos = 35 * cos(Pi/180*(parent, var(0) + 45)),  35 * sin(Pi/180*(parent, var(0) + 45))

[State 1402, 2]
type = StateTypeSet
trigger1 = parent, vel X != 0
movetype = A

[State 4001, snd]
type = parentvarset
trigger1 = movehit
v = 15
value = 2
persistent = 0
ignorehitpause = 1

[State 4001, snd]
type = parentvarset
trigger1 = moveguarded
v = 15
value = 30
persistent = 0
ignorehitpause = 1

[State 1403, 3]
type = HitDef
trigger1 = parent, vel X != 0
attr = A, SP
animtype  = Light
damage    = 13,2
guardflag = MA
pausetime = 2, 5
guard.pausetime = 2, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 15
air.hittime = 9
ground.velocity = -13.5
guard.velocity = -11
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1403, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -50
trigger2 = BackEdgeDist < -50
trigger3 = MoveContact
trigger4 = (Anim = 1411) || (Anim = 1412)
trigger4 = AnimTime = 0

[State 1403, 5]
type = ChangeAnim
trigger1 = parent, stateno = 1411
trigger1 = Anim != 1411
value = 1411

[State 1403, 6]
type = ChangeAnim
trigger1 = parent, stateno = 1412
trigger1 = Anim != 1412
value = 1412

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1404]
type    = A
movetype= I
physics = N
anim = 1402
sprpriority = 4

[State 1404, 1]
type = BindtoParent
trigger1 = 1
pos = 35 * cos(Pi/180*(parent, var(0) + 90)), 35 * sin(Pi/180*(parent, var(0) + 90))

[State 1402, 2]
type = StateTypeSet
trigger1 = parent, vel X != 0
movetype = A

[State 4001, snd]
type = parentvarset
trigger1 = movehit
v = 15
value = 3
persistent = 0
ignorehitpause = 1

[State 4001, snd]
type = parentvarset
trigger1 = moveguarded
v = 15
value = 31
persistent = 0
ignorehitpause = 1

[State 1404, 3]
type = HitDef
trigger1 = parent, vel X != 0
attr = A, SP
animtype  = Light
damage    = 13,2
guardflag = MA
pausetime = 2, 5
guard.pausetime = 2, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 15
air.hittime = 9
ground.velocity = -13.5
guard.velocity = -11
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1404, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -50
trigger2 = BackEdgeDist < -50
trigger3 = MoveContact
trigger4 = (Anim = 1411) || (Anim = 1412)
trigger4 = AnimTime = 0

[State 1404, 5]
type = ChangeAnim
trigger1 = parent, stateno = 1411
trigger1 = Anim != 1411
value = 1411

[State 1404, 6]
type = ChangeAnim
trigger1 = parent, stateno = 1412
trigger1 = Anim != 1412
value = 1412

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1405]
type    = A
movetype= I
physics = N
anim = 1402
sprpriority = 4

[State 1405, 1]
type = BindtoParent
trigger1 = 1
pos = 35 * cos(Pi/180*(parent, var(0) + 135)), 35 * sin(Pi/180*(parent, var(0) + 135))

[State 1405, 2]
type = StateTypeSet
trigger1 = parent, vel X != 0
movetype = A

[State 4001, snd]
type = parentvarset
trigger1 = movehit
v = 15
value = 4
persistent = 0
ignorehitpause = 1

[State 4001, snd]
type = parentvarset
trigger1 = moveguarded
v = 15
value = 32
persistent = 0
ignorehitpause = 1


[State 1405, 3]
type = HitDef
trigger1 = parent, vel X != 0
attr = A, SP
animtype  = Light
damage    = 13,2
guardflag = MA
pausetime = 2, 5
guard.pausetime = 2, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 15
air.hittime = 9
ground.velocity = -13.5
guard.velocity = -11
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1405, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -50
trigger2 = BackEdgeDist < -50
trigger3 = MoveContact
trigger4 = (Anim = 1411) || (Anim = 1412)
trigger4 = AnimTime = 0

[State 1405, 5]
type = ChangeAnim
trigger1 = parent, stateno = 1411
trigger1 = Anim != 1411
value = 1411

[State 1405, 6]
type = ChangeAnim
trigger1 = parent, stateno = 1412
trigger1 = Anim != 1412
value = 1412

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1406]
type    = A
movetype= I
physics = N
anim = 1402
sprpriority = 4

[State 1406, 1]
type = BindtoParent
trigger1 = 1
pos = 35 * cos(Pi/180*(parent, var(0) + 180)), 35 * sin(Pi/180*(parent, var(0) + 180))

[State 1406, 2]
type = StateTypeSet
trigger1 = parent, vel X != 0
movetype = A

[State 4001, snd]
type = parentvarset
trigger1 = movehit
v = 15
value = 5
persistent = 0
ignorehitpause = 1

[State 4001, snd]
type = parentvarset
trigger1 = moveguarded
v = 15
value = 33
persistent = 0
ignorehitpause = 1

[State 1406, 3]
type = HitDef
trigger1 = parent, vel X != 0
attr = A, SP
animtype  = Light
damage    = 13,2
guardflag = MA
pausetime = 2, 5
guard.pausetime = 2, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 15
air.hittime = 9
ground.velocity = -13.5
guard.velocity = -11
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 51)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1406, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -50
trigger2 = BackEdgeDist < -50
trigger3 = MoveContact
trigger4 = (Anim = 1411) || (Anim = 1412)
trigger4 = AnimTime = 0

[State 1406, 5]
type = ChangeAnim
trigger1 = parent, stateno = 1411
trigger1 = Anim != 1411
value = 1411

[State 1406, 6]
type = ChangeAnim
trigger1 = parent, stateno = 1412
trigger1 = Anim != 1412
value = 1412

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1407]
type    = A
movetype= I
physics = N
anim = 1402
sprpriority = 4

[State 1407, 1]
type = BindtoParent
trigger1 = 1
pos = 35 * cos(Pi/180*(parent, var(0) + 225)), 35 * sin(Pi/180*(parent, var(0) + 225))

[State 1407, 2]
type = StateTypeSet
trigger1 = parent, vel X != 0
movetype = A

[State 4001, snd]
type = parentvarset
trigger1 = movehit
v = 15
value = 6
persistent = 0
ignorehitpause = 1

[State 4001, snd]
type = parentvarset
trigger1 = moveguarded
v = 15
value = 34
persistent = 0
ignorehitpause = 1

[State 1407, 3]
type = HitDef
trigger1 = parent, vel X != 0
attr = A, SP
animtype  = Light
damage    = 13,2
guardflag = MA
pausetime = 2, 5
guard.pausetime = 2, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 15
air.hittime = 9
ground.velocity = -13.5
guard.velocity = -11
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 42)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1407, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -50
trigger2 = BackEdgeDist < -50
trigger3 = MoveContact
trigger4 = (Anim = 1411) || (Anim = 1412)
trigger4 = AnimTime = 0

[State 1407, 5]
type = ChangeAnim
trigger1 = parent, stateno = 1411
trigger1 = Anim != 1411
value = 1411

[State 1407, 6]
type = ChangeAnim
trigger1 = parent, stateno = 1412
trigger1 = Anim != 1412
value = 1412

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1408]
type    = A
movetype= I
physics = N
anim = 1402
sprpriority = 4

[State 1408, 1]
type = BindtoParent
trigger1 = 1
pos = 35 * cos(Pi/180*(parent, var(0) + 270)), 35 * sin(Pi/180*(parent, var(0) + 270))

[State 1408, 2]
type = StateTypeSet
trigger1 = parent, vel X != 0
movetype = A

[State 4001, snd]
type = parentvarset
trigger1 = movehit
v = 15
value = 7
persistent = 0
ignorehitpause = 1

[State 4001, snd]
type = parentvarset
trigger1 = moveguarded
v = 15
value = 35
persistent = 0
ignorehitpause = 1

[State 1408, 3]
type = HitDef
trigger1 = parent, vel X != 0
attr = A, SP
animtype  = Light
damage    = 13,2
guardflag = MA
pausetime = 2, 5
guard.pausetime = 2, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 15
air.hittime = 9
ground.velocity = -13.5
guard.velocity = -11
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1408, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -50
trigger2 = BackEdgeDist < -50
trigger3 = MoveContact
trigger4 = (Anim = 1411) || (Anim = 1412)
trigger4 = AnimTime = 0

[State 1408, 5]
type = ChangeAnim
trigger1 = parent, stateno = 1411
trigger1 = Anim != 1411
value = 1411

[State 1408, 6]
type = ChangeAnim
trigger1 = parent, stateno = 1412
trigger1 = Anim != 1412
value = 1412

;---------------------------------------------------------------------------
; Leaf Shield
[Statedef 1409]
type    = A
movetype= I
physics = N
anim = 1402
sprpriority = 4

[State 1409, 1]
type = BindtoParent
trigger1 = 1
pos = 35 * cos(Pi/180*(parent, var(0) + 315)), 35 * sin(Pi/180*(parent, var(0) + 315))

[State 1409, 2]
type = StateTypeSet
trigger1 = parent, vel X != 0
movetype = A

[State 4001, snd]
type = parentvarset
trigger1 = movehit
v = 15
value = 8
persistent = 0
ignorehitpause = 1

[State 4001, snd]
type = parentvarset
trigger1 = moveguarded
v = 15
value = 36
persistent = 0
ignorehitpause = 1

[State 1409, 3]
type = HitDef
trigger1 = parent, vel X != 0
attr = A, SP
animtype  = Light
damage    = 13,2
guardflag = MA
pausetime = 2, 5
guard.pausetime = 2, 5
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
yaccel = 0.8
down.velocity = -9,-7
ground.hittime = 15
air.hittime = 9
ground.velocity = -13.5
guard.velocity = -11
air.velocity = -12, -2
air.juggle = 1
air.fall = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1409, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -50
trigger2 = BackEdgeDist < -50
trigger3 = MoveContact
trigger4 = (Anim = 1411) || (Anim = 1412)
trigger4 = AnimTime = 0

[State 1409, 5]
type = ChangeAnim
trigger1 = parent, stateno = 1411
trigger1 = Anim != 1411
value = 1411

[State 1409, 6]
type = ChangeAnim
trigger1 = parent, stateno = 1412
trigger1 = Anim != 1412
value = 1412

;---------------------------------------------------------------------------
; Leaf Shield (Shoot)
[Statedef 1410]
type    = A
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1200
sprpriority = 2



[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 1410, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Leaf Shield Dissipate
[Statedef 1411]
type    = S
movetype= I
physics = N
sprpriority = 2
anim = 1413

[State 1411, 1]
type = DestroySelf
trigger1 = Time = 15
trigger2 = stateno = 3000
trigger3 = stateno = 3100
trigger4 = stateno = 3200
;---------------------------------------------------------------------------
; Leaf Shield Hit
[Statedef 1412]
type    = S
movetype= I
physics = N
sprpriority = 2
anim = 1413

[State 1412, 1]
type = ParentVarSet
trigger1 = Time = 15
v = 1
value = 0

[State 1412, 2]
type = DestroySelf
trigger1 = Time = 15

;---------------------------------------------------------------------------
; Leaf Shield Shoot in Air
[Statedef 1413]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
anim = 1010
sprpriority = 2


[State 1000, 2]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3,14
volume = 255
volumescale = 255
channel = 0

[State 1413, 5]
type = VelSet
trigger1 = Vel X > .25
x = .25

[State 1413, 6]
type = VelSet
trigger1 = Vel X < -.25
x = -.25

[State 1413, 7]
type = VelMul
trigger1 = Time = 0
trigger1 = Vel Y <= 2
trigger1 = Vel Y >= -2
y = .25

[State 1413, 8]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y > 2
y = 1.2

[State 1413, 9]
type = VelSet
trigger1 = Time = 0
trigger1 = Vel Y < -2
y = -.5

[State 1413, 10]
type = VelSet
trigger1 = Pos Y > 0
y = 0

[State 1413, 11]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 1413, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211

;---------------------------------------------------------------------------
; Leaf Shield Still
[Statedef 1414]
type    = S
movetype= I
physics = N
anim = 1413

[State 1414, 1]
type = BindtoParent
trigger1 = Vel X = 0
pos = 0, -28

[State 1414, 2]
type = ChangeState
trigger1 = Time = 12
value = 1415

;---------------------------------------------------------------------------
; Leaf Shield Forward
[Statedef 1415]
type    = S
movetype= I
physics = N
anim = 1413
velset = 4.5*(parent, facing)*facing,0

[State 1415, 1]
type = VarAdd
trigger1 = 1
v = 0
value = 7

[State 1415, 2]
type = VarAdd
trigger1 = var(0) >= 360
v = 0
value = -360


[State 4000]
type = playsnd
trigger1 = var(15) = 1
value = s5+parent,var(49),1
channel = 2
persistent = 0
ignorehitpause = 1 

[State 4000]
type = playsnd
trigger1 = var(15) = 2
value = s5+parent,var(49),1
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 3
value = s5+parent,var(49),1
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 4
value = s5+parent,var(49),1
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 5
value = s5+parent,var(49),1
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 6
value = s5+parent,var(49),1
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 7
value = s5+parent,var(49),1
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 8
value = s5+parent,var(49),1
channel = 2
persistent = 0
ignorehitpause = 1



;guardsounds
[State 4000]
type = playsnd
trigger1 = var(15) = 29
value = s6+parent,var(49),0
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 30
value = s6+parent,var(49),0
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 31
value = s6+parent,var(49),0
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 32
value = s6+parent,var(49),0
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 33
value = s6+parent,var(49),0
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 34
value = s6+parent,var(49),0
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 35
value = s6+parent,var(49),0
channel = 2
persistent = 0
ignorehitpause = 1

[State 4000]
type = playsnd
trigger1 = var(15) = 36
value = s6+parent,var(49),0
channel = 2
persistent = 0
ignorehitpause = 1


[State 1415, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -180
trigger2 = BackEdgeDist < -180
trigger3 = numhelper(1402) = 0
trigger3 = numhelper(1403) = 0
trigger3 = numhelper(1404) = 0
trigger3 = numhelper(1405) = 0
trigger3 = numhelper(1406) = 0
trigger3 = numhelper(1407) = 0
trigger3 = numhelper(1408) = 0
trigger3 = numhelper(1409) = 0

;---------------------------------------------------------------------------
; Summon Rock Ball
[Statedef 1500]
type    = S
movetype= I
physics = S
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1500
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,21
volume = 255
volumescale = 255
channel = 0

[State 1500, 3]
type = Helper
trigger1 = AnimElem = 2
type = normal
ID = 1500
name = "Eddie"
stateno = 1501
pos = 90, -240

[State 1500, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Summon Flip-top Down
[Statedef 1501]
type = A
ctrl = 0
anim = 1501
velset = 0,8
physics = N
sprpriority = 4

[state 481,1]
type = playsnd
trigger1 = time = 5
value = 3,3
volume = 165
volumescale = 165

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 481,2]
type = veladd
trigger1 = 1
y = 0.5

[State 481,3]
type = ChangeState
trigger1 = Pos Y > 0 && Vel Y >= 0
value = 1502

;---------------------------------------------------------------------------
; Summon Flip-top 
[Statedef 1502]
type = S
ctrl = 0
anim = 1502
velset = 0,0
physics = S
sprpriority = 4

[State 1502, 1]
type = Helper
trigger1 = AnimElem = 8
type = normal
name = "Rockball Sphere"
ID = 1504
pos = 0, -32
postype = p1
stateno = 1504
ownpal = 1

[State 1502, 2]
type = ParentVarSet
trigger1 = var(0) = 1
v = 0
value = 0

[state 482,2]
type = posset
trigger1 = 1
y = 0

[State 1502, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1503

;---------------------------------------------------------------------------
; Summon Flip-top Up
[Statedef 1503]
type = A
ctrl = 0
anim = 1503
velset = 0,-8
physics = N
sprpriority = 4

[State 483,1]
type = DestroySelf
trigger1 = Time = 40

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1503, 2]
type = ParentVarSet
trigger1 = var(0) = 1
v = 0
value = 0

;---------------------------------------------------------------------------
; Rock Ball Power-Up
[Statedef 1504]
type    = S
movetype= I
physics = N
velset = -1.7,-8
anim = 1504
sprpriority = 2

[State 1504, 1]
type = VelSet
trigger1 = Pos Y > -7
x = 0
y = 0

[State 1504, 2]
type = PosSet
trigger1 = Pos Y > -7
y = -7

[State 1504, 3]
type = VelAdd
trigger1 = Pos Y < -7
y = .4

[State 1504, 4]
type = ParentVarSet
trigger1 = RootDist X < 27
trigger1 = RootDist X > -27
trigger1 = RootDist Y < 70
trigger1 = RootDist Y > -15
v = 0
value = 1

[State 1504, 5]
type = Helper
trigger1 = RootDist X < 27
trigger1 = RootDist X > -27
trigger1 = RootDist Y < 70
trigger1 = RootDist Y > -15
name = "Rock Ball Text"
stateno = 1505
facing = facing

[State 1504, 6]
type = DestroySelf
trigger1 = Time = 400
trigger2 = RootDist X < 27
trigger2 = RootDist X > -27
trigger2 = RootDist Y < 70
trigger2 = RootDist Y > -15

;---------------------------------------------------------------------------
; Rock Ball Text
[Statedef 1505]
type    = S
movetype= I
physics = N
anim = 1505
sprpriority = 7

[State 1505, 1]
type = VelAdd
trigger1 = Time >= 28
x = -2

[state 481,1]
type = playsnd
trigger1 = time = 1
value = 3,25
volume = 255
volumescale = 255    

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1505, 2]
type = DestroySelf
trigger1 = (ScreenPos X < -50) || (ScreenPos X > 370)

;---------------------------------------------------------------------------
; Summon Tornado Hold
[Statedef 1510]
type    = S
movetype= I
physics = S
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1500
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,21
volume = 255
volumescale = 255
channel = 0

[State 1510, 3]
type = Helper
trigger1 = AnimElem = 2
type = normal
ID = 1500
name = "Eddie"
stateno = 1511
pos = 90, -240

[State 1510, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Summon Flip-top Down
[Statedef 1511]
type = A
ctrl = 0
anim = 1501
velset = 0,8
physics = N
sprpriority = 4

[state 481,1]
type = playsnd
trigger1 = time = 5
value = 3,3
volume = 165
volumescale = 165

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 481,2]
type = veladd
trigger1 = 1
y = 0.5

[State 481,3]
type = ChangeState
trigger1 = Pos Y > 0 && Vel Y >= 0
value = 1512

;---------------------------------------------------------------------------
; Summon Flip-top 
[Statedef 1512]
type = S
ctrl = 0
anim = 1502
velset = 0,0
physics = S
sprpriority = 4

[State 1502, 1]
type = Helper
trigger1 = AnimElem = 8
type = normal
ID = 1514
name = "Tornado Hold Power-up"
stateno = 1514
pos = 0, -32
postype = p1
ownpal = 1

[state 482,2]
type = posset
trigger1 = 1
y = 0

[State 1512, 2]
type = ParentVarSet
trigger1 = var(0) = 1
v = 0
value = 1

[State 1512, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1513

;---------------------------------------------------------------------------
; Summon Flip-top Up
[Statedef 1513]
type = A
ctrl = 0
anim = 1503
velset = 0,-8
physics = N
sprpriority = 4

[State 483,1]
type = DestroySelf
trigger1 = Time = 40

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1513, 2]
type = ParentVarSet
trigger1 = var(0) = 1
v = 0
value = 1

;---------------------------------------------------------------------------
; Tornado Hold Power-Up
[Statedef 1514]
type    = S
movetype= I
physics = N
velset = -1.7,-8
anim = 1514
sprpriority = 2

[State 1514, 1]
type = VelSet
trigger1 = Pos Y > -7
x = 0
y = 0

[State 1514, 2]
type = PosSet
trigger1 = Pos Y > -7
y = -7

[State 1514, 3]
type = VelAdd
trigger1 = Pos Y < -7
y = .40

[State 1514, 4]
type = ParentVarSet
trigger1 = RootDist X < 27
trigger1 = RootDist X > -27
trigger1 = RootDist Y < 70
trigger1 = RootDist Y > -15
v = 0
value = 1

[State 1514, 5]
type = Helper
trigger1 = RootDist X < 27
trigger1 = RootDist X > -27
trigger1 = RootDist Y < 70
trigger1 = RootDist Y > -15
name = "Tornado Hold Text"
stateno = 1515
facing = facing

[State 1514, 6]
type = DestroySelf
trigger1 = Time = 400
trigger2 = RootDist X < 27
trigger2 = RootDist X > -27
trigger2 = RootDist Y < 70
trigger2 = RootDist Y > -15

;---------------------------------------------------------------------------
; Tornado Hold Text
[Statedef 1515]
type    = S
movetype= I
physics = N
anim = 1515
sprpriority = 7

[State 1515, 1]
type = VelAdd
trigger1 = Time >= 28
x = -2

[state 481,1]
type = playsnd
trigger1 = time = 1
value = 3,25
volume = 255
volumescale = 255    

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1515, 2]
type = DestroySelf
trigger1 = (ScreenPos X < -50) || (ScreenPos X > 370)

;---------------------------------------------------------------------------
; Summon Leaf Shield
[Statedef 1520]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1500
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 1000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,21
volume = 255
volumescale = 255
channel = 0

[State 1520, 3]
type = Helper
trigger1 = AnimElem = 2
type = normal
ID = 1500
name = "Eddie"
stateno = 1521
pos = 90, -240

[State 1520, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Summon Flip-top Down
[Statedef 1521]
type = A
ctrl = 0
anim = 1501
velset = 0,8
physics = N
sprpriority = 4

[state 481,1]
type = playsnd
trigger1 = time = 5
value = 3,3
volume = 165
volumescale = 165

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 481,2]
type = veladd
trigger1 = 1
y = 0.5

[State 481,3]
type = ChangeState
trigger1 = Pos Y > 0 && Vel Y >= 0
value = 1522

;---------------------------------------------------------------------------
; Summon Flip-top 
[Statedef 1522]
type = S
ctrl = 0
anim = 1502
velset = 0,0
physics = S
sprpriority = 4

[State 1502, 1]
type = Helper
trigger1 = AnimElem = 8
type = normal
ID = 1524
name = "Leaf Shield Power-up"
stateno = 1524
pos = 0, -32
postype = p1
ownpal = 1

[state 482,2]
type = posset
trigger1 = 1
y = 0

[State 1522, 2]
type = ParentVarSet
trigger1 = var(0) = 1
v = 0
value = 2

[State 1522, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 1523

;---------------------------------------------------------------------------
; Summon Flip-top Up
[Statedef 1523]
type = A
ctrl = 0
anim = 1503
velset = 0,-8
physics = N
sprpriority = 4

[State 483,1]
type = DestroySelf
trigger1 = Time = 40

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1523, 2]
type = ParentVarSet
trigger1 = var(0) = 1
v = 0
value = 2

;---------------------------------------------------------------------------
; Leaf Sheild Power-Up
[Statedef 1524]
type    = S
movetype= I
physics = N
velset = -1.7,-8
anim = 1524
sprpriority = 2

[State 1524, 1]
type = VelSet
trigger1 = Pos Y > -7
x = 0
y = 0

[State 1524, 2]
type = PosSet
trigger1 = Pos Y > -7
y = -7

[State 1524, 2]
type = VelAdd
trigger1 = Pos Y < -7
y = .40

[State 1524, 3]
type = ParentVarSet
trigger1 = RootDist X < 27
trigger1 = RootDist X > -27
trigger1 = RootDist Y < 70
trigger1 = RootDist Y > -15
v = 0
value = 1

[State 1524, 5]
type = Helper
trigger1 = RootDist X < 27
trigger1 = RootDist X > -27
trigger1 = RootDist Y < 70
trigger1 = RootDist Y > -15
name = "Leaf Shield Text"
stateno = 1525
facing = facing

[State 1524, 3]
type = DestroySelf
trigger1 = Time = 400
trigger2 = RootDist X < 27
trigger2 = RootDist X > -27
trigger2 = RootDist Y < 70
trigger2 = RootDist Y > -15

;---------------------------------------------------------------------------
; Leaf Shield Text
[Statedef 1525]
type    = S
movetype= I
physics = N
anim = 1525
sprpriority = 7

[State 1525, 1]
type = VelAdd
trigger1 = Time >= 28
x = -2

[state 481,1]
type = playsnd
trigger1 = time = 1
value = 3,25
volume = 255
volumescale = 255    

[State 1503, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1525, 2]
type = DestroySelf
trigger1 = (ScreenPos X < -50) || (ScreenPos X > 370)


;---------------------------------------------------------------------------
; Hyper Roll
[Statedef 3000]
type    = U
movetype= A
physics = N
juggle  = 4
ctrl = 0
velset = 0,0
anim = 3000
sprpriority = 2


[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 8
var(5) = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 38
var(5) = 0

[State 1000, Explod]
type = Explod
triggerall = pos y >= -1
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1


[State 3000, Helper]
type = Helper
trigger1 = animelem = 8
stateno = 8500
supermovetime = 99999999
pos = 0,ceil(-30*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 8
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 8
value = SCA

[State 3000, 1]
type = Helper
trigger1 = Time = 0
name = "Rush"
ID  = 3110
stateno = 3110
pos = -BackEdgeDist - 9, floor(-Pos Y)
supermovetime = 48

[State 3000, 1]
type = Helper
trigger1 = Time = 0
name = "Beat"
ID  = 3210
stateno = 3210
pos = -BackEdgeDist - 9, -120
supermovetime = 48

[State 3000, 1]
type = Helper
trigger1 = Time = 0
name = "Eddie"
ID  = 3010
stateno = 3010
pos = FrontEdgeDist + 23, -117
supermovetime = 48
facing = -1

[State 3000, 2]
type = PlaySnd
trigger1 = Time = 2
value = 3,21
volume = 255
volumescale = 255
channel = 0

[State 3000, 3]
type = PlaySnd
trigger1 = AnimElem = 16
value = 3,2
volume = 125
volumescale = 125
channel = 3

[State 3000, 3]
type = PlaySnd
trigger1 = AnimElem = 17
value = 3,27
volume = 175
volumescale = 175
channel = 3


[State 3000, 3]
type = Helper
trigger1 = AnimElem = 17
stateno = 3001
pos = -23, -135

[State 3000, 4]
type = HitDef
trigger1 = Time = 0
attr = S, HA
animtype = Up
air.animtype = Up
damage    = 51,3
getpower  = 0
guardflag = MA
pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 18
air.hittime = 18
guard.hittime = 17
yaccel = 1.26
ground.velocity = -3,-31.4
guard.velocity = -14
guard.cornerpush.veloff = -18
ground.cornerpush.veloff = 0
air.velocity = -3,-31.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
air.fall = 1
fall.recover = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+var(49),2
channel = 6
volume = 200
volumescale = 200
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3000, 3]
type = Helper
trigger1 = AnimElem = 21
trigger2 = AnimElem = 25
trigger3 = AnimElem = 29
stateno = 3002
pos = -19, -110

[State 3000, 3]
type = Helper
trigger1 = AnimElem = 26
trigger2 = AnimElem = 30
stateno = 3003
pos = 6, -78

[State 3000, 4]
type = Helper
trigger1 = AnimElem = 23, = 10
trigger2 = AnimElem = 27, = 10
trigger3 = AnimElem = 31, = 10
stateno = 3004
pos = 9, -49

[State 3000, 5]
type = Helper
trigger1 = AnimElem = 27, = 5
trigger2 = AnimElem = 31, = 5
stateno = 3005
pos = -3, -39

[State 3000, 1] ;Hyper Glow
type = Explod
trigger1 = AnimElem = 15
anim = 3016
bindtime = -1
scale = .83,1.07  
sprpriority = 2
ownpal = 1

[State 3000, 1] ;Hyper Glow A
type = Explod
trigger1 = AnimElem = 15
anim = 3017
bindtime = -1
scale = .83,1.07  
sprpriority = 3
ownpal = 1

[State 3000, 1] ;Hyper Glow B
type = Explod
trigger1 = AnimElem = 15
anim = 3018
bindtime = -1
scale = .83,1.07  
sprpriority = 3
ownpal = 1

[State 3000, 1] ;Hyper Glow C
type = Explod
trigger1 = AnimElem = 15
anim = 3019
bindtime = -1
scale = .83,1.07  
sprpriority = 3
ownpal = 1

[State 3000, 1] ;Hyper Glow D
type = Explod
trigger1 = AnimElem = 15
anim = 3020
bindtime = -1
scale = .83,1.07  
sprpriority = 3
ownpal = 1

[State 3000, 1] ;Hyper Glow E
type = Explod
trigger1 = AnimElem = 15
anim = 3021
bindtime = -1
scale = .83,1.07  
sprpriority = 3
ownpal = 1

[State 3000, 1] ;Hyper Glow F
type = Explod
trigger1 = AnimElem = 15
anim = 3022
bindtime = -1
scale = .83,1.07  
sprpriority = 3
ownpal = 1

[State 3000, 1] ;Hyper Glow G
type = Explod
trigger1 = AnimElem = 15
anim = 3023
bindtime = -1
scale = .83,1.07  
sprpriority = 3
ownpal = 1

[State 3000, 3]
type = PalFX
trigger1 = Time = 19
time = 3
add = 51, 51, 51

[State 3000, 4]
type = PalFX
trigger1 = Time = 22
time = 4
add = 102, 102, 102

[State 3000, 5]
type = PalFX
trigger1 = Time = 26
time = 3
add = 154, 154, 154

[State 3000, 6]
type = PalFX
trigger1 = Time = 29
time = 4
add = 205, 205, 205

[State 3000, 7]
type = PalFX
trigger1 = Time = 33
time = 34
add = 256, 256, 256

[State 3000, 1]
type = PalFX
trigger1 = Time = 192
time = 12
add = 256, 256, 256

[State 3000, 2]
type = PalFX
trigger1 = Time = 204
time = 3
add = 205, 205, 205

[State 3000, 3]
type = PalFX
trigger1 = Time = 207
time = 4
add = 154, 154, 154

[State 3000, 4]
type = PalFX
trigger1 = Time = 211
time = 3
add = 102, 102, 102

[State 3000, 5]
type = PalFX
trigger1 = Time = 214
time = 4
add = 51, 51, 51

[State 3000, 2]
type = Helper
trigger1 = Time = 196
name = "Rush"
ID  = 3112
stateno = 3112
pos = -23, 0

[State 3000, 1]
type = Helper
trigger1 = Time = 196
name = "Beat"
ID  = 3211
stateno = 3211
pos = -9, -47

[State 3000, 1]
type = Helper
trigger1 = Time = 196
name = "Eddie"
ID  = 3011
stateno = 3011
pos = -10, -50
facing = -1

[State 3000, 4]
type = ChangeState
trigger1 = Pos Y < 0
trigger1 = AnimElem = 38
value = 3006

[State 3000, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hyper Roll - Electricity
[Statedef 3001]
type    = S
movetype= A
physics = S
anim = 3001
sprpriority = 4


[State 3001, 1]
type = HitDef
trigger1 = Time % 4 = 0
attr = A, HP
damage = 20,6
getpower  = 0
guardflag = MA
priority = 3
pausetime = 0,3
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = s6+parent,var(49),0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = 2,0
air.fall = 1
fall = 1
yaccel = 0.8

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 2
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 3
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 4
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 5
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 6
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 7
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 8
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 9
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 10
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 11
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 12
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 13
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 14
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 15
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 16
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 17
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 18
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 19
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 20
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 1
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 2
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 3
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 4
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 5
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 6
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 7
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 8
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 9
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 10
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 11
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 12
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 13
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 14
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 15
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 16
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 17
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 18
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 19
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
triggerall = hitcount = 20
trigger1 = MoveContact
anim = Cond(MoveHit, 8003, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -5
bindtime = 1
removetime = -2
supermovetime = 9999999
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0



[State 3001, 2]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Hyper Roll - Missiles
[Statedef 3002]
type    = A
movetype= A
physics = N
anim = 3002
velset = 7.5,0
sprpriority = 4

[State 3002, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HP
damage = 10,3
getpower  = 0
guardflag = MAFD
priority = 3
pausetime = 0,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 12
air.hittime = 6
yaccel = .88
ground.velocity = -6.5,-6
guard.velocity = -8
air.velocity = -6.5,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 3002, 2]
type = DestroySelf
trigger1 = FrontEdgeDist < -100
trigger2 = BackEdgeDist < -100

;---------------------------------------------------------------------------
; Hyper Roll - Beat
[Statedef 3003]
type    = A
movetype= A
physics = N
anim = 3003
velset = 10,0
sprpriority = 4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0


[State 3003, 1]
type = Explod
trigger1 = Time = 6
anim = 3013
scale = .83,1.07  
bindtime = -1
removetime = -1
sprpriority = 3

[State 3003, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HP
damage = 10,3
getpower  = 0
guardflag = MAFD
priority = 3
pausetime = 0,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 12
air.hittime = 6
yaccel = .88
ground.velocity = -6.5,-6
guard.velocity = -8
air.velocity = -6.5,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3003, 3]
type = RemoveExplod
trigger1 = FrontEdgeDist < -100
trigger2 = BackEdgeDist < -100

[State 3003, 4]
type = DestroySelf
trigger1 = FrontEdgeDist < -100
trigger2 = BackEdgeDist < -100

;---------------------------------------------------------------------------
; Hyper Roll - Fliptop
[Statedef 3004]
type    = A
movetype= A
physics = N
anim = 3004
velset = 10,0
sprpriority = 4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[State 3004, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HP
damage = 10,3
getpower  = 0
guardflag = MAFD
priority = 3
pausetime = 0,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 12
air.hittime = 6
yaccel = .88
ground.velocity = -6.5,-6
guard.velocity = -8
air.velocity = -6.5,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3004, 2]
type = DestroySelf
trigger1 = FrontEdgeDist < -100
trigger2 = BackEdgeDist < -100

;---------------------------------------------------------------------------
; Hyper Roll - Rush
[Statedef 3005]
type    = A
movetype= A
physics = N
anim = 3005
velset = 11,0
sprpriority = 4

[state 200, 1]
type = playsnd
triggerall = hitcount = 1
trigger1 = movehit
value = s5+parent,var(49),1
channel = 2
ignorehitpause = 1
persistent = 0

[State 3005, 1]
type = VelSet
trigger1 = AnimElem = 2
y = 3

[State 3005, 2]
type = PosSet
trigger1 = Pos Y > 7
y = 7

[State 3005, 3]
type = Explod
trigger1 = Time = 6
anim = 3015
bindtime = -1
scale = .83,1.07  
removetime = -1
sprpriority = 3

[State 3005, 4]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HP
damage = 10,3
getpower  = 0
guardflag = MAFD
priority = 3
pausetime = 0,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+parent,var(49),0
ground.type = Low
ground.slidetime = 18
ground.hittime = 12
air.hittime = 6
yaccel = .88
ground.velocity = -6.5,-6
guard.velocity = -8
air.velocity = -6.5,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3005, 5]
type = RemoveExplod
trigger1 = FrontEdgeDist < -100
trigger2 = BackEdgeDist < -100

[State 3005, 6]
type = DestroySelf
trigger1 = FrontEdgeDist < -100
trigger2 = BackEdgeDist < -100

;---------------------------------------------------------------------------
; Hyper Roll (air end)
[Statedef 3006]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                                       
ctrl = 0                      
anim = 90                  
poweradd = 0                   
sprpriority = -1  

[State 3202, 2]
type = Helper
trigger1 = animelem = 2
name = "Beat"
ID  = 3211
stateno = 3211
pos = -9, -47                

[state 1032,1]
type = removeexplod
trigger1 = 1
id = 1033

[state 1032,2]
type = removeexplod
trigger1 = 1
id = 1034

[state 1032,3]
type = removeexplod
trigger1 = 1
id = 1032

[state 1032,4]
type = removeexplod
trigger1 = 1
id = 1037

[state 1032,5]
type = removeexplod
trigger1 = 1
id = 1038

[state 1032,6]
type = removeexplod
trigger1 = 1
id = 11038

[state 1032,7]
type = removeexplod
trigger1 = 1
id = 11037

[state 1032,8]
type = removeexplod
trigger1 = 1
id = 11033

[state 1032,9]
type = removeexplod
trigger1 = 1
id = 11034

[state 1032,10]
type = removeexplod
trigger1 = 1
id = 11032

[state 1032,11]
type = removeexplod
trigger1 = 1
id = 1046

[state 1032,12]
type = removeexplod
trigger1 = 1
id = 1047

[state 1032,13]
type = removeexplod
trigger1 = 1
id = 1048

[state 1032,14]
type = removeexplod
trigger1 = 1
id = 1049

[state 1032,15]
type = removeexplod
trigger1 = 1
id = 11046

[state 1032,16]
type = removeexplod
trigger1 = 1
id = 11047

[state 1032,17]
type = removeexplod
trigger1 = 1
id = 11048

[state 1032,18]
type = removeexplod
trigger1 = 1
id = 11049

[state 1032,19]
type = veladd
trigger1 = time>1
y = 0.76

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = -2
y = -7

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -2
y = 2

[state 1032,20]
type = palfx
trigger1 = time = [0,2]
add = 250,250,250
time = 1

[state 1032,21]
type = palfx
trigger1 = time = [2,4]
add = 200,200,200
time = 1

[state 1032,22]
type = palfx
trigger1 = time = [4,6]
add = 150,150,150
time = 1

[state 1032,23]
type = palfx
trigger1 = time = [6,8]
add = 100,100,100
time = 1

[state 1032,24]
type = palfx
trigger1 = time = [8,10]
add = 50,50,50
time = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 1
var(5) = 0

[State 1032,26]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Eddie
[Statedef 3010]
type    = S
movetype= I
physics = N
velset = 4,0
anim = 2002
sprpriority = 2

[State 3010, 1]
type = VelSet
trigger1 = parent, time = 14
trigger2 = parent, time = 61
x = 0
y = 0

[State 3010, 2]
type = VelSet
trigger1 = parent, time = 41
x = (ParentDist X - 2) / 20
y = (ParentDist Y - 52) / 20

[State 3010, 3]
type = DestroySelf
trigger1 = (parent, stateno != 3000) || (parent, time = 67)
trigger1 = parent, stateno != 3200

;---------------------------------------------------------------------------
; Eddie Leave
[Statedef 3011]
type    = S
movetype= I
physics = N
velset = 4,-4
anim = 2002
sprpriority = 2

[State 3011, 1]
type = DestroySelf
trigger1 = FrontEdgeDist < -100
trigger2 = time = 30

;---------------------------------------------------------------------------
; Rush Drill - Begin
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
velset = 0,0
anim = 3100
sprpriority = 2


[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 10
var(5) = 1


[State 1000, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1


[State 3000, Helper]
type = Helper
trigger1 = animelem = 10
stateno = 8500
supermovetime = 99999999
pos = 0,ceil(-30*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 10
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 10
value = SCA

[State 3100, 4]
type = Helper
trigger1 = Time = 0
name = "Rush"
ID  = 3110
stateno = 3110
pos = -BackEdgeDist - 9, floor(-Pos Y)
supermovetime = 48

[State 3000, 10]
type = Helper
trigger1 = time = 71
name = "Timer"
StateNo = 3030
postype = left
pos = 0, 0
ownpal = 1   

[State 3100, 5]
type = PlaySnd
trigger1 = Time = 2
value = 3,10
volume = 255
volumescale = 255
channel = 0

[State 3100, 6]
type = PalFX
trigger1 = Time = 62
time = 3
add = 51, 51, 51

[State 3100, 7]
type = PalFX
trigger1 = Time = 65
time = 4
add = 102, 102, 102

[State 3100, 8]
type = PalFX
trigger1 = Time = 68
time = 3
add = 154, 154, 154

[State 3100, 9]
type = PalFX
trigger1 = Time = 71
time = 4
add = 205, 205, 205

[State 3100, 10]
type = PalFX
trigger1 = Time = 74
time = 5
add = 256, 256, 256

[State 3100, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 3101

;---------------------------------------------------------------------------
; Rush Drill (drilling)
[Statedef 3101]
type    = S                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 3101                       
poweradd = 0                   
sprpriority = 2 

[state 1041,2]
type = playsnd
trigger1 = time = 3 && prevstateno = 3100
value = 3,28
volume = 255
volumescale = 255
channel = 5

[state 1041,3]
type = varset
trigger1 = time = 0 && prevstateno = 3100
v = 12
value = 170

[state 1041,4]
type = varadd
trigger1 = 1
v = 12
value = -1

[state 1041,5]
type = posset
trigger1 = pos y > 0
y = 0

[state 1041,6]
type = palfx
trigger1 = var(12) > 165
trigger2 = var(12) < 5
add = 255,255,255
time = 1
persistent = 1

[state 1041,7]
type = turn
trigger1 = p2dist x <= -5

[State 1041,8]
type = Explod
triggerall = numexplod(1041) = 0 && facing = 1
trigger1 = 1
anim = 3105
id = 1041
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,9]
type = Explod
triggerall = numexplod(11041) = 0 && facing = -1
trigger1 = 1
anim = 3105
id = 11041
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,10]
type = Explod
triggerall = numexplod(1042) = 0 && facing = 1
trigger1 = 1
anim = 3106
id = 1042
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,11]
type = Explod
triggerall = numexplod(11042) = 0 && facing = -1
trigger1 = 1
anim = 3106
id = 11042
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,12]
type = Explod
triggerall = numexplod(1043) = 0 && facing = 1
trigger1 = 1
anim = 3111
id = 1043
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,13]
type = Explod
triggerall = numexplod(11043) = 0 && facing = -1
trigger1 = 1
anim = 3111
id = 11043
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[state 1041,14]
type = removeexplod
trigger1 = facing = -1
trigger2 = vel x <= 0
trigger3 = vel x >= 4
id = 1041

[state 1041,15]
type = removeexplod
trigger1 = facing = 1
trigger2 = vel x <= 0
trigger3 = vel x >= 4
id = 11041

[state 1041,16]
type = removeexplod
trigger1 = facing = -1
trigger2 = vel x >= 0
id = 1042

[state 1041,17]
type = removeexplod
trigger1 = facing = 1
trigger2 = vel x >= 0
id = 11042

[state 1041,18]
type = removeexplod
trigger1 = facing = -1
trigger2 = vel x < 4
id = 1043

[state 1041,19]
type = removeexplod
trigger1 = facing = 1
trigger2 = vel x < 4
id = 11043

[State 1041,20]
type = Explod
triggerall = numexplod(1046) = 0 && facing = 1
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
anim = 3107
id = 1046
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,21]
type = Explod
triggerall = numexplod(11046) = 0 && facing = -1
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
anim = 3107
id = 11046
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1041,22]
type = Width
trigger1 = 1
value = 11, 29

[state 1041,23]
type = velset
trigger1 = command != "holdfwd" && command != "holdback" && vel x < 3
x = 0

[state 1041,24]
type = velset
trigger1 = command = "holdfwd" && vel x < 3.25
x = 3.25

[state 1041,25]
type = velmul
triggerall = command = "holdback" && vel x < 0
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
x = -9

[state 1041,26]
type = velset
trigger1 = Command = "holdback" && vel x < 0.1;3.25
x = -2.5

[state 1041,27]
type = velset
trigger1 = vel x > 8
x = 8

[state 1041,28]
type = veladd
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
x = (21 - vel x)

[state 1041,29]
type = veladd
trigger1 = vel x > 0
x = -0.25

[state 1000,21]
type = playsnd
trigger1 = movehit = 1
value = s5+var(49),1
channel = 2

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = movehit = 1
anim = 8006
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1


[state 1041,31]
type = hitdef
trigger1 = var(12) > 14 && time % 7 = 0 && p2statetype != A
attr = A, NA
damage    = 13,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
air.hittime = 6
yaccel = 0.88
ground.velocity = -8
air.juggle = 0
air.velocity = -6,-5
air.fall = 1
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6

[state 1041,32]
type = hitdef
trigger1 = var(12) <= 14 && time % 7 = 0
attr = A, NA
animtype = up
damage    = 20,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 18
ground.hittime  = 60
ground.velocity = -3, -20
air.juggle = 0
air.velocity = -3,-20
air.fall = 1
fall = 1
yaccel = 0.76
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6
p2stateno = 3106

[state 1041,34]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1
 
[state 1041,35]
type = changestate
trigger1 = command = "holdup" && command != "holdfwd" && command != "holdback"
value = 3102

[state 1041,36]
type = changestate
trigger1 = command = "holdup" && command = "holdfwd" && command != "holdback"
value = 3103

[state 1041,47]
type = changestate
trigger1 = command = "holdup" && command != "holdfwd" && command = "holdback"
value = 3104

[State 1041,38]
type = ChangeState
trigger1 = var(12) <= -1 && pos y < 0
trigger2 = winko = 1 && p2life = 0 && pos y < 0
value = 3107
ctrl = 0

[State 1041,39]
type = ChangeState
trigger1 = var(12) <= -1 && pos y >= 0
trigger2 = winko = 1 && p2life = 0 && pos y >= 0
value = 3105
ctrl = 0
;---------------------------------------------------------------------------
; Rush Drill (jump up)
[Statedef 3102]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 3101                       
poweradd = 0                   
sprpriority = 2                 

[State 1042,1]
type = Explod
triggerall = numexplod(1047) = 0 && facing = 1
trigger1 = time = 1
anim = 3108
id = 1047
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[State 1042,2]
type = Explod
triggerall = numexplod(11047) = 0 && facing = -1
trigger1 = time = 1
anim = 3108
id = 11047
postype = p1
scale = .83,1.07  
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[state 1042,3]
type = removeexplod
trigger1 = 1
id = 1041

[state 1042,4]
type = removeexplod
trigger1 = 1
id = 11041

[state 1042,5]
type = removeexplod
trigger1 = 1
id = 1042

[state 1042,6]
type = removeexplod
trigger1 = 1
id = 11042

[state 1042,7]
type = removeexplod
trigger1 = 1
id = 1043

[state 1042,8]
type = removeexplod
trigger1 = 1
id = 11043

[state 1042,9]
type = varadd
trigger1 = 1
v = 12
value = -1

[state 1042,10]
type = turn
trigger1 = p2dist x <= -5

[State 1042,11]
type = Width
trigger1 = 1
value = 11, 29

[state 1042,12]
type = veladd
trigger1 = time = 0
y = -9.5

[state 1042,13]
type = veladd
trigger1 = time > 1
y = 0.65

[state 1000,21]
type = playsnd
trigger1 = movehit = 1
value = s5+var(49),1
channel = 2

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = movehit = 1
anim = 8006
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1


[state 1041,31]
type = hitdef
trigger1 = var(12) > 14 && time % 7 = 0 && p2statetype != A
attr = A, NA
damage    = 13,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
air.hittime = 6
yaccel = 0.88
ground.velocity = -8
air.juggle = 0
air.velocity = -6,-5
air.fall = 1
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6

[state 1041,32]
type = hitdef
trigger1 = var(12) <= 14 && time % 7 = 0
attr = A, NA
animtype = up
damage    = 20,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 18
ground.hittime  = 60
ground.velocity = -3, -20
air.juggle = 0
air.velocity = -3,-20
air.fall = 1
fall = 1
yaccel = 0.76
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6
p2stateno = 3106

[State 52, Helper]
type = Helper
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
stateno = 8200
pos = 0,-10


[state 1042,18]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[state 1042,19]
type = changestate
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
value = 3101

[State 1041,38]
type = ChangeState
trigger1 = var(12) <= -1 && pos y < 0
trigger2 = winko = 1 && p2life = 0 && pos y < 0
value = 3107
ctrl = 0

[State 1042,21]
type = ChangeState
trigger1 = var(12) <= -1 && pos y >= 0
trigger2 = winko = 1 && p2life = 0 && pos y >= 0
value = 3105
ctrl = 0

;---------------------------------------------------------------------------
; Rush Drill (jump fwd)
[Statedef 3103]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 3101                       
poweradd = 0                   
sprpriority = 2                 

[State 1043,1]
type = Explod
triggerall = numexplod(1048) = 0 && facing = 1
trigger1 = time = 1
anim = 3109
id = 1048
postype = p1
scale = .83,1.07 
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[State 1043,2]
type = Explod
triggerall = numexplod(11048) = 0 && facing = -1
trigger1 = time = 1
anim = 3109
id = 11048
postype = p1
scale = .83,1.07 
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[state 1043,3]
type = removeexplod
trigger1 = 1
id = 1046

[state 1043,4]
type = removeexplod
trigger1 = 1
id = 11046

[state 1043,5]
type = removeexplod
trigger1 = 1
id = 1041

[state 1043,6]
type = removeexplod
trigger1 = 1
id = 11041

[state 1043,7]
type = removeexplod
trigger1 = 1
id = 1042

[state 1043,8]
type = removeexplod
trigger1 = 1
id = 11042

[state 1043,9]
type = removeexplod
trigger1 = 1
id = 1043

[state 1043,10]
type = removeexplod
trigger1 = 1
id = 11043

[state 1043,11]
type = varadd
trigger1 = 1
v = 12
value = -1

[state 1043,12]
type = turn
trigger1 = p2dist x <= -5

[State 1043,13]
type = Width
trigger1 = 1
value = 11, 29

[state 1043,14]
type = veladd
trigger1 = time = 0
x = 3
y = -9.5

[state 1043,15]
type = veladd
trigger1 = time > 1
y = 0.65

[state 1000,21]
type = playsnd
trigger1 = movehit = 1
value = s5+var(49),1
channel = 2

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = movehit = 1
anim = 8006
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1


[state 1041,31]
type = hitdef
trigger1 = var(12) > 14 && time % 7 = 0 && p2statetype != A
attr = A, NA
damage    = 13,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
air.hittime = 6
yaccel = 0.88
ground.velocity = -8
air.juggle = 0
air.velocity = -6,-5
air.fall = 1
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6

[state 1041,32]
type = hitdef
trigger1 = var(12) <= 14 && time % 7 = 0
attr = A, NA
animtype = up
damage    = 20,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 18
ground.hittime  = 60
ground.velocity = -3, -20
air.juggle = 0
air.velocity = -3,-20
air.fall = 1
fall = 1
yaccel = 0.76
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6
p2stateno = 3106

[state 1043,20]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[State 52, Helper]
type = Helper
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
stateno = 8200
pos = 0,-10

[state 1043,21]
type = changestate
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
value = 3101

[State 1041,38]
type = ChangeState
trigger1 = var(12) <= -1 && pos y < 0
trigger2 = winko = 1 && p2life = 0 && pos y < 0
value = 3107
ctrl = 0

[State 1043,23]
type = ChangeState
trigger1 = var(12) <= -1 && pos y >= 0
trigger2 = winko = 1 && p2life = 0 && pos y >= 0
value = 3105
ctrl = 0
;---------------------------------------------------------------------------
; Rush Drill (jump back)
[Statedef 3104]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 3101                       
poweradd = 0                   
sprpriority = 2                 

[State 1044,1]
type = Explod
triggerall = numexplod(1049) = 0 && facing = 1
trigger1 = time = 1
anim = 3110
id = 1049
postype = p1
scale = .83,1.07 
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[State 1044,2]
type = Explod
triggerall = numexplod(11049) = 0 && facing = -1
trigger1 = time = 1
anim = 3110
id = 11049
postype = p1
scale = .83,1.07 
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[state 1044,3]
type = removeexplod
trigger1 = 1
id = 1046

[state 1044,4]
type = removeexplod
trigger1 = 1
id = 11046

[state 1044,5]
type = removeexplod
trigger1 = 1
id = 1041

[state 1044,6]
type = removeexplod
trigger1 = 1
id = 11041

[state 1044,7]
type = removeexplod
trigger1 = 1
id = 1042

[state 1044,8]
type = removeexplod
trigger1 = 1
id = 11042

[state 1044,9]
type = removeexplod
trigger1 = 1
id = 1043

[state 1044,10]
type = removeexplod
trigger1 = 1
id = 11043

[state 1044,11]
type = varadd
trigger1 = 1
v = 12
value = -1

[state 1044,12]
type = turn
trigger1 = p2dist x <= -5

[State 1044,13]
type = Width
trigger1 = 1
value = 11, 29

[state 1044,14]
type = veladd
trigger1 = time = 0
x = -2.5
y = -9.5

[state 1044,15]
type = veladd
trigger1 = time > 1
y = 0.65

[state 1000,21]
type = playsnd
trigger1 = movehit = 1
value = s5+var(49),1
channel = 2

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = movehit = 1
anim = 8006
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1


[state 1041,31]
type = hitdef
trigger1 = var(12) > 14 && time % 7 = 0 && p2statetype != A
attr = A, NA
damage    = 13,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
air.hittime = 6
yaccel = 0.88
ground.velocity = -8
air.juggle = 0
air.velocity = -6,-5
air.fall = 1
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6

[state 1041,32]
type = hitdef
trigger1 = var(12) <= 14 && time % 7 = 0
attr = A, NA
animtype = up
damage    = 20,1
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = -1
guardsound = S6+var(49),0
ground.type = low
ground.slidetime = 18
ground.hittime  = 60
ground.velocity = -3, -20
air.juggle = 0
air.velocity = -3,-20
air.fall = 1
fall = 1
yaccel = 0.76
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
air.cornerpush.veloff = -6
airguard.cornerpush.veloff = -6
p2stateno = 3106

[state 1044,20]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT
time = 2
ignorehitpause = 1

[State 52, Helper]
type = Helper
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
stateno = 8200
pos = 0,-10

[state 1044,21]
type = changestate
trigger1 = Pos Y >= 0 && vel y > 0 && time > 1
value = 3101

[State 1041,38]
type = ChangeState
trigger1 = var(12) <= -1 && pos y < 0
trigger2 = winko = 1 && p2life = 0 && pos y < 0
value = 3107
ctrl = 0

[State 1044,23]
type = ChangeState
trigger1 = var(12) <= -1 && pos y >= 0
trigger2 = winko = 1 && p2life = 0 && pos y >= 0
value = 3105
ctrl = 0
;---------------------------------------------------------------------------
; Rush Drill (revert)
[Statedef 3105]
type    = S                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 3102                       
poweradd = 0                   
sprpriority = 2 

[State 3102, 1]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 3102, 2]
type = Helper
trigger1 = Time = 0
name = "Rush"
ID  = 3112
stateno = 3112
pos = -23, 0                

[state 1045,1]
type = palfx
trigger1 = time = [0,30]
add = 250,250,250
time = 1

[state 1045,2]
type = palfx
trigger1 = time = [31,33]
add = 200,200,200
time = 1

[state 1045,3]
type = palfx
trigger1 = time = [34,36]
add = 150,150,150
time = 1

[state 1045,4]
type = palfx
trigger1 = time = [37,39]
add = 100,100,100
time = 1

[state 1045,5]
type = palfx
trigger1 = time = [40,42]
add = 50,50,50
time = 1

[state 1045,6]
type = removeexplod
trigger1 = 1
id = 1046

[state 1045,7]
type = removeexplod
trigger1 = 1
id = 1047

[state 1045,8]
type = removeexplod
trigger1 = 1
id = 1048

[state 1045,9]
type = removeexplod
trigger1 = 1
id = 1049

[state 1045,10]
type = removeexplod
trigger1 = 1
id = 11046

[state 1045,11]
type = removeexplod
trigger1 = 1
id = 11047

[state 1045,12]
type = removeexplod
trigger1 = 1
id = 11048

[state 1045,13]
type = removeexplod
trigger1 = 1
id = 11049

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 1
var(5) = 0

[State 1045,14]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Rush Drill Hitby cont
[Statedef 3106]
type    = A                     
movetype= H                    
physics = N                     
juggle  = 0                     
velset = -7,-20                    
ctrl = 0                      
sprpriority = 2                 

[state 12,12]
type = veladd
trigger1 = 1
y = 0.66

[state 251,2]
type = changeanim2
trigger1 = time = 0
trigger1 = !SelfAnimExist(5250)
value = 3340 

[state 251,2]
type = changeanim2
trigger1 = time = 0
trigger1 = SelfAnimExist(5250)
value = 5250 

[State 3430, 8]
type = ChangeAnim2
trigger1 = Vel Y > 0
trigger1 = !SelfAnimExist(5251)
value = 3350
persistent = 0

[State 3430, 8]
type = ChangeAnim2
trigger1 = Vel Y > 0
trigger1 = SelfAnimExist(5251)
value = 5251
persistent = 0

[State 531,12]
type = Selfstate
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5110

;---------------------------------------------------------------------------
; Rush Drill (air end)
[Statedef 3107]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                                       
ctrl = 0                      
anim = 88                       
poweradd = 0                   
sprpriority = -1  

[State 3102, 2]
type = Helper
trigger1 = animelem = 2
name = "Rush"
ID  = 3112
stateno = 3114
pos = -23, 0                  

[state 1032,1]
type = removeexplod
trigger1 = 1
id = 1033

[state 1032,2]
type = removeexplod
trigger1 = 1
id = 1034

[state 1032,3]
type = removeexplod
trigger1 = 1
id = 1032

[state 1032,4]
type = removeexplod
trigger1 = 1
id = 1037

[state 1032,5]
type = removeexplod
trigger1 = 1
id = 1038

[state 1032,6]
type = removeexplod
trigger1 = 1
id = 11038

[state 1032,7]
type = removeexplod
trigger1 = 1
id = 11037

[state 1032,8]
type = removeexplod
trigger1 = 1
id = 11033

[state 1032,9]
type = removeexplod
trigger1 = 1
id = 11034

[state 1032,10]
type = removeexplod
trigger1 = 1
id = 11032

[state 1032,11]
type = removeexplod
trigger1 = 1
id = 1046

[state 1032,12]
type = removeexplod
trigger1 = 1
id = 1047

[state 1032,13]
type = removeexplod
trigger1 = 1
id = 1048

[state 1032,14]
type = removeexplod
trigger1 = 1
id = 1049

[state 1032,15]
type = removeexplod
trigger1 = 1
id = 11046

[state 1032,16]
type = removeexplod
trigger1 = 1
id = 11047

[state 1032,17]
type = removeexplod
trigger1 = 1
id = 11048

[state 1032,18]
type = removeexplod
trigger1 = 1
id = 11049

[state 1032,19]
type = veladd
trigger1 = animelem = 2
y = 0.66

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -1
y = 6

[state 1032,20]
type = palfx
trigger1 = time = [0,4]
add = 250,250,250
time = 1

[state 1032,21]
type = palfx
trigger1 = time = [5,9]
add = 200,200,200
time = 1

[state 1032,22]
type = palfx
trigger1 = time = [10,14]
add = 150,150,150
time = 1

[state 1032,23]
type = palfx
trigger1 = time = [15,19]
add = 100,100,100
time = 1

[state 1032,24]
type = palfx
trigger1 = time = [20,24]
add = 50,50,50
time = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 1
var(5) = 0

[State 1032,26]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Timer Rush Drill
[Statedef 3030]
type = A
movetype = I
physics = N
anim = 9999

[State 3030, 1]
type = VarSet
trigger1 = time = 0
v = 55
value = parent, var(56)

[State 3030, 2]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 0
ID = 7878
anim = 15900
postype = left
pos = 19, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 3]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 0
ID = 7879
anim = 15902
postype = left
pos = 142, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 4]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 0
ID = 7878
anim = 15901
postype = right
pos = -39, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 5]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 0
ID = 7979
anim = 15902
postype = right
pos = -143, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 6]
type = VarAdd
trigger1 = time > 0
fv = 0
value = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 0
fv = 1
value = fvar(0) / 325

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 0
ID = 7979
scale = fvar(1),0.5

[State 3030, 7]
type = VarSet
trigger1 = time > 0
fv = 1
value = fvar(0) / -325

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 0
ID = 7879
scale = fvar(1),0.5

[State 3030, 9]
type = ParentVarSet
trigger1 = fvar(0) > 165
v = 20
value = 1

[State 3030, 10]
type = RemoveExplod
trigger1 = fvar(0) > 165
trigger2 = parent, Win
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 3105
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 3106
trigger6 = Parent, MoveType != H
trigger7 = Parent, StateNo = 3202
trigger7 = Parent, MoveType != H
trigger8 = Parent, MoveType = H

[STate 3030, 11]
type = DestroySelf
trigger1 = fvar(0) > 165
trigger2 = 0
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 3105
trigger5 = Parent, MoveType != H
trigger6 = Parent, StateNo = 3106
trigger6 = Parent, MoveType != H
trigger7 = Parent, StateNo = 3202
trigger7 = Parent, MoveType != H
trigger8 = Parent, MoveType = H

;---------------------------------------------------------------------------
; Rush
[Statedef 3110]
type    = A
movetype= I
physics = N
velset = 4,-3.5
anim = 2101
sprpriority = 1

[State 3110, 1]
type = VelAdd
trigger1 = Pos Y < 0
y = .5

[State 3110, 2]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Time != 0
value = 3111

[State 3110, 3]
type = DestroySelf
trigger1 = (parent, stateno != 3000) || (parent, time = 67)
trigger1 = parent, stateno != 3100

;---------------------------------------------------------------------------
; Rush
[Statedef 3111]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 2102
sprpriority = 1

[State 3111, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3111, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 2102
value = 2103

[State 3111, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 2103
value = 2104

[State 3111, 4]
type = VelSet
trigger1 = parent, time = 61
x = 0
y = 0

[State 3111, 5]
type = VelSet
trigger1 = parent, time = 41
x = (ParentDist X - 23) / 20
y = (ParentDist Y) / 20

[State 3111, 6]
type = DestroySelf
trigger1 = (parent, stateno != 3000) || (parent, time = 67)
trigger1 = parent, stateno != 3100

;---------------------------------------------------------------------------
; Rush
[Statedef 3112]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 2104
sprpriority = 1

[State 3112, 1]
type = VelSet
trigger1 = Time = 1
x = -5

[State 3112, 2]
type = VelAdd
trigger1 = Vel X < 0
x = .3

[State 3112, 2]
type = VelSet
trigger1 = Vel X > 0
x = 0

[State 3112, 3]
type = ChangeAnim
trigger1 = Time = 32
value = 2105

[State 3112, 4]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 2105
value = 2106

[State 3112, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Anim = 2106
value = 3113

;---------------------------------------------------------------------------
; Rush Run Off
[Statedef 3113]
type    = S
movetype= I
physics = N
anim = 2100
velset = -4,0
sprpriority = 1

[State 3113, 2]
type = PosAdd
trigger1 = Time = 0
x = 17

[State 3113, 11]
type = DestroySelf
trigger1 = BackEdgeDist < -100

;---------------------------------------------------------------------------
; Rush Move to Floor
[Statedef 3114]
type    = A
movetype= I
physics = N
velset = -4,3.5
anim = 2104
sprpriority = 1

[State 3114, 1]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 3114, 2]
type = VelSet
trigger1 = Pos Y >= 0
x = 0
y = 0

[State 3114, 3]
type = ChangeAnim
trigger1 = Pos Y >= 0
trigger1 = Anim = 2104
value = 2106

[State 3114, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = Anim = 2106
value = 3113

;---------------------------------------------------------------------------
; Beat Plane - Begin
[Statedef 3200]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
velset = 0,0
anim = 3200
sprpriority = 2


[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 10
var(5) = 1


[State 1000, Explod]
type = Explod
triggerall = pos y >= -1
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
scale = 0.5,0.5
sprpriority = 4
ownpal = 1

[State 3000, Helper]
type = Helper
trigger1 = animelem = 10
stateno = 8500
supermovetime = 99999999
pos = 0,ceil(-30*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 10
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 10
value = SCA

[State 3000, 10]
type = Helper
trigger1 = time = 61
name = "Timer"
StateNo = 3030
postype = left
pos = 0, 0
ownpal = 1   

[State 3100, 5]
type = PlaySnd
trigger1 = Time = 2
value = 3,9
volume = 255
volumescale = 255
channel = 0

[State 3100, 6]
type = PalFX
trigger1 = Time = 62
time = 3
add = 51, 51, 51

[State 3100, 7]
type = PalFX
trigger1 = Time = 65
time = 4
add = 102, 102, 102

[State 3100, 8]
type = PalFX
trigger1 = Time = 68
time = 3
add = 154, 154, 154

[State 3100, 9]
type = PalFX
trigger1 = Time = 71
time = 4
add = 205, 205, 205

[State 3100, 10]
type = PalFX
trigger1 = Time = 74
time = 5
add = 256, 256, 256

[State 3200, 5]
type = Helper
trigger1 = Time = 0
name = "Beat"
ID  = 3210
stateno = 3210
pos = -BackEdgeDist - 9, -120
supermovetime = 48

[State 3200, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 3201

;---------------------------------------------------------------------------
; Beat Plane (flight)
[Statedef 3201]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                     
velset = 0,0                    
ctrl = 0                      
anim = 3201                       
poweradd = 0                   
sprpriority = 2                 

[state 1031,2]
type = palfx
trigger1 = time = [0,4]
trigger2 = time = [166, 170]
add = 255,255,255
time = 1
persistent = 1

[state 1031,3]
type = velset
trigger1 = command != "holdback" && command != "holdfwd"
x = 0

[state 1031,4]
type = velset
trigger1 = command != "holdup" && command != "holddown"
trigger2 = pos Y >= 0 && vel y > 0
trigger3 = screenpos y != [80,215]
y = 0

[state 1031,5]
type = velset
trigger1 = command = "holdfwd"
x = 6

[state 1031,6]
type = velset
trigger1 = command = "holdback"
x = -6

[state 1031,7]
type = velset
trigger1 = command = "holdup" && screenpos y = [80,215]
y = -6

[state 1031,8]
type = velset
trigger1 = command = "holddown" && Pos Y < 0
y = 6

[state 1031,9]
type = turn
trigger1 = p2dist x <= -5

[State 1031,10]
type = Explod
trigger1 = numexplod(1032) = 0 && facing = 1
anim = 3206
id = 1032
postype = p1
scale = .83,1.07
pos = -30,-53
ownpal = 0
bindtime = -1
sprpriority = 2
removeongethit = 1

[State 1031,11]
type = Explod
trigger1 = numexplod(11032) = 0 && facing = -1
anim = 3206
id = 11032
postype = p1
scale = .83,1.07
pos = -30,-53
ownpal = 0
bindtime = -1
sprpriority = 2
removeongethit = 1

[state 1031,12]
type = removeexplod
trigger1 = facing = -1
id = 1032

[state 1031,13]
type = removeexplod
trigger1 = facing = 1
id = 11032

[State 1031,14]
type = Explod
trigger1 = numexplod(1037) = 0 && facing = 1
anim = 3212
id = 1037
postype = p1
scale = .83,1.07
pos = 0,0
ownpal = 0
bindtime = -1
sprpriority = 1
removeongethit = 1

[State 1031,15]
type = Explod
trigger1 = numexplod(11037) = 0 && facing = -1
anim = 3212
id = 11037
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 1
removeongethit = 1

[state 1031,16]
type = removeexplod
trigger1 = facing = -1
id = 1037

[state 1031,17]
type = removeexplod
trigger1 = facing = 1
id = 11037

[State 1031,18]
type = Explod
trigger1 = numexplod(1034) = 0 && facing = 1
anim = 3204
id = 1034
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 3
removeongethit = 1

[State 1031,19]
type = Explod
trigger1 = numexplod(11034) = 0 && facing = -1
anim = 3204
id = 11034
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 3
removeongethit = 1

[state 1031,20]
type = removeexplod
trigger1 = facing = -1
id = 1034

[state 1031,21]
type = removeexplod
trigger1 = facing = 1
id = 11034

[State 1031,22]
type = Explod
trigger1 = numexplod(1033) = 0 && facing = 1
anim = 3205
id = 1033
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 5
removeongethit = 1

[State 1031,23]
type = Explod
trigger1 = numexplod(11033) = 0 && facing = -1
anim = 3205
id = 11033
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 5
removeongethit = 1

[state 1031,24]
type = removeexplod
trigger1 = facing = -1
id = 1033

[state 1031,25]
type = removeexplod
trigger1 = facing = 1
id = 11033

[State 1031,26]
type = Explod
triggerall = Time > 6
triggerall = numexplod(1038) = 0 && facing = 1
trigger1 = command = "a" || command = "b" || command = "c" && time % 1 = 0
anim = 3210
id = 1038
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 4
removetime = -2
removeongethit = 1

[State 1031,27]
type = Explod
triggerall = Time > 6
triggerall = numexplod(11038) = 0 && facing = -1
trigger1 = command = "a" || command = "b" || command = "c" && time % 1 = 0
anim = 3210
id = 11038
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 4
removetime = -2
removeongethit = 1

[state 1031,28]
type = removeexplod
trigger1 = facing = -1
id = 1038

[state 1031,29]
type = removeexplod
trigger1 = facing = 1
id = 11038


[state 1031,31]
type = playsnd
triggerall = Time > 6
triggerall = numexplod(4038) = 0
trigger1 = command = "x" || command = "y" || command = "z" && time % 1 = 0
value = 3,29
volume = 230
volumescale = 230
channel = 3

[State 1031,32]
type = Explod
triggerall = Time > 6
triggerall = numexplod(4038) = 0
trigger1 = command = "x" || command = "y" || command = "z" && time % 1 = 0
anim = 3207
id = 4038
postype = p1
pos = 0,0
ownpal = 0
scale = .83,1.07
bindtime = -1
sprpriority = 4
removetime = -2
removeongethit = 1

[State 1031,33]
type = Projectile
triggerall = Time > 6
trigger1 = numexplod(4038) = 1 && time % 8 = 0
projanim = 3208
projhitanim = 3209
projscale = .83,1.07
projid = 3209
offset = 55, -29
velocity = 7
projsprpriority = 2
numhits = 1
attr = S, SA
damage   = 7,1
guardflag = MA
hitflag = MAFD
animtype = Medium
pausetime = 0,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-25
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
yaccel = 1.06
ground.slidetime = 14
ground.hittime  = 15
down.velocity = -9,-7
guard.velocity = -8
ground.velocity = -8
air.animtype = back
air.velocity = -3,-1
airguard.velocity = -10.5,3
air.fall = 0
id = 2+4

[State 181, 3]
type = Explod
trigger1 = projhit3209 = 1
postype = P2
pos = 0, -35
sprpriority = 2
scale = 0.5,0.5
anim = 8006
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1
ignorehitpause = 1

[state 1000,21]
type = playsnd
trigger1 = projhit3209 = 1
value = s5+var(49),1
channel = 2
ignorehitpause = 1

[State 1031,34]
type = Width
trigger1 = Time = [0, 180]
value = 40, 40

[State 1031,35]
type = Projectile
triggerall = Time > 6
trigger1 = (numexplod(1038) = 1 || numexplod(11038) = 1) && time % 8 = 0
projanim = 3211
projhitanim = 8084
projid = 3210
projscale = .83,1.07
projshadow = 68,68,68
offset = 0, -18
velocity = 4, 0
accel = 0,0.6
projsprpriority = 5
numhits = 1
attr = S, SA
damage   = 10,1
guardflag = MA
hitflag = MAFD
animtype = Medium
pausetime = 0,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-25
hitsound = -1
guardsound = S6+var(49),0
ground.type = Low
yaccel = 1.06
ground.type = Low
ground.slidetime = 14
ground.hittime  = 15
guard.velocity = -8
down.velocity = -9,-7
ground.velocity = -8
air.animtype = back
air.velocity = -3,-1
airguard.velocity = -10.5,3
air.fall = 0
id = 2+4

[State 181, 3]
type = Explod
trigger1 = projhit3210 = 1
postype = P2
pos = 0, -70
sprpriority = 2
scale = 0.5,0.5
anim = 8006
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[state 1000,21]
type = playsnd
trigger1 = projhit3210 = 1
value = s5,10
volume = 255
volumescale = 255
channel = 1

[state 1000,21]
type = playsnd
trigger1 = projhit3210 = 1
value = s5+var(49),1
channel = 2

[State 1031,37]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = winko = 1 && p2life = 0
value = 3202
ctrl = 0

;---------------------------------------------------------------------------
; Beat Plane (end)
[Statedef 3202]
type    = A                     
movetype= A                    
physics = N                     
juggle  = 0                                       
ctrl = 0                      
anim = 89                       
poweradd = 0                   
sprpriority = -1  

[State 3202, 2]
type = Helper
trigger1 = animelem = 2
name = "Beat"
ID  = 3211
stateno = 3211
pos = -9, -47                

[state 1032,1]
type = removeexplod
trigger1 = 1
id = 1033

[state 1032,2]
type = removeexplod
trigger1 = 1
id = 1034

[state 1032,3]
type = removeexplod
trigger1 = 1
id = 1032

[state 1032,4]
type = removeexplod
trigger1 = 1
id = 1037

[state 1032,5]
type = removeexplod
trigger1 = 1
id = 1038

[state 1032,6]
type = removeexplod
trigger1 = 1
id = 11038

[state 1032,7]
type = removeexplod
trigger1 = 1
id = 11037

[state 1032,8]
type = removeexplod
trigger1 = 1
id = 11033

[state 1032,9]
type = removeexplod
trigger1 = 1
id = 11034

[state 1032,10]
type = removeexplod
trigger1 = 1
id = 11032

[state 1032,11]
type = removeexplod
trigger1 = 1
id = 1046

[state 1032,12]
type = removeexplod
trigger1 = 1
id = 1047

[state 1032,13]
type = removeexplod
trigger1 = 1
id = 1048

[state 1032,14]
type = removeexplod
trigger1 = 1
id = 1049

[state 1032,15]
type = removeexplod
trigger1 = 1
id = 11046

[state 1032,16]
type = removeexplod
trigger1 = 1
id = 11047

[state 1032,17]
type = removeexplod
trigger1 = 1
id = 11048

[state 1032,18]
type = removeexplod
trigger1 = 1
id = 11049

[state 1032,19]
type = veladd
trigger1 = time>30
y = 0.76

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -2
y = -7

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = -2
y = 2

[state 1032,20]
type = palfx
trigger1 = time = [0,4]
add = 250,250,250
time = 1

[state 1032,21]
type = palfx
trigger1 = time = [5,9]
add = 200,200,200
time = 1

[state 1032,22]
type = palfx
trigger1 = time = [10,14]
add = 150,150,150
time = 1

[state 1032,23]
type = palfx
trigger1 = time = [15,19]
add = 100,100,100
time = 1

[state 1032,24]
type = palfx
trigger1 = time = [20,24]
add = 50,50,50
time = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 1
var(5) = 0

[State 1032,26]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Beat
[Statedef 3210]
type    = S
movetype= I
physics = N
ctrl = 0
velset = 4,0
anim = 2200
sprpriority = 2

[State 3210, 1]
type = VelSet
trigger1 = parent, time = 14
trigger2 = parent, time = 61
x = 0
y = 0

[State 3210, 2]
type = VelSet
trigger1 = parent, time = 41
x = (ParentDist X - 9) / 20
y = (ParentDist Y - 49) / 20

[State 3210, 3]
type = DestroySelf
trigger1 = (parent, stateno != 3000) || (parent, time = 67)
trigger1 = parent, stateno != 3200

;---------------------------------------------------------------------------
; Beat
[Statedef 3211]
type    = S
movetype= I
physics = N
ctrl = 0
velset = 4,-4
anim = 2200
sprpriority = 2

[State 3211, 1]
type = DestroySelf
trigger1 = FrontEdgeDist < -100
trigger2 = time = 30

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;Falling 
[Statedef 44] 
type = A
movetype= I
physics = A
ctrl = 0
anim = 112

[State 44, 1]
type = ChangeState
trigger1 = var(2) = 1
value = 111

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = A
physics = N
ctrl = 0
anim = 100
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.fwd.x)
y = const(velocity.run.fwd.y)

[State 100, 2]
type = VelAdd
trigger1 = 1
x = -.13
y = .13

[State 0, CtrlSet]
type = CtrlSet
trigger1 = command = "holdup"
value = 1

[State 101, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,1

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 9] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 101, Explod]
type = Explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
scale = 0.5,0.5
random = 30,abs(const(size.head.pos.y))
pos = -10,ceil(const(size.mid.pos.y))

[State 105, 2]
type = PosSet
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0

[State 105, 2]
type = PosSet
triggerall = var(59) = 0
trigger1 = command = "holddown"
y = 0

[State 105, 2]
type = VelSet
triggerall = var(59) = 0
trigger1 = command = "holddown"
y = 0
x = 1.5

[State 0, ChangeState]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "holddown"
value = 10
ctrl = 1

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = var(59) = 0
trigger1 = command="holdup"||command="holdfwd"||command="holdback"||command="holddown"||command="x"||command="y"||command="z"||command="a"||command="b"||command="c"||command="start"
statetype = S    

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0
x = 1.5

[State 105, 3]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "x"
value = 200

[State 105, 3a]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "y"
value = 210

[STate 105, 3b]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "z"
value = 220

[State 105, 3c]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "a"
value = 230

[State 105, 3d]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "b"
value = 240

[State 105, 3e]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "c"
value = 250

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 100, 15]
type = ChangeState
trigger1 = Time > 0
trigger1 = Pos Y >= 0
value = 101

;---------------------------------------------------------------------------
; RUN_FWD2 (land)
[Statedef 101]
type    = S
physics = S
ctrl = 0
anim = 47

[State 101, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 100, 2]
type = VelAdd
trigger1 = 1
x = .53
y = 0

[State 101, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 101, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 101, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = A
physics = N
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = VelAdd
trigger1 = 1
x = .13
y = .13

[State 0, CtrlSet]
type = CtrlSet
trigger1 = command = "holdup"
value = 1

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = 3,13
volume = 255
volumescale = 255
channel = 0

[State 105, 2]
type = PosSet
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0

[State 105, 2]
type = PosSet
triggerall = var(59) = 0
trigger1 = command = "holddown"
y = 0

[State 105, 2]
type = VelSet
triggerall = var(59) = 0
trigger1 = command = "holddown"
y = 0
x = -1.5

[State 0, ChangeState]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "holddown"
value = 10
ctrl = 1

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = var(59) = 0
trigger1 = command="holdup"||command="holdfwd"||command="holdback"||command="holddown"||command="x"||command="y"||command="z"||command="a"||command="b"||command="c"||command="start"
statetype = S    

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0
x = -1.5

[State 105, 3]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "x"
value = 200

[State 105, 3a]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "y"
value = 210

[STate 105, 3b]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "z"
value = 220

[State 105, 3c]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "a"
value = 230

[State 105, 3d]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "b"
value = 240

[State 105, 3e]
type = ChangeState
triggerall = var(59) = 0
triggerall = time > 2
trigger1 = command = "c"
value = 250

[State 105, 14]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 47

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Super Jump Start
[Statedef 900]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
facep2 = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 901
ctrl = 1

;Super Jump
[Statedef 901]
type    = A
physics = A
ctrl = 1
velset = 0, -14.3

[State 700, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(32) = 1

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(33) = 1

[State 1000, FireB]
type = Explod
trigger1 = time = 0
anim = 8250
id = 8250
pos = -120, 9
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[State 8411, puntets]
type = explod
trigger1 = time = 0
anim = 8007
postype = p1
pos = -20,-110
sprpriority = 4
facing = 1
persistent = 0
supermove = 1
ownpal = 1
scale = 0.57,0.57
vfacing = 1

[State 8411, puntets]
type = explod
trigger1 = time = 0
anim = 8008
postype = p1
pos = -20,-110
sprpriority = 4
facing = 1
persistent = 0
supermove = 1
ownpal = 1
scale = 0.57,0.57
vfacing = 1

[State 52,  Airjump Var]
type = VarSet
trigger1 = time = 0
v = 29
value = 1

[state 40, 11]
type = varset
trigger1 = time = 0
var(29) = 1

[State 220, PlaySnd]
type = PlaySnd
trigger1 = animelem = 17
value = 3,4
volume = 255
volumescale = 255
channel = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 1
y= -0.27

[State 91, VelAdd]
type = VelAdd
trigger1 = var(29)
trigger1 = time > 44
y= -0.02


[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 190

[state veladd]
type = veladd
trigger1 = vel X< 4
trigger1 = command = "holdfwd" && command != "holdback"
x = 0.25

[state veladd]
type = veladd
trigger1 = vel X> -4
trigger1 = command != "holdfwd" && command = "holdback"
x = -0.07

[State 999, 2a]
type = VelSet
trigger1 = Anim = 111
trigger1 = Time = [0,2]
x = 1.6

[State 999, 2b]
type = VelSet
trigger1 = Anim = 112
trigger1 = Time = [0,2]
x = -1.6

[State 1310, 6]
type = Turn
;trigger1 = Time = 10
trigger1 = p2dist X < -5

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 111

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 112

[State 9002, SelfState]
type = SelfState
trigger1 = time>10 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
;Falling

[Statedef 1211]
type    = A
movetype= I
physics = A
anim = 48
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= -0.21

[State 1211, Ctrl]
type = CtrlSet
trigger1 = prevstateno = 4100
value = 1

[State 112, 3]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .2

[State 112, 4]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.2

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 49

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 50

[State 1211, ChangeState]
type = ChangeState
trigger1 = time>10 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
;Falling

[Statedef 1221]
type    = A
movetype= I
physics = A
anim = 48
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= -0.21

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 49

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 50

[State 1211, ChangeState]
type = ChangeState
trigger1 = time>10 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(1*pi/4)),-9+floor(10*sin(1*pi/4))
vel = 2*cos(1*pi/4),2*sin(1*pi/4)
removetime = -1
sprpriority = 7

[State 5150, 7] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(2*pi/4)),-9+floor(10*sin(2*pi/4))
vel = 2*cos(2*pi/4),2*sin(2*pi/4)
removetime = -1
sprpriority = 7

[State 5150, 8] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(3*pi/4)),-9+floor(10*sin(3*pi/4))
vel = 2*cos(3*pi/4),2*sin(3*pi/4)
removetime = -1
sprpriority = 7

[State 5150, 9] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(4*pi/4)),-9+floor(10*sin(4*pi/4))
vel = 2*cos(4*pi/4),2*sin(4*pi/4)
removetime = -1
sprpriority = 7

[State 5150, 10] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(5*pi/4)),-9+floor(10*sin(5*pi/4))
vel = 2*cos(5*pi/4),2*sin(5*pi/4)
removetime = -1
sprpriority = 7

[State 5150, 11] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(6*pi/4)),-9+floor(10*sin(6*pi/4))
vel = 2*cos(6*pi/4),2*sin(6*pi/4)
removetime = -1
sprpriority = 7

[State 5150, 12] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(7*pi/4)),-9+floor(10*sin(7*pi/4))
vel = 2*cos(7*pi/4),2*sin(7*pi/4)
removetime = -1
sprpriority = 7

[State 5150, 13] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(8*pi/4)),-9+floor(10*sin(8*pi/4))
vel = 2*cos(8*pi/4),2*sin(8*pi/4)
removetime = -1
sprpriority = 7

[State 5150, 14] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(1*pi/8)),-9+floor(10*sin(1*pi/8))
vel = 1*cos(1*pi/8),1*sin(1*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 15] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(3*pi/8)),-9+floor(10*sin(3*pi/8))
vel = 1*cos(3*pi/8),1*sin(3*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 16] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(5*pi/8)),-9+floor(10*sin(5*pi/8))
vel = 1*cos(5*pi/8),1*sin(5*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 17] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(7*pi/8)),-9+floor(10*sin(7*pi/8))
vel = 1*cos(7*pi/8),1*sin(7*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 18] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(9*pi/8)),-9+floor(10*sin(9*pi/8))
vel = 1*cos(9*pi/8),1*sin(9*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 19] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(11*pi/8)),-9+floor(10*sin(11*pi/8))
vel = 1*cos(11*pi/8),1*sin(11*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 20] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(13*pi/8)),-9+floor(10*sin(13*pi/8))
vel = 1*cos(13*pi/8),1*sin(13*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 21] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(15*pi/8)),-9+floor(10*sin(15*pi/8))
vel = 1*cos(15*pi/8),1*sin(15*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 22] ;Dead Explod
type = Explod
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
anim = 4028
pos = -4+floor(10*cos(9*pi/8)),-9+floor(10*sin(9*pi/8))
vel = 1*cos(9*pi/8),1*sin(9*pi/8)
removetime = -1
sprpriority = 7

[State 5150, 23] ;Die Explode
type = PlaySnd
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
value = 11,1

[State 5150, 24] ;Change to dead explode
type = ChangeAnim
trigger1 = Anim != 5151
trigger1 = RoundState = 4
trigger1 = LoseKO
value = 5151

[State 5150, 25] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 26] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 27]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

; HIT_FALLRECOVER (on the ground) 
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,8,-4)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

; Like in vs Series, you always start with 1 power stock...
[State 190, PowerAdd]
type = PowerSet
triggerall = Roundno = 1
trigger1 = time = 0
value = 1000

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0
last = const(data.IntPersistIndex) - 1

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

; AhoVOK[h(wp[) 
[Statedef 8060]
type = A
physics = N
anim = 8061
velset = -14,0
ctrl = 0

[State 8060, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,18

[State 8060, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 8060, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 8060, DestroySelf]
type = DestroySelf
trigger1 = time = 16;24

; nGtFNg 
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0


; X[p[R{o(wp[) 
	 
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 200
volumescale = 200
value = 1,0

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = f9951
sprpriority = -2
postype = left
under = 1
supermove = 1
bindtime = -1
removetime = 37
scale = 1,1
ownpal = 1


[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(5) = 1 && !numexplod(8505)
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
trigger1 = root,var(5) = 0 || root,var(5) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
trigger1 = root,var(5) = 0
trigger2 = root,movetype = H
 
[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,4

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 2,12

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay
flag3 = nomusic

; [State 8510, AssertSpecial]
; type = AssertSpecial
; trigger1 = (StageVar(Info.Name) != "Absolute Cloud-Night")
; flag = nomusic

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
scale = .5,.5
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)


; ^[QbgJo[ 
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)
 
; ^[Qbg_EA 
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)
 
; ^[QbgoEh 
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5210

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA


[State 9910, PosSet]
type = PosSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -5

[State 1300, 6]
type = PalFX
triggerall = name = "Dhalsim"
trigger1 = animelem = 1
time = 18
sinadd =  255,255,255,43
ignorehitpause = 0

[State 5100, 10]
type = PlaySnd
triggerall = name = "Dhalsim"
trigger1 = Time = 1
value = S3,0

[State 9910, VelSet]
type = VelSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -4
x = 0

[State 9910, VelAdd]
type = VelAdd
triggerall = name = "Dhalsim"
trigger1 = time = 1
y = 0



[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .99;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

[Statedef -2]

; WvA 
[State -2, WvA]
type = VarSet
trigger1 = var(33)
trigger1 = command != "holdup"
var(33) = 0

; ===================== (Recovery p2 effect and sound) =======================

[State 0, PlaySnd]
type = PlaySnd
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
triggerall = name = "Blackheart"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,10
channel = 4
volume = 155
volumescale = 155

[State 0, PlaySnd]
type = PlaySnd
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,7
channel = 4
volume = 155
volumescale = 155

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 20, 2]
type = envshake
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
triggerall = name = "Blackheart"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
time = 8
freq = 80
ampl = 3

; ===================== (Prewalking) =======================

[State -2, Remember the last Position (X)]
type = VarSet
triggerall = RoundState < 2
trigger1 = stateno = [0, 21] ;Enable after Intro
fvar(3) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(3) != 0
trigger1 = prevstateno != [191, 199]
x = fvar(3)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(3) = 0

[State -2, Pre-walking state]
type = ChangeState
;triggerall = !var(59)
trigger1 = prevstateno = [191, 199]
trigger2 = RoundNo != 1              ;Enable If Round Number is > 1
trigger2 = RoundState = 1           ;RoundState < 2 and
trigger2 = stateno = 0              ;Current state is 0
value = 21
ctrl = 0

; ????O?\??(????) 
	
; ?v???C???[?\?? 
[State -2, ????O?\??]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, ????O?\??]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; ?????\??(?]) 
[State -2, ????O?\??]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(28) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(28) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(28)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, ????O?\??]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(28) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(28) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(28)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, ????O?\??]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 240-const(size.head.pos.y)
id = 8596

[State -2, ????O?\??]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, ????O?\??]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, ????O?\??]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, ????O?\??]
type = VarSet
trigger1 = numenemy
var(28) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; ?????\?? 
[State -2, ????O?\??]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8596) && stateno != 810
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(28)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, ????O?\??]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8598) && stateno != 810
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(28)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; ????O?\??(???) 
	
; ?v???C???[?\?? 
[State -2, ????O?\??]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, ????O?\??]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; ?????\??(?]) 
[State -2, ????O?\??]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(30) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(30) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(30)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, ????O?\??]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(30) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(30) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(30)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, ????O?\??]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 240-enemy,const(size.head.pos.y)
id = 18596

[State -2, ????O?\??]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, ????O?\??]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, ????O?\??]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, ????O?\??]
type = VarSet
trigger1 = numenemy = 1
var(30) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; ?????\?? 
[State -2, ????O?\??]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(30)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, ????O?\??]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(30)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

  
; ????I?? 
[State -2, ????I??]
type = AssertSpecial
trigger1 = roundstate > 2
flag = nowalk
 
; ?????????~ 
[State -2, ?????????~]
type = Width
trigger1 = vel x > 0 && movetype != H
edge = 5,5

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090


[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998

; ===================== (System Messages) =======================

[State -2, VS_Combo]
type = VarSet
triggerall = (var(31)!=10) || (var(31)=10 && movehit && statetype != A)
trigger1 = var(52) >= 3
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = [5000,5899])
var(31) = 1+(var(52)>4)+(var(52)>5)+(var(52)>7)+(var(52)>9)+(var(52)>29)+(var(52)>49)+(var(52)>69)-(var(52)=-1)
ignorehitpause = 1

[State -2, Air Combo]
type = VarSet
triggerall = var(52) >= 3 && statetype = A && var(31)!=10 && var(6)
trigger1 = (movehit)
var(31) = 10
ignorehitpause = 1

[State -2, Danger]
type = VarSet
trigger1 = var(53) !=1 && roundstate=2 && life = [1,250]
var(31) = 9
ignorehitpause = 1

; sound First attack
[State -2, First Attack]
type = PlaySnd
trigger1 = var(52)=0 && var(31)!=0
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
triggerall = NumExplod(8701) = 0
persistent = 0
value = 2,0
channel = 14
volume=255
ignorehitpause = 1

; Telop sound
[State -2, Combo Sound]
type = PlaySnd
trigger1 = NumExplod(8701) = 0
trigger1 = var(52)=0 && var(31)!=0
persistent = 0;1
value = 2,var(31)
channel = 14
volume=255
ignorehitpause = 1

[State -2, Left]
type = explod
trigger1 = var(52)=0 && var(31)!=0
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
triggerall = TeamSide = 1 && NumExplod(8701) = 0
anim = (8550 + var(31))
ID = 8701
postype = left
pos = 3,80
ontop = 1
bindtime = -1
removetime = 60
ownpal = 1
supermovetime = 60
pausemovetime = 60
scale = 0.5,0.5
persistent = 0
ignorehitpause = 1

[State -2, Right]
type = explod
trigger1 = var(52)=0 && var(31)!=0
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
triggerall = TeamSide = 2 && NumExplod(8701) = 0
anim = (8650+ var(31));8011;8720;
ID = 8701
postype = right
pos = -10,80;130;82
ontop = 1
bindtime = -1
removetime = 60;90
ownpal = 1
supermovetime = 60;90
pausemovetime = 60;90
scale = 0.5,0.5
persistent = 0;1
ignorehitpause = 1

[State -2, VS_Combo]
type = VarAdd
trigger1 = enemynear, time = 0
trigger1 = enemynear, Hitshakeover = 0
trigger1 = (p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899]
trigger2 = var(52)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
var(52) = 1 + (var(52)=-1)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
trigger1 = var(52)!=-1 && (p2movetype!=H || enemynear, ctrl)
trigger2 = var(52)=-1 && movetype = H;p2stateno = [5000,5899])
var(52) = 0 - (roundstate<2)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
triggerall = numexplod(8701)!=0
trigger1 = var(52)=0
var(31) = 0
ignorehitpause = 1

[State -2, Score]
type = Varadd
trigger1 = enemynear, time=0
trigger1 = enemynear, Hitshakeover=0
trigger1 = moveguarded || p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899])
trigger2 = var(52)=-1 && (movehit || p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
trigger3 = roundstate=4 && time=0 && stateno = [180,189]
var(22) = ceil(stateno/50)*var(52) + (life)*(roundstate=4) + (moveguarded)
ignorehitpause = 1

[State -2, Normalize Score]
type = Varset
triggerall = numpartner=1
trigger1 = var(22)< partner, var(22)
var(22) = partner, var(22)

[State -2, Is Danger]
type = VarSet
trigger2 = var(53) = 0 && life <= 250
trigger1 = var(53) = 1 && roundstate!=2
var(53) = (roundstate>1)
ignorehitpause = 1

[State -2, Is First Attack p3]
type = VarSet
triggerall = numpartner=1
trigger1 = partner, movehit
trigger1 = partner, var(52) != -1
var(52) = 0
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = nomusic

[State 0, PosSet]
type = PosSet
trigger1 = prevstateno = 100
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = prevstateno = 105
y = 0

; AhoVOK[h 
[State -2, AhoVOK[h]
type = Helper
trigger1 = var(11)
stateno = 8060
postype = p2
pos = 20,0
id = 8060

[State -2, AhoVOK[h]
type = PosFreeze
trigger1 = numhelper(8060)

[State -2, AhoVOK[h]
type = VelAdd
trigger1 = numhelper(8060)
trigger1 = statetype = A
y = -gethitvar(yaccel)

[State -2, AhoVOK[h]
type = Explod
trigger1 = var(11)
anim = 8060
pos = 47,-50
ontop = 1
scale = 0.5, 0.5

[State -2, AhoVOK[h]
type = VarSet
trigger1 = var(11)
var(11) = 0


; GA~b^[A 
[State 650, GA~b^[A]
type = PlaySnd
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
value = 0,11

[State 620, GA~b^[A]
type = VarSet
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
var(6) = 2

[State -2, GA~b^[A]
type = VarSet
trigger1 = !numtarget
var(6) = 0

[State -2, GA~b^[A]
type = VarSet
trigger1 = var(6)= 2 && ctrl && statetype != A
var(6) = 3

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = var(6) = 2
value = ifelse(pos x*facing > 0,1,0)
movecamera = 0,0
ignorehitpause = 1

[State -2, GA~b^[A]
type = ChangeState
triggerall = var(6) = 2
trigger1 = backedgebodydist < -20 && stateno != 100 && stateno != [710,711]
value = 710

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = stateno = 100 && prevstateno = 710
value = 0
movecamera = 0,0

[State -2, GA~b^[A]
type = NotHitBy
trigger1 = stateno = 100 && prevstateno = 710
value = SCA
 
; wp[A 
[State -2, wp[A]
type = VarSet
trigger1 = !numhelper
var(5) = 0

; R{ 
[State -2, R{]
type = VarSet
trigger1 = statetype = A && prevstateno = [600,800)
trigger1 = stateno = [1000,5000)
var(13) = 1

[State -2, R{]
type = VarAdd
trigger1 = movehit = 1
trigger2 = projhit = 1
var(18) = 1

[State -2, R{]
type = VarAdd
triggerall = statetype = A && numtarget
triggerall = target,statetype = A
triggerall = movehit = 1 || projhit = 1
trigger1 = stateno = [600,800)
trigger2 = var(13) && stateno = [1000,5000)
var(19) = 1

[State -2, R{]
type = VarSet
;trigger1 = !numtarget
trigger1 = !numenemy
trigger2 = numenemy
trigger2 = enemynear,movetype != H
var(13) = 0

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(18) = 0

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(19) = 0

; VXep 
	
; _[W 
[State -2, _[W]
type = VarSet
trigger1 = movetype = H
var(5) = 0

[State -2, _[W]
type = AfterImage
trigger1 = movetype = H
time = 0
 
; ^[Qbg 
[State -2, ^[Qbg]
type = VarSet
trigger1 = 1
var(7) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget
var(7) = target,id
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = !numtarget
var(9) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget && hitpausetime
var(9) = target,stateno = 5080
ignorehitpause = 1

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(7)) && !var(9)
trigger1 = playerID(var(7)),gethitvar(chainid) & 1
trigger1 = playerID(var(7)),stateno != [120,155]
trigger1 = playerID(var(7)),hitover && playerID(var(7)),alive && playerID(var(7)),hitshakeover
trigger1 = playerID(var(7)),statetype = A && playerID(var(7)),stateno != 9900
value = 9900

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(7)) && var(9)
trigger1 = playerID(var(7)),alive && playerID(var(7)),hitshakeover
trigger1 = playerID(var(7)),pos y >= 0 && playerID(var(7)),vel y > 0
trigger1 = playerID(var(7)),statetype = A && playerID(var(7)),stateno != 5201 && playerID(var(7)),stateno != 9910
value = 9901

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(7))
trigger1 = playerID(var(7)),gethitvar(chainid) & 2
trigger1 = playerID(var(7)),stateno != [120,155]
trigger1 = playerID(var(7)),alive && playerID(var(7)),hitshakeover
trigger1 = playerID(var(7)),pos y >= 0 && playerID(var(7)),vel y > 0
trigger1 = playerID(var(7)),statetype = A && playerID(var(7)),stateno != 9910
value = 9910

; ===================== (Wall hit) =======================

[state 5100,2]
type = explod
triggerall = var(45)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
scale = 0.9,0.9
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
triggerall = var(45)
triggerall = numenemy
triggerall = enemynear,stateno != [120,159]
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,8
channel = 4
volume = 255

[state 200, 3]
type = varset
triggerall = var(45)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 45
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 27
value = var(26)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 26
value = var(25)+hitcount

[state -3, 2];combo hosei
type = varset
trigger1 = enemynear,movetype != H
v = 25
value = 0

;***************
[state -3, 2];combo
type = varset
trigger1 = var(26)>var(27)
v = 45
value = 1

; ===================== (Metal Hit Code) =======================

[state -2, metal]
type = varset
trigger1 = enemynear, name = "War Machine"
trigger2 = enemynear, name = "Iron Man"
trigger3 = enemynear, name = "Sentinel"
trigger4 = enemynear, name = "Doctor Doom"
trigger5 = enemynear, name = "Tron Bonne"
var(49) =10

[state -2, metal]
type = varset
trigger1 = enemynear, name = "War Machine"
trigger1 = enemynear, name = "Iron Man"
trigger1 = enemynear, name = "Sentinel"
trigger1 = enemynear, name = "Doctor Doom"
trigger1 = enemynear, name = "Tron Bonne"
var(49) =0 

[state -2, metal]
type = varset
triggerall = enemynear, Name = "Zangief"
trigger1 = enemynear, var(50)=1
var(49) =10

[state -2, metal]
type = varset
triggerall = enemynear, Name = "Zangief"
trigger1 = enemynear, var(50)=0
var(49) =0 

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3];Variable Reset
type = varset
trigger1 = stateno = 0
trigger2 = stateno = 11
trigger3 = stateno = 20
trigger4 = stateno = 150
trigger5 = stateno = 50
v = 15
value = 0

; _[W{CX 
[State 1120, _[W{CX]
type = PlaySnd
triggerall = alive && movetype = H
triggerall = random % 10 < 5
trigger1 = stateno = 5000 && time = 1
trigger2 = stateno = 5010 && time = 1
trigger3 = stateno = 5020 && time = 1
trigger4 = stateno = 5070 && time = 1
trigger5 = stateno = 5080 && time = 1
value = s5000,random%2
channel = 22
volume = 200
volumescale = 200

[State 0, StopSnd]
type = StopSnd
trigger1 =  !alive
channel =22
;ignorehitpau

[State -3, VarSet]
type = VarSet
triggerall = var(2) = 1
trigger1 = movetype = H
trigger2 = statetype != A
trigger3 = pos y = 0
trigger3 = stateno != 110
v = 2
value = 0

[State -3, Super Jump Acceleration]
type = VelAdd
trigger1 = var(2) = 1
trigger1 = Stateno < 800
;y = -const(movement.yaccel) + .34
;y = -const(movement.yaccel) + .262
y = -const(movement.yaccel) + .28

[State -3, Leaf Shield]
type = NotHitBy
trigger1 = Var(1) = 1
value = SCA

[State -3, Turn On Camera]
type = VarSet
trigger1 = StateType != A
trigger2 = MoveType = H
v = 3
value = 0


[State -3, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
;text="The value of var(59) is %d."
text="var(59) = %d, P2BodyDist X = %f, P2BodyDist Y = %f"
params = var(59), P2BodyDist X, P2BodyDist Y
ignorehitpause = 1
