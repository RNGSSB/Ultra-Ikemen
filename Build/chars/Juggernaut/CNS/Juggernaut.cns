; VARIABLES:
; var(0): Temporary
; var(1): Temporary
; var(2): Recovery Roll variable
; var(3): Aircombo active
; var(4): Time since last hit received
; var(5): StateNo Saving
; var(6): Saves value of Ctrl
; var(7): 1 = KO'd
; var(8): 1 = Special winposes activated
; var(9): 1 = Special projectile hit
; var(10): Random variable for determining win pose
; var(11): P2Dist
; var(12): Temp (for super armor)
; var(13): Temp  "
; var(14): Power-Up Active
; var(15): PalFX timer
; var(16): GetHit PalFX Ticker
; var(17): temporary
; var(18): 1 = We've turned since KO'ing opponent
; var(19): Count A for custom state detection
; var(20): Count B for custom state detection
; var(21): Random number generated on movehit
; var(22): 1 = We're in a custom state
; var(23): Holds ID number
; var(24): Duration of Earthquake
; var(58): AI Active

; float
; fvar(0): temporary
; fvar(1): holds P2's x vel when KO'd
; fvar(2): holds P2's y vel when KO'd
; fvar(3): Juggernaut's attackmul

[Data]
;Amount of life to start with
life = 1000
;attack power (more is stronger)
attack = 100
;defensive power (more is stronger)
defence = 130
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 16
;Number of points for juggling
airjuggle = 15
;Default hit spark number for HitDefs
sparkno = 2
;Default guard spark number
guard.sparkno = 40
;1 to enable echo on KO
KO.echo = 0
;Volume offset (negative for softer)
volumescale = 180
;Variables with this index and above will not have their values
;reset to 0 between rounds or matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 57
FloatPersistIndex = 40


[Size]
xscale = .83
yscale = 1.07
ground.back = 45    ;Player width (back, ground)
ground.front = 39    ;Player width (front, ground)
air.back = 10        ;Player width (back, air)
air.front = 6       ;Player width (front, air)
height = 70      ;Height of player (for opponent to jump over)
attack.dist = 190   ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = 32, -110   ;Approximate position of head
mid.pos = -2, -67    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 1.9      ;Walk forward
walk.back = -1.6     ;Walk backward
run.fwd  = 4.2, 0    ;Run forward (x, y)
run.back = -4,0 ;Hop backward (x, y)
jump.neu = 0, -10.3  ;0,-6.4    ;Neutral jumping velocity (x, y)
jump.back = -3.1    ;Jump back Speed (x, y)
jump.fwd = 3.4 ;2.2       ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 4,-8.1      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .72        ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching


[Statedef 21]
type    = S
physics = S
sprpriority = 1

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 21, 1]
type = VelSet
triggerall = enemy, stateno != [191, 192]
trigger1 = command = "holdfwd"
x = 1.6

[State 21, 2]
type = VelSet
triggerall = enemy, stateno != [191, 192]
trigger1 = command = "holdback"
x = -1.3

[State 21, 3]
type = VelSet
triggerall = enemy, stateno != [191, 192]
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = command = "holdfwd" && anim != 22
value = 22

[State 21, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = command = "holdback" && anim != 22
value = 22

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = command != "holdfwd" && anim != 0
trigger1 = command != "holdback" && anim != 0
value = 0

[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 22, 0)


;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 170, 2]
type = PlaySnd
trigger1 = time = 0
value = 3, 2

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = VarRandom
trigger1 = time = 0
v = 0
range = 1, 1000

[State 180, 2]
type = ChangeState
trigger1 = !var(9)
trigger1 = var(0) = [1,500]
value = 183

[State 180, 4]
type = ChangeState
trigger1 = !var(9)
trigger1 = var(0) = [501,1000]
value = 185

[State 180, 5]
type = ChangeSTate
trigger1 = !var(9)
trigger1 = var(0) = [1001,1500]
value = 186

;---------------------------------------------------------------------------
; Win Pose 2: Stomp
[Statedef 183]
type = S
movetype = I
physics = N
anim = 0
velset = 0, 0
ctrl = 0
sprpriority = 0

[State 183, 1]
type = AssertSpecial
trigger1 = 1
flag = RoundNotOver

[State 183, 1]
type = NotHitBy
trigger1 = 1
value = SCA


[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

[State 183, 2]
type = ChangeAnim
triggerall = !var(18)
trigger1 = var(11) < 0
value = 5

[State 183, 2a]
type = Turn
triggerall = !var(18)
trigger1 = (Anim = 5) && (AnimTime = 0)
persistent = 0

[State 183, 3]
type = ChangeAnim
trigger1 = (Anim = 5) && (AnimTime = 0)
trigger2 = var(11) > 0
trigger3 = var(18)
value = 20
persistent = 0

[State 183, 4]
type = VelSet
trigger1 = Anim = 20
x = 1.9
persistent = 0

[State 183, 5]
type = VarSet
trigger1 = time = 0
fv = 0
value = abs(var(11))

[State 183, 6]
type = VarAdd
trigger1 = Anim = 20
fv = 0
value = -1.6

[State 183, 7]
type = ChangeAnim
triggerall = Anim = 20
trigger1 = fvar(0) <= 70
value = 240

[State 183, 8]
type = ChangeState
trigger1 = Anim = 240
value = 184

; Stomp on Opponent
[Statedef 184]
type = S
movetype = I
physics = N
anim = 240
velset = 0, 0

[State 184, a]
type = AssertSpecial
trigger1 = time < 180
flag = RoundNotOver

[State 184, 1]
type = PlaySnd
trigger1 = Anim = 240
trigger1 = AnimElem = 3
value = 3, 0

[State 184, 3]
type = EnvShake
trigger1 = Anim = 240
trigger1 = AnimElem = 3
time = 30
freq = 150

[State 184, 4]
type = PlaySnd
trigger1 = Anim = 240
trigger1 = AnimElem = 3
value = 5,1

[State 184, 5]
type = Explod
trigger1 = Anim = 240
trigger1 = AnimElem = 3
ID = 489
anim = 8001
scale = 0.5,0.5
postype = p1
pos = 50, -2
bindtime = 1
removetime = -2
sprpriority = 2
ownpal = 1

[State 184, 6]
type = ChangeAnim
trigger1 = Anim = 240
trigger1 = AnimElemNo(0) = 19
value = 183

;---------------------------------------------------------------------------
; Win Pose 3: "UUUUAAAAAHHH!"
[Statedef 185]
type = S
movetype = I
physics = N
anim = 185
velset = 0, 0
ctrl = 0

[State 185, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 9
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

[State 185, 2]
type = AssertSpecial
trigger1 = time < 180
flag = RoundNotOver

;----------------------------------------------------------------------------
; Win Pose 4: "I'm Unstoppable!"
[Statedef 186]
type = S
movetype = I
physics = N
anim = 186
velset = 0, 0
ctrl = 0

[State 186, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 7

[State 186, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3, 15

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

[State 186, 2]
type = AssertSpecial
trigger1 = time < 180
flag = RoundNotOver

;---------------------------------------------------------------------------
; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0
sprpriority = 0

[State 191, 1] ;Freeze animation until PreIntro is over
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 0
persistent = 0

; Like in vs Series, you always start with 1 power stock...
[State 190, PowerAdd]
type = PowerSet
triggerall = Roundno = 1
trigger1 = time = 0
value = 1000

[State 191, 3]
type = AssertSpecial
trigger1 = time < 150
flag = Intro

[State 191, 3a]
type = ChangeAnim
trigger1 = Anim = 190
trigger1 = AnimTime = 0
value = 0

[State 191, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
velset = 0,0
movetype = I
physics = S
sprpriority = -1

[State 195, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 195

[State 195, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 15

[State 195, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 6
volumescale = 190

[State 195, 2]
type = ChangeState
trigger1 = AnimElemNo(0) = 11
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Punch
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 3                      ;Number of air juggle points move takes
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = ifelse(PrevStateNo = 9000, 0, 20)                    ;Power to add (Def: 0)
sprpriority = 0                  ;Set layering priority to 2 (in front)

[State 200, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 200

[State 200, b]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 0
value = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1  

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Light
damage = 33,0
getpower = 20,0
givepower = 20,0
pausetime = 9,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,10
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
air.velocity = -14.5,-1
ground.cornerpush.veloff = -6.5
ground.velocity = -5.5,0
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 80)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3

[State 200, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing medium punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 7
poweradd= ifelse(PrevStateNo = 9000, 0, 40)
ctrl = 0
sprpriority = -1

[State 210, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 210

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1  

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 4

[State 210, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 0

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Medium
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 14,11
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -11,0
ground.cornerpush.veloff = -13.5
air.velocity = -16.5,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 58)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Hard Punch

[Statedef 220]
type = S
movetype = A
physics = S
juggle = 4
ctrl = 0
poweradd = ifelse(PrevStateNo = 9000, 0, 50)

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1  

[State 220, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 220

[State 220, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 5

[State 220, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3

[State 220, 4]
type = HitDef
trigger1 = time = 0
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 93,0
getpower = 50,0
givepower = 20,0
pausetime = 16,12
guard.pausetime = 12,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.animtype = up
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .88
ground.velocity = -13,0
air.velocity = 0,-25
airguard.velocity = -7,-2
ground.cornerpush.veloff = -16.5
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Lunge Punch (fwd + z)
[Statedef 226]
type = S
movetype = A
physics = S
poweradd = ifelse(PrevStateNo = 9000, 0, 40)
ctrl = 0
juggle = 5

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1  

[State 226, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 225

[State 226, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,5

[State 226, 3]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 0

[State 226, 4]
type = HitDef
trigger1 = AnimElem = 4
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = up
damage = 110,0
getpower = 50,0
givepower = 20,0
pausetime = 16,12
guard.pausetime = 12,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.animtype = up
ground.slidetime = 18
ground.hittime = 20
air.hittime = 23
yaccel = .76
ground.velocity = -7,-20
air.velocity = -7,-20
airguard.velocity = -7,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recovertime = 20
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing light kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= ifelse(PrevStateNo = 9000, 0, 20)
ctrl = 0
sprpriority = 0

[State 230, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 230

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1  

[State 230, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,3

[State 230, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Light
damage = 33,0
getpower = 20,0
givepower = 20,0
pausetime = 9,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,10
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
air.velocity = -14.5,-1
ground.cornerpush.veloff = -6.5
ground.velocity = -5.5,0
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= ifelse(PrevStateNo = 9000, 0, 40)
ctrl = 0
sprpriority = 0

[State 240, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 240

[State 240, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 0

[State 240, 3]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 16

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1  

[State 240, 5]
type = HitDef
trigger1 = AnimElem = 3
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Medium
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 14,11
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -11,0
ground.cornerpush.veloff = -13.5
air.velocity = -16.5,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 10)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Hard Kick
[Statedef 250]
type = S
movetype = A
physics = S
ctrl = 0
juggle = 6
poweradd = ifelse(PrevStateNo = 9000, 0, 60)

[State 250, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 250

[State 250, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 3

[State 250, 3]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,5

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1  

[State 250, 4]
type = HitDef
trigger1 = AnimElem = 3
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 90,0
getpower = 50,0
givepower = 20,0
pausetime = 16,12
guard.pausetime = 12,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.animtype = diagup
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .99
ground.velocity = -13,0
air.velocity = -20,-30
airguard.velocity = -7,-2
ground.cornerpush.veloff = -16.5
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 95)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= ifelse(PrevStateNo = 9000, 0, 25)
ctrl = 0
sprpriority = 0

[State 400, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 400

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = Light
damage = 33,0
getpower = 20,0
givepower = 20,0
pausetime = 9,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,10
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
air.velocity = -14.5,-1
ground.cornerpush.veloff = -6.5
ground.velocity = -5.5,0
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 30)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching Medium punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 10
poweradd= ifelse(PrevStateNo = 9000, 0, 30)
ctrl = 0
sprpriority = 0

[State 410, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 410

[State 410, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 0

[State 410, 4]
type = EnvShake
trigger1 = AnimElem = 5
time = 26
freq = 140

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 410, 5]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 16

[State 410, 6]
type = HitDef
trigger1 = AnimElem = 4
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = Medium
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 14,13
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -11,0
ground.cornerpush.veloff = -13.5
air.velocity = -16.5,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 410, 6]
type = HitDef
trigger1 = AnimElem = 5
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = Medium
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 9,7
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -11,0
ground.cornerpush.veloff = -13.5
air.velocity = -16.5,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact && AnimElem = 4, >= 0
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact && AnimElem = 5, >= 0
trigger1 = MoveHit
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Hard Punch
[Statedef 420]
type = C
movetype = A
physics = C
ctrl = 0
juggle = 4
poweradd = ifelse(PrevStateNo = 9000, 0, 40)
velset = 0, 0

[State 420, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 420

[State 420, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 3

[State 420, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,5

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 420, 4]
type = HitDef
trigger1 = time = 0
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = up
damage = 110,0
getpower = 50,0
givepower = 20,0
pausetime = 11,7
guard.pausetime = 12,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.animtype = up
ground.slidetime = 18
ground.hittime = 20
air.hittime = 23
yaccel = .82
ground.velocity = 0,-18.5
air.velocity = 0,-18.5
airguard.velocity = -7,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recovertime = 20
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 420, Explod]
type = Explod
trigger1 = movehit
anim = 8020
ontop = 1
pos = 45,-60
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 1.1,1.0
ownpal = 1


[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= ifelse(PrevStateNo = 9000, 0, 20)
ctrl = 0
sprpriority = 0

[State 430, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 430

[State 430, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 5

[State 430, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,3

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 430, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = Light
damage = 33,0
getpower = 20,0
givepower = 20,0
pausetime = 9,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,10
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
air.velocity = -14.5,-1
ground.cornerpush.veloff = -6.5
ground.velocity = -5.5,0
down.velocity = -4,-6
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 10)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 10
poweradd= ifelse(PrevStateNo = 9000, 0, 40)
ctrl = 0
sprpriority = 0

[State 440, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 440

[State 440, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0

[State 440, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,4

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 440, 4]
type = HitDef
trigger1 = animelem = 2
attr = C,NA
hitflag  = MAFD
guardflag = LA
animtype = Hard
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,1
guardsound = S6,0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 20
air.hittime = 12
guard.hittime = 17
yaccel = .53
ground.velocity = 0,-4
ground.cornerpush.veloff = 0
air.velocity = 0,-4
guard.velocity = -10
airguard.velocity = -6,-2
down.velocity = -4,-6
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 10
id = 4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 10)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Hard Kick
[Statedef 450]
type = C
movetype = A
physics = C
juggle = 5
poweradd = ifelse(PrevStateNo = 9000, 0, 50)
ctrl = 0
velset = 0, 0

[State 450, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 450

[State 450, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 3

[State 450, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,5

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 450, 4]
type = HitDef
trigger1 = AnimElem = 4
attr = C,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 90,0
getpower = 50,0
givepower = 20,0
pausetime = 16,12
guard.pausetime = 12,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.animtype = diagup
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .99
ground.velocity = -13,0
air.velocity = -20,-30
airguard.velocity = -7,-2
ground.cornerpush.veloff = -16.5
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 95)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 450, 5]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 20
ctrl = 0
sprpriority = 0

[State 600, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 600

[State 600, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5

[State 600, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 600, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Light
damage = 23,0
getpower = 20,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = .92
ground.velocity = -6.5,0
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -11
air.velocity = -3.7,-7.8
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 600
triggerall = floor (pos Y < -115)
trigger1 = animelem = 4
value = 1211
ctrl = 1


;---------------------------------------------------------------------------
;Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 40
ctrl = 0
sprpriority = 0

[State 610, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 610

[State 610, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 0

[State 610, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,4

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(49) = 1

[State 610, 4]
type = HitDef
trigger1 = AnimElem = 3
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Medium
air.animtype = Up
damage = 57,0
getpower = 30,0
givepower = 20,0
pausetime = 10,12
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 12
air.hittime = 12
yaccel = .92
ground.velocity = -12,0
ground.cornerpush.veloff = -9
air.cornerpush.veloff = -13
air.velocity = -7.6,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 610
triggerall = floor (pos Y < -115)
trigger1 = animelem = 9
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Jump Hard Punch
[Statedef 620]
type = A
movetype = A
physics = A
ctrl = 0
juggle = 3
poweradd = 60

[State 620, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 620

[State 620, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3

[State 620, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,5

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(49)
trigger1 = var(25) > 1 && var(26) > 0
var(49) = 1

[State 620, 4]
type = HitDef
triggerall = !var(49)
trigger1 = time = 0
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 80,0
getpower = 50,0
givepower = 20,0
pausetime = 11,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .99
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -20,3
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, 4]
type = HitDef
triggerall = var(49)
trigger1 = time = 0
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 80,0
getpower = 50,0
givepower = 20,0
pausetime = 11,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -20,3
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 4+64
fall.envshake.time = 10

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 620
triggerall = floor (pos Y < -115)
trigger1 = animelem = 6
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 20
ctrl = 0
sprpriority = 0

[State 630, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 630

[State 600, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5

[State 600, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(49) = 1

[State 630, 4]
type = HitDef
trigger1 = AnimElem = 2
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Light
damage = 23,0
getpower = 20,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = .92
ground.velocity = -6.5,0
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -11
air.velocity = -3.7,-10.8
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 630
triggerall = floor (pos Y < -115)
trigger1 = animelem = 4
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 35
ctrl = 0
sprpriority = 0

[State 640, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 640

[State 610, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 0

[State 610, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,4

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(49) = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 640, 4]
type = HitDef
trigger1 = AnimElem = 3
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Medium
air.animtype = Up
damage = 57,0
getpower = 30,0
givepower = 20,0
pausetime = 10,12
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 12
air.hittime = 12
yaccel = .92
ground.velocity = -12,0
ground.cornerpush.veloff = -9
air.cornerpush.veloff = -13
air.velocity = -9.5,-1.5
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 640
triggerall = floor (pos Y < -115)
trigger1 = animelem = 5
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
;Jump Hard Kick
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 60
ctrl = 0
sprpriority = 0

[State 650, 1]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 650

[State 620, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3

[State 620, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,5

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(49)
trigger1 = var(25) > 1 && var(26) > 0
var(49) = 1

[State 620, 4]
type = HitDef
triggerall = !var(49)
trigger1 = animelem = 2
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 80,0
getpower = 50,0
givepower = 20,0
pausetime = 11,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .99
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -22,3
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, 4]
type = HitDef
triggerall = var(49)
trigger1 = animelem = 2
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 80,0
getpower = 50,0
givepower = 20,0
pausetime = 11,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -22,3
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 4+64
fall.envshake.time = 10

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -85
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 650
triggerall = floor (pos Y < -115)
trigger1 = animelem = 4
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Superjump (Up)
[Statedef 690]
type    = A
physics = A
ctrl = 1
anim = 48
velset = 0, -19.5

[State 1000, FireB]
type = Explod
trigger1 = time = 0
anim = 8250
id = 8250
pos = -120, 9
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 0, 2
volumescale = 190

[State 180, Superjump Var]
type = VarSet
trigger1 = 1
var(33) = 1

[State 999, 1a]
type = VelAdd
triggerall = Vel X >= -4
trigger1 = Time >= 0
trigger1 = Time < 65
trigger1 = command = "holdback"
;trigger1 = Anim != 43
x = -0.055

[State 999, 1b]
type = VelAdd
triggerall = Vel X <= 4.5
trigger1 = Time >= 0
trigger1 = Time < 65
trigger1 = command = "holdfwd"
;trigger1 = Anim != 42
x = 0.088

[State 999, 2a]
type = VelSet
trigger1 = Anim = 49
trigger1 = Time = [0,2]
x = 3

[State 999, 2b]
type = VelSet
trigger1 = Anim = 50
trigger1 = Time = [0,2]
x = -3.5

[State 1310, 6]
type = Turn
;trigger1 = Time = 10
trigger1 = p2dist X < -5

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 49

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 50


;---------------------------------------------------------------------------
;Ground Throw A - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 0

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT         
hitflag = M-          
priority = 1, Miss    
sparkno = -1  
hitsound = S5,4    
sprpriority = 0   
p1facing = ifelse (command = "holdfwd", 1, -1) 
p2facing = 1         
p1stateno = 810      
p2stateno = 820       
guard.dist = 0        
fall = 1  
fall.envshake.time = 10
fall.envshake.freq = 100
fall.envshake.ampl = -2 

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0           

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
; Ground Throw A - Throwing Opponent
[Statedef 810]
type = S
movetype = I
physics = N
anim = 810
poweradd = 80
velset = 0, 0
sprpriority = 0
ctrl = 0

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-90*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 810, a]
type = Width
trigger1 = 1
value = 80, 0

[State 810, 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 50, -145
time = 12

[State 810, 2]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
value = 3, 5

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
pos = 83, -80
time = 8

[State 810, 3a]
type = TargetBind
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
pos = 80, -80
time = 8

[State 810, 4]
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
ID = 8
anim = 8004
postype = p1
scale = 0.5,0.5 
pos = 73, -80
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1

[State 810, 5]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
value = 5,2

[State 810, 6]
type = TargetLifeAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
value = -40
kill = 0

[State 810, 7]
type = TargetBind
trigger1 = AnimElem = 4
pos = 50, -145
time = 8

[State 810, 8]
type = TargetBind
trigger1 = AnimElem = 7
pos = 71, -98
time = 6

[State 810, 9]
type = TargetBind
trigger1 = AnimElem = 8
pos = 83, -58
time = 4

[State 810, 10]
type = PlaySnd
trigger1 = AnimElem = 9
value = 3, 3

[State 810, 11]
type = TargetBind
trigger1 = AnimElem = 9
pos = 117, -109
time = 3

[State 810, 12]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = -48

[State 810, 13]
type = TargetState
trigger1 = AnimElem = 10
value = 825

[State 810, 14]
type = PlaySnd
trigger1 = AnimElem = 9
value =5,2

[State 810, 15]
type = Explod
trigger1 = AnimElem = 9
ID = 8
anim = 8004
scale = 0.5,0.5
postype = p1 
pos = 78, -165
bindtime = 1
removetime = -2
ontop = 1
ownpal = 1

[State 810, 16]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
; Being Thrown by Throw A
[Statedef 820]
type = A
movetype = H
physics = N
velset = 0, 0
ctrl = 0
poweradd = 80
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 820

[State 820, 2]
type = ScreenBound
trigger1 = 1
value = 0

;-------------------
; Flying through air
[Statedef 825]
type = A
movetype = H
physics = N
velset = -9, -16.5

[State 820, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 825

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = gethitvar(yaccel)

[State 820, 2]
type = Gravity
trigger1 = 1

[STate 820, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

;---------------------------------------------------------------------------
;Ground Throw B - Attempt
[Statedef 830]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1

[State 830, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT         
hitflag = M-          
priority = 1, Miss    
sparkno = -1  
hitsound = S5,4   
sprpriority = 0
p1facing = ifelse (command = "holdfwd", 1, -1) 
p2facing = 1         
p1stateno = 840      
p2stateno = 850       
guard.dist = 0        
fall = 1   
fall.envshake.time = 10
fall.envshake.freq = 100
fall.envshake.ampl = -2 

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0                

[State 830, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------
; Ground Throw B - Throwing Opponent
[Statedef 840]
type = S
movetype = I
physics = N
anim = 830
ctrl = 0
velset = 0, 0
poweradd = 80
sprpriority = 0

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-90*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 840, a]
type = Width
trigger1 = 1
value = 110, 0

[State 840, 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 77, -155
time = 43

[State 840, 3]
type = SprPriority
trigger1 = AnimElem = 2
value = 2

[State 840, 4]
type = TargetBind
trigger1 = AnimElem = 2
pos = 3, -144
time = 16

[State 840, 5]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 0
channel = 0

[State 840, 6]
type = TargetBind
trigger1 = AnimElem = 3
pos = 13, -155
time = 6

[State 840, 7]
type = SprPriority 
trigger1 = AnimElem = 3
value = 0

[State 840, 8]
type = TargetBind
trigger1 = AnimElem = 4
pos = 170, -89
time = 4

[State 840, 9]
type = TargetBind
trigger1 = AnimElem = 5
pos = 167, 0
time = 40

[State 840, 10]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0,9

[State 840, 11]
type = EnvShake
trigger1 = AnimElem = 5
freq = 100
time = 10

[State 840, 12]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -128

[State 840, 13]
type = Explod
trigger1 = AnimElem = 5
ID = 8
anim = 8010
postype = p1 
pos = 167, 0
bindtime = 1
scale = 0.8,0.8
removetime = -2
ontop = 1
ownpal = 1

[State 840, 14]
type = TargetState
trigger1 = AnimElem = 7 = 2
value = 855

[State 840, 14a]
type = TargetDrop
trigger1 = AnimElem = 7 = 3

[State 840, 15]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------
; Being Thrown by Throw B
[Statedef 850]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0, 0
poweradd = 80
sprpriority = 1

[State 850, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 840

[State 850, 2]
type = ScreenBound
trigger1 = 1
value = 0

; Go back to own states
[Statedef 855]
type = A
movetype = H
physics = N
velset = -6, -26

[State 855, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 825

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = gethitvar(yaccel)


[State 855, 1a]
type = PosAdd
trigger1 = time = 0
y = -(const(size.height))

[State 855, 2]
type = Gravity
trigger1 = 1

[State 855, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

;---------------------------------------------------
; Air Throw - Attempt
[Statedef 860]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 850
sprpriority = 1

[State 860, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, NT         
hitflag = A-          
priority = 1, Miss    
sparkno = -1  
hitsound = S5,4       
sprpriority = 0       
p1facing = ifelse (command = "holdfwd", 1, -1) 
p2facing = 1         
p1stateno = 870      
p2stateno = 880       
guard.dist = 0        
fall = 1   
fall.envshake.time = 10
fall.envshake.freq = 100
fall.envshake.ampl = -2 

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0             

[State 860, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------
; Air Throw - Throwing Opponent
[Statedef 870]
type = A
movetype = I
physics = N
anim = 860
velset = 0, 0
sprpriority = 2
ctrl = 0
poweradd = 80

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-90*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 870, a]
type = Width
trigger1 = 1
value = 150, -40

[State 870, 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 6, -182
time = 12

[State 870, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 3

[State 870, 3]
type = SprPriority 
trigger1 = AnimElem = 2
value = 0

[State 870, 4]
type = TargetBind
trigger1 = AnimElem = 2
pos = 10, -196
time = 4

[State 870, 5]
type = TargetBind
trigger1 = AnimElem = 3
pos = 135, -147
time = 4

[State 870, 6]
type = TargetBind
trigger1 = AnimElem = 4
pos = 119, -42
time = 3

[State 870, 7]
type = TargetState
trigger1 = AnimElem = 5
value = 885

[State 870, 8]
type = TargetLifeAdd
trigger1 = Target, Pos Y >= 0
value = -128
persistent = 0

[State 870, 9]
type = EnvShake
trigger1 = Target, Pos Y >= 0
freq = 110
time = 12
persistent = 0

[State 870, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------
; Air Throw - Being Thrown
[Statedef 880]
type = A
movetype = H
physics = N
ctrl = 0
poweradd = 80
sprpriority = 1

[State 880, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 870

[State 880, 2]
type = ScreenBound
trigger1 = 1
value = 0

; Thrown into ground
[Statedef 885]
type = A
movetype = H
physics = N
velset = -13, 14

[State 885, a]
type = PosAdd
trigger1 = time = 0
x = -10

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = gethitvar(yaccel)

[State 885, 1]
type = Gravity
trigger1 = 1

[State 885, 2]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

;-------------------------------------------------------------------
; Push Block Stand
[Statedef 900]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 900
ctrl = 0

[State 900, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 37

[State 900, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "Push Block F"
pos = 0,0
postype = p1
stateno = 930
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 900, Spark]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 900, SFX]
type = PlaySnd
trigger1 = Time = 0
value = 1, 9
ignorehitpause = 1

[State 900, Stop]
type = Velset
trigger1 = Time = [0,30]
x = 0
y = 0

[State 900, Done]
type = ChangeState
trigger1 = AnimTime = 0
value = 130
ctrl = 1

;-------------------------------------------------------------------
; Push Block Crouch
[Statedef 910]
type    = C
movetype= I
physics = C
velset = 0,0
anim = 910
ctrl = 0

[State 910, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 37

[State 910, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "Push Block F"
pos = 0,0
postype = p1
stateno = 930
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 900, Spark]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 900, SFX]
type = PlaySnd
trigger1 = Time = 0
value = 1, 9
ignorehitpause = 1

[State 910, Stop]
type = Velset
trigger1 = Time = [0,30]
x = 0
y = 0

[State 910, Done]
type = ChangeState
trigger1 = AnimTime = 0
value = 131
ctrl = 1

;-------------------------------------------------------------------
; Push Block Air
[Statedef 920]
type    = A
movetype= I
physics = A
velset = 0,0
anim = 920
ctrl = 0

[State 920, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 37

[State 920, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "Push Block F"
pos = 0,0
postype = p1
stateno = 930
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 900, Spark]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 900, SFX]
type = PlaySnd
trigger1 = Time = 0
value = 1, 9
ignorehitpause = 1

[State 920, Stop]
type = Velset
trigger1 = Time = [0,30]
x = 0
y = 0

[State 920, Done]
type = ChangeState
trigger1 = AnimTime = 0
value = 132
ctrl = 1

;---------------------------------------------------------------------------
; Push Block Fwd
[Statedef 930]
type    = A
movetype= I 
physics = N
velset = 0,0
anim = 930

[State 930, Not Get Hit]
type = NotHitBy
Trigger1 = Time >= 0
value = , AA ,AP ,AT
Time = 1

[State 930, Push]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 930, Shove]
type = VelSet
trigger1 = Time >= 0
x = 17

[State 930, Done]
type = DestroySelf
trigger1 = Time = 30

; Oo 
[Statedef 950]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(4) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100

;===================================================================
; SPECIALS

;-------------------------------------------------------------------
; Juggernaut Punch Light
[Statedef 1000]
type = S
movetype = I
physics = N
ctrl = 0
;anim = 1000
poweradd = ifelse(PrevStateNo = 9000, 0, 50)
sprpriority = 0
velset = 0, 0

[State 1000, 1]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 0
value = 0

[State 1000, 1a]
type = VarSet
trigger1 = time = 0
v = 1
value = 0

[State 1000, 1b]
type = Null ;Width
trigger1 = 1
value = 30, 0

[State 1000, 2]
type = VarAdd
trigger1 = 1
v = 0
value = 1

[State 1000, 2a]
type = ChangeAnim
trigger1 = var(0) = 1
value = 1000

[State 100, dust]
type = explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 8
channel = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(0) = 14
value = 1010

;---------------------------------------------------
; Juggernaut Punch - Punch
[Statedef 1010]
type = S
movetype = A
physics = S
;anim = 1010
juggle = 8

[State 1010, b]
type = VarSet
trigger1 = time = 0
v = 0
value = ifelse(EnemyNear, GetHitVar(chainID) = 666, 2, 120)

[State 1010, c]
type = ChangeAnim
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
value = 1010

[State 1010, 1]
type = Explod
trigger1 = AnimElem = 3
ID = 005
anim = 1020
postype = p1
scale = 0.8,0.8
pos = 133, 16
bindtime = 1
removetime = -2
ownpal = 1
sprpriority = 2

[State 1010, 2]
type = Explod
trigger1 = AnimElem = 3
ID = 006
anim = 1030
postype = p1
scale = 0.8,0.8
pos = -20, 10
bindtime = 10
removetime = -2
ownpal = 1
sprpriority = 1

[State 1010, 3]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 16

[State 1010, 4]
type = VarSet
trigger1 = MoveHit
v = 1
value = 1

[State 1010, 5]
type = ScreenBound
trigger1 = var(1)
value = 0

[State 1010, 6]
type = EnvShake
trigger1 = AnimElemNo(0) = 3
freq = 140
time = 24
persistent = 0

[State 1010, 7]
type = HitDef
trigger1 = AnimElemNo(0) = 3
trigger1 = !MoveContact
attr = S, SA
hitflag = MAFD
guardflag = MA
pausetime = 0, 3
animtype = back
damage = var(0), 2 ;120, 2
sparkno = S8002
guard.sparkno = s8050
sparkxy = -10, -41
hitsound = S5, 6
guardsound = S6, 0
ground.velocity = -26, -18
air.velocity = -9, -16
down.velocity = -3, -5
guard.slidetime = 17
guard.hittime = 31 
ground.cornerpush.veloff = 0
guard.velocity = -11
yaccel = 1.07
fall = 1
air.fall = 1
givepower = 100
getpower = 60

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movecontact
trigger1 = var(1)
trigger1 = BackEdgeDist <= 0
value = 0,11
channel = 1
freqmul = 1.0

[State 1010, 8]
type = ChangeState
trigger1 = AnimElemNo(0) = 13
trigger1 = var(1)
trigger1 = BackEdgeDist <= 0
value = 1015

[State 1010, 9]
type = ChangeState
trigger1 = AnimElemNo(0) = 13
value = 0
ctrl = 1

;---------------------------------------------------
; Go Offscreen after punch hits
[Statedef 1015]
type = S
movetype = I
physics = S
anim = 0

[State 1015, 1]
type = ChangeState
trigger1 = BackEdgeDist <= 0
value = 1016

[State 1015, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 1015, 3]
type = ChangeState
trigger1 = BackEdgeDist > 0
value = 0
ctrl = 1

;------------------
[Statedef 1016]
type = S
movetype = I
physics = N

[State 1016, 1]
type = ScreenBound
trigger1 = 1
value = 0

[State 1016, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 3

[State 1016, 3]
type = VarSet
trigger1 = time = 0
v = 0
value = 65000

[State 1016, 4]
type = VarSet
trigger1 = 1
v = 1
value = floor(ScreenPos X)

[State 1016, 3]
type = ChangeAnim
trigger1 = var(1) - var(0) = 0
trigger2 = time > 10
trigger2 = BackEdgeDist >= -70
value = 100
persistent = 0

[State 1016, 4]
type = PosAdd
triggerall = var(1) - var(0) = 0
trigger1 = BackEdgeDist < -170
x = -130 - BackEdgeDist

[State 1016, 5]
type = VelSet
trigger1 = var(1) - var(0) = 0
trigger2 = time > 10
trigger2 = BackEdgeDist >= -70
x = 3.6
persistent = 0

[State 100, 6]
type = Explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
random = 30,abs(const(size.head.pos.y))
pos = -20,ceil(const(size.head.pos.y)/2)
scale = 0.5, 0.5

[state 100, Sound effect]
type = playsnd
trigger1 = time = 0
value = 0,1
volumescale = 44

[State 1016, 5a]
type = StateTypeSet
trigger1 = Anim = 100
trigger1 = AnimElem = 4
physics = S

[State 1016, 6]
type = ChangeState
trigger1 = 100
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1016, End]
type = VarSet
trigger1 = 1
v = 0
value = floor(ScreenPos X)

;-------------------------------------------------------------------
; Juggernaut Punch Medium
[Statedef 1020]
type = S
movetype = I
physics = N
ctrl = 0
;anim = 1000
poweradd = ifelse(PrevStateNo = 9000, 0, 50)
sprpriority = 0
velset = 0, 0

[State 1020, 1]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 0
value = 0

[State 1020, 1a]
type = VarSet
trigger1 = time = 0
v = 1
value = 0

[State 1020, 1b]
type = Null ;Width
trigger1 = 1
value = 30, 0

[State 1020, 2]
type = VarAdd
trigger1 = 1
v = 0
value = 1

[State 1020, 2a]
type = ChangeAnim
trigger1 = var(0) = 1
value = 1000

[State 100, dust]
type = explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1020, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 8
channel = 1

[State 1020, 5]
type = VelSet
trigger1 = AnimElemNo(0) = 5
x = 10

[State 1020, 6]
type = ChangeState
trigger1 = var(0) = 18
value = 1010

;-------------------------------------------------------------------
; Juggernaut Punch Hard
[Statedef 1030]
type = S
movetype = I
physics = N
ctrl = 0
;anim = 1000
poweradd = ifelse(PrevStateNo = 9000, 0, 60)
sprpriority = 0
velset = 0, 0

[State 1030, 1]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 0
value = 0

[State 1030, 1a]
type = VarSet
trigger1 = time = 0
v = 1
value = 0

[State 1030, 1b]
type = Null ;Width
trigger1 = 1
value = 30, 0

[State 1030, 2]
type = VarAdd
trigger1 = 1
v = 0
value = 1

[State 1030, 2a]
type = ChangeAnim
trigger1 = var(0) = 1
value = 1000

[State 100, dust]
type = explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1030, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 8
channel = 1

[State 1030, 5]
type = VelSet
trigger1 = AnimElemNo(0) = 5
x = 10

[State 1030, 6]
type = ChangeState
trigger1 = var(0) = 24
value = 1010

;---------------------------------------------------
; Earthquake LP
[Statedef 1040]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 0
velset = 0, 0
poweradd = ifelse(PrevStateNo = 9000, 0, 40)

[State 1040, a]
type = Width
trigger1 = AnimElemNo(0) = [4,24]
value = 50, -35

[State 1040, 1]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 1
value = 0

[state 221,??]
type = RemoveExplod
triggerall = NumExplod(1006)
trigger1 = animelem=1
trigger2 = animelem=2
trigger3 = animelem=3
trigger4 = animelem=4
ID = 1006

[State 3050, dust pwr]
type = Explod
trigger1 = !NumExplod(1006)
trigger1 = Animelem=5,>=0
trigger1 = Animelem=6,<0
anim =1006
ID=1006
scale=0.9,1.07
postype=p1
sprpriority = 3
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 1040, 2]
type = VarAdd
trigger1 = 1
v = 1
value = 1

[State 1040, 2a]
type = VarSet
trigger1 = time = 0
v = 24
value = 30

[State 1040, 2b]
type = VarSet
trigger1 = time = 0
fv = 0
value = 1.1

[State 1040, 3]
type = ChangeAnim
trigger1 = var(1) = 1
value = 1040

[State 1040, 4]
type = PlaySnd
trigger1 = var(1) = 1
value = 3, 13
channel = 1

[State 240, 3]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 16

[State 100, dust]
type = explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1040, 6]
type = HitDef
trigger1 = AnimElemNo(0) = 4
trigger1 = !MoveContact
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 8,11
guard.pausetime = 10,11
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,6
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = 6,0
ground.cornerpush.veloff = -8.5
air.velocity = -3,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 1040, 7]
type = HitDef
trigger1 = AnimElemNo(0) = 5
trigger1 = !MoveContact
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 8,7
guard.pausetime = 10,11
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,6
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -2,0
ground.cornerpush.veloff = -13.5
air.velocity = -3,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 1040, 8]
type = EnvShake
trigger1 = AnimElem = 5
freq = 120
time = 20

[State 1040, 9]
type = Helper
trigger1 = AnimElemNo(0) = 6
trigger1 = NumHelper(451) = 0
ID = 451
name = "Shockwave Spawner"
postype = p1
pos = 122, 10
stateno = 1050
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,6
channel = 12
volumescale = 130
freqmul = 51.0
pan = 5
;abspan =


[State 1040, 10]
type = ChangeState
trigger1 = AnimElemNo(0) = 26
value = 0
ctrl = 1

;-----------------------------------
; Shockwave Spawner
[Statedef 1050]
type = A
movetype = A
physics = N
anim = 9999

[State 1050, 1]
type = VarSet
trigger1 = time = 0
v = 0
value = parent, var(24)

[State 1050, 2]
type = VelSet
trigger1 = time = 0
x = 1.6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,6
channel = 12
volumescale = 130
freqmul = 51.0
pan = 5
;abspan =

[State 1050, 3]
type = Projectile
trigger1 = (time % 11) = 0
projanim = 1050
projremove = 0
projremovetime = 28
projsprpriority = 2
projID = 929
velocity = 0, 0
postype = p1
pos = 0, 0
attr = S, SA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 20, 2
pausetime = 0, 1
guard.pausetime = 0, 5
sparkno = S8002
guard.sparkno = S8050
sparkxy = 30,-15
guardsound = S6,0
ground.type = High
ground.slidetime = 15
ground.hittime = 16
guard.slidetime = 13
guard.hittime = 14
yaccel = .98
ground.velocity = -10.4, 0
air.velocity = -10.4, -1
guard.velocity = -8
hitonce = 1
getpower = 10
givepower = 35
id = 1

[State 1050, 4]
type = PlaySnd
trigger1 = (time % 14) = 0
value = 4, 0
channel = 1

[State 1050, 5]
type = DestroySelf
trigger1 = time >= var(0)

;-----------------------------------
; Shockwave Spawner
[Statedef 1051]
type = A
movetype = A
physics = N
anim = 9999

[State 1050, 1]
type = VarSet
trigger1 = time = 0
v = 0
value = parent, var(24)

[State 1050, 2]
type = VelSet
trigger1 = time = 0
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,6
channel = 12
volumescale = 130
freqmul = 51.0
pan = 5
;abspan =

[State 1050, 3]
type = Projectile
trigger1 = (time % 8) = 0
projanim = 1052
projremove = 0
projremovetime = 28
projsprpriority = 2
projID = 929
velocity = 0, 0
postype = p1
pos = 0, 0
attr = S, SA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 20, 2
pausetime = 0, 7
guard.pausetime = 0, 5
sparkno = S8002
guard.sparkno = S8050
sparkxy = 30,-15
guardsound = S6,0
ground.type = High
ground.slidetime = 15
ground.hittime = 16
guard.slidetime = 13
guard.hittime = 14
yaccel = .98
ground.velocity = -8.4, 0
air.velocity = -8.4, -1
guard.velocity = -8
hitonce = 1
getpower = 10
givepower = 35
id = 1

[State 1050, 4]
type = PlaySnd
trigger1 = (time % 14) = 0
value = 4, 0
channel = 1

[State 1050, 5]
type = DestroySelf
trigger1 = time >= var(0)

;-----------------------------------
; Shockwave Spawner
[Statedef 1052]
type = A
movetype = A
physics = N
anim = 9999

[State 1050, 1]
type = VarSet
trigger1 = time = 0
v = 0
value = parent, var(24)

[State 1050, 2]
type = VelSet
trigger1 = time = 0
x = 0.7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,6
channel = 12
volumescale = 130
freqmul = 51.0
pan = 5
;abspan =

[State 1050, 3]
type = Projectile
trigger1 = (time % 8) = 0
projanim = 1051
projremove = 0
projremovetime = 28
projsprpriority = 2
projID = 929
velocity = 0, 0
postype = p1
pos = 0, 0
attr = S, SA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 20, 2
pausetime = 0, 1
guard.pausetime = 0, 5
sparkno = S8002
guard.sparkno = S8050
sparkxy = 30,-15
guardsound = S6,0
ground.type = High
ground.slidetime = 15
ground.hittime = 16
guard.slidetime = 13
guard.hittime = 14
yaccel = .98
ground.velocity = -8.4, 0
air.velocity = -8.4, -1
guard.velocity = -8
hitonce = 1
getpower = 10
givepower = 35
id = 1

[State 1050, 4]
type = PlaySnd
trigger1 = (time % 14) = 0
value = 4, 0
channel = 1

[State 1050, 5]
type = DestroySelf
trigger1 = time >= var(0)
;---------------------------------------------------
; Earthquake MP
[Statedef 1060]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 0
velset = 0, 0
poweradd = ifelse(PrevStateNo = 9000, 0, 45)

[State 1060, a]
type = Width
trigger1 = AnimElemNo(0) = [4,29]
value = 50, -35

[state 221,??]
type = RemoveExplod
triggerall = NumExplod(1006)
trigger1 = animelem=1
trigger2 = animelem=2
trigger3 = animelem=3
trigger4 = animelem=4
ID = 1006

[State 1060, 1]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 1
value = 0

[State 3050, dust pwr]
type = Explod
trigger1 = !NumExplod(1006)
trigger1 = Animelem=5,>=0
trigger1 = Animelem=6,<0
anim =1006
ID=1006
scale=0.9,1.07
postype=p1
sprpriority = 3
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 1060, 2]
type = VarAdd
trigger1 = 1
v = 1
value = 1

[State 1060, 2a]
type = VarSet
trigger1 = time = 0
v = 24
value = 45

[State 1060, 2b]
type = VarSet
trigger1 = time = 0
fv = 0
value = 1.3

[State 1060, 3]
type = ChangeAnim
trigger1 = var(1) = 1
value = 1041

[State 1040, 4]
type = PlaySnd
trigger1 = var(1) = 1
value = 3, 13
channel = 1

[State 240, 3]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 16

[State 100, dust]
type = explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1060, 6]
type = HitDef
trigger1 = AnimElemNo(0) = 4
trigger1 = !MoveContact
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 8,11
guard.pausetime = 10,11
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,6
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = 6,0
ground.cornerpush.veloff = -8.5
air.velocity = -3,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 1060, 7]
type = HitDef
trigger1 = AnimElemNo(0) = 5
trigger1 = !MoveContact
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 8,7
guard.pausetime = 10,11
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,6
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -2,0
ground.cornerpush.veloff = -13.5
air.velocity = -3,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 1060, 8]
type = EnvShake
trigger1 = AnimElem = 5
freq = 120
time = 20

[State 1060, 9]
type = Helper
trigger1 = AnimElemNo(0) = 6
trigger1 = NumHelper(451) = 0
ID = 451
name = "Shockwave Spawner"
postype = p1
pos = 122, 10
stateno = 1050
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,6
channel = 12
volumescale = 130
freqmul = 51.0
pan = 5
;abspan =

[State 1060, 10]
type = ChangeState
trigger1 = AnimElemNo(0) = 31
value = 0
ctrl = 1

;---------------------------------------------------
; Earthquake HP
[Statedef 1070]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 0
velset = 0, 0
poweradd = ifelse(PrevStateNo = 9000, 0, 60)

[State 1070, a]
type = Width
trigger1 = AnimElemNo(0) = [4,31]
value = 50, -35

[state 221,??]
type = RemoveExplod
triggerall = NumExplod(1006)
trigger1 = animelem=1
trigger2 = animelem=2
trigger3 = animelem=3
trigger4 = animelem=4
ID = 1006

[State 3050, dust pwr]
type = Explod
trigger1 = !NumExplod(1006)
trigger1 = Animelem=5,>=0
trigger1 = Animelem=6,<0
anim =1006
ID=1006
scale=0.9,1.07
postype=p1
sprpriority = 3
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,6
channel = 12
volumescale = 130
freqmul = 51.0
pan = 5
;abspan =


[State 1070, 1]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 1
value = 0

[State 1070, 2]
type = VarAdd
trigger1 = 1
v = 1
value = 1

[State 1070, 2a]
type = VarSet
trigger1 = time = 0
v = 24
value = 50

[State 1070, 2b]
type = VarSet
trigger1 = time = 0
fv = 0
value = 2.5

[State 1070, 3]
type = ChangeAnim
trigger1 = var(1) = 1
value = 1042

[State 1040, 4]
type = PlaySnd
trigger1 = var(1) = 1
value = 3, 13
channel = 1

[State 240, 3]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3, 16

[State 100, dust]
type = explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1070, 6]
type = HitDef
trigger1 = AnimElemNo(0) = 4
trigger1 = !MoveContact
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 8,12
guard.pausetime = 10,11
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,6
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -6,0
ground.cornerpush.veloff = -8.5
air.velocity = -3,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 1070, 7]
type = HitDef
trigger1 = AnimElemNo(0) = 5
trigger1 = !MoveContact
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 67,0
getpower = 30,0
givepower = 20,0
pausetime = 8,7
guard.pausetime = 10,11
sparkno = S8002
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,6
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -2,0
ground.cornerpush.veloff = -13.5
air.velocity = -3,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 1070, 8]
type = EnvShake
trigger1 = AnimElem = 5
freq = 120
time = 20

[State 1070, 9]
type = Helper
trigger1 = AnimElemNo(0) = 6
trigger1 = NumHelper(451) = 0
ID = 451
name = "Shockwave Spawner"
postype = p1
pos = 122, 10
stateno = 1051
ownpal = 1

[State 1070, 9]
type = Helper
trigger1 = AnimElemNo(0) = 6
trigger1 = NumHelper(451) = 0
ID = 452
name = "Shockwave Spawner"
postype = p1
pos = 72, 10
stateno = 1052
ownpal = 1

[State 1070, 10]
type = ChangeState
trigger1 = AnimElemNo(0) = 31
value = 0
ctrl = 1

;-------------------------------------------------------------------
; Juggernaut Splash LK
[Statedef 1080]
type = U
movetype = A
physics = N
ctrl = 0
poweradd = 65
juggle = 10
sprpriority = 0

[State 1080, a]
type = VelSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
x = 0
y = 0

[State 1080, 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
value = 1060

[State 1080, 2]
type = VarSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
v = 0
value = 0

[State 100, dust]
type = explod
triggerall = Pos Y >= 0
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1080, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3
channel = 1

[State 1080, 5]
type = StateTypeSet
trigger1 = AnimElemNo(0) = 2
statetype = A

[State 1080, 6]
type = VelSet
trigger1 = AnimElemNo(0) = 2
trigger1 = Vel Y = 0
x = 2
y = -14.2
persistent = 0

[State 1080, 7]
type = VelAdd
trigger1 = AnimElemNo(0) = 2
trigger2 = AnimElemNo(0) = 3
y = 1.15

[State 1080, 8]
type = HitDef
trigger1 = AnimElemNo(0) = 3
trigger1 = !MoveContact
attr = S, SA
hitflag = MAFD
guardflag = HA
pausetime = 11, 9
damage = 110, 2
priority = 5, hit
animtype = hard
sparkno = S8002
guard.sparkno = s8050
sparkxy = -10, -41
hitsound = S5, 6
guardsound = S6, 0
ground.velocity = -12.4, -4
yaccel = 1
ground.type = High
air.velocity = -12.4, -4
down.velocity = -4, -2.5
ground.cornerpush.veloff = -12
guard.slidetime = 19 
guard.hittime = 19
guard.velocity = -8
fall = 10
air.fall = 10
givepower = 100
getpower = 50

[State 1080, 9]
type = VarSet
trigger1 = MoveContact
v = 0
value = 1

[State 1080, 10]
type = ChangeState
triggerall = var(0) = 1
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 1090

[State 1080, 11]
type = ChangeState
triggerall = var(0) = 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 1100

;---------------------------------------------------
; Land - Contacted
[Statedef 1090]
type = S
movetype = I
physics = S
velset = 0, 0

[State 1090, a]
type = PosSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
y = 0

[State 1090, 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
value = 1080

[State 1090, 2]
type = PlaySnd
trigger1 = time = 0
value = 3, 16

[State 1090, 3]
type = EnvShake
trigger1 = time = 0
freq = 100
ampl = -7
time = 40

[State 1090, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------
; Land - Missed
[Statedef 1100]
type = A
movetype = I
physics = S
velset = 0, 0
anim = 1070

[State 1100, 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 52, Helper]
type = Helper
trigger1 = time = 0
stateno = 8200

[State 1100, 4]
type = PlaySnd
trigger1 = time = 0
value = 3, 16

[State 1100, 6]
type = EnvShake
trigger1 = time = 0
freq = 100
ampl = -7
time = 40

[State 1100, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------
; Land - Missed
[Statedef 1101]
type = A
movetype = I
physics = S
velset = 0, 0
anim = 1071

[State 1100, 3]
type = PosSet
trigger1 = time = 0
y = 0

[State 52, Helper]
type = Helper
trigger1 = time = 0
stateno = 8200

[State 1100, 4]
type = PlaySnd
trigger1 = time = 0
value = 3, 16

[State 1100, 6]
type = EnvShake
trigger1 = time = 0
freq = 100
ampl = -7
time = 40

[State 1100, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
; Juggernaut Splash MK
[Statedef 1110]
type = U
movetype = A
physics = N
ctrl = 0
poweradd = 55
juggle = 10
sprpriority = 0

[State 1110, a]
type = VelSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
x = 0
y = 0

[State 1110, 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
value = 1060

[State 1110, 2]
type = VarSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
v = 0
value = 0

[State 100, dust]
type = explod
triggerall = Pos Y >= 0
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1080, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3
channel = 1

[State 1110, 5]
type = StateTypeSet
trigger1 = AnimElemNo(0) = 2
statetype = A

[State 1110, 6]
type = VelSet
trigger1 = AnimElemNo(0) = 2
trigger1 = Vel Y = 0
x = 3
y = -16.2
persistent = 0

[State 1080, 7]
type = VelAdd
trigger1 = AnimElemNo(0) = 2
trigger2 = AnimElemNo(0) = 3
y = 1.15

[State 1110, 8]
type = HitDef
trigger1 = AnimElemNo(0) = 3
trigger1 = !MoveContact
attr = S, SA
hitflag = MAFD
guardflag = HA
pausetime = 11, 9
damage = 110, 2
priority = 5, hit
animtype = hard
sparkno = S8002
guard.sparkno = s8050
sparkxy = -10, -41
hitsound = S5, 6
guardsound = S6, 0
ground.velocity = -12.4, -4
yaccel = 1
ground.type = High
air.velocity = -12.4, -4
down.velocity = -4, -2.5
ground.cornerpush.veloff = -12
guard.slidetime = 19 
guard.hittime = 19
guard.velocity = -8
fall = 10
air.fall = 10
givepower = 100
getpower = 50

[State 1110, 9]
type = VarSet
trigger1 = MoveContact
v = 0
value = 1

[State 1110, 10]
type = ChangeState
triggerall = var(0) = 1
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 1090

[State 1110, 11]
type = ChangeState
triggerall = var(0) = 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 1100

;-------------------------------------------------------------------
; Juggernaut Splash HK
[Statedef 1120]
type = U
movetype = A
physics = N
ctrl = 0
poweradd = 65
juggle = 10
sprpriority = 0

[State 1120, a]
type = VelSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
x = 0
y = 0

[State 1120, 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
value = 1060

[State 1120, 2]
type = VarSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
v = 0
value = 0

[State 100, dust]
type = explod
triggerall = Pos Y >= 0
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1080, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3
channel = 1

[State 1120, 5]
type = StateTypeSet
trigger1 = AnimElemNo(0) = 2
statetype = A

[State 1120, 6]
type = VelSet
trigger1 = AnimElemNo(0) = 2
trigger1 = Vel Y = 0
x = 5
y = -18.5
persistent = 0

[State 1080, 7]
type = VelAdd
trigger1 = AnimElemNo(0) = 2
trigger2 = AnimElemNo(0) = 3
y = 1.15

[State 1120, 8]
type = HitDef
trigger1 = AnimElemNo(0) = 3
trigger1 = !MoveContact
attr = S, SA
hitflag = MAFD
guardflag = HA
pausetime = 11, 9
damage = 110, 2
priority = 5, hit
animtype = hard
sparkno = S8002
guard.sparkno = s8050
sparkxy = -10, -41
hitsound = S5, 6
guardsound = S6, 0
ground.velocity = -12.4, -4
yaccel = 1
ground.type = High
air.velocity = -12.4, -4
down.velocity = -4, -2.5
ground.cornerpush.veloff = -12
guard.slidetime = 19 
guard.hittime = 19
guard.velocity = -8
fall = 10
air.fall = 10
givepower = 100
getpower = 50

[State 1120, 8]
type = HitDef
triggerall = P2bodydist X < 20
trigger1 = AnimElemNo(0) = 3
trigger1 = !MoveContact
attr = S, SA
hitflag = MAFD
guardflag = HA
pausetime = 11, 9
damage = 110, 2
priority = 5, hit
animtype = hard
sparkno = S8002
guard.sparkno = s8050
sparkxy = -10, -41
hitsound = S5, 6
guardsound = S6, 0
ground.velocity = -1.4, -1
yaccel = 1
ground.type = High
air.velocity = -1.4, -1
down.velocity = -4, -2.5
ground.cornerpush.veloff = -12
guard.slidetime = 19 
guard.hittime = 19
guard.velocity = -8
fall = 10
air.fall = 10
givepower = 100
getpower = 50

[State 1120, 9]
type = VarSet
trigger1 = MoveContact
v = 0
value = 1

[State 1120, 10]
type = ChangeState
triggerall = var(0) = 1
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 1090

[State 1120, 11]
type = ChangeState
triggerall = var(0) = 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 1101

;---------------------------------------------------
; Cyrorrak Power Up
[Statedef 1130]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0, 0

[State 100, dust]
type = explod
triggerall = Pos Y >= 0
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1130, 1]
type = VarSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
v = 14
value = 1

[State 1130, 1a]
type = VarSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
v = 15
value = 0

[State 1130, 1b]
type = VarSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
fv = 3
value = 2

[State 1130, 2]
type = ChangeAnim
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
value = 1090

[State 1130, 3]
type = VarSet
trigger1 = time = 0
trigger1 = PrevStateNo != 9000
v = 0
value = 0

[State 1130, 4]
type = VarAdd
trigger1 = 1
v = 0
value = 1

[State 1130, 5]
type = PlaySnd
trigger1 = var(0) = 1
value = 3, 12
channel = 1

[State 1130, 6]
type = ChangeState
trigger1 = var(0) = 42
value = 0
ctrl = 1

;===================================================================
; Juggernaut Headcrush

;------------------------------------------
; Startup
[Statedef 2000]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0, 0
sprpriority = 0

[State 2000, a]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2000, b]
type = Width
trigger1 = 1
value = -30, 20

[State 2000, 1]
type = ChangeAnim
trigger1 = time = 0
value = 2000

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 2
var(29) = 1

[State 3000, Helper]
type = Helper
trigger1 = animelem = 2
stateno = 8500
supermovetime = 99999999
pos = ceil(-10*const(size.xscale)),ceil(-93*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 2
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 2,< 0
value = SCA

[State 2000, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 9
channel = 1

[State 2000, 6]
type = ChangeState
trigger1 = animtime = 0
value = 2010

;-------------------------------
; HeadCrush - Attack
[Statedef 2010]
type = S
movetype = A
physics = N
anim = 2010
sprpriority = 0

[State 3000, Explod]
type = Explod
trigger1 = time = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[State 2010, 2b]
type = VelSet
trigger1 = 1
x = 11

[State 2010, 1]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 0
value = 0

[State 2010, 2]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 1
value = 0

[State 2010, 2a]
type = VarSet
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
v = 17
value = 0

[State 2010, 3]
type = VarAdd
trigger1 = 1
v = 0
value = 1

[State 2010, 4]
type = PlaySnd
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
value = 3, 4
channel = 1

[State 2010, 5]
type = PlaySnd
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
value = 4, 1
channel = 2
volumescale = 50

[State 2010, 7]
type = Explod
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
ID = 9076
anim = 2030
postype = p1
pos = -20, 0
bindtime = -1
removetime = -1
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 2010, 7a]
type = PalFX
trigger1 = (time % 1) = 1
time = 1
add = 174,11,1
mul = 399,256,256
color = 150
ignorehitpause = 1

[State 2010, 7b] 
type = PalFX
trigger1 = (time % 3) = 2
time = 1
add = -183,-194,-163
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,6
channel = 12
volumescale = 130
freqmul = 51.0
pan = 5
;abspan =

[State 2010, 8]
type = HitDef
triggerall = EnemyNear, Anim != [5070,5071]
trigger1 = (var(1) = 0) && (var(17) = 0)
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = hard
priority = 6, Hit
pausetime = 3, 4
guard.pausetime = 10,10
damage = 55, 3
animtype = hard
sparkno = S8002
guard.sparkno = s8050
sparkxy = -10, -41
hitsound = s5,6
guardsound = S6, 0
ground.type = low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -16
air.hittime = 15
yaccel = 1
air.velocity = -5, -1
guard.slidetime = 16
guard.hittime = 16
guard.velocity = -9
;noChainID = 889
givepower = 20
getpower = 0

[State 2010, 9]
type = HitDef
triggerall = EnemyNear, Anim != [5070,5071]
triggerall = var(0) > 9
trigger1 = (var(1) > 0) || (var(17) > 0)
attr = S, HA
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = hard
priority = 3, Hit
pausetime = 3, 1
guard.pausetime = 10,10
damage = 60, 3
sparkno = S8002
guard.sparkno = s8050
sparkxy = -10, -41
hitsound = S5, 6
guardsound = S6, 0
ground.type = low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3
air.hittime = 15
yaccel = 1
air.velocity = -3, -8
guard.slidetime = 16
guard.hittime = 16
guard.velocity = -11
;noChainID = 889
givepower = 20
getpower = 0

[State 2010, 11]
type = VarAdd
trigger1 = MoveHit
v = 1
value = 1
ignorehitpause = 1

[State 2010, 12]
type = VarAdd
trigger1 = MoveGuarded
v = 17
value = 1
ignorehitpause = 1

[State 2010, 12a]
type = VarSet
trigger1 = MoveContact
v = 0
value = 0
ignorehitpause = 1

[State 2010, 12b]
type = VarSet
trigger1 = MoveContact
v = 14
value = 0
ignorehitpause = 1

[State 2010, 12c]
type = AttackMulSet
trigger1 = MoveContact
value = 1
ignorehitpause = 1

[State 2010, Reset]
type = VarSet
triggerall = var(9)
trigger1 = MoveHit
fv = 1
value = 0
ignorehitpause = 1

[State 2010, Reset]
type = VarSet
triggerall = var(9)
trigger1 = MoveHit
fv = 2
value = 0
ignorehitpause = 1

[State 2010, Reset]
type = VarSet
triggerall = var(9)
trigger1 = MoveHit
v = 9
value = 0
ignorehitpause = 1

[State 2010, 13]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

[State 2010, 14]
type = ChangeState
trigger1 = var(0) >= 15
trigger2 = var(1) = 3
trigger3 = var(17) = 2
trigger4 = time = 90
trigger4 = !movecontact
value = 2020

;---------------------------------------------------
; Tackle
[Statedef 2020]
type = S
movetype = A
physics = S
sprpriority = -1

[State 2020]
type = VelSet
trigger1 = 1
x = 14

[State 2020]
type = VelSet
trigger1 = moveguarded
x = 0


[State 3000, VarSet]
type = VarSet
trigger1 = time = 1
var(29) = 0

[State 2020, a]
type = Width
trigger1 = AnimElemNo(0) = [2,3]
value = 50, -10

[State 2020, 1]
type = ChangeAnim
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
value = 2020

[State 2020, 1a]
type = StopSnd
trigger1 = PrevStateNo != 9000
trigger1 = time = 0
channel = 2

[State 2020, 2]
type = RemoveExplod
trigger1 = AnimElemNo(0) = 2
ID = 9076

[State 2020, 2a]
type = EnvShake
trigger1 = MoveContact
trigger2 = PrevStateNo != 9000
trigger2 = animelem = 2
time = 14
freq = 150
ampl = -7
ignorehitpause = 1
persistent = 0

[State 2020, 3]
type = HitDef
triggerall = EnemyNear, Anim != [5070,5071]
trigger1 = animelem = 2
attr = S, HA
hitflag = MAF
guardflag = MA
pausetime = 1, 6
damage = 135, 2
animtype = Up
yaccel = 0.8
sparkno = S8002
guard.sparkno = s8050
sparkxy = -10, -41
hitsound = S5, 6
guardsound = S6, 0
ground.velocity = 5, -28
air.velocity = 5, -28
guard.slidetime = 13 
guard.hittime = 18
guard.velocity = -11
fall = 1
air.fall = 1
fall.recover = 0
;p2stateno = 2030
givepower = 50
getpower = 0

[State 2020, 4]
type = ChangeState
trigger1 = AnimElemNo(0) = 6
value = 0
ctrl = 1

;-----------------------
; Custom State for being hit by tackle
[Statedef 2030]
type = A
movetype = H
physics = N
ctrl = 0
velset = 7, -17

[State 2030, 1]
type = NotHitBy
trigger1 = Alive
value = SCA

[State 2030, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 2040

[State 2030, 3]
type = Gravity
trigger1 = 1

[State 2030, 4]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;===================================================================
;---------------------------------------------------
; Super Armor State
[Statedef 9000]
type = U
movetype = H

[State 9000, a]
type = VarSet
trigger1 = time = 0
v = 16
value = 1

[State 9000, 1]
type = OffSet
trigger1 = time%4 = 0
x=3
y=0

[State 9000, 1]
type = OffSet
trigger1 = time%4 = 2
x=-3
y=0

[State 9000, End]
type = posadd
trigger1 = (time >= 9) && (Life > 0)
x =-(23-time)

[State 9000, b]
type = VarSet
trigger1 = time <= 0
v = 13
value = AnimElemNo(0)
ignorehitpause = 1

[State 9000, 1]
type = VarSet
trigger1 = time = 0
v = 12
value = var(4)

[State 9000, 2]
type = Null ;VarSet
trigger1 = time = 0
v = 4
value = 0

[State 9000, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 9000, VarSet]
type = VarSet
trigger1 = Life <= 0
v = 7
value = 1

[State 9000, ChangeState];Dead
type = ChangeState
trigger1 = Life <= 0
value = ifelse(StateType = A, 5020,5000)

[State 9000, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = Anim
elem = var(13)

[State 9000, End]
type = ChangeState
trigger1 = (time >= floor(gethitvar(hittime) * 0.8)) && (Life > 0)
value = var(5)
ctrl = var(6)

;-------------------------------------------------
; Opponent: Grab win pose
[Statedef 9010]
type = L
movetype = H
physics = N
sprpriority = 0

[State 9010, a]
type = ScreenBound
trigger1 = 1
value = 0

[State 9010, 1]
type = Turn
triggerall = Facing = EnemyNear, Facing
trigger1 = EnemyNear, fvar(0) <= 70

[State 9010, 2]
type = PosAdd
trigger1 = EnemyNear, fvar(0) <= 70
x = -(120 - P2Dist X)
persistent = 0

[State 9010, 3]
type = ChangeAnim2
trigger1 = EnemyNear, Anim = 181
trigger1 = EnemyNear, AnimElem = 4
value = 182
persistent = 0

[State 9010, 4]
type = PosAdd
trigger1 = EnemyNear, Anim = 181
trigger1 = EnemyNear, AnimElem = 4
x = -(80 - P2Dist X)
y = -145
persistent = 0

[State 9010, 5]
type = Sprpriority
trigger1 = EnemyNear, Anim = 181
trigger1 = EnemyNear, AnimElem = 4
value = 2
persistent = 0

;------------------------------
; Get Stomped On - Win Pose
[Statedef 9020]
type = L
movetype = H
physics = N
sprpriority = 2

[State 9020, 1]
type = Turn
triggerall = EnemyNear, AnimElem = 3
trigger1 = EnemyNear, StateNo = 184
trigger1 = Facing = EnemyNear, Facing

[State 9020, 2]
type = VelSet
trigger1 = EnemyNear, StateNo = 184
trigger1 = EnemyNear, AnimElem = 3
x = -3.5
y = -9

[State 9020, 3]
type = ChangeState
trigger1 = EnemyNear, StateNo = 184
trigger1 = EnemyNear, AnimElem = 3
value = 9030

; Fly through air
[Statedef 9030]
type = A
movetype = H
physics = N

[State 9030, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 184

[State 9030, 2]
type = Gravity
trigger1 = 1

[State 9030, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9040

; Hit Ground
[Statedef 9040]
type = A
movetype = H
physics = N
velset = 0, 0
sprpriority = 0

[State 9040, a]
type = PosSet
trigger1 = time = 0
y = 0

[State 9040, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5100

[State 9040, 2]
type = Null ;Explod
trigger1 = time = 0
anim = F62
postype = p1
pos = 0, 0
bindtime = 1
removetime = -2
sprpriority = 4

[State 9040, 3]
type = PlaySnd
trigger1 = time = 0
value = F7, 1

[State 9040, 4]
type = ChangeState
trigger1 = time = 4
value = 9050

; Bounce Up
[Statedef 9050]
type = A
movetype = H
physics = N

[State 9050, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5160

[State 9050, 2]
type = VelSet
trigger1 = time = 0
x = -3
y = -6

[State 9050, 3]
type = Gravity
trigger1 = 1

[State 9050, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9060

; Hit Ground and Liedown
[Statedef 9060]
type = L
movetype = H
physics = N
velset = 0, 0

[State 9060, 1]
type = PosSet
trigger1 = time = 0
y = 0

[State 9060, 2]
type = ChangeAnim
trigger1 = time = 0
value = 5110

[State 9060, 3]
type = PlaySnd
trigger1 = time = 0
value = F7, 0

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

; PRE-INTRO
[Statedef 22]
type    = S
physics = S
sprpriority = 0

[State 20, VelSet]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, VelSet]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, VelMul]
type = VelMul
trigger1 = var(51) = 1
x = 1.3

[State 20, ChangeAnim]
type = ChangeAnim
trigger1 = vel x > 0 &&  anim != 22
value = 22

[State 20, ChangeAnim]
type = ChangeAnim
trigger1 = vel x < 0 &&  anim != 22
value = 22


;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A
sprpriority = -1

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, PlayerPush]
type = PlayerPush
trigger1 = (P2StateType != A) && (P2BodyDist X <= 0) && (Pos Y <= -20)
value = 0

;---------------------------------------------------------------------------
;Falling

[Statedef 1211]
type    = A
movetype= I
physics = A
anim = 51
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.23

[State 1211, Ctrl]
type = CtrlSet
trigger1 = prevstateno = 4100
value = 1

[State 1211, Ctrl]
type = CtrlSet
triggerall = prevstateno != 4100
trigger1 = Var(12) = 0
value = 1

[State 1211, Ctrl]
type = CtrlSet
triggerall = prevstateno != 4100
trigger1 = Var(12) = 1
value = 1

[State 112, 3]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .2

[State 112, 4]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.1

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 52

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 53

[State 1211, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 52


;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
sprpriority = -1
ctrl = 1

[State 100, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 100

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 6]
type = Explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
random = 30,abs(const(size.head.pos.y))
pos = -20,ceil(const(size.head.pos.y)/2)
scale = 0.5, 0.5

[state 100, Sound effect]
type = playsnd
trigger1 = time = 0
value = 0,1
volumescale = 114

[State 100, 18]
type = VelAdd
trigger1 = AnimElem = 4
x = -1

[State 100, 19]
type = VelSet
trigger1 = AnimTime = 0
x = 0

[State 100, 20]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = S
physics = S
ctrl = 1
sprpriority = -1

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 105, a]
type = ChangeAnim
triggerall = PrevStateNo != 9000
trigger1 = time = 0
value = 105

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.back.x)

[State 100, 19]
type = VelSet
trigger1 = AnimTime = 0
x = 0

[State 100, 20]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; HIT_FALLRECOVER (on the ground) 
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,8,-7)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dizzy Up
[Statedef 5250]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 5250
poweradd = 0
velset = -3, -17
sprpriority = 1

[State 970, 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

;This resets the dizzy counter back to zero
[State 970, 3]
type = VarSet
trigger1 = Time = 0
v = 35
value = 0

[State 5250, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5250, Gravity]
type = VelAdd
trigger1 = 1
y = 0.3

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[State 5250, recavary]
type = ChangeState
trigger1 = time = 32
value = 5200
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[State 5900, 2a]
type = VarSet
trigger1 = time = 0
v = 23
value = 1337

[State 5900, 2b]
type = VarSet
trigger1 = NumPartner = 0
trigger1 = NumEnemy = 1
trigger1 = P2Name != "Juggernaut"
trigger1 = time = 0
v = 8
value = 1

[State 5900, 2c]
type = VarSet
trigger1 = time = 0
fv = 3
value = 1

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190


; nGtFNg 
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

;Lv 1 Hyper Helper
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,0
volumescale = 190

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = f9951
sprpriority = -2
postype = left
under = 1
supermove = 1
bindtime = -1
removetime = 37
scale = 1,1
ownpal = 1

[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(29) = 1 && !numexplod(8505)
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
trigger1 = root,var(29) = 0 || root,var(29) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
trigger1 = root,var(29) = 0
trigger2 = root,movetype = H


[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,4

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,5

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay
flag3 = nomusic

; [State 8510, AssertSpecial]
; type = AssertSpecial
; trigger1 = (StageVar(Info.Name) != "Absolute Cloud-Night")
; flag = nomusic

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)


; ^[QbgJo[ 
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)

 
; ^[Qbg_EA 
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)

 
; ^[QbgoEh 
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5040

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6

[State 9910, PosSet]
type = PosSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -5

[State 1300, 6]
type = PalFX
triggerall = name = "Dhalsim"
trigger1 = animelem = 1
time = 18
sinadd =  255,255,255,43
ignorehitpause = 0

[State 5100, 10]
type = PlaySnd
triggerall = name = "Dhalsim"
trigger1 = Time = 1
value = S3,0

[State 9910, VelSet]
type = VelSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -4
x = 0

[State 9910, VelAdd]
type = VelAdd
triggerall = name = "Dhalsim"
trigger1 = time = 1
y = 0

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .82;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52
 

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

[Statedef -2]

[State 0, PlaySnd]
type = PlaySnd
trigger1 = StateNo = 9910 && time = 1
value = 0,6
channel = 20

[State 0, PlaySnd]
type = PlaySnd
triggerall = p1name = "Juggernaut"
triggerall = p2name = "Juggernaut"
triggerall = p3name = "Juggernaut"
triggerall = p4name = "Juggernaut"
trigger1 = StateNo = 9910 && time = 1
value = 0,7
channel = 20

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(45) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(45) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(45)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, O\]
type = Explod
triggerall =roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(45) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(45) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(45)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 220-const(size.head.pos.y)
id = 8596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy
var(45) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8596)
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(45)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8598)
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(45)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(44)=5068355)
trigger1 = var(43) && roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(44)=5068355)
trigger1 = var(43) && roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(44)=5068355)
triggerall = var(43) && roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(46) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(46) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(46)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(44)=5068355)
triggerall = var(43) && roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(46) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(46) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(21)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 220-enemy,const(size.head.pos.y)
id = 18596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy = 1
var(46) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(44)=5068355)
trigger1 = var(43) && roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(46)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(44)=5068355)
trigger1 = var(43) && roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(46)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, Remember the last Position (X)]
type = VarSet
triggerall = RoundState < 2
trigger1 = stateno = [0, 21] ;Enable after Intro
fvar(3) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(3) != 0
trigger1 = prevstateno != 191
x = fvar(3)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(3) = 0

[State -2, Pre-walking state]
type = ChangeState
;triggerall = !var(59)
trigger1 = prevstateno = 191
trigger2 = RoundNo != 1              ;Enable If Round Number is > 1
trigger2 = RoundState = 1           ;RoundState < 2 and
trigger2 = stateno = 0              ;Current state is 0
value = 21
ctrl = 0

; 1P
[State -2, R{bZ[W]
type = Explod
triggerall = !numexplod(8570)
triggerall = !numtarget && roundstate = 2 && teamside = 1
trigger1 = var(25) >= 3 && var(26) < 2
anim = 8550+(var(25)>3)+(var(25)>5)+(var(25)>7)+(var(25)>9)+(var(25)>29)+(var(25)>59)+(var(25)>99)
ownpal = 1
ontop = 1
postype = left
bindtime = -1
pos = 0,80
scale = .5,.5
ignorehitpause = 1
supermove = 1
pausemovetime = 99999999
id = 8550

[State -2, R{bZ[W]
type = Explod
triggerall = !numexplod(8570)
triggerall = !numtarget && roundstate = 2 && teamside = 1
trigger1 = var(25) >= 3 && var(26) >= 2
anim = 8558+(var(40)=2)
ownpal = 1
ontop = 1
postype = left
bindtime = -1
pos = 0,80
scale = .5,.5
ignorehitpause = 1
supermove = 1
pausemovetime = 99999999
id = 8550

; 2P
[State -2, R{bZ[W]
type = Explod
triggerall = !numexplod(8570)
triggerall = !numtarget && roundstate = 2 && teamside = 2
trigger1 = var(25) >= 3 && var(26) < 2
anim = 8560+(var(25)>3)+(var(25)>5)+(var(25)>7)+(var(25)>9)+(var(25)>29)+(var(25)>59)+(var(25)>99)
ownpal = 1
ontop = 1
postype = right
bindtime = -1
pos = 0,80
scale = .5,.5
ignorehitpause = 1
supermove = 1
pausemovetime = 99999999
id = 8550

[State -2, R{bZ[W]
type = Explod
triggerall = !numexplod(8570)
triggerall = !numtarget && roundstate = 2 && teamside = 2
trigger1 = var(25) >= 3 && var(26) >= 2
anim = 8568+(var(40)=2)
ownpal = 1
ontop = 1
postype = right
bindtime = -1
pos = 0,80
scale = .5,.5
ignorehitpause = 1
supermove = 1
pausemovetime = 99999999
id = 8550

; AiEX
[State -2, R{bZ[W]
type = PlaySnd
triggerall = !numtarget && roundstate = 2
trigger1 = var(25) >= 3 && var(26) < 2
value = 2,(var(25)>3)+(var(25)>5)+(var(25)>7)+(var(25)>9)+(var(25)>29)+(var(25)>59)+(var(25)>99)
ignorehitpause = 1
volumescale = 180

[State -2, R{bZ[W]
type = PlaySnd
triggerall = !numtarget && roundstate = 2
trigger1 = var(25) >= 3 && var(26) >= 2
value = 2,8+(var(40)=2)
ignorehitpause = 1
volumescale = 180
 
; VXebZ[W 
[State -2, VXebZ[W]
type = Explod
triggerall = !(var(28)&1) && teamside = 1
trigger1 = movehit
trigger2 = projhittime(0) > 0
anim = 8570
ownpal = 1
ontop = 1
postype = left
bindtime = -1
pos = 0,80
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8570

[State -2, VXebZ[W]
type = Explod
triggerall = !(var(28)&1) && teamside = 2
trigger1 = movehit
trigger2 = projhittime(0) > 0
anim = 8575
ownpal = 1
ontop = 1
postype = right
bindtime = -1
pos = 0,80
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8570

[State -2, VXebZ[W]
type = PlaySnd
triggerall = !(var(28)&1)
trigger1 = movehit
trigger2 = projhittime(0) > 0
value = 2,10
ignorehitpause = 1
volumescale = 180

[State -2, VXebZ[W]
type = VarSet
triggerall = !(var(28)&1)
trigger1 = movehit
trigger2 = projhittime(0) > 0
trigger3 = movetype = H && stateno != [120,155]
trigger4 = numpartner
trigger4 = partner,movetype = H && partner,stateno != [120,155]
trigger5 = numpartner
trigger5 = partner,movehit || partner,projhittime(0) > 0
var(28) = var(28) | 1
ignorehitpause = 1

[State -2, VXebZ[W]
type = Explod
triggerall = !(var(28)&2) && teamside = 1
trigger1 = life < lifemax * .35
anim = 8571
ownpal = 1
ontop = 1
postype = left
bindtime = -1
pos = 0,80
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8570

[State -2, VXebZ[W]
type = Explod
triggerall = !(var(28)&2) && teamside = 2 && alive
trigger1 = life < lifemax * .35
anim = 8576
ownpal = 1
ontop = 1
postype = right
bindtime = -1
pos = 0,80
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8570

[State -2, VXebZ[W]
type = PlaySnd
triggerall = !(var(28)&2) && alive
trigger1 = life < lifemax * .35
value = 2,11
ignorehitpause = 1
volumescale = 180

[State -2, VXebZ[W]
type = VarSet
triggerall = !(var(28)&2)
trigger1 = life < lifemax * .35
var(28) = var(28) | 2
ignorehitpause = 1

[State -2, VXebZ[W]
type = VarSet
triggerall = (var(28)&2)
trigger1 = life >= lifemax * .35
var(28) = var(28) ^ 2
ignorehitpause = 1

[State -2, VXebZ[W]
type = RemoveExplod
trigger1 = numexplod(8570) && numexplod(8550)
id = 8550
ignorehitpause = 1

; R{ 
[State -2, R{]
type = VarSet
trigger1 = statetype = A && prevstateno = [600,800)
trigger1 = stateno = [1000,5000)
var(27) = 1

[State -2, R{]
type = VarAdd
trigger1 = movehit = 1
trigger2 = projhit = 1
var(25) = 1

[State -2, R{]
type = VarAdd
triggerall = statetype = A && numtarget
triggerall = target,statetype = A
triggerall = movehit = 1 || projhit = 1
trigger1 = stateno = [600,800)
trigger2 = var(27) && stateno = [1000,5000)
var(26) = 1

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(27) = 0

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(25) = 0

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(26) = 0
 
; R{ 
[State -2, R{]
type = VarSet
trigger1 = 1
fvar(5) = 1.0-(var(25)>3)*((var(25)-3)*.075)

[State -2, R{]
type = VarSet
trigger1 = fvar(5) < .0
fvar(5) = .025

[State -2, R{]
type = AttackMulSet
trigger1 = 1
value = fvar(5)


; GA~b^[A 
[State 650, GA~b^[A]
type = PlaySnd
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
value = 0,11

[State 620, GA~b^[A]
type = VarSet
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
var(49) = 2

[State -2, GA~b^[A]
type = VarSet
trigger1 = !numtarget
var(49) = 0

[State -2, GA~b^[A]
type = VarSet
trigger1 = var(49)= 2 && ctrl && statetype != A
var(49) = 3

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = var(49) = 2
trigger1 = pos x*facing < 0
value = 0
movecamera = 0,0
ignorehitpause = 1

[State -2, GA~b^[A]
type = ChangeState
triggerall = var(49) = 2
trigger1 = backedgebodydist < -20 && stateno != 100 && stateno != [950,951]
value = 950

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = stateno = 100 && prevstateno = 950
value = 0
movecamera = 0,0

[State -2, GA~b^[A]
type = NotHitBy
trigger1 = stateno = 100 && prevstateno = 950
value = SCA


[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090

[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998


; ^[Qbg 
[State -2, ^[Qbg]
type = VarSet
trigger1 = 1
var(50) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget
var(50) = target,id
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = !numtarget
var(52) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget && hitpausetime
var(52) = target,stateno = 5080
ignorehitpause = 1

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(50)) && !var(52)
trigger1 = playerID(var(50)),gethitvar(chainid) & 1
trigger1 = playerID(var(50)),stateno != [120,155]
trigger1 = playerID(var(50)),hitover && playerID(var(50)),alive && playerID(var(50)),hitshakeover
trigger1 = playerID(var(50)),statetype = A && playerID(var(50)),stateno != 9900
value = 9900

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(50)) && var(52)
trigger1 = playerID(var(50)),alive && playerID(var(50)),hitshakeover
trigger1 = playerID(var(50)),pos y >= 0 && playerID(var(50)),vel y > 0
trigger1 = playerID(var(50)),statetype = A && playerID(var(50)),stateno != 5201 && playerID(var(50)),stateno != 9910
value = 9901

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(50))
trigger1 = playerID(var(50)),gethitvar(chainid) & 2
trigger1 = playerID(var(50)),stateno != [120,155]
trigger1 = playerID(var(50)),alive && playerID(var(50)),hitshakeover
trigger1 = playerID(var(50)),pos y >= 0 && playerID(var(50)),vel y > 0
trigger1 = playerID(var(50)),statetype = A && playerID(var(50)),stateno != 9910
value = 9910

;Wall Hit

[state 5100,2]
type = explod
triggerall = var(42)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
triggerall = var(42)
triggerall = numenemy
triggerall = enemynear,stateno != [120,159]
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,9
volumescale = 190
channel = 4
volume = 255

[state 200, 3]
type = varset
triggerall = var(42)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 42
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 54
value = var(53)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 53
value = var(55)+hitcount

[state -3, 2];combo hosei
type = varset
trigger1 = enemynear,movetype != H
v = 55
value = 0

;***************
[state -3, 2];combo
type = varset
trigger1 = var(53)>var(54)
v = 42
value = 1

[State -180, a]
type = VarSet
trigger1 = stateno != 51
trigger1 = stateno != 999
trigger1 = stateno != [600,699]
trigger1 = stateno != [850,860]
trigger1 = stateno != [1010,1015]
trigger1 = stateno != [1300,1330]
trigger1 = stateno != 2100
var(33) = 0

; Guard triggers for AI (from BB Hood)
[State -2, Stand guard]
type = ChangeState
triggerall = var(58) > 0
triggerall = StateType != A
triggerall = EnemyNear, StateType != C
triggerall = EnemyNear, MoveType = A
trigger1 = ctrl = 1
value = 130

[State -2, S-to-C guard]
type = ChangeState
triggerall = var(58) > 0
triggerall = StateType != A
triggerall = EnemyNear, statetype = C
triggerall = EnemyNear, Movetype = A
trigger1 = stateno = 150
value = 152

[State -2, Crouch guard]
type = ChangeState
triggerall = var(58) > 0
triggerall = StateType != A
triggerall = EnemyNear, statetype = C
triggerall = EnemyNear, Movetype = A
trigger1 = ctrl = 1
value = 131

[State -2, C-to-S guard]
type = ChangeState
triggerall = var(58) > 0
triggerall = StateType != A
triggerall = EnemyNear, statetype != C
triggerall = EnemyNear, Movetype = A
trigger1 = stateno = 152
value = 150

[State -2, Air guard]
type = ChangeState
triggerall = var(58) > 0
triggerall = StateType = A
triggerall = EnemyNear, Movetype = A
trigger1 = ctrl = 1
value = 132

; Custom state check
[State -2, Check if in custom state]
type = RemoveExplod
trigger1 = var(19) - var(20) = 0
ID = 9076

[State -2, Set Var if in Custom state]
type = VarSet
triggerall = (StateNo != 5000) && (StateNo != 5010)
trigger1 = 1
v = 22
value = ifelse(var(19) - var(20) = 0, 1, 0)

[State -2, Set Var]
type = VarSet
trigger1 = 1
v = 20
value = var(19)

[State -2, Scale Damage While AirCombo is on]
type = AttackMulSet
trigger1 = Var(3) = 1
value = .55

[State -2, Return Damage to Normal]
type = AttackMulSet
triggerall = Var(3) = 1
trigger1 = MoveType = H
trigger2 = StateNo = 52
trigger3 = StateType != A
trigger3 = StateNo != 225
value = 1

[State -2, Turn Off Aircombo]
type = VarSet
triggerall = Var(3) = 1
trigger1 = MoveType = H
trigger2 = StateNo = 52
trigger3 = StateType != A
trigger3 = StateNo != 225
v = 3
value = 0

; Recovery roll (from Sunboy's Psylocke)
[State -2]
type = VarSet
triggerall = statetype = A
triggerall = movetype = H
triggerall = Alive
trigger1 = command = "RecoveryRoll"
trigger2 = var(58) = 1
trigger2 = Random <= 50
var(2) = 1

[State -2]
type = VarSet
trigger1 = StateNo < 5000
trigger2 = StateNo > 5999
var(2) = 0

[State -2, Get P2 Distance]
type = VarSet
trigger1 = P2Dist X != 0
v = 11
value = floor(P2Dist X)

; Spawn projectile for special winposes
[State -2, Randomize]
type = VarRandom
triggerall = var(8)
triggerall = var(10) = 0
trigger1 = WinKO
v = 10
range = 1, 1000

[State -2, Save]
type = VarSet
triggerall = var(8)
triggerall = fvar(1) = 0
trigger1 = var(10) = [1,500]
fv = 1
value = EnemyNear, Facing * (EnemyNear, GetHitVar(xvel))

[State -2, Save]
type = VarSet
triggerall = var(8)
triggerall = fvar(2) = 0
trigger1 = var(10) = [1, 500]
fv = 2
value = EnemyNear, GetHitVar(yvel)

[State -2, Special Projectile]
type = Projectile
triggerall = var(8)
trigger1 = WinKO
trigger1 = var(10) = [1,500]
trigger1 = !var(9)
ProjID = 666
projanim = 9998
postype = p2
offset = 0, -10
attr = A, NP
hitflag = MAF
guardflag = 
pausetime = 0, 0
sparkno = -1
hitsound = S0,66
numhits = 0
air.velocity = fvar(1), fvar(2)
p2stateno = EnemyNear, StateNo

[State -2, Track if Proj hit]
type = VarSet
triggerall = var(8)
trigger1 = ProjHit666 = 1
v = 9
value = 1

[State -2, Reset]
type = MoveHitReset
triggerall = var(8)
trigger1 = ProjHit666 = 1

; Reset if Enemy Gets Hit After Projectile Contacts
[State -2, Reset]
type = VarSet
triggerall = var(9)
trigger1 = MoveHit
fv = 1
value = 0

[State -2, Reset]
type = VarSet
triggerall = var(9)
trigger1 = MoveHit
fv = 2
value = 0

[State -2, Reset]
type = VarSet
triggerall = var(9)
trigger1 = MoveHit
v = 9
value = 0

; Cytorrak Power Up Controllers
[State -2, Set Powered Up Attack]
type = AttackMulSet
trigger1 = var(14) = 1 || var(14) = -1
value = 2

[State -2, PalFX] 
type = PalFX
triggerall = var(14) = 1 || var(14) = -1
trigger1 = (var(15) % 5) = 0
time = 3
add = 114,71,0
add = 198,160,0
mul = 216,216,216
invertall = 0
color = 225
ignorehitpause = 1


[State -2, Add to Timer]
type = VarAdd
trigger1 = var(14) = 1 || var(14) = -1
v = 15
value = 1

[State -2, Turn off for Whiffed Attacks]
type = VarSet
triggerall = var(14) = 1
trigger1 = MoveType = A
v = 14
value = -1

[State -2, Turn off Power Up]
type = AttackMulSet
trigger1 = var(14) != 0
trigger1 = MoveType = A
trigger1 = MoveContact 
trigger2 = var(14) = -1
trigger2 = MoveType != A
trigger2 = (StateNo != 9000) && (StateNo != [5000,5010]) 
value = 1

[State -2, Turn off Power Up]
type = VarSet
trigger1 = var(14) != 0
trigger1 = MoveType = A
trigger1 = MoveContact 
trigger2 = var(14) = -1
trigger2 = MoveType != A
trigger2 = (StateNo != 9000) && (StateNo != [5000,5010]) 
fv = 3
value = 1

[State -2, Turn off Power Up]
type = VarSet
trigger1 = var(14) != 0
trigger1 = MoveType = A
trigger1 = MoveContact
trigger2 = var(14) = -1
trigger2 = MoveType != A
trigger2 = (StateNo != 9000) && (StateNo != [5000,5010]) 
v = 14
value = 0

; Gethit PalFX
[State -2, PalfX]
type = PalFX
triggerall = var(16) > 0
trigger1 = (var(16) % 4) = 1
time = 2
;add = 164,11,0
add = 128,40,0
mul = 256,256,256
color = 256
ignorehitpause = 1

[State -2, Add]
type = VarAdd
trigger1 = var(16) > 0
v = 16
value = 1
ignorehitpause = 1

[State -2, Clear]
type = VarSet
trigger1 = var(16) > 16
v = 16
value = 0 
ignorehitpause = 1


;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3, Increment]
type = VarAdd
trigger1 = 1
v = 19
value = 1

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
value = 0, 0


; Gethit sounds
[State -3, 1]
type = VarRandom
trigger1 = StateNo = 5000
trigger1 = time = 1
v = 0

; _[W{CX 
[State 1120, _[W{CX]
type = PlaySnd
triggerall = alive && movetype = H
triggerall = random % 10 < 5
trigger1 = stateno = 5000 && time = 1
trigger2 = stateno = 5010 && time = 1
trigger3 = stateno = 5020 && time = 1
trigger4 = stateno = 5070 && time = 1
trigger5 = stateno = 5080 && time = 1
value = s5000,random%2
channel = 2

; Super Armor controllers
[State -3, Increment Counter]
type = VarAdd
trigger1 = Stateno = 9000
v = 4
value = 5

[State -3, Decrement Counter]
type = VarAdd
trigger1 = (StateNo != 9000) && (Var(4) > 0)&& (MoveType != H)
v = 4
value = -1
ignorehitpause = 1

[State -3, Save StateNo]
type = VarSet
trigger1 = (MoveType != H) && (StateNo != 9000)
var(5) = StateNo

[State -3, Save Ctrl]
type = VarSet
trigger1 = (MoveType != H) && (StateNo != 9000)
var(6) = Ctrl

[State -3, Record Turn]
type = VarSet
triggerall = WinKO
trigger1 = Anim = [5,6]
v = 18
value = 1

; Random Var for AI
[State -3, Randomize]
type = VarRandom
triggerall = var(58) = 1
trigger1 = var(21) = 0
trigger1 = MoveContact
v = 21
range = 1, 1000
ignorehitpause = 1

[State -3, Clear]
type = VarSet
triggerall = var(58) = 1
triggerall = var(21) > 0
trigger1 = MoveType != A
trigger2 = MoveContact = 0 
v = 21
value = 0
ignorehitpause = 1

[State -3, Debug]
type = Null ;DisplayToClipboard
trigger1 = 1
text = "GetHit = %d  Aircombo = %d  AI = %d  PowerUp = %d\n"
params = var(4), var(3), var(58), var(14)

;----------------------------------------------------------------------------------------;
;                                        Dizzy code                                      ;
;----------------------------------------------------------------------------------------;
[State -3, Varadd]
type = VarAdd
triggerall = (Time = 0) && (Var(36) < 15) && (Var(37) = 0)
trigger1 = (anim = 5000) || (anim = 5001) || (anim = 5010) || (anim = 5011) || (anim = 5020) || (anim = 5021)
v = 35
value = ((GetHitVar(animtype)=0)*100)+((GetHitVar(animtype)=1)*200)+((GetHitVar(animtype)=2)*250)+((GetHitVar(animtype)>=3)*300)

[State -3, VarSubtract]
type = VarAdd
trigger1 = Var(35) > 0
v = 35
value = ifelse(MoveType = A,-3,-2)

[State -3, VarSet]
type = VarSet
trigger1 = Var(35) < 0
v = 35
value = 0
ignorehitpause = 1

[State -3, ChangeState]
type = ChangeState
triggerall = Time = 1
trigger1 = (anim = 5000) || (anim = 5001) || (anim = 5010) || (anim = 5011) || (anim = 5020) || (anim = 5021)
trigger1 = (Var(35) >=20000) && (LoseKO = 0)
value = 5250
ignorehitpause = 1




