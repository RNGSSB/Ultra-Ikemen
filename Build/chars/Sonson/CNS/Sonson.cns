;;;;;;;;;; SonSon Custom MvC2 Style ;;;;;;;;;;;;
;;;;;;;;;;;; Main Constants File ;;;;;;;;;;;;;;;
;;;;;;;;;; Orignal code by Ryou Win ;;;;;;;;;;;;
; Sprite and Animation Data from Kong's SonSon ;
;;;;;;;;;;; Modified by FerchogtX (first stance) ;;;;;;;;;;;;;;
;;;;;;;;;;; Modified by REDHOT (last stance) ;;;;;;;;;;;;;;

[Data]
power = 5000
life = 1000
attack = 100
defence = 90
fall.defence_up = 50
liedown.time = 15
airjuggle = 99999999
sparkno = -1
guard.sparkno = -1
KO.echo = 0
volumescale = 155
volume = 155
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = .83
yscale = 1.07
ground.back = 23     ;Player width (back, ground)
ground.front = 23     ;Player width (front, ground)
air.back = 15         ;Player width (back, air)
air.front = 15        ;Player width (front, air)
height = 60           ;Height of player (for opponent to jump over)
attack.dist = 160     ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0      ;Set to 1 to scale projectiles too
head.pos = -18,-69     ;Approximate position of head
mid.pos = -0,-45       ;Approximate position of midsection
shadowoffset = 0      ;Number of pixels to vertically offset the shadow
draw.offset = 0,0     ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 4.2
walk.back = -3
run.fwd  = 9,0
run.back = -8.5,-4.6      ;Hop backward (x, y)
jump.neu = 0,-12.5          ;Neutral jumping velocity (x, y)
jump.back = -4.45,-14         ;Jump back Speed (x, y)
jump.fwd = 3.65,-13            ;Jump forward Speed (x, y)
runjump.back = -3.7,-8.1
runjump.fwd = 5,-7.1
airjump.neu = 0,-9.5
airjump.back = -3,-9.5
airjump.fwd = 3,-9.5

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 50
yaccel = .61
stand.friction = .85  
crouch.friction = .82

;;;;;;;;;;;;;;; Main and overriden state file ;;;;;;;;;;;;;;;;;;;;
;-----------------------------------------------------------------


; Jump Start 
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
velset = 0,0
facep2 = 1

[State 40, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 40, VarSet]
type = VarSet
trigger1 = time = 1
sysvar(1) = ifelse(command = "holdfwd",1,ifelse(command = "holdback", -1, 0))

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(2) = 0

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(3) = 1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, VelSet]
type = VelSet
trigger1 = animtime = 0
trigger1 = prevstateno = 100
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, VelSet]
type = VelSet
trigger1 = animtime = 0
trigger1 = prevstateno = 105
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.back.x)

[State 40, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
 
; AirJump Start 
[Statedef 45]
type    = A
physics = A
velset = 0,0

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
sysvar(1) = ifelse(command = "holdfwd",1,ifelse(command = "holdback", -1, 0))

[State 40, VarAdd]
type = VarAdd
trigger1 = time = 0
var(2) = -1

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(3) = 1

[State 40, VelSet]
type = VelSet
trigger1 = Time = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 50, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))
 
; Jump Up 
[Statedef 50]
type    = A
physics = A

[State 50, VarSet]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > -10
y= 0.09

[State 91, VelAdd]
type = VelAdd
trigger1 = var(19) > 0
trigger1 = Vel Y > -10
y=  0.21

[State 50, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

;---------------------------------------------------------------------------
;Falling

[Statedef 1221]
type    = A
movetype= I
physics = A
anim = 57
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.11

[State 1211, Ctrl]
type = CtrlSet
trigger1 = prevstateno = 4100
value = 1

[State 1211, Ctrl]
type = CtrlSet
triggerall = prevstateno != 4100
trigger1 = Var(12) = 0
value = 1

[State 1211, Ctrl]
type = CtrlSet
triggerall = prevstateno != 4100
trigger1 = Var(12) = 1
value = 1

[State 112, 3]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .395

[State 112, 4]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.199

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 58

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 59

[State 1211, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 52

;-------------------------------------------------------------------------
;Super Jump
[Statedef 99]
type    = A
physics = A
ctrl = 1
anim = 44
velset = 0, -17.5

[State 1000, FireB]
type = Explod
trigger1 = time = 0
anim = 8250
id = 8250
pos = -120, 9
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > -110
y= - 0.12

[State 91, VelAdd]
type = VelAdd
trigger1 = time = 0
y=  -0.58

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 190

[State 180, Superjump Var]
type = VarSet
trigger1 = 1
var(50) = 1

[State 999, 1a]
type = VelAdd
triggerall = Vel X >= -4
trigger1 = Time >= 0
trigger1 = Time < 99
trigger1 = command = "holdback"
;trigger1 = Anim != 43
x = -0.04

[State 999, 1b]
type = VelAdd
triggerall = Vel X <= 4.5
trigger1 = Time >= 0
trigger1 = Time < 99
trigger1 = command = "holdfwd"
;trigger1 = Anim != 42
x = 0.22

[State 999, 2a]
type = VelSet
trigger1 = Anim = 45
trigger1 = Time = [0,2]
x = 3

[State 999, 2b]
type = VelSet
trigger1 = Anim = 46
trigger1 = Time = [0,2]
x = -3.5

[State 1310, 6]
type = Turn
;trigger1 = Time = 10
trigger1 = p2dist X < -5

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 45

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 46

;---------------------------------------------------------------------------
; Dash FWD
[Statedef 100]
type = S
movetype = I
physics = N
anim = 100
ctrl = 0
velset = 0,0

[State 100, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoAutoTurn

[State 100, 0]
type = PosSet
trigger1 = time = 0
y = 0

[State 100, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.fwd.x)

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = nowalk
flag2 = noautoturn

[State 100, 4]
type = CtrlSet
trigger1 = Time = 0
value = 1 - (var(58) > 0)

[State 101, Explod]
type = Explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
scale = 0.5,0.5
random = 30,abs(const(size.head.pos.y))
pos = -30,ceil(const(size.mid.pos.y))

[State 100, Dash Sound]
type = PlaySnd
trigger1 = time = 0
value = 0,1

[State 100, 1]
type = VelSet
trigger1 = animelem = 5
x = 0

[State 100, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------
; Dash Back
[Statedef 105]
type = S
movetype = I
physics = N
anim = 105
ctrl = 0
velset = 0,0

[State 100, 0]
type = PosSet
trigger1 = time = 0
y = 0

[State 100, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = nowalk
flag2 = noautoturn

[State 100, 3]
type = CtrlSet
trigger1 = Time = 0
value = 1 - (var(58) > 0)

[State 100, 4]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel) - 0.12

[State 100, 5]
type = VelMul
trigger1 = AnimElemNo(0) >= 5
x = 0.92

[State 100, 6]
type = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 106
ctrl = 1

;-----------------------------------------------------------------------
; Dash Land
[Statedef 106]
type    = S
movetype = I
physics = S
anim = 106
ctrl = 1 - (var(58) > 0)

[State 52, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, ]
type = AssertSpecial
trigger1 = 1
flag = nowalk
flag2 = noautoturn

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Forward
[Statedef 112]
type    = A
physics = N
movetype = I
anim = 112
ctrl = 0 + (0*(var(11):=1))
velset = 0,0
sprpriority = -2

[State 112, 1]
type = VelSet
trigger1 = AnimElem = 5
x = const(velocity.run.fwd.x) * 1

[State 112, 1]
type = VelSet
trigger1 = time = 32
x = const(velocity.run.fwd.x) * 0.75

[State 112, Voice]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1100,0
volume = 255
volumescale = 255
channel = 0

[State 112, Cloud]
type = Helper
trigger1 = time = 0
name = "Kintoun Cloud"
ID = 30112
stateno = 30112
pos = 0,5
postype = p1

[State 112, 2]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 112, 3]
type = CtrlSet
trigger1 = AnimElem = 5
value = 1

[State 112, NJ]
type = StateTypeSet
trigger1 = time = 34 && !var(33)
physics = A

[State 112, SJ]
type = VelAdd
trigger1 = time = 34 && var(33)
y = const(movement.yaccel) + 0.02

[State 112, SPR]
type = SprPriority
trigger1 = time = 34
value = 1

[State 112, 4]
type = ChangeState
trigger1 = time = 34
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Back
[Statedef 116]
type    = A
physics = N
movetype = I
anim = 116
ctrl = 0 + (0*(var(11):=1))
velset = 0,0
sprpriority = -2

[State 116, 1]
type = VelSet
trigger1 = AnimElem = 5
x = -(const(velocity.run.fwd.x) * 1)

[State 112, 1]
type = VelSet
trigger1 = time = 32
x = -(const(velocity.run.fwd.x) * 0.75)

[State 116, Voice]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1100,0
volume = 255
volumescale = 255
channel = 0

[State 116, Cloud]
type = Helper
trigger1 = time = 0
name = "Kintoun Cloud"
ID = 30112
stateno = 30112
pos = 0,5
postype = p1

[State 116, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 116, 2]
type = CtrlSet
trigger1 = AnimElem = 5
value = 1

[State 116, 3]
type = StateTypeSet
trigger1 = time = 34 && !var(33)
physics = A

[State 116, 4]
type = VelAdd
trigger1 = time = 34 && var(33)
y = const(movement.yaccel) + 0.02

[State 116, SprPriority]
type = SprPriority
trigger1 = time = 34
value = 1

[State 1116, 5]
type = ChangeState
trigger1 = time = 34
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 150, 1]
type = ChangeAnim
trigger1 = Anim != 50160
value = 150

; Advanced guard sctrls and effects
; ---------------------------------
[State 150, x0]
type = ChangeAnim
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
value = 150
ignorehitpause = 1
persistent = 0

[State 150, xDRT]
type = AssertSpecial
trigger1 = Anim = 150 && var(35)
flag = nocrouchguard

[State 150, x1]
type = PlaySnd
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
value = 6, 1
volume = 255
ignorehitpause = 1
persistent = 0

[State 150, x2]
type = Explod
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
pos = 47,-55
postype = p1
anim = 32005
sprpriority = 5
ownpal = 1
scale = 0.4, 0.4
ignorehitpause = 1
persistent = 0

[State 150, Advanced Guard Helper (Front)]
type = Helper
trigger1 = command = "recovery"
trigger1 = !NumHelper(50000)
trigger1 = !HitShakeOver
trigger1 = !var(35)
stateno = 50000
postype = p1
pos = -25,0
bindtime = 1
name = "Advanced Guard"
size.air.back = 0
size.air.front = 80
ID = 50000

[State 150, Advanced Guard Helper (Back)]
type = Helper
trigger1 = command = "recovery"
trigger1 = !NumHelper(50001)
trigger1 = !HitShakeOver
trigger1 = !var(35)
stateno = 50000
postype = p1
pos = 25,0
bindtime = 1
name = "Advanced Guard"
size.air.back = 80
size.air.front = 0
id = 50001

[State 150, x3]
type = VarSet
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
var(35) = 30
ignorehitpause = 1
persistent = 0

[State 150, x4]
Type = LifeAdd
trigger1 = NumHelper(50000)
value = GetHitVar(Damage)
ignorehitpause = 1
persistent = 0

[State 150, x5]
type = CtrlSet
trigger1 = NumHelper(50000)
value = 0
ignorehitpause = 1
persistent = 0

[State 150, x6]
type = PosFreeze
trigger1 = NumHelper(50000)
value = 1
ignorehitpause = 1
persistent = 0
; ----------------------------------

[State 150, 2]
type = ChangeState
triggerall = !var(35) ;Advanced Guard Over
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 152, 1]
type = ChangeAnim
trigger1 = Anim != 50161
value = 151

; Advanced guard sctrls and effects
; ---------------------------------
[State 150, x0]
type = ChangeAnim
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
value = 151
ignorehitpause = 1
persistent = 0

[State 150, xDRT]
type = AssertSpecial
trigger1 = Anim = 151 && var(35)
flag = nostandguard

[State 150, x1]
type = PlaySnd
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
value = 6, 1
volume = 255
ignorehitpause = 1
persistent = 0

[State 150, x2]
type = Explod
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
pos = 65, -30
postype = p1
anim = 32005
sprpriority = 5
ownpal = 1
scale = 0.4, 0.4
ignorehitpause = 1
persistent = 0

[State 150, Advanced Guard Helper (Front)]
type = Helper
trigger1 = command = "recovery"
trigger1 = !NumHelper(50000)
trigger1 = !HitShakeOver
trigger1 = !var(35)
stateno = 50000
postype = p1
pos = -25,0
bindtime = 1
name = "Advanced Guard"
size.air.back = 0
size.air.front = 80
ID = 50000

[State 150, Advanced Guard Helper (Back)]
type = Helper
trigger1 = command = "recovery"
trigger1 = !NumHelper(50001)
trigger1 = !HitShakeOver
trigger1 = !var(35)
stateno = 50000
postype = p1
pos = 25,0
bindtime = 1
name = "Advanced Guard"
size.air.back = 80
size.air.front = 0
id = 50001

[State 150, x3]
type = VarSet
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
var(35) = 30
ignorehitpause = 1
persistent = 0

[State 150, x4]
Type = LifeAdd
trigger1 = NumHelper(50000)
value = GetHitVar(Damage)
ignorehitpause = 1
persistent = 0

[State 150, x5]
type = CtrlSet
trigger1 = NumHelper(50000)
value = 0
ignorehitpause = 1
persistent = 0

[State 150, x6]
type = PosFreeze
trigger1 = NumHelper(50000)
value = 1
ignorehitpause = 1
persistent = 0
; ----------------------------------

[State 152, 3]
type = ChangeState
triggerall = !var(35) ;Advanced Guard Over
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 154, 1]
type = ChangeAnim
trigger1 = Anim != 50162
value = 152

; Advanced guard sctrls and effects
; ---------------------------------
[State 150, x0]
type = ChangeAnim
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
value = 152
ignorehitpause = 1
persistent = 0

[State 150, xDRT]
type = AssertSpecial
trigger1 = Anim = 152 && var(35)
flag = nocrouchguard

[State 150, x1]
type = PlaySnd
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
value = 6, 1
volume = 255
ignorehitpause = 1
persistent = 0

[State 150, x2]
type = Explod
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
pos = 65, -85
postype = p1
anim = 32005
sprpriority = 5
ownpal = 1
scale = 0.4, 0.4
ignorehitpause = 1
persistent = 0

[State 150, Advanced Guard Helper (Front)]
type = Helper
trigger1 = command = "recovery"
trigger1 = !NumHelper(50000)
trigger1 = !HitShakeOver
trigger1 = !var(35)
stateno = 50000
postype = p1
pos = -25,0
bindtime = 1
name = "Advanced Guard"
size.air.back = 0
size.air.front = 80
ID = 50000

[State 150, Advanced Guard Helper (Back)]
type = Helper
trigger1 = command = "recovery"
trigger1 = !NumHelper(50001)
trigger1 = !HitShakeOver
trigger1 = !var(35)
stateno = 50000
postype = p1
pos = 25,0
bindtime = 1
name = "Advanced Guard"
size.air.back = 80
size.air.front = 0
id = 50001

[State 150, x3]
type = VarSet
trigger1 = command = "recovery"
trigger1 = !HitShakeOver
trigger1 = !var(35)
var(35) = 30
ignorehitpause = 1
persistent = 0

[State 150, x4]
Type = LifeAdd
trigger1 = NumHelper(50000)
value = GetHitVar(Damage)
ignorehitpause = 1
persistent = 0

[State 150, x4]
Type = ChangeState
trigger1 = NumHelper(50000)
value = 156
ignorehitpause = 1
persistent = 0
; ----------------------------------

[State 154, 2]
type = ChangeState
triggerall = !var(35) ;Advanced Guard Over
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT3 (No ctrl, landing after Adv Guard)
[Statedef 156]
type    = U
movetype= I
physics = N
ctrl = 0

[State 150, xA0]
type = PosFreeze
trigger1 = time = [0, 24]
value = 1
ignorehitpause = 1

[State 154, xA1]
type = VelAdd
trigger1 = time >= 25
y = const(movement.yaccel)

[State 154, xA2]
type = ChangeAnim
trigger1 = Time >= 24 && SelfAnimExist(54)
value = 54
elem = 9
persistent = 0

[State 154, xA3]
type = ChangeAnim
trigger1 = Time >= 24 && !SelfAnimExist(54)
value = 41
persistent = 0

[State 156, xA4]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
ctrl = 1

;---------------------------------------------------------------------------
; Win State Decider
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = time = 0
value = 181 + (random % 4)

[State 180, 1]
type = ChangeState
trigger1 = wintime
value = 181

;---------------------------------------------------------------------------
; Winpose #1 - Taunt
[Statedef 181]
type = S
ctrl = 0
anim = 180
VelSet = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = time < 120
flag = roundnotover

[State 181, 2]
type = PlaySnd
trigger1 = AnimElemTime(3) = 10
value = 180,0
volume = 255
volumescale = 255
channel = 0

[State 181, 3]
type = NotHitBy
trigger1 = 1
value = SCA

;-----------------------
; Winpose #2 - Celebrate
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181,1]
type = PlaySnd
trigger1 = (animelemtime(5) = 0) || (animelemtime(18) = 0) || (animelemtime(31) = 0)
value = 181,0
volume = 255
volumescale = 255
channel = 0

[State 181,2]
type = AssertSpecial
trigger1 = time < 320
flag = roundnotover

[State 181,3]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
; Winpose #3 - Playing with food...
[Statedef 183]
type = S
ctrl = 0 + (0*(var(1):=0))
anim = 182
velset = 0,0
sprpriority = 0

[State 183]
type = PlaySnd
trigger1 = AnimElem = 7
volume = 255
volumescale = 255
value = 200,0

[State 183]
type = PlaySnd
trigger1 = (Time % 27) = 0 && AnimElemNo(0) = [11,14]
volume = 255
volumescale = 255
value = 200,0

[State 183]
type = Helper
trigger1 = AnimElem = 4
stateno = 30182
name = "Fruits"
ID = 30182

[State 183]
type = VarSet
trigger1 = Time = 0 || AnimElem = 16
var(1) = 0

[State 183]
type = VarAdd
trigger1 = AnimElem = 15
var(1) = 1

[State 183]
type = ChangeAnim
trigger1 = var(1) < 6 && AnimElem = 15
value = anim
elem = 11

[State 183]
type = VarAdd
trigger1 = AnimElem = 23
var(1) = 1

[State 183]
type = ChangeAnim
trigger1 = var(1) < 3 && AnimElem = 23
value = anim
elem = 19

[State 183]
type = PlaySnd
trigger1 = AnimElem = 27
volume = 255
volumescale = 255
value = 182,0

[State 183]
type = AssertSpecial
trigger1 = Time < 300
flag = roundnotover

;---------------------------------------------------------------------------
; Winpose #4 - Again playing with food?
[Statedef 184]
type = S
ctrl = 0 + (0*(var(1):=0))
anim = 183
velset = 0,0
sprpriority = 0

[State 184]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = (Time % 27) = 0 && AnimElemNo(0) = [11,14]
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 183]
type = Helper
trigger1 = AnimElem = 4
stateno = 30183
name = "Fruits & Surprise"
ID = 30183

[State 184]
type = VarSet
trigger1 = Time = 0 || AnimElem = 16
var(1) = 0

[State 184]
type = VarAdd
trigger1 = AnimElem = 15
var(1) = 1

[State 184]
type = ChangeAnim
trigger1 = var(1) < 6 && AnimElem = 15
value = anim
elem = 11

[State 184]
type = VarAdd
trigger1 = AnimElem = 23
var(1) = 1

[State 184]
type = ChangeAnim
trigger1 = var(1) < 3 && AnimElem = 23
value = anim
elem = 19

[State 184]
type = AssertSpecial
trigger1 = Time < 300
flag = roundnotover

;---------------------------------------------------------------------------
; Intro decider
[Statedef 190]
type = S
ctrl = 0
velSet = 0,0

[State 190, PowerSet]
type = PowerSet
trigger1 = time = 0
value = 1000

[State 190,intro decider]
type = ChangeState
trigger1 = time = 0
value = 192

;----------------------------------------------------------------------
; Intro #1
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, 1]
type = PlaySnd
trigger1 = time = 10
value = 190,0
channel = 0

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-----------------------
; Intro #2
[Statedef 192]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 191, 1]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 2]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 70
value = 190,1
volume = 255
volumescale = 255
channel = 1

[State 191, 3]
type = PlaySnd
trigger1 = time = 106
value = 190,0
volume = 255
volumescale = 255
channel = 0

;----------------------------------------------------

[State 190, SonSon]
type = Explod
trigger1 = time = 0
pos = -160, -80
postype = p1
bindtime = 1
sprpriority = -1
anim = 112
removetime = 100
velocity = 5.5,3
accel = 0.14,-0.32
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))

[State 190, Kame Sennin?]
type = Explod
trigger1 = time = 0
pos = -160, -80
postype = p1
bindtime = 1
sprpriority = 0
anim = 30115
removetime = 100
velocity = 5.5,3
accel = 0.14,-0.32
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))

[State 190, Kintoun Cloud]
type = Explod
trigger1 = time = 0
pos = -160, -75
postype = p1
bindtime = 1
sprpriority = 1
anim = 30112
removetime = 100
velocity = 5.5,3
accel = 0.14,-0.32
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))

[State 190, EX]
type = Explod
trigger1 = time = 0
pos = -160,-80
postype = p1
bindtime = 1
sprpriority = 2
anim = 30117
removetime = 100
velocity = 5.5,3
accel = 0.14,-0.32
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))

;----------------------------------------------------

[State 190, SonSon 2]
type = Explod
trigger1 = time = 60
pos = 338, -259
postype = p1
bindtime = 1
sprpriority = -1
anim = 30191
removetime = 46
velocity = -5,6
accel = -0.08,-0.1
facing = -1
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))

[State 190, Kame Sennin? 2]
type = Explod
trigger1 = time = 60
pos = 320, -235
postype = p1
bindtime = 1
sprpriority = 0
anim = 30115
removetime = 100
velocity = -5,6
accel = -0.08,-0.1
facing = -1
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))

[State 190, Kintoun Cloud 2]
type = Explod
trigger1 = time = 60
pos = 320, -230
postype = p1
bindtime = 1
sprpriority = 1
anim = 30112
removetime = 100
velocity = -5,6
accel = -0.08,-0.1
facing = -1
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))

[State 190, EX 2]
type = Explod
trigger1 = time = 60
pos = 320,-235
postype = p1
bindtime = 1
sprpriority = 2
anim = 30117
removetime = 100
velocity = -5,6
accel = -0.08,-0.1
facing = -1
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))

[State 190]
type = Explod
trigger1 = time = 106
pos = 0,-80
postype = p1
bindtime = 1
sprpriority = 0
anim = 30192
removetime = 35
ownpal = 1
velocity = 0,-7.7
accel = 0,const(movement.yaccel) + 0.02
shadow = -1,0,0
scale = (const(size.xscale)), (const(size.yscale))
facing = -1

;----------------------------------------------------

[State 191, Fix]
type = Turn
trigger1 = AnimElem = 2
trigger2 = animTime = 0

[State 52, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,0

[State 52, Helper]
type = Helper
trigger1 = AnimElem = 2
stateno = 8200

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = animTime = 0
value = 0

;----------------------------------------------------------------------
; Intro #3
[Statedef 193]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 191, 1]
type = PlaySnd
trigger1 = AnimElem = 10
value = 195,0
channel = 0

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0

[State 196, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 195,0
volume = 255
volumescale = 255
channel = 0

[State 196, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;;;;;;;;;;;;;;;;;;; Basic moves state file ;;;;;;;;;;;;;;;;;;;;;;;
;-----------------------------------------------------------------

;---------------------------------------------------------------------------
; Stand Light Punch
[StateDef 200]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 200
poweradd = 14
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemTime(2) = 1
value = 0, 3
volume = 80
channel = 1

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 15,0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 6,8
guard.pausetime = 5,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
guard.pausetime = 8,8
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium punch
[Statedef 220]
type    = S
movetype= A
physics = S
poweradd= 42
ctrl = 0
anim = 210
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 210, 1]
type = PlaySnd
trigger1 = AnimElemTime(2) = 1
value = 200, 0
volume = 255
volumescale = 255
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
value = 0, 4
volume = 80
channel = 1

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage   = 25,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,11
guard.pausetime = 6,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = S5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -8.8,0
guard.velocity = -8.8
air.velocity = -8,-2
ground.cornerpush.veloff = -6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 221

;---------------------------------------------------------------------------
; Standing Medium punch
[Statedef 221]
type    = S
movetype= A
physics = S
poweradd= 42
ctrl = 0
anim = 211
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 210, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 4
volume = 80
channel = 1

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage   = 25,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,8
guard.pausetime = 5,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -7.8,0
guard.velocity = -7.8
ground.cornerpush.veloff = -9
air.velocity = -8,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong punch
[Statedef 240]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 220 + (5 * (command = "holdfwd"))
poweradd = 56
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 220, 1]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 220, 0
volume = 255
volumescale = 255
channel = 0

[State 220, 1]
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 0, 5
volume = 80
channel = 1

[State 220, 1]
type = PlaySnd
trigger1 = Anim = 220 && AnimElemTime(5) = 0
value = 8, 0
volume = 255
volumescale = 255
channel = 2

[State 220]
type = Helper
trigger1 = Anim = 220 && AnimElem = 5
stateno = 30220
name = "Dust 1"
ID = 30220

[State 220]
type = Helper
trigger1 = Anim = 220 && AnimElem = 5
stateno = 30220
name = "Dust 2"
ID = 30221

[State 220, 2]
type = HitDef
trigger1 = Anim = 220 && AnimElem = 5
attr = S, NA
animtype  = Hard
damage    = 65,0
priority = 3, Hit
hitflag = MAFD
guardflag = MA
pausetime = 6,10
guard.pausetime = 6,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .88
ground.velocity = -14,0
guard.velocity = -14
air.velocity = -10,-2
airguard.velocity = -10.5,3
ground.cornerpush.veloff = -11
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 240, 3]
type = HitDef
trigger1 = Anim = 225 && AnimElem = 6
attr = S, NA
animtype  = Hard
damage    = 65,0
priority = 3, Hit
hitflag = MAF
guardflag = MAF
pausetime = 9,15
guard.pausetime = 10,15
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = S5,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 2
yaccel = .96
ground.velocity = -11,-8
guard.velocity = -16
air.velocity = -13,-7
airguard.velocity = -10.5,3
ground.cornerpush.veloff = -11
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 2+4

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Light Kick A
[Statedef 210]
type    = S
movetype= A
physics = S
poweradd= 14
ctrl = 0
anim = 230
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElemTime(2) = 2
value = 0, 4
volume = 80
channel = 1

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 230, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage   = 15,0
animtype = Light
priority = 3, Hit
hitflag = MAFD
guardflag = MA
pausetime = 6,8
guard.pausetime = 5,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
guard.pausetime = 8,8
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Medium Kick B
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd= 42
ctrl = 0
anim = 240
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 240, 1]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 220, 0
volume = 255
volumescale = 255
channel = 0

[State 240, 1]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 0, 4
volume = 80
channel = 1

[State 240, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage   = 20,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 6,11
guard.pausetime = 6,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = S5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -8.8,0
guard.velocity = -8.8
air.velocity = -8,-2
ground.cornerpush.veloff = -6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 231

;---------------------------------------------------------------------------
; Stand Medium Kick B
[Statedef 231]
type    = S
movetype= A
physics = S
poweradd= 42
ctrl = 0
anim = 241
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 0, 4
volume = 80
channel = 1

[State 240, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage   = 20,0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 6,8
guard.pausetime = 5,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -7.8,0
guard.velocity = -7.8
ground.cornerpush.veloff = -9
air.velocity = -8,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Hard Kick C
[Statedef 250]
type    = S
movetype= A
physics = S
poweradd = 56
ctrl = 0
anim = 250
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 0, Width]
type = Width
trigger1 = AnimElemTime(3) >= 1
player = 25,0
ignorehitpause = 1

[State ARA, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = (50 * const(size.xscale))
ignorehitpause = 1

[State ARB, PosAdd]
type = PosAdd
trigger1 = AnimElem = 13
x = -(50 * const(size.xscale))
ignorehitpause = 1

[State 250, 1]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = 200, 0
volume = 255
volumescale = 255
channel = 0

[State 250, 1]
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
value = 0, 5
volume = 80
channel = 1

[State 250, 1]
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 250, 0
volume = 175
volumescale = 175
channel = 2

[State 250, 2]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
animtype  = Hard
damage    = 65,0
priority = 3, Hit
hitflag = MAF
guardflag = MA
pausetime = 10,15
guard.pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 2
yaccel = .96
ground.velocity = -11,-8
guard.velocity = -15
air.velocity = -13,-7
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Light Punch X
[Statedef 400]
type    = C
movetype= A
physics = C
poweradd= 14
ctrl = 0
anim = 400
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 400, swoosh]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,3
volume = 50
channel = 1

[State 400, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 15,0
priority = 3, Hit
animtype  = Light
hitflag = MAFD
guardflag = MA
pausetime = 6,8
guard.pausetime = 5,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
guard.pausetime = 8,8
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
guard.velocity = -5.5
down.velocity = -6,-7
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching Medium punch
[Statedef 420]
type    = C
movetype= A
physics = C
poweradd= 42
ctrl = 0
anim = 410
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 410, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 4
volume = 50
channel = 1

[State 410, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = medium
damage    = 24,0
priority = 3, Hit
guardflag = MA
hitflag = MAFD
pausetime = 4,6
guard.pausetime = 2,4
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-25
guard.pausetime = 8,8
hitsound = S5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-7
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crounch strong punch
[Statedef 440]
type    = C
movetype= A
physics = C
poweradd= 65
ctrl = 0
anim = 420
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 420]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 420]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0,5
volume = 50
channel = 1

[State 450, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = C, NA
animtype  = Hard
damage    = 50,0
priority = 3, Hit
guardflag = LA
hitflag = MAFD
pausetime = 10,11
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = S5,2
guardsound = S6,0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 20
air.hittime = 12
guard.hittime = 17
yaccel = .68
ground.velocity = 0,-4
guard.velocity = -14
ground.cornerpush.veloff = 0
air.velocity = 0,-4
guard.velocity = -10
airguard.velocity = -10.5,3
down.velocity = -6,-7
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 10
id = 4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crounch strong punch
[Statedef 445]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0 + (0*(var(36):=1))
anim = 425
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 420]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,5
volume = 50
channel = 1

[State 420, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
animtype = Up
damage    = 57,0
guardflag = MA
pausetime = 9,10
guard.pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 25
guard.hittime = 17
yaccel = 1.17
ground.velocity = -2.3,-21
guard.velocity = -15
guard.cornerpush.veloff = -20
ground.cornerpush.veloff = 0
air.velocity = -2.3,-21
guard.velocity = -10
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Launcher Spark]
type = Explod
trigger1 = MoveHit
anim = 8020
pos = 50, -60
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 1.1,1.0
ownpal = 1

[State 420, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Light Kick A
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd= 14
ctrl = 0
anim = 430
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 430]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,3
volume = 50
channel = 1

[State 430, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = light
damage    = 15,0
priority = 3, Hit
hitflag = MAFD
guardflag = LA
pausetime = 6,8
guard.pausetime = 5,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
guard.pausetime = 8,8
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
guard.velocity = -5.5
down.velocity = -6,-7
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd= 42
ctrl = 0
anim = 440
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 440, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 4
volume = 50
channel = 1

[State 440, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage    = 24,0
priority = 3, Hit
guardflag = LA
hitflag = MAF
animtype = Up
air.animtype = Up
getpower = 50,0
givepower = 20,0
pausetime = 7,8
guard.pausetime = 6,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 12
guard.hittime = 17
yaccel = .99
ground.velocity = 0,-9
guard.velocity = -11
guard.cornerpush.veloff = -12
ground.cornerpush.veloff = 0
air.velocity = 0,-9.4
guard.velocity = -10
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crounch strong punch
[Statedef 450]
type    = C
movetype= A
physics = C
poweradd= 65
ctrl = 0 + (0*(var(36):=1))
anim = 450
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State 420, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220, 0
volume = 255
volumescale = 255
channel = 0

[State 420, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5
volume = 50
channel = 1

[State 420, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
animtype = Up
damage    = 57,0
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 9,10
guard.pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 25
guard.hittime = 17
yaccel = 1.17
ground.velocity = -2.3,-21
guard.velocity = -15
guard.cornerpush.veloff = -20
ground.cornerpush.veloff = 0
air.velocity = -2.3,-21
guard.velocity = -10
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Launcher Spark]
type = Explod
trigger1 = MoveHit
anim = 8020
pos = 50, -60
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 1.1,1.0
ownpal = 1

[State 420, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Air Light Punch X
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 600, swoosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3
volume = 50
channel = 1

[State 91, VelAdd]
type = VelAdd
triggerall = var(50)
triggerall = movecontact
trigger1 = time = 0
y= -0.71

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 600, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Light
damage = 15,0
getpower = 20,0
givepower = 20,0
pausetime = 7,8
guard.pausetime = 6,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-7
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-10.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 600
triggerall = floor (pos Y < -155)
trigger1 = animelem = 5
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; Air Medium Punch Y
[Statedef 620]
type    = A
movetype= A
physics = A
poweradd= 42
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 2]
type = PlaySnd
trigger1 = AnimELem = 2
value = 0, 4
volume = 50
channel = 1

[State 91, VelAdd]
type = VelAdd
triggerall = var(50)
trigger1 = time = 0
y= -1.21

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,650)
trigger1 = target,statetype = A
var(46) = 1

[State 610, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Medium
air.animtype = up
damage = 25,0
getpower = 30,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 16
air.hittime = 12
yaccel = 1.19
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-8.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 610
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; Air Hard Punch
[Statedef 640]
type    = A
movetype= A
physics = A
poweradd= 56
ctrl = 0
anim = 620
sprpriority = 2

[State 620, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5
volume = 50
channel = 1

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 620]
type = Helper
trigger1 = AnimElem = 4
stateno = 30620
name = "Rotating Pole Helper"
ID = 30620

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(46)
trigger1 = var(21) > 1 && var(19) > 0
var(46) = 1

[State 620, 3]
type = HitDef
trigger1 = !var(46) && AnimElem = 4
damage = 30,0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Back
air.animtype = back
priority = 3, Hit
pausetime = 4,5
guard.pausetime = 4,5 
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 12
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -11,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, 3]
type = HitDef
trigger1 = var(46) && AnimElem = 4
damage = 30,0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Back
air.animtype = back
priority = 3, Hit
pausetime = 4,5
guard.pausetime = 4,5 
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 12
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -11,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 641

;---------------------------------------------------------------------------
; Air Hard Punch
[Statedef 641]
type    = A
movetype= A
physics = A
poweradd= 56
ctrl = 0
anim = 621
sprpriority = 2

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(46)
trigger1 = var(21) > 1 && var(19) > 0
var(46) = 1

[State 620]
type = Helper
trigger1 = AnimElem = 1
stateno = 30621
name = "Rotating Pole Helper"
ID = 30620

[State 620, 3]
type = HitDef
trigger1 = !var(46) && AnimElem = 1
damage = 30,0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Back
air.animtype = back
priority = 3, Hit
pausetime = 4,5
guard.pausetime = 4,5 
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 12
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -11,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, 3]
type = HitDef
trigger1 = var(46) && AnimElem = 1
damage = 30,0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Back
air.animtype = back
priority = 3, Hit
pausetime = 4,5
guard.pausetime = 4,5 
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 12
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -11,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 642

;---------------------------------------------------------------------------
; Air Hard Punch
[Statedef 642]
type    = A
movetype= A
physics = A
poweradd= 56
ctrl = 0
anim = 622
sprpriority = 2

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(46)
trigger1 = var(21) > 1 && var(19) > 0
var(46) = 1

[State 620]
type = Helper
trigger1 = AnimElem = 1
stateno = 30622
name = "Rotating Pole Helper"
ID = 30620

[State 620, 3]
type = HitDef
trigger1 = !var(46) && AnimElem = 1
damage = 30,0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Back
air.animtype = back
priority = 3, Hit
pausetime = 4,5
guard.pausetime = 4,5 
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 12
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -11,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, 3]
type = HitDef
trigger1 = var(46) && AnimElem = 1
damage = 30,0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Back
air.animtype = back
priority = 3, Hit
pausetime = 4,5
guard.pausetime = 4,5 
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 12
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -11,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 622
triggerall = floor (pos Y < -155)
trigger1 = animelem = 4
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; Air Light Kick A
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 14
ctrl = 0
anim = 630
sprpriority = 2

[State 600, swoosh]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3
volume = 50
channel = 1

[State 91, VelAdd]
type = VelAdd
triggerall = var(50)
triggerall = movecontact
trigger1 = time = 0
y= -0.71

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,650)
trigger1 = target,statetype = A
var(46) = 1

[State 630, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Light
damage = 15,0
getpower = 20,0
givepower = 20,0
pausetime = 7,8
guard.pausetime = 6,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-7
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-10.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 630
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; Air Medium Kick B
[Statedef 630]
type    = A
movetype= A
physics = A
poweradd= 42
ctrl = 0
anim = 640
sprpriority = 2

[State 610, 2]
type = PlaySnd
trigger1 = AnimELem = 2
value = 0, 4
volume = 50
channel = 1

[State 91, VelAdd]
type = VelAdd
triggerall = var(50)
trigger1 = time = 0
y= -1.71

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,650)
trigger1 = target,statetype = A
var(46) = 1

[State 640, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Medium
air.animtype = up
damage = 25,0
getpower = 30,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 16
air.hittime = 12
yaccel = 1.19
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-8.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 640
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; Air Hard Kick C
[Statedef 650]
type    = A
movetype = A
physics = A
poweradd = 56
ctrl = 0
anim = 650
sprpriority = 2

[State 620, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5
volume = 50
channel = 1

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(46)
trigger1 = var(21) > 1 && var(19) > 0
var(46) = 1

[State 650, 3]
type = HitDef
trigger1 = !var(46) && AnimElem = 5
damage = 30,0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Back
air.animtype = back
priority = 3, Hit
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 12
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -9,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, 3]
type = HitDef
trigger1 = var(46) && AnimElem = 5
damage = 30,0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Back
air.animtype = back
priority = 3, Hit
pausetime = 9,8
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 12
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -9,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 650
triggerall = floor (pos Y < -155)
trigger1 = animelem = 7
value = 1221
ctrl = 1


; Oo 
[Statedef 710]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(44) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100

;---------------------------------------------------------------------------
; Throw atempt
[Statedef 800]
type    = S
movetype = A
physics = S
anim = 800
ctrl = 0 + (0*(var(10):=0))
sprpriority = 2

[State 800, B-FIX]
type = VarSet
trigger1 = !time && (command = "c" && command != "z")
var(10) = 1

[State 800]
type = HitDef
trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = -1
p1sprpriority = 0
p1facing = ifelse((!var(10)), 1, ifelse((command = "holdback"), 1, -1))
p2facing = 1
p1stateno = 810 + (40 * (var(10)))
p2stateno = 830 + (40 * (var(10)))
guard.dist = 0
fall = 1
fall.recover = 0
fall.yvelocity = 0
hitsound = S5,4
yaccel = (enemynear, const(movement.yaccel)) + 0.2
ID = 800 + (50 * var(10))

[State 800, 2]
type = ChangeState
trigger1 = time >= 1
trigger1 = command = "holdz"
value = 240

[State 800, 3]
type = ChangeState
trigger1 = time >= 1
trigger1 = command = "holdc"
value = 250

[State 800, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 60
velset = 0,0
ctrl = 0
sprpriority = -1

[State 810, Cancel]
type = ChangeState
triggerall = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
trigger1 = P2StateNo != [830, 831]
value = 998

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Width]
type = Width
trigger1 = AnimElemNo(0) = 1
edge = 64,0

[State 810]
type = ScreenBound
trigger1 = AnimElemNo(0) < 16
value = 1
movecamera = 1,0

[State 810]
type = TargetBind
trigger1 = AnimElemNo(0) = 1
pos = (Target(800), const(size.head.pos.x)) + ifelse(((Target(800), const(size.head.pos.y)) > -55), 38, 60),0
ID = 800

[State 810]
type = BindToTarget
trigger1 = AnimElemNo(0) = 2
pos = 54,-20,Head
ID = 800

[State 810]
type = BindToTarget
trigger1 = AnimElemNo(0) = [3,16]
pos = -3,-13,Head
ID = 800

[State 810, SprPriority]
type = SprPriority
trigger1 = AnimElemNo(0) = 3
value = 0

[State 810, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 10
trigger3 = AnimElem = 15
anim = 8001
postype = p1
pos = Floor(P2Dist X + 15), Floor(P2Dist Y  + (Target(800), const(size.head.pos.y)))
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 810]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 10
trigger3 = AnimElem = 15
value = 5,22

[state 810]
type = Explod
trigger1 = AnimElem = 15
anim = 30810
ID = 30810
sprpriority = 1
removeongethit = 1

[State 810, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 10
trigger3 = AnimElem = 15
value = -(ifelse(AnimElemNo(0) < 15, 25, 50))
ID = 800
kill = (AnimElemNo(0) = 15)

[State 810, TargetState]
type = TargetState
trigger1 = AnimElem = 16
value = 831
ID = 800

[State 810, TargetDrop]
type = TargetDrop
trigger1 = AnimElem = 16

[State 810, PosAdd]
type = PosAdd
trigger1 = AnimElem = 16
x = -36
y = 65

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(16) >= 0
y = const(movement.yaccel) + 0.1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 16
x = 4
y = -5

[State 810, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 811

;---------------------------------------------------------------------------
; Throw End
[Statedef 811]
type    = A
movetype = I
physics = N
ctrl = 0
anim = 60
sprpriority = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel) + 0.1

[State 813]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
;Thrown (P2 State)
[Statedef 830]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 0

;------------------------
[State SYS-TH, Tech Hit]
type = ChangeState
triggerall = Time = [2,8]
triggerall = command = "holdfwd" || command = "holdback"
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
value = 999
;------------------------

[State 830]
type = ChangeAnim2
trigger1 = Time = 0
value = 830

[State 820]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 820]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Thrown (P2 State)
[Statedef 831]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 0

[State 830]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(SelfAnimExist(5060), 5060, 5050)

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -4
y = 10

;-----------------------------------------------------------

[State 5100, Var]
type = VarSet
trigger1 = Time = 0
SysFVar(0) = vel y

[state 832, 8]
type = envshake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4

[State 9002, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5110

;---------------------------------------------------------------------------
; Throw 2
[Statedef 850]
type    = S
movetype= A
physics = N
anim = 850
poweradd = 60
velset = 0,0
ctrl = 0
sprpriority = 0

[State 810, Cancel]
type = ChangeState
triggerall = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
trigger1 = P2StateNo != [870, 871]
value = 998

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 840]
type = TargetBind
trigger1 = AnimElemNo(0) = [1,2]
pos = 72,-62
ID = 850

[State 840]
type = TargetBind
trigger1 = AnimElemNo(0) = 3
pos = 10,-108
ID = 850

[State 840]
type = TargetBind
trigger1 = AnimElemNo(0) = 4
pos = -50,-145
ID = 850

[State 840]
type = TargetBind
trigger1 = AnimElemNo(0) = 5
pos = -65,-160
ID = 850

[State 850, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -95
ID = 850

[State 840]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0
volume = 255
volumescale = 255

[State 840, TargetState]
type = TargetState
trigger1 = AnimElem = 4
value = 871
ID = 850

[State 840, TargetDrop]
type = TargetDrop
trigger1 = AnimElem = 6

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Thrown (P2 State)
[Statedef 870]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 0

;------------------------
[State SYS-TH, Tech Hit]
type = ChangeState
triggerall = Time = [2,8]
triggerall = command = "holdfwd" || command = "holdback"
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
value = 999
;------------------------

[State 830]
type = ChangeAnim2
trigger1 = Time = 0
value = 870

[State 820]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 820, AngleDraw]
type = AngleDraw
trigger1 = Time = [16,19]
value = -90

[State 820]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Thrown (P2 State)
[Statedef 871]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 0

[State 820]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, Turn]
type = Turn
trigger1 = time = 0

[State 830]
type = ChangeAnim
trigger1 = !GetHitVar(IsBound)
value = ifelse(SelfAnimExist(5035), 5035, 5030)
persistent = 0

[State 830]
type = ChangeAnim
trigger1 = (Anim = [5030,5035]) && AnimTime = 0
value = 5050
persistent = 0

[State 830]
type = ChangeAnim
trigger1 = (Anim = 5050) && AnimTime = 0 && SelfAnimExist(5060)
value = 5060
persistent = 0

[State 820, VelAdd]
type = VelAdd
trigger1 = !GetHitVar(IsBound)
y = GetHitVar(yaccel)

[State 820, Vel]
type = VelSet
trigger1 = !GetHitVar(IsBound)
x = -7.7
y = -4.6
persistent = 0

;-----------------------------------------------------------

[State 5100, Var]
type = VarSet
trigger1 = Time = 0
SysFVar(0) = vel y

[state 832, 8]
type = envshake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4

[State 9002, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5110

;---------------------------------------------------------------------------
; Air Throw - Attempt
[Statedef 900]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 900

[State 920]
type = HitDef
trigger1 = time = 0
attr = A, NT
hitflag = AF
priority = 1, Miss
sparkno = -1
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 910
p2stateno = 930
guard.dist = 0
hitsound = S5,4
fall = 1
fall.recover = 0
fall.yvelocity = 0
yaccel = (enemynear, const(movement.yaccel)) + 0.2
ID = 900

[State 800, 2]
type = ChangeState
trigger1 = time >= 1
trigger1 = command = "holdy"
value = 620

[State 1130, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = var(33)

;---------------------------------------------------------------------------
; Air Throw
[Statedef 910]
type    = A
movetype= A
physics = N
anim = 910
poweradd = 60
velset = 0,0
ctrl = 0
sprpriority = 0

[State 810, Cancel]
type = ChangeState
triggerall = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
trigger1 = P2StateNo != [930, 931]
value = 998

[State 930]
type = ScreenBound
trigger1 = AnimElemNo(0) < 8
value = 0
movecamera = 1,0

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(5*const(size.xscale)),ceil(-5*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 930]
type = BindToTarget
trigger1 = AnimElemNo(0) = [1,8]
pos = -3,-13,Head

[State 930]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,0
volume = 255
volumescale = 255

[State 930]
type = PlaySnd
trigger1 = AnimElem = 7
value = 5,22

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = AnimElem = 7
anim = 8001
postype = p1
pos = Floor(P2Dist X + 15), Floor(P2Dist Y  + (Target(900), const(size.head.pos.y)))
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 930]
type = Explod
trigger1 = AnimElem = 7
anim = 30810
sprpriority = 2
removeongethit = 1

[State 930]
type = TargetLifeAdd
trigger1 = AnimElem = 7
value = -100
ID = 900

[State 930]
type = TargetState
trigger1 = AnimElem = 8
value = 931
ID = 900

[State 810, TargetDrop]
type = TargetDrop
trigger1 = AnimElem = 8

[State 810, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
x = -36
y = 65

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(8) >= 0
y = const(movement.yaccel) + 0.1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 3.5
y = -5

[State 930]
type = ChangeState
trigger1 = AnimTime = 0
value = 811

;---------------------------------------------------------------------------
;Thrown (P2 State)
[Statedef 930]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 0

;------------------------
[State SYS-TH, Tech Hit]
type = ChangeState
triggerall = Time = [2,8]
triggerall = command = "holdfwd" || command = "holdback"
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
value = 999
;------------------------

[State 830]
type = ChangeAnim2
trigger1 = Time = 0
value = 830

[State 820]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 820]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Thrown (P2 State)
[Statedef 931]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 0

[State 830]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(SelfAnimExist(5060), 5060, 5050)

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -9
y = 15

;-----------------------------------------------------------

[State 5100, Var]
type = VarSet
trigger1 = Time = 0
SysFVar(0) = vel y

[state 832, 8]
type = envshake
trigger1 = pos y >= 0 && vel y > 0 
time = 15
freq = 70
ampl = -4

[State 9002, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5110


;---------------------------------------------------------------------------
;Tech Hit (P1 State)
[Statedef 998]
type    = U
movetype= I
physics = N
velset = 0, 0
ctrl = 0

[State 998, TR-F]
type = Turn
trigger1 = P2Dist X < 0
trigger1 = time = 0

[State 998, 1]
type = PosFreeze
trigger1 = StateType = A
trigger1 = time = [0,4]
value = 1

[State 998, 2]
type = VelAdd
Trigger1 = StateType = A
y = const(movement.yaccel)

[State 998, 3]
type = ChangeAnim
trigger1 = time = 0
value = 0 + (44 * StateType = A)

[State 998, 4a]
type = ChangeState
trigger1 = StateType = A && time > 4
value = 50
ctrl = var(33)

[State 998, 4b]
type = ChangeState
trigger1 = StateType != A && time > 4
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Tech Hit (P2 State)
[Statedef 999]
type    = A
movetype= H
physics = N
velset = -4, -4
ctrl = 0

;[State 823, Sound]
;type = PlaySnd
;trigger1 = time = 0
;value = 32100, 40
;channel = 4

;[State 823, Explod]
;type = Explod
;trigger1 = TeamSide = 1
;trigger1 = time = 0
;anim = 32140
;ID = 32140
;pos = 0, 80
;postype = left
;removetime = 60
;supermovetime = 500
;pausemovetime = 500
;scale = 0.5, 0.5
;bindtime = -1
;ontop = 1
;ownpal = 1
;ignorehitpause = 1

;[State 823, Explod]
;type = Explod
;trigger1 = TeamSide = 2
;trigger1 = time = 0
;anim = 32141
;ID = 32140
;pos = -1, 80
;postype = right
;removetime = 60
;supermovetime = 500
;pausemovetime = 500
;scale = 0.5, 0.5
;bindtime = -1
;ontop = 1
;ownpal = 1
;ignorehitpause = 1

[State 821, 1]
type = VelAdd
Trigger1 = 1
y = const(movement.yaccel)

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = 1
value = 5040

;;;;;;;;;;;;;;;;;;; Super moves state file ;;;;;;;;;;;;;;;;;;;;;;;
;-----------------------------------------------------------------

;---------------------------------------------------------------------------
;Seiten Rengeki X
[Statedef 1000]
type    = U
movetype= A
physics = N
poweradd = 60
ctrl = 0 + (0*(var(1):=0))
velset = 0,0
anim = 1000 + (10 * StateType = A)
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = Anim = 1000 && time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = Anim = 1000 && time = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
triggerall = Anim = 1000
trigger1 = time = 0
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State G-RH, WF]
type = Width
trigger1 = Anim = 1000 && AnimElemNo(0) = [2,3]
trigger2 = Anim = 1010 && AnimElemNo(0) = [4,7]
value = 15,0

[State 1000, 1]
type = PlaySnd
trigger1 = Anim = 1000 && AnimElem = 1
trigger2 = Anim = 1010 && AnimElem = 3
value = 1000,0
volume = 255
volumescale = 255
channel = 0

[State 1000, 2]
type = PlaySnd
trigger1 = (Time % 7) = 0 && Anim = 1000 && AnimElemNo(0) = [3,16]
trigger2 = (Time % 7) = 0 && Anim = 1010 && AnimElemNo(0) = [5,19]
value = 0,5
volume = 50
channel = 1

[State 1000, 3a]
type = HitDef
triggerall = Anim = 1000 && HitCount < 2 && var(1) != -1
trigger1 = AnimElemTime(4) = 0
trigger2 = AnimElemTime(5) = 0
trigger3 = AnimElemTime(6) = 0
trigger4 = AnimElemTime(7) = 0
trigger5 = AnimElemTime(8) = 0
trigger6 = AnimElemTime(9) = 0
trigger7 = AnimElemTime(10) = 0
trigger8 = AnimElemTime(11) = 0
trigger9 = AnimElemTime(12) = 0
trigger10 = AnimElemTime(13) = 0
trigger11 = AnimElemTime(14) = 0
trigger12 = AnimElemTime(15) = 0
trigger13 = AnimElemTime(16) = 0
attr = S, SA
guardflag = MA
hitflag = MAFD
damage = 45,5
animtype = Up
priority  = 4, Hit
pausetime = 8,8
guard.sparkno = s8050
sparkxy = -10,-70
hitsound   = S5,3
guardsound = S6,0
sparkno = s9999
ground.type = High
air.type = Low
ground.slidetime = 25
down.velocity = -3,-13
ground.hittime  =15
air.hittime = 24
ground.velocity = 0,-11
air.velocity = -4, -18
guard.velocity = -9
airguard.velocity = -10.5,3
yaccel =  .94
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -11
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ID = 1+4

[State 1000, 3b]
type = HitDef
triggerall = Anim = 1010 && HitCount < 2 && var(1) != -1
trigger1 = AnimElemTime(7) = 0
trigger2 = AnimElemTime(8) = 0
trigger3 = AnimElemTime(9) = 0
trigger4 = AnimElemTime(10) = 0
trigger5 = AnimElemTime(11) = 0
trigger6 = AnimElemTime(12) = 0
trigger7 = AnimElemTime(13) = 0
trigger8 = AnimElemTime(14) = 0
trigger9 = AnimElemTime(15) = 0
trigger10 = AnimElemTime(16) = 0
trigger11 = AnimElemTime(17) = 0
trigger12 = AnimElemTime(18) = 0
trigger13 = AnimElemTime(19) = 0
trigger14 = AnimElemTime(20) = 0
attr = A, SA
guardflag = MA
hitflag = MAFD
damage = 45,5
animtype = Up
priority  = 4, Hit
pausetime = 8,8
guard.sparkno = s8050
sparkxy = -10,-70
hitsound   = S5,3
guardsound = S6,0
sparkno = s9999
ground.type = High
air.type = Low
ground.slidetime = 25
ground.hittime  = 15
air.hittime = 19
ground.velocity = -1,-11
down.velocity = -6,-7
air.velocity = -4, -10
guard.velocity = -9
airguard.velocity = -10.5,3
yaccel =  1.28
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -11
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ID = 1+4

[State 1000, MVFIX]
type = VarSet
trigger1 = MoveGuarded
var(1) = -1
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1000, 4]
type = PosAdd
trigger1 = Anim = 1000 && AnimElem = 4
trigger2 = Anim = 1010 && AnimElem = 6
x = 50 * (const(size.xscale))
ignorehitpause = 1

[State 1000, 6]
type = VelAdd
trigger1 = Anim = 1000 && AnimElemTime(4) >= 0
y = const(movement.yaccel) - -0.2

[State 1000, 6]
type = VelAdd
trigger1 = Anim = 1010 && AnimElemTime(7) >= 0
y = const(movement.yaccel) - -0.3

[State 1000, 7]
type = VelSet
trigger1 = Anim = 1000 && AnimElem = 4
x = 2 * (const(size.xscale))
y = -14 * (const(size.yscale))

[State 1000, 7]
type = VelSet
trigger1 = Anim = 1010 && AnimElem = 7
x = 2 * (const(size.xscale))
y = -10 * (const(size.yscale))

[State 1000, 8]
type = StateTypeSet
trigger1 = StateType != A && Anim = 1000 && AnimElemTime(3) = 1
statetype = A
ignorehitpause = 1

[State 1000, 9]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1000, PosFreeze]
type = PosFreeze
trigger1 = Anim = 1000 && AnimElemNo(0) >= 18 && AnimTime && Pos Y = [-2,-1]
value = 1

[State 1000, 10]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = Vel Y > 0 && Pos Y >= 0
value = 1015
ctrl = 0

;---------------------------------------------------------------------------
;Seiten Rengeki Y
[Statedef 1010]
type    = U
movetype= A
physics = N
poweradd = 60
ctrl = 0 + (0*(var(1):=0))
velset = 0,0
anim = 1000 + (10 * StateType = A)
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = Anim = 1000 && time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = Anim = 1000 && time = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
triggerall = Anim = 1000
trigger1 = time = 0
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State G-RH, WF]
type = Width
trigger1 = Anim = 1000 && AnimElemNo(0) = [2,3]
trigger2 = Anim = 1010 && AnimElemNo(0) = [4,7]
value = 20,0

[State 1000, 1]
type = PlaySnd
trigger1 = Anim = 1000 && AnimElem = 1
trigger2 = Anim = 1010 && AnimElem = 3
value = 1000,0
volume = 255
volumescale = 255
channel = 0

[State 1000, 2]
type = PlaySnd
trigger1 = (Time % 7) = 0 && Anim = 1000 && AnimElemNo(0) = [3,16]
trigger2 = (Time % 7) = 0 && Anim = 1010 && AnimElemNo(0) = [5,19]
value = 0,5
volume = 50
channel = 1

[State 1000, 3a]
type = HitDef
triggerall = Anim = 1000 && HitCount < 3 && var(1) != -1
trigger1 = AnimElemTime(4) = 0
trigger2 = AnimElemTime(5) = 0
trigger3 = AnimElemTime(6) = 0
trigger4 = AnimElemTime(7) = 0
trigger5 = AnimElemTime(8) = 0
trigger6 = AnimElemTime(9) = 0
trigger7 = AnimElemTime(10) = 0
trigger8 = AnimElemTime(11) = 0
trigger9 = AnimElemTime(12) = 0
trigger10 = AnimElemTime(13) = 0
trigger11 = AnimElemTime(14) = 0
trigger12 = AnimElemTime(15) = 0
trigger13 = AnimElemTime(16) = 0
attr = S, SA
guardflag = MA
hitflag = MAFD
damage = 32,5
animtype = Up
priority  = 4, Hit
pausetime = 8,8
guard.sparkno = s8050
down.velocity = -3,-13
sparkxy = -10,-70
hitsound   = S5,3
guardsound = S6,0
sparkno = s9999
ground.type = High
air.type = Low
ground.slidetime = 25
ground.hittime  =15
air.hittime = 24
ground.velocity = 0,-17
air.velocity = -4, -25
guard.velocity = -9
airguard.velocity = -10.5,3
yaccel =  .94
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -11
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ID = 1+4

[State 1000, 3b]
type = HitDef
triggerall = Anim = 1010 && HitCount < 3 && var(1) != -1
trigger1 = AnimElemTime(7) = 0
trigger2 = AnimElemTime(8) = 0
trigger3 = AnimElemTime(9) = 0
trigger4 = AnimElemTime(10) = 0
trigger5 = AnimElemTime(11) = 0
trigger6 = AnimElemTime(12) = 0
trigger7 = AnimElemTime(13) = 0
trigger8 = AnimElemTime(14) = 0
trigger9 = AnimElemTime(15) = 0
trigger10 = AnimElemTime(16) = 0
trigger11 = AnimElemTime(17) = 0
trigger12 = AnimElemTime(18) = 0
trigger13 = AnimElemTime(19) = 0
trigger14 = AnimElemTime(20) = 0
attr = A, SA
guardflag = MA
hitflag = MAFD
damage = 32,5
animtype = Up
priority  = 4, Hit
pausetime = 8,8
guard.sparkno = s8050
down.velocity = -6,-7
sparkxy = -10,-70
hitsound   = S5,3
guardsound = S6,0
sparkno = s9999
ground.type = High
air.type = Low
ground.slidetime = 25
ground.hittime  =15
air.hittime = 19
ground.velocity = -1,-11
air.velocity = -4, -13
guard.velocity = -9
airguard.velocity = -10.5,3
yaccel =  1.28
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -11
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ID = 1+4

[State 1010, MVFIX]
type = VarSet
trigger1 = MoveGuarded
var(1) = -1
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1000, 4]
type = PosAdd
trigger1 = Anim = 1000 && AnimElem = 4
trigger2 = Anim = 1010 && AnimElem = 6
x = 55 * (const(size.xscale))
ignorehitpause = 1

[State 1000, 6]
type = VelAdd
trigger1 = Anim = 1000 && AnimElemTime(6) >= 0
y = const(movement.yaccel) - -0.2

[State 1000, 7]
type = VelSet
trigger1 = Anim = 1000 && AnimElem = 4
x = 3 * (const(size.xscale))
y = -17 * (const(size.yscale))

[State 1000, 6]
type = VelAdd
trigger1 = Anim = 1010 && AnimElemTime(7) >= 0
y = const(movement.yaccel) - -0.3

[State 1000, 7]
type = VelSet
trigger1 = Anim = 1010 && AnimElem = 7
x = 2 * (const(size.xscale))
y = -16.7 * (const(size.yscale))

[State 1000, 8]
type = StateTypeSet
trigger1 = StateType != A && Anim = 1000 && AnimElemTime(3) = 1
statetype = A
ignorehitpause = 1

[State 1000, 9]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1000, PosFreeze]
type = PosFreeze
trigger1 = Anim = 1000 && AnimElemNo(0) >= 19 && AnimTime && Pos Y = [-10,-1]
value = 1

[State 1000, 10]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = Vel Y > 0 && Pos Y >= 0
value = 1015
ctrl = 0

;------------------------------------------------------------------------------------------------------------
; Seiten Rengeki (Coming Down)
[Statedef 1015]
type = A
movetype = I
physics = N
sprpriority = 1
ctrl = 0

[State 1015, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 57

[State 1015, 2]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel)

[State 1015, 3]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
;Kingin no Hisago
[Statedef 1100]
type    = S
movetype= A
physics = S
poweradd = 60
ctrl = 0
velset = 0,0
anim = 1100
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1100, 1]
type = ChangeAnim
trigger1 = AnimElem = 7 && Time < 48
value = Anim
elem = 5

[State 1100, 2]
type = ChangeAnim
trigger1 = AnimElem = 14
value = Anim
elem = 11
persistent = 0

[State 1100, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1100,0
volume = 255
volumescale = 255
channel = 0

[State 1100, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1100,1
volume = 255
volumescale = 255
channel = 1

[State 1100, 5]
type = Helper
trigger1 = AnimElem = 4
stateno = 31100
ID = 31100
name = "Vaccumm Effect"

[State 1100, 6]
type = Helper
trigger1 = AnimElem = 8
stateno = 31101
ID = 31101
postype = p1
pos = floor(10 * const(size.xscale)),floor(-64 * const(size.yscale))
name = "What happened?"

[State 1100, 7]
type = HitDef
trigger1 = AnimElem = 3
attr = S, ST
hitflag = MA
guardflag = MA
sparkno = s9999
sparkxy = -15,-50
guard.sparkno = s8050
guard.pausetime = 1,9
guard.hittime = 9
ground.slidetime = 9
air.hittime = 16
priority = 2, Miss
p1facing = 1
p2facing = 1
p1stateno = 1110
p2stateno = 1130
fall = 1
fall.recover = 0
fall.yvelocity = 0
fall.animtype = Up
animtype = Hard
ground.type = Low
air.type = Low
hitsound = S5,4
guardsound = s6,0
ground.velocity = 0, -17
air.velocity = 0, -17
guard.velocity = -14
airguard.velocity = -10.5,3
yaccel = (enemynear, const(movement.yaccel)) + 0.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ID = 31100

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 15), Floor(P2Dist Y - 50)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1100, Idle]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 1100, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kingin no Hisago - Succesfull Grab
[Statedef 1110]
type    = S
movetype= A
physics = N
anim = 1110
poweradd = 60
velset = 0,0
ctrl = 0 + (0*(var(2):=70))
sprpriority = 0

[State 1100, MSFX]
type = Width
trigger1 = 1
edge = 100,0

[State 1xxx, RX]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1xxx, RX2]
type = NotHitBy
trigger1 = 1
value2 = SCA

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = Time = 0
anim = 8006
postype = p1
pos = Floor(P2Dist X - 15), Floor(P2Dist Y - 50)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(15*const(size.xscale)),ceil(-55*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 1110, 1]
type = ChangeAnim
trigger1 = Time < 10
value = Anim
elem = AnimElemNo(0)

[State 1110, 2]
type = SprPriority
trigger1 = AnimElemTime(1) >= 1
value = -1

[State 1110, 3]
type = VarAdd
trigger1 = Time >= 10
var(2) = -1

[State 1110, 4]
type = TargetBind
trigger1 = AnimElemNo(0) = [1,6]
pos = var(2),-50
ID = 31100

[State 1110, 5]
type = TargetBind
trigger1 = AnimElemNo(0) = 7
pos = var(2),-43
ID = 31100

[State 1110, 6]
type = TargetBind
trigger1 = AnimElemNo(0) > 7
pos = 95,0
ID = 31100

[State 1110, I'm crouching now...]
type = StateTypeSet
trigger1 = AnimElem = 16
statetype = C

[State 1110, IT'S COOKING TIME!!!]
type = Helper
trigger1 = AnimElem = 16
stateno = 31110
ID = 31110
persistent = 0
pos = floor(110 * const(size.xscale)),0
name = "Cooking pot"

[State 1110, 7]
type = PlaySnd
trigger1 = AnimElem = 11
volume = 255
volumescale = 255
value = 1100,2

[State 1110, Get LOST!]
type = TargetState
trigger1 = Time >= 150
value = 1131
ID = 31100

[State 1110, End]
type = ChangeState
trigger1 = Time >= 150
value = (StateNo + 1)
ctrl = 0

;---------------------------------------------------------------------------
;Kingin no Hisago - End
[Statedef 1111]
type    = C
movetype= I
physics = N
anim = 1111
velset = 0,0
ctrl = 0
sprpriority = 1


[State 1110, I suck ur life bitch!]
type = TargetLifeAdd
trigger1 = time = 0
value = -130
ID = 31100
kill = (time >= 150)

[State 1111, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 12
ctrl = 1

;---------------------------------------------------------------------------
;Grabed by Kingin no Hisago - Being absorbed
[Statedef 1130]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 1130, Camera Fix]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = (AnimElemNo(0) = 1),0

[State 1130, Being hit]
type = ChangeAnim2
trigger1 = Time = 0
value = 1130

[State 1130, Initial drawing frame]
type = AngleDraw
trigger1 = time < 10
value = 0

[State 1130, Shrinking!!]
type = AngleDraw
trigger1 = time >= 10
scale = 1 - (time * 0.025), 1 - (time * 0.025)

[State 1130, Rotating duh!!]
type = AngleAdd
trigger1 = (Time % 4) = 0 && Time >= 10
value = 90

[State 1130, Spinning around weee!!!]
type = PosAdd
trigger1 = Time = [10,37]
x = ceil(sin(time*0.75)*(40-time))
y = ceil(cos(time*0.75)*(40-time))

[State 1130, Now I'm in the pot :(]
type = AssertSpecial
trigger1 = Time >= 37
flag = invisible

[State 1130, Safety]
type = SelfState
trigger1 = !GetHitVar(IsBound)
value = 5050

;---------------------------------------------------------------------------
;Grabed by Kingin no Hisago - Out
[Statedef 1131]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1131, Camera]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1131, Accel]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1131, HitVel]
type = VelSet
trigger1 = Time = 0
x = GetHitVar(xvel)
y = -6+GetHitVar(yvel)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(SelfAnimExist(5051), 5051, 5030)

[State 5050, 2] ;Hit transition
type = ChangeAnim
triggerall = Vel Y > -2
triggerall = (anim != 5060) && (anim != 5061)
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 5050, 3] ;Change anim when done with transition
type = ChangeAnim
triggerall = (anim != 5060) && (anim != 5061)
trigger1 = Anim = 5035 && AnimTime = 0
trigger2 = Anim != 5035 && Vel Y > 0
trigger3 = (sysvar(3)) && (!SelfAnimExist(5060))
value = 5050
persistent = 0

[State 5050, 4] ;Coming down anim
type = ChangeAnim
triggerall = SelfAnimExist(5060)
trigger1 = (Anim = 5050) && (AnimTime = 0)
trigger2 = ((Anim = 5051) || (Anim = 5052)) && (Vel Y > 0)
trigger3 = sysvar(3)
value = 5060
persistent = 0

;-----------------------------------------------------------

[State 5100, Var]
type = VarSet
trigger1 = Time = 0
SysFVar(0) = vel y

[state 832, 8]
type = envshake
trigger1 = pos y >= 0 && vel y > 0 
time = 15
freq = 70
ampl = -4

[State 9002, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5110
;---------------------------------------------------------------------------
;Shienbu X
[Statedef 1200]
type    = U
movetype= A
physics = N
poweradd= 60
ctrl = 0
anim = 1200 + (10 * StateType = A)
sprpriority = 2

[State SMD, RM2]
type = PosSet
trigger1 = Anim = 1200 && time = 0
y = 0

[State ARXB, FIX Vel A]
type = VelSet
trigger1 = Anim = 1200 && Time = 0
x = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
triggerall = Anim = 1200
trigger1 = time = 0
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1200, 1]
type = VelMul
trigger1 = Anim = 1210 && time = 0
x = .15
y = .15

[State 1200, 2]
type = VelAdd
trigger1 = Anim = 1210 && time = 0
trigger1 = Vel Y = [-.1,.1]
y = ifelse(Vel Y <= 0, .1, -.1)

[State 1200, Voice]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1200,0
volume = 255
volumescale = 255
channel = 0

[State 1200, 3]
type = Helper
trigger1 = AnimElemTime(9) = 0
stateno = 31200
ID = 31200
name = "Breath"

[State 1200, 4]
type = Helper
trigger1 = AnimElemTime(9) = 0
stateno = 31201
ID = 31201
name = "Oh! Cute lil' monkeys!!!"

[State 1200, Freeze]
type = VelSet
trigger1 = Anim = 1210 && Pos Y >= 0
y = 0

[State 1200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0 + (1221 * StateType = A)
ctrl = ifelse(StateType = A, var(33), 1)

;---------------------------------------------------------------------------
;Shienbu Y
[Statedef 1210]
type    = U
movetype= A
physics = N
poweradd= 60
ctrl = 0
anim = 1200 + (10 * StateType = A)
sprpriority = 2

[State SMD, RM2]
type = PosSet
trigger1 = Anim = 1200 && time = 0
y = 0

[State ARXB, FIX Vel A]
type = VelSet
trigger1 = Anim = 1200 && Time = 0
x = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
triggerall = Anim = 1200
trigger1 = time = 0
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1200, 1]
type = VelMul
trigger1 = Anim = 1210 && time = 0
x = .15
y = .15

[State 1200, 2]
type = VelAdd
trigger1 = Anim = 1210 && time = 0
trigger1 = Vel Y = [-.1,.1]
y = ifelse(Vel Y <= 0, .1, -.1)

[State 1200, Voice]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1200,0
volume = 255
volumescale = 255
channel = 0

[State 1200, 3]
type = Helper
trigger1 = AnimElemTime(9) = 0
stateno = 31200
ID = 31200
name = "Breath"

[State 1200, 4]
type = Helper
trigger1 = AnimElemTime(9) = 0
stateno = 31201
ID = 31201
name = "Oh! Cute lil' monkeys!!!"

[State 1200, Freeze]
type = VelSet
trigger1 = Anim = 1210 && Pos Y >= 0
y = 0

[State 1200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0 + (1221 * StateType = A)
ctrl = ifelse(StateType = A, var(33), 1)

;---------------------------------------------------------------------------
;Hofuku Zenshin A
[Statedef 1300]
type    = C
movetype= I
physics = N
poweradd = 60
ctrl = 0
velset = 0,0
anim = 1300
sprpriority = 1

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 1300, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 5 * const(size.xscale)

[State 1300, 2]
type = PlayerPush
trigger1 = 1
value = 0

[State 1300, 3]
type = NotHitBy
trigger1 = 1
value = ,AP

[State 1300, 4]
type = NotHitBy
trigger1 = 1
value2 = ,AP

[State 1300, 5]
type = ChangeState
trigger1 = Time = 30
value = 1315
ctrl = 0

;---------------------------------------------------------------------------
;Hofuku Zenshin B
[Statedef 1310]
type    = C
movetype= I
physics = N
poweradd = 60
ctrl = 0
velset = 0,0
anim = 1300
sprpriority = 1

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 32020
postype = p1
pos = 0, 0
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.5, 0.5
ownpal = 1

[State 1310, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 5 * const(size.xscale)

[State 1310, 2]
type = PlayerPush
trigger1 = 1
value = 0

[State 1310, 3]
type = NotHitBy
trigger1 = 1
value = ,AP

[State 1310, 4]
type = NotHitBy
trigger1 = 1
value2 = ,AP

[State 1310, 5]
type = ChangeState
trigger1 = Time = 40
value = 1315
ctrl = 0

;---------------------------------------------------------------------------
;Hofuku Zenshin End
[Statedef 1315]
type    = C
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 1315
sprpriority = 1

[State 1315, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 1315, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Wall Walk - Begin
[Statedef 1400]
type    = S
movetype= I
physics = N
poweradd= 60
ctrl = 0 + (0*((var(1):=facing)+(var(2):=-360)))
velset = 0,0
anim = 20
sprpriority = 1

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State RA, PP]
type = PlayerPush
trigger1 = 1
value = 0

[State 1400, 1]
type = Turn
trigger1 = Time = 0

[State 1400, CFX]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1400, 2]
type = VelSet
trigger1 = AnimElem = 1
x = (10 * const(size.xscale))

[State 1400, WFX]
type = Varadd
trigger1 = FrontEdgeDist < 35 && var(2) < -280
var(2) = 10

[State 1400, WFX2]
type = AngleDraw
trigger1 = 1
value = var(2)

[State 1400, End]
type = ChangeState
trigger1 = FrontEdgeDist < 5 || var(2) = -280
value = 1401
ctrl = 0

;---------------------------------------------------------------------------
;Wall Walk - Wall 1
[Statedef 1401]
type    = U
movetype= I
physics = N
ctrl = 0 + (0*(var(2):=-270))
velset = 0,0
anim = 1401
sprpriority = 1

[State 1401, PSF]
type = PlayerPush
trigger1 = 1
value = 0

[State 1401, 1]
type = PlaySnd
trigger1 = Time = 0
volume = 255
volumescale = 255
value = 200,0

[State 1401, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1401, 3]
type = Varadd
trigger1 = ScreenPos Y < 45 && var(2) < -190
var(2) = 10

[State 1401, 4]
type = AngleDraw
trigger1 = 1
value = var(2)

[State 1401, 5]
type = PosSet
trigger1 = 1
x = -160 * var(1)

[State 1401, 6]
type = VelSet
trigger1 = Time = 0
y = -(10 * const(size.xscale))

[State 1401, 7]
type = StateTypeSet
trigger1 = Pos Y < 0 && StateType != A
statetype = A

[State 1407, 8]
type = ChangeState
triggerall = Pos Y < -(const(movement.airjump.height))
trigger1 = command = "x" || command = "y"
value = 1405
ctrl = 0

[State 1407, 9]
type = ChangeState
triggerall = Pos Y < -(const(movement.airjump.height))
trigger1 = command = "a" || command = "b"
value = 1406
ctrl = 0

[State 1407, 10]
type = ChangeState
trigger1 = ScreenPos Y < 15
value = 1402
ctrl = 0

;---------------------------------------------------------------------------
;Wall Walk - Ceiling
[Statedef 1402]
type    = U
movetype= I
physics = N
ctrl = 0 + (0*(var(2):=-180))
velset = 0,0
anim = 1402
sprpriority = 1

[State 1402, PSF]
type = PlayerPush
trigger1 = 1
value = 0

[State 1402, 1]
type = PlaySnd
trigger1 = Time = 0
volume = 255
volumescale = 255
value = 200,0

[State 1402, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1402, 3]
type = Varadd
trigger1 = BackEdgeDist < 35 && var(2) < -100
var(2) = 10

[State 1403, 4]
type = AngleDraw
trigger1 = 1
value = var(2)

[State 1403, 5]
type = PosSet
trigger1 = 1
y = -(abs(Pos Y - ScreenPos Y))

[State 1403, 6]
type = VelSet
trigger1 = Time = 0
x = -(10 * const(size.xscale))

[State 1403, 7]
type = ChangeState
triggerall = Pos Y < -(const(movement.airjump.height))
trigger1 = command = "x" || command = "y"
value = 1405
ctrl = 0

[State 1403, 8]
type = ChangeState
triggerall = Pos Y < -(const(movement.airjump.height))
trigger1 = command = "a" || command = "b"
value = 1406
ctrl = 0

[State 1403, 9]
type = ChangeState
trigger1 = BackEdgeDist < 5
value = 1403
ctrl = 0

;---------------------------------------------------------------------------
;Wall Walk - Wall 2
[Statedef 1403]
type    = U
movetype= I
physics = N
ctrl = 0 + (0*(var(2):=0))
velset = 0,0
anim = 1403
sprpriority = 1

[State 1403, PSF]
type = PlayerPush
trigger1 = 1
value = 0

[State 1403, 1]
type = PlaySnd
trigger1 = Time = 0
volume = 255
volumescale = 255
value = 200,0

[State 1403, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1403, 3]
type = AngleDraw
trigger1 = 1
value = -90

[State 1403, 4]
type = PosSet
trigger1 = 1
x = 160 * var(1)

[State 1403, 5]
type = VelSet
trigger1 = Time = 0
y = 10 * const(size.xscale)

[State 1403, 6]
type = ChangeState
triggerall = Pos Y < -(const(movement.airjump.height))
trigger1 = command = "x" || command = "y"
value = 1405
ctrl = 0

[State 1403, 7]
type = ChangeState
triggerall = Pos Y < -(const(movement.airjump.height))
trigger1 = command = "a" || command = "b"
value = 1406
ctrl = 0

[State 1403, 8]
type = ChangeState
trigger1 = Pos Y >= -30
value = 1404
ctrl = 0

;---------------------------------------------------------------------------
;Wall Walk - End
[Statedef 1404]
type    = S
movetype= I
physics = N
ctrl = 0 + (0*(var(2):=0))
velset = 0,0
sprpriority = 1

[State 1404, PSF]
type = PlayerPush
trigger1 = 1
value = 0

[State 1404, 1]
type = PlaySnd
trigger1 = Time = 0
volume = 255
volumescale = 255
value = 200,0

[State 1404, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1404, 3]
type = AngleDraw
trigger1 = 1
value = 0

[State 1404, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1404, 5]
type = ChangeState
trigger1 = Pos Y >= 0 && StateType != A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Wall Walk - Release
[Statedef 1405]
type    = A
movetype= I
physics = N
ctrl = 1 + (0*(var(2):=0))
velset = 0,0
sprpriority = 1

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 1405, 1]
type = AngleDraw
trigger1 = 1
value = 0

[State 1405, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 58

[State 1405, 2]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel) - 0.02

[State 1405, Movement]
type = Veladd
trigger1 = vel X = [-2.4, 4.4]
x = ifelse(command = "holdfwd", 0.1, ifelse(command = "holdback", -0.1, 0))

[State 1405, 3]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
; Wall Walk - Kick
[Statedef 1406]
type    = A
movetype= A
physics = N
poweradd= 40
ctrl = 0 + (0*(var(2):=0))
velset = 0,0
anim = 1406
sprpriority = 2

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 1406, 1]
type = AngleDraw
trigger1 = 1
value = 0

[State 1406, 2]
type = VelSet
trigger1 = Time = 0
x = 12
y = 4.5

[State 1406, 2]
type = VelSet
trigger1 = Pos Y >= 0
x = 0

[State 1406, 3]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel)

[State 1406, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 1406, 5]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
animtype  = Hard
damage    = 60,2
guardflag = HA
hitflag = HAFD
pausetime = 9,8
guard.pausetime = 9,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 2
yaccel = .96
ground.velocity = -16,-9
guard.velocity = -16
air.velocity = -16,-8
airguard.velocity = -10.5,3
ground.cornerpush.veloff = -11
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1406, ChangeAnim]
type = ChangeAnim
trigger1 = MoveContact && AnimElemNo(0) = 3
value = Anim
elem = AnimElemNo(0) + 1

[State 1406, 5]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
;Fuusetsu Zan
[Statedef 1500]
type    = U
movetype= A
physics = N
poweradd= 60
ctrl = 0
anim = 1500 + (10*StateType = A)
sprpriority = 2

[State SMD, RM2]
type = PosSet
trigger1 = Anim = 1500 && time = 0
y = 0

[State ARXB, FIX Vel A]
type = VelSet
trigger1 = Anim = 1500 && Time = 0
x = 0.5 * const(size.xscale)
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
triggerall = Anim = 1500
trigger1 = time = 0
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1500, 1]
type = VelMul
trigger1 = Anim = 1510 && time = 0
x = .15
y = .15

[State 1500, 2]
type = VelAdd
trigger1 = Anim = 1510 && time = 0
trigger1 = Vel Y = [-.1,.1]
y = ifelse(Vel Y <= 0, .1, -.1)

[State 1500, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1500,0
volume = 255
volumescale = 255
channel = 0

[State 1500, Wiff]
type = PlaySnd
trigger1 = (Time % 7) = 0 && AnimElemNo(0) = [2,10]
value = 0,5
channel = 1

[State 1500, 3]
type = HitDef
triggerall = Anim = 1500
trigger1 = AnimElemNo(0) >= 2 && (Time % 9) = 0 && Hitcount < 3
attr = S, SA
damage = 40, 3
animtype = Hard
air.animtype = DiagUp
priority  = 4, Hit
guardflag = MAF
pausetime = 6,4
sparkxy = -10,-45
hitsound   = S5,2
guardsound = S6,0
sparkno = s9999
guard.sparkno = s8050
ground.type = High
air.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8, 0
air.velocity = -8, -4
air.hittime = 3
yaccel = .99
guard.velocity = -8
airguard.velocity = -10.5,3
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -11
guard.cornerpush.veloff = -11
airguard.cornerpush.veloff = 0
air.fall = 1
fall.animtype = DiagUp
fall.recovertime = 25
fall.yvelocity = -1
yaccel = (enemynear,const(movement.yaccel)) + 0.15
ID = 2+4

[State 1480]
type = HitDef
triggerall = Anim = 1510
trigger1 = AnimElemNo(0) >= 2 && (Time % 9) = 0 && Hitcount < 3
attr = A, SA
damage = 40, 3
animtype = Hard
air.animtype = DiagUp
priority  = 4, Hit
guardflag = MAF
pausetime = 6,4
sparkxy = -10,-45
hitsound   = S5,2
guardsound = S6,0
sparkno = s9999
guard.sparkno = s8050
ground.type = High
air.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8, 0
air.hittime = 3
air.velocity = -8, -4
guard.velocity = -8
yaccel = .99
airguard.velocity = -10.5,3
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -11
guard.cornerpush.veloff = -11
airguard.cornerpush.veloff = 0
air.fall = 1
fall.animtype = DiagUp
fall.recovertime = 25
fall.yvelocity = -1
yaccel = (enemynear,const(movement.yaccel)) + 0.15
ID = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1500, RS]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1500, Anim]
type = ChangeAnim
trigger1 = AnimElem = 11
value = Anim
elem = 2
persistent = 0

[State 1500, Freeze]
type = VelSet
trigger1 = Anim = 1510 && Pos Y >= 0
y = 0

[State 1500, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0 + (50*StateType = A)
ctrl = ifelse(StateType = A, var(33), 1)

;;;;;;;;;;;;;;;;;;; Hyper Moves state file ;;;;;;;;;;;;;;;;;;;;;;;
;-----------------------------------------------------------------

;---------------------------------------------------------------------------
;Tenchi Tsuukan
[Statedef 3000]
type    = U
movetype= A
physics = N
anim = 3000 + (10*StateType = A)
ctrl = 0
sprpriority = 2

[State SMD, RM2]
type = PosSet
trigger1 = Anim = 3000 && time = 0
y = 0

[State ARXB, FIX Vel A]
type = VelSet
trigger1 = Anim = 3000 && Time = 0
x = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
triggerall = Anim = 3000
trigger1 = animelem = 2
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, 1]
type = VelMul
trigger1 = Anim = 3010 && time = 38
x = .15
y = .15

[State 3000, 2]
type = VelAdd
trigger1 = Anim = 3010 && time = 38
trigger1 = Vel Y = [-.1,.1]
y = ifelse(Vel Y <= 0, .1, -.1)

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,0
volume = 255
volumescale = 255
channel = 0

[State 3000, VarSet]
type = VarSet
trigger1 = Anim = 3000 && AnimElem = 1
trigger2 = Anim = 3010 && AnimElem = 1
var(40) = 1

[State 3000, VarSet]
type = VarSet
trigger1 = Anim = 3000 && AnimElem = 13
trigger2 = Anim = 3010 && AnimElem = 9
var(40) = 0

[State 3000, Helper]
type = Helper
trigger1 = Anim = 3000 && AnimElem = 1
stateno = 8500
supermovetime = 99999999
pos = ceil(10*const(size.xscale)),ceil(-15*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, Helper]
type = Helper
trigger1 = Anim = 3010 && AnimElem = 1
stateno = 8500
supermovetime = 99999999
pos = ceil(6*const(size.xscale)),ceil(-65*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 1,< 0
value = SCA 
;--------------------------------------------

[State 3000, Voice]
type = PlaySnd
trigger1 = Anim = 3000 && AnimElem = 6
trigger2 = Anim = 3010 && AnimElem = 3
value = 3000,1
volume = 255
volumescale = 255
channel = 0

[State 3000, Pole]
type = Helper
trigger1 = Anim = 3000 && AnimElem = 4
trigger2 = Anim = 3010 && AnimElem = 2
stateno = 33000
ID = 33000
postype = p1
pos = floor(7 * const(size.xscale)),-floor(ifelse(Anim = 3000, 50, 156) * const(size.yscale))
name = "Pole Helper"

[State 3000, Fix Anim]
type = ChangeAnim
triggerall = NumHelper(33000)
triggerall = Helper(33000), StateNo = [33001,33002]
trigger1 = Anim = 3000 && AnimElemNo(0) = 8
trigger2 = Anim = 3010 && AnimElemNo(0) = 6
value = Anim
elem = AnimElemNo(0)

[State 3000, SP1 - MVX]
type = PosFreeze
trigger1 = Anim = 3010 && AnimElemTime(1) = [0,37]
value = 1

[State 3000, Freeze]
type = VelSet
trigger1 = Anim = 3010 && Pos Y >= 0
y = 0

[State 3000, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 12 + (1209 * StateType = A)
ctrl = ifelse(StateType = A, var(33), 1)

;---------------------------------------------------------------------------
;En'ou
[Statedef 3100]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3100
ctrl = 0 + ((var(4):=0)+(var(5):=0)+(var(6):=0)+(var(7):=0))
sprpriority = 2

[State SMD, RM2]
type = PosSet
trigger1 = AnimElemTime(1) = 0
y = 0

[State ARXB, FIX Vel A]
type = VelSet
trigger1 = AnimElemTime(1) = 0
x = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = AnimElemTime(1) = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
trigger1 = AnimElem = 2
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value =  1500, 0
volume = 255
volumescale = 255
channel = 0

[State 3000, VarSet]
type = VarSet
trigger1 = anim = 3100 && AnimElem = 1
var(40) = 1

[State 3000, Helper]
type = Helper
trigger1 = anim = 3100 && AnimElem = 1
stateno = 8501
supermovetime = 99999999
pos = ceil(10*const(size.xscale)),ceil(-45*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = anim = 3100 && AnimElem = 1
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = anim = 3100 && AnimElem = 1,< 0
value = SCA 

;--------------------------------------------


[State 3100, SCLFix1]
type = AngleDraw
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(3) < 0
value = -30
scale = (const(size.xscale) + 0.30),(const(size.yscale) - 0.30)

[State 3100, SCLFix2]
type = AngleDraw
trigger1 = AnimElemNo(0) = [3,4]
value = 0
scale = (const(size.xscale) + 0.30),(const(size.yscale) - 0.30)

[State 3000, 10]
type = Helper
trigger1 = AnimElemTime(5) = 45
name = "Timer"
StateNo = 4000
postype = left
pos = 0, 0
ownpal = 1 

[State 3100, SCL+]
type = AngleDraw
trigger1 = AnimElemTime(5) = [0,20]
value = 0
scale = 0.5 + (AnimElemTime(5) * 0.025),0.5 + (AnimElemTime(5) * 0.025)

[State 3100, SCLFix3]
type = AngleDraw
trigger1 = AnimElemTime(5) = [20,44]
value = 0

[State RXA, Invulnerability]
type = NotHitBy
trigger1 = AnimElemTime(5) >= 0
value = SCA
value2 = SCA

[State 3100, Back]
type = Explod
trigger1 = AnimElemTime(5) = 0
anim = 33100
ID = 33100
pos = 0,0
postype = p1
bindtime = -1
removetime = 22
sprpriority = 1
ownpal = 1
removeongethit = 1

[State 3100, EXFIX]
type = ModifyExplod
trigger1 = NumExplod(33100)
ID = 33100
scale = (const(size.xscale) - 0.25) + (AnimElemTime(5) * 0.025),(const(size.yscale) - 0.3) + (AnimElemTime(5) * 0.025)
trans = addalpha
alpha = 128,128

[State -2, Flash PalFX]
type = PalfX
trigger1 = animelem = 5
trigger1 = time%3
add = 250,250,250
mul = 156,156,156
sinadd = -130,-30,-30,3
invertall = 0
color = 256
time = 24

[State 3100, Earthquake!!!]
type = EnvShake
trigger1 = AnimElemTime(5) = 5
time = 43
ampl = -4
phase = 4
freq = 100

[State 3100, FX]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value =  3100, 0
volumescale = 255
volume = 255
channel = 1

[State 3100, FX]
type = PlaySnd
trigger1 = AnimElemTime(5) = 13
value =  3100, 1
volumescale = 255
volume = 255

[State 3100, HitDef]
type = HitDef
trigger1 = AnimElemTime(5) = 22
attr = S,HA
hitflag = MAFD
guardflag = MA
animtype = Hard
air.animtype = Up
fall.animtype = Up
priority = 5,Hit
damage = 20,8
pausetime = 0 ,9
sparkno = s9999
guard.sparkno = s8050
hitsound = S5,3
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 30
ground.hittime = 0
guard.hittime = 20
air.hittime = 30
yaccel = .99
ground.velocity = 0,-17
guard.velocity = -12
air.velocity = 0,-17
airguard.velocity = -10.5,3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.yvelocity = 0
fall.recover = 0
ID = 1
getpower = 0,0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3100, Start]
type = ChangeState
trigger1 = AnimTime = 0
value = 3110
ctrl = 0 + (0*(var(20):=300))

;---------------------------------------------------------------------------
;En'ou - Giant Stand
[Statedef 3110]
type    = S
movetype= I
physics = N
velset = 0,0
ctrl = 0 + (0*(var(7):=0))
sprpriority = 0

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State A-T, 1]
type = ChangeState
trigger1 = p2dist X < 0
value = 3115

[State 3110, Anim]
type = ChangeAnim
trigger1 = Anim != 3110 && Anim != 3115
trigger2 = Anim = 3115 && AnimTime = 0
value = 3110

;var(58) = AI Var
[State 3110, Walk]
type = ChangeState
trigger1 = var(58) < 1 && (command = "holdfwd" || command = "holdback")
trigger2 = var(58) > 0 && P2BodyDist X > 10 && Random = [0,300]
value = 3120
ctrl = 0

[State 3110, Punch]
type = ChangeState
trigger1 = var(58) < 1 && (command = "x" || command = "y"|| command = "z")
trigger2 = var(58) > 0 && P2BodyDist X = [10,45]
value = 3130
ctrl = 0

[State 3110, Fire]
type = ChangeState
trigger1 = var(58) < 1 && (command = "a" || command = "b"|| command = "c")
trigger2 = var(58) > 0 && P2BodyDist X > 90
value = 3140
ctrl = 0

[State 3110, End]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Turning
[Statedef 3115]
type    = S
movetype = I
physics = S
ctrl = 0 + (0*(var(7):=0))

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State 3115, Anim]
type = ChangeAnim
trigger1 = Anim != 3115 && var(4) = 0
value = 3115

[State 3115, 1]
type = Turn
trigger1 = var(4) = 0

[State 3115, Walk]
type = ChangeState
trigger1 = var(58) < 1 && (command = "holdfwd" || command = "holdback")
trigger2 = var(58) > 0 && P2BodyDist X > 10 && Random = [0,300]
value = 3120
ctrl = 0

[State 3115, Punch]
type = ChangeState
trigger1 = var(58) < 1 && (command = "x" || command = "y"|| command = "z")
trigger2 = var(58) > 0 && P2BodyDist X = [10,45]
value = 3130
ctrl = 0

[State 3115, Fire]
type = ChangeState
trigger1 = var(58) < 1 && (command = "a" || command = "b"|| command = "c")
trigger2 = var(58) > 0 && P2BodyDist X > 90
value = 3140
ctrl = 0

[State 3115, 3]
type = ChangeState
trigger1 = var(20) && AnimTime = 0
value = 3110
ctrl = 0

[State 3120, End]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Walking
[Statedef 3120]
type    = S
movetype= I
physics = N
velset = 0,0
ctrl = 0 + (0*(var(7):=0))
sprpriority = 0

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State 3120, FWD]
type = VelSet
trigger1 = var(58) < 1 && command = "holdfwd"
trigger2 = var(58) > 0 && P2BodyDist X > 10
x = 3

[State 3120, BWD]
type = VelSet
trigger1 = var(58) < 1 && command = "holdback"
x = -3

[State 3120, FWD]
type = VelSet
triggerall = AnimElemNo(0) = 1
triggerall = AnimElemNo(0) = 5
trigger1 = var(58) < 1 && command = "holdfwd"
trigger2 = var(58) > 0 && P2BodyDist X > 10
x = 0

[State 3120, BWD]
type = VelSet
triggerall = AnimElemNo(0) = 1
triggerall = AnimElemNo(0) = 5
trigger1 = var(58) < 1 && command = "holdback"
x = 0

[State 3120, PosFreeze]
type = PosFreeze
trigger1 = AnimElemNo(0) = 1
trigger2 = AnimElemNo(0) = 5
value = 1

[State 3120, Voice]
type = PlaySnd
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElemTime(5) = 0
value = 40,2
volume = 170
volumescale = 170
channel = 1

[State 3120, Earthquake!!!]
type = EnvShake
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElemTime(5) = 0
time = 8
ampl = -5
phase = 5
freq = 100

[State 3120, Anim]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 3120 && Anim != 3115
trigger2 = Anim = 3115 && AnimTime = 0
value = 3120

[State 3120, Anim2]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 3121 && Anim != 3115
trigger2 = Anim = 3115 && AnimTime = 0
value = 3121

[State A-T, 1]
type = Turn
trigger1 = p2dist X < 0

[State 3120, Stand]
type = ChangeState
trigger1 = var(58) < 1 && (command != "holdfwd" && command != "holdback")
trigger2 = var(58) > 0 && P2BodyDist X = [10,15]
value = 3110
ctrl = 0

[State 3120, Punch]
type = ChangeState
trigger1 = var(58) < 1 && (command = "x" || command = "y"|| command = "z")
trigger2 = var(58) > 0 && P2BodyDist X = [10,45]
value = 3130
ctrl = 0

[State 3120, Fire]
type = ChangeState
trigger1 = var(58) < 1 && (command = "a" || command = "b"|| command = "c")
trigger2 = var(58) > 0 && P2BodyDist X > 90
value = 3140
ctrl = 0

[State 3120, End]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Punches
[Statedef 3130]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0 + (0*(var(7):=0))
sprpriority = 2

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State 3130, AnimA]
type = ChangeAnim
trigger1 = var(58) < 1
trigger1 = Anim != 3130 && var(4) = 0 && (command != "y" || command != "z")
trigger2 = var(58) > 0
trigger2 = (P2Dist Y = [-30,0]) && Anim != 3130 && var(4) = 0
value = 3130

[State 3130, AnimB]
type = ChangeAnim
trigger1 = var(58) < 1
trigger1 = Anim != 3131 && var(4) = 0 && (command = "y" || command = "z")
trigger2 = var(58) > 0
trigger2 = P2Dist Y < -30 && Anim != 3131 && var(4) = 0
value = 3131

[State A-T, 1]
type = Turn
trigger1 = var(4) = 0
trigger1 = p2dist X < 0

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State 3130, Earthquake!!!]
type = EnvShake
trigger1 = AnimElemTime(1) = 1
time = 10
ampl = -5
phase = 5
freq = 100

[State 3130, 1]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = 3100,1
volume = 255
volumescale = 255
channel = 0

[State 3130, 2]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 3100,5
channel = 1

[State PNC, 1]
type = Helper
trigger1 = Anim = 3130 && AnimElemTime(3) = 0 && !NumHelper(33130)
name = "Punch Effect 1"
ID = 33130
stateno = 33130
ignorehitpause = 1

[State PNC, 2]
type = Helper
trigger1 = Anim = 3130 && AnimElemTime(3) = 0 && !NumHelper(33131)
name = "Punch Effect 2"
ID = 33131
stateno = 33130
ignorehitpause = 1

[State PNC, 3]
type = Helper
trigger1 = Anim = 3130 && AnimElemTime(3) = 0 && !NumHelper(33132)
name = "Punch Effect 3"
ID = 33132
stateno = 33130
ignorehitpause = 1

[State PND, 1]
type = Helper
trigger1 = Anim = 3131 && AnimElemTime(4) = 0 && !NumHelper(33133)
name = "Punch Effect 1"
ID = 33133
stateno = 33130
ignorehitpause = 1

[State PND, 2]
type = Helper
trigger1 = Anim = 3131 && AnimElemTime(4) = 0 && !NumHelper(33134)
name = "Punch Effect 2"
ID = 33134
stateno = 33130
ignorehitpause = 1

[State 3130, A1]
type = HitDef
trigger1 = Anim = 3130 && AnimElemTime(3) = 0
attr = S, HA
damage = 90,10
animtype = Hard
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 12,12
sparkno = -1
guard.sparkno = s8050
sparkxy = -10,-40
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -17
guard.velocity = -17
air.hittime = 15
air.type = High
down.velocity = -6,-7
air.velocity = -14,-11
airguard.velocity = -10.5,3
getpower = 0,0
air.fall = 1
fall.recovertime = 28
fall.animtype = DiagUp
air.cornerpush.veloff = -20
ground.cornerpush.veloff = -20
guard.cornerpush.veloff = -20
airguard.cornerpush.veloff = -20
ID = 1+4
yaccel = .88

[State 3130, A2]
type = HitDef
trigger1 = Anim = 3131 && AnimElemTime(3) = 0
attr = S, HA
damage = 90,10
animtype = Up
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 12,12
sparkno = -1
guard.sparkno = s8050
sparkxy = -10,-40
hitsound = S5,3
guardsound = S6,0
guard.velocity = -17
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
down.velocity = -6,-7
ground.velocity = -3,-19
air.type = Low
airguard.velocity = -10.5,3
air.velocity = -3,-19
getpower = 0,0
air.hittime = 28
air.cornerpush.veloff = -20
ground.cornerpush.veloff = -20
guard.cornerpush.veloff = -20
airguard.cornerpush.veloff = -20
yaccel = (enemynear,const(movement.yaccel)) + 0.6
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 3130, MIC]
type = ChangeState
trigger1 = var(20) && AnimTime = 0
value = 3110
ctrl = 0

[State 3130, End]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Fire Breath Start
[Statedef 3140]
type    = S
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State 3130, Anim]
type = ChangeAnim
trigger1 = Anim != 3140 && var(4) = 0
value = 3140

[State A-T, 1]
type = Turn
trigger1 = var(4) = 0
trigger1 = p2dist X < 0

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State 3130, 1]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = 3100,1
volume = 255
volumescale = 255
channel = 0

[State 3130, 1]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = 3100,6
volume = 255
volumescale = 255
channel = 1

[State 3140, SR1]
type = ChangeState
triggerall = var(20) && var(4) = 8
trigger1 = var(58) < 1 && command = "holdup"
trigger2 = var(58) > 0 && P2Dist Y < -140
value = 3142
ctrl = 0

[State 3140, SR3]
type = ChangeState
triggerall = var(20) && var(4) = 8
trigger1 = var(58) < 1 && command = "holddown"
trigger2 = var(58) > 0 && P2Dist Y >= 0 && P2BodyDist X > 90
value = 3144
ctrl = 0

[State 3140, SR2]
type = ChangeState
triggerall = var(20) && var(4) = 8
trigger1 = var(58) < 1 && (command != "holdup" && command != "holddown")
trigger2 = var(58) > 0 && ((P2Dist Y < -45 && P2BodyDist X > 90) || 1)
value = 3141
ctrl = 0

[State 3140, End]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Fire Breath Straight
[Statedef 3141]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State 3130, 1]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = 3100,1
volume = 255
volumescale = 255
channel = 0

[State TTRS, PalFXWiz]
type = PalFX
trigger1 = time%2
add = 50,50,50
mul = 128,100,100
sinadd = 0,0,0,0
color = 256
time = 1

[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State RTS, Fire Breath Timer]
type = VarAdd
trigger1 = 1
var(7) = 1

[State 3130, Anim]
type = ChangeAnim
trigger1 = Anim != 3141 && var(4) = 0
value = 3141

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State PNC, 1]
type = Helper
trigger1 = AnimElemTime(1) = 0 && !NumHelper(33150)
name = "Head"
ID = 33150
stateno = 33150

[State 314x, SR1]
type = ChangeState
triggerall = var(20) && var(4) >= 5
trigger1 = var(58) < 1 && command = "holdup"
trigger2 = var(58) > 0 && P2Dist Y < -140
value = 3142
ctrl = 0

[State 314x, SR3]
type = ChangeState
triggerall = var(20) && var(4) >= 5
trigger1 = var(58) < 1 && command = "holddown"
trigger2 = var(58) > 0 && P2Dist Y >= 0 && P2BodyDist X < 80
value = 3144
ctrl = 0

[State 3089]
type = ChangeState
triggerall = var(20)
trigger1 = var(7) >= 90 && (command != "holda" && command != "holdb" && command != "holdc")
trigger2 = var(7) >= 150
value = 3150
ctrl = 0

[State 3089]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Fire Breath Slight Up
[Statedef 3142]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State TTRS, PalFXWiz]
type = PalFX
trigger1 = time%2
add = 50,50,50
mul = 128,100,100
sinadd = 0,0,0,0
color = 256
time = 1


[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State RTS, Fire Breath Timer]
type = VarAdd
trigger1 = 1
var(7) = 1

[State 3130, Anim]
type = ChangeAnim
trigger1 = Anim != 3141 && var(4) = 0
value = 3141

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State PNC, 1]
type = Helper
trigger1 = AnimElemTime(1) = 0 && !NumHelper(33150)
name = "Head"
ID = 33150
stateno = 33150

[State 314x, SR1]
type = ChangeState
triggerall = var(20) && var(4) >= 5
trigger1 = var(58) < 1 && command = "holdup"
trigger2 = var(58) > 0 && P2Dist Y < -200
value = 3143
ctrl = 0

[State 314x, SR3]
type = ChangeState
triggerall = var(20) && var(4) >= 5
trigger1 = var(58) < 1 && command != "holdup"
trigger2 = var(58) > 0 && P2Dist Y = [-100,-60]
value = 3141
ctrl = 0

[State 3089]
type = ChangeState
triggerall = var(20)
trigger1 = var(7) >= 90 && (command != "holda" && command != "holdb" && command != "holdc")
trigger2 = var(7) >= 150
value = 3150
ctrl = 0

[State 3089]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Fire Breath Up
[Statedef 3143]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State TTRS, PalFXWiz]
type = PalFX
trigger1 = time%2
add = 50,50,50
mul = 128,100,100
sinadd = 0,0,0,0
color = 256
time = 1

[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State RTS, Fire Breath Timer]
type = VarAdd
trigger1 = 1
var(7) = 1

[State 3130, Anim]
type = ChangeAnim
trigger1 = Anim != 3142 && var(4) = 0
value = 3142

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State PNC, 1]
type = Helper
trigger1 = AnimElemTime(1) = 0 && !NumHelper(33150)
name = "Head"
ID = 33150
stateno = 33150

[State 314x, SR3]
type = ChangeState
triggerall = var(20) && var(4) >= 5
trigger1 = var(58) < 1 && command != "holdup"
trigger2 = var(58) > 0 && P2Dist Y > -145
value = 3142
ctrl = 0

[State 3089]
type = ChangeState
triggerall = var(20)
trigger1 = var(7) >= 90 && (command != "holda" && command != "holdb" && command != "holdc")
trigger2 = var(7) >= 150
value = 3150
ctrl = 0

[State 3089]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Fire Breath Slight Down
[Statedef 3144]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State TTRS, PalFXWiz]
type = PalFX
trigger1 = time%2
add = 50,50,50
mul = 128,100,100
sinadd = 0,0,0,0
color = 256
time = 1


[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State RTS, Fire Breath Timer]
type = VarAdd
trigger1 = 1
var(7) = 1

[State 3130, Anim]
type = ChangeAnim
trigger1 = Anim != 3141 && var(4) = 0
value = 3141

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State PNC, 1]
type = Helper
trigger1 = AnimElemTime(1) = 0 && !NumHelper(33150)
name = "Head"
ID = 33150
stateno = 33150

[State 314x, SR1]
type = ChangeState
triggerall = var(20) && var(4) >= 5
trigger1 = var(58) < 1 && command != "holddown"
trigger2 = var(58) > 0 && P2Dist Y < -45
value = 3141
ctrl = 0

[State 314x, SR3]
type = ChangeState
triggerall = var(20) && var(4) >= 5
trigger1 = var(58) < 1 && command = "holddown"
trigger2 = var(58) > 0 && P2Dist Y >= 0 && P2BodyDist X < 55
value = 3145
ctrl = 0

[State 3089]
type = ChangeState
triggerall = var(20)
trigger1 = var(7) >= 90 && (command != "holda" && command != "holdb" && command != "holdc")
trigger2 = var(7) >= 150
value = 3150
ctrl = 0

[State 3089]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Fire Breath Down
[Statedef 3145]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State TTRS, PalFXWiz]
type = PalFX
trigger1 = time%2
add = 50,50,50
mul = 128,100,100
sinadd = 0,0,0,0
color = 256
time = 1


[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State RTS, Fire Breath Timer]
type = VarAdd
trigger1 = 1
var(7) = 1

[State 3130, Anim]
type = ChangeAnim
trigger1 = Anim != 3143 && var(4) = 0
value = 3143

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State PNC, 1]
type = Helper
trigger1 = AnimElemTime(1) = 0 && !NumHelper(33150)
name = "Head"
ID = 33150
stateno = 33150

[State 314x, SR3]
type = ChangeState
triggerall = var(20) && var(4) >= 5
trigger1 = var(58) < 1 && command != "holddown"
trigger2 = var(58) > 0 && P2BodyDist X > 60
value = 3144
ctrl = 0

[State 3089]
type = ChangeState
triggerall = var(20)
trigger1 = var(7) >= 90 && (command != "holda" && command != "holdb" && command != "holdc")
trigger2 = var(7) >= 150
value = 3150
ctrl = 0

[State 3089]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - Fire Breath Stop
[Statedef 3150]
type    = S
movetype= I
physics = N
velset = 0,0
ctrl = 0 + (0*(var(7):=0))
sprpriority = 2

[State FRZ, En'ou StateNo Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(5) = StateNo
ignorehitpause = 1

[State FRZ, En'ou Ctrl Handler (Hyper Armour)]
type = VarSet
trigger1 = 1
var(6) = Ctrl
ignorehitpause = 1

[State 3120, Earthquake!!!]
type = EnvShake
trigger1 = time = 1
time = 8
ampl = -5
phase = 5
freq = 100

;-----------------------
[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Hyper Armor]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1
;-----------------------

[State RTS, Reset Timer]
type = VarSet
trigger1 = Time = 0 && PrevStateNo != 9100
var(4) = 0
ignorehitpause = 1

[State RTS, Timer]
type = VarAdd
trigger1 = Time >= 1
var(4) = 1
ignorehitpause = 1

[State 3130, Anim]
type = ChangeAnim
trigger1 = Anim != 3150 && var(4) = 0
value = 3150

[State RXA, Width]
type = Width
trigger1 = 1
value = 25,15

[State 3150, Idle]
type = ChangeState
triggerall = var(20)
trigger1 = var(4) >= 10
value = 3110
ctrl = 0

[State 3150, End]
type = ChangeState
trigger1 = !var(20)
value = 3199
ctrl = 0

;---------------------------------------------------------------------------
;En'ou - End
[Statedef 3199]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 3199
ctrl = 0 + (0*(var(7):=0))
sprpriority = 2

[State RXA, Invulnerability]
type = NotHitBy
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
value = SCA
value2 = SCA

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 2
var(40) = 0

[State 3100, FX]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value =  3100, 2
volume = 255
volumescale = 255
channel = 1

[State -2, Flash PalFX]
type = PalfX
trigger1 = animelem = 1
trigger2 = time%2
add = 250,250,250
mul = 156,156,156
sinadd = -130,-30,-30,3
invertall = 0
color = 256
time = 1

[State 3100, Earthquake!!!]
type = EnvShake
trigger1 = AnimElemTime(1) = 5
time = 20
ampl = -4
phase = 4
freq = 100

[State 3100, Back]
type = Explod
trigger1 = AnimElemTime(1) = 0
anim = 33100
ID = 33100
pos = 0,0
postype = p1
bindtime = -1
removetime = 21
sprpriority = 1
ownpal = 1
removeongethit = 1

[State 3100, EXFIX]
type = ModifyExplod
trigger1 = NumExplod(33100)
ID = 33100
scale = (const(size.xscale) + 0.25) - (AnimElemTime(1) * 0.025),(const(size.yscale) + 0.3) - (AnimElemTime(1) * 0.025)
trans = addalpha
alpha = 128,128

[State 3100, SCL+]
type = AngleDraw
trigger1 = AnimElemTime(1) = [0,20]
value = 0
scale = 1 - (AnimElemTime(1) * 0.025),1 - (AnimElemTime(1) * 0.025)

[State 3100, SCLFix2]
type = AngleDraw
trigger1 = AnimElemTime(2) = [0,9]
value = 0
scale = (const(size.xscale) + 0.30),(const(size.yscale) - 0.30)

[State 3089]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Enoui Timer
[Statedef 4000]
type = A
movetype = I
physics = N
anim = 9999

[State 3030, 2]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 0
ID = 7878
anim = 15900
postype = left
pos = 19, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 3]
type = Explod
trigger1 = teamside = 1
trigger1 = time = 0
ID = 7879
anim = 15902
postype = left
pos = 142, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 4]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 0
ID = 7878
anim = 15901
postype = right
pos = -39, 220
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = 0.5,0.5

[State 3030, 5]
type = Explod
trigger1 = teamside = 2
trigger1 = time = 0
ID = 7979
anim = 15902
postype = right
pos = -143, 208
ownpal = 1
sprpriority = 5
bindtime = -1
removetime = -1

[State 3030, 6]
type = VarAdd
trigger1 = time > 0
fv = 0
value = 1

[State 3030, 7]
type = VarSet
trigger1 = time > 0
fv = 1
value = fvar(0) / 385

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 0
ID = 7979
scale = fvar(1),0.5

[State 3030, 7]
type = VarSet
trigger1 = time > 0
fv = 1
value = fvar(0) / -385

[State 3030, 8]
type = ModifyExplod
trigger1 = time > 0
ID = 7879
scale = fvar(1),0.5

[State 3030, 9]
type = ParentVarSet
trigger1 = fvar(0) > 195
v = 20
value = 1

[State 3030, 10]
type = RemoveExplod
trigger1 = fvar(0) > 195
trigger2 = parent, Win
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 3230
trigger5 = Parent, MoveType != H

[STate 3030, 11]
type = DestroySelf
trigger1 = fvar(0) > 195
trigger2 = 0
trigger3 = !(Parent, Alive)
trigger4 = Parent, Lose
trigger5 = Parent, StateNo = 3230
trigger5 = Parent, MoveType != H

;---------------------------------------------------------------------------
;POW
[Statedef 3200]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3200
ctrl = 0 + (0*(var(3):=0))
sprpriority = 2

[State SMD, RM]
type = VelSet
trigger1 = time = 0
y = 0

[State SMD, RM2]
type = PosSet
trigger1 = time = 0
y = 0

[State A-T, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 32020
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = anim = 3200 && AnimElem = 5
var(40) = 1

[State 3000, Helper]
type = Helper
trigger1 = anim = 3200 && AnimElem = 5
stateno = 8500
supermovetime = 99999999
pos = ceil(-20*const(size.xscale)),ceil(-45*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = anim = 3200 && AnimElem = 5
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = anim = 3200 && AnimElem = 5,< 0
value = SCA 

;--------------------------------------------

[State 3200, POW!!!]
type = PlaySnd
trigger1 = AnimElem = 25
value =  3200, 0
volume = 255
volumescale = 255
channel = 0

[State 3200, Projectiile]
type = Helper
trigger1 = AnimElem = 25
stateno = 33200
ID = 33200
pos = floor(28 * const(size.xscale)),floor(-62 * const(size.yscale))
name = "POW"

[State 3200, PFRF]
type = ChangeAnim
trigger1 = animtime = 0
value = 3201

[State 3200, SP]
type = ChangeState
trigger1 = var(3) = 1
value = 3201
ctrl = 0

[State 3200, SPR]
type = ChangeState
trigger1 = var(3) = -1
trigger2 = !NumHelper(33200) && animtime = 0
value = 3206
ctrl = 1

;---------------------------------------------------------------------------
;POW - Connected
[Statedef 3201]
type = S
movetype = A
physics = N
velset = 0,0
anim = 40
ctrl = 0
sprpriority = 2

[State 3201, CFX]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3201, SND]
type = PlaySnd
trigger1 = Time = 0
value = 190,0
volume = 255
volumescale = 255
channel = 0

[State 3201, AC1]
type = ChangeAnim
trigger1 = Anim = 40 && AnimTime = 0
value = 42

[State 3201, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 42
statetype = A
persistent = 0

[State 3201, VS]
type = VelAdd
trigger1 = Anim = 42
y = const(movement.yaccel)

[State 3201, TSR]
type = VelSet
trigger1 = Anim = 42 && AnimElemTime(1) = 0 && NumHelper(33200)
x = (abs(Helper(33200),RootDist X) * 0.026) * const(size.xscale)
y = -(12 * const(size.yscale))

[State 3201, 4]
type = ChangeState
trigger1 = NumHelper(33200) && Vel Y > 0
trigger1 = Helper(33200),RootDist X = [-45,45]
trigger1 = Helper(33200),RootDist Y = [-100,0]
value = 3202
ctrl = 0

;---------------------------------------------------------------------------
;POW - Eating
[Statedef 3202]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3202
ctrl = 0
sprpriority = 2

[State 3202, CFX]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3202, MHCG]
type = Helper
trigger1 = Time = 9
stateno = 33220
ID = 33220
name = "Munch Munch!!!"

[State 3202, FX1R]
type = AngleDraw
trigger1 = Time = [9,29]
value = 30

[State 3202, FX2R]
type = AngleDraw
trigger1 = Time = [30,53]
value = -90

[State 3202, FX3R]
type = AngleDraw
trigger1 = Time = [54,77]
value = 0

[State 3202, FX1]
type = PosSet
trigger1 = Time = 0 && NumHelper(33200)
x = (Helper(33200),Pos X) - (32 * facing)
y = -110 + (10 * (Helper(33200),Anim = [33211,33212]))

[State 3202, FX2]
type = PosSet
trigger1 = Time = 30 && NumHelper(33200)
x = (Helper(33200),Pos X) + (60 * facing)
y = -75 + (15 * (Helper(33200),Anim = [33211,33212]))

[State 3202, FX3]
type = PosSet
trigger1 = Time = 54 && NumHelper(33200)
x = (Helper(33200),Pos X) - (10 * facing)
y = -63

[State 3202, FRT]
type = PlaySnd
trigger1 = Time = 9 || Time = 30 || Time = 54
value = 3200,1
volume = 255
volumescale = 255
channel = 1

[State 3202, FX55]
type = ChangeState
trigger1 = Time >= 77
value = 3203
ctrl = 0

;---------------------------------------------------------------------------
;POW - Back
[Statedef 3203]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3203
ctrl = 0
sprpriority = 2

[State 3203, CFX]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 3203, RSTP]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3000, VarSet]
type = VarSet
trigger1 = time = 1
var(40) = 0

[State 3xxx, RX]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3xxx, RX2]
type = NotHitBy
trigger1 = 1
value2 = SCA

[State 3203, Pos]
type = PosAdd
trigger1 = AnimElemNo(0) < 6
x = -4 * const(size.xscale)

[State 3203, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = C

[State 3203, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3200,2
volume = 255
volumescale = 255
channel = 0

[State 3203, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 3204
ctrl = 0

;---------------------------------------------------------------------------
;POW - Jump Back
[Statedef 3204]
type    = A
movetype= I
physics = N
anim = 43
ctrl = 0
sprpriority = 0

[State 3204, CFX]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 3xxx, RX]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3xxx, RX2]
type = NotHitBy
trigger1 = 1
value2 = SCA

[State 3204, VAS]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel)

[State 3204, Vel]
type = VelSet
trigger1 = Time = 0
x = -3
y = -8

[State 3204, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 43 && Animtime = 0
value = 46

[State 3204, FX]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 3205

;---------------------------------------------------------------------------
;POW - End
[Statedef 3205]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 3205
sprpriority = 0

[State 3205, 1]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 3205, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 3205, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;POW - Miss
[Statedef 3206]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 12
sprpriority = 0

[State 3206, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 3000, VarSet]
type = VarSet
trigger1 = time = 1
var(40) = 0

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var]
type = VarSet
trigger1 = Time = 0
SysFVar(0) = vel y

[State 5100, 2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(GetHitVar(fall.yvel) = 0, 5100, 5200)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6]
type = ChangeState
triggerall = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger2 = !Alive
value = 5110

[State 5100, 7]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 8]
type = PosFreeze
trigger1 = 1

[State 5100, 9]
type = ChangeState
trigger1 = Time >= 3
value = 5101

[State 5100, 10]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_LIEDOWN2 (Vs series style)
[Statedef 5111]
type    = L
movetype= H
physics = N

[State 5110, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, 2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 3]
type = ChangeAnim
trigger1 = time = 0
value = ifelse((sysvar(0) && SelfAnimExist(5101)), 5101, 5100)

[State 5110, 6]
type = ChangeAnim
trigger1 = (Anim = [5100, 5101]) && (AnimTime = 0)
value = 5110

[State 5110, 7]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 8]
type = VarSet
trigger1 = sysvar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 9]
type = VarSet
trigger1 = Time = 0
SysFVar(0) = 0

;-----------------------------------------------------------

[State 5110, 9a]
type = SelfState
triggerall = Alive
trigger1 = Time >= 15
value = 5120

[State 5110, 9b]
type = SelfState
triggerall = !Alive
trigger1 = Anim = 5110
trigger2 = Time >= 15
value = 5150

[State 5110, 10]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 11]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1]  ;Clear all int variables
type = VarRangeSet
trigger1 = !RoundsExisted
first = 0
last = 58
value = 0

[State 5900, 2]  ;Clear all float variables
type = VarRangeSet
trigger1 = !RoundsExisted
fvalue = 0

[State 5900, 3x]
type = ChangeState
triggerall = time = 0
trigger1 = RoundNo != 1
trigger1 = !RoundsExisted
trigger1 = TeamMode = Turns
value = 192

[State 5900, 3a] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 5900, 3b] ;No intro for further rounds
type = ChangeState
trigger1 = roundno > 1
value = 0

;---------------------------------------------------------------------------
; GetHit States (Vs System callbacks)
[Statedef 6999]
type    = U
movetype= H
physics = N
facep2 = 1

[State VS-C, Own system (Standing GetHit)]
type = ChangeState
trigger1 = GetHitVar(groundtype) != 3
trigger1 = statetype = S
trigger1 = time = 0
value = 5000

[State VS-C, Own system (Crouching GetHit)]
type = ChangeState
trigger1 = GetHitVar(groundtype) != 3
trigger1 = statetype = C
trigger1 = time = 0
value = 5010

[State VS-C, Own system (Aerial GetHit)]
type = ChangeState
trigger1 = statetype = A
trigger1 = time = 0
value = 5020

[State VS-C, Own system (Trip GetHit)]
type = ChangeState
trigger1 = GetHitVar(groundtype) = 3
trigger1 = (statetype != A) && (statetype != L)
trigger1 = time = 0
value = 5070

[State VS-C, Own system (Laying Down GetHit)]
type = ChangeState
trigger1 = statetype = L
trigger1 = time = 0
value = 5080

;------------------------------------------------------------------------
;Super/Hyper Armor State
[Statedef 9100]
type = U
movetype = H
physics = U

[State 9000, 1x]
type = ChangeState
trigger1 = !Alive || !Life
value = 5000

[State RXA, No Throws]
type = NotHitBy
trigger1 = 1
value = ,AT
value2 = ,AT
ignorehitpause = 1

[State STB, Armor]
type = HitOverride
trigger1 = 1
time = 4
attr = SCA, AA,AP
stateno = 9100
slot = 0
ignorehitpause = 1

[State RXA, Width - Only For En'ou]
type = Width
trigger1 = 1
value = 25,15

[State 9000, PalFX]
type = PalFX
trigger1 = Time % 4 = 0
time = 2
add = 164,11,0
mul = 358,256,256
color = 128
ignorehitpause = 1

[State 9000, PosFreeze]
type = PosFreeze
trigger1 = 1
persistent = 1

[State 9000, 1]
type = OffSet
trigger1 = time%4 = 0
x=3
y=0

[State 9000, 1]
type = OffSet
trigger1 = time%4 = 2
x=-3
y=0

[State 9000, PosFreeze]
type = PosFreeze
trigger1 = movecontact
value = time = 10
persistent = 9

[State 9000, End]
type = posadd
trigger1 = (time >= 7) && (Life > 0)
x =-(19-time)

[State 9000, LifeAdd]
type = LifeAdd
trigger1 = 1
value = Ceil(GetHitVar(Damage) * 0.6)

[State 9000, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = Anim
elem = AnimElemNo(0)

[State 9000, End]
type = ChangeState
triggerall = Alive
trigger1 = Time >= floor(GetHitVar(HitTime) * 0.8)
value = var(5)
ctrl = var(6)

;---------------------------------------------------------------------------
; Kintoun Cloud Helper
[Statedef 30112]
type    = A
physics = N
movetype = I
anim = 30112
sprpriority = 0

[State 30112, Turn]
type = Turn
triggerall = time = 0
trigger1 = facing != root, facing
trigger2 = root, stateno = 116

[State 30112, BindToParent]
type = BindToParent
trigger1 = (root, stateno = [112,117]) && Time = [8,40]
pos = 0,5

[State 112, 1]
type = VelSet
trigger1 = AnimElem = 5
x = const(velocity.run.fwd.x) * 1

[State 30112, VelSet]
type = VelSet
trigger1 = fvar(0) && (Time = 34 || (root, stateno != [112,117]))
x = fvar(0)

[State 30112, swoosh]
type = PlaySnd
trigger1 = Time = 16
value = 190,1

[State 30112, Kame Sennin?]
type = Explod
trigger1 = Time = 8
pos = 0,-7
postype = p1
bindtime = -1
sprpriority = -1
anim = 30115
shadow = -1,0,0
removetime = -1
scale = (root, const(size.xscale)), (root, const(size.yscale))

[State 30112, EX]
type = Explod
trigger1 = Time = 8
pos = 0,-7
postype = p1
bindtime = -1
sprpriority = 1
anim = 30117
removetime = -1
scale = (root, const(size.xscale)), (root, const(size.yscale))

[State 30112, End Explods]
type = RemoveExplod
trigger1 = FrontEdgeDist < -90
trigger2 = BackEdgeDist < -90
trigger3 = Time >= 200

[State 30112, End]
type = DestroySelf
trigger1 = FrontEdgeDist < -90
trigger2 = BackEdgeDist < -90
trigger3 = Time >= 200

;---------------------------------------------------------------------------
;Guard Pole Helper
[Statedef 30120]
type = A
movetype = I
physics = N
anim = 9800
sprpriority = 0

[State 30120, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 30120, Pos Fix]
type = BindToRoot
trigger1 = root, Anim = 130
trigger2 = root, Anim = 150
pos = 0,-21 * (root, const(size.yscale))

[State 30120, Pos Fix]
type = BindToRoot
trigger1 = root, Anim = 131
trigger2 = root, Anim = 151
pos = 0,0

[State 30120, Pos Fix]
type = BindToRoot
trigger1 = root, Anim = 132
trigger2 = root, Anim = 152
pos = 7 * (root, const(size.xscale)),-43 * (root, const(size.yscale))

[State 30120, 0]
type = Turn
trigger1 = facing != (parent,facing)

[State 30120, Guard Pole A]
type = ChangeAnim
triggerall = anim != 30120
trigger1 = root, anim = [130,132]
trigger2 = root, anim = [150,152]
trigger3 = root, stateno = 156 && root, anim = 152
value = 30120

[State 30120, Guard Pole N]
type = ChangeAnim
triggerall = anim != 9800
trigger1 = root, anim = [120,122]
trigger2 = root, anim = [140,142]
trigger3 = root, stateno = 156 && root, anim != 152
value = 9800

[State 30130, Guard Helper]
type = Helper
trigger1 = !NumHelper(30130)
name = "Guard Pole Helper Extention"
ID = 30130
stateno = 30130

[State 30120, End]
type = DestroySelf
trigger1 = root, stateno != [120,156]

;---------------------------------------------------------------------------
;Guard Pole Helper Extention
[Statedef 30130]
type = A
movetype = I
physics = N
anim = 9800
sprpriority = 0

[State 30130, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 30130, Pos Fix]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 30130, 0]
type = Turn
trigger1 = facing != (parent,facing)

[State 30130, Guard Pole A]
type = ChangeAnim
triggerall = anim != 30130
trigger1 = parent,anim = 30120
value = 30130

[State 30120, Guard Pole N]
type = ChangeAnim
triggerall = anim != 9800
trigger1 = parent,anim != 30120
value = 9800

[State 30120, End]
type = DestroySelf
trigger1 = root, stateno != [120,156]

;------------------------------------------------------------------------------------------------------------
;Win 3 Helper
[Statedef 30182]
type = A
movetype = I
physics = N
anim = 30182
sprpriority = 1

[State 6183]
type = BindToParent
trigger1 = 1

[State 6183]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6183]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Parent,Stateno != 183

;------------------------------------------------------------------------------------------------------------
;Win 4 Helper
[Statedef 30183]
type = A
movetype = I
physics =N
anim = 30183
ctrl = 0
sprpriority = 1

[State 6184]
type = BindToParent
trigger1 = 1

[State 6184]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6184]
type = ChangeState
trigger1 = AnimTime = 0
value = 30184

[State 6184]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Parent,Stateno != 184

;------------------------------------------------------------------------------------------------------------
;Win 4 Helper
[Statedef 30184]
type = A
movetype = I
physics = N
anim = 30184
sprpriority = 1

[State 6185]
type = Turn
trigger1 = Time = 0

[State 0, BindToRoot]
type = BindToRoot
trigger1 = time = 0
pos = 19,-5

[State 6185]
type = PlaySnd
trigger1 = AnimElem = 2
value = 5,0

[State 6185]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6185]
type = VelAdd
trigger1 = AnimElem = 6, >= 0
y = (root, const(movement.yaccel))

[State 6185]
type = DestroySelf
trigger1 = Parent,Stateno != 184

;------------------------------------------------------------------------------------------------------------
;Stand Strong Punch Dust Helper
[Statedef 30220]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 30220, 1]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(IsHelper(30220), 30220, 30221)

[State 30220, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 30220, 3]
type = BindToParent
trigger1 = time = 0
pos = 80 * (root, const(size.xscale)),0

[State 30220, 4]
type = SprPriority
trigger1 = 1
value = ifelse(IsHelper(30220), 3, -1)

[State 30220, 5]
type = DestroySelf
trigger1 = AnimTime = 0

;------------------------------------------------------------------------------------------------------------
;Aerial Strong Punch Helper
[Statedef 30620]
type = S
movetype = I
physics = N
anim = 30620
ctrl = 0
sprpriority = 3

[State 6620]
type = BindToParent
trigger1 = 1
pos = 72 * (root, const(size.xscale)),-64 * (root, const(size.yscale))

[State 6620]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6620]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = root,alive = 0
trigger3 = root,stateno != 640

;------------------------------------------------------------------------------------------------------------
;Aerial Strong Punch Helper
[Statedef 30621]
type = S
movetype = I
physics = N
anim = 30621
ctrl = 0
sprpriority = 3

[State 6620]
type = BindToParent
trigger1 = 1
pos = 72 * (root, const(size.xscale)),-64 * (root, const(size.yscale))

[State 6620]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6620]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = root,alive = 0
trigger3 = root,stateno != 641

;------------------------------------------------------------------------------------------------------------
;Aerial Strong Punch Helper
[Statedef 30622]
type = S
movetype = I
physics = N
anim = 30622
ctrl = 0
sprpriority = 3

[State 6620]
type = BindToParent
trigger1 = 1
pos = 72 * (root, const(size.xscale)),-64 * (root, const(size.yscale))

[State 6620]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6620]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = root,alive = 0
trigger3 = root,stateno != 642

;------------------------------------------------------------------------------------------------------------
;Kingin no Hisago Vaccum Helper
[Statedef 31100]
type = S
movetype = I
physics = N
anim = 31100
ctrl = 0
sprpriority = -1
velset = 0,0

[State 31100, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 31100, 2]
type = BindToParent
trigger1 = 1
pos = 20,-6

[State 31101, 3]
type = VarAdd
trigger1 = parent,stateno = 1100 && Time >= 30
trigger2 = parent,stateno = 1110 && Time >= 31
var(1) = 36

[State 31101, 4]
type = Trans
trigger1 = var(1) > 0
trans = addalpha
alpha = 256 - var(1), var(1)

[State 31100, 5]
type = DestroySelf
trigger1 = parent,stateno != [1100,1110]
trigger2 = parent,stateno = 1100 && parent,animelem = 7
trigger3 = parent,stateNo = 1110 && parent,animelem = 8
trigger4 = parent,movetype = H

;------------------------------------------------------------------------------------------------------------
;Kingin no Hisago "Wut?" Helper
[Statedef 31101]
type = S
movetype = I
physics = N
anim = 31101
ctrl = 0
sprpriority = 3
velset = 0,0

[State 31101, FX-FX]
type = Turn
trigger1 = Time = 0 && facing = -1

[State 31101, 1]
type = VarAdd
trigger1 = Root, AnimElemNo(0) = [10,15]
var(1) = 8

[State 31101, 2]
type = VelSet
trigger1 = Time = 0
y = -0.2

[State 31101, 3]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 31101, 4]
type = Trans
trigger1 = Root, AnimElemNo(0) = [10,15]
trans = addalpha
alpha = 256 - var(1), var(1)

[State 31101, 5]
type = DestroySelf
trigger1 = parent,stateno != 1100
trigger2 = Parent,AnimElem = 15
trigger3 = parent,movetype = H

;------------------------------------------------------------------------------------------------------------
;Kingin no Hisago - Cooking Pot
[Statedef 31110]
type = S
movetype = I
physics = N
anim = 31110
ctrl = 0
sprpriority = -1
velset = 0,0

[State 21565]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 21565]
type = ChangeAnim
trigger1 = AnimTime = 0
value = Anim
elem = 14

[State 1570]
type = PlaySnd
trigger1 = Time = 0
value = 31100,0
volume = 215
volumescale = 215
channel = 2

[State 1570]
type = PlaySnd
trigger1 = (Time % 27) = 0 && AnimElemTime(4) >= 0
value = 31100,1
volume = 215
volumescale = 215
channel = 3

[State 21565]
type = ChangeState
trigger1 = parent,stateno = 1111
trigger2 = parent,stateno != [1110,1111]
value = (StateNo + 1)
ctrl = 0

;------------------------------------------------------------------------------------------------------------
;Kingin no Hisago - End
[Statedef 31111]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 21566]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 31101, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 3

[State 31101, 4]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (Time*70), (Time*70)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Time = 4
flag = invisible

[State 21566]
type = Explod
trigger1 = Time = [0,4]
anim = 32016
postype = p1
pos = 0,floor(-40 * const(size.yscale))
random = 40,40
sprpriority = 3
scale = 2,2

[State 21566]
type = PlaySnd
trigger1 = Time = 1
value = 32016,0
volume = 150
volumescale = 150
channel = 2

[State 21566]
type = DestroySelf
trigger1 = Time >= 5

;------------------------------------------------------------------------------------------------------------
;Shienbu Helper - Breath
[Statedef 31200]
type = S
movetype = I
physics = N
anim = 31200
ctrl = 0
sprpriority = 0
velset = 0,0

[State 31200, Check state]
type = Varset
trigger1 = Time = 0
var(1) = parent,stateno

[State 31200, Binded]
type = BindToParent
trigger1 = 1
pos = 12*(parent,const(size.xscale)),-38*(parent,const(size.yscale))

[State 31200, No shadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 31200, Pretty wierd scale...]
type = AngleDraw
trigger1 = 1
value = 0
scale = 0.7,0.3

[State 31200, Fade away]
type = Trans
trigger1 = Time >= 12
trans = addalpha
alpha = 256 - ((Time-12)*38),((Time-12)*38)

[State 31200, Done]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = parent,stateno != var(1)
trigger3 = parent,movetype = H

;------------------------------------------------------------------------------------------------------------
;Shienbu Helper - Launching
[Statedef 31201]
type = S
movetype = I
physics = N
anim = 31201
ctrl = 0
sprpriority = 2
velset = 0,0

[State 31201, Set State]
type = Varset
trigger1 = Time = 0
var(1) = parent,stateno

[State 31201, Bind]
type = BindToParent
trigger1 = 1
pos = 38*(parent,const(size.xscale)),-48*(parent,const(size.yscale))

[State 31201, EX]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 31201, Projectile 1]
type = Helper
trigger1 = AnimTime = 0
stateno = 31210
ID = 31210
pos = floor(ParentDist X) + 66,floor(ParentDist Y) -60
name = "Monkey 1"

[State 31201, Projectile 2]
type = Helper
trigger1 = AnimTime = 0
stateno = 31210
ID = 31211
pos = floor(ParentDist X) + 66,floor(ParentDist Y) -45
name = "Monkey 2"

[State 31201, Projectile 3]
type = Helper
trigger1 = AnimTime = 0
stateno = 31210
ID = 31212
pos = floor(ParentDist X) + 66,floor(ParentDist Y) -30
name = "Monkey 3"

[State 31201, End]
type = DestroySelf
trigger1 = Animtime = 0
trigger2 = parent,stateno != var(1)
trigger3 = parent,movetype = H

;------------------------------------------------------------------------------------------------------------
;Shienbu Helper - Monkeys
[Statedef 31210]
type = U
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0

[State 31210, VarSet]
type = VarSet
trigger1 = Time = 0
var(0) = (root, stateNo)

[State 31210, SM]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 31210, SM]
type = ChangeAnim
trigger1 = IsHelper(31210) && Time = 0 && Anim != 31210
value = 31210

[State 31210, SM]
type = ChangeAnim
trigger1 = IsHelper(31211) && Time = 0 && Anim != 31211
value = 31211

[State 31210, SM]
type = ChangeAnim
trigger1 = IsHelper(31212) && Time = 0 && Anim != 31212
value = 31212

[State SYS-H, D-Dampener]
type = VarSet
trigger1 = 1
fvar(22) = (root, fvar(22))
ignorehitpause = 1

[State SYS-H, Set]
type = AttackMulSet
trigger1 = 1
value = fvar(22)
ignorehitpause = 1

[State 31210, SM]
type = HitBy
trigger1 = 1
value = SCA,AP
ignorehitpause = 1

[State 31210, SM]
type = HitBy
trigger1 = 1
value2 = SCA,AP
ignorehitpause = 1

[State 31210, SM]
type = HitOverride
trigger1 = 1
stateno = 31220
attr = SCA,AP
slot = 0
time = -1
ignorehitpause = 1

[State 31210, SM]
type = PlaySnd
trigger1 = (Time % 7) = 0 && Time >= 7
value = 182,1
volume = 160
volumescale = 160
channel = 2

[State 31210]
type = VelAdd
trigger1 = IsHelper(31210) && Vel Y = [-3,2]
y = 0.3

[State 31210]
type = VelAdd
trigger1 = IsHelper(31212) && Vel Y = [-2,3]
y = -0.3

[State 31210, SM]
type = VelSet
trigger1 = time = 0
x = 3 + (1*(var(0) = 1210))
y = ifelse(IsHelper(31210), -3, ifelse(IsHelper(31212), 3, 0))

[State 31210, SM]
type = Varset
trigger1 = !IsHelper(31211) && Vel X > 0
fvar(0) = ((atan((-1*Vel Y)/Vel X))*(360/(2*pi)))

[State 31210, SM]
type = VarSet
trigger1 = !IsHelper(31211) && Vel X < 0
fvar(0) = (180 + ((atan((-1*Vel Y)/Vel X))*(360/(2*pi))))

[State 31210, SM]
type = VarSet
trigger1 = Vel X = 0
fvar(0) = 0

[State 31210, SM]
type = AngleSet
trigger1 = 1
value = fvar(0)

[State 31210, SM]
type = AngleDraw
trigger1 = 1

[State 31210, SM]
type = PlaySnd
trigger1 = movehit
value = 5,3
channel = 5

[State 31210, SM]
type = HitDef
attr = A, SP
trigger1 = Time = 0
damage = 32,2
animtype = Hard
priority  = 4, Hit
hitflag = MAFD
guardflag = MA
pausetime = 0,6
;sparkxy = -10,-10
hitsound   = S9999,2
guardsound = S6,0
sparkno = s9999
guard.sparkno = s8050
ground.type = High
air.type = High
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 7
down.velocity = -6,-7
ground.velocity = -11.4
yaccel = .99
air.velocity = -5,-5
guard.velocity = -12
airguard.velocity = -10.5,3
yaccel = (enemynear,const(movement.yaccel)) + 0.1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall.animtype = DiagUp
fall.yvelocity = -1
ID = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - (15 + (30*IsHelper(31211)) + (55*IsHelper(31212))))
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 31210, SM]
type = ChangeState
trigger1 = MoveContact || MoveReversed
value = 31220
ignorehitpause = 1

[State 31210, SM]
type = DestroySelf
trigger1 = FrontEdgeDist < -70
trigger2 = Time >= 300

;------------------------------------------------------------------------------------------------------------
;Shienbu End
[Statedef 31220]
type = A
movetype = I
physics = N
anim = 31220
ctrl = 0
sprpriority = 2
velset = 0,0

[State 31220, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 31220, 2]
type = Velset
trigger1 = Time = 0
x = -1 - (random % 3)
y = -1 + (random % 3)

[State 31220, 3]
type = VelAdd
trigger1 = 1
y = 0.4

[State 31220, End]
type = DestroySelf
trigger1 = ScreenPos Y > 240
trigger2 = Time > 300

;------------------------------------------------------------------------------------------------------------
;Tenchi Tsuukan Pole Helper - Going Up
[Statedef 33000]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 3
velset = 0,0

[State 33000, Timer 1]
type = VarAdd
trigger1 = Time >= 1
var(0) = 1
ignorehitpause = 1

[State 33000, ACHFX]
type = ChangeAnim
trigger1 = var(0) = 0 && Anim != 33000
value = 33000

[State 33000, FXDS]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33000, 1]
type = VelSet
trigger1 = var(0) = 0
y = -(26 * (root,const(size.yscale)))

[State SYS-H, D-Dampener]
type = VarSet
trigger1 = 1
fvar(22) = (root, fvar(22))
ignorehitpause = 1

[State SYS-H, Set]
type = AttackMulSet
trigger1 = 1
value = fvar(22)
ignorehitpause = 1

[State 33000, STPRV]
type = HitBy
trigger1 = 1
value = SCA,AP
ignorehitpause = 1

[State 33000, STPRV-PREV2]
type = HitBy
trigger1 = 1
value2 = SCA,AP
ignorehitpause = 1

[State 33000, STRAW]
type = HitOverride
trigger1 = 1
stateno = 33000
attr = SCA,AP
slot = 0
time = -1
ignorehitpause = 1

[State 33000, 2]
type = HitDef
trigger1 = var(0) = 0 && root,anim = 3000
trigger2 = var(0) = 1 && root,anim = 3010
attr = A, HP
damage = 10,10
animtype = Hard
priority  = 5, Hit
guardflag = MA
hitflag = MAFD
pausetime = 0,3
sparkxy = -10,-25
hitsound   = S5,2
guardsound = S6,0
sparkno = s9999
ground.type = High
guard.sparkno = s8050
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = 0,-14
air.velocity = 0,-14
guard.velocity = -13
down.velocity = -6,-7
airguard.velocity = -10.5,3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recovertime = 25
fall.animtype = Up
fall.yvelocity = 0
yaccel = (enemynear,const(movement.yaccel)) + 0.25
getpower = 0,0
ID = 33000

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 35)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 33000, Ready to attack]
type = ChangeState
trigger1 = root, anim = 3000 && root,animelem = 5
trigger2 = root, anim = 3010 && root,animelem = 3
value = 33001

;------------------------------------------------------------------------------------------------------------
;Tenchi Tsuukan Pole Helper - Great Pole attack
[Statedef 33001]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 3
velset = 0,0

[State 33001, Timer 2]
type = VarAdd
trigger1 = Time >= 1
var(1) = 1
ignorehitpause = 1

[State 33001, Reset Position]
type = PosSet
trigger1 = var(1) = 0
x = ((Parent,Pos X) + (37 * (parent,const(size.xscale))) * Facing)
y = (Parent,Pos Y) - (((Parent, ScreenPos Y) + 30) * (parent,const(size.yscale)))

[State 33001, ACHFX]
type = ChangeAnim
trigger1 = var(1) = 0 && Anim != 33001
value = 33001

[State 33001, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State SYS-H, D-Dampener]
type = VarSet
trigger1 = 1
fvar(22) = (root, fvar(22))
ignorehitpause = 1

[State SYS-H, Set]
type = AttackMulSet
trigger1 = 1
value = fvar(22)
ignorehitpause = 1

[State 33001, STPRV]
type = HitBy
trigger1 = 1
value = SCA,AP
ignorehitpause = 1

[State 33001, STPRV-PREV2]
type = HitBy
trigger1 = 1
value2 = SCA,AP
ignorehitpause = 1

[State 33001, STRAW]
type = HitOverride
trigger1 = 1
stateno = 33001
attr = SCA,NP,SP
slot = 0
time = -1
ignorehitpause = 1

[State 33001, STRAW-RP]
type = HitOverride
trigger1 = 1
stateno = 33002
attr = SCA,HP
slot = 0
time = -1
ignorehitpause = 1

[State 33001, 2]
type = VelAdd
trigger1 = 1
y = 0.7

[State 33001, 3]
type = VelSet
trigger1 = var(1) = 0
x = 8 * (root,const(size.xscale))
y = 16 * (root,const(size.yscale))

[State 1120, _[W{CX]
type = PlaySnd
triggerall = NumHelper(33000)
trigger1 = p2stateno = 5000
trigger2 = p2stateno = 5010
trigger3 = p2stateno = 5020
trigger4 = p2stateno = 5070
trigger5 = p2stateno = 5080
trigger5 = p2stateno = 5030
value = s5,3
channel = 6
volume = 100
volumescale = 100

[State 33001, 4]
type = HitDef
trigger1 = var(2) < 5 && var(2) != -1
attr = A, HP
damage = 60,5
animtype = Hard
priority  = 5, Hit
guardflag = MA
hitflag = MAFD
pausetime = 7,8
sparkxy = -10,-30
hitsound   = S9999,0
guardsound = S6,0
sparkno = s9999
guard.sparkno = s8050
ground.type = High
air.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 4
ground.velocity = -8,-6
air.velocity = -12,3
yaccel = 1.21
guard.velocity = -11
airguard.velocity = -10.5,3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.animtype = DiagUp
fall.yvelocity = 0
getpower = 0,0
ID = 33001

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, HCRAF]
type = VarAdd
trigger1 = MoveGuarded || MoveHit && var(2) != -1
var(2) = 1
ignorehitpause = 1

[State 33001, STATT]
type = VarSet
trigger1 = MoveReversed
var(2) = -1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 33001, Idle mode]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 33002

;------------------------------------------------------------------------------------------------------------
;Tenchi Tsuukan Pole Helper - Idle
[Statedef 33002]
type = U
movetype = I
physics = N
anim = 33002
ctrl = 0
sprpriority = 3
velset = 0,0

[State 33002, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33002, PFIX]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State SYS-FX, Explod S]
type = Explod
trigger1 = Pos Y >= 0
anim = 8010
pos = 0,0
postype = p1
removetime = -2
sprpriority = 5
ontop = 1
scale = 0.7, 0.7
ownpal = 1
persistent = 0

[State 33002, Sound]
type = PlaySnd
trigger1 = Pos Y >= 0
value = 0,9
channel = 2
volume = 200
volumescale = 200
persistent = 0

[State 33002, Effect]
type = EnvShake
trigger1 = Pos Y >= 0
time = 14
ampl = -6
phase = 5
freq = 130
persistent = 0

[State 33002, Return]
type = ChangeState
trigger1 = Time >= 10
value = 33003

;------------------------------------------------------------------------------------------------------------
;Tenchi Tsuukan Pole Helper - Leaving Stage
[Statedef 33003]
type = U
movetype = I
physics = N
ctrl = 0
sprpriority = 3
velset = 0,0

[State 33003, 1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33003, VA-]
type = VelAdd
trigger1 = 1
y = -0.7

[State 33003, VS]
type = VelSet
trigger1 = Time = 0
x = -6 * (root,const(size.xscale))
y = -14 * (root,const(size.yscale))

[State 33003, End]
type = DestroySelf
trigger1 = ScreenPos Y < -100

;---------------------------------------------------------------------------
;En'ou - Punch Effect
[Statedef 33130]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 3

[State TTYT, Turn]
type = Turn
trigger1 = facing != (root,facing)

[State 33130, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33130, ChangeAnim]
type = ChangeAnim
trigger1 = root,Anim = 3130 && Time = 0
value = 33130 + (IsHelper(33131)) + (IsHelper(33132) * 2)

[State 33130, ChangeAnim]
type = ChangeAnim
trigger1 = root,Anim = 3131 && Time = 0
value = 33133 + (IsHelper(33134))

[State 33130, BindToParent]
type = BindToParent
trigger1 = root,Anim = 3130 && IsHelper(33130)
pos = 87,-175

[State 33130, BindToParent]
type = BindToParent
trigger1 = root,Anim = 3130 && IsHelper(33131)
pos = 127,-133

[State 33130, BindToParent]
type = BindToParent
trigger1 = root,Anim = 3130 && IsHelper(33132)
pos = 130,-83

[State 33130, BindToParent]
type = BindToParent
trigger1 = root,Anim = 3131 && (IsHelper(33133) || IsHelper(33134))
pos = 0,0

[State 33130, AngleDraw]
type = AngleDraw
trigger1 = root,Anim = 3130 && IsHelper(33130)
value = 65

[State 33130, AngleDraw]
type = AngleDraw
trigger1 = root,Anim = 3130 && IsHelper(33131)
value = 45

[State 33130, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 3130
trigger2 = root,stateno = 3130 && root,Anim = 3130 && root,AnimElemNo(0) > 3
trigger3 = root,stateno = 3130 && root,Anim = 3131 && root,AnimElemNo(0) > 4

;---------------------------------------------------------------------------
;En'ou - Fire
[Statedef 33140]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 33140
sprpriority = 3

[State 33140, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State TTYT, Turn]
type = Turn
trigger1 = facing != (root,facing)

[State 33140, VarSet]
type = VarSet
trigger1 = root,stateno != 9100
var(1) = (root,stateno)

[State 33140, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3141
value = 0
scale = 1.25,1

[State 33140, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3142
value = 20
scale = 1.25,1

[State 33140, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3143
value = 40
scale = 1.25,1

[State 33140, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3144
value = -20
scale = 1.25,1

[State 33140, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3145
value = -40
scale = 1.25,1

[State 33140, BindToParent]
type = BindToParent
trigger1 = var(1) = 3141
pos = (42 * const(size.xscale)),(5 * const(size.yscale))

[State 33140, BindToParent]
type = BindToParent
trigger1 = var(1) = 3142
pos = (45 * const(size.xscale)),(-10 * const(size.yscale))

[State 33140, BindToParent]
type = BindToParent
trigger1 = var(1) = 3143
pos = (35 * const(size.xscale)),(-23 * const(size.yscale))

[State 33140, BindToParent]
type = BindToParent
trigger1 = var(1) = 3144
pos = (45 * const(size.xscale)),(15 * const(size.yscale))

[State 33140, BindToParent]
type = BindToParent
trigger1 = var(1) = 3145
pos = (30 * const(size.xscale)),(25 * const(size.yscale))

[State PNC, 1]; Yes... an ugly hack
type = Helper
trigger1 = AnimElemTime(4) = 0 && !NumHelper(33141)
name = "I HIT YOU!!!"
ID = 33141
stateno = 33141

[State 33140, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != [3141,3145]
trigger1 = root,stateno != 9100

;---------------------------------------------------------------------------
;En'ou - Fire Hit
[Statedef 33141]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 0

[State 33141, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State TTYT, Turn]
type = Turn
trigger1 = facing != (root,facing)

[State 33141, VarSet]
type = VarSet
trigger1 = root,stateno != 9100
var(1) = (root,stateno)

[State RXA, FTS]
type = HitBy
trigger1 = 1
value = SCA,AP
value2 = SCA,AP
ignorehitpause = 1

[State STB, STF]
type = HitOverride
trigger1 = 1
time = 1
attr = SCA,AP
stateno = 33141
slot = 0
time = -1
ignorehitpause = 1

[State SYS-H, D-Dampener]
type = VarSet
trigger1 = 1
fvar(22) = (root, fvar(22))
ignorehitpause = 1

[State SYS-H, Set]
type = AttackMulSet
trigger1 = 1
value = fvar(22)
ignorehitpause = 1

[State 33141, ChangeAnim]
type = ChangeAnim
trigger1 = var(1) = 3141
value = 33141

[State 33141, ChangeAnim]
type = ChangeAnim
trigger1 = var(1) = 3142
value = 33142

[State 33141, ChangeAnim]
type = ChangeAnim
trigger1 = var(1) = 3143
value = 33143

[State 33141, ChangeAnim]
type = ChangeAnim
trigger1 = var(1) = 3144
value = 33144

[State 33141, ChangeAnim]
type = ChangeAnim
trigger1 = var(1) = 3145
value = 33145

[State 33141, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 33141, HitDef]
type = HitDef
trigger1 = Time % 14 = 0
attr = S,HP
hitflag = MAFD
guardflag = MA
animtype = Hard
air.animtype = Hard
fall.animtype = Hard
priority = 5,Hit
damage = 48,5
pausetime = 0,7
sparkno = -1
sparkxy = 0,40
guard.sparkno = s8050
hitsound = S5,3
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 28
ground.hittime = 28
air.hittime = 20
guard.dist = 320
yaccel =  1.11
ground.velocity = -5,-14
guard.velocity = -13
down.velocity = -6,-7
air.velocity = -5,-14
airguard.velocity = -10.5,3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.yvelocity = 0
fall.recover = 0
ID = 1+16
getpower = 0,0
palfx.time = 39
palfx.add = 224,64,0
palfx.mul = 256,240,32
palfx.sinadd = 48,16,0,4
palfx.color = 8

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 33141, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != [3141,3145]
trigger1 = root,stateno != 9100

;---------------------------------------------------------------------------
;En'ou - Head helper
[Statedef 33150]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 33150
ctrl = 0
sprpriority = 3

[State 33150, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State TTYT, Turn]
type = Turn
trigger1 = facing != (root,facing)

[State 33150, VarSet]
type = VarSet
trigger1 = root,stateno != 9100
var(1) = (root,stateno)

[State 33150, BG]
type = PlaySnd
trigger1 = Time = 26
value = 3100,4
loop = 1
channel = 1

[State 33150, Earthquake!!!]
type = EnvShake
trigger1 = Time % 15 = 0
time = 7
ampl = -2
phase = 2
freq = 70

[State 33150, BindToParent]
type = BindToParent
trigger1 = var(1) = [3141,3142]
trigger2 = var(1) = 3144
pos = (28 * const(size.xscale)),(-115 * const(size.yscale))

[State 33150, BindToParent]
type = BindToParent
trigger1 = var(1) = 3143
pos = (18 * const(size.xscale)),(-115 * const(size.yscale))

[State 33150, BindToParent]
type = BindToParent
trigger1 = var(1) = 3145
pos = (31 * const(size.xscale)),(-115 * const(size.yscale))

[State 33150, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3141
value = 0

[State 33150, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3142
value = 20

[State 33150, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3143
value = 40

[State 33150, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3144
value = -20

[State 33150, AngleDraw]
type = AngleDraw
trigger1 = var(1) = 3145
value = -40

[State PNC, 1]
type = Helper
trigger1 = Time = 0 && !NumHelper(33140)
name = "Fire"
ID = 33140
stateno = 33140
ownpal = 1

[State 33150, NO HEAD!!!]
type = ChangeState
trigger1 = root,stateno != [3141,3149]
trigger1 = root,stateno != 9100
value = 33151

;---------------------------------------------------------------------------
;En'ou - Head End
[Statedef 33151]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 0

[State 33151, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State 33151, PlaySnd]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 33151, NO HEAD!!!]
type = DestroySelf
trigger1 = Time = 0

;------------------------------------------------------------------------------------------------------------
;POW Helper
[Statedef 33200]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 2

[State 33200, RXABS]
type = VelSet
trigger1 = var(0) = 0
x = 0
y = 0

[State 33200, Timer]
type = VarAdd
trigger1 = Time >= 1
var(0) = 1

[State 33200, Anim]
type = ChangeAnim
trigger1 = var(0) = 0 && Anim != 33200
value = 33200

[State 33200, FXN]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33200, Pow Small]
type = Explod
trigger1 = var(0) = 0 && !NumExplod(33200)
anim = 33201
ID = 33200
pos = 0,0
postype = p1
facing = facing
bindtime = -1
removetime = 5
scale = 0.1*const(size.xscale),0.1*const(size.yscale)
sprpriority = -1
ownpal = 1

[State 33200, Pow Growing]
type = Explod
trigger1 = var(0) = [5,36]
anim = 33201
ID = 33201
pos = 0,0
postype = p1
facing = facing
bindtime = -1
removetime = 1
scale = (0.11*(var(0)*0.25)) * const(size.xscale),(0.11*(var(0)*0.25)) * const(size.yscale)
sprpriority = -1
ownpal = 1

[State 33200, Pow Big]
type = Explod
trigger1 = var(0) > 36
anim = 33201
ID = 33201
pos = 0,0
postype = p1
facing = facing
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1

[State 33200, VelSet]
type = VelSet
trigger1 = var(0) = 1
x = 2 * (root,const(size.xscale))

[State 33200, VelSet]
type = VelSet
trigger1 = var(0) = 9
x = 4 * (root,const(size.xscale))

[State 33200, STF]
type = HitBy
trigger1 = 1
value = SCA,AP
ignorehitpause = 1

[State 33200, STF-1]
type = HitBy
trigger1 = 1
value2 = SCA,AP
ignorehitpause = 1

[State 33200, Arm]
type = HitOverride
trigger1 = 1
stateno = 33200
attr = SCA,NP,SP
slot = 0
time = -1
ignorehitpause = 1

[State 33200, Arm]
type = HitOverride
trigger1 = 1
stateno = 33216
attr = SCA,HP
slot = 1
time = -1
ignorehitpause = 1

[State 33200, 1]
type = HitDef
trigger1 = Time = 1
damage = 15,10
animtype = Hard
priority  = 5, Hit
attr = S, HP
guardflag = MA
hitflag = MAFD
sparkxy = -10,-10
hitsound   = S5,2
guardsound = S6,0
sparkno = -1
guard.sparkno = s8050
ground.type = High
air.type = Low
guard.pausetime = 0,9
guard.hittime = 9
ground.slidetime = 9
guard.velocity = -13
airguard.velocity = -10.5,3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.yvelocity = 0
fall.animtype = DiagUp
yaccel = (enemynear,const(movement.yaccel)) + 0.2
getpower = 0,0
hitonce = 1
ID = 33200
kill = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 50), Floor(ifelse(MoveHit, -30, P2Dist Y - 30))
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 33200, POW Connected]
type = ChangeState
trigger1 = MoveHit && NumTarget(33200)
value = 33210
ignorehitpause = 1

[State 33200, Reset]
type = ChangeState
trigger1 = MoveReversed
value = 33200
ignorehitpause = 1

[State 33200, Action 1]
type = ParentVarSet
trigger1 = FrontEdgeDist < -100
trigger2 = Time > 100
var(3) = -1

[State 33200, NoFX]
type = RemoveExplod
trigger1 = FrontEdgeDist < -100
trigger2 = Time > 100

[State 33200, End]
type = DestroySelf
trigger1 = FrontEdgeDist < -100
trigger2 = Time > 100

;---------------------------------------------------------------------------
; POW Helper - Fruit State 1
[Statedef 33210]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State SYS-RXZ88, PREVST]
type = ChangeState
trigger1 = Root,StateNo != [3200,3206]
value = 33216

[State 33210, CFX]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 33210, FX]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33210 NoFX]
type = RemoveExplod
trigger1 = time = 0
ID = 33200

[State 33210, NoFX Alt]
type = RemoveExplod
trigger1 = time = 0
ID = 33201

[State G-FX, Magic Dust]
type = Explod
trigger1 = Time = 0
anim = 8200
postype = p1
pos = 40, -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 8, 8
ontop = 1
ownpal = 1

[State 33210, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 33210, TargetState]
type = TargetState
trigger1 = Time = 0
value = 33230
ID = 33200

[State 33210, Bind]
type = TargetBind
trigger1 = 1
pos = 0,0
ID = 33200

[State 33210, Choose Fruit]
type = VarRandom
trigger1 = Time = 0
v = 10
range = 0,2

[State 33210, Anim]
type = ChangeAnim
trigger1 = 1
value = 33210 + var(10)
elem = 1

[State 33210, Vel]
type = VelSet
trigger1 = Time = 0
y = -6

[State 33210, Accel]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.4

[State 33210, Bounce 1]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 33211

;---------------------------------------------------------------------------
; POW Helper - Fruit State 2
[Statedef 33211]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State SYS-RXZ88, PREVST]
type = ChangeState
trigger1 = Root,StateNo != [3200,3206]
value = 33216

[State 33211, CFX]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 33211, FX]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33211, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 33211, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = Anim
elem = 1

[State 33211, AngleDraw]
type = AngleDraw
trigger1 = Time = [0,9]
scale = 1, 1 - (Time*0.02)

[State 33211, Bind]
type = TargetBind
trigger1 = 1
pos = 0,0
ID = 33200

[State 33211, Vel]
type = VelSet
trigger1 = Time = 10
y = -4

[State 33211, Accel]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.4

[State 33211, It's MEAL TIME!!!!!!!!]
type = ParentVarset
trigger1 = time = 0
var(3) = 1

[State 33211, End]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 33212

;---------------------------------------------------------------------------
; POW Helper - Fruit State 3
[Statedef 33212]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State SYS-RXZ88, PREVST]
type = ChangeState
trigger1 = Root,StateNo != [3200,3206]
value = 33216

[State 33212, CFX]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 33212, FX]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33212, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 33212, AngleDraw]
type = AngleDraw
trigger1 = Time = [0,9]
scale = 1, 1 - (Time * 0.02)

[State 33212, Complete]
type = ChangeAnim
trigger1 = parent,anim != 3202
trigger2 = parent,anim = 3202 && parent,time = [0,30]
value = Anim
elem = 1

[State 33212, Eaten 1]
type = ChangeAnim
trigger1 = parent,anim = 3202 && parent,time = [31,54]
value = Anim
elem = 2

[State 33212, Eaten 2]
type = ChangeAnim
trigger1 = parent,anim = 3202 && parent,time >= 55
value = Anim
elem = 3

[State 33212, Bind]
type = TargetBind
trigger1 = 1
pos = 0,0
ID = 33200

[State SYS-H, D-Dampener]
type = VarSet
trigger1 = 1
fvar(22) = (root, fvar(22))
ignorehitpause = 1

[State SYS-H, Set]
type = AttackMulSet
trigger1 = 1
value = fvar(22)
ignorehitpause = 1

[State 33212, I'LL DRAIN YOUR LIFE!!!]
type = TargetLifeAdd
triggerall = parent,anim = 3202
trigger1 = parent,Time = 9 || parent,Time = 30 || parent,Time = 54
value = -floor(30 * fvar(22))
ID = 33200
kill = 0

[State 33212, Puf!!!]
type = ChangeState
trigger1 = parent,stateno = 3203
value = 33213

;---------------------------------------------------------------------------
; POW Helper - Seed State 1
[Statedef 33213]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 33213
sprpriority = 2

[State 33213, CFX]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 33213, FX]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State G-FX, Magic Dust]
type = Explod
trigger1 = Time = 0
anim = 8200
postype = p1
pos = 0, -50
bindtime = 1
removetime = -2
supermovetime = 500
scale = 10, 10
ontop = 1
ownpal = 1

[State 33213, ModifyExplod]
type = ModifyExplod
trigger1 = Time = [0,8]
scale = 10 - (Time+1),10 - (Time+1)

[State 33213, End Invisible mode]
type = VarSet
trigger1 = Parent, Anim = 3203 && Parent,AnimElemTime(14) = 1
var(11) = 1

[State 33213, Not Seen...]
type = AssertSpecial
trigger1 = !var(11)
flag = invisible

[State 33213, BindToParent]
type = BindToParent
trigger1 = !var(11)
pos = 21 * const(size.xscale),-36 * const(size.yscale)

[State 33213, Bind]
type = TargetBind
trigger1 = 1
pos = 0,0
ID = 33200

[State 33213, Rotation Time!!]
type = VarSet
trigger1 = Parent,AnimElemTime(14) = 2
var(12) = 1

[State 33213, Rotation Angle]
type = VarAdd
trigger1 = var(12)
var(13) = -35

[State 33213, AngleDraw]
type = AngleDraw
trigger1 = var(12)
value = var(13)

[State 33213, Accel]
type = VelAdd
trigger1 = var(12)
y = 0.4

[State 33213, Vel]
type = VelSet
trigger1 = var(12)
x = 3 * const(size.xscale)
y = -8 * const(size.yscale)
persistent = 0

[State 33213, Bounce]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 33214

;---------------------------------------------------------------------------
; POW Helper - Seed State 2
[Statedef 33214]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 33213
sprpriority = 2

[State 33214, CFX]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 33214, FX]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33214, Accel]
type = VelAdd
trigger1 = 1
y = 0.4

[State 33214, Vel]
type = VelSet
trigger1 = Time = 0
x = 2 * const(size.xscale)
y = -6 * const(size.yscale)
persistent = 0

[State 33214, Bind]
type = TargetBind
trigger1 = 1
pos = 0,0
ID = 33200

[State 33214, Rotation]
type = VarAdd
trigger1 = var(12)
var(13) = -35

[State 33214, AngleDraw]
type = AngleDraw
trigger1 = var(12)
value = var(13)

[State 33214, End]
type = ChangeState
trigger1 = Time = 20
value = 33215

;---------------------------------------------------------------------------
; POW Helper - End
[Statedef 33215]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 9800
sprpriority = 2

[State 33215, CFX]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 33215, FX]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State SYS-H, D-Dampener]
type = VarSet
trigger1 = 1
fvar(22) = (root, fvar(22))
ignorehitpause = 1

[State SYS-H, Set]
type = AttackMulSet
trigger1 = 1
value = fvar(22)
ignorehitpause = 1

[State 33215, DRAIN!!!!]
type = TargetLifeAdd
trigger1 = Time = 0
value = -floor(190 * fvar(22))
ID = 33200

[State 33215, TargetState]
type = TargetState
trigger1 = Time = 0
value = 33231
ID = 33200

[State G-FX, Magic Dust]
type = Explod
trigger1 = Time = 0
anim = 8200
postype = p1
pos = 0, -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 8, 8
ontop = 1
ownpal = 1

[State 33215, ModifyExplod]
type = ModifyExplod
trigger1 = Time = [0,6]
scale = 8 - (Time+1),8 - (Time+1)

[State 3049]
type = DestroySelf
trigger1 = Time = 7

;---------------------------------------------------------------------------
; POW Helper - Alternate End
[Statedef 33216]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 9800
sprpriority = 2

[State 33215, FX]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State 33216 NoFX]
type = RemoveExplod
trigger1 = time = 0

[State G-FX, Magic Dust]
type = Explod
trigger1 = Time = 0
anim = 8200
postype = p1
pos = 0, 0
bindtime = 1
removetime = -2
supermovetime = 500
scale = 8, 8
ontop = 1
ownpal = 1

[State 33200, Action 1]
type = ParentVarSet
trigger1 = 1
var(3) = -1

[State 3049]
type = DestroySelf
trigger1 = Time = 7

;---------------------------------------------------------------------------
;Munch helper (HUH!!)
[Statedef 33220]
type    = A
movetype= I
physics = N
velset = 0,0
sprpriority = 3

[State 33220, CFX]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 33220, FX]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 33220, Set Animation...]
type = ChangeAnim
trigger1 = Time = 0 && NumHelper(33200)
value = 33220 + (Helper(33200),Anim = 33212)

[State 33220, Position 1]
type = BindToParent
trigger1 = Parent,Time = [9,29]
pos = -5,-5

[State 33220, Position 2]
type = BindToParent
trigger1 = Parent,Time = [30,53]
pos = 15,-5

[State 33220, Position 3]
type = BindToParent
trigger1 = Parent,Time >= 54
pos = 0,-15

[State 33220, RTX1]
type = AngleDraw
trigger1 = Parent,Time = [9,29]
value = 30

[State 33220, RTX2]
type = AngleDraw
trigger1 = Parent,Time = [30,53]
value = -90

[State 33220, RTX3]
type = AngleDraw
trigger1 = Parent,Time >= 54
value = 0

[State 33220, BE GONE!!!]
type = DestroySelf
trigger1 = Parent,StateNo = 3203
trigger2 = Parent,StateNo != [3200,3202]
trigger2 = Parent,StateNo != [3204,3206]

;---------------------------------------------------------------------------
;Grabbed by POW
[Statedef 33230]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = -1
facep2 = 1

[State 33230, CFX]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 33230, No sprite!!]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 33230, RX]
type = NotHitBy
trigger1 = 1
value = SCA

[State 33230, Anim]
type = ChangeAnim
trigger1 = 1
value = 5002

[State 33230, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 33230, Release]
type = SelfState
trigger1 = !GetHitVar(IsBound)
value = 5050

;---------------------------------------------------------------------------
;Grabbed by POW - Released
[Statedef 33231]
type    = A
movetype= H
physics = N
velset = 0,0

[State 33231, Camera]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 33231, Accel]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 33231, HitVel]
type = VelSet
trigger1 = Time = 0
x = -6
y = -4

[State 33231, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5030

[State 5050, 2] ;Hit transition
type = ChangeAnim
triggerall = Vel Y > -2
triggerall = (anim != 5060) && (anim != 5061)
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 5050, 3] ;Change anim when done with transition
type = ChangeAnim
triggerall = (anim != 5060) && (anim != 5061)
trigger1 = Anim = 5035 && AnimTime = 0
trigger2 = Anim != 5035 && Vel Y > 0
trigger3 = (sysvar(3)) && (!SelfAnimExist(5060))
value = 5050
persistent = 0

[State 5050, 4] ;Coming down anim
type = ChangeAnim
triggerall = SelfAnimExist(5060)
trigger1 = (Anim = 5050) && (AnimTime = 0)
trigger2 = ((Anim = 5051) || (Anim = 5052)) && (Vel Y > 0)
trigger3 = sysvar(3)
value = 5060
persistent = 0

;-----------------------------------------------------------

[State 5100, Var]
type = VarSet
trigger1 = Time = 0
SysFVar(0) = vel y

[state 832, 8]
type = envshake
trigger1 = pos y >= 0 && vel y > 0 
time = 15
freq = 70
ampl = -4

[State 9002, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5110

;---------------------------------------------------------------------------
; Advanced Guard Helper
[Statedef 50000]
type    = A
movetype= I
physics = N
anim = 50000

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 50000, 4]
type = NotHitBy
Trigger1 = 1
value = , AA ,AP ,AT
Time = 1

[State 50000, 5]
type = PlayerPush
trigger1 = 1
value = 1

[State 50000, 6]
type = VelSet
trigger1 = Time = 0
x = ifelse(IsHelper(50000), 17, -17)

[State 50000, 6]
type = PosFreeze
trigger1 = Time >= 10
x = 0

[State 50000, 7]
type = DestroySelf
trigger1 = !(root, var(35))

;-------------------------------------------------------------------------------------
; Round Pre-Walking (VS Series feature since MSH)
[Statedef 51100]
type    = S
physics = S
sprpriority = 1

[State 21, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 21, Width]
type = Width
trigger1 = 1
edge = 0,(40 - (const(size.ground.back)))

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 21, 1]
type = VelSet
triggerall = enemy, anim != [190, 194]
trigger1 = command = "holdfwd"
x = 1.5

[State 21, 2]
type = VelSet
triggerall = enemy, anim != [190, 194]
trigger1 = command = "holdback"
x = -1.2

[State 21, 3]
type = VelSet
triggerall = enemy, anim != [190, 194]
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4a]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 21, 4b]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 21, 4b]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 0

[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 20, 0)

; HIT_FALLRECOVER (on the ground) 
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,8,-4)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

; nGtFNg 
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

; VXep 
	
; ^[QbgJo[ 
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)
 
; ^[Qbg_EA 
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)
 
; ^[QbgoEh 
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5040

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6


[State 9910, PosSet]
type = PosSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -5

[State 1300, 6]
type = PalFX
triggerall = name = "Dhalsim"
trigger1 = animelem = 1
time = 18
sinadd =  255,255,255,43
ignorehitpause = 0

[State 5100, 10]
type = PlaySnd
triggerall = name = "Dhalsim"
trigger1 = Time = 1
value = S3,0

[State 9910, VelSet]
type = VelSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -4
x = 0

[State 9910, VelAdd]
type = VelAdd
triggerall = name = "Dhalsim"
trigger1 = time = 1
y = 0

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .82;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52
 
; Fire hit
[Statedef 8040]
type = A
movetype = H
physics = N
anim = 9999

[State 8040, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,numtarget
var(52) = root,var(51)

[State 8040, VarSet]
type = VarSet
trigger1 = time = 0
var(53) = random%2

[State 8040, DestroySelf]
type = DestroySelf
trigger1 = !root,numtarget
trigger2 = !playeridexist(var(52))
trigger3 = !root,hitpausetime

[State 8040, PosAdd]
type = PosAdd
trigger1 = playeridexist(var(52))
x = -(pos x-playerid(var(52)),pos x)*facing
y = -(pos y-playerid(var(52)),pos y)

[State 8040, Explod]
type = Explod
trigger1 = time = 0
anim = 8040+var(53)
pos = 20,20
random = 50,ceil(const(size.mid.pos.y)*1.5)
sprpriority = 4
ownpal = 1
bindtime = -1
scale = 1.5,1.5

[State 8040, Explod]
type = Explod
trigger1 = time = 0
anim = 8040+var(53)
pos = 20,30
random = 50,ceil(const(size.mid.pos.y)*1.5)
sprpriority = 4
ownpal = 1
bindtime = -1
scale = 1.5,1.5

[State 8040, Explod]
type = Explod
trigger1 = time = 0
anim = 8040+var(53)
pos = 20,10
random = 50,ceil(const(size.mid.pos.y)*1.5)
sprpriority = 4
ownpal = 1
bindtime = -1
scale = 1.5,1.5

[State 8040, Explod]
type = Explod
trigger1 = time = 0
anim = 8040+var(53)
pos = 20,15
random = 50,ceil(const(size.mid.pos.y)*1.5)
sprpriority = 4
ownpal = 1
bindtime = -1
scale = 1.5,1.5


; ===================== (Hyper BG and Hyper Portait) =======================
; Hyper BG and Hyper Portait
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 200
volumescale = 200
value = 1,0

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(40) = 1 && !numexplod(8505) && stateno = 9100
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(40) = 0 || root,var(40) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(40) = 0
trigger2 = root,movetype = H

; ===================== (Hyper BG and Hyper Portait for ENOUI) =======================
; Hyper BG and Hyper Portait for ENOUI
[Statedef 8501] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 200
volumescale = 200
value = 1,0

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(40) = 1 && !numexplod(8505) && stateno = 9100
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(40) = 0 || root,var(40) = 2
trigger2 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(40) = 0

; ===================== (Hyper Combo Finish) =======================
; Hyper Combo Finish
[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,5

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,4

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay
flag3 = nomusic

; [State 8510, AssertSpecial]
; type = AssertSpecial
; trigger1 = (StageVar(Info.Name) != "Absolute Cloud-Night")
; flag = nomusic

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)

; =================================================================================== ;
;            Full Game Features Section (DO NOT OVERRIDE unless you know              ;
;            what are you doing. This will add extra features to your                 ;
;            chars. THANKS TO: Messatsu for discovering this.                         ;
; =================================================================================== ;

; ========================================================================
;Main System Helper (Controls full game features, Original Template)
[StateDef 1337000000]
anim = 1337000000
ctrl = 0

[State MS - X, IX]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

;[State MS - X, NM]
;type = AssertSpecial
;triggerall = root, var(30) = [20, 21]
;trigger1 = (roundstate < 2) && (roundno < 2)
;flag = nomusic

[State MS - Pos, 01]
type = BindToRoot
trigger1 = 1
facing = (root, facing)
pos = 0, 0

; --------------------------------------------------------

;;;;;;;;;;; Feature 9: Detect Metal-Like People ;;;;;;;;;;
; --------------------------------------------------------
; Used Vars for this feature: 1
; - var(14) ** Detect Metal-Like enemyes.
; This also includes Non-Marvel/Capcom Characters as well.
[State -2, Who is made of metal here?]
type = VarSet
;triggerall = root, var(30) >= 20
trigger1  = enemynear, name = "Sentinel"
trigger2  = enemynear, name = "Sentinel by ER"
trigger3  = enemynear, name = "Iron Man"
trigger4  = enemynear, name = "Iron-Man"
trigger5  = enemynear, name = "War Machine"
trigger6  = enemynear, name = "Marvel vs. Capcom's WarMachine"
trigger7  = enemynear, name = "Dr. Doom"
trigger8  = enemynear, name = "Doctor Doom"
trigger9  = enemynear, name = "Dr. Doom by WhiteMagic2002"
trigger10 = enemynear, name = "Dr.Doom"
trigger11 = enemynear, name = "Dr. Doom By {_Carnificina_}"
trigger12 = enemynear, name = "Tron Bonne"
trigger13 = enemynear, name = "Tron"
trigger14 = enemynear, name = "Abyss Form 1"
trigger15 = enemynear, name = "Chotto-Ko Mech-Gouki"
trigger16 = enemynear, name = "Mech Gouki"
trigger17 = enemynear, name = "Mazinger Z"
trigger18 = enemynear, name = "karakuri"
trigger19 = enemynear, name = "phobos"
trigger20 = enemynear, name = "Abyss-First type"
trigger21 = enemynear, name = "God Gundam"
trigger22 = enemynear, name = "ShinGetter1"
var(14) = 1 - (P2StateNo = 5150)

[State -2, Who isn't?]
type = VarSet
;triggerall = root, var(30) >= 20
trigger1 = enemynear, name != "Sentinel"
trigger1 = enemynear, name != "Sentinel by ER"
trigger1 = enemynear, name != "Iron Man"
trigger1 = enemynear, name != "Iron-Man"
trigger1 = enemynear, name != "War Machine"
trigger1 = enemynear, name != "Marvel vs. Capcom's WarMachine"
trigger1 = enemynear, name != "Dr. Doom"
trigger1 = enemynear, name != "Doctor Doom"
trigger1 = enemynear, name != "Dr. Doom by WhiteMagic2002"
trigger1 = enemynear, name != "Dr.Doom"
trigger1 = enemynear, name != "Dr. Doom By {_Carnificina_}"
trigger1 = enemynear, name != "Tron Bonne"
trigger1 = enemynear, name != "Tron"
trigger1 = enemynear, name != "Abyss Form 1"
trigger1 = enemynear, name != "Chotto-Ko Mech-Gouki"
trigger1 = enemynear, name != "Mech Gouki"
trigger1 = enemynear, name != "Mazinger Z"
trigger1 = enemynear, name != "karakuri"
trigger1 = enemynear, name != "phobos"
trigger1 = enemynear, name != "Abyss-First type"
trigger1 = enemynear, name != "God Gundam"
trigger1 = enemynear, name != "ShinGetter1"
var(14) = 0
; --------------------------------------------------------

;;;;;;;;;;;;; Feature 9: Aerial Rave Prev Fix ;;;;;;;;;;;;
; --------------------------------------------------------
; Used Vars for this feature: 1
; - var(15) ** Detect Very big chars or Bosses that don't
;              allow aerial rave finishers.
[State -4, Special Cases for AR]
type = VarSet
trigger1  = p2name != "Apocalypse"
trigger2  = p4name != "Apocalypse"
trigger3  = p2name != "Onslaught"
trigger4  = p4name != "Onslaught"
trigger5  = P2name != "Abyss Form 1"
trigger6  = P4name != "Abyss Form 1"
trigger7  = P2name != "Abyss Form 2"
trigger8  = P4name != "Abyss Form 2"
trigger9  = P2name != "Abyss Form 3"
trigger10 = P4name != "Abyss Form 3"
trigger11 = P2name != "Abyss"
trigger12 = P4name != "Abyss"
var(15) = 1

[State -4, Special Cases for AR]
type = VarSet
trigger1  = p2name = "Apocalypse"
trigger2  = p4name = "Apocalypse"
trigger3  = p2name = "Onslaught"
trigger4  = p4name = "Onslaught"
trigger5  = P2name = "Abyss Form 1"
trigger6  = P4name = "Abyss Form 1"
trigger7  = P2name = "Abyss Form 2"
trigger8  = P4name = "Abyss Form 2"
trigger9  = P2name = "Abyss Form 3"
trigger10 = P4name = "Abyss Form 3"
trigger11 = P2name = "Abyss"
trigger12 = P4name = "Abyss"
var(15) = 0
; --------------------------------------------------------

[State MS - M, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "F.Attack: %d, H.Count: %d, A.Rave: %d, Danger: %d, D.Holder: %d\n"
params = var(1), var(2), var(3), var(4), var(5)

[State MS - END] ;ctrl a tick ago
type = Null
trigger1 = var(0) := root, ctrl

; ========================================================================
;Main System Helper (Controls full game features, Non Tag Mode Template)
[StateDef 1337000001]
anim = 1337000000
ctrl = 0

[State MS - X, IX]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

;[State MS - X, NM]
;type = AssertSpecial
;triggerall = root, var(30) = [20, 21]
;trigger1 = (roundstate < 2) && (roundno < 2)
;flag = nomusic

[State MS - Pos, 01]
type = BindToRoot
trigger1 = 1
facing = (root, facing)
pos = 0, 0

; --------------------------------------------------------

;;;;;;;;;;; Feature 9: Detect Metal-Like People ;;;;;;;;;;
; --------------------------------------------------------
; Used Vars for this feature: 1
; - var(14) ** Detect Metal-Like enemyes.
; This also includes Non-Marvel/Capcom Characters as well.
[State -2, Who is made of metal here?]
type = VarSet
;triggerall = root, var(30) >= 20
trigger1  = enemynear, name = "Sentinel"
trigger2  = enemynear, name = "Sentinel by ER"
trigger3  = enemynear, name = "Iron Man"
trigger4  = enemynear, name = "Iron-Man"
trigger5  = enemynear, name = "War Machine"
trigger6  = enemynear, name = "Marvel vs. Capcom's WarMachine"
trigger7  = enemynear, name = "Dr. Doom"
trigger8  = enemynear, name = "Doctor Doom"
trigger9  = enemynear, name = "Dr. Doom by WhiteMagic2002"
trigger10 = enemynear, name = "Dr.Doom"
trigger11 = enemynear, name = "Dr. Doom By {_Carnificina_}"
trigger12 = enemynear, name = "Tron Bonne"
trigger13 = enemynear, name = "Tron"
trigger14 = enemynear, name = "Abyss Form 1"
trigger15 = enemynear, name = "Chotto-Ko Mech-Gouki"
trigger16 = enemynear, name = "Mech Gouki"
trigger17 = enemynear, name = "Mazinger Z"
trigger18 = enemynear, name = "karakuri"
trigger19 = enemynear, name = "phobos"
trigger20 = enemynear, name = "Abyss-First type"
trigger21 = enemynear, name = "God Gundam"
trigger22 = enemynear, name = "ShinGetter1"
var(14) = 1 - (P2StateNo = 5150)

[State -2, Who isn't?]
type = VarSet
;triggerall = root, var(30) >= 20
trigger1 = enemynear, name != "Sentinel"
trigger1 = enemynear, name != "Sentinel by ER"
trigger1 = enemynear, name != "Iron Man"
trigger1 = enemynear, name != "Iron-Man"
trigger1 = enemynear, name != "War Machine"
trigger1 = enemynear, name != "Marvel vs. Capcom's WarMachine"
trigger1 = enemynear, name != "Dr. Doom"
trigger1 = enemynear, name != "Doctor Doom"
trigger1 = enemynear, name != "Dr. Doom by WhiteMagic2002"
trigger1 = enemynear, name != "Dr.Doom"
trigger1 = enemynear, name != "Dr. Doom By {_Carnificina_}"
trigger1 = enemynear, name != "Tron Bonne"
trigger1 = enemynear, name != "Tron"
trigger1 = enemynear, name != "Abyss Form 1"
trigger1 = enemynear, name != "Chotto-Ko Mech-Gouki"
trigger1 = enemynear, name != "Mech Gouki"
trigger1 = enemynear, name != "Mazinger Z"
trigger1 = enemynear, name != "karakuri"
trigger1 = enemynear, name != "phobos"
trigger1 = enemynear, name != "Abyss-First type"
trigger1 = enemynear, name != "God Gundam"
trigger1 = enemynear, name != "ShinGetter1"
var(14) = 0
; --------------------------------------------------------

;;;;;;;;;;;;; Feature 9: Aerial Rave Prev Fix ;;;;;;;;;;;;
; --------------------------------------------------------
; Used Vars for this feature: 1
; - var(15) ** Detect Very big chars or Bosses that don't
;              allow aerial rave finishers.
[State -4, Special Cases for AR]
type = VarSet
trigger1  = p2name != "Apocalypse"
trigger2  = p4name != "Apocalypse"
trigger3  = p2name != "Onslaught"
trigger4  = p4name != "Onslaught"
trigger5  = P2name != "Abyss Form 1"
trigger6  = P4name != "Abyss Form 1"
trigger7  = P2name != "Abyss Form 2"
trigger8  = P4name != "Abyss Form 2"
trigger9  = P2name != "Abyss Form 3"
trigger10 = P4name != "Abyss Form 3"
trigger11 = P2name != "Abyss"
trigger12 = P4name != "Abyss"
var(15) = 1

[State -4, Special Cases for AR]
type = VarSet
trigger1  = p2name = "Apocalypse"
trigger2  = p4name = "Apocalypse"
trigger3  = p2name = "Onslaught"
trigger4  = p4name = "Onslaught"
trigger5  = P2name = "Abyss Form 1"
trigger6  = P4name = "Abyss Form 1"
trigger7  = P2name = "Abyss Form 2"
trigger8  = P4name = "Abyss Form 2"
trigger9  = P2name = "Abyss Form 3"
trigger10 = P4name = "Abyss Form 3"
trigger11 = P2name = "Abyss"
trigger12 = P4name = "Abyss"
var(15) = 0
; --------------------------------------------------------

[State MS - M, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "F.Attack: %d, H.Count: %d, A.Rave: %d, Danger: %d, D.Holder: %d\n"
params = var(1), var(2), var(3), var(4), var(5)

[State MS - END] ;ctrl a tick ago
type = Null
trigger1 = var(0) := root, ctrl

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]

[State -2, Debug Data 1 (N)]
type = DisplayToClipboard
trigger1 = var(58) < 1 && (StateNo != [3100,3199]) && StateNo != 9100
text = "F-Recover: = %d HitTime: = %d, Helpers: %d, FS-H %d, Command %d\n"
params = GetHitVar(fall.recovertime), GetHitVar(HitTime), NumHelper, NumHelper(50100), var(0)
ignorehitpause = 1

[State -2, Debug Data 2 (N)]
type = AppendToClipboard
trigger1 = var(58) < 1 && (StateNo != [3100,3199]) && StateNo != 9100
text = "En'ou: = %d, C-Push: %f, S.J: = %d, H-Helper: %d, P2BodyDist X: %f"
params = var(20), fvar(24), var(33), var(34), P2BodyDist X
ignorehitpause = 1

[State -2, Debug Data 1 (H)]
type = DisplayToClipboard
trigger1 = var(58) < 1 && (StateNo = [3100,3199]) || StateNo = 9100
text = "En'ou: = %d, S-Time: %d, StateNo: = %d, Ctrl: %d, AnimElemTime: %d\n"
params = var(20), var(4), var(5), var(6), AnimElemTime(AnimelemNo(0))
ignorehitpause = 1

[State -2, Debug Data 2 (H)]
type = AppendToClipboard
trigger1 = var(58) < 1 && (StateNo = [3100,3199]) || StateNo = 9100
text = "HitTIme: %d, Command: %d, HitCount: %d, F-Breath: %d"
params = GetHitVar(HitTime), var(0), GetHitVar(HitCount), var(7)
ignorehitpause = 1

[State -2, Debug Data 1 (AI)]
type = DisplayToClipboard
trigger1 = var(58) > 0
text = "AI: = %d T-Mode: = %d, S-Pos: %f, P2BDist X %f, J-Dir %d\n"
params = var(58), var(56), ScreenPos Y, P2BodyDist X, sysvar(1)
ignorehitpause = 1

[State -2, Debug Data 2 (AI)]
type = AppendToClipboard
trigger1 = var(58) > 0
text = "P2Dist Y: %f, SJ: %d, E-HitCount: %d, AI-D: %d, Helpers: %d"
params = P2Dist Y, var(33), (Enemy,GetHitVar(HitCount)), var(55), NumHelper
ignorehitpause = 1

; ===================== (Recovery effects and sounds) =======================

[State 0, PlaySnd]
type = PlaySnd
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,10
channel = 4
volume = 155
volumescale = 155

[State 0, PlaySnd]
type = PlaySnd
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,7
channel = 4
volume = 155
volumescale = 155

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 20, 2]
type = envshake
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
time = 8
freq = 80
ampl = 3

; ===================== (Special Feature Section) =======================
;ChangeState Reset
;------------------------------------------------
[State -2, Reset ChangeStates]
type = VarSet
triggerall = var(0) != 0
trigger1 = time = 1
var(0) = 0

; ===================== (p1 & p2 icon) =======================

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(9) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(9) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(9)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, O\]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(9) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(9) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(9)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 240-const(size.head.pos.y)
id = 8596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy
var(9) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8596)
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(9)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8598)
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(9)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(8) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(8) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(8)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(8) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(8) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(8)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 240-enemy,const(size.head.pos.y)
id = 18596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy = 1
var(8) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(8)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(8)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

  
; I 
[State -2, I]
type = AssertSpecial
trigger1 = roundstate > 2
flag = nowalk
 
; ~ 
[State -2, ~]
type = Width
trigger1 = vel x > 0 && movetype != H
edge = 5,5


; ===================== (Finish round helper) =======================

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090

[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998

; ===================== (Announcer messages) =======================

[State -2, VS_Combo]
type = VarSet
triggerall = (var(32)!=10) || (var(32)=10 && movehit && statetype != A)
trigger1 = var(31) >= 3
trigger2 = var(31)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = [5000,5899])
var(32) = 1+(var(31)>3)+(var(31)>5)+(var(31)>7)+(var(31)>9)+(var(31)>29)+(var(31)>59)+(var(31)>=100)-(var(31)=-1)
ignorehitpause = 1

[State -2, Air Combo]
type = VarSet
triggerall = var(31) >= 3 && statetype = A && var(32)!=10 && var(46)
trigger1 = (movehit)
var(32) = 10
ignorehitpause = 1


[State -2, Danger]
type = VarSet
trigger1 = var(29) !=1 && roundstate=2 && life <= Ceil(const(data.life)/5)
var(32) = 9
ignorehitpause = 1

; sound First attack
[State -2, First Attack]
type = PlaySnd
triggerall = var(31)=-1
triggerall = NumExplod(8050) = 0
trigger1 = var(31)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
persistent = 0
value = 2,0
channel = 14
volume=255
ignorehitpause = 1

; Telop sound
[State -2, Combo Sound]
type = PlaySnd
trigger1 = NumExplod(8050) = 0
trigger1 = var(31)=0 && var(32)!=0
persistent = 0;1
value = 2,var(32)
channel = 14
volume=255
ignorehitpause = 1

[State -2, Left]
type = explod
trigger1 = var(31)=0 && var(32)!=0
trigger2 = var(31)=-1 && (movehit || p2movetype = H && (p2stateno != [120,159]));p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
trigger3 = var(31)=0 && var(32)=10 && (movehit || p2movetype = H && (p2stateno != [120,159]))
triggerall = TeamSide = 1 && NumExplod(8050) = 0
anim = (8550 + var(32))
ID = 8050
postype = left
pos = 3,80
ontop = 1
bindtime = -1
removetime = 60
ownpal = 1
supermovetime = 60
pausemovetime = 60
scale = 0.5,0.5
persistent = 0
ignorehitpause = 1

[State -2, Right]
type = explod
trigger1 = var(31)=0 && var(32)!=0
trigger2 = var(31)=-1 && (movehit || p2movetype = H && (p2stateno != [120,159]));p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
trigger3 = var(31)=0 && var(32)=10 && (movehit || p2movetype = H && (p2stateno != [120,159]))
triggerall = TeamSide = 2 && NumExplod(8050) = 0
anim = (8650+ var(32));8011;8720;
ID = 8050
postype = right
pos = -10,80;130;82
ontop = 1
bindtime = -1
removetime = 60;90
ownpal = 1
supermovetime = 60;90
pausemovetime = 60;90
scale = 0.5,0.5
persistent = 0;1
ignorehitpause = 1

[State -2, VS_Combo]
type = VarAdd
trigger1 = enemynear, time = 0
trigger1 = enemynear, Hitshakeover = 0
trigger1 = (p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899]
trigger2 = var(31)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
var(31) = 1 + (var(31)=-1)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
trigger1 = var(31)!=-1 && (p2movetype!=H || enemynear, ctrl)
trigger2 = var(31)=-1 && movetype = H;p2stateno = [5000,5899])
var(31) = 0 - (roundstate<2)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
triggerall = numexplod(8050)!=0
trigger1 = var(31)=0
var(32) = 0
ignorehitpause = 1

[State -2, Is Danger]
type = VarSet
trigger1 = var(29) = 0 && life <= Ceil(const(data.life)/5)
;trigger1 = var(30) = 1 && roundstate!=2
var(29) = 1;(roundstate>1)
ignorehitpause = 1

[State -2, Is Danger]
type = VarSet
trigger1 = var(29) = 1 && life > Ceil(const(data.life)/5)
;trigger1 = var(30) = 1 && roundstate!=2
var(29) = 0;(roundstate>1)
ignorehitpause = 1

[State -2, Is First Attack p3]
type = VarSet
triggerall = numpartner=1
trigger1 = partner, movehit
trigger1 = partner, var(31) != -1
var(31) = 0
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = nomusic


; ===================== (Fire hit) =======================

[State -2, Helper]
type = Helper
trigger1 = movehit && hitpausetime && numtarget
trigger1 = !numhelper(8040) && target,gethitvar(chainid)&16
stateno = 8040
id = 8040
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = 1
var(51) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget
var(51) = target,id
ignorehitpause = 1

; ===================== (Air combo code) =======================

[State 0, StopSnd]
type = StopSnd
trigger1 = stateno = [800,870] 
channel = 4

[State 650, GA~b^[A]
type = PlaySnd
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
value = 0,11
channel = 4

[State 620, GA~b^[A]
type = VarSet
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
var(46) = 2

[State -2, GA~b^[A]
type = VarSet
trigger1 = !numtarget
var(46) = 0

[State -2, GA~b^[A]
type = VarSet
trigger1 = var(46)= 2 && ctrl && statetype != A
var(46) = 3

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = var(46) = 2
trigger1 = pos x*facing < 0
value = 0
movecamera = 0,0
ignorehitpause = 1

[State -2, GA~b^[A]
type = ChangeState
triggerall = var(46) = 2
trigger1 = backedgebodydist < -20 && stateno != 100 && stateno != [710,711]
value = 710

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = stateno = 100 && prevstateno = 710
value = 0
movecamera = 0,0

[State -2, GA~b^[A]
type = NotHitBy
trigger1 = stateno = 100 && prevstateno = 710
value = SCA
 
; wp[A 
[State -2, wp[A]
type = VarSet
trigger1 = !numhelper
var(44) = 0

; ===================== (P2 Recovery Section) =======================

; ^[Qbg 
[State -2, ^[Qbg]
type = VarSet
trigger1 = 1
var(17) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget
var(17) = target,id
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = !numtarget
var(18) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget && hitpausetime
var(18) = target,stateno = 5080
ignorehitpause = 1

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(17)) && !var(18)
trigger1 = playerID(var(17)),gethitvar(chainid) & 1
trigger1 = playerID(var(17)),stateno != [120,155]
trigger1 = playerID(var(17)),hitover && playerID(var(17)),alive && playerID(var(17)),hitshakeover
trigger1 = playerID(var(17)),statetype = A && playerID(var(17)),stateno != 9900
value = 9900

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(17)) && var(18)
trigger1 = playerID(var(17)),alive && playerID(var(17)),hitshakeover
trigger1 = playerID(var(17)),pos y >= 0 && playerID(var(17)),vel y > 0
trigger1 = playerID(var(17)),statetype = A && playerID(var(17)),stateno != 5201 && playerID(var(7)),stateno != 9910
value = 9901

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(17))
trigger1 = playerID(var(17)),gethitvar(chainid) & 2
trigger1 = playerID(var(17)),stateno != [120,155]
trigger1 = playerID(var(17)),alive && playerID(var(17)),hitshakeover
trigger1 = playerID(var(17)),pos y >= 0 && playerID(var(17)),vel y > 0
trigger1 = playerID(var(17)),statetype = A && playerID(var(17)),stateno != 9910
value = 9910

; ===================== (Wall hit) =======================

[state 5100,2]
type = explod
triggerall = var(45)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
scale = 0.9,0.9
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
triggerall = var(45)
triggerall = numenemy
triggerall = enemynear,stateno != [120,159]
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,8
channel = 4
volume = 255

[state 200, 3]
type = varset
triggerall = var(45)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 45
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 27
value = var(26)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 26
value = var(28)+hitcount

[state -3, 2];combo hosei
type = varset
trigger1 = enemynear,movetype != H
v = 28
value = 0

;***************
[state -3, 2];combo
type = varset
trigger1 = var(26)>var(27)
v = 45
value = 1

; ============================================================================
; Begin Winane Training Mode Detection Code
; http://www.mugenguild.net/~winane/
[State -2, Increment]
type = VarAdd
trigger1 = var(56) = [0, 33]
trigger1 = StateNo != 5900
var(56) = 1
IgnoreHitPause = 1

[State -2, Training Mode?]
type = VarSet
trigger1 = Power = Const(data.power) && !Var(58)	; !Var(58) = at GameTime = 0
trigger1 = var(56) = 31 || var(56) = 1
trigger1 = NumEnemy < 2 && !NumPartner
trigger1 = RoundNo = 1 && MatchNo = 1 && ID = [32,33]
trigger1 = Life = [const(data.life) - 1, const(data.life)]
trigger1 = RoundState < 3
var(56) = -1
IgnoreHitPause = 1

[State -2, Not Training Mode?]
type = VarSet
triggerall = var(56)<31
trigger1 = NumEnemy > 1 || NumPartner
trigger2 = MatchNo > 1 || RoundNo > 1
trigger3 = RoundState > 2 || ID != [32,33]
var(56) = 31
IgnoreHitPause = 1

; ============================ (AI Related ) =========================
[State -2, StopAI]
type = VarSet
triggerall = var(58) > 0 && !IsHelper
trigger1 = RoundState != 2
trigger2 = !Alive
var(58) = -2
IgnoreHitPause = 1

; ====================== (Misc SCtrls Section) ==========================
; Round Pre-Walking ChangeStates and Position controlers
; ------------------------------------------------------
; Just for reference, remember that:
; RoundState = 1 --- Intro
; RoundState = 2 --- Match Begins
; RoundState = 3 --- K.O.
; RoundState = 4 --- Win Pose.
; NOTE: If you skip the 5900 state action in further rounds,
; this will be ignored

[State -2, Pre-walking state]
type = ChangeState
trigger1 = prevstateno = [191, 194] ;Enable after Intro
trigger2 = RoundNo > 1              ;Enable If Round Number is > 1
trigger2 = RoundState < 2           ;RoundState < 2 and
trigger2 = stateno = 0              ;Current state is 0
value = 51100
ctrl = 0

[State -2, Remember the last Position (X)]
type = VarSet
trigger1 = RoundState < 2
fvar(20) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(20) != 0
x = fvar(20)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(20) = 0

; Advanced Guard Control Var (Lasts 1/2 seconds)
; --------------------------------------------------
[State -2, ADV-G Var Decrement]
type = VarAdd
trigger1 = var(35) > 0
var(35) = -1
ignorehitpause = 1

; Super Jump Controllers (Super Jump Reset)
; --------------------------------------------------
[State -2, VarSet]
type = VarSet
trigger1 = stateno = 52
trigger2 = stateno = 0 || stateno = 20 || (stateno = [10,12]) || (stateno = [100,106])
trigger3 = (anim = 425 || anim = 450) && (AnimTime = 0)
trigger4 = ((stateno = [1000, 2999]) || (stateno = [3000, 4999])) && Statetype != A
var(33) = 0

[State -2, Movement]
type = Veladd
;trigger1 = AILevel = 0 ;AI Off
trigger1 = var(58) < 1 ;AI Off
triggerall = (var(33)) && (stateno = [600, 657])
trigger1 = vel X = [-2.4, 4.4]
x = ifelse(command = "holdfwd", 0.1, ifelse(command = "holdback", -0.1, 0))

[State -2, T-CR]
type = VarSet
triggerall = var(36) && Stateno != [40,50]
trigger1 = (StateNo != 445) && (PrevStateNo != 445)
trigger1 = (StateNo != 450) && (PrevStateNo != 450)
trigger2 = StateNo = [10,12]
trigger3 = StateNo = [0,39]
var(36) = 0

; En'ou Controls and Effects
; ------------------------------------------
[State -2, Time Decrement]
type = Varadd
trigger1 = StateNo != 3100
trigger1 = var(20) > 0
var(20) = -1

[State -2, Reset Timer]
type = Varset
trigger1 = !Life || (RoundState != 2 && StateNo != [3130,3150])
var(20) = 0

;-----------------------------------
[State 823, Sound]
type = PlaySnd
trigger1 = StateNo = 998 && time = 1
value = 32100, 40
channel = 4

[State 823, Explod]
type = Explod
trigger1 = TeamSide = 1
trigger1 = StateNo = 998 && time = 1
anim = 32141
ID = 32140
pos = 0, 80
postype = right
removetime = 60
supermovetime = 500
pausemovetime = 500
scale = 0.5, 0.5
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 823, Explod]
type = Explod
trigger1 = TeamSide = 2
trigger1 = StateNo = 998 && time = 1
anim = 32140
ID = 32140
pos = -1, 80
postype = left
removetime = 60
supermovetime = 500
pausemovetime = 500
scale = 0.5, 0.5
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1

;---------------------------------------------
;Pos Y
[State -2]
type = VelSet
triggerall = StateType != A && Pos Y != 0
triggerall = PrevStateno = [105,106]
trigger1 = stateno != [105, 106]
y = 0

[State -2]
type = PosSet
triggerall = StateType != A && Pos Y != 0
triggerall = PrevStateno = [105,106]
trigger1 = stateno != [105, 106]
y = 0

[State -2, SprPriority Fix]
type = SprPriority
trigger1 = (StateNo = [120,155]) && !NumHelper(50000)
value = -1

[State -2, A-Dash-CLR]
type = VarSet
triggerall = var(11)
trigger1 = stateno = 52
trigger2 = stateno = 0
var(11) = 0

[State -2, POW-STATECLR]
type = VarSet
triggerall = var(3) != 0
trigger1 = StateNo != [3200,3202]
var(3) = 0

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

; ============= (Master System Helper [Thanks to Messatsu]) =============
[State -3, System Helper]
type = Helper
trigger1 = !Numhelper(1337000000)
name = "Master System Helper"
stateno = ifelse(TeamMode = Simul, 1337000000, 1337000001)
ID = 1337000000

; -------------- Damage dampener -----------------
[State -3, Normal]
type = VarSet
triggerall = Numhelper(1337000000)
trigger1 = (Helper(1337000000), var(2)) = [-1,2]
fvar(22) = 1.0
ignorehitpause = 1

[State -3, 1st Reduction]
type = VarSet
triggerall = Numhelper(1337000000)
trigger1 = (Helper(1337000000), var(2)) = [3,8]
fvar(22) = 0.60
ignorehitpause = 1

[State -3, 2nd Reduction]
type = VarSet
triggerall = Numhelper(1337000000)
trigger1 = (Helper(1337000000), var(2)) = [9,19]
fvar(22) = 0.50
ignorehitpause = 1

[State -3, 3rd Reduction]
type = VarSet
triggerall = Numhelper(1337000000)
trigger1 = (Helper(1337000000), var(2)) = [20,29]
fvar(22) = 0.20
ignorehitpause = 1

[State -3, Final Reduction]
type = VarSet
triggerall = Numhelper(1337000000)
trigger1 = (Helper(1337000000), var(2)) > 29
fvar(22) = 0.10
ignorehitpause = 1

[State -3, Set Damage Dampener]
type = AttackMulSet
trigger1 = 1
value = fvar(22)
ignorehitpause = 1

; --------- Misc Stuff only for selfstates ------------
[State -3, Guard Helper]
type = Helper
triggerall = !NumHelper(30120)
trigger1 = StateNo = [120,155]
name = "Guard Pole Helper"
ID = 30120
stateno = 30120

; ============= (Character HitSound) =============

[State 1120, _[W{CX]
type = PlaySnd
triggerall = alive && movetype = H
triggerall = random % 10 < 5
trigger1 = stateno = 5000 && time = 1
trigger2 = stateno = 5010 && time = 1
trigger3 = stateno = 5020 && time = 1
trigger4 = stateno = 5070 && time = 1
trigger5 = stateno = 5080 && time = 1
value = s5000,random%2
channel = 2
volume = 200
volumescale = 200

[State 0, StopSnd]
type = StopSnd
trigger1 =  !alive
channel =2
;ignorehitpau


