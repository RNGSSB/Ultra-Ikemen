;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 10000   ;パワーゲージ最大値
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 109    ;防御力（デフォルトは１０９％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 255      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 60    ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める

;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale = .833			;水平方向の縮尺（通常１）
yscale = 1.07			;垂直方向の縮尺（通常１）
ground.back = 16		;キャラの幅(後方,地上)
ground.front = 16		;キャラの幅(前方,地上)
air.back = 15			;キャラの幅(後方,空中)
air.front = 15		;キャラの幅(前方,空中)
height = 65			;キャラの高さ
attack.dist = 160		;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 90	;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0		;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = -6, -105		;頭の大体の座標
mid.pos = 8, -72		;体の中心の大体の座標
shadowoffset = 0		;影の垂直方向のオフセット
draw.offset = 0,0		;使用しない

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2.85        ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.7        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 4.6,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -4.6,0   　 ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu = 0,-11	　 ;垂直ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.back = -2.5	   ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd = 3.33		　 ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -4.5,-11	   ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される） 
runjump.fwd = 4.5,-11	   ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-6        ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.9        ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.9         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .6       ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S

[State 0, end]
type = varset
trigger1 = !time
var(0) = 0

[State 0, end]
type = changestate
trigger1 = time > 0
value = 181+(random%5)

;---------------------------------------------------------------------------
;勝利1
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 195]
type = playsnd
trigger1 = animelem = 8
value = 100,13
channel = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 0, helper]
type = helper
trigger1 = !fvar(12) || !numpartner
trigger1 = time = 1
trigger2 = fvar(12) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
;勝利2
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 195]
type = playsnd
trigger1 = !time
value = 100,13
channel = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 0, helper]
type = helper
trigger1 = !fvar(12) || !numpartner
trigger1 = time = 1
trigger2 = fvar(12) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
;勝利3
[Statedef 183]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 195]
type = playsnd
trigger1 = !time
value = 100,13
channel = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 0, helper]
type = helper
trigger1 = !fvar(12) || !numpartner
trigger1 = time = 1
trigger2 = fvar(12) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
;勝利4
[Statedef 184]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 195]
type = playsnd
trigger1 = animelem = 17
value = 0,4

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 0, helper]
type = helper
trigger1 = !fvar(12) || !numpartner
trigger1 = time = 1
trigger2 = fvar(12) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
;勝利5
[Statedef 185]
type = S
ctrl = 0
anim = 184
velset = 0,0

[state 0, helper]
type = helper
trigger1 = animelemtime(8) = 0
helpertype = normal
name = "kusottare"
stateno = 186
id = 186

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 240]
flag = RoundNotOver

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 0, helper]
type = helper
trigger1 = !fvar(12) || !numpartner
trigger1 = time = 1
trigger2 = fvar(12) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
;写真
[Statedef 186]
type = S
ctrl = 0
velset = 0,0
anim = 179

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 195]
type = velset
trigger1 = animelem = 5
y = 3

[State 195]
type = destroyself
trigger1 = !animtime

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 0, power]
type = powerset
trigger1 = roundsexisted = 0
trigger1 = !time
trigger1 = power < 1000
value = 1000

[State 0, end]
type = changestate
triggerall = enemy,authorname = "warusaki3" || enemy,authorname = "kikurage" || enemy,authorname = "Shio"
trigger1 = p2name = "dio"
trigger2 = p2name = "final dio"
trigger3 = p2name = "shadow dio"
trigger4 = p2name = "Shadow Dio"
trigger5 = p2name = "DIO BRANDO"
value = 193

[State -2, 3]
type = ChangeState
triggerall = teamside = 1
trigger1 = (P2Name = "joseph" || P4Name = "joseph") && EnemyNear,AuthorName = "Nimame"
value = 191+(random%2)

[State -2, 3]
type = ChangeState
triggerall = teamside = 2
trigger1 = (P2Name = "joseph" || P4Name = "joseph") && EnemyNear,AuthorName = "Nimame"
value = 191+(P2stateno=191)

[State 0, end]
type = changestate
trigger1 = 1
value = 191+(random%2)

;---------------------------------------------------------------------------
;イントロ1
[Statedef 191]
type = S
ctrl = 0
anim = 0

[State -2, Voice]
type = nothitby
trigger1 = 1
value = SCA

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 0, anim]
type = changeanim
triggerall = time > 0
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger2 = time > 300
trigger3 = p2name = "jotaro" && enemy,authorname = "y.y" && p2stateno = 160
trigger4 = p2name = "joseph" && enemy,authorname = "y.y" && p2stateno = 160
trigger5 = p2name = "Hol horse" && enemy,authorname = "y.y" && p2stateno = 160
trigger6 = p2name = "Rubber Soul" && enemy,authorname = "bad darkness" 
value = 190+(random%2)
persistent = 0

[State 195]
type = playsnd
trigger1 = anim != 0
trigger1 = animelem = 8
value = 2,11

[State 195]
type = playsnd
trigger1 = anim = 190
trigger1 = animelem = 20
value = 100,16
channel = 0
[State 195]
type = playsnd
trigger1 = anim = 191
trigger1 = animelem = 20
value = 100,18
channel = 0

[State 191, ステート変更]
type = ChangeState
trigger1 = anim = 190 || anim = 191
trigger1 = !animtime
value = 0

;---------------------------------------------------------------------------
イントロ2
[Statedef 192]
type = S
ctrl = 0
velset = 0,0
physics = N
anim = 192+(random%2)*2

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "TV"
stateno = 197+(anim=194)
id = 197+(anim=194)
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0

[State -2, Voice]
type = nothitby
trigger1 = 1
value = SCA

[State -2, Voice]
type = screenbound
trigger1 = 1
value = 0

[State -2, Voice]
type = playerpush
trigger1 = 1
value = 0

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State -2, Voice]
type = changeanim
trigger1 = anim = 192
trigger1 = time = 50
trigger2 = anim = 194
trigger2 = time = 95
value = ifelse(anim=192,193,188)

[State -2, Voice]
type = velset
trigger1 = anim = 193 && animelem = 22
trigger2 = anim = 188 && animelem = 2
x = -5

[State -2, Voice]
type = velset
trigger1 = anim = 193 && animelem = 29
trigger2 = anim = 188 && animelem = 9
trigger3 = anim = 101
x = 0

[State -2, Voice]
type = changeanim
trigger1 = anim = 193 || anim = 188
trigger1 = !animtime
value = ifelse(anim=193,100,109)

[State -2, Voice]
type = changeanim
trigger1 = anim = 100
trigger1 = time = 195
trigger2 = anim = 109
trigger2 = time = 160
value = 101

[State -2, Voice]
type = velset
trigger1 = anim = 100 || anim = 109
x = 5

[State 191, ステート変更]
type = ChangeState
trigger1 = anim = 101 && AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;テレビ(見ているなッ！)
[Statedef 197]
ctrl = 0
anim = 185

[State 191, ステート変更]
type = Changeanim
trigger1 = time = 140
value = 6335

[State 195]
type = playsnd
trigger1 = anim = 185 && animelem = 10
value = 100,21

[State 195]
type = playsnd
trigger1 = anim = 6335
value = 0,33
persistent = 0

[State 191, ステート変更]
type = destroyself
trigger1 = anim = 6335 && !animtime

;---------------------------------------------------------------------------
;テレビ(キオツケロ！)
[Statedef 198]
ctrl = 0
anim = 186

[State 191, ステート変更]
type = Changeanim
trigger1 = anim = 186 && !animtime
value = 6335

[State 195]
type = null;playsnd
trigger1 = anim = 186 && animelem = 10
value = 100,21

[State 195]
type = playsnd
trigger1 = anim = 6335
value = 0,33
persistent = 0

[State 191, ステート変更]
type = destroyself
trigger1 = anim = 6335 && !animtime

;---------------------------------------------------------------------------
;イントロ4(DIO)
[Statedef 193]
type = S
ctrl = 0
anim = 0

[State 0, anim]
type = changeanim
triggerall = anim != 187
triggerall = time > 0
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger2 = time > 300
value = 187

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 195]
type = playsnd
trigger1 = anim = 187
trigger1 = animelem = 8
value = 2,11

[State 195]
type = playsnd
trigger1 = anim = 187
trigger1 = animelem = 20
value = 100,0
channel = 0

[State 191, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0

;---------------------------------------------------------------------------
;off挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195+(random%2)
velset = 0,0
sprpriority = 0

[State 195]
type = playsnd
trigger1 = anim = 195
trigger1 = animelem = 8
value = 100,16
channel = 0
[State 195]
type = playsnd
trigger1 = anim = 196
trigger1 = animelem = 8
value = 100,18
channel = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;off挑発2
[Statedef 196]
type = S
movetype = I
physics = S
ctrl = 0
anim = 197
velset = 0,0
sprpriority = 0

[State 195]
type = playsnd
trigger1 = !time
value = 100,19
channel = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;on挑発
[Statedef 10195]
type = S
movetype = I
physics = N
ctrl = 0
anim = 10195
velset = 0,0

[State 195]
type = playsnd
trigger1 = animelem = 5
value = 100,2
persistent = 0
channel = 0

[State 195, ステート変更]
type = Changeanim
trigger1 = time = 100
value = 10196

[State 195, ステート変更]
type = ChangeState
trigger1 = anim = 10196 && !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;on挑発2
[Statedef 10196]
type = S
movetype = I
physics = S
ctrl = 0
anim = 10196
velset = 0,0
sprpriority = 0

[State 195]
type = playsnd
trigger1 = animelem = 9
value = 100,17
channel = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = time > 130
value = 0
ctrl = 1

;===========================================================================
;回り込み
[Statedef 300]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
velset = 0,0
sprpriority = -1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, hitby]
type = hitby
Trigger1 = ifelse(((helper(20032*(numhelper(20032)>0)),var(10)) = 0),1,Animtime<=-8)
value = SCA,AT

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,3
channel = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[state 0, helper]
type = helper
trigger1 = animelem = 3
helpertype = normal
name = "Image"
stateno = 305
id = 305
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 1

[State 0, vel]
type = velset
trigger1 = animelemtime(6) = 0
x = 5.6

[State 0, vel]
type = velmul
trigger1 = animelemtime(7) > 8
x = .92

[State 0, vel]
type = velset
trigger1 = animelem = 11
x = 0

[State 0, var]
type = varset
trigger1 = !animtime
var(56) = 8

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 305]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
vel = 0,0
sprpriority = -3

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, vel]
type = velset
trigger1 = animelemtime(6) = 0
x = 5.6

[State 0, vel]
type = velmul
trigger1 = animelemtime(7) > 8
x = .92

[State 0, vel]
type = velset
trigger1 = animelem = 11
x = 0

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 300

;===========================================================================
;Son回り込み
[Statedef 350]
type = S
movetype = I
physics = N
anim = 10350
ctrl = 0
velset = 0,0
sprpriority = -1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 100, 1]
type = Varadd
trigger1 = fvar(2) >= 0 && var(31)
fv = 2
value = -1.0
ignorehitpause = 1

[State 0, hitby]
type = hitby
Trigger1 = time >= 10 && time <= 34
value = SCA,AT,HP

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(3) = 0
x = 6

[State 0, vel]
type = velset
trigger1 = animelemtime(6) = 0
x = 4

[State 0, vel]
type = velset
trigger1 = animelem = 10
x = 0

[State 0, end]
type = changestate
trigger1 = !animtime && var(31)
value = 3501

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
; 通常攻撃技
;===========================================================================
;Soff立ち弱
[Statedef 200]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),201,200)
poweradd = 0
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(58) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !var(8)
var(58) = 1

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger2 = animelemtime(4) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = prevstateno = [100,105]
trigger1 = animelemtime(3) = 0
x = 5
persistent = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
trigger1 = var(58) >= 16
x = .9

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,10
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 201
trigger1 = animelemtime(3) = 0
anim = 8050
id = 8050
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = anim = 200
trigger1 = animelem = 3
attr = S, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6000
sparkxy = -10,-85
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 14
ground.hittime = 14
guard.ctrltime = 14
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 0
air.fall = 0
yaccel = .36
id = 200
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = anim = 201
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6000
sparkxy = -10,-85
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = low
ground.slidetime = 26
ground.hittime = 26
guard.ctrltime = 26
ground.velocity = -12
guard.velocity = -10
air.type = low
air.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 0
air.fall = 0
yaccel = .36
id = 200
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = anim = 200
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = anim = 201
trigger1 = movecontact = 1
fvar(3) = 18
ignorehitpause = 1

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(6) >= 0 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(6) >= 0 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(6) >= 0 && command = "holddown" && prevstateno != [100,105]
value = 10
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff立ち中
[Statedef 210]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),211,210)
poweradd = 40
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(58) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !var(8)
var(58) = 1

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
;trigger1 = prevstateno != [100,105]
trigger2 = anim = 211 && animelemtime(5) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = prevstateno = [100,105]
trigger1 = animelemtime(4) = 0
x = 5
persistent = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
trigger1 = var(58) >= 18
x = .9

[State 0, snd]
type = playsnd
trigger1 = anim = 210
trigger1 = !time
value = 100,6
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 0,11
persistent = 0

[State 0, snd]
type = width
trigger1 = animelemtime(4) = 0
value = 30,0

[State 0, explod]
type = explod
trigger1 = anim = 211
trigger1 = animelemtime(4) = 0
anim = 8050
id = 8050
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = anim = 210
trigger1 = animelem = 4
attr = S, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6001
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
yaccel = .36
id = 210
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = anim = 211
trigger1 = AnimElem = 4
attr = S, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Midium
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6001
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = Low
ground.slidetime = 26
ground.hittime = 26
ground.velocity = -12
guard.velocity = -10
air.type = Low
air.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 26
fall = 0
air.fall = 0
yaccel = .36
id = 210
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = anim = 210
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = anim = 211
trigger1 = movecontact = 1
fvar(3) = 18
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff立ち強
[Statedef 220]
type = S
movetype = A
physics = N
ctrl = 0
anim = 220
poweradd = 50
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger2 = animelemtime(7) = 0
x = 0

[State 0, vel]
type = velmul
trigger1 = prevstateno = [100,105]
trigger1 = time <= 4
x = .9

[State 0, pos]
type = posadd
trigger1 = animelem = 6
x = ceil(15*const(size.xscale))
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,10
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 0,12
persistent = 0

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = AnimElem = 6
attr = S, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = high
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6002
sparkxy = -14,-66
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = Low
ground.slidetime = 22
ground.hittime = 22
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -8,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 22
fall = 0
air.fall = 0
yaccel = .36
id = 220
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff6強
[Statedef 225]
type = S
movetype = A
physics = N
ctrl = 0
anim = 225
poweradd = 50
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = prevstateno != [100,105]
trigger1 = !time
trigger1 = vel x != 0
x = 0

[State 0, vel]
type = statetypeset
trigger1 = animelemtime(2) = 0
statetype = A

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 0
x = ifelse((prevstateno != [100,105]),1.8,ifelse(prevstateno = 100,2,-2))
y = -1
persistent = 0

[State 0, vel]
type = velset
trigger1 = prevstateno = [100,105]
trigger1 = animelemtime(6) = 0
x = ifelse(prevstateno = 100,4,-4)
y = -1
persistent = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(7) >= 4
y = .22

[State 0, vel]
type = velset
trigger1 = prevstateno != [100,105]
trigger1 = animelemtime(8) = 0
x = 1.5

[State 0, snd]
type = playsnd
triggerall = prevstateno = [100,105]
trigger1 = animelem = 5
value = 100,7
channel = 0
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 6
value = 0,12
persistent = 0

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = prevstateno != [100,105]
trigger1 = AnimElem = 6
attr = A, NA
damage = ceil(ifelse((63*fvar(0))<7,7,(63*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = HA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -14,-70
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
guard.velocity = -8
air.type = high
air.velocity = -1,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 0
air.fall = 0
yaccel = .36
id = 225
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = prevstateno = [100,105]
trigger1 = AnimElem = 6
attr = A, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -14,-70
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -6,-2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = high
air.velocity = -6,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 1
yaccel = .36
id = 225
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 0
ignorehitpause = 1

[State 0, vel]
type = velset
trigger1 = anim = 226
x = 0
y = 0

[State 0, vel]
type = posset
trigger1 = anim = 226
y = 0

[State 0, end]
type = changeanim
trigger1 = Pos Y >= 0 && Vel Y > 0 && anim != 226
value = 226

[State 0, end]
type = changestate
trigger1 = anim = 226 && !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff屈弱
[Statedef 400]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
poweradd = 0
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(58) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !var(8)
var(58) = 1

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger2 = animelemtime(4) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = prevstateno = [100,105]
trigger1 = animelemtime(3) = 0
x = 5
persistent = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
trigger1 = var(58) >= 17
x = .9

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,10
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 401
trigger1 = animelemtime(3) = 0
anim = 8050
id = 8050
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = anim = 400
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6000
sparkxy = -10,-40
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 0
air.fall = 0
yaccel = .36
id = 400
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = anim = 401
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6000
sparkxy = -10,-40
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = Low
ground.slidetime = 26
ground.hittime = 26
ground.velocity = -12
guard.velocity = -10
air.type = Low
air.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 26
fall = 0
air.fall = 0
yaccel = .36
id = 400
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = anim = 400
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = anim = 401
trigger1 = movecontact = 1
fvar(3) = 18
ignorehitpause = 1

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(5) >= 0 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(5) >= 0 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
trigger1 = animelemtime(5) >= 0 && command != "holddown" && command != "holdfwd" && command != "holdback" && prevstateno != [100,105]
value = 12
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff屈中
[Statedef 410]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno = [100,105]),411,410)
poweradd = 40
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(58) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !var(8)
var(58) = 1

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger2 = animelemtime(4) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = prevstateno = [100,105]
trigger1 = animelemtime(3) = 0
x = 5
persistent = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
trigger1 = var(58) >= 16
x = .9

[State 0, snd]
type = playsnd
trigger1 = anim = 411
trigger1 = animelem = 3
value = 2,0
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 410
trigger1 = animelem = 3
value = 0,11
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 411
trigger1 = animelemtime(3) = 0
anim = 8050
id = 8050
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = anim = 410
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = L
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6001
sparkxy = -10,-7
guard.sparkno = s6010
hitsound = s0,4
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = 410
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = anim = 411
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 4,Hit
hitflag = MAF
guardflag = L
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6001
sparkxy = -10,-7
guard.sparkno = s6010
hitsound = s0,4
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = 411
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff3中
[Statedef 415]
type = C
movetype = A
physics = N
ctrl = 0
anim = 415
poweradd = 40
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(58) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !var(8)
var(58) = 1

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger2 = animelemtime(4) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(3) = 0
x = 10;.5

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = var(58) >= 4
x = .85

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 100,8
channel = 0
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 0,11
persistent = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(3) = 0
anim = 8050
id = 8050
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = L
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6001
sparkxy = -10,-7
guard.sparkno = s6010
hitsound = s0,4
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = 415
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff屈強
[Statedef 420]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno = [100,105]),421,420)
poweradd = 50
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(58) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !var(8)
var(58) = 1

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger2 = animelemtime(6) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = prevstateno = [100,105]
trigger1 = animelemtime(4) = 0
x = 5

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
trigger1 = var(58) >= 16
x = .9

[State 0, snd]
type = playsnd
trigger1 = anim = 421
trigger1 = animelem = 4
value = 2,0
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 420
trigger1 = animelem = 3
value = 100,4
channel = 0
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 420
trigger1 = animelem = 3
value = 0,12
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 421
trigger1 = animelemtime(4) = 0
anim = 8050
id = 8050
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = anim = 420
trigger1 = AnimElem = 5
attr = C, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -16,-7
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = Low
ground.slidetime = 22
ground.hittime = 22
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 22
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = 420
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = anim = 421
trigger1 = AnimElem = 4
attr = C, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 4,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -10,-7
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -4,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 1
air.fall = 1
guard.kill = 0
yaccel = .36
id = 421
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff3強
[Statedef 425]
type = C
movetype = A
physics = N
ctrl = 0
anim = 425
poweradd = 50
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(58) = 0

[State 12200, VarAdd]
type = VarAdd
trigger1 = !var(8)
var(58) = 1

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger2 = animelemtime(6) = 0
x = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(5) = 0
x = 8
persistent = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = var(58) >= 9
x = .9

[State 0, snd]
type = playsnd
trigger1 = animelem = 5
value = 100,8
channel = 0
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 5
value = 0,11
persistent = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(5) = 0
anim = 8050
id = 8050
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
persistent = 0
removeongethit = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = AnimElem = 5
attr = C, NA
damage = ceil(ifelse((63*fvar(0))<7,7,(63*fvar(0)))),0
priority = 4,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -10,-7
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = trip
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -3,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 1
air.fall = 1
guard.kill = 0
yaccel = .36
p2facing = 1
id = 425

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ弱
[Statedef 600]
type    = A
movetype= A
physics = N
poweradd= 30
ctrl = 0
anim = 600
sprpriority = 2

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Animelem = 2
value = 0, 10
persistent = 0

[State 0, hit]
type = hitdef
trigger1 = !movecontact
trigger1 = AnimElem = 4
attr = A, NA
damage = ceil(ifelse((35*fvar(0))<7,7,(35*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -11,-35
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -2,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中
[Statedef 610]
type    = A
movetype= A
physics = N
poweradd= 40
ctrl = 0
anim = 610
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Animelem = 4
value = 0, 11
persistent = 0

[State 0, hit]
type = hitdef
trigger1 = !movecontact
trigger1 = AnimElem = 5
attr = A, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6001
sparkxy = -11,-35
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -2,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 620]
type    = A
movetype= A
physics = N
poweradd= 50
ctrl = 0
anim = 620
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Animelem = 5
value = 0, 12
persistent = 0

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = AnimElem = 5
attr = A, NA
damage = ceil(ifelse((84*fvar(0))<7,7,(84*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6002
sparkxy = -10,-60
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -2,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
; 投げ技
;===========================================================================
;掴み
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800+var(0)

[State 0, hit]
type = hitdef
triggerall = !fvar(7)
trigger1 = p2movetype != H && (p2stateno != [40,42])
trigger1 = animelemtime(1) >= 0
attr = S,NT
priority = 1,Miss
hitflag = M-
sparkno = -1
hitsound = s0,10
;p1stateno = 810
p2stateno = 820+var(0)
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
fall = 1
id = 800

[State 901, Throw]
type = ChangeState
trigger1 = numtarget(800)
trigger1 = target,stateno = 820+var(0)
value = 810
persistent = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 225+var(0)

;---------------------------------------------------------------------------
;成功
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
sprpriority = 1

[State 0, end]
type = changestate
triggerall = numtarget
trigger1 = time = [1,4]
trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "y" || target,command = "z" || target,command = "b" || target,command = "c"
value = 830

[State 0, snd]
type = playsnd
trigger1 = time = 5
value = 100,4
channel = 0

[State 810, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = !time
value = 0, 16

[State 810, 音を鳴らす]
type = PlaySnd
trigger1 = time = 5
value = 2, 1

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !var(0)
trigger1 = animelem = 1
pos = ceil(50*const(size.xscale)),0
postype = P1
time = -1

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !var(0)
trigger1 = animelem = 2
pos = ceil(60*const(size.xscale)),0
postype = P1
time = 1

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = var(0)
trigger1 = animelem = 1
pos = ceil(60*const(size.xscale)),0
postype = P1
time = -1

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = var(0)
trigger1 = animelem = 2
pos = ceil(70*const(size.xscale)),0
postype = P1
time = 1

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, explod]
type = explod
trigger1 = animelemtime(5) = 0 && facing = 1
anim = 815
id = 815
facing = 1
postype = p1
pos = 0,0
sprpriority = 1
ownpal = 1
bindtime = -1
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = animelemtime(5) = 0 && facing = -1
anim = 816
id = 816
facing = 1
postype = p1
pos = 0,0
sprpriority = 1
ownpal = 1
bindtime = -1
scale = .833,1.07

[State 810]
type = Changestate
trigger1 = !animtime
value = 811
ctrl = 0

;---------------------------------------------------------------------------
;投げ中
[Statedef 811]
type    = S
movetype= A
physics = N
anim = 811

[state 0, helper]
type = helper
trigger1 = !time
trigger2 = time = 8
trigger3 = time = 16
helpertype = normal
name = "spark"
stateno = 845
id = 845
pos = 30,-80
postype = p1

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !var(0)
trigger1 = animelem = 1
pos = ceil(70*const(size.xscale)),0
postype = P1
time = 1

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = var(0)
trigger1 = animelem = 1
pos = ceil(80*const(size.xscale)),0
postype = P1
time = 1

[State 0, life]
type = targetlifeadd
triggerall = numtarget
trigger1 = time = 22
value = ceil(ifelse((-119*fvar(0))>-7,-7,(-119*fvar(0))))

[State 0, target]
type = targetstate
triggerall = numtarget
trigger1 = time >= 22
value = 821
persistent = 0

[State 810, ステート変更]
type = ChangeState
trigger1 = time >= 40
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;波紋
[Statedef 845]
type    = S
physics = N
velset = 5,-.7
sprpriority = 2
anim = 6331

[State 820, 相手のアニメ変更]
type = angledraw
trigger1 = time <= 1
scale = 1*.5,1*.5

[State 820, 相手のアニメ変更]
type = angledraw
trigger1 = time >= 1
scale = 1*1.5,1*1.5

[State 820, 相手のアニメ変更]
type = playsnd
trigger1 = time = 4
value = 0,1

[State 820, 相手のアニメ変更]
type = destroyself
trigger1 = !animtime

;---------------------------------------------------------------------------
;相手１
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 820, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

[State 0, nhb]
type = selfstate
trigger1 = time > 60
value = 5050

;---------------------------------------------------------------------------
;相手１
[Statedef 10820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 820, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 10820

;---------------------------------------------------------------------------
;（相手）2
[Statedef 821]
type = A
movetype = H
physics = N
velset = -6,-9.5

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 0
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 2601, Vel]
type = VelAdd
trigger1 = 1
y = .4

[State 5040, 5] ;Recover near ground
type = SelfState
triggerall = time >= 10
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5040, 6]; Recover in mid air
type = SelfState
triggerall = time >= 10
triggerall = Vel Y > -1
triggerall = alive
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 2601, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;投げぬけ（自分）（y.yさん製作）
[Statedef 830]
type = A
movetype = I
physics = A
anim = 5210+var(0)
velset = -3,-5

[State 0, target]
type = targetbind
triggerall = numtarget
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
triggerall = numtarget
trigger1 = !time
value = 840

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げ抜け（相手）
[Statedef 840]
type = A
movetype = I
physics = N
velset = -3,-6

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5210

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .45

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1

;===========================================================================
; 必殺技
;===========================================================================
;青緑波紋疾走
[Statedef 1000]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 60
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, width]
type = width
trigger1 = animelemtime(8) >= 0 && animelemtime(14) < 0 && var(2) != 2
trigger2 = animelemtime(14) >= 0 && animelemtime(24) < 0 && var(2) = 2
value = 45,0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = varset
trigger1 = !time
var(2) = ifelse(command = "236z",2,ifelse(command = "236y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = var(36)
var(2) = ifelse((var(36)&2**5),2,ifelse((var(36)&2**4),1,0))

[State 0, anim]
type = changeanim
trigger1 = !time
value = 1000+var(2)

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,20
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelemtime(5) = 0 && var(2) = 2
value = 2,1

[State 0, snd]
type = playsnd
trigger1 = animelemtime(7) = 0 && var(2) != 2
trigger2 = animelemtime(13) = 0 && var(2) = 2
value = 2,2

[State 0, explod]
type = explod
trigger1 = anim = 1000 || anim = 1001
trigger1 = animelemtime(6) = 0
anim = 1010+var(2)
id = 1010+var(2)
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
;bindtime = -1
vel = 2;*const(size.xscale),0
removeongethit = 1
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = anim = 1002
trigger1 = animelemtime(12) = 0
anim = 1010+var(2)
id = 1010+var(2)
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
;bindtime = -1
vel = 2;*const(size.xscale),0
removeongethit = 1
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = var(2) = 2
trigger1 = animelemtime(5) = 0 && facing = 1
anim = 815
id = 815
facing = 1
postype = p1
pos = 0,0
sprpriority = 1
ownpal = 1
bindtime = -1
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = var(2) = 2
trigger1 = animelemtime(5) = 0 && facing = -1
anim = 816
id = 816
facing = 1
postype = p1
pos = 0,0
sprpriority = 1
ownpal = 1
bindtime = -1
scale = .833,1.07

[State 0, attack]
Type = attackdist
trigger1 = !time
value = 220

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = anim = 1000
trigger1 = animelem = 8
trigger2 = animelem = 9
attr = S, SP
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),ceil(ifelse((56*fvar(0)*.25)<7,7,(56*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,11
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,12.4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = anim = 1001
trigger1 = animelem = 8
trigger2 = animelem = 9
attr = S, SP
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),ceil(ifelse((56*fvar(0)*.25)<7,7,(56*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,11
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,12.4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,ifelse(var(40)<12,-3+(var(40)*.42),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = anim = 1002
triggerall = var(11) = 0
trigger1 = animelem = 14
trigger2 = animelem = 15
trigger3 = animelem = 16
trigger4 = animelem = 17
trigger5 = animelem = 18
trigger6 = animelem = 19
attr = S, SP
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,11
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,-12.4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,ifelse(var(40)<12,-3+(var(40)*.42),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = anim = 1002
triggerall = var(11) = 1
trigger1 = animelem = 22
trigger2 = animelem = 23
attr = S, SP
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,11
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,12.4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,ifelse(var(40)<12,-3+(var(40)*.42),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = anim = 1002
triggerall = var(11) = 2
triggerall = !var(10) >= 2
trigger1 = animelem = 26
trigger2 = animelem = 27
attr = S, SP
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),ceil(ifelse((21*fvar(0)*.25)<7,7,(21*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,11
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,-12.4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,ifelse(var(40)<12,-3+(var(40)*.42),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = anim = 1002
triggerall = var(11) = 2
triggerall = var(10) >= 2
trigger1 = animelem = 26
trigger2 = animelem = 27
attr = S, SP
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),ceil(ifelse((70*fvar(0)*.25)<7,7,(70*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,11
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = -1
guardsound = -1
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -6,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,ifelse(var(40)<12,-3+(var(40)*.42),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 1
guard.kill = 0
palfx.color = 108
palfx.time = 80
palfx.sinadd = 96,96,96,4
yaccel = .36
id = stateno
p2facing = 1

;痺れエフェクト1
[State 0, explod]
type = explod
triggerall = anim = 1002 && var(10) >= 2
trigger1 = animelemtime(26) >= 0
trigger1 = movehit = 1
anim = 6060
id = 6060
postype = p2
pos = 0,-55
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

;痺れエフェクト2
[State 0, explod]
type = explod
triggerall = anim = 1002 && var(10) >= 2
trigger1 = animelemtime(26) >= 0
trigger1 = movehit = 1
anim = 6061
id = 6060
postype = p2
pos = 0,-85
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

;痺れエフェクト3
[State 0, explod]
type = explod
triggerall = anim = 1002 && var(10) >= 2
trigger1 = animelemtime(26) >= 0
trigger1 = movehit = 1
anim = 6062
id = 6060
postype = p2
pos = 0,-20
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,5+(moveguarded=1)*4
ignorehitpause = 1
channel = 1

[State 200, 7]
type = TargetState
triggerall = anim = 1002
triggerall = var(10) >= 3
trigger1 = numtarget
trigger1 = movehit
trigger1 = target,stateno != [1001,1002]
value = 1001
ignorehitpause = 0
persistent = 0

[State 0, end]
type = varset
trigger1 = !time
var(11) = 0

[State 0, end]
type = varset
triggerall = var(2) = 2
trigger1 = animelemtime(14) >= 0 && animelemtime(20) < 0
var(11) = 1
ignorehitpause=1
[State 0, end]
type = varset
triggerall = var(2) = 2
trigger1 = animelemtime(22) >= 0 && animelemtime(24) < 0
var(11) = 2
ignorehitpause=1
[State 0, end]
type = varset
triggerall = var(2) = 2
trigger1 = animelemtime(26) >= 0 && animelemtime(28) < 0
var(11) = 3
ignorehitpause=1

[State 0, end]
type = varset
trigger1 = !time
var(10) = 0
[State 0, end]
type = varadd
trigger1 = movecontact = 1
var(10) = 1
ignorehitpause=1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;策士の業
[Statedef 1100]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 1
facep2 = 1;-(prevstateno=[100,119])

[State 810, Throw Sound]
type = playsnd
trigger1 = time = 4
value = 2,4

[State 191, Wood 1]
type = Explod
trigger1 = animelem = 3
anim = 1105
id = 1105
postype = p1
pos = 0,0
sprpriority = 2
bindtime = -1
removeongethit = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0

[State 1001]
type = reversaldef
trigger1 = animElem = 3
reversal.attr = SCA,NA,SA,HA
pausetime = 0,40
p1stateno = 1110
sparkno = s1110
sparkxy = -10,0
hitsound = s0,9

[State 191, Wood 1]
type = Explod
trigger1 = animelem = 1
anim = 1022
id = 1022
postype = p1
pos = ceil(-5*const(size.xscale)),ceil(-5*const(size.yscale))
sprpriority = 3
bindtime = -1
removeongethit = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 1070, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;当身成功
[Statedef 1110]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1101
ctrl = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = !time
value = 100,13
channel = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 7
value = 2,3
channel = 2

[State 5110, 7]
type = explod
trigger1 = animelem = 8
anim = 8100
pos = ceil(17*const(size.xscale)), 0
sprpriority = -1
ownpal = 1

[State 191, Wood 1]
type = nothitby
trigger1 = !time
value = SCA
time = 20

[State 191, Wood 1]
type = removeExplod
trigger1 = animelem = 1
id = 1022

[State 191, Wood 1]
type = Explod
trigger1 = animelem = 8
anim = 1102
id = 1102
postype = p1
pos = 0,0
sprpriority = 3
removetime = -1
bindtime = -1
removeongethit = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0

[State 191, Wood 1]
type = Explod
trigger1 = animelem = 7
anim = 1103
id = 1103
postype = p1
pos = 0,0
sprpriority = 3
removetime = -1
bindtime = -1
removeongethit = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0

[State 191, Wood 1]
type = Explod
trigger1 = animelem = 13
anim = 1104
id = 1104
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
removeongethit = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0

[State 191, Wood 1]
type = removeExplod
trigger1 = animelem = 13
id = 1102

[State 191, Wood 1]
type = removeExplod
trigger1 = animelem = 14
id = 1103

[State 191, Wood 1]
type = removeExplod
trigger1 = !time
id = 1105

[State 191, Wood 1]
type = helper
trigger1 = animelem = 8
name = "hamon0"
helpertype = normal
stateno = 11101
id = 11101
postype = p1
pos = 0,ceil(-58*const(size.yscale))
keyctrl = 0

[State 10,combo]
type = Varset
trigger1 = !time
var(10) = 0
[State 10,combo]
type = Varadd
trigger1 = movehit = 1
var(10) = 1
persistent = 0
ignorehitpause = 1

[State 0, hit]
type = hitdef
triggerall = !var(10)
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
trigger5 = animelem = 12
trigger6 = animelem = 13
attr = S, SA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = back
fall.animtype = back
pausetime = 5,5
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -3,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 1
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = var(10)
trigger1 = animelem = 8
trigger2 = animelem = 10
trigger3 = animelem = 12
attr = S, SP
damage = ceil(ifelse((14*fvar(0))<7,7,(14*fvar(0)))),ceil(ifelse((14*fvar(0)*.25)<7,7,(14*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = back
fall.animtype = back
pausetime = 5,5
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -3,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 1
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = var(10)
trigger1 = animelem = 9
trigger2 = animelem = 11
trigger3 = animelem = 13
attr = S, SP
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),ceil(ifelse((21*fvar(0)*.25)<7,7,(21*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = back
fall.animtype = back
pausetime = 5,5
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -3,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 1
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 810, Throw Sound]
type = stopsnd
trigger1 = !animtime
channel = 2

[State 1070, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Soff山吹色の波紋疾走
[Statedef 1200]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0
anim = 1200
facep2 = 1;-(prevstateno=[100,119])

[State 0, width]
type = width
trigger1 = anim = 1200
trigger1 = animelemtime(13) = 0
value = 40,0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = varset
trigger1 = !time
var(2) = ifelse(command = "623z",2,ifelse(command = "623y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = var(36)
var(2) = ifelse((var(36)&2**2),2,ifelse((var(36)&2**1),1,0))

[State 1000, VarSet]
type = poweradd
trigger1 = !time
value = ifelse(var(2)=0,10,50)

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = anim = 1200
trigger1 = animelemtime(13) = 0
value = 2,5

[State 0, explod]
type = null;explod
trigger1 = !time
anim = 1201
id = 1201
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
removeongethit = 1
scale = .833,1.07
ignorehitpause = 0

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = !var(2)
trigger1 = animelem = 13
attr = S, SA
damage = ceil(ifelse((98*fvar(0))<7,7,(98*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = H
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,16
sparkno = s6004
sparkxy = -20,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -5.5
air.type = Low
air.velocity = -3,12.4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,ifelse(var(40)<12,-3+(var(40)*.42),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 13
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1
persistent = 0

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = var(2) = 1
trigger1 = animelem = 13
attr = S, SA
damage = ceil(ifelse((98*fvar(0))<7,7,(98*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = H
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,16
sparkno = s6004
sparkxy = -20,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -6,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = 0
air.type = Low
air.velocity = -3,12.4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1
persistent = 0

[State 0, hit]
type = hitdef
triggerall = !movecontact
triggerall = var(2) = 2
trigger1 = animelem = 13
attr = S, SA
damage = ceil(ifelse((133*fvar(0))<7,7,(133*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = H
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,16
sparkno = s6004
sparkxy = -20,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 13
guard.slidetime = 15
guard.hittime = 15
guard.ctrltime = 15
ground.velocity = -12
guard.velocity = 0
air.type = Low
air.velocity = -8,-8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 0
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1
persistent = 0

[State 200, 7]
type = TargetState
triggerall = numtarget
triggerall = var(2) = [0,1]
trigger1 = numtarget && movehit
trigger1 = target,stateno != 1201 && target,stateno != 1002
value = 1201
ignorehitpause = 0
persistent = 0

[State 220, CornerPush]
type = VarSet
trigger1 = !var(2)
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = var(2) = 2
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 1070, 5]
type = Changeanim
trigger1 = Anim = 1200 && !animtime
value = 1205

[State 1070, 5]
type = ChangeState
trigger1 = Anim = 1205 && !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Soff山吹色の波紋疾走(スタンド)
[Statedef 1250]
type = S
movetype = I
physics = N
sprpriority = 2
anim = 1201

[State 0, btr]
type = bindtoroot
trigger1 = 1
value = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
trigger1 = (parent,var(6)&128)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 1070, 5]
type = Changeanim
trigger1 = root,anim = 1205 && anim != 1206
value = 1206

[State 1070, 5]
type = ChangeState
trigger1 = Anim = 1206 && !animtime
trigger2 = root,stateno != 1200
value = 10000

;---------------------------------------------------------------------------
;Soff波紋のビート
[Statedef 1300]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 40
sprpriority = 0
anim = 1300
facep2 = 1;-(prevstateno=[100,119])

[State 0, hit]
type = hitdef
triggerall = (!fvar(7) || p2movetype = H)
trigger1 = (p2stateno != [40,42])
trigger1 = enemynear,stateno != [150,151]
trigger1 = animelem = 4
attr = S,ST
priority = 1,Miss
hitflag = M
sparkno = -1
hitsound = -1
p1stateno = 1310
p2stateno = 1320
p2facing = 1
fall = 1
numhits = 0
ID = stateno

[State 1070, 5]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Soff波紋のビート(スタンド)
[Statedef 1350]
type = S
movetype = I
physics = N
sprpriority = 2
anim = 1305

[State 0, btr]
type = bindtoroot
trigger1 = 1
value = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
trigger1 = (parent,var(6)&128)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 1070, 5]
type = Changeanim
trigger1 = anim != root,anim+5
value = root,anim+5

[State 1070, 5]
type = sprpriority
trigger1 = anim = 1316
value = -1

[State 1070, 5]
type = ChangeState
;trigger1 = Anim = 1316 && !animtime
trigger1 = root,stateno != [1300,1310]
value = 10000

;---------------------------------------------------------------------------
;Soff波紋のビート成功
[Statedef 1310]
type = S
movetype = A
physics = N
velset = 0,0
sprpriority = 1
anim = 1310

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,2
channel = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 2,6

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !time
pos = ceil(60*const(size.xscale)),0
postype = P1
time = 1

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 80,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, explod]
type = explod
trigger1 = anim = 1310
trigger1 = animelemtime(2) = 0 && facing = 1
anim = 815
id = 815
facing = 1
postype = p1
pos = 0,20
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = -1
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = anim = 1310
trigger1 = animelemtime(2) = 0 && facing = -1
anim = 816
id = 815
facing = 1
postype = p1
pos = 0,20
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = -1
scale = .833,1.07

[State 0, vel]
type = removeexplod
trigger1 = anim = 1311
id = 815
[State 0, vel]
type = removeexplod
trigger1 = anim = 1311
id = 6061

[State 0, explod]
type = explod
trigger1 = animelemtime(2) = 0
anim = 6061
id = 6061
postype = p1
pos = 10,-30
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = -1
scale = .833*1.2,1.07*1.2

[State 2601, EnvShake]
type = EnvShake
triggerall = anim = 1310
trigger1 = animelemtime(2) = 0
time = 40
ampl = 2

[State 0, vel]
type = posadd
trigger1 = anim = 1311
trigger1 = animelemtime(6) = 0
x = 40

[State 0, snd]
type = playsnd
trigger1 = anim = 1311
trigger1 = animelemtime(6) = 0
value = 100,17
channel = 0

[State 0, snd]
type = playsnd
trigger1 = time = 30
value = 2,7

[State 0, snd]
type = playsnd
trigger1 = anim = 1311
trigger1 = animelemtime(6) = 0
value = 0,4

[State 1070, 5]
type = Changeanim
trigger1 = anim = 1310 && !animtime
value = 1311

[State 0, explod]
type = explod
trigger1 = anim = 1311
trigger1 = animelemtime(6) = 0
anim = 6070
id = 6070
postype = p1
pos = 50,-130
sprpriority = 2
ownpal = 1
facing = -1
bindtime = 1
scale = 1.5,1.5

[State 0, vel]
type = varset
trigger1 = !time
var(14) = var(40)
[State 0, vel]
type = varset
trigger1 = !time
var(15) = var(44)
[State 0, vel]
type = varset
trigger1 = time = 1
var(40) = 0
[State 0, vel]
type = varset
trigger1 = time = 1
var(44) = 0
[State 0, vel]
type = varset
trigger1 = !animtime
var(40) = var(14)
[State 0, vel]
type = varset
trigger1 = !animtime
var(44) = var(15)

[State 0, life]
type = targetlifeadd
triggerall = numtarget
trigger1 = anim = 1311 && animelemtime(6) = 0
value = ceil(ifelse((-147*fvar(0))>-7,-7,(-147*fvar(0))))

[State 1070, 5]
type = targetstate
triggerall = numtarget
trigger1 = anim = 1311 && animelemtime(6) = 0
value = 1321

[State 1070, 5]
type = ChangeState
trigger1 = anim = 1311 && !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Soff波紋のビート相手1
[Statedef 1320]
type = S
movetype = H
sprpriority = -1

[State 1070, 5]
type = statetypeset
trigger1 = time = 1
movetype = H

[State 1070, 5]
type = Changeanim2
trigger1 = !time
value = 1320

[State 1060, 2]
type = posadd
trigger1 = time = 5
trigger2 = time = 20
trigger3 = time = 35
trigger4 = time = 40
x = 1

[State 1060, 2]
type = posadd
trigger1 = time = 6
trigger2 = time = 21
trigger3 = time = 36
trigger4 = time = 41
x = -1

[State 1060, 2]
type = palfx
trigger1 = time = 5
trigger2 = time = 20
trigger3 = time = 35
trigger4 = time = 40
time = 3
add = 150,150,250
mul = 150,150,250

;---------------------------------------------------------------------------
;（相手）2
[Statedef 1321]
type = A
movetype = H
physics = N
velset = -1.2,-10

[State 0, vel]
type = posadd
trigger1 = !time
x = -50

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5051)
value = 5051

[State 2601, ChangeAnim] ;Change anim when done with transition
type = ChangeAnim
trigger1 = time = 0
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 2601, Vel]
type = VelAdd
trigger1 = 1
y = .4

[State 2601, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;===========================================================================
; 超必殺技
;===========================================================================
;師の教え
[Statedef 3000]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 3000+var(0)
poweradd = ifelse(var(0),40,0)
facep2 = 1;-(prevstateno=[100,119])

[State 0, vel]
type = nothitby
trigger1 = time <= 44
value = SCA
time = 1

[State 0, super]
type = superpause
trigger1 = time = 3
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = time = 3
anim = 7100
id = 7100
pos = ceil(0*const(size.xscale)),ceil(-70*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 3
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, hit]
type = hitdef
trigger1 = animelem = 8
attr = S, HA
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
animtype = up
guardflag = MA
pausetime = 0,0
sparkno = s6004
sparkxy = -14,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = ifelse(var(0),40,0),0
givepower = 10,0
ground.slidetime = 16
ground.hittime = 16
ground.type = low
ground.velocity = -1,-6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,ifelse(var(40)<12,-3+(var(40)*.42),0)
airguard.velocity = -4,ifelse(var(40)<12,-3+(var(40)*.42),0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.kill = 0
p2facing = 1
ID = stateno
kill = 0

[State 901, Throw]
type = TargetState
triggerall = numtarget
trigger1 = time > 1 && movehit && numtarget(3000)
value = 3020
ignorehitpause = 1
;persistent = 0
id = 3000

[State 10000, ChangeState]
type = ChangeState
triggerall = numtarget
triggerall = !var(8)
trigger1 = time > 1 && movehit && numtarget(3000)
value = 3010
ignorehitpause = 0
id = 3000

[state 3003]
type = null;TargetBind
triggerall = numtarget
trigger1 = time > 1 && movehit && numtarget(3000)
time = 1
ID = 3000
pos = 50,-20
ignorehitpause = 1
persistent = 0
id = 3000

[State 0, vel]
type = nothitby
triggerall = numtarget
trigger1 = movehit && numtarget(3000)
value = SCA
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 3000, 8]
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;師の教え成功
[Statedef 3010]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 3001

[state 3003]
type = helper
trigger1 = time = 0
name = "risa"
helpertype = normal
stateno = 3005
id = 3005
pos = 45,-100
postype = p1
ownpal = 1
keyctrl = 0
sprpriority = 4
supermovetime = 9999999
pausemovetime = 9999999
facing = ifelse(facing=1,1,-1)

[State 0, vel]
type = playsnd
trigger1 = !time
value = 100,14
channel = 0

[State 0, vel]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 0, snd]
type = playsnd
trigger1 = animelemtime(8) = 0
value = 2,1

[State 0, explod]
type = explod
trigger1 = animelemtime(8) = 0 && facing = 1
anim = 815
id = 815
facing = 1
postype = p1
pos = 0,20
sprpriority = 1
ownpal = 1
bindtime = -1
removetime = 12
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = animelemtime(8) = 0 && facing = -1
anim = 816
id = 815
facing = 1
postype = p1
pos = 0,20
sprpriority = 1
ownpal = 1
bindtime = -1
removetime = 12
scale = .833,1.07

[State 2601, SelfState]
type = targetstate
triggerall = numtarget
trigger1 = time = 58
value = 3021
id = 3000

[State 191, Wood 1]
type = Explod
trigger1 = animelemtime(16) = 0
anim = 3006
id = 3006
postype = back
pos = 270, 120
sprpriority = -3
bindtime = -1
removetime = -1
ownpal = 1
scale = const(size.xscale),1

[State 191, Wood 1]
type = Explod
trigger1 = animelemtime(16) = 12
anim = 3007
id = 3007
postype = back
pos = 60, 260
sprpriority = -3
bindtime = -1
removetime = -1
ownpal = 1
scale = const(size.xscale),1

[State 191, Wood 1]
type = Explod
trigger1 = animelemtime(16) = 24
anim = 3008
id = 3008
postype = back
pos = 270, 240
sprpriority = -3
bindtime = -1
removetime = -1
ownpal = 1
scale = const(size.xscale),1

[State 191, Wood 1]
type = Explod
trigger1 = animelemtime(16) = 36
anim = 3009
id = 3009
postype = back
pos = 120, 120
sprpriority = -3
bindtime = -1
removetime = -1
ownpal = 1
scale = const(size.xscale),1

[State 191, Wood 1]
type = Explod
trigger1 = animelemtime(16) = 70
anim = 3006
id = 3016
postype = back
pos = 270, 120
sprpriority = -3
removetime = -1
vel = -9,0
ownpal = 1
scale = const(size.xscale),1

[State 191, Wood 1]
type = Explod
trigger1 = animelemtime(16) = 70
anim = 3007
id = 3017
postype = back
pos = 60, 260
sprpriority = -3
removetime = -1
vel = -9,0
ownpal = 1
scale = const(size.xscale),1

[State 191, Wood 1]
type = Explod
trigger1 = animelemtime(16) = 70
anim = 3008
id = 3018
postype = back
pos = 270, 240
sprpriority = -3
removetime = -1
vel = -9,0
ownpal = 1
scale = const(size.xscale),1

[State 191, Wood 1]
type = Explod
trigger1 = animelemtime(16) = 70
anim = 3009
id = 3019
postype = back
pos = 120, 120
sprpriority = -3
removetime = -1
vel = -9,0
ownpal = 1
scale = const(size.xscale),1

[state 3000]
type = removeExplod
trigger1 = animelemtime(16) = 70
id = 3006
[state 3000]
type = removeExplod
trigger1 = animelemtime(16) = 70
id = 3007
[state 3000]
type = removeExplod
trigger1 = animelemtime(16) = 70
id = 3008
[state 3000]
type = removeExplod
trigger1 = animelemtime(16) = 70
id = 3009
[state 3000]
type = removeExplod
trigger1 = animelem = 17
id = 3016
[state 3000]
type = removeExplod
trigger1 = animelem = 17
id = 3017
[state 3000]
type = removeExplod
trigger1 = animelem = 17
id = 3018
[state 3000]
type = removeExplod
trigger1 = animelem = 17
id = 3019

[State 0, explod]
type = explod
trigger1 = animelemtime(16) = 0
trigger2 = animelemtime(16) = 12
trigger3 = animelemtime(16) = 24
trigger4 = animelemtime(16) = 36
trigger5 = animelemtime(16) = 48
trigger6 = animelemtime(16) = 60
anim = 6004
id = 6004
facing = 1
postype = p2
pos = 0,-45
sprpriority = 5
ownpal = 1
bindtime = -1
scale = .833,1.07

[state 4100, 1]
type = envcolor
trigger1 = animelemtime(16) = 0
trigger2 = animelemtime(16) = 12
trigger3 = animelemtime(16) = 24
trigger4 = animelemtime(16) = 36
trigger5 = animelemtime(16) = 48
trigger6 = animelemtime(16) = 60
time = 1
ignorehitpause = 1

[state 4100, 1]
type = hitadd
trigger1 = animelemtime(16) = 0
trigger2 = animelemtime(16) = 12
trigger3 = animelemtime(16) = 24
trigger4 = animelemtime(16) = 36
trigger5 = animelemtime(16) = 48
trigger6 = animelemtime(16) = 60
value = numtarget
ignorehitpause = 1

[state 4100, 1]
type = targetlifeadd
triggerall = numtarget
trigger1 = animelemtime(16) = 0
trigger2 = animelemtime(16) = 12
trigger3 = animelemtime(16) = 24
trigger4 = animelemtime(16) = 36
trigger5 = animelemtime(16) = 48
value = ceil(ifelse((-35*fvar(0))>-7,-7,(-35*fvar(0))))
kill = 0
id = 3000
ignorehitpause = 1

[state 4100, 1]
type = targetlifeadd
triggerall = numtarget
trigger1 = animelemtime(16) = 60
value = ceil(ifelse((-70*fvar(0))>-7,-7,(-70*fvar(0))))
kill = 1
id = 3000
ignorehitpause = 1

[state 4100, 1]
type = targetpoweradd
triggerall = numtarget
trigger1 = animelemtime(16) = 0
trigger2 = animelemtime(16) = 12
trigger3 = animelemtime(16) = 24
trigger4 = animelemtime(16) = 36
trigger5 = animelemtime(16) = 48
trigger6 = animelemtime(16) = 60
value = 10
id = 3000
ignorehitpause = 1

[State 0, explod]
type = playsnd
trigger1 = animelemtime(16) = 0
trigger2 = animelemtime(16) = 12
trigger3 = animelemtime(16) = 24
trigger4 = animelemtime(16) = 36
trigger5 = animelemtime(16) = 48
value = 0,5
channel = 1

[State 0, explod]
type = playsnd
trigger1 = numtarget
trigger1 = target,alive
trigger1 = animelemtime(16) = 61
value = 5,5
channel = 1

[State 0, explod]
type = explod
trigger1 = animelemtime(16) = 0
anim = 3003
id = 3003
facing = -1
postype = p1
pos = 100,-80
sprpriority = 4
ownpal = 1
bindtime = -1
removetime = -1
scale = .833*1.5,1.07*1.5

[State 0, vel]
type = playsnd
trigger1 = time = 110
value = 100,11
;channel = 0

[State 0, vel]
type = removeexplod
trigger1 = time = 122
id = 3003

[State 0, explod]
type = explod
trigger1 = time = 122
anim = 3002
id = 3002
facing = -1
postype = p1
pos = 100,-80
sprpriority = 4
ownpal = 1
bindtime = -1
scale = .833*1.5,1.07*1.5

[State 210, 3]
type = ScreenBound
trigger1 = time >= 122
value = 0

[State -2, BG]
type = Helper
trigger1 = animelemtime(16) = 13
ID = 8750
stateno = 8750
postype = left
pos = -999,-999
pausemovetime = 99999999
ignorehitpause = 1

[state 3003]
type = helper
trigger1 = time = 110
name = "jojo"
helpertype = normal
stateno = 3012
id = 3012
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -1

[State 901, Throw]
type = TargetState
triggerall = numtarget
trigger1 = animelemtime(16) = 61 && !target,alive
value = 3030
ignorehitpause = 1
persistent = 0

;痺れエフェクト1
[State 0, explod]
type = explod
trigger1 = numtarget
trigger1 = target,alive
trigger1 = animelemtime(16) = 61
anim = 6060
id = 6060
postype = p2
pos = 0,-55
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

;痺れエフェクト2
[State 0, explod]
type = explod
trigger1 = numtarget
trigger1 = target,alive
trigger1 = animelemtime(16) = 61
anim = 6061
id = 6060
postype = p2
pos = 0,-85
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

;痺れエフェクト3
[State 0, explod]
type = explod
trigger1 = numtarget
trigger1 = target,alive
trigger1 = animelemtime(16) = 61
anim = 6062
id = 6060
postype = p2
pos = 0,-20
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[state 3000]
type = ChangeState
triggerall = animelemtime(24) >= 2
triggerall = BackEdgeBodyDist >= 0
trigger1 = numtarget
trigger1 = (target,stateno = [5100,5120])
trigger2 = !numtarget(3000)
value = 0
ctrl = 1

[state 3000]
type = ChangeState
triggerall = animelemtime(24) >= 2
triggerall = BackEdgeBodyDist < 0
trigger1 = numtarget
trigger1 = (target,stateno = [5100,5120])
trigger2 = !numtarget(3000)
value = 3011

;-----------------------------------------------
;師ヒット後
[Statedef 3011]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 100
ctrl = 0
sprpriority = 2

[state 3000]
type = velset
trigger1 = !time
x = 5

[state 3000]
type = velset
trigger1 = anim = 101
x = 0

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 210, 3]
type = ScreenBound
trigger1 = anim != 101
value = 0

[state 3000]
type = Changeanim
trigger1 = BackEdgeBodyDist >= 50 && anim != 101
value = 101

[state 3000]
type = Changestate
trigger1 = anim = 101 && !animtime
value = 0
ctrl = 1

;-----------------------------------------------
;ジョセフカット
[Statedef 3012]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3010
sprpriority = -1

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 3010
id = 3010
pos = 0,240
postype = back
sprpriority = -1
removetime = -1
removeongethit = 1
scale = 1.5*const(size.xscale),1.5
vel = 50,0
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time = 5
anim = 3010
id = 3012
pos = 250,240
postype = back
sprpriority = -1
removetime = -1
removeongethit = 1
scale = 1.5*const(size.xscale),1.5
vel = -6.7,0
accel = 0.52,0
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time = 20
anim = 3012
id = 3013
pos = 180,232
postype = back
sprpriority = -1
removetime = -1
removeongethit = 1
scale = 1.5*const(size.xscale),1.5
vel = -6,0
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time = 35
trigger2 = time = 39
anim = 7000
id = 3014
pos = 0,120
postype = back
sprpriority = -1
removetime = -1
removeongethit = 1
bindtime = -1
scale = .833,1.08
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time = 25
trigger2 = time = 37
anim = 3010
id = 3015
pos = 125,220
postype = back
sprpriority = -1
removetime = -1
removeongethit = 1
bindtime = -1
scale = 1.9*const(size.xscale),1.9
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 19
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 20
trigger1 = Time <= 25
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time >= 20
trigger1 = Time <= 25
ID = 3013
scale = (1.5+Var(13)/14.0)*const(size.xscale) , 1.5+Var(13)/14.0

[State 1000, 3]
type = removeExplod
trigger1 = time = 5
ID = 3010

[State 1000, 3]
type = removeExplod
trigger1 = time = 20
ID = 3012

[State 1000, 3]
type = removeExplod
trigger1 = time = 25
ID = 3013

[State 1000, 3]
type = removeExplod
trigger1 = time = 37
trigger2 = parent,animelem = 24
ID = 3014

[State 1000, 3]
type = removeExplod
trigger1 = time = 35
trigger2 = time = 39
ID = 3015

[state 3000]
type = destroyself
trigger1 = parent,animelem = 24

;-----------------------------------------------
;リサリサ
[Statedef 3005]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3005
sprpriority = 4

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[state 3000]
type = playsnd
trigger1 = time = 20
value = 4,1

[state 3000]
type = pause
trigger1 = time = 0
time = 40
movetime = 40

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 3005
id = 3005
pos = 0,0
postype = p1
sprpriority = 4
bindtime = -1
pausemovetime = 999999
removeongethit = 1
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = 1
ID = 3005
scale = (1+Var(13)/200.0)*parent,const(size.xscale) , 1+Var(13)/200.0
pausemovetime = 999999

[State 3000, Super A]
type = BGPalfx
trigger1 = Time > 0
time = 1
add = 0,0,0
mul = 130,130,130

[State 0, explod]
type = explod
trigger1 = time = 0
anim = 3004
id = 3004
pos = 160,120
postype = left
bindtime = -1
scale = .833,1.08
sprpriority = -20
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;[State 5110, 7]
;type = Envcolor
;trigger1 = time = 0
;value = 255,255,255
;time = 2
;under = 1

[state 3000]
type = removeexplod
trigger1 = animtime = 0
id = 3005

[state 3000]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;相手1
[Statedef 3020]
type = A
movetype = H
physics = N
velset = 0,0

[State 2500, ScreenBound]
type = velset
trigger1 = time = 6
x = -1
y = -7.5

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = !time
trigger1 = SelfAnimExist(5051)
value = 5051

[State 2601, ChangeAnim] ;Change anim when done with transition
type = ChangeAnim
trigger1 = !time
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = time >= 6
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 2601, Vel]
type = VelAdd
trigger1 = time >= 10
y = .3

[State 2601, Vel]
type = nothitby
trigger1 = 1
value = SCA

[State 2601, Vel]
type = playerpush
trigger1 = 1
value = 0

[State 2601, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;相手2
[Statedef 3021]
type = A
movetype = H
physics = N
velset = 0,0

[State 2601, Pal]
type = PalFX
trigger1 = time = 64
time = 80
sinadd = 96,96,96,4
color = 108

[State 2601, Vel]
type = changeanim2
trigger1 = !time
value = 3020

[State 2601, Vel]
type = nothitby
trigger1 = 1
value = SCA

[State 2601, Vel]
type = playerpush
trigger1 = 1
value = 0

[State 1025, Anim]
type = ChangeAnim
trigger1 = time = 64
trigger1 = SelfAnimExist(5900) && anim != 5900
value = 5900

[State 210, 3]
type = ScreenBound
trigger1 = time <= 65
trigger2 = time >= 98
value = 1

[State 1026, Velocity]
type = VelSet
trigger1 = Time = 65
x = -10
y = -6.5

[State 1026, Gravity]
type = VelAdd
trigger1 = Time > 65
y = .3

[State 1026, Hit wall]
type = ChangeState
trigger1 = Time > 65
trigger1 = BackEdgeBodyDist <= 20
value = 1002

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y > 10)
value = 5100

;---------------------------------------------------------------------------
;敵（死亡時）
[Statedef 3030]
type = A
movetype = H
physics = N
anim = 5030
velset = -5,-6

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .4

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030
trigger1 = !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;波紋疾走
[Statedef 3100]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 13100
poweradd = 40
facep2 = 1;-(prevstateno=[100,119])

[State 0, attack]
Type = attackdist
trigger1 = !time
value = 0

[State 0, super]
type = superpause
trigger1 = time = 12
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 7100
id = 7100
pos = ceil(55*const(size.xscale)),ceil(-80*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time = 12
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, hit]
type = hitdef
triggerall = !fvar(7)
trigger1 = (p2stateno != [40,42])
trigger1 = enemynear,stateno != [150,151]
trigger1 = animelem = 5
attr = S,HT
priority = 1,Miss
hitflag = M
sparkno = -1
hitsound = -1
p1stateno = 3110
p2stateno = 3120
p2facing = 1
fall = 1
numhits = 0
ID = stateno

[State 3000, 8]
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;波紋疾走(スタンド)
[Statedef 3115]
type = S
movetype = I
physics = N
sprpriority = 2
;anim = 13105

[State 0, btr]
type = bindtoroot
trigger1 = 1
value = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
trigger1 = (parent,var(6)&128)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 1070, 5]
type = Changeanim
trigger1 = anim != root,anim+10000
value = root,anim+10000

[State 1070, 5]
type = Changeanim
trigger1 = root,anim = 13102
value = 9999

[State 1070, 5]
type = ChangeState
;trigger1 = Anim = 1316 && !animtime
trigger1 = root,stateno != [3100,3120]
value = 10000

;---------------------------------------------------------------------------
;波紋疾走成功
[Statedef 3110]
type = S
movetype = A
physics = N
velset = 0,0
sprpriority = 1
anim = 13101

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,2
channel = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 2,6

[State 0, snd]
type = playsnd
triggerall = anim = 13101
trigger1 = animelemtime(4) = 0
trigger2 = time = 30
trigger3 = time = 60
value = 2,3
channel = 2

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !time
pos = ceil(80*const(size.xscale)),0
postype = P1
time = 1

[State 0, explod]
type = explod
trigger1 = anim = 13101
trigger1 = animelemtime(3) = 0 && facing = 1
anim = 815
id = 815
facing = 1
postype = p1
pos = -15,20
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -1
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = anim = 13101
trigger1 = animelemtime(3) = 0 && facing = -1
anim = 816
id = 815
facing = 1
postype = p1
pos = 0,20
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -1
scale = .833,1.07

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 80,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, explod]
type = explod
trigger1 = anim = 11300
trigger1 = animelemtime(2) = 0 && facing = 1
anim = 815
id = 815
facing = 1
postype = p1
pos = 0,20
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = 40
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = anim = 11300
trigger1 = animelemtime(2) = 0 && facing = -1
anim = 816
id = 815
facing = 1
postype = p1
pos = 0,20
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = 40
scale = .833,1.07

[State 0, vel]
type = removeexplod
trigger1 = anim = 11301
id = 815
[State 0, vel]
type = removeexplod
trigger1 = anim = 11301
id = 6061

[State 2601, EnvShake]
type = EnvShake
trigger1 = anim = 13102
trigger1 = animelemtime(7) = 0
time = 10
ampl = 2

[State 0, snd]
type = playsnd
trigger1 = anim = 13102
trigger1 = animelemtime(7) = 0
value = 100,17
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 13102
trigger1 = animelemtime(7) = 0
value = 0,4

[State 1070, 5]
type = Changeanim
trigger1 = time = 210
value = 13102

[State 0, explod]
type = explod
trigger1 = anim = 13102
trigger1 = animelemtime(7) = 0
anim = 6070
id = 6070
postype = p1
pos = 100,-60
sprpriority = 2
ownpal = 1
facing = -1
bindtime = 1
scale = 1.5,1.5

[State 0, life]
type = removeexplod
trigger1 = anim = 13102
id = 815

[State 0, life]
type = targetlifeadd
triggerall = numtarget
trigger1 = anim = 13102 && animelemtime(7) = 0
value = ceil(ifelse((-294*fvar(0))>-7,-7,(-294*fvar(0))))

[State 1070, 5]
type = targetstate
triggerall = numtarget
trigger1 = anim = 13102 && animelemtime(7) = 0
value = 3121

[State 191, Wood 1]
type = helper
trigger1 = time = 10
name = "hamon10"
helpertype = normal
stateno = 3140
id = 3140
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-70*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 18
name = "hamon11"
helpertype = normal
stateno = 3141
id = 3141
postype = p1
pos = ceil(88*const(size.xscale)),ceil(-70*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 21
name = "hamon12"
helpertype = normal
stateno = 3142
id = 3142
postype = p1
pos = ceil(86*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 35
name = "hamon13"
helpertype = normal
stateno = 3143
id = 3143
postype = p1
pos = ceil(83*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 43
name = "hamon14"
helpertype = normal
stateno = 3144
id = 3144
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 68
name = "hamon15"
helpertype = normal
stateno = 3145
id = 3145
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-62*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 73
name = "hamon16"
helpertype = normal
stateno = 3146
id = 3145
postype = p1
pos = ceil(87*const(size.xscale)),ceil(-64*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 93
name = "hamon20"
helpertype = normal
stateno = 3147
id = 3147
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-70*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 96;101
name = "hamon21"
helpertype = normal
stateno = 3148
id = 3148
postype = p1
pos = ceil(88*const(size.xscale)),ceil(-70*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 99;104
name = "hamon22"
helpertype = normal
stateno = 3149
id = 3149
postype = p1
pos = ceil(86*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 111;116
name = "hamon23"
helpertype = normal
stateno = 3150
id = 3150
postype = p1
pos = ceil(83*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 119;124
name = "hamon24"
helpertype = normal
stateno = 3151
id = 3151
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 124;149
name = "hamon25"
helpertype = normal
stateno = 3152
id = 3152
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-62*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 129;154
name = "hamon26"
helpertype = normal
stateno = 3153
id = 3153
postype = p1
pos = ceil(87*const(size.xscale)),ceil(-64*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 139
name = "hamon30"
helpertype = normal
stateno = 3154
id = 3154
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-70*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 142
name = "hamon31"
helpertype = normal
stateno = 3155
id = 3155
postype = p1
pos = ceil(88*const(size.xscale)),ceil(-70*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 145
name = "hamon32"
helpertype = normal
stateno = 3156
id = 3156
postype = p1
pos = ceil(86*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 151
name = "hamon33"
helpertype = normal
stateno = 3157
id = 3157
postype = p1
pos = ceil(83*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 155
name = "hamon34"
helpertype = normal
stateno = 3158
id = 3158
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 158
name = "hamon35"
helpertype = normal
stateno = 3159
id = 3159
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-62*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 161
name = "hamon36"
helpertype = normal
stateno = 3160
id = 3160
postype = p1
pos = ceil(87*const(size.xscale)),ceil(-64*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 166
name = "hamon40"
helpertype = normal
stateno = 3161
id = 3161
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-70*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 168
name = "hamon41"
helpertype = normal
stateno = 3162
id = 3162
postype = p1
pos = ceil(88*const(size.xscale)),ceil(-70*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 170
name = "hamon42"
helpertype = normal
stateno = 3163
id = 3163
postype = p1
pos = ceil(86*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 173
name = "hamon43"
helpertype = normal
stateno = 3164
id = 3164
postype = p1
pos = ceil(83*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 175
name = "hamon44"
helpertype = normal
stateno = 3165
id = 3165
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-68*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 177
name = "hamon45"
helpertype = normal
stateno = 3166
id = 3166
postype = p1
pos = ceil(85*const(size.xscale)),ceil(-62*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 191, Wood 1]
type = helper
trigger1 = time = 180
name = "hamon46"
helpertype = normal
stateno = 3167
id = 3167
postype = p1
pos = ceil(87*const(size.xscale)),ceil(-64*const(size.yscale))
sprpriority = 4
ownpal = 1

[State 5110, 7]
type = Envcolor
trigger1 = (time = [145,195])
trigger1 = time % 3 = 0
trigger2 = anim = 13102 && animelemtime(7) = 0
value = 0,9,239
time = 1
under = 0

;痺れエフェクト1
[State 0, explod]
type = explod
trigger1 = anim = 13102 && animelemtime(7) = 0
anim = 6060
id = 6060
postype = p2
pos = 0,-55
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

;痺れエフェクト2
[State 0, explod]
type = explod
trigger1 = anim = 13102 && animelemtime(7) = 0
anim = 6061
id = 6060
postype = p2
pos = 0,-85
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

;痺れエフェクト3
[State 0, explod]
type = explod
trigger1 = anim = 13102 && animelemtime(7) = 0
anim = 6062
id = 6060
postype = p2
pos = 0,-20
bindtime = -1
removetime = 100
scale = .833,1.07
sprpriority = 5
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[state 3000]
type = ChangeState
triggerall = animelemtime(15) >= 0
trigger1 = numtarget
trigger1 = (target,stateno = [5100,5120])
trigger2 = !numtarget(3100)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;波紋疾走相手1
[Statedef 3120]
type = S
movetype = H
sprpriority = -1

[State 1070, 5]
type = Changeanim2
trigger1 = !time
value = 13120

[State 1070, 5]
type = Changeanim2
trigger1 = time >= 200
value = anim

;---------------------------------------------------------------------------
;疾走相手2
[Statedef 3121]
type = A
movetype = H
physics = N

[State 2601, Pal]
type = PalFX
trigger1 = !time
time = 80
sinadd = 96,96,96,4
color = 108

[State 2601, Vel]
type = nothitby
trigger1 = 1
value = SCA

[State 2601, Vel]
type = playerpush
trigger1 = 1
value = 0

[State 1025, Anim]
type = ChangeAnim
trigger1 = !time
trigger1 = SelfAnimExist(5900) && anim != 5900
value = 5900

[State 1025, Anim]
type = ChangeAnim
trigger1 = anim != 5900
value = 5012

[State 210, 3]
type = null;ScreenBound
trigger1 = time <= 65
trigger2 = time >= 98
value = 1

[State 1026, Velocity]
type = VelSet
trigger1 = !time
x = -15
y = 0

[State 1026, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 20
value = 1002

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y > 10)
value = 5100

;===========================================================================
; システムなど
;===========================================================================
;スタンドon
[Statedef 10900]
anim = 10900
velset = 0,0
ctrl = 1

[State 10001];煙
type = Explod
trigger1 = time = 0
anim = 8010
ID = 8010
pos = -20, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 1, 1
sprpriority = 3
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

[State 10000,4]
type = playsnd
trigger1 = !time
value = 0,14

[State 10000,4]
type = playsnd
trigger1 = !time
value = 100,15
channel = 0

[State 10000,4]
type = ChangeState
trigger1 = animtime = 0
value = 0

[State 0, var]
type = varset
trigger1 = !time
var(48) = 40

[state 1001,0]
type = VarSet
trigger1 = time = 0
var(0) = 10000

[State 0, end]
type = changestate
trigger1 = command = "z" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10225

[State 0, end]
type = changestate
trigger1 = command = "y" && command = "holdfwd" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10415

[State 0, end]
type = changestate
trigger1 = command = "z" && command = "holdfwd" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10425

[State 0, end]
type = changestate
trigger1 = (command = "x" || command = "b") && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10200

[State 0, end]
type = changestate
trigger1 = command = "y" && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10210

[State 0, end]
type = changestate
trigger1 = command = "z" && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10220

[State 0, end]
type = changestate
trigger1 = (command = "x" || command = "b") && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10400

[State 0, end]
type = changestate
trigger1 = command = "y" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10410

[State 0, end]
type = changestate
trigger1 = command = "z" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10420

;---------------------------------------------------------------------------
;スタンド発現(Air)
[Statedef 10910]
type = A
movetype = I
physics = N
anim = 10910
ctrl = 0

[State 10000,4]
type = playsnd
trigger1 = !time
value = 100,15
channel = 0

[State 195]
type = playsnd
trigger1 = !time
value = 0,14

[State 0, var]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, var]
type = varset
trigger1 = !time
var(48) = 40

[State 0, end]
type = changestate
trigger1 = command = "x"
trigger1 = statetype = A
trigger1 = !time
value = 10600

[State 0, end]
type = changestate
trigger1 = command = "y"
trigger1 = statetype = A
trigger1 = !time
value = 10610

[State 0, end]
type = changestate
trigger1 = command = "z"
trigger1 = statetype = A
trigger1 = !time
value = 10620

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ガードキャンセル
[Statedef 700]
type = S
movetype = A
physics = N
ctrl = 0
anim = 700
poweradd = ifelse(((helper(20032*(numhelper(20032)>0)),var(10)) = 0),110,-1000)
sprpriority = 0
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])

[State 0, pal]
type = palfx
trigger1 = time < 10
trigger1 = time%2
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = time <= 9
trigger2 = ((helper(20032*(numhelper(20032)>0)),var(10)) = 1)
trigger2 = animelemtime(10) < 0
value = SCA

[State 0, hit]
type = pause
triggerall = ((helper(20032*(numhelper(20032)>0)),var(10)) = 1)
trigger1 = time = 1
time = 20

[State 0, hit]
type = playsnd
triggerall = ((helper(20032*(numhelper(20032)>0)),var(10)) = 1)
trigger1 = time = 1
value = 700,100

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, width]
type = width
trigger1 = animelemtime(5) >= 0 && animelemtime(10) < 0 && var(2) != 2
value = 45,0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,20
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelemtime(5) = 0
value = 2,2

[State 0, explod]
type = explod
trigger1 = anim = 700
trigger1 = animelemtime(3) = 2
anim = 710
id = 710
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
;bindtime = -1
vel = 2;*const(size.xscale),0
removeongethit = 1
scale = .833,1.07

[State 0, attack]
Type = attackdist
trigger1 = !time
value = 220

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = S, SP
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),ceil(ifelse((56*fvar(0)*.25)<7,7,(56*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,11
sparkno = s6004
sparkxy = -10,-70
guard.sparkno = s6010
hitsound = s0,4
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -6,-6
guard.velocity = -8
air.type = Low
air.velocity = -6,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
guard.kill = 0
fall = 1
air.fall = 1
yaccel = .36
id = stateno
p2facing = 1
kill = ((helper(20032*(numhelper(20032)>0)),var(10)) = 0)

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタンド出現攻撃
[Statedef 10950]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 40
sprpriority = 0
anim = 11200
facep2 = 1;-(prevstateno=[100,119])

;策士バグフラグ
[State 0, pos]
type = varset
trigger1 = !time
var(13) = 1

[State 0, width]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, explod]
type = explod
trigger1 = animelemtime(13) = 0
anim = 8031
id = 8031
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = animelemtime(3) = 0
value = 2,1
channel = 1

[State 0, width]
type = width
trigger1 = animelemtime(13) = 0
value = 30,0

[State 0, explod]
type = explod
trigger1 = animelemtime(3) = 0 && facing = 1
anim = 815
id = 815
facing = 1
postype = p1
pos = -13,13
sprpriority = 1
ownpal = 1
bindtime = -1
scale = .833,1.07

[State 0, explod]
type = explod
trigger1 = animelemtime(3) = 0 && facing = -1
anim = 816
id = 816
facing = 1
postype = p1
pos = 13,13
sprpriority = 1
ownpal = 1
bindtime = -1
scale = .833,1.07

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, pos]
type = velset
trigger1 = animelemtime(13) = 0
x = 4.5
persistent = 0
[State 0, pos]
type = velset
trigger1 = animelemtime(16) = 0
x = 0
persistent = 0

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelemtime(13) = 0
value = 2,5

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = var(10) <= 2
trigger1 = animelem = 13
trigger2 = animelem = 14
attr = S, SA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,0
sparkno = s6004
sparkxy = -20,-70
guard.sparkno = s6010
hitsound = s0,4
guardsound = s0,9
getpower = 60,0
givepower = 20,0
ground.type = high
ground.slidetime = 25
ground.hittime = 25
ground.velocity = -6
guard.velocity = -5.5
air.type = high
air.velocity = -7,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 25
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = var(10) >= 2
trigger1 = animelem = 15
attr = S, SA
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),ceil(ifelse((56*fvar(0)*.25)<7,7,(56*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = low
fall.animtype = low
pausetime = 0,0
sparkno = s6004
sparkxy = -20,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = low
ground.slidetime = 25
ground.hittime = 25
ground.velocity = -10
guard.velocity = -8
air.type = low
air.velocity = -7,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 25
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, end]
type = varset
trigger1 = !time
var(10) = 0
[State 0, end]
type = varadd
trigger1 = movecontact = 1
var(10) = 1
;ignorehitpause=1

[State 220, CornerPush]
type = VarSet
trigger1 = var(10) <= 2
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = var(10) >= 2
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 1070, 5]
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;スタンド解除（地上）
[Statedef 900]
type = S
movetype = I
physics = S
anim = 900
ctrl = 0
sprpriority = 0
velset = 0,0

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 0, end]
type = ctrlset
trigger1 = time = 20
value = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタンド解除（Air）
[Statedef 910]
type = A
movetype = I
physics = N
ctrl = 0
sprpriority = 0

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 50, 3]
type = ChangeAnim
trigger1 = !time
trigger1 = SelfAnimExist(anim - 10000)
persistent = 0
value = Anim - 10000

[State 50, 3]
type = ChangeAnim
triggerall = anim = [41,43]
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
;アドバンシングガード
[Statedef 710]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6020
id = 6020
pos = ceil(28*const(size.xscale)),ifelse(statetype=C&&!var(0),ceil(-45*const(size.xscale)),ceil(-90*const(size.xscale)))
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "AVG"
stateno = 715
id = 715
pos = -10,0
postype = p1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.ground.back = 20
size.ground.front = 20
size.height = 240

[State 810, 1]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8030
id = 8030
pos = 0,0
postype = p2
ownpal = 1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 0,20

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,12
channel = 0

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150+var(0)

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151+var(0)


[State 0, state]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, nhb]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 0, end]
type = changestate
trigger1 = time = 1
value = 151+(command = "holddown")*2

;---------------------------------------------------------------------------
;アドバンシングガード2
[Statedef 711]
type = U
movetype = I
physics = N

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150+var(0)

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151+var(0)

[State 0, state]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, end]
type = changestate
trigger1 = numhelper(715)
trigger1 = command = "holdback"
value = 151+(command = "holddown")*2

[State 0, end]
type = changestate
trigger1 = !numhelper(715)
value = 130+(command = "holddown")
ctrl = 1

;---------------------------------------------------------------------------
;アドバンシングガード(ヘルパー)
[Statedef 715]
type = S
movetype = I
physics = N
anim = 715
velset = 0,0

[State 0, push]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = !time
x = 20

[State 0, vel]
type = veladd
trigger1 = time > 0
x = -1

[State 0, end]
type = DestroySelf
trigger1 = time = 15

;===========================================================================
;スパコン背景
[Statedef 7000]
ctrl = 0
anim = 9999

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = time <= 29
flag = NoFG
flag2 = NoBG

[State 0, explod]
type = explod
trigger1 = !time
anim = 7300
id = 7300
pos = 0,0
postype = back
removetime = 30
scale = .84,1.08
sprpriority = -20
pausemovetime = 30
supermovetime = 30

;cut in
[State 0, explod]
type = explod
trigger1 = time = 7
anim = 7000
id = 7000
pos = -20,170
postype = back
removetime = 23
sprpriority = -10
pausemovetime = 23
supermovetime = 23

[State 8000, ModifyExplod-3]
type = ModifyExplod
trigger1 = Numexplod(7000)
Id = 7000
postype = back
pos = ceil(-20+((random%16)*ifelse((time%6=[1,3]),-1,1))),ceil(170+((random%16)*ifelse((time%6=[1,3]),-1,1)))
scale = ifelse(time>=22,2,.2+((time-6)*.125))*.833,ifelse(time>=22,2,.2+((time-6)*.125))*1.07

[State 0, end]
type = DestroySelf
trigger1 = time = 31

;===========================================================================
;オラムダ背景（cut）
[Statedef 4950]
ctrl = 0
anim = 9999

;back
[State 0, assert]
type = assertspecial
trigger1 = time <= 32
flag = NoBG
flag2 = NoFG

;cut in
[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7001
id = 7001
pos = -200,100
postype = back
removetime = -1
scale = .84,1.08
sprpriority = -10
pausemovetime = 120
supermovetime = 120

;cut in
[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7002
id = 7001
pos = -200,100
postype = back
removetime = -1
scale = .84,1.08
sprpriority = -10
pausemovetime = 120
supermovetime = 120

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(7001)
trigger1 = time <= 20
id = 7001
pos = ceil(-200+(time*10)),110
postype = back

[State 0, explod]
type = removeexplod
trigger1 = root,stateno != 4900
id = 7001

[State 0, end]
type = DestroySelf
trigger1 = root,stateno != 4900

;---------------------------------------------------------------------------
; アドバンシングガード(煙)
[Statedef 8030]
type = S
movetype = I
physics = N
velset = 0,0
anim = 8030
sprpriority = 4

[State 0, pos]
type = posset
trigger1 = 1
x = enemynear,pos x
y = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, end]
type = DestroySelf
trigger1 = !animtime
;===========================================================================
;メッセージアイコン
[Statedef 7500]
ctrl = 0
anim = 9999

[State 0, var];STAND ON
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
trigger4 = root,stateno = 1110
var(0) = 1
ignorehitpause = 1

[State 0, var];DANGER!
type = varset
trigger1 = root,var(0)
trigger1 = root,fvar(2) <= 20
;trigger1 = root,var(23) != 2 && !root,var(23);デム
var(0) = 2
ignorehitpause = 1

[State 0, var];STAND CRASH!
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = roundstate = 2
trigger1 = time > 1
trigger1 = var(0)
value = 7500+var(0)

;---------------------------------------------------------------------------
;STAND ON
[Statedef 7501]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7500
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7505
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = (!root,var(0)) || (root,stateno = 1110&&time=1)
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
;trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 1
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;DANGER!
[Statedef 7502]
ctrl = 0
anim = 9999

[State 0, explod];消す
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod];DANGER
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7501
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7506
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod];移動
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod];ちょっと戻る
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod];移動
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod];ちょっと戻る
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,fvar(2) > 20
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
trigger4 = root,stateno = 1110
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 2
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;STAND CRUSH
[Statedef 7503]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7502
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7507
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 4000
trigger1 = root,stateno != 4100
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
trigger4 = root,stateno = 1110
var(0) = 1
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 3
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;FIRST ATTACK
[Statedef 7504]
ctrl = 0
anim = 9999

[State 0, var]
type = varset
trigger1 = !time
var(8) = 2
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7503
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7508
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 10
trigger1 = root,stateno = 3201
var(0) = 6
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;------------------------------------------------------------------------------
;GUARD CANCEL
[Statedef 7505]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7504
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7509
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 700
trigger1 = root,stateno != 10700
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
trigger4 = root,stateno = 1110
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 5
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;===========================================================================
;勝利時画面移動停止
[Statedef 6000]
ctrl = 0
anim = 9999

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = roundstate != [3,4]
trigger1 = root,movetype = H
;===========================================================================
;オラムダ時画面移動停止
[Statedef 6001]
ctrl = 0
anim = 9999

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = root,stateno != 4900

;===========================================================================
;勝利アイコン
[Statedef 9100]
ctrl = 0
anim = 9999

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "config"
stateno = 9105
id = 9105
pausemovetime = 999999
supermovetime = 999999

;「WIN」
[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 1
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9102
pos = -285,80
postype = left
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time <= 20
id = 9102
pos = ceil(-285+(time*15)),80
postype = left

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time >= 81
id = 9102
pos = ceil(15-((time-80)*15)),80
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 2
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9103
pos = 130,80
postype = right
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time <= 20
id = 9103
pos = ceil(130-(time*15)),80
postype = right

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time >= 81
id = 9103
pos = ceil(-170+((time-80)*15)),80
postype = right

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 0,28

;「To Be Continued...」
[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 1
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(12)
trigger2 = root,fvar(12)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9100
id = 9100
pos = 412,210
postype = left
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9100)
trigger1 = time <= 40
id = 9100
pos = ceil(412-((time-20)*20)),210
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 2
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(12)
trigger2 = root,fvar(12)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9101
id = 9101
pos = -412,210
postype = right
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9101)
trigger1 = time <= 40
id = 9101
pos = ceil(-412+((time-20)*20)),210
postype = right
;===========================================================================
;敗北演出
[Statedef 9200]
ctrl = 0
anim = 9999

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
removetime = 60
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8200
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8205
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8201
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8206
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8202
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8207
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8203
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8208
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北演出2(蜂の巣)
[Statedef 9201]
ctrl = 0
anim = 9999

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
fvar(2) = 0
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time > 6
fvar(2) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = 0;-1
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;穴
[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9110
pos = 16,17
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9111
pos = 24,117
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110
id = 9112
pos = 9,212
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9113
pos = 40,18
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9114
pos = 43,115
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9115
pos = 22,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9116
pos = 92,4
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9117
pos = 89,127
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9118
pos = 36,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9111
id = 9119
pos = 119,38
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110
id = 9120
pos = 124,100
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 12
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110+var(10)
id = 9121
pos = 88,188
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9111
id = 9122
pos = 133,112
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9110
id = 9123
pos = 131,190
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9124
pos = 177,68
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9125
pos = 157,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 22
anim = 9110
id = 9126
pos = 166,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -14
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 9110
id = 9127
pos = 187,28
postype = back
bindtime = -1
ownpal = 0
sprpriority = -13
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9110)
id = 9110
pos = ceil(16-fvar(2)),17
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9111)
id = 9111
pos = ceil(24-fvar(2)),117
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9112)
id = 9112
pos = ceil(9-fvar(2)),212
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9113)
id = 9113
pos = ceil(40-fvar(2)),18
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9114)
id = 9114
pos = ceil(43-fvar(2)),115
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9115)
id = 9115
pos = ceil(22-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9116)
id = 9116
pos = ceil(92-fvar(2)),4
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9117)
id = 9117
pos = ceil(89-fvar(2)),127
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9118)
id = 9118
pos = ceil(36-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9119)
id = 9119
pos = ceil(119-fvar(2)),38
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9120)
id = 9120
pos = ceil(124-fvar(2)),100
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9121)
id = 9121
pos = ceil(81-fvar(2)),188
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9122)
id = 9122
pos = ceil(133-fvar(2)),112
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9123)
id = 9123
pos = ceil(131-fvar(2)),190
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9124)
id = 9124
pos = ceil(177-fvar(2)),68
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9125)
id = 9125
pos = ceil(166-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9126)
id = 9126
pos = ceil(157-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9127)
id = 9127
pos = ceil(187-fvar(2)),28
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9110

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9111

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9112

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9113

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9114

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9115

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9116

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9117

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9118

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9119

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9120

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9121

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9122

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9123

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9124

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9125

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9126

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9127

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北演出3(血)
[Statedef 9202]
ctrl = 0
anim = 9999

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(2) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time >= 6
fvar(2) = fvar(0)
ignorehitpause = 1


;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;血
[State 0, explod]
type = explod
trigger1 = time = 3
anim = 9150+random%3
id = 9150
pos = 42,9
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 4
anim = 9150+random%3
id = 9151
pos = 18,122
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 5
anim = 9150+random%3
id = 9152
pos = 24,196
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9150+random%3
id = 9153
pos = 180,55
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 7
anim = 9150+random%3
id = 9154
pos = 30,103
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9150+random%3
id = 9155
pos = 68,172
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9150+random%3
id = 9156
pos = 206,44
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 10
anim = 9150+random%3
id = 9157
pos = 49,106
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 11
anim = 9150+random%3
id = 9158
pos = 156,230
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9150+random%3
id = 9159
pos = 130,138
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 13
anim = 9150+random%3
id = 9160
pos = 191,227
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 9150+random%3
id = 9161
pos = 128,115
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9150)
id = 9150
pos = ceil(42-fvar(2)),9
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9151)
id = 9151
pos = ceil(18-fvar(2)),122
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9152)
id = 9152
pos = ceil(24-fvar(2)),196
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9153)
id = 9153
pos = ceil(180-fvar(2)),55
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9154)
id = 9154
pos = ceil(30-fvar(2)),103
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9155)
id = 9155
pos = ceil(68-fvar(2)),172
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9156)
id = 9156
pos = ceil(206-fvar(2)),44
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9157)
id = 9157
pos = ceil(49-fvar(2)),106
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9158)
id = 9158
pos = ceil(156-fvar(2)),230
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9159)
id = 9159
pos = ceil(166-fvar(2)),138
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9160)
id = 9160
pos = ceil(191-fvar(2)),227
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9161)
id = 9161
pos = ceil(128-fvar(2)),115
postype = back
ignorehitpause = 1



[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9150

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9151

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9152

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9153

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9154

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9155

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9156

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9157

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9158

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9159

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9160

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9161

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北時演出（横切断）
[Statedef 9203]
ctrl = 0
anim = 9999
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = .86*root,const(size.yscale)
;fvar(36) = -.55*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;---------------------------------------------------------------------------
;敗北時演出（縦切断）
[Statedef 9204]
ctrl = 0
anim = 9999
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -1.88*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 1.88*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = 3*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;---------------------------------------------------------------------------
;スタンドゲージ
[Statedef 20032]
ctrl = 0
anim = 9999
ownpal = 1

;config呼び出し
[State 6000, Helper]
type = Helper
trigger1 = time = 1
id = 7525
name = "config"
pos = -300,0
postype = Left
stateno = 7525
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 6000, Explod];ゲージ
type = Explod
trigger1 = !NumExplod(16001)
trigger1 = time >= 2
trigger1 = teamside = 1
anim = 16001
id = 16001
postype = L
pos = 140+var(4),48+var(5)
ownpal = 0
bindtime = -1
ignorehitpause = 1
sprpriority = -102
pausemovetime = -1
supermovetime = -1
facing = 1

[State 6000, Explod];ゲージ
type = Explod
trigger1 = !NumExplod(16001)
trigger1 = time >= 2
trigger1 = teamside = 2
anim = 16051
id = 16001
postype = R
pos = -140+var(4),48+var(5)
ownpal = 0
bindtime = -1
ignorehitpause = 1
sprpriority = -102
pausemovetime = -1
supermovetime = -1
facing = 1

[State 6000, Explod];枠
type = Explod
trigger1 = !NumExplod(16000)
trigger1 = time >= 2
anim = ifelse(teamside=1,16000,16050)
id = 16000
postype = Back
pos = 140+var(4),48+var(5)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -101
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 6000, Explod];STAND
type = Explod
trigger1 = root,var(0)
trigger1 = !NumExplod(16004)
trigger1 = time >= 2
anim = 16002
id = 16004
postype = Back
pos = ifelse(teamside=1,102,137)+var(4),51+var(5)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -100
facing = ifelse(teamside=1,1,-1)
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 6000, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(16001)
Id = 16001
scale = ifelse(root,fvar(2)>=80,80.5,root,fvar(2)),1
ignorehitpause = 1

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 16000

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 16001

[state 0, var]
type = varadd
trigger1 = var(1)
var(1) = -1

[state 0, var]
type = varset
trigger1 = fvar(0) - root,fvar(2) > 0
var(1) = 8

[state 0, var]
type = varset
trigger1 = 1
fvar(0) = root,fvar(2)

[State 0, pal]
type = palfx
trigger1 = root,var(31) != 1 || (root,var(31) = 1 && !(time%4))
trigger1 = var(1) = 8 || var(1) = 4
trigger2 = root,fvar(2) <= 20
trigger2 = !var(1) && time%4=0
time = 2
add = 128,-256,-256

[State -3];スタンドの文字を消す
type = removeexplod
trigger1 = parent,var(0) = 0
trigger2 = win
trigger3 = lose
id = 16004

[State -2, クリップボード]
type     = DisplayToClipBoard
trigger1 = 1
text     = "var(0)=%d,var(1)=%d"
params   = var(0),var(1)
IgnoreHitPause = 1

;×
[State 0, explod]
type = explod
trigger1 = root,var(50)
trigger1 = !numexplod(16003)
trigger1 = time > 0
anim = 16003
id = 16003
pos = ifelse(teamside=1,125,235)+var(4),44+var(5)
postype = left
bindtime = -1
scale = .5,.5
sprpriority = -100
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = !root,var(50)
trigger1 = numexplod(16003)
trigger2 = win
trigger3 = lose
id = 16003

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;アドガ用
[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(16) = 0

[State 8500, 1]
type = varset
trigger1 = parent,stateno = 150
trigger2 = parent,stateno = 152
var(16) = parent,GetHitVar(ctrltime)

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(15) = 0

[State 8500, 1]
type = varadd
trigger1 = parent,stateno = 153
var(15) = 1

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(14) = 0

[State 8500, 1]
type = varadd
trigger1 = parent,stateno = 151
var(14) = 1

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(13) = 0

[State 8500, 1]
type = varset
trigger1 = parent,stateno = 150
trigger2 = parent,stateno = 152
var(13) = parent,GetHitVar(hittime)

;---------------------------------------------------------------------------
;敵横吹っ飛び（生存時）
[Statedef 1281]
type = A
movetype = H
physics = N
anim = 5030
velset = -10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .22

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
value = 1282

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び（壁激突）
[Statedef 1282]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 821, 2] 
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 6
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 6
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 6
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 6

[State 0, vel]
type = veladd
trigger1 = time > 6
y = .32

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵吹っ飛び（死亡時）
[Statedef 1290]
type = A
movetype = H
physics = N
anim = 5030
velset = -8,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030
trigger1 = !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●

;---------------------------------------------------------------------------
;敵横吹っ飛び2（生存時）
[Statedef 1283]
type = A
movetype = H
physics = N
anim = 5030
velset = 10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .22

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 1284

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び2（壁激突）
[Statedef 1284]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 821, 2] 
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 6
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 6
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 6
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 6

[State 0, vel]
type = veladd
trigger1 = time > 6
y = .32

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵吹っ飛び2（死亡時）
[Statedef 1293]
type = A
movetype = H
physics = N
anim = 5030
velset = 8,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030
trigger1 = !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100
;===========================================================================
;STAND_CRASH
[Statedef 4000]
type = U
movetype = H
physics = N
velset = 0,0

[State 0, pos]
type = null;posadd
trigger1 = !time
x = -15

[State 0, var]
type = varadd
trigger1 = !time
var(52) = 27
ignorehitpause = 1

[State 0, pause]
type = pause
trigger1 = time = 1;!time
time = 6
movetime = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,22

[State 0, explod]
type = explod
trigger1 = !time
anim = 7600
id = 7600
pos = 160,120
postype = left
bindtime = -1
removetime = 8
scale = .833,1.08
sprpriority = -20
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = numexplod(7600)
flag = NoFG
flag2 = NoBG

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),4000,4010)

[State 0, anim]
type = changeanim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 4030

[State 0, anim]
type = changeanim
triggerall = anim = 4030
trigger1 = !animtime
value = anim
elem = 3

[State 0, state]
type = statetypeset
trigger1 = !time
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, end]
type = changestate
triggerall = time > 1
triggerall = statetype != A
trigger1 = !var(52)
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 4001

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
value = 4030

;---------------------------------------------------------------------------
;HITG_SLIDE
[Statedef 4001]
type = S
movetype = H
physics = S

[State 0, vel]
type = velset
trigger1 = !var(52)
x = -8
persistent = 0

[State 0, anim]
type = changeanim
triggerall = prevstateno = 4000
trigger1 = !var(52)
value = 5006 + (GetHitVar(groundtype)=2)*10

[State 0, anim]
type = changeanim
triggerall = prevstateno = 4100
trigger1 = var(52)
value = 4101

[State 0, vel]
type = velmul
trigger1 = !var(52)
x = .9

[State 0, vel]
type = velset
trigger1 = !var(53)
x = 0

[State 0, defence]
type = defencemulset
trigger1 = !var(53)
value = 1

[State 0, explod]
type = explod
trigger1 = !var(52)
anim = 8030
id = 8030
pos = 0,0
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, end]
type = changestate
trigger1 = !var(53)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;HITA_UP (initial going up)
[Statedef 4030]
type = A
movetype = H
physics = N
ctrl = 0

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, hitvel]
type = hitvelset
trigger1 = prevstateno = 4000
trigger1 = !time
x = 1
y = 1

[State 0, vel]
type = velmul
trigger1 = prevstateno = 4000
trigger1 = !time
y = 1.1

[State 0, vel]
type = velset
trigger1 = prevstateno = 4100
trigger1 = !time
x = -2.5
y = -2.5

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = !var(53)
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 5040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = !var(53)
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 5050

[State 0, end]
type = changestate
trigger1 = !animtime
value = 4035

;---------------------------------------------------------------------------
;HITA_UP_T (transition)
[Statedef 4035]
type = A
movetype = H
physics = N

[State 0, anim]
type = null;changeanim
trigger1 = !time
trigger1 = SelfAnimExist(5035)
trigger1 = anim != [5051,5059]
trigger1 = anim != 5090
value = 5035

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = !var(53)
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 5040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = !var(53)
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 5050

;---------------------------------------------------------------------------
;HITG_SHAKE
[Statedef 4100]
type = S
movetype = H
physics = N
velset = 0,0

[State 0, pos]
type = null;posadd
trigger1 = !time
x = -15

[State 0, var]
type = varadd
trigger1 = !time
var(52) = 27
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = !time
var(53) = 50
ignorehitpause = 1

[State 0, pause]
type = pause
trigger1 = time = 1;!time
time = 6
movetime = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,22

[State 0, explod];石仮面
type = explod
trigger1 = !time
anim = 7600
id = 7600
pos = 160,120
postype = left
bindtime = -1
removetime = 8
scale = .833,1.08
sprpriority = -30
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = numexplod(7600)
flag = NoFG
flag2 = NoBG

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = statetype != A
value = 4100

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = statetype = A
value = 4030

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim

[State 0, state] ;State type gets set to aerial if getting hit up
type = statetypeset
trigger1 = !time
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 4001

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
value = 4030

;---------------------------------------------------------------------------
;青波紋強吹っ飛び
[statedef 1001]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim]
type = ChangeAnim
trigger1 = !time
trigger1 = SelfAnimExist(5900)
value = 5900

[State 1025, Anim]
type = ChangeAnim
trigger1 = anim != 5900
value = anim

[State 210, 3]
type = ScreenBound
trigger1 = 1
value = 1

[State 1026, Velocity]
type = VelSet
trigger1 = Time = 11
x = -10
y = -3.5

[State 1026, Gravity]
type = VelAdd
trigger1 = Time > 11
y = .45

[State 1026, Hit wall]
type = ChangeState
trigger1 = Time > 11
trigger1 = BackEdgeBodyDist <= 20
value = 1002

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y > 10)
value = 5100
;---------------------------------------------------------------------------
;山吹色強吹っ飛び
[statedef 1201]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim]
type = ChangeAnim
trigger1 = 1
value = 5030

[State 1025, Anim]
type = ChangeAnim
trigger1 = anim != 5030
value = anim

[State 210, 3]
type = ScreenBound
trigger1 = 1
value = 1

[State 1026, Velocity]
type = VelSet
trigger1 = time = 16
x = -10
y = -6

[State 1026, Gravity]
type = VelAdd
trigger1 = time >= 16
y = .2

[State 1026, Hit wall]
type = ChangeState
trigger1 = time >= 16
trigger1 = BackEdgeBodyDist <= 20
value = 1002

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y > 10)
value = 5100
;---------------------------------------------------------------------------
;壁激突
[Statedef 1002]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2600, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 2600, ChangeAnim]
type = ChangeAnim
trigger1 = Time < 10
value = anim

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 10
trigger1 = SelfAnimExist(5051)
value = 5051

[State 2601, ChangeAnim] ;Change anim when done with transition
type = ChangeAnim
trigger1 = time = 10
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = time >= 10
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 210, 3]
type = ScreenBound
trigger1 = 1
value = 1

[State 2601, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20

[State 2601, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 1027, Turn]
type = Turn
trigger1 = Time = 9

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 10
x = 15

[State 1026, Velocity]
type = VelSet
trigger1 = Time = 10
x = -3
y = -2.5

[State 1026, Gravity]
type = VelAdd
trigger1 = time >= 10
y = .45

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3
ownpal = 1

[State 5050, 4]
type = selfState
triggerall = Pos Y >= -20
triggerall = alive
triggerall = time >= 10
triggerall = prevstateno != [3021,3121]
trigger1 = Command = "recovery"
value = 5200

[State 5050, 5]
type = selfState
triggerall = alive
triggerall = time >= 10
triggerall = prevstateno != [3021,3121]
trigger1 = Command = "recovery"
value = 5210

[State 1028, Hit ground]
type = SelfState
trigger1 = Time > 10
trigger1 = (Vel y > 0) && (Pos y > 10)
value = 5110

;---------------------------------------------------------------------------
;策士ヘルパー
[Statedef 11101]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 191, Wood 1]
type = helper
trigger1 = time %3 = 0
name = "hamon"
helpertype = normal
stateno = 11102
id = 11102
postype = p1
pos = 0,0
keyctrl = 0

[State 1070, 5]
type = destroyself
trigger1 = parent,stateno = 1110
trigger1 = parent,animelem = 14
trigger2 = parent,movetype = H
trigger3 = parent,stateno = 11105
trigger4 = parent,stateno = 11000
trigger5 = parent,stateno = 3921
trigger6 = parent,stateno = 4900 && parent,time = 1
trigger7 = parent,stateno = 4910
trigger8 = parent,stateno = 4920
trigger9 = parent,stateno = 0

;---------------------------------------------------------------------------
; 策士ヘルパー2
[Statedef 11102]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6331
id = 11102
pos = 0,0
postype = p1
sprpriority = 4
bindtime = -1
removetime = 9
removeongethit = 1
random = 60,60
scale = 1.3*const(size.xscale),1.3*const(size.yscale)
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 11102
scale = 1.3*const(size.xscale)-Var(13)/14.0 , 1.3*const(size.yscale)-Var(13)/14.0

[State 1070, 5]
type = removeexplod
trigger1 = parent,movetype = H
id = 11102

[State 1070, 5]
type = destroyself
trigger1 = time = 9

;===========================================================================
;ガークラ時スタンド消去
[Statedef 9600]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9600
velset = 0,0
sprpriority = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, annim]
type = null;changeanim
trigger1 = root,stateno = 4100
value = 9600
elem = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 10000

;===========================================================================
;スタンド待機(off)
[Statedef 10000]
type = U
movetype = I
physics = N
anim = 9999
ctrl = 0
velset = 0,0
sprpriority = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 2600, ChangeState]
type = changeanim
trigger1 = (parent,var(6)&128)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, anim]
type = changeanim
triggerall = root,animelemtime(2) < 0
trigger1 = root,anim = 152 && anim != 157
value = 157
[State 0, anim]
type = changeanim
triggerall = root,animelemtime(2) = 0
trigger1 = root,anim = 152 && anim != 158
value = 158

[State 0, anim]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1200
trigger2 = root,stateno = 1300
value = root,stateno+50

[State 0, anim]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 3100
value = root,stateno+15

[State 0, anim]
type = changeanim
trigger1 = (anim = 157 || anim = 158) && root,anim != 152
value = 9999

[State 0, anim]
type = changestate
trigger1 = root,var(0)
value = 10001

;===========================================================================
;スタンド待機(on)
[Statedef 10001]
type = U
movetype = I
physics = N
anim = 9999
ctrl = 0
velset = 0,0
sprpriority = 1

[State 0, btr]
type = nothitby
trigger1 = 1
value = SCA

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 2600, ChangeState]
type = changeanim
trigger1 = (parent,var(6)&128)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, anim]
type = changeanim
triggerall = root,movetype != A
triggerall = root,time
triggerall = anim != root,anim+10000
triggerall = SelfAnimExist(root,anim+10000)
triggerall = root,anim >= 10000
trigger1 = root,anim = 10005
trigger2 = root,stateno = 0
trigger3 = root,stateno = [10,159]
trigger4 = root,stateno = 10900 && root,animelemtime(7) = 0
trigger5 = root,stateno = 10910
trigger6 = root,stateno = [5000,5999]
trigger7 = root,stateno = 10195
trigger8 = root,stateno = 3501
trigger9 = root,stateno = 350
value = root,anim+10000

[State 0, anim]
type = changeanim
triggerall = root,movetype != A
triggerall = root,time
triggerall = anim != root,anim+20000
triggerall = SelfAnimExist(root,anim+20000)
triggerall = root,anim <= 10000
trigger1 = root,stateno = [5000,5999]
value = root,anim+20000

;攻撃
[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 10200
trigger2 = root,stateno = 10210
trigger3 = root,stateno = 10212
trigger4 = root,stateno = 10220
trigger5 = root,stateno = 10225
trigger6 = root,stateno = 10400 || root,stateno = 10402
trigger7 = root,stateno = 10410
trigger8 = root,stateno = 10415
trigger9 = root,stateno = 10420
trigger10 = root,stateno = 10425
trigger11 = root,stateno = 10300
trigger12 = root,stateno = 10310
trigger13 = root,stateno = 10320
trigger14 = root,stateno = 10325
trigger15 = root,stateno = 10500
trigger16 = root,stateno = 10510
trigger17 = root,stateno = 10515
trigger18 = root,stateno = 10520
trigger19 = root,stateno = 10526
trigger20 = root,stateno = 10600
trigger21 = root,stateno = 10610
trigger22 = root,stateno = 10620
trigger23 = root,stateno = 10700
trigger24 = root,stateno = 10950
trigger25 = root,stateno = 810
trigger26 = root,stateno = 830
trigger27 = root,stateno = 11000
trigger28 = root,stateno = [11010,11013]
trigger29 = root,stateno = 11060
trigger30 = root,stateno = [11030,11033]
trigger31 = root,stateno = 11200
value = root,anim+10000

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = anim != root,anim+20000
trigger1 = root,anim = 10200 && root,animelemtime(4) = 0
trigger2 = root,anim = 10201 && root,animelemtime(5) = 0
trigger3 = root,anim = 10210 && root,animelemtime(7) = 0
trigger4 = root,anim = 10211 && root,animelemtime(7) = 0
trigger5 = root,anim = 10212 && root,animelemtime(5) = 0
trigger6 = root,anim = 10220 && root,animelemtime(6) = 0
trigger7 = root,anim = 10225 && root,animelemtime(7) = 0
trigger8 = root,anim = 10400 && root,animelemtime(4) = 0
trigger9 = root,anim = 10401 && root,animelemtime(4) = 0
trigger10 = root,anim = 10410 && root,animelemtime(4) = 0
trigger11 = root,anim = 10411 && root,animelemtime(4) = 0
trigger12 = root,anim = 10415 && root,animelemtime(4) = 0
trigger13 = root,anim = 10420 && root,animelemtime(6) = 0
trigger14 = root,anim = 10425 && root,animelemtime(10) = 0
trigger15 = root,anim = 10426 && root,animelemtime(10) = 0
trigger16 = root,anim = 10300 && root,animelemtime(4) = 0
trigger17 = root,anim = 10310 && root,animelemtime(7) = 0
trigger18 = root,anim = 10320 && root,animelemtime(6) = 0
trigger19 = root,anim = 10510 && root,animelemtime(5) = 0
trigger20 = root,anim = 10515 && root,animelemtime(4) = 0
trigger21 = root,anim = 10520 && root,animelemtime(6) = 0
trigger22 = root,anim = 10526 && root,animelemtime(16) = 0
trigger23 = root,anim = 10600 && root,animelemtime(5) = 0
trigger24 = root,anim = 10610 && root,animelemtime(7) = 0
trigger25 = root,anim = 10700 && root,animelemtime(12) = 0
trigger26 = root,anim = 11000 && root,animelemtime(15) = 0
trigger27 = root,anim = 11002 && root,animelemtime(15) = 0
trigger28 = root,anim = 11200 && root,animelemtime(16) = 0
trigger29 = root,anim = 11301 && root,animelemtime(10) = 0
value = root,anim+20000

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = anim != root,anim+30000
trigger1 = root,anim = 3600 && root,animelemtime(4) = 0
trigger2 = root,anim = 3601 && root,animelemtime(7) = 0
trigger3 = root,anim = 3604 && root,animelemtime(5) = 0
trigger4 = root,anim = 3602 && root,animelemtime(6) = 0
trigger5 = root,anim = 3603 && root,animelemtime(7) = 0
trigger6 = root,anim = 3700 && root,animelemtime(4) = 0
trigger7 = root,anim = 3701 && root,animelemtime(7) = 0
trigger8 = root,anim = 3702 && root,animelemtime(6) = 0
trigger9 = root,anim = 3800 && root,animelemtime(4) = 0
trigger10 = root,anim = 3801 && root,animelemtime(4) = 0
trigger11 = root,anim = 3802 && root,animelemtime(6) = 0
trigger12 = root,anim = 3803 && root,animelemtime(4) = 0
trigger13 = root,anim = 3804 && root,animelemtime(10) = 0
trigger14 = root,anim = 3901 && root,animelemtime(5) = 0
trigger15 = root,anim = 3902 && root,animelemtime(6) = 0
trigger16 = root,anim = 3903 && root,animelemtime(4) = 0
trigger17 = root,anim = 3904 && root,animelemtime(16) = 0
trigger18 = root,anim = 3910 && root,animelemtime(15) = 0
trigger19 = root,anim = 3912 && root,animelemtime(15) = 0
value = root,anim+30000

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = anim != 20226
trigger1 = root,anim = 10226
value = 20226

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = anim != 10811
trigger1 = root,stateno = 811 && root,time = 25
value = 10811

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = anim != root,anim+5
trigger1 = root,stateno = [11300,11310]
trigger2 = root,stateno = 3940
value = root,anim+5

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = anim != root,anim+10000
trigger1 = root,stateno = 11330
value = root,anim+10000

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = anim != root,anim+10000
trigger1 = root,stateno = 3000 && root,animelemtime(10) < 0
value = root,anim+10000

[State 0, anim]
type = changeanim
triggerall = root,movetype != H
triggerall = anim != root,anim+20000
triggerall = root,anim != 10226
trigger1 = root,anim = 13000 && root,animelemtime(10) = 0
trigger2 = root,anim = 3001 && root,animelemtime(2) = 0
trigger3 = root,stateno = 3011
trigger4 = root,stateno != [3920,3921]
trigger4 = (root,stateno = [3600,3930]) && anim != root,anim+30000
value = root,anim+20000

;ガード
[State 0, anim]
type = changeanim
triggerall = anim = 20152
triggerall = root,animelemtime(2) < 0
trigger1 = root,anim = 10152
trigger1 = animelem = 5
value = anim
elem = 1
[State 0, anim]
type = changeanim
triggerall = anim = 20152
triggerall = root,animelemtime(2) = 0
trigger1 = root,anim = 10152
value = anim
elem = 5

[State 0, anim]
type = changeanim
trigger1 = root,stateno = [11100,11101]
trigger2 = root,anim = 3001 && root,animelemtime(6) = 0
trigger3 = root,stateno = 3500
trigger4 = root,stateno = [180,185]
trigger5 = root,stateno = [3920,3921]
trigger6 = root,stateno = 4900 && root,time = 30
value = 9999

[State 0, spr]
type = sprpriority
trigger1 = ((root,stateno=[10,21])||((root,stateno=[100,105]))||(root,stateno=5040||root,stateno=5210&&root,animelemtime(2)>=0&&root,animelemtime(5)<0)||(root,stateno=10220&&root,animelemtime(6)>=0&&root,animelemtime(11)<0||root,stateno=10410))
trigger2 = (root,stateno=10415||root,stateno=10320&&root,animelemtime(6)>=0&&root,animelemtime(11)<0||root,stateno=10420&&root,animelemtime(3)<0||root,stateno=10510||root,stateno=10515||root,stateno=10520&&root,animelemtime(3)<0)
trigger3 = (root,stateno=350&&root,animelemtime(10)>=0||anim = 1316)
trigger4 = (root,stateno=3602&&root,animelemtime(6)>=0&&root,animelemtime(11)<0||root,stateno=3801)
trigger5 = (root,stateno=3803||root,stateno=3702&&root,animelemtime(6)>=0&&root,animelemtime(11)<0||root,stateno=3802&&root,animelemtime(3)<0||root,stateno=3901||root,stateno=3903||root,stateno=3902&&root,animelemtime(3)<0||root,anim=10100)
trigger6 = (root,stateno=5110||root,stateno=5120||root,stateno=5080||root,stateno=5081||root,stateno=5050&&root,anim=15090||root,stateno=3000&&root,animelemtime(8)<0)
value = -1

[State 0, spr]
type = sprpriority
trigger1 = !((root,stateno=[10,21])||((root,stateno=[100,105]))||(root,stateno=5040||root,stateno=5210&&root,animelemtime(2)>=0&&root,animelemtime(5)<0)||(root,stateno=10220&&root,animelemtime(6)>=0&&root,animelemtime(11)<0||root,stateno=10410))
trigger1 = !(root,stateno=10415||root,stateno=10320&&root,animelemtime(6)>=0&&root,animelemtime(11)<0||root,stateno=10420&&root,animelemtime(3)<0||root,stateno=10510||root,stateno=10515||root,stateno=10520&&root,animelemtime(3)<0)
trigger1 = !(root,stateno=350&&root,animelemtime(10)>=0||anim = 1316)
trigger1 = !(root,stateno=3602&&root,animelemtime(6)>=0&&root,animelemtime(11)<0||root,stateno=3801)
trigger1 = !(root,stateno=3803||root,stateno=3702&&root,animelemtime(6)>=0&&root,animelemtime(11)<0||root,stateno=3802&&root,animelemtime(3)<0||root,stateno=3901||root,stateno=3903||root,stateno=3902&&root,animelemtime(3)<0||root,anim=10100)
trigger1 = !(root,stateno=5110||root,stateno=5120||root,stateno=5080||root,stateno=5081||root,stateno=5050&&root,anim=15090||root,stateno=3000&&root,animelemtime(8)<0)
value = 2

[State 0, anim]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 3100
value = root,stateno+15

[State 0, end]
type = changestate
triggerall = root,time = 1
trigger1 = root,stateno = 4100
value = 9600

[State 0, anim]
type = changestate
trigger1 = !root,var(0) && !root,var(31)
value = 10000

;---------------------------------------------------------------------------
;師の教え（背景）
[Statedef 8750]
ctrl = 0
anim = 9999
type = A
movetype = I
physics = N

[State 5201, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = parent,stateno = 3010 && parent,animelemtime(17) < 0
flag = NoFG
flag2 = NoBG

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -106
ownpal = 0
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -106
ownpal = 0
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -106
ownpal = 0
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -106
ownpal = 0
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -106
ownpal = 0
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -106
ownpal = 0
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -106
ownpal = 0
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -106
ownpal = 0
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = ceil((-(time*8)%512)*root,fvar(11)),ceil(-8*root,fvar(11))
scale = root,fvar(11)+0.005,root,fvar(11)+0.005
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = ceil((-(time*12)%512)*root,fvar(11)),ceil(88*root,fvar(11))
scale = root,fvar(11)+0.005,root,fvar(11)+0.005
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = ceil((-(time*16)%512)*root,fvar(11)),ceil(152*root,fvar(11))
scale = root,fvar(11)+0.005,root,fvar(11)+0.005
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = ceil((-(time*20)%512)*root,fvar(11)),ceil(216*root,fvar(11))
scale = root,fvar(11)+0.005,root,fvar(11)+0.005
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = ceil((512-(time*8)%512)*root,fvar(11)),ceil(-8*root,fvar(11))
scale = root,fvar(11)+0.005,root,fvar(11)+0.005
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = ceil((512-(time*12)%512)*root,fvar(11)),ceil(88*root,fvar(11))
scale = root,fvar(11)+0.005,root,fvar(11)+0.005
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = ceil((512-(time*16)%512)*root,fvar(11)),ceil(152*root,fvar(11))
scale = root,fvar(11)+0.005,root,fvar(11)+0.005
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = ceil((512-(time*20)%512)*root,fvar(11)),ceil(216*root,fvar(11))
scale = root,fvar(11)+0.005,root,fvar(11)+0.005
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = parent,stateno = 3010 && parent,animelem = 24
trigger2 = root,var(44) = 40

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3140]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -130,-160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 4,5
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 30
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3141]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 130,-160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -4,5
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 30
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3142]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 220,-16
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -5,0.5
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 43
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3143]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -220,-5
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 5,0.1
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 43
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3144]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -220,25
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 7,-1
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 30
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3145]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -30,100
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 1,-5
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 21
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3146]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 130,160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -4,-5
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 30
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3147]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -130,-160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 8,9
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 17
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3148]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 130,-160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -8,9
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 17
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3149]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 220,-16
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -9,0.7
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 22
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3150]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -220,-5
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 9,0.2
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 21
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3151]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -220,25
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 11,-1.5
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 20
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3152]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -30,100
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 1.5,-9
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 11
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3153]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 130,160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -8,-9
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 16
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3154]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -130,-160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 12,13
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 12
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3155]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 130,-160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -12,13
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 12
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3156]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 220,-16
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -13,1
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 16
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3157]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -220,-5
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 13,0.5
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 16
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3158]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -220,25
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 15,-2
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 15
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3159]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -30,100
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 2.2,-13
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 8
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3160]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 130,160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -12,-13
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 9
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3161]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -130,-160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 16,17
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 9
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3162]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 130,-160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -16,17
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 9
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3163]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 220,-16
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -17,2
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 12
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3164]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -220,-5
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 17,0.7
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 13
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3165]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -220,25
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 19,-2.5
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 11
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3166]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = -30,100
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = 2.8,-17
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 6
value = 3170

;---------------------------------------------------------------------------
; 疾走・波紋
[Statedef 3167]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 6333
id = 6333
pos = 130,160
postype = p1
sprpriority = 4
removetime = -1
removeongethit = 1
vel = -16,-17
ownpal = 1

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 13
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 13
value = 1

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 20
ID = 6333
scale = 1.3-Var(13)/30.0 , 1.3-Var(13)/30.0

[State 1070, 5]
type = changestate
trigger1 = time = 9
value = 3170

;---------------------------------------------------------------------------
;疾走・波紋ヒット
[Statedef 3170]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 6000
ctrl = 0
sprpriority = 4

[State 1070, 5]
type = removeexplod
trigger1 = time = 0
id = 6333

[State 1070, 5]
type = changeanim
trigger1 = time = 0
trigger1 = prevstateno = [3054,3060]
value = 6001

[State 1070, 5]
type = changeanim
trigger1 = time = 0
trigger1 = prevstateno = [3061,3067]
value = 6002

[State 1070, 5]
type = playsnd
trigger1 = time = 0
value = 0,4
channel = 1

[State 1070, 5]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 890]
type    = A
movetype= H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 895]
type    = L
movetype= H
physics = N
anim = 5070
velset = 0,0

[State 5071, 1]
type = VelSet
trigger1 = Time = 0
x = -10

[State 5071, 2]
type = VelMul
trigger1 = 1
x = .88

[State 5071, 1]
type = VelSet
trigger1 = Time = 16
x = 0

[State 5071, 4] ;Hit ground
type = SelfState
trigger1 = Time = 16
value = 5110

;===========================================================================
[Statedef 4900];オラムダ合戦
type = S
movetype = A
physics = N
sprpriority = 0
velset = 0,0

[State 191, Wood 1]
type = removeExplod
trigger1 = time = 1
id = 1102
[State 191, Wood 1]
type = removeExplod
trigger1 = time = 1
id = 1103
[State 191, Wood 1]
type = removeExplod
trigger1 = time = 1
id = 1105

[State 191, Wood 1]
type = Explod
trigger1 = time = 30
anim = 1102
id = 1102
postype = p1
pos = 0,0
sprpriority = 3
removetime = -1
bindtime = -1
removeongethit = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0

[State 191, Wood 1]
type = Explod
trigger1 = time = 30
anim = 1103
id = 1103
postype = p1
pos = 0,0
sprpriority = 3
removetime = -1
bindtime = -1
removeongethit = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "oramuda back"
stateno = 9301
id = 9301
postype = back
trigger1 = id > enemy,id

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "oramuda cut"
stateno = 4950
id = 4950
postype = back

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = playsnd
trigger1 = !time
value = 100,17

[State 0, end]
type = changeanim
trigger1 = time < 30
value = anim
elem = animelemno(0)

[State 0, end]
type = changeanim
trigger1 = time = 30
value = 4900

[State 0, end]
type = playsnd
trigger1 = time = 30
value = 100,2

[State 810, Throw Sound]
type = playsnd
trigger1 = time = 30
value = 2,3

[State 0, end]
type = playsnd
triggerall = anim = 4900
trigger1 = !(gametime%10)
value = 0,5

[State 191, Wood 1]
type = helper
trigger1 = time = 30
name = "hamon0"
helpertype = normal
stateno = 11101
id = 11101
postype = p1
pos = 0,ceil(-58*const(size.yscale))
keyctrl = 0

[State 0, end]
type = explod
triggerall = anim = 4900
trigger1 = !enemy,numexplod(6004)
trigger1 = !(gametime%5)
pos = ceil(P2BodyDist X*.5),-60
postype = p1
anim = 6004
random = 24,24
sprpriority = 5
pausemovetime = 0
supermovetime = 0

[State 0, vel]
type = velset
trigger1 = time = 35
y = -.1

[State 0, var]
type = varset
trigger1 = !time
var(49) = 0

[State 0, var]
type = varadd
triggerall = time > 35
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
var(49) = 1

[State 191, Wood 1]
type = removeExplod
trigger1 = time = 250
id = 1102
[State 191, Wood 1]
type = removeExplod
trigger1 = time = 250
id = 1103
[State 191, Wood 1]
type = removeExplod
trigger1 = time = 250
id = 1105

[State 0, change];勝利
type = changestate
trigger1 = time = 250
trigger1 = var(49) > enemy,var(49)
value = 4910

[State 0, change];敗北
type = changestate
trigger1 = time = 250
trigger1 = var(49) < enemy,var(49)
value = 4920

[State 0, change];同じ
type = changestate
trigger1 = time = 250
trigger1 = var(49) = enemy,var(49)
value = 4910
;------------------------------------------------------------------------------
;オラムダ勝利（落下）
[Statedef 4910]
ctrl = 0
anim = 10044
physics = A
type = A

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;オラムダ敗北（吹っ飛び）
[Statedef 4920]
type = A
movetype = H
physics = N
anim = 5030
velset = -10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
value = 4921
;===========================================================================
[Statedef 4900];オラムダ合戦
type = S
movetype = A
physics = N
sprpriority = 0
velset = 0,0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "oramuda back"
stateno = 9300
id = 9300
postype = back
trigger1 = id > enemy,id

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "oramuda cut"
stateno = 4950
id = 4950
postype = back

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = playsnd
trigger1 = !time
value = 3,4

[State 0, end]
type = changeanim
trigger1 = time < 30
value = anim
elem = animelemno(0)

[State 0, end]
type = changeanim
trigger1 = time = 30
value = 14900

[State 0, end]
type = playsnd
trigger1 = time = 30
value = 3,5

[State 0, end]
type = playsnd
triggerall = anim = 14900
trigger1 = animelem = 3
trigger2 = animelem = 10
value = 2,3

[State 0, end]
type = playsnd
triggerall = anim = 14900
trigger1 = !(gametime%10)
value = 0,5

[State 0, end]
type = explod
triggerall = anim = 14900
trigger1 = !enemy,numexplod(6004)
trigger1 = !(gametime%5)
pos = ceil(P2BodyDist X*.5),-60
postype = p1
anim = 6004
id = 6004
random = 24,24
sprpriority = 3
pausemovetime = 0
supermovetime = 0

[State 0, vel]
type = velset
trigger1 = time = 35
y = -.1

[State 0, var]
type = varset
trigger1 = !time
var(49) = 0

[State 0, var]
type = varadd
triggerall = time > 35
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
var(49) = 1

[State 0, change];勝利
type = changestate
trigger1 = time = 250
trigger1 = var(49) > enemy,var(49)
value = 4910

[State 0, change];敗北
type = changestate
trigger1 = time = 250
trigger1 = var(49) < enemy,var(49)
value = 4920

[State 0, change];同じ
type = changestate
trigger1 = time = 250
trigger1 = var(49) = enemy,var(49)
value = 4910
;------------------------------------------------------------------------------
;オラムダ勝利（落下）
[Statedef 4910]
ctrl = 0
anim = 10044
physics = A
type = A

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;オラムダ敗北（吹っ飛び）
[Statedef 4920]
type = A
movetype = H
physics = N
anim = 5030
velset = -10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
value = 4921

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び（壁激突）
[Statedef 4921]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 10
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 10
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 10
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 10

[State 0, vel]
type = veladd
trigger1 = time > 10
y = .4

[State 5040, 5] ;Recover near ground
type = SelfState
triggerall = time >= 10
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5040, 6]; Recover in mid air
type = SelfState
triggerall = time >= 10
triggerall = Vel Y > -1
triggerall = alive
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;------------------------------------------------------------------------------
;背景（縦）
[Statedef 9301]
ctrl = 0
anim = 9999

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoBG
flag2 = NoFG

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8210
id = 8210
pos = 0,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8210
id = 8215
pos = 0,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8211
id = 8211
pos = 107,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8211
id = 8216
pos = 107,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8212
id = 8212
pos = 214,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8212
id = 8217
pos = 214,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8213
id = 8213
pos = 320,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8213
id = 8218
pos = 320,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8210)
id = 8210
pos = 0,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8211)
id = 8211
pos = 107,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8212)
id = 8212
pos = 214,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8213)
id = 8213
postype = back
pos = 320,-(time*8)%512
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8215)
id = 8215
pos = 0,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8216)
id = 8216
pos = 107,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8217)
id = 8217
pos = 214,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8218)
id = 8218
pos = 320,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8210

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8211

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8212

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8213

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8215

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8216

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8217

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8218

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900

[ja.Quotes]
victory1 = "老いてますます健在というところかな"
victory2 = "わしとだまし比べてはりあうには\n１０年早いわい"
victory3 = "フッフッフッフッフッフ\nまぬけめ！"
victory4 = "これで戦いの年季の違いが\nよくわかったじゃろう"
victory5 = "あんたの負けだ　お若いの"
victory6 = "お前は『まだ負けてない』と言う…"
victory7 = "相手が勝ち誇ったとき\nそいつはすでに敗北している"
victory8 = "さて…旅を続けよう"