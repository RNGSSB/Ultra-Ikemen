[data]
life = 1000
attack = 104
defence = 100
fall.defence_up = 50
liedown.time = 15
airjuggle = 99999
sparkno = 2
guard.sparkno = s5555
ko.echo = 0
volumescale = 155
volume = 155
intpersistindex = 59
floatpersistindex = 40

[Size]
xscale = .83
yscale = 1.07
ground.back = 21    ;Player width (back, ground)
ground.front = 21    ;Player width (front, ground)
air.back = 18       ;Player width (back, air)
air.front = 18     ;Player width (front, air)
height = 70         ;Height of player (for opponent to jump over)
attack.dist = 180    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -7, -90   ;Approximate position of head
mid.pos = 0, -65    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3.2      ;Walk forward
walk.back = -2.1    ;Walk backward
run.fwd  = 7    ;Run forward (x, y)
run.back = -7 ;Hop backward (x, y)
jump.neu = 0,-13  ;Neutral jumping velocity (x, y)
jump.back = -3.2  ;Jump back Speed (x, y)
jump.fwd = 3.2      ;Jump forward Speed (x, y)
runjump.back = -2.55,-11 ;Running jump speeds (opt)
runjump.fwd = 4.5,-11      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .62        ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching

;---------------------------------------------------------------------------
; Format:
; [statedef stateno]
; type = ?      s/c/a/l  stand/crouch/air/liedown
; movetype = ?  i/a/h    idle/attack/gethit
; physics = ?   s/c/a/n  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [state stateno, ?]     ? - any number you choose
; type = ?
; ...


[Statedef 21]
type    = S
physics = S
sprpriority = 1

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 21, 1]
type = VelSet
triggerall = enemy, stateno != [80000, 80097]
trigger1 = command = "holdfwd"
x = 1.6

[State 21, 2]
type = VelSet
triggerall = enemy, stateno != [80000, 80097]
trigger1 = command = "holdback"
x = -1.2

[State 21, 3]
type = VelSet
triggerall = enemy, stateno != [80000, 80097]
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = command = "holdfwd" && anim != 20
value = 20

[State 21, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = command = "holdback" && anim != 21
value = 21

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = command != "holdfwd" && anim != 0
trigger1 = command != "holdback" && anim != 0
value = 0


[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 20, 0)

;====================================
;INITIALIZE
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = !RoundsExisted
value = 0

; Like in vs Series, you always start with 1 power stock...
[State 190, PowerAdd]
type = PowerSet
triggerall = Roundno = 1
trigger1 = time = 0
value = 1000

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = !RoundsExisted
fvalue = 0

[State 5900, 3] ;Change palette
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190 ;190

[State 5900, Turns Mode Intro]
type = ChangeState
trigger1 = teammode = turns
trigger1 = roundno > 1
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
trigger1 = prevstateno != 197
value = 190

[State 5900, ChangeState] ;Intro for round 1
type = ChangeState
triggerall  = roundsexisted
trigger1 = roundno != 1
value = 21



; Jump Start 
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
velset = 0,0
facep2 = 1

[State 40, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 40, VarSet]
type = VarSet
trigger1 = time = 1
sysvar(1) = ifelse(command = "holdfwd",1,ifelse(command = "holdback", -1, 0))

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(2) = 0

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(3) = 1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, VelSet]
type = VelSet
trigger1 = animtime = 0
trigger1 = prevstateno = 100
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, VelSet]
type = VelSet
trigger1 = animtime = 0
trigger1 = prevstateno = 105
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.back.x)

[State 40, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
 
; AirJump Start 
[Statedef 45]
type    = A
physics = A
velset = 0,0

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
sysvar(1) = ifelse(command = "holdfwd",1,ifelse(command = "holdback", -1, 0))

[State 40, VarAdd]
type = VarAdd
trigger1 = time = 0
var(2) = -1

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(3) = 1

[State 40, VelSet]
type = VelSet
trigger1 = Time = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 50, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))
 
; Jump Up 
[Statedef 50]
type    = A
physics = A

[State 50, VarSet]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > -10
y= 0.19

[State 91, VelAdd]
type = VelAdd
trigger1 = var(19) > 0
trigger1 = Vel Y > -10
y=  0.31

[State 91, VelAdd]
type = VelAdd
trigger1 = var(15) && Vel Y > 0
y=  -0.22


[State 1211, Turn]
type = Turn
triggerall = var(15)
trigger1 = P2Dist X < -5 && P2Dist Y > -150

[State 112, 3]
type = VelAdd
triggerall = var(15)
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .295

[State 112, 4]
type = VelAdd
triggerall = var(15)
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.199

[State 50, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, ChangeState]
type = ChangeState
triggerall = IfElse(((PrevStateNo = 40) || (PrevStateNo = 10022 || (PrevStateNo = 1221))),(Time > 10),1)
triggerall = var(15) < 1
trigger1 = command = "up"
trigger2 = command = "UF"
trigger3 = command = "UB"
value = 53

;---------------------------------------------------------------------------
; Double Jump Start
[Statedef 53]
type    = A
physics = N
velset = 0,0
ctrl = 0

[State 112, 3]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .295

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > -10
y= -0.19

[State 112, 4]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.199

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 45, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 50

[State 45, ChangeAnim]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 50

[State 45, ChangeAnim]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 50

[State 45, VarAdd]
type = VarAdd
trigger1 = !Time
var(15) = 1

[State 45, VarSet]
type = VarSet
trigger1 = !Time
sysvar(1) = 0

[State 45, VarSet]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, VarSet]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, VelSet]
type = VelSet
trigger1 = Time > 3
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = -14

[State 45, ChangeState]
type = ChangeState
trigger1 = Time > 3
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Falling MvC2
;
[Statedef 1221]
type    = A
movetype= I
physics = A
anim = 57
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.11

[State 1211, Ctrl]
type = CtrlSet
trigger1 = prevstateno = 4100
value = 1

[State 1211, Ctrl]
type = CtrlSet
triggerall = prevstateno != 4100
trigger1 = Var(12) = 0
value = 1

[State 1211, Ctrl]
type = CtrlSet
triggerall = prevstateno != 4100
trigger1 = Var(12) = 1
value = 1

[State 112, 3]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .295

[State 112, 4]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.199

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 58

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 59

[State 1211, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 52

[State 50, ChangeState]
type = ChangeState
triggerall = IfElse(((PrevStateNo = 40) || (PrevStateNo = 10022 || (PrevStateNo = 1221))),(Time > 10),1)
triggerall = var(15) < 1
trigger1 = command = "up"
trigger2 = command = "UF"
trigger3 = command = "UB"
value = 53

;-------------------------------------------------------------------------
;Super Jump
[Statedef 10022]
type    = A
physics = A
ctrl = 1
anim = 44
velset = 0, -18.5

[State 1000, FireB]
type = Explod
trigger1 = time = 0
anim = 8250
id = 8250
pos = -120, 9
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > -110
y= - 0.12

[State 91, VelAdd]
type = VelAdd
trigger1 = time = 0
y=  -0.58

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 190

[State 180, Superjump Var]
type = VarSet
trigger1 = 1
var(11) = 1

[State 999, 1a]
type = VelAdd
triggerall = Vel X >= -4
trigger1 = Time >= 0
trigger1 = Time < 99
trigger1 = command = "holdback"
;trigger1 = Anim != 43
x = -0.04

[State 999, 1b]
type = VelAdd
triggerall = Vel X <= 4.5
trigger1 = Time >= 0
trigger1 = Time < 99
trigger1 = command = "holdfwd"
;trigger1 = Anim != 42
x = 0.22

[State 999, 2a]
type = VelSet
trigger1 = Anim = 45
trigger1 = Time = [0,2]
x = 3

[State 999, 2b]
type = VelSet
trigger1 = Anim = 46
trigger1 = Time = [0,2]
x = -3.5

[State 1310, 6]
type = Turn
;trigger1 = Time = 10
trigger1 = p2dist X < -5

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 45

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 46

[State 50, ChangeState]
type = ChangeState
triggerall = Time > 10
triggerall = var(15) < 1
trigger1 = command = "up"
trigger2 = command = "UF"
trigger3 = command = "UB"
value = 53


;-------------------------------------------------------------------------
;Super Jump - Holdup Launcher
[Statedef 10023]
type    = A
physics = A
ctrl = 1
anim = 44
velset = 0, -18.5

[State 1000, FireB]
type = Explod
trigger1 = time = 0
anim = 8250
id = 8250
pos = -120, 9
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > -110
y= - 0.12

[State 91, VelAdd]
type = VelAdd
trigger1 = time = 0
y=  -0.58

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 190

[State 180, Superjump Var]
type = VarSet
trigger1 = 1
var(11) = 1

[State 999, 1a]
type = VelAdd
triggerall = Vel X >= -4
trigger1 = Time >= 0
trigger1 = Time < 99
trigger1 = command = "holdback"
;trigger1 = Anim != 43
x = -0.04

[State 999, 1b]
type = VelAdd
triggerall = Vel X <= 4.5
trigger1 = Time >= 0
trigger1 = Time < 99
trigger1 = command = "holdfwd"
;trigger1 = Anim != 42
x = 0.22

[State 999, 2a]
type = VelSet
trigger1 = Anim = 45
trigger1 = Time = [0,2]
x = 3

[State 999, 2b]
type = VelSet
trigger1 = Anim = 46
trigger1 = Time = [0,2]
x = -3.5

[State 1310, 6]
type = Turn
;trigger1 = Time = 10
trigger1 = p2dist X < -5

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 45

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 46

[State 50, ChangeState]
type = ChangeState
triggerall = Time > 10
triggerall = var(15) < 1
trigger1 = command = "up"
trigger2 = command = "UF"
trigger3 = command = "UB"
value = 53

;---------------------------------------------------------------------------
; run_fwd
[statedef 100]
type    = s
physics = n
anim = 100
sprpriority = 1

[state 20,1]
type=ctrlset
trigger1 = var(59)>0
value=0

[State 200, 1]
type = PlaySnd
trigger1 = time = 1
value = 0,1

[state 100, Sound effect]
type = playsnd
trigger1 = animelem = 4
trigger2 = animelem = 8
value = 20,0
volume = 190
volumescale = 190

[state 105, 1]
type = velset
trigger1 = time = 0
x = const(velocity.run.fwd.x)
y = const(velocity.run.fwd.y)

[State 101, Explod]
type = Explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
scale = 0.5,0.5
random = 30,abs(const(size.head.pos.y))
pos = -30,ceil(const(size.mid.pos.y))

[state 100, 2] ;prevent run From canceling into walk
type = assertspecial
trigger1 = 1
flag = nowalk

[state 100, 3] ;prevent From turning
type = assertspecial
trigger1 = 1
flag = noautoturn

[state 100, 3] ;prevent From turning
type = assertspecial
trigger1 = 1
flag = nostandguard

[state 100, 4]
type = changestate
trigger1 = animtime = 0
value = 101
ctrl=1

;---------------------------------------------------------------------------

; RUN_Forward Stop
[Statedef 101]
type    = S
physics = S
ctrl = 1
anim = 101
velset = 3,0

[State 107]
type = PosSet
trigger1 = Time = 0
y = 0

[State 101] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; run_back
[statedef 105]
type    = s
physics = n
anim = 105
sprpriority = 1

[State 105, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = -80

[State 105, PosFreeze]
type = PosFreeze
trigger1 = Time < 6

[State 105, VelSet 1]
type = VelSet
trigger1 = AnimElem = 2
x = -8

[State 105, VelSet 2]
type = VelSet
trigger1 = AnimElem = 6
x = -6

[State 105, VelMul]
type = VelMul
trigger1 = AnimElem = 11
x = .27

[state 20,1]
type=ctrlset
trigger1 = var(59)>0
value=0

[state 100, 3] ;prevent From turning
type = assertspecial
trigger1 = 1
flag = nostandguard


[state 100, 2] ;prevent run From canceling into walk
type = assertspecial
trigger1 = 1
flag = nowalk

[state 105, 2]
type = ctrlset
trigger1 = var(59)<=0
trigger1 = time = 1
value = 1

[State 200, 1]
type = PlaySnd
trigger1 = time = 4
value = 200, 0
volume = 255
volumescale = 255
channel = 0

[State 105]
type = ChangeState
trigger1 = animtime = 0
value = 107

;---------------------------------------------------------------------------

; RUN_Back Stop
[Statedef 107]
type    = S
physics = S
ctrl = 1
anim = 106
velset = 0,0

[State 107] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 107]
type = VelSet
trigger1 = Time = 0
x = -6

[State 107]
type = PosSet
trigger1 = Time = 0
y = 0


[State 107]
type = ChangeState
trigger1 = AnimTime = 0
value = 0; 106
ctrl = 1



;---------------------------------------------------------------------------
; run_back2 (land)
[statedef 106]
type    = s
physics = s
ctrl = 0
anim = 47

[state 106, 1]
type = velset
trigger1 = time = 0
y = 0

[state 106, 2]
type = posset
trigger1 = time = 0
y = 0

[state 106, 3]
type = makedust
trigger1 = time = 2
pos = -5,-2
spacing = 1

;[State 200, 1]
;type = PlaySnd
;trigger1 = time = 1
;value = 42, 0

[state 106, 4]
type = changestate
trigger1 = time = 7
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Lose by Time Over
;
[Statedef 170]
type = S
ctrl = 0
anim = 171
velset = 0,0

[State 170]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; Win state decider

[Statedef 180]
type = S
velset = 0,0

[State 180, 0]
type = PosSet
trigger1 = Time = 0
y = 0

[State 180]
type = Width
trigger1 = Time = 0
value = 50,50

[State 180]
type = ChangeState
trigger1 = Time =0
value = 181+random%5

[State 180]
type = ChangeState
trigger1 = wintime
value = 181


;---------------------------------------------------------------------------

[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0
sprpriority = 0


[State 181]
type = AssertSpecial
trigger1 = Time < 120
flag = roundnotover



;---------------------------------------------------------------------------

[Statedef 182]
type = S
ctrl = 0
physics = N
anim = 182
sprpriority = 0
velset = 0,0

[State 182]
type = PlaySnd
trigger1 = AnimElem = 9
value = 182,0
volume = 255
volumescale = 255

[State 182]
type = Helper
trigger1 = AnimElem = 8
stateno = 186
id = 186
ownpal = 1
pos = FrontEdgeDist + 20,-152

[State 182]
type = AssertSpecial
trigger1 = Time < 270
flag = roundnotover


;---------------------------------------------------------------------------

[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0
sprpriority = 0

[State 183]
type = Helper
trigger1 = Time%17 = 0 && random < 700
trigger1 = AnimElem = 3, >= 0
stateno = 188
id = 187
ownpal = 1
pos = -100,50

[State 183]
type = Helper
trigger1 = Time%17 = 0 && random < 700
trigger1 = AnimElem = 3, >= 0
stateno = 188
id = 187
ownpal = 1
pos = -170,50

[State 183]
type = Helper
trigger1 = Time%17 = 0 && random < 500
trigger1 = AnimElem = 3, >= 0
stateno = 188
id = 187
ownpal = 1
pos = -random%80-100,50

[State 183]
type = AssertSpecial
trigger1 = Time < 160
flag = roundnotover

;---------------------------------------------------------------------------
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0
sprpriority = 0

[State 184] 
type = PlaySnd
trigger1 = AnimElem = 3
value = 184,0
volume = 255
volumescale = 255

[State ]
type = Explod
anim = 188
trigger1 = time=20
postype = P1
pos = -6,-145
ownpal = 1
sprpriority = 5
scale=0.83,1.07


[State 184]
type = AssertSpecial
trigger1 = Time < 120
flag = roundnotover

;---------------------------------------------------------------------------

[Statedef 185]
type = S
ctrl = 0
anim = 185
velset = 0,0
sprpriority = 0

[State 185]
type = PlaySnd
trigger1 = AnimElem = 3
value = 185,0
volume = 255
volumescale = 255

[State 185]
type = AssertSpecial
trigger1 = Time < 120
flag = roundnotover

;------------------------------------------------------------------------------------------------------------
[Statedef 186]
type = A
movetype = I
physics =N
anim = 186
ctrl = 0
sprpriority = 2
velset = 0,0

[State 186]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[State 186]
type = VelSet
trigger1 = AnimElem = 9 , < 0
x = (ParentDist X + 53)*0.05
y = (ParentDist Y -122)*0.03


[State 186]
type = ChangeAnim
trigger1 = abs(ParentDist X + 53) = [-5,5]
trigger1 = abs(ParentDist Y -122) = [-5,5]
value = 186
elem = 9
persistent = 0

[State 186]
type = VelSet
trigger1 = AnimElem = 9
x = 0
y = 0

[State 186]
type = PosSet
trigger1 = AnimElem = 9
x = Parent,Pos X*0.9
y = Parent,Pos Y*1.07


[State 186]
type = DestroySelf
trigger1 = parent,stateno !=182




;------------------------------------------------------------------------------------------------------------
[Statedef 188]
type = A
movetype = I
physics =N
anim = 187
ctrl = 0
sprpriority = 2
velset = 0,0


[State 6184]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[State 6184]
type = VelSet
trigger1 = Time = 0
x = 3
y = -4

[State 187]
type = DestroySelf
trigger1 = ScreenPos Y < -50

;---------------------------------------------------------------------------
; Preintro
;
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, VarRandom]
type = VarRandom
trigger1 = Time = 0
v = 51
range = 0,1

[State 190, Intro 1]
type = ChangeState
trigger1 = Var(51) = 0
value = 80000

[State 190, Intro 2]
type = ChangeState
trigger1 = Var(51) = 1
value = 80006

;---------------------------------------------------------------------------
; Introduction 1 A (Fixing his wrist)
;
[Statedef 80000]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, AssertSpecial] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Shield VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

[State 191, Shield Helper]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "Flying Shield"
ID = 191
pos = 50,-170
postype = Front
facing = -1
stateno = 80003
ownpal = 0
size.ground.back = 20
size.ground.front = 20
ignorehitpause = 1

[State 191, PlaySnd]
type = PlaySnd
trigger1 = Time = 54
value = 193,0
volume = 255
volumescale = 255

[State 191, ChangeState]
type = ChangeState
trigger1 = (Helper(191), ParentDist X < 150) && (Helper(191), BackEdgeBodyDist > 0)
value = 80002

;---------------------------------------------------------------------------
; Introduction 1 B (Jumping up grabbing shield)
;
[Statedef 80002]
type = A
physics = N
ctrl = 0
anim = 191

[State 192, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Shield VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

[State 8000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 192, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 0
y = -11

[State 192, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(3) >= 0
y = 0.58

[State 192, PlaySnd];grab shield sound
type = PlaySnd
trigger1 = AnimElemTime(6) = 1
value = 5,4

[State 192, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (AnimElemTime(4) >= 0)
value = 80004

;---------------------------------------------------------------------------
; Introduction 1 C (Flying Shield Helper)
;
[Statedef 80003]
type = A
physics = N
ctrl = 0
anim = 192

[State 193, VelSet]
type = VelSet
trigger1 = Time = 40
x = 6

[State 8000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 193, DestroySelf]
type = DestroySelf
trigger1 = (parent, Anim = 191) && (parent, AnimElemTime(5) >= 1)
trigger2 = FrontEdgeBodyDist <= -20

;---------------------------------------------------------------------------
; Introduction 1 D (Jump land)
;
[Statedef 80004]
type = S
physics = S
velset = 0,0
ctrl = 0
anim = 47

[State 194, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 192,0
volume = 255
volumescale = 255

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Helper]
type = Helper
trigger1 = time = 0
stateno = 8200

[State 52, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,0

[State 194, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction 2 (Cap Sliding Down a Rope)
;
[Statedef 80006]
type = A
movetype = I
physics = N
ctrl = 0
anim = 193
velset = 0,0
sprpriority = 2

[State 8000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 8000, Shield VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

[State 8000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 8000, PosSet]
type = PosSet
trigger1 = Time = 0
y = -94

[State 8000, PosAdd 1]
type = PosAdd
trigger1 = Time = 0
x = -100

[State 8000, PosAdd 2]
type = PosAdd
trigger1 = (Time >= 1) && (AnimElemTime(2) < 0)
x = 8
y = 1

[State 8000, PosAdd B 1]
type = PosAdd
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(6) < 0)
x = -2

[State 8000, PosAdd B 2]
type = PosAdd
trigger1 = (AnimElemTime(6) >= 0) && (AnimElemTime(11) < 0)
x = -1

[State 8000, VelAdd]
type = VelAdd
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(12) < 0)
y = 0.28

[State 8000, VelSet 1]
type = VelSet
trigger1 = AnimElemTime(2) = 0
y = -3

[State 8000, VelSet 2]
type = VelSet
trigger1 = AnimElemTime(12) = 0
y = 0

[State 8000, PosSet]
type = PosSet
trigger1 = AnimElemTime(12) = 0
y = 0

[State 8000, Burning Rope Helper]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "Burning Rope"
ID = 197
postype = back
pos = 160,-112
facing = -1
stateno = 80007
ownpal = 1

[State 8000, Sparks Explod]
type = Explod
anim = 194
trigger1 = (Time%4 = 0) && (Time <= 19)
postype = P1
pos = 10,-108
ownpal = 1
sprpriority = 3

[State 52, Helper]
type = Helper
trigger1 = AnimElemTime(12) = 1
stateno = 8200

[State 52, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(12) = 1
value = 0,0

[State 8000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Burning Rope Helper
;
[Statedef 80007]
type = A
movetype = I
physics = N
ctrl = 0
anim = 197
velset = 0,0
sprpriority = 1

[State 8000, Sparks Explod]
type = Explod
trigger1 = time = 50
anim = 8083
postype = P1
scale = 0.4,0.4
pos = 70,-48
ownpal = 1
sprpriority = 3

[State 8000, Sparks Explod]
type = Explod
trigger1 = time = 52
anim = 8083
postype = P1
scale = 0.4,0.4
pos = 20,-38
ownpal = 1
sprpriority = 3

[State 8000, Sparks Explod]
type = Explod
trigger1 = time = 54
anim = 8083
postype = P1
scale = 0.4,0.4
pos = -30,-18
ownpal = 1
sprpriority = 3

[State 8000, Sparks Explod]
type = Explod
trigger1 = time = 56
anim = 8083
postype = P1
scale = 0.4,0.4
pos = -80,-8
ownpal = 1
sprpriority = 3

[State 8000, Sparks Explod]
type = Explod
trigger1 = time = 58
anim = 8083
postype = P1
scale = 0.4,0.4
pos = -130,8
ownpal = 1
sprpriority = 3

[State 52, PlaySnd]
type = PlaySnd
trigger1 = time = 50
trigger2 = time = 52
trigger3 = time = 54
trigger4 = time = 56
trigger5 = time = 58
value = 5,6
volume = 210
volumescale = 210
channel = 1

[State 8040, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Taunt
;
[Statedef 195]
type = S
ctrl = 0
movetype = I
physics = N
poweradd = 50
anim = 195
velset = 0,0
sprpriority = 0

[State 195]
type = PlaySnd
trigger1 = AnimElem = 3
value = 185,0
volume = 255
volumescale = 255

[State 195]
type = PlaySnd
trigger1 = AnimElem = 2
value = 20,0
volume = 190
volumescale = 190

[State 195]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------
;通常
;---------------------------------------------------------------------------
;立ち弱パンチ

[Statedef 200]
type = S
anim=200
movetype = A
physics = S
facep2 = 1
ctrl = 0
poweradd = 20

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3
volume = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 200, HitDef]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype = Light
damage = 6*ifelse(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 7,7
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,8
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 14
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 90)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200]
type = ChangeState
triggerall = Time >8
triggerall = var(59)<=0
trigger1 = command = "holdup" 
value = 40

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >8 && InGuardDist
trigger1 = command = "holdback"
value = 120

[State 200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち中パンチ

[Statedef 210]
type = S
anim=210
movetype = A
physics = S
poweradd = 50
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,4
volume = 50

[State 210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 210,0
channel = 0
volume = 255
volumescale = 255

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 210, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Medium
air.animtype = up
damage =  7*ifelse(10*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(10*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 23
yaccel = .88
ground.velocity = -8.3,0
guard.velocity = -9
air.velocity = 0,-16
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 21

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >20
trigger1 = command="holdup"
value = 40

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >20 && InGuardDist
trigger1 = command = "holdback"
value = 120

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち強P
[Statedef 220]
type = S
anim=220
movetype = A
physics = S
poweradd = 50
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 3

[State 220]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 250, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 250, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 220]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,5
volume = 50

[State 240, HitDef]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype = Hard
damage =  11*ifelse(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = MA
priority = 6, Hit
pausetime = 11, 11
guard.pausetime = 9, 9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 2
yaccel = .96
ground.velocity = -16,-9
guard.velocity = -16
air.velocity = -16,-9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recover = 0
id = 2+4
getpower= 7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 41)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち強P
[Statedef 221]
type = S
anim=221
movetype = A
physics = S
poweradd = 50
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 3

[State 220]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 250, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 250, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 220]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,5
volume = 50

[State 240, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage =  10*ifelse(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = MA
priority = 6, Hit
pausetime = 5,8
guard.pausetime = 5,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .88
ground.velocity = -13,0
guard.velocity = -13
air.velocity = -10,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4
getpower= 7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >30
trigger1 = command="holdup"
value = 40

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >30 && InGuardDist
trigger1 = command = "holdback"
value = 120

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち弱キック
[Statedef 230]
type = S
anim=230
movetype = A
physics = S
facep2 = 1
ctrl = 0
poweradd = 20

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3
volume = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 230, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype = Light
damage =  6*ifelse(9*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(9*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = MA
priority = 3, Hit
pausetime = 7,7
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-20
guard.pausetime = 8,8
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 14
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 20)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0                         

;//無敵は許さない
[State 1400, target state]
Type = null;TargetState
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno=[5100,5101]
Trigger1 = target(1400),facing*(pos x-target(1400),pos x)=[-60,90]
Trigger1 = hitcount=0
Trigger1 = time=3
Value = 236
ID = 1400

;//無敵は許さない
[State 1400, target state]
type = Changestate
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno = 236
value = 231

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >10
trigger1 = command="holdup"
value = 40

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >8
trigger1 = command="holddown"
value = 10
ctrl=1

[State 200]
type = ChangeState
triggerall = var(59)>0
triggerall = Time >8
trigger1 = 1
value = 10
ctrl=1

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >10 && InGuardDist
trigger1 = command = "holdback"
value = 120

[state 200, 7]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち小足ヒット偽装
[Statedef 231]
type = S
movetype = A
physics = N
poweradd = 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1)
juggle = 3
facep2 = 1
ctrl = 0

[State 1400, target state]
type = PosFreeze
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno = 236

[State 1400, target state]
type = changeanim
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno = 236
value = anim
elem = animelemno(0)

[State 1400, target state]
type = PlaySnd
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno = 236
value = 1,0
channel = 0
persistent=0

[State 1400, target state]
type = Explod
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno = 236
anim = 6660
id = 6660
postype = p2
pos = 0,-25
ownpal = 1
sprpriority = 4
bindtime = -1
;removetime = -1
supermovetime = 99
pausemovetime = 99
persistent=0

[State 231, target state]
Type = HitAdd
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno = 236
Value = 1
persistent=0

[State 231, target state]
type = TargetLifeAdd
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno = 236
value = -7*ifelse(9*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(9*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
persistent = 0
absolute=1

[State 231, target state]
type = VarAdd
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno = 236
var(40) = 1
ignorehitpause = 1
persistent = 0

[State 231, target state]
Type = velset
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno != 236
Trigger1 = vel X>3
Trigger1 = time<12
x = 6

[State 231, target state]
Type = velmul
Trigger1 = NumTarget(1400)
Trigger1 = target(1400),stateno != 236
x = 0.85



[State 231, target state]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >10
trigger1 = command="holdup"
value = 40

[State 231, target state]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >8
trigger1 = command="holddown"
value = 10
ctrl=1

[State 231, target state]
type = ChangeState
triggerall = var(59)>0
triggerall = Time >8
trigger1 = 1
value = 10
ctrl=1

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >10 && InGuardDist
trigger1 = command = "holdback"
value = 120

[state 200, 7]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;闇のカスタムステート

[Statedef 236]
type    = A
movetype= H
physics = N
velset = 0,0
anim = 5160
poweradd = 14

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 4] ;shake anim
type = Offset
trigger1 = Time %2=0
x = 1

[State 5020, 4] ;shake anim
type = Offset
trigger1 = Time %2=1
x = -1

[State 5020, 5]
type = ChangeState
trigger1 = time>8
value = 499

;---------------------------------------------------------------------------
;立ち中K

[Statedef 240]
type = S
anim=240
movetype = A
physics = S
poweradd = 50
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,4
volume = 50

[State 210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 240, HitDef]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype = Medium
damage =  7*ifelse(11*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(11*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 11,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .99
ground.velocity = -8.3,0
guard.velocity = -9
air.velocity = -8,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 21

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 85)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >26
trigger1 = command="holdup"
value = 40

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >26 && InGuardDist
trigger1 = command = "holdback"
value = 120          


[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち中K

[Statedef 241]
type = S
anim=241
movetype = A
physics = S
poweradd = 50
facep2 = 1
ctrl = 0

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,4
volume = 50

[State 210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 240, HitDef]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype = Medium
damage =  7*ifelse(11*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(11*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -8.3,0
guard.velocity = -9
air.velocity = -8,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 21

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 強K
[Statedef 250]
type = S
anim=250
movetype = A
physics = S
juggle = 3
poweradd = 56
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 3

[State 220]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 250, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 250, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 220]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,5
volume = 50

[State 250, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage =  10*ifelse(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 9,10
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .99
ground.velocity = -13,0
guard.velocity = -13
air.velocity = -10,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4
getpower= 7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
   
[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = time >37
trigger1 = command="holdup"
value = 40

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >37 && InGuardDist
trigger1 = command = "holdback"
value = 120     

[state 210, 5]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱パンチ

[Statedef 400]
type = C
anim=400
movetype = A
physics = C
facep2 = 1
ctrl = 0
poweradd = 20

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3
volume = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 400, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
animtype = Light
damage =  6*ifelse(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 8,8
guard.pausetime = 7,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
guard.pausetime = 8,8
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 14
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >9 && InGuardDist
trigger1 = command = "holdback"
value = 120       

[state 400, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; しゃがみ中P
[Statedef 410]
type = C
anim=410
movetype = A
physics = C
poweradd = 50
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,4
volume = 50

[State 210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 410]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
ground.type =  Low
animtype = Medium
damage =  7*ifelse(11*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(11*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = LA
priority = 4, Hit
pausetime = 4,8
guard.pausetime = 4,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-25
hitsound = S5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -8.3,0
down.velocity = -6,-7
guard.velocity = -9
air.velocity = -6,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 21

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 410, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;CHP
[Statedef 420]
type = C
anim=420
movetype = A
physics = C
poweradd = 56
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 3

[State 220]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 250, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 220]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,5
volume = 50

[State 410, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = up
damage =  11*ifelse(14*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(14*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = MA
priority = 5, Hit
pausetime = 8,8
guard.pausetime = 11,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 25
guard.hittime = 17
yaccel = .99
ground.velocity = 0,-20
guard.velocity = -13
guard.cornerpush.veloff = -18
ground.cornerpush.veloff = 0
air.velocity = 0,-20
guard.velocity = -10
airguard.velocity = -10.5,3
getpower= 7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Launcher Spark]
type = Explod
trigger1 = MoveHit
anim = 8020
pos = 60, -60
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
ownpal = 1
facing = -1

[state 410, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;CHP
[Statedef 421]
type = C
anim=421
movetype = A
physics = C
poweradd = 56
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 3

[State 220]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 250, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 220]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,5
volume = 50

[State 410, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
animtype = up
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = MA
priority = 5, Hit
pausetime = 4,8
guard.pausetime = 4,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 25
guard.hittime = 17
yaccel = .99
ground.velocity = 0,-20
guard.velocity = -16
guard.cornerpush.veloff = -18
ground.cornerpush.veloff = 0
air.velocity = 0,-20
guard.velocity = -10
airguard.velocity = -10.5,3
getpower= 7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 55)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Launcher Spark]
type = Explod
trigger1 = MoveHit
anim = 8020
pos = 60, -60
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
ownpal = 1
facing = -1

[state 410, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; しゃがみ弱キック

[Statedef 430]
type = C
anim=430
movetype = A
physics = C
facep2 = 1 
ctrl = 0
poweradd = 20

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,3
volume = 50

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 430, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
animtype = Light
damage =  6*ifelse(9*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(9*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = LA
priority = 3, Hit
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
guard.pausetime = 8,8
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
down.velocity = -6,-7
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 14
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 410, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ中K

[Statedef 440]
type = C
anim=440
movetype = A
physics = C
poweradd = 50
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,4
volume = 50

[State 210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 440, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = Medium
damage =  7*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = LA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = S5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -8.3,0
down.velocity = -6,-7
guard.velocity = -9
air.velocity = -6,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 21

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = Time >19 && InGuardDist
trigger1 = command = "holdback"
value = 120

[state 410, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 大足

[Statedef 450]
type = C
anim=450
movetype = A
physics = C
poweradd = 50
facep2 = 1
ctrl = 0

[State a, 慣性]
type = Velset
trigger1 = (Time > 0) && (time <= 10) && (PrevStateNo = 100)
x = 2

[State 210]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,5
volume = 50

[State 210]
type = PlaySnd
trigger1 = AnimElem = 1
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 210, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 450, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = hard
ground.type = trip
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = LA
priority = 5, Hit
pausetime = 10,11
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-10
hitsound = S5,2
guardsound = S6,0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 20
air.hittime = 12
guard.hittime = 17
yaccel = .53
ground.velocity = 0,-4
guard.velocity = -16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -13.5
air.velocity = 0,-4
guard.velocity = -10
airguard.velocity = -10.5,3
down.velocity = -6,-7
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 10
id = 4
getpower= 7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 35


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[state 410, 4]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;空中通常技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; 空弱P
[Statedef 600]
type = A
anim=600
movetype = A
physics = A
ctrl = 0
poweradd =20

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,3
volume = 50

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * 0.4

[State 600, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage =  6*ifelse(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 21
guardflag = HA
priority = 4, Hit
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-7
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-10.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 600
triggerall = floor (pos Y < -155)
trigger1 = animelem = 4
value = 1221
ctrl = 1



;---------------------------------------------------------------------------
; 空中P
[Statedef 610]
type = A
anim=610
movetype = A
physics = A
poweradd = 50
ctrl = 0

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,4
volume = 50

[State 91, VelAdd]
type = VelAdd
triggerall = var(11)
trigger1 = time = 0
y= -1.21

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -4.6

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(6) = 1

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * 0.1

[State 610, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Medium
air.animtype = up
damage =  7*ifelse(10*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(10*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 5, Hit
getpower= 7*ifelse(3*fvar(6)>=1,floor(3*fvar(6)),1),21
givepower= 21
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 16
air.hittime = 12
yaccel = 1.19
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-11.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 610
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; J強P

[Statedef 620]
type = A
anim=620
movetype = A
physics = A
poweradd = 50
ctrl = 0

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,5
volume = 50

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(18) > 1 && var(17) > 0
var(6) = 1

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 200]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * -0.3

[State 620, HitDef]
type = HitDef
triggerall = !var(6)
trigger1 = AnimElem = 5
attr = A, NA
animtype = Back
air.animtype = back
damage =  11*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -13,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
triggerall = var(6)
trigger1 = AnimElem = 5
attr = A, NA
animtype = Back
air.animtype = back
damage =  11*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -13,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 620
triggerall = floor (pos Y < -155)
trigger1 = animelem = 11
value = 1221
ctrl = 1


;---------------------------------------------------------------------------
; J強P

[Statedef 621]
type = A
anim=621
movetype = A
physics = A
poweradd = 50
ctrl = 0

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,5
volume = 50

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(18) > 1 && var(17) > 0
var(6) = 1

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 200]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * -0.3


[State 620, HitDef]
type = HitDef
trigger1 = !var(6) && AnimElem = 3
attr = A, NA
animtype = Back
air.animtype = back
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -13,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(6) && AnimElem = 3
attr = A, NA
animtype = Back
air.animtype = back
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -13,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 621
triggerall = floor (pos Y < -155)
trigger1 = animelem = 8
value = 1221
ctrl = 1

;---------------------------------------------------------------------------
; J弱K

[Statedef 630]
type = A
anim=630
movetype = A
physics = A
juggle = 1
ctrl = 0
poweradd =20

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,3
volume = 50

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(6) = 1

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * 0.4

[State 630, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage =  6*ifelse(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 3, Hit
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-7
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-10.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 630
triggerall = floor (pos Y < -155)
trigger1 = animelem = 4
value = 1221
ctrl = 1


;---------------------------------------------------------------------------
; J中K

[Statedef 640]
type = A
anim=640
movetype = A
physics = A
poweradd = 50
ctrl = 0

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,4
volume = 50

[State 91, VelAdd]
type = VelAdd
triggerall = var(11)
trigger1 = time = 0
y= -1.21

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -4.6


[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(6) = 1

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * 0.1

[State 640, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
air.animtype = up
damage =  7*ifelse(10*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(10*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 3, Hit
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 16
air.hittime = 13
yaccel = 1.19
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -2,-7.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 640
triggerall = floor (pos Y < -155)
trigger1 = animelem = 4
value = 1221
ctrl = 1


;---------------------------------------------------------------------------
; J強K

[Statedef 650]
type = A
anim=650
movetype = A
physics = A
poweradd = 50
ctrl = 0

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,5
volume = 50

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(18) > 1 && var(17) > 0
var(6) = 1

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 200]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * -0.3


[State 620, HitDef]
type = HitDef
trigger1 = !var(6) && AnimElem = 3
attr = A, NA
animtype = Back
air.animtype = back
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -13,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(6) && AnimElem = 3
attr = A, NA
animtype = Back
air.animtype = back
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -13,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 650
triggerall = floor (pos Y < -155)
trigger1 = animelem = 5
value = 1221
ctrl = 1


;---------------------------------------------------------------------------
; J強K

[Statedef 651]
type = A
anim=651
movetype = A
physics = A
poweradd = 50
ctrl = 0

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,5
volume = 50

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(18) > 1 && var(17) > 0
var(6) = 1

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 200]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * -0.3


[State 620, HitDef]
type = HitDef
trigger1 = !var(6) && AnimElem = 3
attr = A, NA
animtype = Back
air.animtype = back
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -9,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(6) && AnimElem = 3
attr = A, NA
animtype = Back
air.animtype = back
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -9,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 651
triggerall = floor (pos Y < -155)
trigger1 = animelem = 5
value = 1221
ctrl = 1


 ;---------------------------------------------------------------------------
; J強K

[Statedef 652]
type = A
anim=652
movetype = A
physics = A
poweradd = 50
ctrl = 0

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,5
volume = 50

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(6)
trigger1 = var(18) > 1 && var(17) > 0
var(6) = 1

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
y = (Vel y) * -2.6

[State 200]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 6xx, Fix V]
type = VelSet
triggerall = movecontact
trigger1 = time = 0
trigger1 = PrevstateNo = 112
x = (Vel X) * -0.3

[State 620, HitDef]
type = HitDef
trigger1 = !var(6) && AnimElem = 2
attr = A, NA
animtype = Back
air.animtype = back
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -13,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 620, HitDef]
type = HitDef
trigger1 = var(6) && AnimElem = 2
attr = A, NA
animtype = Back
air.animtype = back
damage =  10*ifelse(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(13*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1)
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
givepower= 35
pausetime = 9, 9
guard.pausetime = 8,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -13,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 91, VelAdd]
type = VelAdd
triggerall = movecontact
trigger1 = floor (pos Y < -155)
y= -0.10

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 652
triggerall = floor (pos Y < -155)
trigger1 = animelem = 4
value = 1221
ctrl = 1

; 画面外演出 
[Statedef 710]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(4) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100

;----------------------------------------------------------------------------------
;投げ
;----------------------------------------------------------------------------------
[Statedef 800]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = ifelse(p2statetype!=A,800,801)


[State 800, 1]
type = HitDef
Triggerall = var(59)<=0
Triggerall = NumEnemy>=1
Triggerall = enemynear,ctrl = 1
Trigger1 = Time = 0
attr = S, NT
hitflag = MA
priority = 7, miss
sparkno = -1
sprpriority = 1
p1facing = ifelse (command = "holdfwd", 1, -1)
p2facing = 1
fall.xvelocity = 0
fall.yvelocity = 0
p1stateno = 810
p2stateno = 820
hitsound = S5,4
fall = 1
fall.recover=0
fall.damage = 7*floor(12*(1+(fvar(4)-4)/10*1.25))
yaccel=.7

[State 800, 1]
type = HitDef
Triggerall = var(59)>0||var(58)>=2
Triggerall = NumEnemy>=1
Triggerall = enemynear,ctrl = 1
Trigger1 = Time = 0
attr = S, NT
hitflag = MA
priority = 7, miss
sparkno = -1
sprpriority = 1
p1facing = ifelse (facing*(helper(30000+id+(facing=-1)*10),pos x-pos x)<-facing*(helper(30000+id+(facing=1)*10),pos x-pos x), 1, -1)
p2facing = 1
fall.xvelocity = 0
fall.yvelocity = 0
p1stateno = 810
p2stateno = 820
hitsound = S5,4
fall = 1
fall.recover=0
fall.damage = 7*floor(12*(1+(fvar(4)-4)/10*1.25))
yaccel=.7

[State 800, 1]
type = HitDef
Triggerall = var(59)<=0
Triggerall = NumEnemy>=1
Triggerall = enemynear,ctrl = 0
Trigger1 = Time = 0
attr = S, NT
hitflag = MA
priority = 7, miss
sparkno = -1
sprpriority = 1
p1facing = ifelse (command = "holdfwd", 1, -1)
p2facing = 1
fall.xvelocity = 0
fall.yvelocity = 0
p1stateno = 810
p2stateno = 822
hitsound = S5,4
fall = 1
fall.recover=0
fall.damage = 7*floor(12*(1+(fvar(4)-4)/10*1.25))
yaccel=.7

[State 800, 1]
type = HitDef
Triggerall = var(59)>0||var(58)>=2
Triggerall = NumEnemy>=1
Triggerall = enemynear,ctrl = 0
Trigger1 = Time = 0
attr = S, NT
hitflag = MA
priority = 7, miss
sparkno = -1
sprpriority = 1
p1facing = ifelse (facing*(helper(30000+id+(facing=-1)*10),pos x-pos x)<-facing*(helper(30000+id+(facing=1)*10),pos x-pos x), 1, -1)
p2facing = 1
fall.xvelocity = 0
fall.yvelocity = 0
p1stateno = 810
p2stateno = 822
hitsound = S5,4
fall = 1
fall.recover=0
fall.damage = 7*floor(12*(1+(fvar(4)-4)/10*1.25))
yaccel=.7

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 800, 2]
type = ChangeState
trigger1 = var(59)<=0
trigger1 = movecontact = 0 && time > 2
value = 210

[State 800, 2]
type = ChangeState
trigger1 = var(59)>0
trigger1 = movecontact = 0 && time > 0
value = 0
ctrl=1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;----------------------------------------------------------------------
[Statedef 810]
type = S
movetype= A
physics = N
anim = 810
poweradd = 60

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(-5*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 810, edge]
type = width
trigger1 = Time = 0
edge = 30,30

[State 810]
type = ChangeState
Triggerall = NumEnemy>=1
trigger1 = enemynear,stateno = 889
value = 888;投げ抜けられ

[State 810, 1]
type = TargetBind
trigger1 = Time = 0
pos = -40,0

[State 810, 2]
type = TargetBind
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(3) < 0)
pos = -39,0

[State 810, 3]
type = TargetBind
trigger1 = (AnimElemTime(3) >= 0) && (AnimElemTime(4) < 0)
pos = -3,0

[State 810, 4]
type = TargetBind
trigger1 = (AnimElemTime(4) >= 0) && (AnimElemTime(5) < 0)
pos = 19,0

[State 810, 5]
type = TargetBind
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(6) < 0)
pos = 88,-3

[State 810, 6]
type = TargetBind
trigger1 = (AnimElemTime(6) >= 0) && (AnimElemTime(6) < 4)
pos = 88,-3

[State 810, 7]
type = TargetState
trigger1 = AnimElemTime(6) = 4
value = 821


[State 810, 8]
type = EnvShake
trigger1 = AnimElemTime(5) = 2
time = 15
freq = 70
ampl = -4

[State 810, 8]
type = Explod
trigger1 = AnimElemTime(5) = 2
anim = 8010
scale = 0.81,0.81
postype = P2
pos = 0,10
sprpriority = 3


[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(6) = 0
value = -18*floor(15*(1+(fvar(4)-4)/10*1.25))

[State 810, s]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 810, s]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 810, s]
type = null;PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 1,2

[State 810, 2]
type = PlaySnd
trigger1 = AnimElemTime(5) = 2
value = 0,8

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 820]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority=4


[State 810, SprPriority 1]
type = SprPriority
trigger1 = AnimElemTime(2) = 0
value = 3

[State 810, SprPriority 2]
type = SprPriority
trigger1 = AnimElemTime(5) = 0
value = 0

[State 0, SelfState]
type = SelfState
Triggerall = NumEnemy>=1
trigger1 = enemy,stateno !=810
value = 5050


[State 820, 1]
type = changestate
triggerall = time = [0,4]
triggerall = command = "holdfwd" || command = "holdback" || command = "holddown"
trigger1 = command = "y"
trigger2 = command = "z"
trigger3 = command = "b"
trigger4 = command = "c"
value = 889

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;----------------------------------------------------------------------
[Statedef 822]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority=4

[State 0, SelfState]
type = SelfState
Triggerall = NumEnemy>=1
trigger1 = enemy,stateno !=810
value = 5050

[State 810, SprPriority 1]
type = SprPriority
trigger1 = AnimElemTime(2) = 0
value = 3

[State 810, SprPriority 2]
type = SprPriority
trigger1 = AnimElemTime(5) = 0
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 820, 1]
type =null; changestate
triggerall = time = [0,4]
triggerall = command = "holdfwd"
trigger1 = command = "y"
trigger2 = command = "z"
value = 889

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;----------------------------------------------------------------------

[Statedef 821]
type    = A
movetype= H
physics = N
velset = -12,-10.5
ctrl = 0
anim = 5030

[State 9022, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA


[State 9022, ChangeAnim2]
type = ChangeAnim
trigger1 = anim = 5030 && selfanimexist(5035) && animtime = 0
value = 5035

[State 9022, ChangeAnim2]
type = ChangeAnim
trigger1 = anim = 5035 && animtime = 0
value = 5050

[State 9012, VelAdd]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 9022, SelfState]
type = SelfState
trigger1 = time = 18
value = ifelse(alive,5040,5050)

;----------------------------------------------------------------------
[Statedef 888];抜けられ
type = S
movetype = I
physics = S
velset = -8,0
facep2 = 1
anim = 106

[State 820, 1]
type = playsnd
trigger1 = time = 1
value = S121,0

[State 820, 2]
type = nothitby
trigger1 = 1
value = SCA


[State 820, 2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl=1

;----------------------------------------------------------------------
[Statedef 887];抜けられ空中
type = A
movetype = I
physics = N
velset = -4,-2
facep2 = 1

[State 820, 1]
type = playsnd
trigger1 = time = 1
value = S121,0

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5040

[State 820, 2]
type = nothitby
trigger1 = time=0
value = SCA
time=16

[State 820, 2]
type = SelfState
trigger1 = time >15
value = 50
ctrl=1

;----------------------------------------------------------------------
[Statedef 889];抜け
type = A
movetype = H
physics = N
velset = -4,-10
facep2 = 1

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5040

[State 820, 2]
type = nothitby
trigger1 = time=0
value = SCA
time=17

[State 820, 2]
type = SelfState
trigger1 = time >18
value = 50
ctrl=1

;-------------------------------------------------------------
[Statedef 840]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = ifelse(p2statetype!=A,800,801)


[State 800, 1]
type = HitDef
Trigger1 = var(59)<=0
Trigger1 = Time = 0
attr = S, NT
hitflag = MA
priority = 7, miss
sparkno = -1
sprpriority = 1
p1facing = ifelse (command = "holdfwd", -1, 1)
p2facing = 1
fall.xvelocity = 0
fall.yvelocity = 0
p1stateno = 841
p2stateno = 850
hitsound = S5,4
fall = 1
fall.recover=0
fall.damage = 7*floor(12*(1+(fvar(4)-4)/10*1.25))
yaccel=.7

[State 800, 1]
type = HitDef
Trigger1 = var(59)>0||var(58)>=2
Trigger1 = Time = 0
attr = S, NT
hitflag = MA
priority = 7, miss
sparkno = -1
sprpriority = 1
p1facing = ifelse (facing*(helper(30000+id+(facing=-1)*10),pos x-pos x)<-facing*(helper(30000+id+(facing=1)*10),pos x-pos x), -1, 1)
p2facing = 1
fall.xvelocity = 0
fall.yvelocity = 0
p1stateno = 841
p2stateno = 850
hitsound = S5,4
fall = 1
fall.recover=0
fall.damage = 7*floor(12*(1+(fvar(4)-4)/10*1.25))
yaccel=.7

[State 800, 2]
type = ChangeState
trigger1 = var(59)<=0
trigger1 = movecontact = 0 && time > 1
value = 250

[State 800, 2]
type = ChangeState
trigger1 = var(59)>0
trigger1 = movecontact = 0 && time > 0
value = 0
ctrl=1

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;----------------------------------------------------------------------
[Statedef 841]
type = S
movetype= A
physics = N
anim = 840
poweradd = 56

[state -3];
type = Width
Trigger1=time=0
edge=30,40


[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(-15*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 810]
type =ChangeState
Triggerall = NumEnemy>=1
trigger1 = enemynear,stateno = 889
value = 888;投げ抜けられ

[State 841,1]
type = SprPriority
trigger1 = AnimElemTime(6) = 0
value = 0

[State 841, 2]
type = TargetBind
trigger1 = Time = 0
pos = 42,0

[State 841, 3]
type = TargetBind
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(3) < 0)
pos = 39,0

[State 841, 5]
type = TargetBind
trigger1 = (AnimElemTime(3) >= 0) && (AnimElemTime(4) < 0)
pos = 6,-2

[State 841, 6]
type = TargetBind
trigger1 = (AnimElemTime(4) >= 0) && (AnimElemTime(5) < 0)
pos = 3,-2

[State 841, 7]
type = TargetBind
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(6) < 0)
pos = -11,-2

[State 841, 8]
type = TargetState
trigger1 = AnimElemTime(6) = 0
value = 852

[State 841, s]
type = PlaySnd
trigger1 = AnimElemTime(1) = 10
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 841, s]
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 821, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(6) = 0
value = -12*floor(15*(1+(fvar(4)-4)/10*1.25))

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 850]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = changestate
triggerall = time = [0,4]
triggerall = command = "holdfwd" || command = "holdback" || command = "holddown"
trigger1 = command = "y"
trigger2 = command = "z"
trigger3 = command = "b"
trigger4 = command = "c"
value = 889

[State 830, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(4) = 0
value = 3

[State 830, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 850

[State 0, SelfState]
type = SelfState
Triggerall = NumEnemy>=1
trigger1 = enemy,stateno !=841
value = 5050

;----------------------------------------------------------------------
[Statedef 851]
type    = A
movetype= H
physics = N
velset = 0,0

[State 830, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(4) = 0
value = 3

[State 830, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 850

[State 0, SelfState]
type = SelfState
Triggerall = NumEnemy>=1
trigger1 = enemy,stateno !=841
value = 5050

;----------------------------------------------------------------------

[Statedef 852]
type    = A
movetype= H
physics = N
velset = 1.8,-20
poweradd = 60
sprpriority = 0

[State 831, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.8

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 831, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 11
y = -32

[State 852,  1]
type = ChangeAnim
trigger1 = (Time = 0) && (SelfAnimExist(5051))
value = 5051

[State 852, 2]
type = ChangeAnim
trigger1 = (Vel Y >= 0) && (SelfAnimExist(5061)) && (Anim != 5061)
value = 5061

[State 852, 3]
type = ChangeAnim2
trigger1 = (Time = 0) && (!SelfAnimExist(5051))
value = 851

[State 852, 4]
type = ChangeAnim2
trigger1 = (Vel Y >= 0) && (!SelfAnimExist(5061)) && (Anim != 832)
value = 852

[State 9022, SelfState]
type = SelfState
trigger1 = time = 24
value = ifelse(alive,5040,5050)

;-------------------------------------------------------------
[Statedef 860]
type = A
movetype= A
physics = A
juggle = 0
ctrl = 0
anim = 860

[State 800, 1]
type = HitDef
Trigger1 = var(59)<=0
Trigger1 = animelem = 1
attr = A, SA
guardflag = -
hitflag = A
priority = 7, Miss
sparkno = -1
sprpriority = 1
p1facing = ifelse (command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 861
p2stateno = 870
hitsound = S5,4
fall = 1
fall.recover=0
fall.damage=7*floor(10*(1+(fvar(4)-4)/10*1.25))



[State 800, 1]
type = HitDef
Trigger1 = var(59)>0||var(58)>=2
Trigger1 = animelem = 1
attr = A, SA
guardflag = -
hitflag = A
priority = 7, Miss
sparkno = -1
sprpriority = 1
p1facing = ifelse (facing*(helper(30000+id+(facing=-1)*10),pos x-pos x)<-facing*(helper(30000+id+(facing=1)*10),pos x-pos x), 1, -1)
p2facing = 1
p1stateno = 861
p2stateno = 870
hitsound = S5,4
fall = 1
fall.recover=0
fall.damage=7*floor(10*(1+(fvar(4)-4)/10*1.25))

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0


[State 800, 2]
type = ChangeState
trigger1 = movecontact = 0 && time > 2
value = 620


[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;----------------------------------------------------------------------
[Statedef 861]
type = A
movetype= A
physics = N
anim = 861
poweradd = 56
velset = 0,0
sprpriority = 0

[State 810]
type = ChangeState
Triggerall = NumEnemy>=1
trigger1 = enemynear,stateno = 889
value = 887;投げ抜けられ


[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(-15*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 861, 1]
type = TargetBind
trigger1 = Time = 0
pos = 10,0

[State 861,2]
type = TargetBind
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(3) < 0)
pos = 10,0

[State 861,3]
type = TargetBind
trigger1 = (AnimElemTime(3) >= 0) && (AnimElemTime(4) < 0)
pos = 10,0

[State 861,4]
type = TargetBind
trigger1 = (AnimElemTime(4) >= 0) && (AnimElemTime(5) < 0)
pos = 10,0

[State 861,5]
type = TargetState
trigger1 = AnimElemTime(5) = 0
value = 871

[State 861, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(5) = 0
value = -11*floor(17*(1+(fvar(4)-4)/10*1.25))

[State 861, Width]
type = Width
trigger1 = AnimElemTime(1) >= 0
edge = 40,0

[State 851, Yell]
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 851, Yell]
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 851, Hit Sound]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 5,1

[State 851, Hit Explod]
type = Explod
trigger1 = AnimElemTime(5) = 0
anim = 8001
scale = 0.5,0.5
postype = P1
pos = 10,-90
sprpriority = 5

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 1221
ctrl = 1

;----------------------------------------------------------------------
[Statedef 870]
type = A
movetype = H
physics = N
velset = 0,0
poweradd = 56
sprpriority = -1

[State 820, 1]
type = changestate
triggerall = time = [0,4]
triggerall = command = "holdfwd" || command = "holdback" || command = "holddown"
trigger1 = command = "y"
trigger2 = command = "z"
trigger3 = command = "b"
trigger4 = command = "c"
value = 889


[State 860, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(1) = 2
value = 1

[State 860, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 870

;----------------------------------------------------------------------
[Statedef 871]
type = A
movetype = H
physics = N
velset = 0,0
poweradd = 56
sprpriority = -1

[State 872, ]
type = VelSet
trigger1 = Time = 0
y = 33

[State 860, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(1) = 2
value = 1

[State 860, ChangeAnim2]
type = ChangeAnim2
trigger1 = 1
value = 871

[State 872, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4

[State 0, SelfState]
type = SelfState
trigger1 = time>2
value = 5050
;----------------------------------------------------------------------
[Statedef 872]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 1

[State 872,]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 872, Turn]
type = Turn
trigger1 = Time = 0

[State 872, EnvShake]
type = EnvShake
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4

[State 872, ]
type = PosAdd
trigger1 = Time = 0
x = -23
y = -44

[State 872, ]
type = VelSet
trigger1 = Time = 1
y = 33

[State 872, ]
type = null;VelAdd
trigger1 = 1
y = 0.39

[State 872, ChangeAnim2]
type = ChangeAnim2
trigger1 = 1
value = 871

[State 872, SprPriority]
type = SprPriority
trigger1 = Pos Y >= 0
value = 0

[State 9002, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 5110

;-------------------------------------------------------------------------------
;必殺技
;-------------------------------------------------------------------------------

;-------------------------------------------------------------------------------
;波動
;-------------------------------------------------------------------------------
; 弱
[Statedef 1000]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 0
velset = 0, 0
poweradd = 91
anim=1000

[State 1000, Shield VarSet]
type = VarSet
trigger1 = (AnimElemTime(7) = 0) && (MoveContact = 0)
v = 50
value = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1040, 6]
type = PlaySnd
trigger1 = time=1
value = 1450,0
volume = 255
volumescale = 255
channel = 0

[State 1040, 6]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = 1450,1
volume = 175
volumescale = 175

[State 1040, 6]
type = HitDef
trigger1 = time=0
attr = S, SA
hitflag = MAFD
guardflag = MA
priority = 5, Hit
animtype = Hard
pausetime = 1, 8
damage = 7*ifelse(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10, -23
hitsound = S5,2
guardsound = S6, 0
ground.type = high
ground.hittime = 18
ground.slidetime = 18
ground.velocity = -10
air.velocity = -11, -2
airguard.velocity = -8.5,3
air.hittime = 5
guard.slidetime = 11 
down.velocity = -4,-7
guard.slidetime = 11 
guard.hittime = 15
guard.velocity = -15
givepower = 56
getpower = 35,35
yaccel = 0.99
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 0
id = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1040, 10]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 中
[Statedef 1010]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 0
velset = 0, 0
poweradd = 91
anim=1010

[State 1000, Shield VarSet]
type = VarSet
trigger1 = (AnimElemTime(7) = 0) && (MoveContact = 0)
v = 50
value = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1040, 6]
type = PlaySnd
trigger1 = time=1
value = 1450,0
volume = 255
volumescale = 255
channel = 0

[State 1040, 6]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = 1450,1
volume = 175
volumescale = 175


[State 1040, 6]
type = HitDef
trigger1 = time=0
attr = S, SA
hitflag = MAFD
guardflag = MA
priority = 5, Hit
animtype = Hard
pausetime = 1, 8
damage = 7*ifelse(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10, -63
hitsound = S5,2
guardsound = S6, 0
ground.type = high
ground.hittime = 18
ground.slidetime = 18
ground.velocity = -10
air.velocity = -11, -2
airguard.velocity = -8.5,3
air.hittime = 5
guard.slidetime = 11 
guard.slidetime = 11 
guard.hittime = 15
guard.velocity = -15
givepower = 56
getpower = 35,35
yaccel = 0.99
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 0
id = 1+4
down.velocity = -4,-5.5

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1040, 10]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;大
[Statedef 1020]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 0
velset = 0, 0
poweradd = 91
anim=1020

[State 1000, Shield VarSet]
type = VarSet
trigger1 = (AnimElemTime(8) = 0) && (MoveContact = 0)
v = 50
value = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1040, 6]
type = PlaySnd
trigger1 = time=1
value = 1450,0
volume = 255
volumescale = 255
channel = 0

[State 1040, 6]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = 1450,1
volume = 175
volumescale = 175

[State 1040, 6]
type = HitDef
trigger1 = time=0
attr = S, SA
hitflag = MAFD
guardflag = MA
priority = 5, Hit
animtype = Hard
pausetime = 1, 8
damage = 7*ifelse(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10, -70
hitsound = S5,2
guardsound = S6, 0
ground.type = high
ground.hittime = 18
ground.slidetime = 18
ground.velocity = -10
air.velocity = -11, -2
airguard.velocity = -8.5,3
air.hittime = 5
guard.slidetime = 11 
guard.hittime = 15
guard.velocity = -15
givepower = 56
getpower = 56,56
yaccel = 0.99
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 0
id = 1+4
down.velocity = -4,-5.5

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1040, 10]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 空波動小

[Statedef 1200]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 91
anim = 1200
ctrl = 0
sprpriority = 2

[State 1100, ]
type = VarSet
trigger1 = (AnimElemTime(7) = 0) && (MoveContact = 0)
v = 50
value = 0

[State 1100, VelSet]
type = VelSet
triggerall = Var(41) = 0
trigger1 = (Time = 0) && (Vel Y <0)
y = -0.4

[State 1100, VelSet]
type = VelSet
triggerall = Var(41) = 1
trigger1 = (Time = 0) && (Vel Y <0)
y = -1

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel x <0)
x = -.2

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel x >0)
x = .2

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel Y >=0)
y = 2

[State 1100, VelSet]
type = VelSet
trigger1 = (Pos Y >= 10)
x = 0
y = 0

[State 1040, 6]
type = PlaySnd
trigger1 = time=1
value = 1450,0
volume = 255
volumescale = 255
channel = 0

[State 1040, 6]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = 1450,1
volume = 175
volumescale = 175

[State 1040, 6]
type = HitDef
trigger1 = time=0
attr = S, SA
hitflag = MAFD
guardflag = MA
priority = 5, Hit
animtype = Hard
pausetime = 2, 7
damage = 7*ifelse(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10, -23
hitsound = S5,2
guardsound = S6, 0
ground.type = high
ground.hittime = 18
ground.slidetime = 18
ground.velocity = -10
air.velocity = -7, -3
airguard.velocity = -8.5,3
air.hittime = 5
fall.recovertime=11
guard.slidetime = 11 
guard.hittime = 15
guard.velocity = -15
givepower = 56
getpower = 35,35
yaccel = 0.99
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 600, 3]
type = changestate
trigger1 = var(41) = 1
trigger1 = animtime = -1
value = 1221
ctrl = 1

[state 600, 3]
type = changestate
trigger1 = animtime = 0
value = 1221
ctrl = 0


;---------------------------------------------------------------------------
; 空波動中

[Statedef 1210]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 91
anim = 1210
ctrl = 0
sprpriority = 2

[State 1100, ]
type = VarSet
trigger1 = (AnimElemTime(7) = 0) && (MoveContact = 0)
v = 50
value = 0

[State 1100, VelSet]
type = VelSet
triggerall = Var(41) = 0
trigger1 = (Time = 0) && (Vel Y <0)
y = -0.4

[State 1100, VelSet]
type = VelSet
triggerall = Var(41) = 1
trigger1 = (Time = 0) && (Vel Y <0)
y = -1

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel x <0)
x = -.2

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel x >0)
x = .2

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel Y >=0)
y = 2

[State 1100, VelSet]
type = VelSet
trigger1 = (Pos Y >= 10)
x = 0
y = 0

[State 1040, 6]
type = PlaySnd
trigger1 = time=1
value = 1450,0
volume = 255
volumescale = 255
channel = 0

[State 1040, 6]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = 1450,1
volume = 175
volumescale = 175


[State 1040, 6]
type = HitDef
trigger1 = time=0
attr = S, SA
hitflag = MAFD
guardflag = MA
priority = 5, Hit
animtype = Hard
pausetime = 2, 7
damage = 7*ifelse(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10, -23
hitsound = S5,2
guardsound = S6, 0
ground.type = high
ground.hittime = 18
ground.slidetime = 18
ground.velocity = -10
air.velocity = -7, -3
airguard.velocity = -8.5,3
air.hittime = 5
fall.recovertime=11
guard.slidetime = 11 
guard.hittime = 15
guard.velocity = -15
givepower = 56
getpower = 35,35
yaccel = 0.99
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 600, 3]
type = changestate
trigger1 = var(41) = 1
trigger1 = animtime = -1
value = 1221
ctrl = 1

[state 600, 3]
type = changestate
trigger1 = animtime = 0
value = 1221
ctrl = 0
;---------------------------------------------------------------------------
; 空波動大

[Statedef 1220]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 91
anim = 1220
ctrl = 0
sprpriority = 2

[State 1100, ]
type = VarSet
trigger1 = (AnimElemTime(7) = 0) && (MoveContact = 0)
v = 50
value = 0


[State 1100, VelSet]
type = VelSet
triggerall = Var(41) = 0
trigger1 = (Time = 0) && (Vel Y <0)
y = -0.4

[State 1100, VelSet]
type = VelSet
triggerall = Var(41) = 1
trigger1 = (Time = 0) && (Vel Y <0)
y = -1

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel x <0)
x = -.2

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel x >0)
x = .2

[State 1100, VelSet]
type = VelSet
trigger1 = (Time = 0) && (Vel Y >=0)
y = 2

[State 1100, VelSet]
type = VelSet
trigger1 = (Pos Y >= 10)
x = 0
y = 0

[State 1040, 6]
type = PlaySnd
trigger1 = time=1
value = 1450,0
volume = 255
volumescale = 255
channel = 0

[State 1040, 6]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = 1450,1
volume = 175
volumescale = 175


[State 1040, 6]
type = HitDef
trigger1 = time=0
attr = S, SA
hitflag = MAFD
guardflag = MA
priority = 5, Hit
animtype = Hard
pausetime = 2, 7
damage = 7*ifelse(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(17*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10, -23
hitsound = S5,2
guardsound = S6, 0
ground.type = high
ground.hittime = 18
ground.slidetime = 18
ground.velocity = -10
air.velocity = -7, -3
airguard.velocity = -8.5,3
air.hittime = 5
fall.recovertime=11
guard.slidetime = 11 
guard.hittime = 15
guard.velocity = -15
givepower = 56
getpower = 35,35
yaccel = 0.99
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 600, 3]
type = changestate
trigger1 = var(41) = 1
trigger1 = animtime = -1
value = 1221
ctrl = 1

[state 600, 3]
type = changestate
trigger1 = animtime = 0
value = 1221
ctrl = 0

;---------------------------------------------------------------------------
; チャージ小

[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 1300
poweradd = 56
velset = 0,0
sprpriority = 2

[State 1300]
type = nothitby
triggerall = Var(50) = 1
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(12) < 0)
value = SCA, NP, SP, HP, NT, ST, HT 
time = 1

;//当てたら延長
[State 1300]
type = nothitby
triggerall = Var(50) = 1
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(13) < 0)
value = SCA, NP, SP, HP, NT, ST, HT 
time = 1

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1300, ]
type =VelSet
trigger1 = AnimElemTime(5) = 0
trigger2 = NumHelper(1300)>=1
trigger2 = (Var(50) = 1)&& (helper(1300), StateNo = 1330)
x = 4

[State 1300, ]
type = VelSet
trigger1 = NumHelper(1300)>=1
trigger1 = (helper(1300), StateNo = 1335)
x = 0

[State 1300, ]
type =Veladd
trigger1 = AnimElemTime(5) = 0
trigger2 = NumHelper(1300)>=1
trigger2 = (Var(50) = 1)&& (helper(1300), StateNo = 1330)
x = 5

[State 1300, ]
type = Veladd
trigger1 = NumHelper(1300)>=1
trigger1 = (helper(1300), StateNo = 1335)
x = 0


[State 1300, VelSet End]
type = VelSet
trigger1 = AnimElemTime(12) = 0
x = 1.8

[State 1300, Width]
type = Width
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(12) < 0)
value = 15,0

[State 1300, S]
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = 1480,0
volume = 255
volumescale = 255
channel = 0

[State 1300, ]
type =HitDef
trigger1 = (AnimElemTime(4) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 8*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
air.animtype = back
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.hittime  = 15
guard.slidetime = 12
guard.hittime = 15
air.hittime = 5
fall.recovertime=35
airguard.velocity = -8.5,3
ground.velocity = -9,-5
guard.velocity = -10
air.type = Low
air.velocity = -9,-8
down.bounce = 1
down.velocity = -4,-4
givepower = 35
fall = 1
air.fall = 1
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 2+4

[State 1300, ]
type = HitDef
trigger1 = (AnimElemTime(5) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 13*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 33
ground.hittime  = 13
air.hittime = 24
fall.recovertime=24
ground.velocity = -6,-16
guard.velocity = -10
guard.slidetime = 12
guard.hittime = 15
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -6,-16
down.bounce = 1
down.velocity = -4,-4
givepower = 35
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 1+4

[State 1300, ]
type =HitDef
trigger1 = (AnimElemTime(4) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 8*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
air.animtype = back
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.hittime  = 15
guard.slidetime = 12
guard.hittime = 15
air.hittime = 5
fall.recovertime=35
airguard.velocity = -8.5,3
ground.velocity = -9,-5
guard.velocity = -10
air.type = Low
air.velocity = -9,-8
down.bounce = 1
down.velocity = -4,-4
givepower = 35
fall = 1
air.fall = 1
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 2+4

[State 1300, ]
type = HitDef
trigger1 = (AnimElemTime(5) = 0) && (MoveContact = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 13*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 33
ground.hittime  = 13
air.hittime = 23
fall.recovertime=23
ground.velocity = -6,-16
guard.velocity = -10
guard.slidetime = 12
guard.hittime = 15
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -6,-16
down.bounce = 1
down.velocity = -4,-4
givepower = 35
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 22000
id = 23001
postype = P1
scale = .83,1.07
pos = 0,7
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23001
id = 23001
postype = P1
scale = .83,1.07
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23002
id = 23001
postype = P1
scale = .83,1.07
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23003
id = 23001
scale = .83,1.07
postype = P1
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = RemoveExplod
trigger1 = AnimElemTime(12) >= 0
id = 23001

[State 1400, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; チャージ中

[Statedef 1310]
type    = S
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 1310
poweradd = 56
velset = 0,0
sprpriority = 2

[State 1300,]
type = nothitby
triggerall = Var(50) = 1
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(15) < 0)
value = SCA, NP, SP, HP, NT, ST, HT 
time = 1

;//当てたら延長
[State 1300]
type = nothitby
triggerall = Var(50) = 1
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(13) < 0)
value = SCA, NP, SP, HP, NT, ST, HT 
time = 1

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1300, ]
type =VelSet
trigger1 = AnimElemTime(5) = 0
trigger2 = NumHelper(1300)>=1
trigger2 = (Var(50) = 1)&& (helper(1300), StateNo = 1330)
x = 3

[State 1300, ]
type = VelSet
trigger1 = NumHelper(1300)>=1
trigger1 = (helper(1300), StateNo = 1335)
x = 0

[State 1300, ]
type =Veladd
trigger1 = AnimElemTime(5) = 0
trigger2 = NumHelper(1300)>=1
trigger2 = (Var(50) = 1)&& (helper(1300), StateNo = 1330)
x = 6

[State 1300, ]
type = Veladd
trigger1 = NumHelper(1300)>=1
trigger1 = (helper(1300), StateNo = 1335)
x = 0

[State 1300, VelSet End]
type = VelSet
trigger1 = AnimElemTime(15) = 0
x = 1.8

[State 1300, Width]
type = Width
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(15) < 0)
value = 15,0

[State 1300, S]
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = 1480,0
volume = 255
volumescale = 255
channel = 0

[State 1300, ]
type =HitDef
trigger1 = (AnimElemTime(4) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 8*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
air.animtype = back
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.hittime  = 15
guard.slidetime = 12
guard.hittime = 15
air.hittime = 5
fall.recovertime=35
airguard.velocity = -8.5,3
ground.velocity = -9,-5
guard.velocity = -10
air.type = Low
air.velocity = -9,-8
down.bounce = 1
down.velocity = -4,-4
givepower = 35
fall = 1
air.fall = 1
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 2+4

[State 1300, ]
type = HitDef
trigger1 = (AnimElemTime(5) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 13*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 33
ground.hittime  = 13
air.hittime = 24
fall.recovertime=24
ground.velocity = -8,-19
guard.velocity = -10
guard.slidetime = 12
guard.hittime = 15
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -8,-19
down.bounce = 1
down.velocity = -4,-4
givepower = 35
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 1+4

[State 1300, ]
type =HitDef
trigger1 = (AnimElemTime(4) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 8*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
air.animtype = back
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.hittime  = 15
guard.slidetime = 12
guard.hittime = 15
air.hittime = 5
fall.recovertime=35
airguard.velocity = -8.5,3
ground.velocity = -9,-5
guard.velocity = -10
air.type = Low
air.velocity = -9,-8
down.bounce = 1
down.velocity = -4,-4
givepower = 35
fall = 1
air.fall = 1
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 2+4

[State 1300, ]
type = HitDef
trigger1 = (AnimElemTime(5) = 0) && (MoveContact = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 13*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 8,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 33
ground.hittime  = 13
air.hittime = 23
fall.recovertime=23
ground.velocity = -8,-19
guard.velocity = -10
guard.slidetime = 12
guard.hittime = 15
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -8,-19
down.bounce = 1
down.velocity = -4,-4
givepower = 35
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 22000
id = 23001
postype = P1
scale = .83,1.07
pos = 0,7
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23001
id = 23001
postype = P1
scale = .83,1.07
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23002
id = 23001
postype = P1
scale = .83,1.07
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23003
id = 23001
scale = .83,1.07
postype = P1
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = RemoveExplod
trigger1 = AnimElemTime(15) >= 0
id = 23001

[State 1400, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; チャージ大

[Statedef 1320]
type    = S
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 1310
poweradd = 56
velset = 0,0
sprpriority = 2

[State 1300, ]
type = nothitby
triggerall = Var(50) = 1
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(15) < 0)
value = SCA, NP, SP, HP, NT, ST, HT
time = 1

;//当てたら延長
[State 1300]
type = nothitby
triggerall = Var(50) = 1
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(15) < 0)
value = SCA, NP, SP, HP, NT, ST, HT 
time = 1

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1300, ]
type =VelSet
trigger1 = AnimElemTime(5) = 0
trigger2 = NumHelper(1300)>=1
trigger2 = (Var(50) = 1)&& (helper(1300), StateNo = 1330)
x = 3

[State 1300, ]
type = VelSet
trigger1 = NumHelper(1300)>=1
trigger1 = (helper(1300), StateNo = 1335)
x = 0

[State 1300, ]
type =Veladd
trigger1 = AnimElemTime(5) = 0
trigger2 = NumHelper(1300)>=1
trigger2 = (Var(50) = 1)&& (helper(1300), StateNo = 1330)
x = 7

[State 1300, ]
type = Veladd
trigger1 = NumHelper(1300)>=1
trigger1 = (helper(1300), StateNo = 1335)
x = 0

[State 1300, VelSet End]
type = VelSet
trigger1 = AnimElemTime(15) = 0
x = 1.8

[State 1300, Width]
type = Width
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(15) < 0)
value = 15,0

[State 1300, S]
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = 1480,0
volume = 255
volumescale = 255
channel = 0

[State 1300, ]
type =HitDef
trigger1 = (AnimElemTime(4) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 8*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
air.animtype = back
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.hittime  = 15
guard.slidetime = 12
guard.hittime = 15
air.hittime = 5
fall.recovertime=35
airguard.velocity = -8.5,3
ground.velocity = -9,-5
guard.velocity = -10
air.type = Low
air.velocity = -9,-8
down.bounce = 1
down.velocity = -4,-4
givepower = 35
fall = 1
air.fall = 1
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 2+4

[State 1300, ]
type = HitDef
trigger1 = (AnimElemTime(5) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 13*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 33
ground.hittime  = 13
air.hittime = 24
fall.recovertime=24
ground.velocity = -11,-25
guard.velocity = -10
guard.slidetime = 12
guard.hittime = 15
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -11,-25
down.bounce = 1
down.velocity = -4,-4
givepower = 35
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 1+4

[State 1300, ]
type =HitDef
trigger1 = (AnimElemTime(4) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 8*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
air.animtype = back
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.hittime  = 15
guard.slidetime = 12
guard.hittime = 15
air.hittime = 5
fall.recovertime=35
airguard.velocity = -8.5,3
ground.velocity = -9,-5
guard.velocity = -10
air.type = Low
air.velocity = -9,-8
down.bounce = 1
down.velocity = -4,-4
givepower = 35
fall = 1
air.fall = 1
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 2+4

[State 1300, ]
type = HitDef
trigger1 = (AnimElemTime(5) = 0) && (MoveContact = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 13*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-65
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.slidetime = 33
ground.hittime  = 13
air.hittime = 23
fall.recovertime=23
ground.velocity = -11,-25
guard.velocity = -10
guard.slidetime = 12
guard.hittime = 15
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -11,-25
down.bounce = 1
down.velocity = -4,-4
givepower = 35
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 22000
id = 23001
postype = P1
scale = .83,1.07
pos = 0,7
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23001
id = 23001
postype = P1
scale = .83,1.07
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23002
id = 23001
postype = P1
scale = .83,1.07
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = Explod
trigger1 = (AnimElemTime(5) = 0)
anim = 23003
id = 23001
scale = .83,1.07
postype = P1
pos = 0,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1

[State 1300, ]
type = RemoveExplod
trigger1 = AnimElemTime(15) >= 0
id = 23001

[State 1400, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 飛び道具ガード

[Statedef 1330]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 1330
sprpriority = -5


[State 1330]
type = HitOverRide
trigger1 = 1
attr = SCA, AA, AT, AP, NA, NT, NP, HA, HT, HP
slot = 0
stateno = 1331
time = -1

[State 1330]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = 1

[State 1330]
type = BindToParent
trigger1 = 1
facing = 1
pos = 0,0
time = -1

[State 1330]
type = DestroySelf
trigger1 = (parent, StateNo = 1300) && (parent, AnimElemTime(12) >= 0)
trigger2 = (parent, StateNo = 1310) && (parent, AnimElemTime(15) >= 0)
trigger3 = (parent, StateNo = 1320) && (parent, AnimElemTime(18) >= 0)
trigger4 = (parent, StateNo = [1340,1341]) && (parent, AnimElemTime(18) >= 0)
trigger5 = parent, StateNo != [1300,1341]

;---------------------------------------------------------------------------

[Statedef 1331]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 1330
sprpriority = -5

[State 1]
type = BindToParent
trigger1 = 1
facing = 1
pos = 0,0
time = -1

[State 1]
type = HitOverRide
trigger1 = 1
attr = SCA, AA, AT, AP, NA, NT, NP, HA, HT, HP
slot = 0
stateno = 1331
time = -1

[State 1]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP
time = 1

[State 1]
type = ChangeState
trigger1 = Time >= 5
value = 1330

[State 1]
type = DestroySelf
trigger1 = (parent, StateNo = 1300) && (parent, AnimElemTime(12) >= 0)
trigger2 = (parent, StateNo = 1310) && (parent, AnimElemTime(15) >= 0)
trigger3 = (parent, StateNo = 1320) && (parent, AnimElemTime(18) >= 0)
trigger4 = (parent, StateNo = [1340,1341]) && (parent, AnimElemTime(18) >= 0)
trigger5 = parent, StateNo != [1300,1341]


;---------------------------------------------------------------------------
; 昇竜小

[Statedef 1400]
type    = S
movetype= A
physics = S
juggle  = 5
ctrl = 0
poweradd = 35
sprpriority = 2
anim = 1400
velset=0,0

[State 1400, 昇竜用]
type = varset
trigger1 = anim = 1400
var(33)=animelemno(0)
;ignorehitpause=1

[State 56, 10]
type = turn
trigger1 = time=0
trigger1 = p2dist x < -5

[State 1]
type = PlaySnd
trigger1 = time=1
value = 1510,0
volume = 255
volumescale = 255
channel = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
trigger1 = time=0  && (P2StateNo != [5070,5071])
attr = S, SA
damage =  12*ifelse(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -7.5,-20
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -7.5,-20
down.velocity = -6,-7
ground.cornerpush.veloff = -19
air.cornerpush.veloff = -18
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 240, VarAdd]
type = Varset
trigger1 = time=0
var(10) = 0
ignorehitpause = 1
persistent = 0

[State 240, VarAdd]
type = Varset
trigger1 = movecontact 
var(10) = 1
ignorehitpause = 1
persistent = 0

[State 3050, dust pwr]
type = ChangeState
trigger1 = AnimTime = 0
value = 1401
ctrl = 0

;---------------------------------------------------------------------------

[Statedef 1401]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 1410
sprpriority = 2
ctrl = 0

[State 1]
type = VelSet
trigger1 = Time = 1
x = 4.9
y = -4.8

[State 1]
type = VelAdd
trigger1 = (Time >= 0) && (Vel X > 0)
x = -0.4

[State 1]
type = VelAdd
trigger1 = (Time >= 0) && (Vel X > 0)
y = -1.29

[State 1]
type = VelSet
trigger1 = AnimElemTime(1) = 10
x = 0
y = 0

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
triggerall = movecontact=0 && var(10)=0 
trigger1 = AnimElem = 1  && (P2StateNo != [5070,5071])
attr = A, SA
damage = 9*ifelse(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -7.5,-15
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -7.5,-15
down.bounce = 1
down.velocity = -6,-4
ground.cornerpush.veloff = -19
air.cornerpush.veloff = -19
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
triggerall = movecontact=0 && var(10)=0 
trigger1 = AnimElem = 2  && (P2StateNo != [5070,5071])
attr = A, SA
damage =  9*ifelse(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -7.5,-15
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -7.5,-15
down.bounce = 1
down.velocity = -6,-4
ground.cornerpush.veloff = -19
air.cornerpush.veloff = -19
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4

[State 1]
type = ChangeState
trigger1 = Time > 8
value = 1402
ctrl = 0

;---------------------------------------------------------------------------

[Statedef 1402]
type    = A
movetype= I
physics = N
juggle  = 5
ctrl = 0
anim = 1401
velset = 0,0
sprpriority = 2

[State 1]
type = Gravity
trigger1 = 1

[State 1]
type = VelAdd
trigger1 = 1
y = 0.22

[State 1]
type = PosAdd
trigger1 = Pos Y >= 0
x = 50

[State 1]
type = ChangeState
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; 昇竜中

[Statedef 1410]
type    = S
anim = 1400
movetype= A
physics = S
juggle  = 5
ctrl = 0
poweradd = 49
sprpriority = 2
velset=0,0

[State 1400, 昇竜用]
type = varset
trigger1 = anim = 1400
var(33)=animelemno(0)
;ignorehitpause=1

[State 56, 10]
type = turn
trigger1 = time=0
trigger1 = p2dist x < -5

[State 1]
type = PlaySnd
trigger1 = time=1
value = 1510,0
volume = 255
volumescale = 255
channel = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
trigger1 = time=0  && (P2StateNo != [5070,5071])
attr = S, SA
damage =  12*ifelse(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -9.5,-26
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -9.5,-26
down.velocity = -6,-7
ground.cornerpush.veloff = -19
air.cornerpush.veloff = -19
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 240, VarAdd]
type = Varset
trigger1 = time=0
var(10) = 0
ignorehitpause = 1
persistent = 0

[State 240, VarAdd]
type = Varset
trigger1 = movecontact 
var(10) = 1
ignorehitpause = 1
persistent = 0

[State 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 1411

;---------------------------------------------------------------------------

[Statedef 1411]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 1410
sprpriority = 2
ctrl = 0

[State 1]
type = VelSet
trigger1 = Time = 1
x = 5.5
y = -6.5

[State 1]
type = VelAdd
trigger1 = Time = 1
x = 1.2

[State 1]
type = VelAdd
trigger1 = (Time >= 0) && (Vel X > 0)
y = -1.49

[State 1]
type = VelSet
trigger1 = AnimElemTime(1) = 11
x = 0
y = 0

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
triggerall = movecontact=0 && var(10)=0 
trigger1 = AnimElem = 1  && (P2StateNo != [5070,5071])
attr = A, SA
damage =  9*ifelse(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -8.5,-17
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -8.5,-17
down.bounce = 1
down.velocity = -6,-4
ground.cornerpush.veloff = -19
air.cornerpush.veloff = -19
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
triggerall = movecontact=0 && var(10)=0 
trigger1 = AnimElem = 2  && (P2StateNo != [5070,5071])
attr = A, SA
damage =  9*ifelse(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -8.5,-17
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -8.5,-17
down.bounce = 1
down.velocity = -6,-4
ground.cornerpush.veloff = -19
air.cornerpush.veloff = -19
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4

[State 1]
type = ChangeState
trigger1 = Time > 11
value = 1402
ctrl = 0

;---------------------------------------------------------------------------
; 昇竜大

[Statedef 1420]
type    = S
anim = 1400
movetype= A
physics = S
juggle  = 5
ctrl = 0
poweradd = 56
sprpriority = 2
velset=0,0

[State 1400, 昇竜用]
type = varset
trigger1 = anim = 1400
var(33)=animelemno(0)
;ignorehitpause=1

[State 56, 10]
type = turn
trigger1 = time=0
trigger1 = p2dist x < -5

[State 1]
type = PlaySnd
trigger1 = time=1
value = 1510,0
volume = 255
volumescale = 255
channel = 0

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
trigger1 = time=0  && (P2StateNo != [5070,5071])
attr = S, SA
damage =  12*ifelse(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -13.5,-35
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -13.5,-35
down.velocity = -6,-7
ground.cornerpush.veloff = -23
air.cornerpush.veloff = -23
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 240, VarAdd]
type = Varset
trigger1 = time=0
var(10) = 0
ignorehitpause = 1
persistent = 0

[State 240, VarAdd]
type = Varset
trigger1 = movecontact 
var(10) = 1
ignorehitpause = 1
persistent = 0

[State 1200, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1421

;---------------------------------------------------------------------------

[Statedef 1421]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 1412
sprpriority = 2
ctrl = 0

[State 1]
type = VelSet
trigger1 = Time = 1
x = 7
y = -10

[State 1]
type = VelAdd
trigger1 = Time = 1
x = 1.8

[State 1]
type = VelAdd
trigger1 = (Time >= 0) && (Vel X > 0)
y = -1.49

[State 1]
type = VelSet
trigger1 = AnimElemTime(1) = 14
x = 0
y = 0

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
triggerall = movecontact=0 && var(10)=0 
trigger1 = AnimElem = 1  && (P2StateNo != [5070,5071])
attr = A, SA
damage =  9*ifelse(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(19*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -10.5,-20
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -10.5,-20
down.bounce = 1
down.velocity = -6,-4
ground.cornerpush.veloff = -23
air.cornerpush.veloff = -23
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1]
type = HitDef
Triggerall = NumEnemy>=1
triggerall = movecontact=0 && var(10)=0 
trigger1 = AnimElem = 2  && (P2StateNo != [5070,5071])
attr = A, SA
damage =  9*ifelse(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
animtype = Diagup
air.animtype = Diagup
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
hitsound = S5,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime = 24
guard.hittime = 15
ground.velocity = -10.5,-20
guard.velocity = -13
airguard.velocity = -8.5,3
air.type = Low
air.velocity = -10.5,-20
down.bounce = 1
down.velocity = -6,-4
ground.cornerpush.veloff = -23
air.cornerpush.veloff = -23
yaccel=.88
getpower=  7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
ID =1+4

[State 1]
type = ChangeState
trigger1 = Time > 14
value = 1402
ctrl = 0

;---------------------------------------------------------------------------
;カスタムステート1

[Statedef 1490]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1490, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 1490, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 1490, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 1490, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1490, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 1490, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 1491


;---------------------------------------------------------------------------
;カスタムステート2

[Statedef 1491]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1491, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 1491, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1491, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1492 ;HITA_UP (transition)

;---------------------------------------------------------------------------
;カスタムステート3

[Statedef 1492]
type    = A
movetype= H
physics = N

[State 1492, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 1492, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1492, 4]
type = selfstate
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
;カスタムステート4

[Statedef 1493]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1493, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 1493, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 1493, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 1493, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1493, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1491

;---------------------------------------------------------------------------
; 側転

[Statedef 1500]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 1500
poweradd = 56
velset = 3.4,0
sprpriority = -2

[State 170]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1300, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 220,0
volume = 255
volumescale = 255
channel = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 0.2

[State 1300, VelSet]
type = VelSet
trigger1 = AnimTime = 0
x = 0

[State 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 1]
type = Turn
trigger1 = AnimTime = 0

[State 1]
type = PosAdd
trigger1 = AnimTime = 0
x = -6


[State 1]
type = ChangeState
trigger1 = AnimTime =0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------------
;HC
;-----------------------------------------------------------------------------------

;---------------------------------------------------------------------------
;Final Justice
;
[Statedef 3000]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 4
var(47) = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 25
var(47) = 0

[State 3000, VarSet]
type = VarSet
trigger1 = Moveguarded
var(47) = 0

[State 3000, Helper]
type = Helper
trigger1 = AnimElem = 4
stateno = 8500
supermovetime = 99999999
pos = ceil(-30*const(size.xscale)),ceil(-85*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 4
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 4
value = SCA 

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5) = 0
x = -.6

[State 3000]
type = VelSet
trigger1 = AnimElemTime(5) = 0
x = 8.4

[State 3000]
type = VelSet
trigger1 = AnimElemTime(22) = 0
x = 1.1

[State 3000]
type = VelSet
trigger1 = AnimElemTime(25) = 0
x = 2

[State 3000]
type = Width
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(22) < 0)
value = 15,0

[State 3000]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 3400,0
volume = 255
volumescale = 255
channel = 0

[State 3000, HitDef A]
type = HitDef
trigger1 =(MoveContact = 0) && (P2StateType != L) && (P2StateNo != [5070,5071])
attr = , HA
damage = 7*ifelse(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
getpower = 0
animtype = Up
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 9,8
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,-75
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 60
ground.hittime  = 100
air.hittime=100
fall.recovertime=100
guard.slidetime = 12
guard.hittime = 15
airguard.velocity = -8.5,3
ground.velocity = 0,-17.5
guard.velocity = -10
air.type = Low
air.velocity = 0,-16.5
down.bounce = 1
down.velocity = -4,-4
p1stateno = 3001
p2stateno = 3010
hitonce = 1
kill = 0
guard.kill = 0

[State 3000, HitDef B]
type = HitDef
trigger1 = (AnimElemTime(6) = 3) && (P2StateType = L) && (P2StateNo != [5070,5071])
attr = S, HA
damage = 7*ifelse(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(8*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),14
getpower = 0
animtype = Up
guardflag = MA
hitflag = MAFD
priority = 7, Hit
pausetime = 9,8
sparkno = S8002
guard.sparkno = S8050
sparkxy = 0,-75
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 60
ground.hittime  = 100
air.hittime=100
fall.recovertime=100
guard.slidetime = 12
guard.hittime = 15
airguard.velocity = -4,0
ground.velocity = -4,-4
guard.velocity = -10
air.type = Low
air.velocity = -4,-4
fall = 1
fall.recover = 0
down.bounce = 1
down.velocity = -4,-4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact && time = 1
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
persistent = 0

[State 3000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Final Justice - First hit
;
[Statedef 3001]
type    = S
movetype= A
physics = N
poweradd= 0
anim = 3001
ctrl = 0
sprpriority = 2

[State 3001]
type = HitDef
trigger1 = time=0
attr = S,HT
hitflag = MAFD
priority = 7,Hit
sparkno = -1
sprpriority = 2
p1stateno = 3002
p2stateno = 3013
guard.dist = 0
hitonce = 1
numhits = 0


[State 3001]
type = Turn
trigger1 = AnimElemTime(2) = 0

[State 3001]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = -11

[State 3001]
type = VelSet
trigger1 = AnimElemTime(5) = 0
x = -9

[State 3001]
type = VelSet
trigger1 = AnimElemTime(5)
trigger1 = P2Dist X >60
x = 0

[State 3001]
type = VelSet
trigger1 = AnimElemTime(6) = 0
x = 0

[State 3001, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Final Justice - Hits
;
[Statedef 3002]
type    = S
movetype= A
physics = N
poweradd= 0
anim = 3002
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3001]
type = nothitby
trigger1=1
value=SCA


[State 3002, HitDef 1]
type = HitDef
trigger1 = AnimElemTime(2) = 0
trigger2 = AnimElemTime(7) = 0
attr = S, HA
damage = 8*ifelse(5*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(5*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
getpower = 0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 2,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -20,-80
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
air.hittime=25
fall.recovertime=25
ground.velocity = 0,0
guard.velocity = -7
p2facing = 1
kill = 0
guard.kill = 0
mindist = 10, 0
maxdist = 80, 0

[State 3002, HitDef 2]
type = HitDef
trigger1 = AnimElemTime(12) = 0
attr = S, HA
damage = 8*ifelse(3*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(3*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
getpower = 0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 2,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -20,-80
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
air.hittime=25
fall.recovertime=25
ground.velocity = 0,0
guard.velocity = -7
p2facing = 1
kill = 0
guard.kill = 0

[State 3002, HitDef 3]
type = HitDef
trigger1 = AnimElemTime(15) = 0
attr = S, HA
damage = 8*ifelse(3*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(3*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
getpower = 0
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 2,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -20,-80
hitsound = S5,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime=25
fall.recovertime=25
ground.velocity = 0,0
guard.velocity = -7
p2facing = 1
kill = 0
guard.kill = 0

[State 3002, HitDef 3]
type = HitDef
trigger1 = AnimElemTime(4) = 0
trigger2 = AnimElemTime(9) = 0
attr = S, HA
damage = 8*ifelse(3*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(3*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
getpower = 0
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 2,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -20,-80
hitsound = S5,1
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
air.hittime=25
fall.recovertime=25
ground.velocity = 0,0
guard.velocity = -7
p2facing = 1
kill = 0
guard.kill = 0

[State 3002, HitDef Grab]
type = HitDef
trigger1 = AnimElemTime(19) = 0
attr = S,HA
hitflag = MAF+
priority = 7,Hit
sparkno = -1
sprpriority = 2
p2facing = 1
p1stateno = 3003
p2stateno = 3014
guard.dist = 0
fall.xvelocity = 0
fall.yvelocity = 0
fall = 1
fall.recover = 0
hitonce = 1


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 3002, Yell]
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
trigger2 = AnimElemTime(4) = 0
trigger3 = AnimElemTime(7) = 0
trigger4 = AnimElemTime(9) = 0
trigger5 = AnimElemTime(12) = 0
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State ]
type = SprPriority
trigger1 = AnimElemTime(17)
trigger2 = AnimElemTime(18)
trigger3 = AnimElemTime(19)
trigger4 = AnimElemTime(20)
value = 3

[State 3002, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Final Justice - Throw
;
[Statedef 3003]
type    = S
movetype= A
physics = N
poweradd= 0
anim = 3003
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3003]
type = PosAdd
trigger1 = AnimElemTime(7) = 0
x = 12

[State 3003]
type = VelSet
trigger1 = AnimElemTime(3) = 0
trigger2 = AnimElemTime(7) = 0
x = 5

[State 3003]
type = VelSet
trigger1 = AnimElemTime(5) = 0
trigger2 = AnimElemTime(9) = 0
x = 0

[State 3003]
type = TargetBind
trigger1 = Time = 0
pos = 56,0

[State 3003]
type = TargetBind
trigger1 = (AnimElemTime(1) >= 16) && (AnimElemTime(2) < 0)
pos = 53,4

[State 3003]
type = TargetBind
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(3) < 0)
pos = -38,-2

[State 3003]
type = TargetBind
trigger1 = (AnimElemTime(3) >= 0) && (AnimElemTime(4) < 0)
pos = 14,-2

[State 3003]
type = TargetBind
trigger1 = (AnimElemTime(4) >= 0) && (AnimElemTime(4) < 4)
pos = 50,-2

[State 3003]
type = TargetBind
trigger1 = (AnimElemTime(4) >= 4) && (AnimElemTime(5) < 0)
pos = 63,-2

[State 3003]
type = TargetState
trigger1 = AnimElemTime(5) = 0
value = 3015

[State 3003]
type = Width
trigger1 = (AnimElemTime(1) >= 0) && (AnimElemTime(2) < 0)
trigger2 = (AnimElemTime(4) >= 0) && (AnimElemTime(5) < 0)
edge = 55,0

[State 3003]
type = Width
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(3) < 0)
edge = 0,50

[State 3003]
type = Width
trigger1 = (AnimElemTime(3) >= 0) && (AnimElemTime(4) < 0)
edge = 0,15

[State 3003]
type = Width
trigger1 = (AnimElemTime(5) >= 0) && (AnimElemTime(6) < 0)
trigger2 = (AnimElemTime(6) >= 0) && (AnimElemTime(7) < 0)
edge = 50,0

[State 810, Width 2-11]
type = Width
trigger1 = 1
edge = 122,0

[State 830, 2]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0


[State 3003, Hit Spark]
type = Explod
trigger1 = AnimElemTime(1) = 0
anim = 8000
scale = 0.5,0.5
postype = p2
pos = Floor(P2Dist X - 40), Floor(P2Dist Y - 60)
sprpriority = 5

[State 3003]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = 5,4

[State 3003]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 210,0
volume = 255
volumescale = 255
channel = 0


[State 3003]
type = ChangeState
trigger1 = AnimTime = 0
value = 3004
ctrl = 0

;---------------------------------------------------------------------------
;Final Justice - Jump
;
[Statedef 3004]
type    = A
movetype= A
physics = N
poweradd= 0
anim = 3004
velset = 0,-34
ctrl = 0
sprpriority = 2

[State 3004]
type = VelAdd
trigger1 = Time >= 6
y = 0.83

[State 3004]
type = PlayerPush
trigger1 = 1
value = 0

[State 3004]
type = HitDef
trigger1 = time=0
attr = S,HT
hitflag = MAF+
priority = 7,Hit
sparkno = -1
sprpriority = 1
p2facing = 1
p1stateno = 3005
p2stateno = 3017
hitsound = s5,4
guard.dist = 0
fall.xvelocity = 0
fall = 1
fall.recover = 0
hitonce = 1


[State 3004, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 52
ctrl = 0

;---------------------------------------------------------------------------
;Final Justice - Fall
;
[Statedef 3005]
type    = A
movetype= A
physics = N
poweradd= 0
anim = 3005
velset = 0,0
ctrl = 0
sprpriority =2

[State 3005]
type = VelSet
trigger1 = AnimElemTime(3) = 0
y = 9.6

[State 3005]
type = VelSet
trigger1 = (Pos Y >= 10) && (Vel Y > 0)
y = 0

[State 3005]
type = VelSet
trigger1 = (Pos Y >= 10) && (Vel Y > 0)
y = 10

[State 3005]
type = VelAdd
trigger1 = Vel Y > 0
y = const(movement.yaccel)

[State 3005]
type = TargetBind
trigger1 = Time = 0
pos = -23,-14

[State 3005]
type = TargetBind
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(3) < 0)
pos = -5,-13

[State 3005]
type = TargetBind
trigger1 = (AnimElemTime(3) >= 0)
pos = 0,-10

[State 3005]
type = TargetState
trigger1 = Time = 49
value = 3018

[State 3005]
type = TargetLifeAdd
;trigger1 = Time = 38
trigger1 = NumTarget(3005)
trigger1 = Target(3005),lifemax<5000
trigger1 = pos Y >=-10
value = -7*floor(26*(1+(fvar(4)-4)/10*1.25))
p2defmul = 1
absolute=1
persistent=0

[State 3005]
type = TargetLifeAdd
;trigger1 = Time = 38
trigger1 = NumTarget(3005)
trigger1 = Target(3005),lifemax>=5000
trigger1 = pos Y >=-10
value = -7*floor(26*(1+(fvar(4)-4)/10*1.25))
p2defmul = 1
absolute=0
persistent=0

[State 3005, Yell 1]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 200,0
volume = 255
volumescale = 255
channel = 0

[State 3005, Yell 2]
type = PlaySnd
;trigger1 = Time = 38
trigger1 = pos Y >=-10
value = 220,0
volume = 255
volumescale = 255
channel = 0
persistent=0

[State 3005]
type = PlaySnd
;trigger1 = Time = 38
trigger1 = pos Y >=-10
value = 5100,4
volume = 220
volumescale = 220
persistent=0

[State 3005, Grab Spark]
type = Explod
trigger1 = AnimElemTime(1) = 0
anim = 8000
scale = 0.5,0.5
postype = p2
pos = Floor(P2Dist X), Floor(P2Dist Y - 50)
sprpriority = 5

[State 3005, Hit Ground Explod B]
type = Explod
trigger1 = Time = 40
anim = 8083
scale = 0.55,0.55
postype = P1
pos = 0,-30
sprpriority = 5

[State 3005, Hit Ground Explod B]
type = Explod
trigger1 = Time = 40
anim = 8081
scale = 0.38,0.38
postype = P1
pos = 0,-40
sprpriority = 5

[State 3005]
type = TargetLifeAdd
trigger1 = Time = 40
value = -197

[State 0, Helper]
type = Helper
trigger1 = Time = 38
helpertype = normal ;player
name = "explosion"
ID = 8082
stateno = 3009
pos = 0,0
postype = p1    ;p2,front,back,left,right

[State 3005]
type = AssertSpecial
trigger1 = 1
flag = nokoslow

[State 3005, ChangeState]
type = ChangeState
trigger1 = Time = 49
value = 3006
ctrl = 0

;Explosion
[Statedef 3009]
type    = A
movetype= A
physics = N
;juggle  = 7
ctrl = 0
sprpriority = 5
anim = 9998
velset = 0,0
hitdefpersist = 1

[State 3510, 4]
type = explod
trigger1 = Time = 0
anim = 8082
pos = 0,-30
postype = p1
under = 1
supermove = 1
bindtime = 10
removetime = 15
vel = -0.3,0
scale = .25,.25
ID = 8082
sprpriority = 6

[State 7001, 2]
type = DestroySelf
trigger1 = time = 20

[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,18]
ID = 8082
scale = .1+ (.07*time), .1+(.07*time)
sprpriority = 4
under = 1

;---------------------------------------------------------------------------

[Statedef 3006]
type    = A
movetype= I
physics = N
poweradd= 0
anim = 3006
velset = -10,-10.9
ctrl = 0
sprpriority = 2


[State 3006, VelAdd]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel);0.39

[State 3006, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3006, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 3007
ctrl = 0

;---------------------------------------------------------------------------

[Statedef 3007]
type    = S
movetype= I
physics = S
poweradd= 0
anim = 3007
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3001]
type = nothitby
trigger1=1
value=,AT

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 4
var(47) = 0

[State 3007]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3007]
type = PlaySnd
trigger1 = Time = 1
value = 52,1

[State 200]
type = ChangeState
triggerall = var(59)<=0
triggerall = InGuardDist
trigger1 = command = "holdback"
value = 120       

[State 3007, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Final Justice (opponent hitshake)

[Statedef 3010]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 3010, ChangeAnim2 A]
type = ChangeAnim2
trigger1 = Time >= 0
value = 3010

[State 3010, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 3011

[State 3010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 3010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 3010, FFB Hard]
type =selfstate
trigger1 = vel y>0
trigger1 = pos y<-10
value = 5050


;----------------------------------------------------------------------

[Statedef 3011]
type    = A
movetype= H
physics = N
poweradd= 32
ctrl = 0
sprpriority = 1

[State 3011]
type = width
trigger1 = Time = 0
edge = 40,40

[State 3011]
type = VelSet
trigger1 = Time = 0
y = gethitvar(Yvel)

[State 3011, VelAdd]
type = VelAdd
trigger1 = Time ;>= 7
y = 0.72

[State 3010, FFB Hard]
type =null;selfstate
trigger1 = vel y>0
trigger1 = pos y<-20
value = 5050

[State 3011]
type = ChangeState
trigger1 = Vel Y >= 0
value = 3012
ctrl = 0

;---------------------------------------------------------------


[Statedef 3012]
type    = A
movetype= H
physics = N
poweradd= 0
ctrl = 0
sprpriority = 1

[State 3012]
type = VelAdd
trigger1 = 1
y = 0.72

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3012]
type = SelfState
trigger1 = (Pos Y >= 20) && (Vel Y > 0)
value = 5100
ctrl = 0

;---------------------------------------------------------------

[Statedef 3013]
type    = S
movetype= H
physics = N
poweradd= 0
ctrl = 0
sprpriority = 1

[State 3013]
type = VelSet
trigger1 = Pos Y >= 0
y = 0

[State 3013]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State 3013]
type = ChangeAnim
trigger1 = SelfAnimExist(5251)
trigger1 = Time >= 0
value = 5251

[State 3013]
type = ChangeAnim2
trigger1 = !SelfAnimExist(5251)
trigger1 = Time >= 0
value = 3011


[State 3013]
type = SelfState
trigger1 = Time >= 50
value = 5100
ctrl = 0

;-------------------------------------------------------------------

[Statedef 3014]
type    = S
movetype= H
physics = N
poweradd= 0
ctrl = 0
sprpriority = 3

[State 3014]
type = ChangeAnim2
trigger1 = Time = 0
value = 3012

;----------------------------------------------------------------------

[Statedef 3015]
type    = A
movetype= H
physics = N
poweradd= 0
ctrl = 0
velset = 0,-28
sprpriority = 0

[State 3015]
type = ScreenBound
trigger1 = 1;Time = 0
MoveCamera=0,0

[State 3015]
type = PosAdd
trigger1 = Time = 0
x = 20

[State 3015]
type = VelAdd
trigger1 = 1
y = 0.89

[State 3015]
type = Turn
trigger1 = Time = 1

[State 3015]
type = ChangeAnim2
trigger1 = !SelfAnimExist(5051)
trigger1 = Time = 0
value = 3013

[State 3015]
type = ChangeAnim
trigger1 = SelfAnimExist(5051)
trigger1 = Time = 0
value = 5051

[State 3015]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100
ctrl = 0

[State 3015, ChangeState]
type = ChangeState
trigger1 = Time = 40
value = 3016
ctrl = 0

;--------------------------------------------------------------------

[Statedef 3016]
type    = A
movetype= H
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 3


[State 3016]
type = VelAdd
trigger1 = Time >= 50
y = 0.86

[State 3016]
type = ChangeAnim2
trigger1 = Time = 0
value = 3014

[State 3016]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5110
ctrl = 0

;----------------------------------------------------------------------

[Statedef 3017]
type    = A
movetype= H
physics = N
poweradd= 0
ctrl = 0
sprpriority = 0

[State 3017]
type = ChangeAnim2
trigger1 = Time = 0
value = 3015

;----------------------------------------------------------------------

[Statedef 3018]
type    = L
movetype= H
physics = N
poweradd= 0
ctrl = 0
sprpriority = 0

[State 3018]
type = SelfState
trigger1 = Time = 0
value = 5110
ctrl = 0

;---------------------------------------------------------------------------
;Hyper Charging Star
;
[Statedef 3100]
type    = S
anim=3100
movetype= A
physics = N
juggle  = 1
ctrl = 0
velset = 0,0
sprpriority = 2

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 2
var(47) = 1

[State 3000, Helper]
type = Helper
trigger1 = AnimElem = 2
stateno = 8500
supermovetime = 99999999
pos = ceil(5*const(size.xscale)),ceil(-65*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 2
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 2
value = SCA 

[State 1]
type = HitDef
trigger1 = (AnimElemTime(5) = 0) && (P2StateNo != [5070,5071])
attr = S, SA
damage = 8*ifelse(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(12*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
air.animtype = back
guardflag = MA
hitflag = MAFD
priority = 6, Hit
pausetime = 9,11
guard.pausetime = 8,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = 0,-45
hitsound = S5,3
guardsound = S6,0
ground.type = High
ground.hittime  = 15
guard.slidetime = 12
guard.hittime = 15
air.hittime = 5
fall.recovertime=35
airguard.velocity = -8.5,3
ground.velocity = -9,-5
guard.velocity = -10
air.type = Low
air.velocity = -9,-8
down.bounce = 1
down.velocity = -4,-4
givepower = 35
fall = 1
air.fall = 1
getpower =  7*ifelse(5*fvar(6)>=1,floor(5*fvar(6)),1),35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.9
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 1480,0
volume = 255
volumescale = 255
channel = 0

[State 1470, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 3101
ctrl = 0

;---------------------------------------------------------------------------
;Hyper Charging Star - Fase 2
;
[Statedef 3101]
type    = S
movetype= A
physics = N
juggle  = 1
anim=3101
ctrl = 0
sprpriority = 2

[State 1471, VelSet 1]
type = VelSet
trigger1 = AnimElemTime(1) = 0
x = 8

[State 1471, HitBy]
type = nothitby
triggerall = Var(50) = 1
trigger1 = (AnimElemTime(1) >= 0) && (AnimElemTime(24) < 0)
value = SCA, NP, SP, HP, NT, ST, HT
time = 1

;//命中時延長
[State 1471, HitBy]
type = nothitby
triggerall = Var(50) = 1
trigger1 = movehit
trigger1 = (AnimElemTime(20) < 0)
value = SCA, NP, SP, HP, NT, ST, HT
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = p2stateno  = 5000
trigger2 = p2stateno  = 5010
trigger3 = p2stateno  = 5020
value = 5,2
volume = 170
volumescale = 170
channel = 6

[State 0, 1]
type = Explod
trigger1 = AnimElem = 1
anim = 23041
pos = 0,0
postype = p1
ID = 23041
sprpriority = 4
bindtime = -1
removetime = -1
removehit
sprpriority = 5
removeongethit = 1
ignorehitpause = 1
scale = const(size.xscale), const(size.yscale)

[State 440, 3]
type = HitDef
trigger1 = animelem = 1,>= 0 && animelem = 22,< 10
trigger1 = animelemtime(1)%2=0
attr = S, HA
damage = 9*ifelse(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
hitflag = MAFD
guardflag = MA
pausetime = 6,6
guard.pausetime = 6,6
sparkno = s9999
guard.sparkno = s8050
sparkxy = -5,-65
guardsound = s6,0
ground.type = Hard
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -4,-2
air.velocity = -4,-2
airguard.velocity = -8.5,3
guard.velocity = -9
fall = 1
fall.recover=0
getpower = 0
kill = 0
yaccel = .73
ground.cornerpush.veloff = -9
air.cornerpush.veloff = -9
down.cornerpush.veloff = -9
guard.cornerpush.veloff = -9
airguard.cornerpush.veloff = -9
id = 2+4

[State 440, 3]
type = HitDef
Trigger1 = HitCount = 8
attr = A, HP
damage = 9*ifelse(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
hitflag = MAFD
guardflag = MA
pausetime = 13,11
guard.pausetime = 12,12
sparkno = s9999
guard.sparkno = s8050
sparkxy = -5,-65
hitsound = s5,3
guardsound = s6,0
ground.type = Hard
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -25,-14
air.velocity = -25,-14
airguard.velocity = -8.5,3
air.hittime = 5
guard.velocity = -9
fall = 1
fall.recover=0
getpower = 0
yaccel = 1.20
ground.cornerpush.veloff = -28
air.cornerpush.veloff = -28
down.cornerpush.veloff = -28
guard.cornerpush.veloff = -28
airguard.cornerpush.veloff = -28

[State 440, 3]
type = HitDef
Trigger1 = time>25 && HitCount = 6
attr = A, HP
damage = 9*ifelse(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)>=1,floor(7*fvar(6)*(1+(fvar(4)-4)/10*1.25)),1),7
hitflag = MAFD
guardflag = MA
pausetime = 13,11
guard.pausetime = 12,12
sparkno = s9999
guard.sparkno = s8050
sparkxy = -5,-65
hitsound = s5,3
guardsound = s6,0
ground.type = Hard
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -25,-14
air.velocity = -25,-14
airguard.velocity = -8.5,3
air.hittime = 5
guard.velocity = -9
fall = 1
fall.recover=0
getpower = 0
yaccel = 1.20
ground.cornerpush.veloff = -28
air.cornerpush.veloff = -28
down.cornerpush.veloff = -28
guard.cornerpush.veloff = -28
airguard.cornerpush.veloff = -28

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 60)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 440, 4]
type = ChangeState
Trigger1 = HitCount = 9
value = 3102

[State 0, ]
type = RemoveExplod
Trigger1 = HitCount = 9
ID = 23041

[State 440, 4]
type = ChangeState
triggerall = Moveguarded
trigger1 = Animelem = 20
value = 3102

[State 440, 4]
type = ChangeState
trigger1 = Animtime = 0
value = 3102


;---------------------------------------------------------------------------
;Hyper Charging Star - Fase 3
;
[Statedef 3102]
type    = S
movetype= A
physics = N
juggle  = 1
anim=3102
ctrl = 0
sprpriority = 2

[State 0, ]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 23041

[State 0, 1]
type = Explod
trigger1 = AnimElem = 1
anim = 23042
pos = 0,0
postype = p1
bindtime = -1
removetime = 12
sprpriority = 5
scale = const(size.xscale), const(size.yscale)

[State 3000, VarSet]
type = VarSet
trigger1 = time = 1
var(47) = 0

[State 1300, VelSet End]
type = VelSet
trigger1 = AnimElemTime(1) = 0
x = 1.8

[State 1300, Width]
type = Width
trigger1 = AnimElemTime(1) < 0
value = 15,0

[State 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hyper Stars & Stripes
;
[Statedef 3200]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 2100
velset = 0,0
sprpriority = 2

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 2
var(47) = 1

[State 3000, Helper]
type = Helper
trigger1 = AnimElem = 2
stateno = 8500
supermovetime = 99999999
pos = ceil(0*const(size.xscale)),ceil(-25*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 2
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 2
value = SCA 

[State 1]
type = VelSet
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 10
trigger4 = AnimElem = 13
x = 7.5

[State 1270, VelSet 2]
type = VelSet
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
x = 2

[State 1]
type = VelSet
triggerall = Movecontact
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 10
trigger4 = AnimElem = 13
x = 10

[State 1270, VelSet 2]
type = VelSet
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
x = 4



[State 1]
type = Width
trigger1 = (AnimElem = 16>= 1) && (AnimTime < 0)
value = 20,0

[State 1]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 11
value = 210,0
volume = 255
volumescale = 255
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = p2stateno  = 5000
trigger2 = p2stateno  = 5010
trigger3 = p2stateno  = 5020
value = S5,2
volume = 170
volumescale = 170
channel = 5

[State 1]
type = HitDef
trigger1 = animelem = 3 
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 10
trigger5 = animelem = 11
trigger6 = animelem = 12
attr = S,HA
hitflag = MAFD
guardflag = MA
animtype = Hard
air.animtype = Up
damage = 30,5
getpower = 0,0
givepower = 20,0
pausetime = 4,4
guard.pausetime = 3,3
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-75
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .88
guard.velocity = -11
ground.velocity = -11,0
air.velocity = -0.2,-7
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
ground.cornerpush.veloff = -16
air.cornerpush.veloff = -16
down.cornerpush.veloff = -16
guard.cornerpush.veloff = -16
airguard.cornerpush.veloff = -16

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1


[State 1300, ]
type = Explod
trigger1 = AnimElem = 3 = 1
anim = 22100
id = 22100
postype = P1
pos = 20,30
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1
removeongethit = 1
ignorehitpause = 1
scale = const(size.xscale), const(size.yscale)

[State 1300, ]
type = RemoveExplod
trigger1 = AnimElem = 4
id = 22100


[State 1300, ]
type = Explod
trigger1 = AnimElem = 10 = 1
anim = 22100
id = 22100
postype = P1
pos = 20,30
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1
removeongethit = 1
ignorehitpause = 1
scale = const(size.xscale), const(size.yscale)

[State 1300, ]
type = RemoveExplod
trigger1 = AnimElem = 11
id = 22100

[State 1300, ]
type = Explod
trigger1 = AnimElem = 4
trigger2 = AnimElem = 11
anim = 22100
id = 22100
postype = P1
pos = 20,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1
removeongethit = 1
ignorehitpause = 1
scale = const(size.xscale), const(size.yscale)

[State 1300, ]
type = RemoveExplod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
id = 22100

[State 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3220
ctrl = 0

;---------------------------------------------------------------------------
; Hyper Stars & Stripes - Last hit
;
[Statedef 3220]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 2120
sprpriority = 2
ctrl = 0

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 6
var(47) = 0

[State 1]
type = VelSet
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
x = 2.5

[State 1]
type = VelSet
trigger1 = animelem = 4
x = 8
y = -21

[State 1]
type = VelAdd
trigger1 = animelem = 4
x = 1.8

[State 1]
type = VelAdd
trigger1 = (animelem >= 4) && (Vel X > 0)
y = -1.19

[State 1]
type = VelSet
trigger1 = animelem = 6
x = 0
y = 0

[State 1]
type = PlaySnd
trigger1 = time=1
volume = 255
volumescale = 255
value = 1510,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = p2stateno  = 5000
trigger2 = p2stateno  = 5010
trigger3 = p2stateno  = 5020
value = S5,3
volume = 170
volumescale = 170
channel = 5

[State 3011, HitDef]
type = HitDef
trigger1 = animelem = 2
attr = A,HA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 20,5
getpower = 0,0
givepower = 20,0
pausetime = 4,4
guard.pausetime = 4,4
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .88
guard.velocity = -11
ground.velocity = -7,0
air.velocity = -0.2,-7
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
ground.cornerpush.veloff = -22
air.cornerpush.veloff = -22
down.cornerpush.veloff = -22
guard.cornerpush.veloff = -22
airguard.cornerpush.veloff = -22

[State 3011, HitDef]
type = HitDef
trigger1 = animelem = 3
attr = A,HA
hitflag = MAFD
guardflag = MA
animtype = Diagup
Air.animtype = Diagup
damage = 60,5
getpower = 0,0
givepower = 20,0
pausetime = 4,7
guard.pausetime = 4,4
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 24
guard.hittime = 17
yaccel = .82
guard.velocity = -11
ground.velocity = -14,-32
ground.cornerpush.veloff = 0
air.velocity = -14,-32
airguard.velocity = -10.5,3
ground.cornerpush.veloff = -46
air.cornerpush.veloff = -46
down.cornerpush.veloff = -46
guard.cornerpush.veloff = -46
airguard.cornerpush.veloff = -46
ID =1+4

[State 3011, HitDef]
type = HitDef
trigger1 = animelem = 4
attr = A,HA
hitflag = MAFD
guardflag = MA
animtype = Diagup
Air.animtype = Diagup
damage = 20,5
getpower = 0,0
givepower = 20,0
pausetime = 4,4
guard.pausetime = 4,4
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-60
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 24
guard.hittime = 17
yaccel = .82
guard.velocity = -11
ground.velocity = -14,-32
ground.cornerpush.veloff = 0
air.velocity = -14,-32
airguard.velocity = -6,-2
ground.cornerpush.veloff = -46
air.cornerpush.veloff = -46
down.cornerpush.veloff = -46
guard.cornerpush.veloff = -46
airguard.cornerpush.veloff = -46
ID =1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1300, ]
type = Explod
trigger1 = AnimElem = 2 = 1
anim = 22100
id = 22100
postype = P1
pos = 20,30
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1
removeongethit = 1
ignorehitpause = 1
scale = const(size.xscale), const(size.yscale)

[State 1300, ]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 22100

[State 1300, ]
type = Explod
trigger1 = AnimElem = 3
anim = 22100
id = 22100
postype = P1
pos = 20,0
ownpal = 1
sprpriority = 4
bindtime = -1
removetime = -1
removeongethit = 1
ignorehitpause = 1
scale = const(size.xscale), const(size.yscale)

[State 1300, ]
type = RemoveExplod
trigger1 = AnimElem = 5
id = 22100

[State 1]
type = ChangeState
trigger1 = time>20
value = 1402
ctrl = 0

;---------------------------------------------------------------------------
; フィニッシュ
[Statedef 7777]
type = A
movetype = I
physics = N
anim =9999


[State 9030, 1]
type = Pause
trigger1 = time = 0
time = 73


[State 9030, 1]
type = VarSet
trigger1 = time = 0
var(46) = 0
;value = parent, var(46)

[State 9030, 2]
type = Explod
trigger1 = time = 0
ID = 7777
anim = 7777
postype = left
pos = 0, 0
bindtime = -1
removetime = -2
sprpriority = -2
ownpal = 1
ignorehitpause = 1
movetime = 77
pausemovetime = 77

[State 9030, 2]
type = Explod
trigger1 = time = 0
ID = 7779
anim = 7779
postype = left
pos = 2, 50
bindtime = -1
removetime = -2
sprpriority = 5
scale=.833,1
ownpal = 1
ignorehitpause = 1
movetime = 77
pausemovetime = 77



[State 9030, 2]
type = null;AssertSpecial
trigger1 = NumExplod(7777) = 1
flag = NoBG
flag2 = NoFG
flag3 = Nomusic



[State 9030, 5]
type = PlaySnd
trigger1 = time = 0
value = 170, 1

;---------------------------------------------------------------------------
; Shield Grab High
[Statedef 990]
type    = S
movetype= I
physics = S
poweradd= 0
velset = 0,0
ctrl = 1
anim = 990
sprpriority = 2

[State 990, Shield Grab VarSet Reset]
type = VarSet
trigger1 = Time = 0
v = 31
value = 0

[State 990, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;sysvar 0~2 (予約)  3 hittime(down time)  4(down limitter) 1:on
;=========================================================================

; HITG_SHAKE

[Statedef 293];通常(hitrecover　しないで着地するとバウンド)
type    = U
movetype= H
physics = N
velset = 0,0
face2p = 1

[State 0]
type = changestate
trigger1 = statetype = L
trigger2 = pos y >= 0
trigger2 = sysvar(4) = 1
trigger3 = anim = 5080
trigger3 = time = -1
value = 499

[state down]
type = varset
trigger1 = (statetype != L) && (statetype != A)
sysvar(4) = 0

[State ground]
type = selfstate
trigger1 = (statetype != L) && (statetype != A)
trigger1 = GetHitVar(yvel) >= 0
trigger1 = gethitvar(type) != 3
value = 5000

[State lose]
type = selfState
trigger1 = lose
value = 5000

[State 0]
type = changestate
trigger1 = statetype = A
value = 298

[State 6]
type = ChangeState
trigger1 = time = 0
value = 299

;====================================================

[Statedef 299];地上でのhitshake
type    = u
movetype= H
physics = N
velset = 0,0

[State 1]
type = varset
trigger1 = Time = 0
sysvar(3) = gethitvar(hittime)

[State 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 4]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0
trigger2 = Pos Y != 0
type = a

[State 2]
type = HitVelSet
trigger1 = HitShakeOver
x = 1
y = 1

[State 2]
type = VelSet
trigger1 = HitShakeOver
x = vel x / (0.54+const(movement.yaccel))
y = vel y / (0.54+const(movement.yaccel))

[State 5]
type = ChangeState
trigger1 = HitShakeOver
value = 287

; HITA_SHAKE
[Statedef 298]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1]
type = varset
trigger1 = Time = 0
sysvar(3) = gethitvar(hittime)

[State 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 2]
type = HitVelSet
trigger1 = HitShakeOver
x = 1
y = 1

[State 2]
type = VelSet
trigger1 = HitShakeOver
x = vel x / (0.54+const(movement.yaccel))
y = vel y / (0.54+const(movement.yaccel))

[State 5]
type = ChangeState
trigger1 = HitShakeOver
value = 287

[State Debug Display]
type = DisplayToClipboard
trigger1 = 1
text = "hittime:%d,sysv3:%d"
params = gethitvar(hittime),sysvar(3)
ignorehitpause = 1
;============================================

;通常吹き飛び

; HITA_UP_T (transition)
[Statedef 287]
type    = A
movetype= H
physics = N

[State 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 2]
type = changeanim
trigger1 = vel y > -3.0 || time > 4
trigger1 = selfanimexist(5060)
trigger1 = anim != [5060,5061]
value = 5060

[State 2]
type = changeanim
trigger1 = animtime = 0
trigger1 = !selfanimexist(5060)
trigger1 = anim != [5030,5050]
value = 5030

[State 2]
type = changeanim
trigger1 = animtime = 0
trigger1 = anim = 5030
trigger1 = !selfanimexist(5060)
value = 5050

[State 3]
type = selfState
triggerall = Life <= 0
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 0  ;.
value = 5100 ;HITA_RECOV

[state down]
type = varset
trigger1 = time >= sysvar(3)
sysvar(4) = 0

[State 3]
type = selfState
trigger1 = time >= sysvar(3);hitover
value = 5040 ;HITA_RECOV

[State 3]
type = changeState
triggerall = Life > 0
trigger1 = time < sysvar(3);hitover
trigger1 = Pos Y >= 0
trigger1 = vel y > 0
value = 296

[State 0]
type = changeanim
trigger1 = gethitvar(hittime) < 4
trigger1 = !selfanimexist(5061)
trigger1 = selfanimexist(5060)
value = 5060

[State Debug Display]
type = DisplayToClipboard
trigger1 = 1
text = "hittime:%d,sysv3:%d"
params = gethitvar(hittime),sysvar(3)
ignorehitpause = 1

[Statedef 289];壁にぶつかる
type = U
movetype = H
ctrl = 0
physics = N

[State 0]
type = velset
trigger1 = time = 0
x = 0

[State 0]
type = changestate
trigger1 = time = 0
value = prevstateno

;------------------------------------------

;バウンド
[Statedef 296]
type    = A
movetype= H
physics = N

[State EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State Var]
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 2]
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 3]
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 6]
type = VelMul
trigger1 = Time = 0
x = 0.55
y = -0.5

[State 6]
type = Veladd
trigger1 = Time = 0
y = -3

[State 12]
type = ChangeState
trigger1 = Time = 0
value = 295

; HIT_BOUNCE (bounce into air)
[Statedef 295]
type    = A
movetype= H
physics = N
ctrl = 0

[state down]
type = varset
trigger1 = time = 0
sysvar(4) = 0

[State 0]
type = HitBy
trigger1 = time = 0
value = SCA,NT,ST,HT
time = 10

[State 0]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP
time = 2

[State 0]
type = turn
trigger1 = time = 0
trigger1 = p2dist X < 0

[State 2]
type = ChangeAnim
trigger1 = time = 0
value = 5210

[State 2]
type = statetypeset
trigger1 = time = 0
movetype = I
statetype = A

[State 5]
type = Gravity
trigger1 = 1

[State 2]
type = selfstate
trigger1 = time = 1
value = 5040

;============================================
;転倒中にヒット

[statedef 499];hitshake
type = L
movetype = H
ctrl = 0
physics = N
velset = 0,0

[state down]
type = varset
trigger1 = 1
sysvar(4) = 1

[State 0]
type = turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5]
type = ChangeAnim
trigger1 = 1
value = 5080

[State 5]
type = ChangeState
trigger1 = HitShakeOver
value = 498

[Statedef 498];23フレで着地
type = A
movetype = H
physics = N
anim = 5090
ctrl = 0

[State 0]
type = posset
trigger1 = time = 2
y = 20

[state down]
type = varset
trigger1 = time = 0
sysvar(4) = 2

[State 1]
type = changeanim
trigger1 = time = 2
value = 5050

[State 1]
type = veladd
trigger1 = time >= 1
y = 0.69

[State 2]
type = VelSet
trigger1 = Time = 0
x = -4.
y = -8.5

[State 0]
type = width
trigger1 = time = [5,25]
value = time*3,0


[State 3]
type = selfState
triggerall = Life <= 0
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 20  ;.
value = 5100 

[State 0]
type = changestate
triggerall = Life > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 16
value = 497

[Statedef 497];転がるアニメ無いからスライドで誤魔化し
type = A
movetype = H
physics = N
ctrl = 0

[State 0]
type = Statetypeset
trigger1 = time = 1
statetype = L

[State 0]
type = Changeanim
trigger1 = time = 1
value = 5110

[State 0]
type = Nothitby
trigger1 = time >= 1
time = 2
value = SCA

[state down]
type = varset
trigger1 = time = 1
sysvar(4) = 0

[State 0]
type = Changeanim
trigger1 = Animexist(497) = 1
trigger1 = time = 2
value = 497

[State 0]
type = posset
trigger1 = time >= 1
y = 0

[State 0]
type = velset
trigger1 = time = 1
x = ifelse(p2bodydist x >= 0,-4,4)
y = 0

[State 0]
type = width
trigger1 = time = [5,25]
value = time,0

[State F]
type = selfstate
trigger1 = time = 26
trigger1 = anim != 497
value = 5120

[State F]
type = selfstate
trigger1 = anim = 497
trigger1 = animtime = 0
value = 0
ctrl = 1

;495通常ダウン		494　ダウン動作hitshake	493	ダウン動作吹き飛び&横転	492ダウン動作

[statedef 495];追撃以後、転倒時間が1になる。498に転ぶ攻撃でヒットでこのステートに移行
type = U
movetype = H
ctrl = 0
physics = N
face2p = 1

[State 0]
type = playerpush
trigger1 = 1
value = 0

[State 0]
type = velset
trigger1 = 1
x = 0
y = 0

[State 0]
type = changestate
trigger1 = statetype = L
value = 499

[State 5]
type = ChangeState
trigger1 = 1
value = 494

[Statedef 494]
type = U
movetype = H
physics = N

[State 0]
type = playerpush
trigger1 = 1
value = 0

[State 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 2]
type = VelSet
trigger1 = HitShakeOver
x = vel x / (0.54+const(movement.yaccel))
y = vel y / (0.54+const(movement.yaccel))

[State 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 0] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 4]
type = posfreeze
trigger1 = 1

[State 0]
type = changestate
trigger1 = hitshakeover
value = 493

; HIT_down (in air or triped)
[Statedef 493]
type    = A
movetype= H
physics = N

[State vel]
type = veladd
trigger1 = 1
y = 0.4

[State vel]
type = gravity
trigger1 = 1

[State 2]
type = changeanim
trigger1 = vel y > -3.0 || time > 6
trigger1 = selfanimexist(5060)
trigger1 = anim != [5060,5061]
value = 5060

[State 2]
type = changeanim
trigger1 = animtime = 0
trigger1 = !selfanimexist(5060)
trigger1 = anim != [5030,5050]
value = 5030

[State 2]
type = changeanim
trigger1 = animtime = 0
trigger1 = anim = 5030
trigger1 = !selfanimexist(5060)
value = 5050

[State 0]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 30
value = 492

;---------------------------------------------------------------------------
; HIT_LIEDOWN

[Statedef 492];ダウン
type    = L
movetype= H
physics = N
velset = 0,0

[State 5]
type = FallEnvShake
trigger1 = Time = 0

[State downtime];trip 20  other(Shockwave,K throw,Mtempest)
type = varset
trigger1 = Time = 0
sysvar(3) = ifelse(gethitvar(groundtype)=3,20,26)

[State 1] ;Hit ground anim (normal)
type = ChangeAnim2
trigger1 = time = 0
value = 5110

[State 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 1] ;If just died
type = selfState
triggerall = !alive
trigger1 = time = 0
value = 5150

[state down]
type = varset
trigger1 = time >= sysvar(3)
sysvar(4) = 0

[State 1]
type = selfState
triggerall = alive
trigger1 = time >= sysvar(3)
trigger2 = sysvar(4)
trigger2 = time >= 1
value = 5120

[State resetdown];reset down lim
type = ChangeState
triggerall = alive
trigger1 = sysvar(4)
trigger1 = time >= 0
value = 491

[State 2]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[Statedef 491];
type    = L
movetype= H
physics = N

[State 2]
type = VarSet
trigger1 = 1
sysvar(4) = 0

[State 1]
type = selfState
trigger1 = time = 1
value = 5120


[Statedef 489];tripped
type = U
movetype= H
physics = N
ctrl = 0
velset = 0,0
anim = 5012

[State freeze]
type = posfreeze
trigger1 = 1

[State freeze]
type = changeanim
trigger1 = 1
value = anim

[State 0]
type = changestate
trigger1 = statetype = L
trigger1 = pos y = 0
value = 499

[State 0]
type = changestate
trigger1 = statetype = A
value = 495

[State vel]
type = changeanim
trigger1 = HitShakeOver
value = 5070

[State 5]
type = ChangeState
trigger1 = HitShakeOver
value = 488

[Statedef 488]
type    = A
movetype= H
physics = N

[State muteki]
type = nothitby
trigger1 = time = 0
trigger1 = anim = 5070
value = SCA,AA,AP,AT
time = 17

[State vel]
type = velset
trigger1 = time = 0
x = 0
y = -5

[State 2]
type = VelAdd
trigger1 = anim = 5070
y = 0.555

[State F]
type = ChangeState
trigger1 = time > 1
trigger1 = pos y > 0
trigger1 = vel y > 0
value = 492


;=====================================================

;Fall中でもfall = 0の攻撃を食らうとfallが切れるようにします。デフォルトだと一度　fall　 状態になるとrecoverしなくなります。

[Statedef 691]
type = U
physics = N
movetype = H
ctrl = 0
velset = 0,0
face2p = 1

[State 0]
type = changestate
trigger1 = statetype = L
trigger1 = pos y = 0
value = 499

[State 0]
type = selfstate
trigger1 = time = 0
trigger1 = statetype != A
value = ifelse(statetype = C,5010,5000)

[State 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 2]
type = HitVelSet
trigger1 = HitShakeOver
x = 1
y = 1

[State 5]
type = ChangeState
trigger1 = HitShakeOver
value = 692

; fall切れる
[Statedef 692]
type    = A
movetype= H
physics = N

[State Debug Display]
type = DisplayToClipboard
trigger1 = 1
text = "hittime:%d,yaccel:%f"
params = gethitvar(hittime),GetHitVar(yaccel)
ignorehitpause = 1

[State 2]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 0]
type = changeanim
trigger1 = gethitvar(hittime) = 9
trigger1 = selfanimexist(5051)
value = 5051

[State 0]
type = changeanim
trigger1 = gethitvar(hittime) < 4
trigger1 = selfanimexist(5061)
value = 5061

[State 0]
type = changeanim
trigger1 = gethitvar(hittime) < 4
trigger1 = !selfanimexist(5061)
trigger1 = selfanimexist(5060)
value = 5060

[State 3]
type = changeState
trigger1 = Life > 0
trigger1 = !(hitover)
trigger1 = Pos Y >= 10
value = 296

[State 3]
type = selfState
triggerall = Life <= 0
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 10  ;.
value = 5150 ;HITA_RECOV

[state down]
type = varset
trigger1 = hitover
sysvar(4) = 0

[State 3]
type = selfState
trigger1 = hitover
value = 5040

;===============================================================
;打ち上げられ
[Statedef 5429]
type = A
physics = N
movetype = H
anim = 5012
velset = 0,0
face2p = 1

[State 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5430

[Statedef 5430]
type = A
physics = N
movetype = H
anim = 5051

[State 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 0]
type = NotHitBy
trigger1 = time = 0
value = SCA,NT,ST,HT
time = 25

[State 0]
type = HitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP
time = 25

[State 0]
type = veladd
trigger1 = 1
y = 0.75

[State 0]
type = changeanim
trigger1 = time = 28
trigger1 = selfanimexist(5061)
value = 5061

[State 0]
type = changeanim
trigger1 = time = 28
trigger1 = !selfanimexist(5061)
trigger1 = selfanimexist(5060)
value = 5060

[state down]
type = varset
trigger1 = time >= 30
sysvar(4) = 0

[State 0]
type = selfstate
trigger1 = time > 30
value = 5040

[State Debug Display]
type = DisplayToClipboard
trigger1 = 1
text = "hittime:%d,vel y:%f"
params = gethitvar(hittime),vel y
ignorehitpause = 1


;---------------------------------------------------------------------------

[Statedef 10000]
type    = S
movetype = I
physics = N
sprpriority = 2
anim = 10001
ctrl = 0
pos = const(size.xscale),const(size.yscale)
scale = const(size.xscale),const(size.yscale)
supermovetime = 100


[State 10000, BindToParent]
type = BindToParent
trigger1 = 1
facing = 1
pos = 0,0
time = ifelse (parent, Var(50) = 1, -1, 0)

[State 10000, PlaySnd]
type = PlaySnd
trigger1 = (parent, Var(31) = 1) && (Time = 1) && (RoundState = [2,3])
value = 5,4

[State 10000, ChangeState To Attacks]
type = ChangeState
triggerall = parent, Var(50) = 1
trigger1 = (parent, MoveType = A) ;|| (parent, StateNo = 1402) || (parent, StateNo = 2100)
value = 10001

[State 10000, ChangeState]
type = ChangeState
trigger1 = parent, var(59)<=0
trigger1 = parent, Var(50) = 0
trigger1 = parent, command = "x" && parent, command = "a"
value = 20000

;---------------------------------------------------------------------------
;Standing

[State 10000, Stand 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 0)
value = 10000
elem = parent, animelemno(0)
;---------------------------------------------------------------------------
;Turning

[State 1000500, Turning 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5)
value = 10005
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch Turning

[State 1000600, Crouch Turning 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 6)
value = 10006
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand to Crouch

[State 1001000, Stand to Crouch 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 10)
value = 10010
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouching

[State 1001100, Crouching 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 11)
value = 10011
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch to Stand

[State 1001200, Crouch to Stand 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 12)
value = 10012
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Walking Forward

[State 1002000, Walking Forward 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 20)
trigger2 = (parent, Anim = 25)
value = 10020
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Walking Back

[State 1002100, Walking Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 21)
trigger2 = (parent, Anim = 26)
value = 10021
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Jump Start Frame


[State 1004000, Jump Forward/Back Start Frame]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 39)
value = 10039
elem = parent, animelemno(0)

[State 1004000, Jump Up Start Frame]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 40)
value = 10040
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Jumping Up

[State 1004100, Jumping Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 41)
value = 10041
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Jumping Forward


[State 1004200, Jumping Forward 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 42)
value = 10042
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Jumping Back

[State 1004300, Jumping Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 43)
value = 10043
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Super Jump Up

[State 1004400, Jumping Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 44)
value = 10044
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Super Jump Forward


[State 1004500, Jumping Forward 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 45)
value = 10045
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Super Jump Back

[State 1004600, Jumping Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 46)
value = 10046
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Jump Land

[State 1004700, Jump Land 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 47)
value = 10047
elem = parent, animelemno(0)

[State 1004700, Jump Land 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = anim=10047
value = 3

[State 1004800, Jump Land 2]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 48)
value = 10048
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Falling

[State 1004600, Jumping Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 57)
value = 10057
elem = parent, animelemno(0)

[State 1004600, Jumping Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 58)
value = 10058
elem = parent, animelemno(0)

[State 1004600, Jumping Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 59)
value = 10059
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Dash Forward

[State 1010000, Dash Forward 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 100)
value = 10100
elem = parent, animelemno(0)

[State 1010000, Dash Forward 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 101)
value = 10101
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Dash Back

[State 1010500, Dash Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 105)
value = 10105
elem = parent, animelemno(0)

[State 1010500, Dash Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 106)
value = 10106
elem = parent, animelemno(0)

[State 1010500, Dash Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 107)
value = 10107
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Lose

[State 1017000, Lose 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 171)
value = 10171
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Win 1 


[State 1018100, Win 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 181)
value = 10181
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Win 2 

[State 1018200, Win 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 182)
value = 10182
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Win 3 

[State 1018300, Win 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 183)
value = 10183
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Win 4 

[State 1018300, Win 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 184)
value = 10184
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Win 3 

[State 1018300, Win 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 185)
value = 10185
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Taunt

[State 1019500, SprPriority 2]
type = SprPriority
trigger1 = (parent, Anim = 195)
value = 3

[State 1019500, Taunt 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 195)
value = 10195
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Intro 1

[State 1019500, SprPriority 2]
type = SprPriority
trigger1 = (parent, Anim = 190)
value = 3

[State 1019500, Intro 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 190)
value = 10190
elem = parent, animelemno(0)


[State 1019500, SprPriority 2]
type = SprPriority
trigger1 = (parent, Anim = 191)
value = 3

[State 1019500, Intro 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 191)
value = 10191
elem = parent, animelemno(0)

[State 1019500, SprPriority 2]
type = SprPriority
trigger1 = (parent, Anim = 193)
value = 3

[State 1019500, Intro 2]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 193)
value = 10193
elem = parent, animelemno(0)


[State 1019500, Taunt 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 990)
value = 10990
elem = parent, animelemno(0)

[State 1300700, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 990)
trigger1 = anim = 10990
trigger1 = AnimElemTime(1)=0
value=9

;===========================================================================
;SHIELD GETHIT
;===========================================================================

;Guardstart (stand)


[State 1012000, Guardstart 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 120)
value = 10120
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Guardstart (crouch)

[State 1012100, Guardstart 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 121)
value = 10121
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Guardstart (air)

[State 1012200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 122)
value = 3


[State 1012200, Guardstart 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 122)
value = 10122
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Guard (stand)

[State 1013000, Guard 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 130)
value = 10130
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Guard (crouch)

[State 1013100, Guard 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 131)
value = 10131
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Guard (air)

[State 1013200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 132)
value = 2

[State 1013200, Guard 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 132)
value = 10132
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Guardend (stand)

[State 1014000, Guardend 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 140)
value = 10140
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Guardend (crouch)

[State 1014100, Guardend 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 141)
value = 10141
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Guardend (air)

[State 1014200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 142)
value = 2

[State 1014200, Guardend 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 142)
value = 10142
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Hit back while guarding (stand)

[State 1015000, Hitback While Guarding 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 150)
value = 10150
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Hit back while guarding (crouch)

[State 1015100, Hitback While Guarding 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 151)
value = 10151
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Hit back while guarding (air)

[State 1015200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 152)
value = 2
elem = parent, animelemno(0)

[State 1015200, Hitback While Guarding 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 152)
value = 10152
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand/Air Hit high (light)

[State 1500000, GetHit X 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5000)
value = 15000
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Stand/Air Hit high (medium)

[State 1500100, GetHit Y 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5001)
value = 15001
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Stand/Air Hit high (hard)

[State 1500200, GetHit Z 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5002)
value = 15002
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Shield Stand Recover high (light)

[State 1500500, GetHit X Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5005)
value = 15005
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Shield Stand Recover high (medium)

[State 1500600, GetHit Y Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5006)
value = 15006
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Shield Stand Recover high (hard)

[State 1500700, GetHit Z Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5007)
value = 15007
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand/Air Hit low (light)

[State 1501000, GetHit A 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5010)
value = 15010
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Stand/Air Hit low (medium)

[State 1501100, GetHit B 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5011)
value = 15011
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand/Air Hit low (hard)

[State 1501200, GetHit C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5012)
value = 15012
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Shield Stand Recover low (medium)

[State 1501600, GetHit B Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5016)
value = 15016
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Shield Stand Recover low (hard)

[State 1501700, GetHit C Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5017)
value = 15017
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Crouch Hit (light)

[State 1502000, Crouch GetHit X 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5020)
value = 15020
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch Hit (medium)


[State 1502100, Crouch GetHit Y 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5021)
value = 15021
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch Hit (hard)


[State 1502200, Crouch GetHit Z 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5022)
value = 15022
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Crouch Recover (light)

[State 1502500, Crouch X Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5025)
value = 15025
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch Recover (medium)


[State 1502600, Crouch Y Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5026)
value = 15026
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Crouch Recover (hard)

[State 1502700, Crouch Z Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5027)
value = 15027
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand/Air Hit Back


[State 1503000, Hit Back 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5030)
value = 15030
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Air Recover (also Fall-Recover In Mid-Air)


[State 1504000, Air Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5040)
value = 15040
elem = parent, animelemno(0)

[State 1504000, Air Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1= (parent, Anim = 5210)
value = 15210
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Air Fall (going up) (also Stand/Air Hit Transition)

[State 1505000, Air Fall Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5050)
value = 15050
elem = parent, animelemno(0)

[State 1505000, Air Fall Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5035)
value = 15035
elem = parent, animelemno(0)

[State 1505000, Air Fall Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5051)
value = 15051
elem = parent, animelemno(0)

[State 1505000, Air Fall Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5055)
value = 15055
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Air Fall (up-type, going up)

[State 1505100, Air Fall Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5051)
value = 15051
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Air Fall (coming down)

[State 1506000, Air Fall Down 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5060)
value = 15060
elem = parent, animelemno(0)


[State 1506000, Air Fall Down 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5061)
value = 15061
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Tripped

[State 1507000, Tripped 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5070)
value = 15070
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;LieDown Hit (stay down)

[State 1508000, LieDown Hit 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5080)
value = 15080
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;LieDown Hit (hit up into air)


[State 1509000, LieDown Hit 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5090)
value = 15090
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Hit Ground From Fall

[State 1510000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5100)
value = 2

[State 1510000, Hit Ground From Fall 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5100)
value = 15100
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Bounce Into Air

[State 1510000, Bounce Into Air 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5160)
value = 15160
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Hit Ground From Bounce

[State 1517000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5170)
value = 2

[State 1517000, Hit Ground From Bounce 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5170)
value = 15170
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;LieDown

[State 1511000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5110)
value = 2

[State 1511000, LieDown 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5110)
value = 15110
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Get Up From LieDown

[State 1512000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5120)
value = 2


[State 1512000, Get Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5120)
value = 15120
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;LieDead

[State 1515000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5150)
value = 2

[State 1515000, LieDead 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5150)
value = 15150
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Fall-Recover Near Ground

[State 1520000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5200)
value = 2

[State 1520000, Fall-Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5200)
value = 15200
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Fall-Recover Near Ground

[State 1520000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5201)
value = 2

[State 1520000, Fall-Recover 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5201)
value = 15201
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Dizzy

[State 1530000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5200)
value = 2

[State 1530000, Dizzy 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5300)
value = 15300
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Hit Spinning Up

[State 1525000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5250)
trigger2 = (parent, Anim = 5251)
value = 2


[State 1525000, Spin Up 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5250)
value = 15250
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Hit Spinning Down

[State 1525100, Spin Down 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 5251)
value = 15251
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
; Cartwheel

[State 1130000, SprPriority 1]
type = SprPriority
trigger1 = (parent, Anim = 1300)
value = 2

[State 1130000, Cartwheel 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1500)
value = 11500
elem = parent, animelemno(0)



;---------------------------------------------------------------------------
; Recovery Roll

[State 1090000, SprPriority 1]
type = SprPriority
trigger1 = (parent, Anim = 700)
value = 2

[State 1090000, Recovery Roll 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 700)
value = 10700
elem = parent, animelemno(0)

[State 1090000, SprPriority 1]
type = SprPriority
trigger1 = (parent, Anim = 710)
value = 2

[State 1090000, Recovery Roll 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 710)
value = 10710
elem = parent, animelemno(0)

[State 1090000, Recovery Roll 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 900)
value = 10900
elem = parent, animelemno(0)

[State 1090000, Recovery Roll 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 910)
value = 10910
elem = parent, animelemno(0)

[State 1090000, Recovery Roll 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 920)
value = 10920
elem = parent, animelemno(0)


[State 1090000, Recovery Roll 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 555)
value = 10555
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Final Justice (bounce away after hitting ground)

[State 1300600, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3006)
value = 13006
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Final Justice (landing)

[State 1300700, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3007)
value = 13007
elem = parent, animelemno(0)

[State 1300700, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3007)
trigger1 = anim = 13007
trigger1 = AnimElemTime(1)=0
value=3



;===========================================================================
;SHIELD ATTACKS
;===========================================================================
;---------------------------------------------------------------------------
;Attacks

[Statedef 10001]
type    = S
movetype = I
physics = N
sprpriority = 3
ctrl = 0
ignorehitpause = 0


[State 10001, BindToParent]
type = BindToParent
trigger1 = 1
facing = 1
pos = 0,0
time = ifelse (parent, Var(50) = 1, -1, 0)

[State 10001, PlaySnd]
type = PlaySnd
trigger1 = (parent, Var(31) = 1) && (Time = 1) && (RoundState = [2,3])
value = 5,4

[State 10001, ChangeState]
type = ChangeState
trigger1 = parent, Var(50) = 1
trigger1 = (parent, MoveType != A) && (parent, StateNo != 1402) ;&& (parent, StateNo != 2100)
value = 10000

;---------------------------------------------------------------------------
;Stand X

[State 1020000, Stand X 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 200)
value = 10200
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand Y

[State 1020100, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 210)
value = 3

[State 1020100, Stand Y 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 210) 
value = 10210
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand Z (without shield)

[State 1020200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 220)
value = 3
elem = parent, animelemno(0)


[State 1020200, Stand Z 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 220)
value = 10220
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand A

[State 1021000, Stand A 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 230)
value = 10230
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand B 1

[State 1021100, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 240)
value = 3

[State 1021100, Stand B1 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 240)
value = 10240
elem = parent, animelemno(0)

[State 1021100, Stand B1 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 241)
value = 10241
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Stand C

[State 1021200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 250)
value = 3


[State 1021200, Stand C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 250)
value = 10250
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch X

[State 1040000, Crouch X 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 400)
value = 10400
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch Y (with shield)

[State 1040100, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 410)
value = 3

[State 1040100, Crouch Y 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 410)
value = 10410
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch Z (without shield)

[State 1040200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 420)
value = 3


[State 1040200, Crouch Z 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 420)
value = 10420
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch A

[State 1041000, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 430)
value = 3

[State 1041000, Crouch A 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 430)
value = 10430
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch B

[State 1041100, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 440)
value = 3

[State 1041100, Crouch B 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 440)
value = 10440
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Crouch C

[State 1041200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 450)
value = 3


[State 1041200, Crouch C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 450)
value = 10450
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Jump X

[State 1060000, Jump X 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 600)
value = 10600
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Jump Y (with shield)

[State 11005, Dust 1]
type = null;Explod
trigger1 = (parent, Anim = 610)
anim = 10612
ID=10612
postype = P1
pos = 0,0
sprpriority = 3
ownpal = 1

[State 1060100, SprPriority 1]
type = SprPriority
trigger1 = (parent, Anim = 610) 
value = 0


[State 1060100, Jump Y 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 610)
value = 10610
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Jump Z (without shield)

[State 1060200, SprPriority 1]
type = SprPriority
trigger1 = (parent, Anim = 620)
value = 3


[State 1060200, Jump Z 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 620)
value = 10620
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Jump A

[State 1061000, Jump A 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 630)
value = 10630
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Jump B

[State 1061100, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 640)
value = 3

[State 1061100, Jump B 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 640)
value = 10640
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;up Jump C

[State 1061200, SprPriority 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 650)
value = 3

[State 1061200, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 650)
value = 10650
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Down Jump C

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 651)
value = 10651
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Jump C

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 652)
value = 10652
elem = parent, animelemno(0)


;---------------------------------------------------------------------------
;Throw P (throwing opponent)

[State 1080000, SprPriority 0]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 800)
value = 2


[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 800)
value = 10800
elem = parent, animelemno(0)


[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 810)
value = 10810
elem = parent, animelemno(0)

[State 1082000, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 820)
value = 10820
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 840)
value = 10840
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 850)
value = 10850
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 860)
value = 10860
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 861)
value = 10861
elem = parent, animelemno(0)

;===========================================================================
;SHIELD SPECIAL MOVES
;===========================================================================
;---------------------------------------------------------------------------
;Shield Slash X

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1000)
value = 11000
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1010)
value = 11010
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1020) 
value = 11020
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1002)
value = 11002
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1012)
value = 11012
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1022)
value = 11022
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1001)
value = 11001
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1011) 
value = 11011
elem = parent, animelemno(0)

[State 1100000, ChangeState 1]
type = ChangeState
trigger1 = (parent, Anim = 1000) && (parent, AnimElemTime(7) = 0) && (parent, StateNo = 1000) && (parent, MoveContact = 0)
value = 11005

[State 1101000, ChangeState]
type = ChangeState
trigger1 = (parent, Anim = 1010) && (parent, AnimElemTime(7) = 0) && (parent, StateNo = 1010) && (parent, MoveContact = 0)
value = 11015

[State 1102000, ChangeState]
type = ChangeState
trigger1 = (parent, Anim = 1020) && (parent, AnimElemTime(8) = 0) && (parent, StateNo = 1020) && (parent, MoveContact = 0)
value = 11025



;---------------------------------------------------------------------------
;Air Shield Slash X

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1200)
value = 11200
elem = parent, animelemno(0)

[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1210)
value = 11210
elem = parent, animelemno(0)


[State 1061300, Jump C 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1220)
value = 11220
elem = parent, animelemno(0)

[State 1110000, ChangeState]
type = ChangeState
trigger1 = (parent, Anim = 1200) && (parent, AnimElemTime(7) = 0) && (parent, StateNo = 1200) && (parent, MoveContact = 0)
value = 11105

[State 1111000, ChangeState]
type = ChangeState
trigger1 = (parent, Anim = 1210) && (parent, AnimElemTime(7) = 0) && (parent, StateNo = 1210) && (parent, MoveContact = 0)
value = 11115

[State 1112000, ChangeState]
type = ChangeState
trigger1 = (parent, Anim = 1220) && (parent, AnimElemTime(7) = 0) && (parent, StateNo = 1220) && (parent, MoveContact = 0)
value = 11125


;---------------------------------------------------------------------------
; Charging Star

[State 1140000, SprPriority 1]
type = SprPriority
trigger1 = (parent, Anim = 1300)
value = 3

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1300)
value = 11300
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1310)
value = 11310
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1320)
value = 11320
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1340)
value = 11320
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1341)
value = 11320
elem = parent, animelemno(0)



;------------------------------------------------------------------------
;昇竜

[State 1140000, SprPriority 1]
type = SprPriority
trigger1 = (parent, Anim = 1400)
value = 3

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1400)
value = 11400
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1401)
value = 11401
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1410)
value = 11410
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1402)
value = 11402
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 1412)
value = 11410
elem = parent, animelemno(0)

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 2100)
value = 12100
elem = parent, animelemno(0)
IgnoreHitPause = 1

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 2120)
value = 12120
elem = parent, animelemno(0)
IgnoreHitPause = 1

[State 1140000, Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 2121)
value = 12121
elem = parent, animelemno(0)
IgnoreHitPause = 1


;Final Justice

[State 1300000, SprPriority 1]
type = SprPriority
trigger1 = (parent, Anim = 3000)
value = 3

[State 1300000, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3000)
value = 13000
elem = parent, animelemno(0)

[State 1300000, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = anim = 13000
trigger1 = animelemNO(0)=[6,21]
value = -1

[State 1300000, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = anim = 13000
trigger1 = !(animelemNO(0)=[6,21])
value = 4

[State 1300000, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3001)
value = 13001
elem = parent, animelemno(0)

[State 1300000, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3002)
value = 13002
elem = parent, animelemno(0)

[State 1300000, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3002)
trigger1 = anim = 13002
trigger1 = AnimElemTime(1)=0
value=5

[State 1300000, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3002)
trigger1 = anim = 13002
trigger1 = AnimElemTime(17)=0
value=-1

[State 1300000, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3002)
trigger1 = anim = 13002
trigger1 = AnimElemTime(21)=0
value=5

[State 1300000, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3003)
value = 13003
elem = parent, animelemno(0)

[State 1300000, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3004)
value = 13004
elem = parent, animelemno(0)

[State 1300000, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3004)
trigger1 = anim = 13004
trigger1 = AnimElemNo(0)=[1,4]
value=-1

[State 1300000, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3004)
trigger1 = anim = 13004
trigger1 = !(AnimElemNo(0)=[1,4])
value=5

[State 1300000, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3005)
value = 13005
elem = parent, animelemno(0)

[State 1300000, Final Justice 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3005)
trigger1 = anim = 13005
value=9

[State 1300000, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3006)
value = 13006
elem = parent, animelemno(0)


[State 1300000, Final Justice 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3007)
value = 13007
elem = parent, animelemno(0)

;---------------------------------------------------------------------------
;Hyper Charging Star

[State 1300700, Hyper Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3100)
value = 13100
elem = parent, animelemno(0)

[State 1300700, Hyper Charging Star 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3100)
trigger1 = anim = 13100
trigger1 = AnimElemTime(1)=0
value=9

[State 1300700, Hyper Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3101)
value = 13101
elem = parent, animelemno(0)
ignorehitpause = 1

[State 1300700, Hyper Charging Star 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3101)
trigger1 = anim = 13101
trigger1 = AnimElemTime(1)=0
value=9

[State 1300700, Hyper Charging Star 1]
type = ChangeAnim
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3102)
value = 13102
elem = parent, animelemno(0)

[State 1300700, Hyper Charging Star 1]
type = SprPriority
triggerall = parent, Var(50) = 1
trigger1 = (parent, Anim = 3102)
trigger1 = anim = 13102
trigger1 = AnimElemTime(1)=0
value=9

;---------------------------------------------------------------------------
; Shield Slash X (flying shield)
[Statedef 11005]
type    = A
movetype = A
physics = N
sprpriority = 3
anim = 1100
juggle = 1
velset = 0,0
ctrl = 0

[State 11005, VelSet 1]
type = VelSet
trigger1 = Time = 1
x = 6.5
y = 0

[State 11005, VelSet 2]
type = VelSet
trigger1 = Time = 11
x = 8
y = 0

[State 11005, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 89
y = -27

[State 11005, HitDef]
type = HitDef
trigger1 = time=0
attr = S, SP
damage = 7*ifelse(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)>=1,floor(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 1,7
sparkno = S1101
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,2
guardsound = S6,0
air.velocity = -11, -2
airguard.velocity = -8.5,3
air.hittime = 5
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 0
guard.slidetime = 11 
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12
guard.velocity = -12
air.type = Low
yaccel = 0.99
down.bounce = 1
down.velocity = -4,-7
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 25)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 11005, HitOverRide]
type = HitOverRide
trigger1 = Time = 0
attr = SCA, AA, AT, AP, NA, NT, NP, HA, HT, HP
slot = 0
stateno = 21000
time = -1

[State 11005, Bounce Off Screen]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= -20
value = 21000

[State 11005, Bounce Off Opponent]
type = ChangeState
trigger1 = MoveContact = 1
value = 21005

;---------------------------------------------------------------------------
; Shield Slash Y (flying shield)
[Statedef 11015]
type    = A
movetype = A
physics = N
sprpriority = 3
anim = 1100
juggle = 1
velset = 0,0
ctrl = 0

[State 11015, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8

[State 11015, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 90
y = -73

[State 11015, HitDef]
type = HitDef
trigger1 = time=0
attr = S, SP
damage = 7*ifelse(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)>=1,floor(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 1,7
sparkno = S1101
guard.sparkno = S8050
sparkxy = -10,1
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12
guard.velocity = -12
air.type = Low
yaccel = 0.99
air.velocity = -11, -2
airguard.velocity = -8.5,3
air.hittime = 5
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 0
guard.slidetime = 11 
down.bounce = 1
down.velocity = -4,-4
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 11015, HitOverRide]
type = HitOverRide
trigger1 = Time = 0
attr = SCA, AA, AT, AP, NA, NT, NP, HA, HT, HP
slot = 0
stateno = 21000
time = -1

[State 11015, Bounce Off Screen]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= -20
value = 21000

[State 11015, Bounce Off Opponent]
type = ChangeState
trigger1 = MoveContact = 1
value = 21005


;---------------------------------------------------------------------------
; Shield Slash Z (flying shield)
[Statedef 11025]
type    = A
movetype = A
physics = N
sprpriority = 3
anim = 1110
juggle = 5
velset = 0,0
ctrl = 0

[State 11025, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8
y = -3.6

[State 11025, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 46
y = -75

[State 11025, HitDef]
type = HitDef
trigger1 = time=0
attr = S, SP
damage = 7*ifelse(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)>=1,floor(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 1,7
sparkno = S1102
guard.sparkno = S8050
sparkxy = -10,-25
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12
guard.velocity = -12
air.type = Low
yaccel = 0.99
air.velocity = -11, -2
airguard.velocity = -8.5,3
air.hittime = 5
fall.xvelocity = 0
fall.yvelocity = -1
guard.slidetime = 11 
down.bounce = 1
down.velocity = -4,-4
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 11025, HitOverRide]
type = HitOverRide
trigger1 = Time = 0
attr = SCA, AA, AT, AP, NA, NT, NP, HA, HT, HP
slot = 0
stateno = 21000
time = -1

[State 11025, Bounce off Screen]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= -20
value = 21000

[State 11025, Bounce Off Opponent]
type = ChangeState
trigger1 = MoveContact = 1
value = 21005


;---------------------------------------------------------------------------
; Air Shield Slash X (flying shield)
[Statedef 11105]
type    = A
movetype = A
physics = N
sprpriority = 3
anim = 1120
juggle = 5
velset = 0,0
ctrl = 0

[State 11105, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8
y = 3.8

[State 11105, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 72
y = -52

[State 11105, HitDef]
type = HitDef
trigger1 = time=0
attr = S, SP
damage =7*ifelse(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)>=1,floor(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 1,7
sparkno = S1103
guard.sparkno = S8050
sparkxy = -10,15
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.hittime = 8
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12
guard.velocity = -12
air.type = Low
airguard.velocity = -8.5,3
yaccel = 0.99
air.velocity = -11, -2
down.bounce = 1
down.velocity = -4,-4
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 11105, Bounce Off Screen]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= -20
value = 21000

[State 11105, Bounce Off Opponent]
type = ChangeState
trigger1 = MoveContact = 1
trigger2 = (Pos Y >= 0) && (Time >= 2);hit ground
value = 21005


;---------------------------------------------------------------------------
; Air Shield Slash Y (flying shield)
[Statedef 11115]
type    = A
movetype = A
physics = N
sprpriority = 3
anim = 1100
juggle = 1
velset = 0,0
ctrl = 0

[State 11115, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8

[State 11115, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 91
y = -85

[State 11115, HitDef]
type = HitDef
trigger1 = time=0
attr = S, SP
damage = 7*ifelse(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)>=1,floor(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 1,7
sparkno = S1101
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.hittime = 5
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12
guard.velocity = -12
air.type = Low
yaccel = 0.99
air.velocity = -11, -2
airguard.velocity = -8.5,3
down.bounce = 1
down.velocity = -4,-4
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 11115, HitOverRide]
type = HitOverRide
trigger1 = Time = 0
attr = SCA, AA, AT, AP, NA, NT, NP, HA, HT, HP
slot = 0
stateno = 21000
time = -1

[State 11115, Bounce Off Screen]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= -20
value = 21000

[State 11115, Bounce Off Opponent]
type = ChangeState
trigger1 = MoveContact = 1
value = 21005


;---------------------------------------------------------------------------
; Air Shield Slash Z (flying shield)
[Statedef 11125]
type    = A
movetype = A
physics = N
sprpriority = 3
anim = 1110
juggle = 1
velset = 0,0
ctrl = 0

[State 11125, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8
y = -3.6

[State 11125, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 91
y = -133

[State 11125, HitDef]
type = HitDef
trigger1 = time=0
attr = S, SP
damage = 7*ifelse(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)>=1,floor(12*root,fvar(6)*(1+(root,fvar(4)-4)/10*1.25)),1),7
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 1,7
sparkno = S1102
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.hittime = 5
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -12
guard.velocity = -12
air.type = Low
yaccel = 0.99
air.velocity = -11, -2
airguard.velocity = -8.5,3
down.bounce = 1
down.velocity = -4,-4
ID = 1+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = ifelse(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 11125, HitOverRide]
type = HitOverRide
trigger1 = Time = 0
attr = SCA, AA, AT, AP, NA, NT, NP, HA, HT, HP
slot = 0
stateno = 21000
time = -1

[State 11125, Bounce Off Screen]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= -20
value = 21000

[State 11125, Bounce Off Opponent]
type = ChangeState
trigger1 = MoveContact = 1
value = 21005


;---------------------------------------------------------------------------
; Shield (bouncing off screen)
[Statedef 21000]
type    = A
movetype = I
physics = N
sprpriority = 2
anim = 20000
ctrl = 0

[State 21000, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.50

[State 21000, VelSet]
type = VelSet
trigger1 = Time = 1
x = (ParentDist X)/55
;x = ifelse(facing = -1,(ParentDist X)/75,(-1 * ParentDist X)/75)
y = -8

[State 21000, ChangeState 1]
type = ChangeState
trigger1 = parent, Var(50) = 1
value = 10000

[State 21000, ChangeState 2]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Time >= 5)
value = 20000


;---------------------------------------------------------------------------
; Shield (bouncing off opponent)
[Statedef 21005]
type    = A
movetype = I
physics = N
sprpriority = 2
anim = 20000
ctrl = 0

[State 21005, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.50

[State 21005, VelSet]
type = VelSet
trigger1 = Time = 1
x = (ParentDist X)/55
y = -8

[State 21005, ChangeState 1]
type = ChangeState
trigger1 = parent, Var(50) = 1
value = 10000

[State 21005, ChangeState 2]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Time >= 5)
value = 20000

;---------------------------------------------------------------------------
; Shield (falling down after being off screen)
[Statedef 21010]
type    = A
movetype = I
physics = N
sprpriority = 2
anim = 20000
ctrl = 0

[State 21010, PosSet]
type = PosSet
trigger1 = Time = 0
x = parent, Pos X
y = -300

[State 21010, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.91

[State 2000010, ChangeState 1]
type = ChangeState
trigger1 = parent, Var(50) = 1
value = 10000

[State 21010, ChangeState 2]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Time >= 5)
value = 20000

;---------------------------------------------------------------------------
; Shield On Ground
[Statedef 20000]
type    = S
movetype = I
physics = N
sprpriority = 3
anim = 20001
velset = 0,0
ctrl = 0

[State 11005, Dust 1]
type = Explod
trigger1 = AnimElem = 25
anim = 20002
postype = P1
pos = 0,0
sprpriority = 5
id = 1990
bindtime = -1
removetime = -1
scale = .83, 1.07

[State 11005, Dust 1]
type = Explod
triggerall = name = "Captain America"
trigger1 = AnimElem = 25
anim = 20003
postype = P1
pos = 0,-26
sprpriority = 5
ownpal = 1
id = 1990
bindtime = -1
removetime = -1
scale = .83, 1.07

[State 11005, Dust 1]
type = Explod
triggerall = name = "Captain America"
trigger1 = AnimElem = 25
anim = 20004
postype = P1
pos = 0,-35
sprpriority = 5
ownpal = 1
id = 1990
bindtime = -1
removetime = -1
scale = .83, 1.07

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = parent, Var(50) = 1
id = 1990

[State 20000, ParentVarSet]
type = ParentVarSet
trigger1 = Time = 0
trigger2 = FrontEdgeBodyDist > -45
trigger2 = BackEdgeBodyDist > -45
v = 14
value = 0
ignorehitpause = 1

[State 20000, ParentVarAdd]
type = ParentVarAdd
trigger1 = FrontEdgeBodyDist <= -45
trigger2 = BackEdgeBodyDist <= -45
v = 14
value = 1
ignorehitpause = 1

[State 20000, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0


[State 20000, ChangeState];if off screen for a while
type = ChangeState
triggerall = parent, Var(14) = 500
trigger1 = FrontEdgeBodyDist <= -50
trigger2 = BackEdgeBodyDist <= -50
value = 21010

[State 20000, ChangeState]
type = ChangeState
trigger1 = parent, Var(50) = 1
value = 10000

; アドバンシングガード(ヘルパー) 
[Statedef 8060]
type = A
physics = N
anim = 8061
velset = -14,0
ctrl = 0

[State 8060, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,10

[State 8060, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 8060, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 8060, DestroySelf]
type = DestroySelf
trigger1 = time = 16;24

; 着地エフェクト 
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

; ===================== (Hyper BG and Hyper Portait) =======================
; Hyper BG and Hyper Portait
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 200
volumescale = 200
value = 1,0

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(47) = 1 && !numexplod(8505) && stateno = 9100
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(47) = 0 || root,var(47) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(47) = 0
trigger2 = root,movetype = H

 
[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,17

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,16

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)

; HIT_FALLRECOVER (on the ground) 
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,8,-4)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


; ターゲットリカバー 
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)
 
; ターゲットダウン追撃復帰 
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)
 
; ターゲットバウンド 
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5040

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6


[State 9910, PosSet]
type = PosSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -5

[State 1300, 6]
type = PalFX
triggerall = name = "Dhalsim"
trigger1 = animelem = 1
time = 18
sinadd =  255,255,255,43
ignorehitpause = 0

[State 5100, 10]
type = PlaySnd
triggerall = name = "Dhalsim"
trigger1 = Time = 1
value = S3,0

[State 9910, VelSet]
type = VelSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -4
x = 0

[State 9910, VelAdd]
type = VelAdd
triggerall = name = "Dhalsim"
trigger1 = time = 1
y = 0

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .82;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

[Statedef -2]

[State Debug Display]
type = DisplayToClipboard
text = "var(39)=%d var(44)=%d,var(43)=%d,var(59)=%d\n"
params = var(39),var(44),floor(fvar(25)),floor(fvar(26))
trigger1 = numenemy

[State Append]
type =null;AppendToClipboard
text = "Vel y=%f"
params = enemy,vel y
trigger1 = Numenemy
ignorehitpause=1

;Pos Y
[State -2]
type = PosSet
trigger1 = PrevStateno = [100,107] 
trigger1 = StateType != A && Pos Y != 0
y = 0

; ===================== (Recovery p2 effect and sound) =======================

[State 0, PlaySnd]
type = PlaySnd
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,10
channel = 4
volume = 155
volumescale = 155

[State 0, PlaySnd]
type = PlaySnd
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,7
channel = 4
volume = 155
volumescale = 155

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 20, 2]
type = envshake
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
time = 8
freq = 80
ampl = 3

; ===================== (Pre-walking) =======================

[State -2, Pre-walking state]
type = ChangeState
;triggerall = !var(59)
trigger1 = prevstateno = [80004, 80097]
trigger2 = RoundNo != 1              ;Enable If Round Number is > 1
trigger2 = RoundState = 1           ;RoundState < 2 and
trigger2 = RoundState = 2
trigger2 = stateno = 0              ;Current state is 0
value = 21
ctrl = 0

[State -2, Remember the last Position (X)]
type = VarSet
triggerall = RoundState < 2
trigger1 = stateno = [0, 21] ;Enable after Intro
fvar(5) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(5) != 0
trigger1 = prevstateno != [80004, 80097]
x = fvar(5)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(5) = 0

; ===================== (p1 & p2 icon) =======================

[State -2, 画面外表示]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, 画面外表示]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; 矢印表示(回転) 
[State -2, 画面外表示]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(13) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(13) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(13)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, 画面外表示]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(13) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(13) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(13)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, 画面外表示]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 240-const(size.head.pos.y)
id = 8596

[State -2, 画面外表示]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, 画面外表示]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, 画面外表示]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, 画面外表示]
type = VarSet
trigger1 = numenemy
var(13) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; 矢印表示 
[State -2, 画面外表示]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8596)
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(13)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, 画面外表示]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8598)
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(13)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; 画面外表示(相手) 
	
; プレイヤー表示 
[State -2, 画面外表示]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, 画面外表示]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; 矢印表示(回転) 
[State -2, 画面外表示]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(8) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(8) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(8)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, 画面外表示]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(8) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(8) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(8)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, 画面外表示]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 240-enemy,const(size.head.pos.y)
id = 18596

[State -2, 画面外表示]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, 画面外表示]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, 画面外表示]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, 画面外表示]
type = VarSet
trigger1 = numenemy = 1
var(8) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; 矢印表示 
[State -2, 画面外表示]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(8)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, 画面外表示]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(8)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

  
; 試合終了 
[State -2, 試合終了]
type = AssertSpecial
trigger1 = roundstate > 2
flag = nowalk
 
; 回りこみ禁止 
[State -2, 回りこみ禁止]
type = Width
trigger1 = vel x > 0 && movetype != H
edge = 5,5


; ===================== (Finish Round Helper) =======================

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090

[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998

; ===================== (System Messages) =======================

[State -2, VS_Combo]
type = VarSet
triggerall = (var(36)!=10) || (var(36)=10 && movehit && statetype != A)
trigger1 = var(35) >= 3
trigger2 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = [5000,5899])
var(36) = 1+(var(35)>3)+(var(35)>5)+(var(35)>7)+(var(35)>9)+(var(35)>29)+(var(35)>59)+(var(35)>=100)-(var(35)=-1)
ignorehitpause = 1

[State -2, Air Combo]
type = VarSet
triggerall = var(35) >= 3 && statetype = A && var(36)!=10 && var(6)
trigger1 = (movehit)
var(36) = 10
ignorehitpause = 1


[State -2, Danger]
type = VarSet
trigger1 = var(52) !=1 && roundstate=2 && life <= Ceil(const(data.life)/5)
var(36) = 9
ignorehitpause = 1

; sound First attack
[State -2, First Attack]
type = PlaySnd
triggerall = var(35)=-1
triggerall = NumExplod(8050) = 0
trigger1 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
persistent = 0
value = 2,0
channel = 14
volume=255
ignorehitpause = 1

; Telop sound
[State -2, Combo Sound]
type = PlaySnd
trigger1 = NumExplod(8050) = 0
trigger1 = var(35)=0 && var(36)!=0
persistent = 0;1
value = 2,var(36)
channel = 14
volume=255
ignorehitpause = 1

[State -2, Left]
type = explod
trigger1 = var(35)=0 && var(36)!=0
trigger2 = var(35)=-1 && (movehit || p2movetype = H && (p2stateno != [120,159]));p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
trigger3 = var(35)=0 && var(36)=10 && (movehit || p2movetype = H && (p2stateno != [120,159]))
triggerall = TeamSide = 1 && NumExplod(8050) = 0
anim = (8550 + var(36))
ID = 8050
postype = left
pos = 3,80
ontop = 1
bindtime = -1
removetime = 60
ownpal = 1
supermovetime = 60
pausemovetime = 60
scale = 0.5,0.5
persistent = 0
ignorehitpause = 1

[State -2, Right]
type = explod
trigger1 = var(35)=0 && var(36)!=0
trigger2 = var(35)=-1 && (movehit || p2movetype = H && (p2stateno != [120,159]));p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
trigger3 = var(35)=0 && var(36)=10 && (movehit || p2movetype = H && (p2stateno != [120,159]))
triggerall = TeamSide = 2 && NumExplod(8050) = 0
anim = (8650+ var(36));8011;8720;
ID = 8050
postype = right
pos = -10,80;130;82
ontop = 1
bindtime = -1
removetime = 60;90
ownpal = 1
supermovetime = 60;90
pausemovetime = 60;90
scale = 0.5,0.5
persistent = 0;1
ignorehitpause = 1

[State -2, VS_Combo]
type = VarAdd
trigger1 = enemynear, time = 0
trigger1 = enemynear, Hitshakeover = 0
trigger1 = (p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899]
trigger2 = var(35)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
var(35) = 1 + (var(35)=-1)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
trigger1 = var(35)!=-1 && (p2movetype!=H || enemynear, ctrl)
trigger2 = var(35)=-1 && movetype = H;p2stateno = [5000,5899])
var(35) = 0 - (roundstate<2)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
triggerall = numexplod(8050)!=0
trigger1 = var(35)=0
var(36) = 0
ignorehitpause = 1

[State -2, Is Danger]
type = VarSet
trigger1 = var(52) = 0 && life <= Ceil(const(data.life)/5)
;trigger1 = var(30) = 1 && roundstate!=2
var(52) = 1;(roundstate>1)
ignorehitpause = 1

[State -2, Is Danger]
type = VarSet
trigger1 = var(52) = 1 && life > Ceil(const(data.life)/5)
;trigger1 = var(30) = 1 && roundstate!=2
var(52) = 0;(roundstate>1)
ignorehitpause = 1

[State -2, Is First Attack p3]
type = VarSet
triggerall = numpartner=1
trigger1 = partner, movehit
trigger1 = partner, var(35) != -1
var(35) = 0
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = nomusic

; ===================== (Advanced Guard) =======================
[State -2, アドバンシングガード]
type = Helper
trigger1 = var(48)
stateno = 8060
postype = p2
pos = 20,0
id = 8060

[State -2, アドバンシングガード]
type = PosFreeze
trigger1 = numhelper(8060)

[State -2, アドバンシングガード]
type = VelAdd
trigger1 = numhelper(8060)
trigger1 = statetype = A
y = -gethitvar(yaccel)

[State -2, アドバンシングガード]
type = Explod
trigger1 = var(48)
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.4, 0.4

[State -2, アドバンシングガード]
type = VarSet
trigger1 = var(48)
var(48) = 0

; ===================== (Air Combo Code) =======================

[State 650, エリアルリミッター関連]
type = PlaySnd
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
value = 0,11

[State 620, エリアルリミッター関連]
type = VarSet
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
var(6) = 2

[State -2, エリアルリミッター関連]
type = VarSet
trigger1 = !numtarget
var(6) = 0

[State -2, エリアルリミッター関連]
type = VarSet
trigger1 = var(6)= 2 && ctrl && statetype != A
var(6) = 3

[State -2, エリアルリミッター関連]
type = ScreenBound
trigger1 = var(6) = 2
trigger1 = pos x*facing < 0
value = 0
movecamera = 0,0
ignorehitpause = 1

[State -2, エリアルリミッター関連]
type = ChangeState
triggerall = var(6) = 2
trigger1 = backedgebodydist < -20 && stateno != 100 && stateno != [710,711]
value = 710

[State -2, エリアルリミッター関連]
type = ScreenBound
trigger1 = stateno = 100 && prevstateno = 710
value = 0
movecamera = 0,0

[State -2, エリアルリミッター関連]
type = NotHitBy
trigger1 = stateno = 100 && prevstateno = 710
value = SCA
 
; ヘルパー関連 
[State -2, ヘルパー関連]
type = VarSet
trigger1 = !numhelper
var(4) = 0
 
[State -2, コンボ数]
type = VarSet
trigger1 = !numtarget
var(18) = 0

[State -2, コンボ数]
type = VarSet
trigger1 = !numtarget
var(17) = 0

; ===================== (p2Recovery states) =======================

[State -2, ターゲット制御]
type = VarSet
trigger1 = 1
var(7) = 0
ignorehitpause = 1

[State -2, ターゲット制御]
type = VarSet
trigger1 = numtarget
var(7) = target,id
ignorehitpause = 1

[State -2, ターゲット制御]
type = VarSet
trigger1 = !numtarget
var(9) = 0
ignorehitpause = 1

[State -2, ターゲット制御]
type = VarSet
trigger1 = numtarget && hitpausetime
var(9) = target,stateno = 5080
ignorehitpause = 1

[State -2, ターゲット制御]
type = TargetState
trigger1 = playeridexist(var(7)) && !var(9)
trigger1 = playerID(var(7)),gethitvar(chainid) & 1
trigger1 = playerID(var(7)),stateno != [120,155]
trigger1 = playerID(var(7)),hitover && playerID(var(7)),alive && playerID(var(7)),hitshakeover
trigger1 = playerID(var(7)),statetype = A && playerID(var(7)),stateno != 9900
value = 9900

[State -2, ターゲット制御]
type = TargetState
trigger1 = playeridexist(var(7)) && var(9)
trigger1 = playerID(var(7)),alive && playerID(var(7)),hitshakeover
trigger1 = playerID(var(7)),pos y >= 0 && playerID(var(7)),vel y > 0
trigger1 = playerID(var(7)),statetype = A && playerID(var(7)),stateno != 5201 && playerID(var(7)),stateno != 9910
value = 9901

[State -2, ターゲット制御]
type = TargetState
trigger1 = playeridexist(var(7))
trigger1 = playerID(var(7)),gethitvar(chainid) & 2
trigger1 = playerID(var(7)),stateno != [120,155]
trigger1 = playerID(var(7)),alive && playerID(var(7)),hitshakeover
trigger1 = playerID(var(7)),pos y >= 0 && playerID(var(7)),vel y > 0
trigger1 = playerID(var(7)),statetype = A && playerID(var(7)),stateno != 9910
value = 9910

; ===================== (Wall hit) =======================

[state 5100,2]
type = explod
triggerall = var(45)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
scale = 0.95,0.95
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
triggerall = var(45)
triggerall = numenemy
triggerall = enemynear,stateno != [120,159]
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,8
channel = 4
volume = 255

[state 200, 3]
type = varset
triggerall = var(45)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 45
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 27
value = var(26)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 26
value = var(28)+hitcount

[state -3, 2];combo hosei
type = varset
trigger1 = enemynear,movetype != H
v = 28
value = 0

;***************
[state -3, 2];combo
type = varset
trigger1 = var(26)>var(27)
v = 45
value = 1

;---------------------------------------------------------------------------

; -[ コンボ補正"]-
[State -2]
type = VarSet
Triggerall = NumEnemy>=1
trigger1 = enemynear,Movetype!=H
var(40) = 0
ignorehitpause = 1


[State -2]
type = VarSet
trigger1 = var(40) = 0
fvar(6) = 1 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) > 0
trigger1 = var(40) <= 3
fvar(6) = 1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 3
fvar(6) = .7
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 4
fvar(6) = .5
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 5
fvar(6) = .4
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 6
fvar(6) = .35
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 7
fvar(6) = .25
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 8
fvar(6) = .2
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 9
fvar(6) = .16
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 10
fvar(6) = .12
ignorehitpause = 1


[State -2]
type = VarSet
trigger1 = var(40) = 11
fvar(6) = .1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 12
fvar(6) = .07
ignorehitpause = 1


[State -2]
type = VarSet
trigger1 = var(40) = 13
fvar(6) = .05
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) = 14
fvar(6) = .05
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(40) >= 14
fvar(6) = .02
ignorehitpause = 1

;-------------------------------------------------------

[State -2]
type = DefenceMulSet
trigger1 = var(59)>0
trigger1 = Life >250
value = 0.75

[State -2]
type = DefenceMulSet
trigger1 = Life = [125,250]
value = (1-(var(59)>0)*0.25)*0.6

[State -2]
type = DefenceMulSet
trigger1 = Life = [0,124]
value = (1-(var(59)>0)*0.25)*0.5

;相手ダウン時補正-----------------------------------------

;//相手のダウンステートを奪えれば不要
;//(100/enemynear,const(data.fall.defence_mul)は相手の純粋なfall.defence.upを求める式

[State -2]
type = AttackMulSet
Triggerall= NumEnemy>=1
Trigger1= enemynear,stateno=5100
Trigger2= enemynear,stateno=5070
value = 1.0+(100/enemynear,const(data.fall.defence_mul)-100)/100

[State -2]
type = AttackMulSet
Triggerall= NumEnemy>=1
Trigger1= enemynear,stateno=5120
Trigger2= enemynear,ctrl
value = 1.0

;---------------------------------------------------------------------------
;おまけ機能
;//スプライトを持ってこれなかったのでカラー限定

[State -2, マインドジェム]
type = PowerAdd
trigger1 = roundstate=2
trigger1 = palno=12
trigger1 = gametime%2=0
value = 7
ignorehitpause = 1

[State -2, ソウルジェム]
type = LifeAdd
trigger1 = roundstate=2
trigger1 = palno=12
trigger1 = gametime%2=0
value = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;リミッター

[State -2,2段ジャンプ]
type = VarSet
triggerall =var(44) =0
trigger1 = stateno = 40 
trigger2 = stateno = 10022 
trigger3 = stateno = 10023 
trigger5 = stateno = [37,39]
var(44) = 1

[State -2,2段ジャンプ]
type = VarSet
triggerall =var(44) =1
trigger1 = stateno = [10024,10026]
trigger2 = statetype !=A
trigger3 = stateno = 52 
var(44) = 0

[State -2,SJ判定]
type = VarSet
trigger1  = stateno=10022
trigger2  = stateno=10023
var(41) = 1

[State -2,NJ判定]
type = VarSet
triggerall = var(41)=1
trigger1  = stateno=52
trigger2  = statetype!=A
var(41) = 0


[State -2,リミッターセット]
type = VarSet
Triggerall = NumEnemy>=1
trigger1 = enemynear,movetype != H
var(42) = 0


[State -2,リミッター発動]
type = VarSet
triggerall =var(42) >1
triggerall =var(41) =1
trigger1 = stateno = 620 && movehit
trigger2 = stateno = 650 && movehit
trigger3 = stateno = 621 && movehit
trigger4 = stateno = 651 && movehit
var(43) = 1


[State -2,リミッター解除]
type = VarSet
triggerall = var(43) =1
Triggerall = NumEnemy>=1
trigger1 = enemynear,movetype != H
trigger2 = enemynear,stateno = 5120
var(43) = 0



[State -2,リミッター強制解除]
type = VarSet
triggerall = var(43) =1
Triggerall = NumEnemy>=1
triggerall = enemynear,statetype = A
;triggerall = enemynear,pos Y <-17
trigger1 = stateno = [600,610]
trigger1 = movehit
trigger2 = stateno = [630,640]
trigger2 = movehit
;trigger2 = stateno = 230
;trigger2 = movehit
;trigger3 = stateno = [600,610]
;trigger3 = movehit
;trigger4 = stateno = [630,640]
;trigger4 = movehit
;trigger5 = stateno = 240
;trigger5 = movehit
;trigger6 = stateno = 220
;trigger6 = movehit
;trigger7 = stateno = 420
;trigger7 = movehit
var(43) = 0


[State -2,ダウン回避フラグ]
type = VarSet
triggerall = var(57) >0
trigger1 = movetype != H
var(57) = 0

[State -2]
type = PowerAdd
trigger1 = movetype = H
trigger1 = ctrl = 0
value = GetHitVar(damage)

[State -2]
type = PowerAdd
trigger1 = movetype = H
trigger1 = statetype != L
trigger1 = (stateno != [120,155]) && (stateno != [5000,5210])
trigger1 = ctrl = 0
value = 1

[State -2, ]
type = Helper
trigger1 = NumHelper(1000+id) = 0
trigger1 = !ishelper
helpertype = Normal
name = "Shield"
ID = 1000+id
;pos = const(size.xscale),const(size.yscale)
;scale = const(size.xscale),const(size.yscale)
postype = P1
stateno = 10000
ownpal = 0
size.ground.back = 20
size.ground.front = 20
supermovetime = 9999999999
pausemovetime = 9999999999
IgnoreHitPause = 1




[State -2, Shield VarSet 2]
type = VarSet
triggerall = NumHelper(1000+id)
triggerall = (helper(1000+id), StateNo != [10000,10001]) && (Var(50) != 1)
triggerall = (helper(1000+id), StateNo != 11005) && (helper(1000+id), StateNo != 11015) && (helper(1000+id), StateNo != 11025)
triggerall = (helper(1000+id), StateNo != 11006) && (helper(1000+id), StateNo != 11016) && (helper(1000+id), StateNo != 11026)
triggerall = (helper(1000+id), StateNo != 11105) && (helper(1000+id), StateNo != 11115) && (helper(1000+id), StateNo != 11125)
triggerall = (helper(1000+id), StateNo != 11106) && (helper(1000+id), StateNo != 11116) && (helper(1000+id), StateNo != 11126)
triggerall = (StateNo != 1401) && (StateNo != 1411) && (StateNo != 1421)
trigger1 = (StateType != C) && ((helper(1000+id), Pos X) - (Pos X) = [-35,40]) && ((helper(1000+id), Pos Y) - (Pos Y)= [-100,0])
trigger2 = (StateType = C) && ((helper(1000+id), Pos X) - (Pos X) = [-35,40]) && ((helper(1000+id), Pos Y) - (Pos Y)= [-60,0])
trigger3 = (RoundState = 0) || (RoundState = 1)
v = 50
value = 1

[State 180, 1]
type = varset
trigger1 = ctrl=0
trigger1 = anim= 0
var(50)=1

;---------------------------------------

[State -2, Shield Grab VarSet]
type = VarSet
trigger1 = (Var(50) = 1) && (Var(32) <= 1)
v = 31
value = 1

[State -2, Shield Grab VarSet]
type = VarSet
trigger1 = (Var(50) = 1) && (Var(32) > 1)
v = 31
value = 0

[State -2, Shield Grab VarAdd]
type = VarAdd
trigger1 = Var(50) = 1
v = 32
value = 1

[State -2, Shield Grab VarSet]
type = VarSet
trigger1 = Var(50) = 0
v = 32
value = 0

[State -2, Shield Grab VarSet High]
type = VarSet
trigger1 = NumHelper(1000+id)
trigger1 = (helper(1000+id), Pos Y) - (Pos Y)= [-100,-40]
v = 33
value = 1

[State -2, Shield Grab VarSet Low]
type = VarSet
trigger1 = NumHelper(1000+id)
trigger1 = (helper(1000+id), Pos Y) - (Pos Y)= [-39,0]
v = 33
value = 1

[State -2, Shield Grab VarSet Reset]
type = VarSet
trigger1 = (Var(32) > 4)
v = 33
value = 0

[State -2, AfterImageTime]
type = AfterImageTime
trigger1 = StateNo = 0
time = 1

[State -2, ]
type = RemoveExplod
trigger1 = StateNo != [1300,1341]
id = 23001

[State -2, ]
type = RemoveExplod
trigger1 = StateNo != 610
id = 10612

[Statedef -3]

[State 130]
type = AssertSpecial
Trigger1 = 1
Trigger1 = Stateno = [120,155]
flag = NoWalk

[state -3];リミッター時のコンボ補助
type = Width
Triggerall = movetype!=H
Trigger1   = stateno<3000
edge=10,0

[State -3, 気絶]
type = null;Changestate
Trigger1=enemy,animtime=-8
Trigger1=enemy,stateno=1001
value=400
ignorehitpause = 1

; ============= (Character HitSound) =============

[State 1120, ダメージボイス]
type = PlaySnd
triggerall = alive && movetype = H
triggerall = random % 10 < 5
trigger1 = stateno = 5000 && time = 1
trigger2 = stateno = 5010 && time = 1
trigger3 = stateno = 5020 && time = 1
trigger4 = stateno = 5070 && time = 1
trigger5 = stateno = 5080 && time = 1
value = s5000,random%2
channel = 2
volume = 200
volumescale = 200

[State 0, StopSnd]
type = StopSnd
trigger1 =  !alive
channel =2
;ignorehitpau


