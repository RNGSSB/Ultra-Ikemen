;避け
[Statedef 750]
Physics = S
VelSet = 0,0
Ctrl = 0
Anim = 750
SprPriority = -1
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 0
V = 36
Value = Cond(Var(36)-Ceil(20*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))<0,-Var(36),-Ceil(20*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))

[State ]
Type = PlaySnd
Trigger1 = Random%2= 0
Trigger1 = AnimElem = 3
Value = s750, 0
Channel = 1

[State ]
Type = PosAdd
Trigger1 = Time = 0
Trigger2 = Time = 2
X = 0.8

[State ]
Type = PosAdd
Trigger1 = Time = [3,5]
X = 7

[State ]
Type = PosAdd
Trigger1 = Time = [6,8]
X = 6

[State ]
Type = PosAdd
Trigger1 = Time = [9,11]
X = 5

[State ]
Type = PosAdd
Trigger1 = Time = [12,14]
X = 4

[State ]
Type = PosAdd
Trigger1 = Time = 15
X = 3

[State ]
Type = PosAdd
Trigger1 = Time = 16
X = 2

[State ]
Type = PalFX
Trigger1 = Time = [0,14]
Time = 1
Add = 240-Time*16,240-Time*16,240-Time*16

[State ]
Type = PlayerPush
Trigger1 = AnimElem = 8, < 0
Value = 0

[State ]
Type = Helper
Trigger1 = Time > 0
StateNo = 855
ID = 856
Ownpal = 1

[State ]
Type = Explod
Trigger1 = AnimElem = 11
Anim = 10052
ID = 10052
PosType = P1
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 11
Value = s40, 1

[State ]
Type = NotHitBy
Trigger1 = Time = [0,20]
Value = , NA, SA, HA ,NP, SP, HP
Time = 1

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;空中避け
[Statedef 760]
Type    = A
Physics = A
Ctrl = 0
Anim = 760
SprPriority = -1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 0
V = 36
Value = Cond(Var(36)-Ceil(40*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))<0,-Var(36),-Ceil(40*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))

[State ]
Type = PowerAdd
Trigger1 = PrevStateNo = [600,699]
Trigger1 = Var(13) = 0
Trigger1 = Time = 0
Value = Ceil(-500*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))

[State ]
Type = Null
Trigger1 = PrevStateNo = [600,699]
Trigger1 = Time = 0
Trigger1 = Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = VelSet
Trigger1 = Vel X >= 2
Trigger1 = Var(57)%10 != [4,5]
Trigger1 = Time = 0
X = 2

[State ]
Type = VelSet
Trigger1 = Time = 0
Y = -6.6

[State ]
Type = Turn
Trigger1 = Time = 15
Trigger1 = P2Dist X < 0

[State ]
Type = PalFX
Trigger1 = Time = [0,14]
Time = 1
Add = 240-Time*16,240-Time*16,240-Time*16

[State ]
Type = PlaySnd
Trigger1 = Time = 1
Value = s760, 0
Channel = 1

[State ]
Type = Helper
Trigger1 = Time > 0
StateNo = 855
ID = 856
Ownpal = 1

[State ]
Type = NotHitBy
Trigger1 = Time = [0,9]
Value = , NA, SA, HA ,NP, SP, HP
Time = 1

;---------------------------------------------------------------------------
; ゲージ溜め
[Statedef 850]
Physics = S
Anim    = 850
Ctrl    = 0
VelSet = 0,0
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = PlaySnd
Trigger1 = Time = 6
Value = s960, 0
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = Time = 1
Value = s850, 0
Channel = 1

[State ]
Type = Explod
Trigger1 = Anim = 850
Trigger1 = Time = 7
Anim = 10850
ID = 10850
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
BindTime = -1
RemoveTime = -1
RemoveOnGetHit = 1

[State ]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time > 6
Value = Ceil(FVar(30)*Cond(Var(43)>0,0.88,1.0)*5+(Time%3=0)+(Time>36)*3+(Time>66)*4+(Time>96)*3+(Time>126)*4+(Time>156)*3+(Time>186)*4+(Time>216)*3)

[State ]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 100
Trigger1 = Anim = 850
Trigger1 = Time >= 7
V = 36
Value = Cond(Time%2=0||Var(36)=99,1,2)

[State ]
Type = ChangeAnim
TriggerAll = Var(59) <= 0
TriggerAll = Time >= 21
TriggerAll = Anim = 850
Trigger1 = Command != "ABC溜め" && Command != "X溜め" || Command = "holdup" || Command = "holddown" || Command = "holdfwd" || Command = "holdback"
Trigger2 = Power >= 3334
Value = 851

[State ]
Type = Explod
Trigger1 = NumExplod(10850) = 1
Trigger1 = Anim = 851
Trigger1 = Time%10= 9 || AnimTime = 0
Anim = Cond(Time%10=9,10851,10852)
ID = 10851
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
RemoveOnGetHit = 1

[State ]
Type = RemoveExplod
Trigger1 = NumExplod(10850) = 1
Trigger1 = Anim = 851
Trigger1 = Time%10= 9 || AnimTime = 0
ID = 10850

[State ]
Type = ChangeState
Trigger1 = Anim = 851
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;サーキットスパーク/エリアルスパーク
[Statedef 860]
Type     = U
MoveType = A
Anim     = 870-(Pos Y>=-10)*10
Ctrl     = 0
VelSet = 0,0
PowerAdd = Cond(RoundState=2,-Power,0)
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = StateTypeSet
Trigger1 = Anim = 860 && Time = 0
StateType = S
Physics = S

[State ]
Type = StateTypeSet
Trigger1 = Anim = 870 && Time = 0
StateType = A
Physics = A

[State ]
Type = VarRangeSet
Trigger1 = Time = 0 || Anim = 860 && AnimTime = 0 || Anim = 870 && Time = 40
First = 54
Last = 55
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Anim = 860 && AnimTime < -1+(Var(57)%10=2)*2
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = NotHitBy
Trigger1 = Anim = 870 && Time < 21+(Var(57)%10=2)*999
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State ]
Type = PosSet
Trigger1 = Anim = 860 && Time = 0
Y = 0

[State ]
Type = EnvShake
Trigger1 = Time = 10+(Anim=870)
Time  = 16
Ampl  = 4
Freq  = 90

[State ]
Type = VarSet
Trigger1 = Time = 0 && RoundState = 2
FV = 29
Value = 0

[State ]
Type = Helper
Trigger1 = Var(58) = 0 && Time = 0 && RoundState = 2
Trigger1 = Var(57)%10 != 3
Trigger1 = Var(13) = [2,4]
StateNo = 10968
SuperMoveTime = 999
PauseMoveTime = 999
Ownpal = 1
ID = 10969

[State ]
Type = VarSet
Trigger1 = Time = 0 && RoundState = 2
Trigger1 = Var(13) = [1,5]
V = 13
Value = (Var(13)=2||Var(13)=4)*15

[State ]
Type = Null
Trigger1 = Time = 0 && RoundState = 2
Trigger1 = Var(13) = [6,19]
Trigger1 = Var(14):= (Var(13)=[6,19])*3000 && Var(16):= 0

[State ]
Type = VarSet
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = Time = 0
V = 36
Value = 100

[State ]
Type = Explod
Trigger1 = Var(0)%10 = 0 && Time = 0 && RoundState = 2
Trigger1 = NumExplod(25600) = 0
Trigger1 = Var(13) = [6,19]
Anim = 25600
PosType = P1
Pos = 0, -60
Scale = 0.5,0.5
Ownpal = 1
SuperMoveTime = -1
PauseMoveTime = -1
SprPriority = 5
ID = 25600

[State ]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Time = 4+(Anim=870)
StateNo = 8020
PosType = P1
Pos = 0, -58+(Anim=870)*2
Ownpal = 1
SuperMoveTime = 999
PauseMoveTime = 999
ID = 8020

[State ]
Type = PlaySnd
Trigger1 = Time = 10+(Anim=870)
Value = s960, 0
Channel = 4

[State ]
Type = VarRandom
Trigger1 = AnimElem = 3
V = 1
Range = 1
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s860+Var(1)*1940, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PalFX
Trigger1 = Time = [0+(Anim=870),29+(Anim=870)]
Time = 1
Add = 240-(Var(55)-(Var(55)>999)*1000),240-(Var(55)-(Var(55)>999)*1000),240-(Var(55)-(Var(55)>999)*1000)
IgnoreHitPause = 1

[State ]
Type = VarAdd
Trigger1 = Time = [10+(Anim=870),29+(Anim=870)]
V = 55
Value = 12

[State ]
Type = BGPalFX
Trigger1 = Time = [0+(Anim=870),39+(Anim=870)]
Time = 1
Add = -Var(54),-Var(54),-Var(54)
IgnoreHitPause = 1

[State ]
Type = VarAdd
Trigger1 = (Time = [0+(Anim=870),19+(Anim=870)]) || Time = [34+(Anim=870),38+(Anim=870)]
V = 54
Value = 5-(Time=[34+(Anim=870),38+(Anim=870)])*25

[State ]
Type = VelSet
Trigger1 = Anim = 870 && Time < 30
Y = 0

[State ]
Type = Explod
Trigger1 = Time = 0+(Anim=870)
Anim = 10860
ID = 10860
Postype = P1
Pos = 0,-58+(Anim=870)*2
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = MoveContact || MoveReversed
V = 55
Value = 1000
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = P2MoveType != H || P2StateNo = [120,159]
Trigger1 = Var(55)/1000%10 = 0 && Anim = 860 && Time > 9
Attr = S, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
HitFlag = MAF-
PauseTime = 0,11+11*(Var(38)>0)+Var(41)
HitSound = s10, 2
Ground.Velocity = 0,-11.2
Air.Velocity = 0,-11.2
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
P2StateNo = 865
ID = 860
P2Facing = 1
Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = P2MoveType != H || P2StateNo = [120,159]
Trigger1 = Var(55)/1000%10 = 0 && Anim = 870 && Time > 10
Attr = A, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
HitFlag = MAF-
PauseTime = 0,11+11*(Var(38)>0)+Var(41)
HitSound = s10, 2
Ground.Velocity = 0,-11.2
Air.Velocity = 0,-11.2
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
P2StateNo = 865
ID = 860
P2Facing = 1
Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = Anim = 860 && AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; サーキットスパーク・投げられている相手
[Statedef 865]
Type     = A
MoveType = H
Ctrl     = 0
VelSet   = 0,0

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State ]
Type = ChangeAnim
Trigger1 = 1
Value = 5030

[State ]
Type = ChangeState
Trigger1 = GetHitVar(HitShakeTime) = 0
Value = 866

;---------------------------------------------------------------------------
; サーキットスパーク/Hガードキャンセルシールドバンカー・相手の空中の状態
[Statedef 866]
Type     = A
MoveType = H
Anim = 5030
VelSet = -Cond(PrevStateNo=938,1,2.8),-Cond(PrevStateNo=938,9,11.2)

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State ]
Type = ChangeAnim
Trigger1 = (Anim = [5030,5035]) && AnimTime = 0
Value = 5035+(Anim=5035||!SelfAnimExist(5035))*15

[State ]
Type = VelAdd
Trigger1 = 1
Y = .6

[State ]
Type = SelfState
Trigger1 = (Vel Y > 0) && (Vel Y+Pos Y >= -5)
Trigger1 = Alive && CanRecover && PrevStateNo = 865
Trigger1 = Command != "holddown" && (Command != "holdup" && (Command = "holdfwd" || Command = "holdback")) || Command != "holdfwd" && Command != "holdback" && Command = "holdup"
Value = 5200

[State ]
Type = SelfState
Trigger1 = Vel Y > 0 && Pos Y >= 0
Value = 5100

;---------------------------------------------------------------------------
; EXシールド
[Statedef 900]
Physics = S
Anim    = 900
Ctrl    = 0
SprPriority = -1
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VarSet
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 4
Trigger1 = Time = 0
FV = 26
Value = 1

[State ]
Type = VelSet
TriggerAll = Time = 0
Trigger1 = PrevStateNo != [100,101]
X = 0
Y = 0

[State ]
Type = VarSet
Trigger1 = Time = [0,4]
V = 15
Value = Power

[State ]
Type = ChangeAnim
TriggerAll = Anim = 900
Trigger1 = Var(57)%10 != 2
Trigger1 = Time = 4 &&! MoveHit
Trigger2 = MoveHit = 1
Value = 900
Elem = 3

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s900, 0
Channel = 4

[State ]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s900, 1+Var(1)
Channel = 1

[State ]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = AnimElem = 2, < 0
Attr = SCA, NP, SP, HP
StateNo = 901+(Var(57)%10=[2,3])*2

[State ]
Type = ReversalDef
Trigger1 = P2StateNo != [400,409]
Trigger1 =! MoveContact
Reversal.Attr = SA, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 14,18
HitSound = S901,Random%2
ID = 900
GetPower = 50,0

[State ]
Type = ReversalDef
Trigger1 = P2StateNo = [400,409]
Trigger1 =! MoveContact
Reversal.Attr = C, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 14,18
HitSound = S901,Random%2
ID = 900
GetPower = 50,0

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 940
ID = 940
Ownpal = 1

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 941
ID = 950
Ownpal = 1

[State ]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 14
StateNo = 10910
ID = 10911
PosType = P1
Pos = 24,-77
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = MoveHit = 1
Value = s902, Random%3
Channel = 1

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
V = 36
Value = Cond(Var(36)+Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Null
TriggerAll = Var(59) = 0 && Time = [0,2]
Trigger1 = Command = "holdfwd" && (Command = "ab" || Command = "y") && Command != "holddown" && Command != "holdup"
Trigger1 = Var(45):= 100
Trigger2 = Command = "holdback" && (Command = "ab" || Command = "y") && Command != "holddown" && Command != "holdup"
Trigger2 = Var(45):= 105
Trigger3 = Var(57)%10 != 3
Trigger3 = Command = "holddown" && Command != "holdfwd" && Command != "holdback" && (Command = "ab" || Command = "x" || Command = "y")
Trigger3 = Var(45):= 750
Trigger4 = Var(57)%10 = 3 && Var(13) = 0 && FVar(29) <= 3000
Trigger4 = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
Trigger4 = Var(45):= 850
Trigger5 = Var(57)%10 != 2 && ((Var(13) = 1 || Var(13) = 5) || (Var(57)%10 = 1 || Var(57)%10 = 4) && Var(13) = 0 && FVar(29) >= 1000)
Trigger5 = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
Trigger5 = Var(45):= 960
IgnoreHitPause = 1

[State ]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Var(45) > 1 && MoveHit = 1
StateNo = 8000
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = ChangeState
Trigger1 = Var(45) > 1 && MoveHit = 1
Trigger2 = Var(59) <= 0
Trigger2 = Var(57)%10 != 2 && FVar(29) > 0
Trigger2 = Time = 4 &&! MoveHit
Trigger2 = Command = "Z溜め" && Command != "A溜め" && Command != "B溜め" && Command != "C溜め"
Value = Cond(Var(45)>1&&MoveHit=1,Var(45),902)

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 =! MoveHit
Trigger1 = AnimElem = 2, = 1
V = 36
Value = Cond(Var(36)-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))<0,-Var(36),-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;EXシールド2
[Statedef 901]
Physics = S

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Cond(Var(36)+Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))

[State ]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)+50

[State ]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, Random%2
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, Random%3
Channel = 1

[State ]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 903

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10911
PosType = P1
Pos = 24,-77
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = VarSet
Trigger1 = 1
V = 2
Value = 302

[State ]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC
Time = 1

[State ]
Type = Pause
Trigger1 = Time = [0,1]
Time = 14-Time*10
MoveTime = 0+Time*4
EndCmdBufTime = 14-Time*14
PauseBG = 0

[State ]
Type = Helper
Trigger1 = Var(0)%10 = 0
Trigger1 = Var(45) > 1 && Time = 1
StateNo = 8000
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = ChangeState
Trigger1 = Var(45) > 1 && Time = 1
Value = Var(45)

[State ]
Type = ChangeState
Trigger1 = Time = 20
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; シールド
[Statedef 902]
Physics = S
Anim    = 902

[State ]
Type = VarSet
Trigger1 = Time = 0
FV = 26
Value = 0

[State ]
Type = VarSet
Trigger1 = 1
V = 15
Value = Power*(Anim=902)

[State ]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Anim = 902
Attr = SCA, NP, SP, HP
StateNo = 903

[State ]
Type = ReversalDef
Trigger1 = P2StateNo != [400,409]
Trigger1 = Anim = 902
Trigger1 =! MoveContact
Reversal.Attr = SA, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 14,18
HitSound = S901,Random%2
ID = 900
GetPower = 50,0

[State ]
Type = ReversalDef
Trigger1 = P2StateNo = [400,409]
Trigger1 = Anim = 902
Trigger1 =! MoveContact
Reversal.Attr = C, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 14,18
HitSound = S901,Random%2
ID = 900
GetPower = 50,0

[State ]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 14
StateNo = 10910
ID = 10916
PosType = P1
Pos = 24,-77
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = MoveHit = 1
Value = s902, Random%3
Channel = 1

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2 || ! MoveHit && Anim = 903 && AnimElem = 1, = 1
V = 36
Value = Cond(MoveHit=2,Cond(Var(36)+Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))),Cond(Var(36)-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))<0,-Var(36),-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))))
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = ChangeAnim
TriggerAll = Anim = 902
Trigger1 = Command != "Z溜め" || Command = "a" || Command = "b" || Command = "c"
Trigger2 = MoveHit
Trigger3 = Time = Cond(Var(57)%10=3,25,60)
Trigger4 = FVar(29) = 0 && Var(13) = 0
Value = 903

[State ]
Type = PowerAdd
Trigger1 = Var(13) = 0
Trigger1 = Anim = 902
Value = Cond(Var(57)%10!=3,-2,-11-(Time%10=0))

[State ]
Type = ChangeState
Trigger1 = Anim = 903
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;シールド2
[Statedef 903]
Physics = S

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Cond(Var(36)+Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))

[State ]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)+50

[State ]
Type = Null
Trigger1 = Time = 1
Trigger1 = Var(15):= 0 && FVar(26):= 0

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, Random%2
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, Random%3
Channel = 1

[State ]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 903

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10916
PosType = P1
Pos = 24,-77
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = VarSet
Trigger1 = 1
V = 2
Value = 202

[State ]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC
Time = 1

[State ]
Type = Pause
Trigger1 = Time = [0,1]
Time = 14-Time*10
MoveTime = 0+Time*4
EndCmdBufTime = 14-Time*14
PauseBG = 0

[State ]
Type = Helper
Trigger1 = Var(0)%10 = 0
Trigger1 = Var(45) > 1 && Time = 1
StateNo = 8000
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = ChangeState
Trigger1 = Var(45) > 1 && Time = 1
Value = Var(45)

[State ]
Type = ChangeState
Trigger1 = Time = 20
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 立ちシールドカウンター
[Statedef 905]
Type    = S
MoveType= A
Physics = S
Anim = 905
SprPriority = 2

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Time <= 11
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State ]
Type = PosAdd
Trigger1 = AnimElem = 3
X = 10

[State ]
Type = PosAdd
Trigger1 = AnimElem = 12, = [0,1]
X = 6

[State ]
Type = PosAdd
Trigger1 = AnimElem = 13, = [0,1]
X = 5

[State ]
Type = PosAdd
Trigger1 = AnimElem = 14, = [0,1]
X = 3

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3 || AnimElem = 7
Value = s30, 1
Channel = 5

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 15
Value = s40, 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 7

[State ]
Type = PlaySnd
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 1
Value = s200, 0
Channel = 1

[State ]
Type = PlaySnd
Trigger1 = Var(1) = [1,2]
Trigger1 = AnimElem = 1
Value = s900, Var(1)
Channel = 1

[State ]
Type = PlaySnd
Trigger1 = Var(1) = [3,6]
Trigger1 = AnimElem = 1
Value = s210, Var(1)-3
Channel = 1

[State ]
Type = VarRandom
Trigger1 = AnimElem = 7
V = 1
Range = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s430+Var(1)*475, 0
Channel = 1

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = MoveHit = 1 && FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || MoveContact || MoveReversed
V = 54
Value = 1-(Time=0)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = [8,9]
Attr = S, SA
AnimType  = Up
Damage    = Ceil(FVar(0)*(50-Var(4)%2))
HitFlag = MAFD
GuardFlag = MA
PauseTime = 10,11+11*(Var(38)>0)+Var(41)
Guard.PauseTime = 10,11
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 8
Ground.Velocity = 0,-13*FVar(36)
Guard.Velocity = -9.5
Air.Velocity = Cond(Var(50)=1,0,-4),Cond(Var(50)=1,-13,-2)*FVar(36)
AirGuard.Velocity = -4,-1
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 11
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 905
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*50), Ceil((0.85+(Var(43)>0)*0.03)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.5*FVar(31)*50)

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; しゃがみEXシールド
[Statedef 910]
Type    = C
Physics = C
Anim    = 910
Ctrl    = 0
SprPriority = -1
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VarSet
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 4
Trigger1 = Time = 0
FV = 26
Value = 1

[State ]
Type = VelSet
TriggerAll = Time = 0
Trigger1 = PrevStateNo != [100,101]
X = 0
Y = 0

[State ]
Type = VarSet
Trigger1 = Time = [0,4]
V = 15
Value = Power

[State ]
Type = ChangeAnim
TriggerAll = Anim = 910
Trigger1 = Var(57)%10 != 2
Trigger1 = Time = 4 &&! MoveHit
Trigger2 = MoveHit = 1
Value = 910
Elem = 3

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s900, 0
Channel = 4

[State ]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s900, 1+Var(1)
Channel = 1

[State ]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = AnimElem = 2, < 0
Attr = SCA, NP, SP, HP
StateNo = 911+(Var(57)%10=[2,3])*2

[State ]
Type = ReversalDef
Trigger1 = (P2StateNo != [200,209]) && (P2StateNo != [600,609])
Trigger1 =! MoveContact
Reversal.Attr = C, NA,SA,HA,NP,SP,HP
Pausetime = 14,18
HitSound = S901,Random%2
NumHits = 0
ID = 900
GetPower = 50,0

[State ]
Type = ReversalDef
Trigger1 = (P2StateNo = [200,209]) || (P2StateNo = [600,609])
Trigger1 =! MoveContact
Reversal.Attr = SA, NA,SA,HA,NP,SP,HP
Pausetime = 14,18
HitSound = S901,Random%2
NumHits = 0
ID = 900
GetPower = 50,0

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 940
ID = 941
Ownpal = 1

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 941
ID = 951
Ownpal = 1

[State ]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 14
StateNo = 10910
ID = 10911
PosType = P1
Pos = 30,-50
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = MoveHit = 1
Value = s902, Random%3
Channel = 1

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
V = 36
Value = Cond(Var(36)+Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Null
TriggerAll = Var(59) = 0 && Time = [0,2]
Trigger1 = Command = "holdfwd" && (Command = "ab" || Command = "y") && Command != "holddown" && Command != "holdup"
Trigger1 = Var(45):= 100
Trigger2 = Command = "holdback" && (Command = "ab" || Command = "y") && Command != "holddown" && Command != "holdup"
Trigger2 = Var(45):= 105
Trigger3 = Var(57)%10 != 3
Trigger3 = Command = "holddown" && Command != "holdfwd" && Command != "holdback" && (Command = "ab" || Command = "x" || Command = "y")
Trigger3 = Var(45):= 750
Trigger4 = Var(57)%10 = 3 && Var(13) = 0 && FVar(29) <= 3000
Trigger4 = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
Trigger4 = Var(45):= 850
Trigger5 = Var(57)%10 != 2 && ((Var(13) = 1 || Var(13) = 5) || (Var(57)%10 = 1 || Var(57)%10 = 4) && Var(13) = 0 && FVar(29) >= 1000)
Trigger5 = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
Trigger5 = Var(45):= 960
IgnoreHitPause = 1

[State ]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Var(45) > 1 && MoveHit = 1
StateNo = 8000
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = ChangeState
Trigger1 = Var(45) > 1 && MoveHit = 1
Trigger2 = Var(59) <= 0
Trigger2 = Var(57)%10 != 2 && FVar(29) > 0
Trigger2 = Time = 4 &&! MoveHit
Trigger2 = Command = "Z溜め" && Command != "A溜め" && Command != "B溜め" && Command != "C溜め"
Value = Cond(Var(45)>1&&MoveHit=1,Var(45),912)

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 =! MoveHit
Trigger1 = AnimElem = 2, = 1
V = 36
Value = Cond(Var(36)-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))<0,-Var(36),-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
;しゃがみEXシールド2
[Statedef 911]
Type    = C
Physics = C

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Cond(Var(36)+Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))

[State ]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)+50

[State ]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, Random%2
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, Random%3
Channel = 1

[State ]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 913

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10911
PosType = P1
Pos = 30,-50
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = VarSet
Trigger1 = 1
V = 2
Value = 302

[State ]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC
Time = 1

[State ]
Type = Pause
Trigger1 = Time = [0,1]
Time = 14-Time*10
MoveTime = 0+Time*4
EndCmdBufTime = 14-Time*14
PauseBG = 0

[State ]
Type = Helper
Trigger1 = Var(0)%10 = 0
Trigger1 = Var(45) > 1 && Time = 1
StateNo = 8000
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = ChangeState
Trigger1 = Var(45) > 1 && Time = 1
Value = Var(45)

[State ]
Type = ChangeState
Trigger1 = Time = 20
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
; しゃがみシールド
[Statedef 912]
Type    = C
Physics = C
Anim    = 912

[State ]
Type = VarSet
Trigger1 = Time = 0
FV = 26
Value = 0

[State ]
Type = VarSet
Trigger1 = 1
V = 15
Value = Power*(Anim=912)

[State ]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Anim = 912
Attr = SCA, NP, SP, HP
StateNo = 913

[State ]
Type = ReversalDef
Trigger1 = (P2StateNo != [200,209]) && (P2StateNo != [600,609])
Trigger1 = Anim = 912
Trigger1 =! MoveContact
Reversal.Attr = C, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 14,18
HitSound = S901,Random%2
ID = 900
GetPower = 50,0

[State ]
Type = ReversalDef
Trigger1 = (P2StateNo = [200,209]) || (P2StateNo = [600,609])
Trigger1 = Anim = 912
Trigger1 =! MoveContact
Reversal.Attr = SA, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 14,18
HitSound = S901,Random%2
ID = 900
GetPower = 50,0

[State ]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 14
StateNo = 10910
ID = 10916
PosType = P1
Pos = 30,-50
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = MoveHit = 1
Value = s902, Random%3
Channel = 1

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2 || ! MoveHit && Anim = 913 && AnimElem = 1, = 1
V = 36
Value = Cond(Var(36)+Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = ChangeAnim
TriggerAll = Anim = 912
Trigger1 = Command != "Z溜め" || Command = "a" || Command = "b" || Command = "c"
Trigger2 = MoveHit
Trigger3 = Time = Cond(Var(57)%10=3,25,60)
Trigger4 = FVar(29) = 0 && Var(13) = 0
Value = 913

[State ]
Type = PowerAdd
Trigger1 = Var(13) = 0
Trigger1 = Anim = 912
Value = Cond(Var(57)%10!=3,-2,-11-(Time%10=0))

[State ]
Type = ChangeState
Trigger1 = Anim = 913
Trigger1 = AnimTime = 0
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
;しゃがみシールド2
[Statedef 913]
Type    = C
Physics = C

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Cond(Var(36)+Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(75*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))

[State ]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)+50

[State ]
Type = Null
Trigger1 = Time = 1
Trigger1 = Var(15):= 0 && FVar(26):= 0

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, Random%2
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, Random%3
Channel = 1

[State ]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 913

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10916
PosType = P1
Pos = 30,-50
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = VarSet
Trigger1 = 1
V = 2
Value = 202

[State ]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC
Time = 1

[State ]
Type = Pause
Trigger1 = Time = [0,1]
Time = 14-Time*10
MoveTime = 0+Time*4
EndCmdBufTime = 14-Time*14
PauseBG = 0

[State ]
Type = Helper
Trigger1 = Var(0)%10 = 0
Trigger1 = Var(45) > 1 && Time = 1
StateNo = 8000
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = ChangeState
Trigger1 = Var(45) > 1 && Time = 1
Value = Var(45)

[State ]
Type = ChangeState
Trigger1 = Time = 20
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
; しゃがみシールドカウンター
[Statedef 915]
Type    = C
MoveType= A
Physics = C
Anim = 915
SprPriority = 2

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Time <= 11
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State ]
Type = PosAdd
Trigger1 = Time = [6,11]
X = 1.95

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s30, 1
Channel = 4
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s430+Var(1)*475, 0
Channel = 1

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = MoveHit = 1 && FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || MoveContact || MoveReversed
V = 54
Value = 1-(Time=0)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 7
Attr = C, SA
Damage    = Ceil(FVar(0)*(150-Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = LA
PauseTime = 10,11+11*(Var(38)>0)+Var(41)
Guard.PauseTime = 10,11
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 8
Ground.Velocity = -0.5,-4.1*FVar(36)
Guard.Velocity = -9.5
Air.Velocity = Cond(Var(50)=1,-0.5,-4),Cond(Var(50)=1,-4.1,-2)*FVar(36)
AirGuard.Velocity = -4,-1
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 11
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 915
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*150), Ceil((0.85+(Var(43)>0)*0.03)*FVar(30)*150)
GivePower = Floor(FVar(31)*150), Floor(0.5*FVar(31)*150)

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
; 空中EXシールド
[Statedef 920]
Type    = A
Physics = A
Anim    = 920
Ctrl    = 0
SprPriority = -1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VarSet
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 4
Trigger1 = Time = 0
FV = 26
Value = 1

[State ]
Type = VarSet
Trigger1 = Time = [0,6]
V = 15
Value = Power

[State ]
Type = ChangeAnim
TriggerAll = Anim = 920
Trigger1 = Var(57)%10 != 2
Trigger1 = Time = 6 &&! MoveHit
Trigger2 = MoveHit = 1
Value = 920
Elem = 2

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s900, 0
Channel = 4

[State ]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s900, 1+Var(1)
Channel = 1

[State ]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = AnimElem = 2, < 0
Attr = SCA, NP, SP, HP
StateNo = 921+(Var(57)%10=[2,3])*2

[State ]
Type = ReversalDef
Trigger1 =! MoveContact
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP
Pausetime = 14,18
HitSound = S901,Random%2
NumHits = 0
ID = 900
GetPower = 50,0

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 940
ID = 942
Ownpal = 1

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 941
ID = 952
Ownpal = 1

[State ]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 14
StateNo = 10910
ID = 10911
PosType = P1
Pos = 33,-83
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = MoveHit = 1
Value = s902, Random%3
Channel = 1

[State ]
Type = PosFreeze
Trigger1 = MoveHit = 1

[State ]
Type = ChangeState
Trigger1 = Var(59) <= 0
Trigger1 = Var(57)%10 != 2 && FVar(29) > 0
Trigger1 = Time = 6 &&! MoveHit
Trigger1 = Command = "Z溜め" && Command != "A溜め" && Command != "B溜め" && Command != "C溜め"
Value = 922

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2 || ! MoveHit && AnimElem = 2, = 1
V = 36
Value = Cond(MoveHit=2,Cond(Var(36)+Ceil(25*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(25*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))),Cond(Var(36)-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))<0,-Var(36),-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))))
IgnoreHitPause = 1
Persistent = 0

;---------------------------------------------------------------------------
;空中EXシールド2
[Statedef 921]
Type    = A
Physics = A

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Cond(Var(36)+Ceil(25*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(25*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))

[State ]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)+50

[State ]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, Random%2
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, Random%3
Channel = 1

[State ]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 923

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10911
PosType = P1
Pos = 33,-83
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = VarSet
Trigger1 = 1
V = 2
Value = 502

[State ]
Type = PosFreeze
Trigger1 = Time = 0

[State ]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC
Time = 1

[State ]
Type = Pause
Trigger1 = Time = [0,1]
Time = 14-Time*10
MoveTime = 0+Time*4
EndCmdBufTime = 14-Time*14
PauseBG = 0

;---------------------------------------------------------------------------
; 空中シールド
[Statedef 922]
Type    = A
Physics = A
Anim    = 922

[State ]
Type = VarSet
Trigger1 = Time = 0
FV = 26
Value = 0

[State ]
Type = VarSet
Trigger1 = 1
V = 15
Value = Power*(Anim=922)

[State ]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Anim = 922
Attr = SCA, NP, SP, HP
StateNo = 923

[State ]
Type = ReversalDef
Trigger1 = Anim = 922
Trigger1 =! MoveContact
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 14,18
HitSound = S901,Random%2
ID = 900
GetPower = 50,0

[State ]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 14
StateNo = 10910
ID = 10916
PosType = P1
Pos = 33,-83
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = MoveHit = 1
Value = s902, Random%3
Channel = 1

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2 || ! MoveHit && Anim = 923 && AnimElem = 1, = 1
V = 36
Value = Cond(MoveHit=2,Cond(Var(36)+Ceil(25*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(25*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))),Cond(Var(36)-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))<0,-Var(36),-Ceil(50*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))))
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = ChangeAnim
TriggerAll = Anim = 922
Trigger1 = Command != "Z溜め" || Command = "a" || Command = "b" || Command = "c"
Trigger2 = MoveHit
Trigger3 = Time = Cond(Var(57)%10=3,25,60)
Trigger4 = FVar(29) = 0 && Var(13) = 0
Value = 923

[State ]
Type = PowerAdd
Trigger1 = Var(13) = 0
Trigger1 = Anim = 922
Value = Cond(Var(57)%10!=3,-2,-11-(Time%10=0))

;---------------------------------------------------------------------------
;空中シールド2
[Statedef 923]
Type    = A
Physics = A

[State ]
Type = VarAdd
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = FVar(7) = [1,39]
Trigger1 = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Cond(Var(36)+Ceil(25*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25))>100,100-Var(36),Ceil(25*(1-(Var(57)%10=2)*.3+(Var(57)%10=3)*.2+(Var(57)%10=4)*.25)))

[State ]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)+50

[State ]
Type = Null
Trigger1 = Time = 1
Trigger1 = Var(15):= 0 && FVar(26):= 0

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, Random%2
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, Random%3
Channel = 1

[State ]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 923

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10916
PosType = P1
Pos = 33,-83
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = VarSet
Trigger1 = 1
V = 2
Value = 202

[State ]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC
Time = 1

[State ]
Type = Pause
Trigger1 = Time = [0,1]
Time = 14-Time*10
MoveTime = 0+Time*4
EndCmdBufTime = 14-Time*14
PauseBG = 0

;---------------------------------------------------------------------------
; 空中シールドカウンター
[Statedef 925]
Type    = A
MoveType= A
Physics = A
Anim = 925
SprPriority = 2

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Time <= 11
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State ]
Type = Width
Trigger1 = Vel Y + Pos Y < 0
Player = -7,-5

[State ]
Type = VelSet
Trigger1 = Time <= 9
Y = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, 1
Channel = 4
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s430+Var(1)*475, 0
Channel = 1

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = MoveHit = 1 && FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || MoveContact || MoveReversed
V = 54
Value = 1-(Time=0)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 5
Attr = A, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2))
HitFlag = MAFD
GuardFlag = HA
PauseTime = 10,11+11*(Var(38)>0)+Var(41)
Guard.PauseTime = 10,11
HitSound   = s10,2
GuardSound = s120,0
AnimType = Hard
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 8
Ground.Velocity = -1,-9*FVar(36)
Guard.Velocity = -9.5
Air.Velocity = Cond(Var(50)=1,-1,-4),Cond(Var(50)=1,-9,-2)*FVar(36)
AirGuard.Velocity = -4,-1
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 11
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 925
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*50), Ceil((0.85+(Var(43)>0)*0.03)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.5*FVar(31)*50)

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

;---------------------------------------------------------------------------
; シールドバンカー
[Statedef 930]
Physics = S
Ctrl    = 0
Anim    = 930+(Var(57)%10=2&&(PrevStateNo=[150,153]))*4
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VelSet
TriggerAll = Time = 0
Trigger1 = PrevStateNo != [100,101]
X = 0
Y = 0

[State ]
Type = PowerAdd
Trigger1 = Var(13) = 0
Trigger1 = Time = 0 && PrevStateNo = [150,153]
Value = Ceil(Cond(Var(57)%10=2,-1000-(FVar(29)>=2000)*333.3,-500)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))

[State ]
Type = Null
Trigger1 = Time = 0 && PrevStateNo = [150,153]
Trigger1 = Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = VarSet
Trigger1 = Anim != 934
Trigger1 = Time = [0,9]
V = 15
Value = Power

[State ]
Type = Null
TriggerAll = Var(59) <= 0 && Var(57)%10 = 4 && Var(45) = 0 && Time = 0 && PrevStateNo = [150,153]
Trigger1 = Command = "jump" || Command = "jump2"
Trigger1 = Var(45):= Cond(Command = "jump",41,42)
Trigger2 = Command = "FF" || Command = "holdfwd" && Command = "ab" && Command != "holddown" && Command != "holdup"
Trigger2 = Var(45):= 100
Trigger3 = Command = "BB" || Command = "holdback" && Command = "ab" && Command != "holddown" && Command != "holdup"
Trigger3 = Var(45):= 105
Trigger4 = Command = "holddown" && Command != "holdfwd" && Command != "holdback" && (Command = "ab" || Command = "x" || Command = "y")
Trigger4 = Var(45):= 750
Trigger5 = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
Trigger5 = (Var(13) = 1 || Var(13) = 5) || Var(13) = 0 && FVar(29) >= 1000
Trigger5 = Var(45):= 960
Trigger6 = Command = "41236c" && Var(13) = [1,5]
Trigger6 = Var(45):= 3000+(Var(13)=4)*50
Trigger7 = Var(57)/100%10 != 2 && Var(48) = 0
Trigger7 = Command = "1632143c" && (FVar(29) >= 1000 && Var(13) = 0 || Var(13) = [1,5])
Trigger7 = Var(45):= 2300
Trigger8 = Var(57)/100%10 = 2 || Var(57)/100%10 = 4
Trigger8 = Command = "623a" || Command = "623b"
Trigger8 = Var(45):= Cond(Command = "623a",1500,1550)
Trigger9 = Var(57)/100%10 = 2 || Var(57)/100%10 = 4
Trigger9 = Command = "623c" && (FVar(29) >= 1000 && Var(13) = 0 || Var(13) = [1,5])
Trigger9 = Var(45):= 2500
Trigger10 = Var(57)/100%10 = [1,3]
Trigger10 = Command = "236a" || Command = "236b"
Trigger10 = Var(45):= Cond(Command = "236a",1100,1150)+(Var(57)/100%10=3)*600
Trigger11 = Var(57)/100%10 = [1,3]
Trigger11 = Command = "236c" && (FVar(29) >= 1000 && Var(13) = 0 || Var(13) = [1,5])
Trigger11 = Var(45):= 2100+(Var(57)/100%10=3)*600
Trigger12 = Var(57)/100%10 = 4
Trigger12 = Command = "236a" || Command = "236b" || Command = "236c"
Trigger12 = Var(45):= 1900
Trigger13 = (Var(57)/100%10 = 1 || Var(57)/100%10 = 3) && NumHelper(1005)+NumHelper(1055)+NumHelper(2005)+NumHelper(2015)+NumHelper(2025) = 0 || Var(57)/100%10 = 4 && NumHelper(2025) = 0
Trigger13 = Command = "22222c" && (FVar(29) >= 1500 && Var(13) = 0 || Var(13) = [1,5])
Trigger13 = Var(45):= 2020
Trigger14 = (Var(57)/100%10 = 1 || Var(57)/100%10 = 3) && NumHelper(1005)+NumHelper(1055)+NumHelper(2005)+NumHelper(2015)+NumHelper(2025) = 0 || Var(57)/100%10 = 4 && NumHelper(2015) = 0
Trigger14 = Command = "2222c" && (FVar(29) >= 1500 && Var(13) = 0 || Var(13) = [1,5])
Trigger14 = Var(45):= 2010
Trigger15 = (Var(57)/100%10 = 1 || Var(57)/100%10 = 3) && NumHelper(1005)+NumHelper(1055)+NumHelper(2005)+NumHelper(2015)+NumHelper(2025) = 0 || Var(57)/100%10 = 2 || Var(57)/100%10 = 4 && NumHelper(1005) = 0
Trigger15 = Command = "22a"
Trigger15 = Var(45):= 1000+(Var(57)/100%10=2)*600
Trigger16 = (Var(57)/100%10 = 1 || Var(57)/100%10 = 3) && NumHelper(1005)+NumHelper(1055)+NumHelper(2005)+NumHelper(2015)+NumHelper(2025) = 0 || Var(57)/100%10 = 2 && (NumHelper(1655) = 0 || Cond(NumHelper(1655)>0,Helper(1655),Anim=1657,0)) || Var(57)/100%10 = 4 && NumHelper(1055) = 0
Trigger16 = Command = "22b"
Trigger16 = Var(45):= 1050+(Var(57)/100%10=2)*600
Trigger17 = (Var(57)/100%10 = 1 || Var(57)/100%10 = 3) && NumHelper(1005)+NumHelper(1055)+NumHelper(2005)+NumHelper(2015)+NumHelper(2025) = 0 || Var(57)/100%10 = 2 && (NumHelper(2605) = 0 || Cond(NumHelper(2605)>0,Helper(2605),Anim=2607,0)) || Var(57)/100%10 = 4 && NumHelper(2005) = 0
Trigger17 = Command = "22c" && (FVar(29) >= 1000 && Var(13) = 0 || Var(13) = [1,5])
Trigger17 = Var(45):= 2000+(Var(57)/100%10=2)*600
Trigger18 = Command = "22z"
Trigger18 = Var(45):= 1010
Trigger19 = Command = "63214c"
Trigger19 = Var(45):= 1300+(Var(57)/100%10=2||Var(57)/100%10=4)*50
Trigger20 = Var(57)/100%10 = [1,3]
Trigger20 = Command = "214a" || Command = "214b"
Trigger20 = Var(45):= Cond(Command = "214a",1200+(Var(57)/100%10=3)*600,1210+(Var(57)/100%10=3)*640)
Trigger21 = Var(57)/100%10 = [1,3]
Trigger21 = Command = "214c" && (FVar(29) >= 1000 && Var(13) = 0 || Var(13) = [1,5])
Trigger21 = Var(45):= 2200+(Var(57)/100%10=3)*600
Trigger22 = Command != "holddown" && Command != "holdup" && (Command = "holdfwd" || Command = "holdback") && (Command = "az" || Command = "x")
Trigger22 = Var(45):= 800

[State ]
Type = Helper
TriggerAll = Var(0)%10 = 0
TriggerAll = Time = 0 && PrevStateNo = [150,153]
Trigger1 = Var(57)%10 = 4 && Var(45) > 1
Trigger1 = NumHelper(8060) = 0
Trigger2 = NumHelper(8050) = 0
StateNo = 8000
PosType = P1
Pos = 0, -55
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
ID = Cond(Var(57)%10=4&&Var(45)>1,8060,8050)

[State ]
Type = ChangeState
Trigger1 = Var(57)%10 = 4 && Var(45) > 1
Value = Var(45)

[State ]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Time = [0,9]
Attr = SCA, NP, SP, HP
StateNo = 931

[State ]
Type = ReversalDef
Trigger1 = Anim != 934 && AnimElem = 1
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP
Pausetime = 16,16
HitSound = S901,Random%2
GetPower = 20,0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s900, 0

[State ]
Type = Explod
Trigger1 = Anim = 934 && Time = 0
Anim = 10935
ID = 10935
Pos = -17,-61
Scale = 0.5,0.5
PosType = P1
Ownpal = 1
SprPriority = 5
BindTime = -1

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 940
ID = 931+(Anim=934)
Ownpal = 1

[State ]
Type = Helper
Trigger1 = MoveHit
StateNo = 10930
ID = 10930
PosType = P1
Pos = 30,-61
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = PlaySnd
Trigger1 = Anim = 934 && Time = 0
Value = s901, Random%2

[State ]
Type = ChangeState
Trigger1 = Anim = 934 && Time = 0
Trigger2 = Anim != 934 && (AnimTime = 0 || MoveHit = 1)
Anim = Cond(Anim=934,934,932+MoveHit)
Value = 932

;---------------------------------------------------------------------------
; シールドバンカー2
[Statedef 931]
Physics  = S
SprPriority = 2

[State ]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)+20

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 15
Value = 0

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, Random%2
Channel = 4

[State ]
Type = Helper
Trigger1 = Time = 0
StateNo = 10930
ID = 10930
PosType = P1
Pos = 30,-45
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Pause
Trigger1 = Time = 0
Time = 16
EndCmdBufTime = 16
PauseBG = 0

[State ]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC
Time = 1

[State ]
Type = ChangeState
Trigger1 = Time = 1
Anim = 933
Value = 932

;---------------------------------------------------------------------------
;シールドバンカー3
[Statedef 932]
Type     = S
Movetype = A
Physics  = S

[State ]
Type = NotHitBy
Trigger1 = Anim = [933,934]
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State ]
Type = PalFX
Trigger1 = Anim = 934 && Time < 15
Time = 1
Add = 240-Time*16,240-Time*16,240-Time*16

[State ]
Type = PlaySnd
Trigger1 = Random%2= 0
Trigger1 = Anim != 934 && AnimElem = 1 || Anim = 934 && AnimElem = 5
Value = s760, 0
Channel = 1

[State ]
Type = PlaySnd
Trigger1 = Anim != 934 && AnimElem = 2 || Anim = 934 && AnimElem = 6
Value = s30, 1
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = Anim = 932 && AnimElem = 19
Trigger2 = Anim = 933 && AnimElem = 20
Trigger3 = Anim = 934 && AnimElem = 24
Value = s1105, 1
Channel = 4

[State ]
Type = Explod
Trigger1 = Anim = 932 && AnimElem = 1
Trigger2 = Anim = 933 && AnimElem = 2
Trigger3 = Anim = 934 && AnimElem = 6
ID = 935
PosType = P1
Pos = 41,6
Scale = 0.5,0.5
Anim = 935
Ownpal = 1
SprPriority = 5
BindTime = -1
RemoveOnGetHit = 1

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Anim != 934 && MoveHit = 1 && FVar(1) > 0.30
FV = 1
Value = 0.30
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || MoveContact || MoveReversed
V = 54
Value = 1-(Time=0)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 != 4
Trigger1 = Var(54) = 0 && Anim != 934 && AnimElemNo(0) = [3+(Anim=933),5+(Anim=933)]
Attr = S, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
GuardFlag = MA
PauseTime = 8,9+9*(Var(38)>0)+Var(41)
Guard.PauseTime = 8,9
HitSound = s20, 0
GuardSound = s120, 0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 8
Ground.Velocity = -1,-9*FVar(36)
Guard.Velocity = -9.5
Air.Velocity = Cond(Var(50)=1,-1,-4),Cond(Var(50)=1,-9,-2)*FVar(36)
AirGuard.Velocity = -4,-1
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 9
EnvShake.Ampl = 3
EnvShake.Freq = 90
Palfx.Time = 120
Palfx.Mul =  255,255,255
Palfx.Add = -30,-130,-130
Palfx.SinAdd = 100,30,30,6
YAccel = .6
ID = 930
Kill = 0
Guard.Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
Fall.RecoverTime = Ceil(30+Var(41)-FVar(35))
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 = 4
Trigger1 = Var(54) = 0 && Anim != 934 && AnimElemNo(0) = [3+(Anim=933),5+(Anim=933)]
Attr = S, SA
Damage = Ceil(FVar(0)*(110-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
GuardFlag = LA
PauseTime = 0,9+9*(Var(38)>0)+Var(41)
Guard.PauseTime = 0,9
HitSound = s20, 0
GuardSound = s120, 0
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 8
Ground.Velocity = -0.5,-4.1*FVar(36)
Guard.Velocity = -9.5
Air.Velocity = Cond(Var(50)=1,-0.5,-4),Cond(Var(50)=1,-4.1,-2)*FVar(36)
AirGuard.Velocity = -4,-1
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 9
EnvShake.Ampl = 3
EnvShake.Freq = 90
Palfx.Time = 120
Palfx.Mul =  255,255,255
Palfx.Add = -30,-130,-130
Palfx.SinAdd = 100,30,30,6
YAccel = .6
ID = 930
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*100), Ceil((0.85+(Var(43)>0)*0.03)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.5*FVar(31)*100)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && Anim = 934 && AnimElemNo(0) = 8
Attr = S, SA
AnimType = Hard
HitFlag = MAFD
GuardFlag = MA
PauseTime = 10,11+11*(Var(38)>0)+Var(41)
Guard.PauseTime = 10,11
HitSound = s20, 0
GuardSound = s120, 0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 8
Ground.Velocity = -1,-9*FVar(36)
Guard.Velocity = -9.5
Air.Velocity = Cond(Var(50)=1,-1,-4),Cond(Var(50)=1,-9,-2)*FVar(36)
AirGuard.Velocity = -4,-1
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 11
EnvShake.Ampl = 3
EnvShake.Freq = 90
Palfx.Time = 120
Palfx.Mul =  255,255,255
Palfx.Add = -30,-130,-130
Palfx.SinAdd = 100,30,30,6
P2StateNo = 938
ID = 930
P2Facing = 1
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = VarSet
Trigger1 = MoveHit = 1
FV = 38
Value = 2120
IgnoreHitPause = 1

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = AttackDist
Trigger1 = Anim = 934
Value = 170

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; Hガードキャンセルシールドバンカー・投げられている相手
[Statedef 938]
Type     = A
MoveType = H
Ctrl     = 0
VelSet   = 0,0

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State ]
Type = ChangeAnim
Trigger1 = 1
Value = 5030

[State ]
Type = ChangeState
Trigger1 = GetHitVar(HitShakeTime) = 0
Value = 866

;---------------------------------------------------------------------------
; イニシアティブヒート
[Statedef 950]
Type    = U
Physics = U
Ctrl    = 0
Facep2 = 1

[State ]
Type = Null
Trigger1 = Time = 0
Trigger1 = Var(2):= 0 && FVar(24):= 30
IgnoreHitPause = 1

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = EnvShake
Trigger1 = Time = 0
Time  = 16
Ampl  = 4
Freq  = 90
IgnoreHitPause = 1

[State ]
Type = Null
Trigger1 = Time = 0 && RoundState = 2
Trigger1 = Var(14):= 10 && Var(13):= 2
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Var(0)/10000%10 = 0
Trigger1 = Time = 0
V = 36
Value = 100
IgnoreHitPause = 1

[State ]
Type = PlaySnd
TriggerAll = Var(0)/100%10 = 0
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Value = s25000, 0

[State ]
Type = LifeSet
Trigger1 = Life < FVar(9)
Trigger1 = Alive && Life > 0 && !LoseKO && RoundState = 2
Trigger1 = Var(57)%10 = 3
Trigger1 = Time = 0
Value = Ceil(FVar(9))
IgnoreHitPause = 1

[State ]
Type = Explod
Trigger1 = NumExplod(10955) = 0
Trigger1 = Time = 0
Anim = 10955
ID = 10955
Postype = P1
Pos = 0,-115
Scale = 0.5,0.5
Ownpal = 1
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Explod
Trigger1 = StateType != A
Trigger1 = Time = 0
Anim = 10952
ID = 10952
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Explod
Trigger1 = StateType != A
Trigger1 = Time = 0
Anim = 10950
ID = 10950
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Explod
Trigger1 = StateType != A
Trigger1 = Time = 0
Anim = 10951
ID = 10951
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = NumHelper(8040) = 0
Trigger1 = Time = 0
StateNo = 8040
PosType = P1
Pos = 0, -50
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ID = 8040

[State ]
Type = Pause
Trigger1 = Time = 0
Time = 1
MoveTime = 1
PauseBG = 0
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = VelSet
Trigger1 = Vel X > 3.6
X = 3.6

[State ]
Type = ChangeState
Trigger1 = Time = 0
Value = (StateType=A)*51

;---------------------------------------------------------------------------
;強制開放
[Statedef 960]
Type     = S
MoveType = A
Physics  = S
Anim     = 960
Ctrl     = 0
VelSet = 0,0
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VarSet
Trigger1 = Time = 0 || AnimTime = 0
V = 55
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Time = [0,21]
Trigger2 = Var(57)%10 = 4
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = EnvShake
Trigger1 = Time = 15
Time  = 16
Ampl  = 4
Freq  = 90

[State ]
Type = PlaySnd
Trigger1 = Time = 15
Value = s960, 0
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s960, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PalFX
Trigger1 = Time = [15,44]
Time = 1
Add = 240-Var(55),240-Var(55),240-Var(55)
IgnoreHitPause = 1

[State ]
Type = VarAdd
Trigger1 = Time = [16,44]
V = 55
Value = 8

[State ]
Type = Null
Trigger1 = Time = 14 && RoundState = 2
Trigger1 = Var(14):= 60-(Var(13)=0)*50 && Var(13):= 4-(Var(13)=0)*2

[State ]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Time = 14
V = 36
Value = 100

[State ]
Type = PlaySnd
TriggerAll = Var(0)/100%10 = 0
Trigger1 = RoundState = 2
Trigger1 = Time = 14
Value = s25000, 0

[State ]
Type = LifeSet
Trigger1 = Life < FVar(9)
Trigger1 = Alive && Life > 0 && !LoseKO && RoundState = 2
Trigger1 = Var(57)%10 = 3
Trigger1 = Time = 14
Value = Ceil(FVar(9))

[State ]
Type = Helper
Trigger1 = Var(57)%10 != 3 && Time = 11
StateNo = 10968
SuperMoveTime = 9999
PauseMoveTime = 9999
Ownpal = 1
ID = 10968

[State ]
Type = Explod
Trigger1 = Time = [16,34]
Anim = 10952
ID = 10952
Postype = P1
Pos = -24,Cond(Time=16,10,8)
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Explod
Trigger1 = Time = [16,34]
Anim = 10950
ID = 10950
Postype = P1
Pos = -24,Cond(Time=16,10,8)
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Explod
Trigger1 = Time = [16,34]
Anim = 10951
ID = 10951
Postype = P1
Pos = -24,Cond(Time=16,10,8)
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Explod
Trigger1 = Time = 18 || Time = 22 || Time = 28 || Time = 34
Anim = 10952
ID = 10952
Postype = P1
Pos = -8,Cond(Time=18,2,8)
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Explod
Trigger1 = Time = 18 || Time = 22 || Time = 28 || Time = 34
Anim = 10950
ID = 10950
Postype = P1
Pos = -8,Cond(Time=18,2,8)
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Explod
Trigger1 = Time = 18 || Time = 22 || Time = 28 || Time = 34
Anim = 10951
ID = 10951
Postype = P1
Pos = -8,Cond(Time=18,2,8)
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Time = 16
StateNo = 8030
PosType = P1
Pos = -8, -88
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ID = 8030

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || MoveContact || MoveReversed
V = 54
Value = 1-(Time=0)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 1
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 4
Attr = S, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
HitFlag = MAFD
PauseTime = 6,7+7*(Var(38)>0)+Var(41)
HitSound = s10,2
Air.HitTime = 30-Ceil(FVar(35))
Ground.Velocity = 0
Air.Velocity = Cond(Var(50)=1,0,-4),Cond(Var(50)=1,-9,-2)*FVar(36)
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
P2Facing = 1
Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)
P2StateNo = 5600
ID = 5600

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 2
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 4
Attr = S, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
PauseTime = 6,7+7*(Var(38)>0)+Var(41)
HitSound = s10,2
Ground.Type = High
Ground.Velocity = 0
Air.Velocity = Cond(Var(50)=1,0,-4),Cond(Var(50)=1,-9,-2)*FVar(36)
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
YAccel = .6
Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
Fall.RecoverTime = Ceil(22+Var(41)-FVar(35))
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)
ID = 960

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;空中強制開放
[Statedef 970]
Type     = A
MoveType = A
Physics  = A
Anim     = 970
Ctrl     = 0
VelSet = 0,0

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VarSet
Trigger1 = Time = 0 || Time = 30
V = 55
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Var(57)%10 = 4
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = EnvShake
Trigger1 = Time = 10
Time  = 16
Ampl  = 4
Freq  = 90

[State ]
Type = PlaySnd
Trigger1 = Time = 10
Value = s960, 0
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s960, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PalFX
Trigger1 = Time = [10,29]
Time = 1
Add = 240-Var(55),240-Var(55),240-Var(55)
IgnoreHitPause = 1

[State ]
Type = VarAdd
Trigger1 = Time = [11,29]
V = 55
Value = 12

[State ]
Type = Null
Trigger1 = Time = 9 && RoundState = 2
Trigger1 = Var(14):= 60-(Var(13)=0)*50 && Var(13):= 4-(Var(13)=0)*2

[State ]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Time = 9
V = 36
Value = 100

[State ]
Type = PlaySnd
TriggerAll = Var(0)/100%10 = 0
Trigger1 = RoundState = 2
Trigger1 = Time = 9
Value = s25000, 0

[State ]
Type = VelSet
Trigger1 = Time <= 28
Y = 0

[State ]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Time = 4
StateNo = 8040
PosType = P1
Pos = 0, -50
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
ID = 8040

[State ]
Type = Helper
Trigger1 = Var(57)%10 != 3 && Time = 6
StateNo = 10968
SuperMoveTime = 9999
PauseMoveTime = 9999
Ownpal = 1
ID = 10968

[State ]
Type = Explod
Trigger1 = Time = 6
Anim = 10970
ID = 10970
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
SuperMoveTime = -1
PauseMoveTime = -1

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || MoveContact || MoveReversed
V = 54
Value = 1-(Time=0)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 1
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 4
Attr = A, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
HitFlag = MAFD
PauseTime = 0,7+7*(Var(38)>0)+Var(41)
HitSound = s10,2
Air.HitTime = 30-Ceil(FVar(35))
Ground.Velocity = 0
Air.Velocity = Cond(Var(50)=1,0,-4),Cond(Var(50)=1,-9,-2)*FVar(36)
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
P2Facing = 1
Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)
P2StateNo = 5600
ID = 5600

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 2
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 4
Attr = A, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
PauseTime = 0,7+7*(Var(38)>0)+Var(41)
HitSound = s10,2
Ground.Type = High
Ground.Velocity = 0
Air.Velocity = Cond(Var(50)=1,0,-4),Cond(Var(50)=1,-9,-2)*FVar(36)
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
YAccel = .6
Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
Fall.RecoverTime = Ceil(22+Var(41)-FVar(35))
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)
ID = 960

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

;---------------------------------------------------------------------------
; こんなん育ててみました♪EX
[Statedef 2000]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2000
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Var(57)/100%10 != 4
Trigger1 = Time = [0,33]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = NotHitBy
Trigger1 = Var(57)/100%10 = 4
Trigger1 = Time = [0,49]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 3
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 3
StateNo = 6010
ID = 10001
Pos = -4,-41
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 3
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s2000, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 6
StateNo = 2005
ID = 2005
PosType = P1
Pos = 5,-17
Ownpal = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; ジョニー
[Statedef 2010]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2010
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Var(57)/100%10 != 4
Trigger1 = AnimElem = 3
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = NotHitBy
Trigger1 = Var(57)/100%10 = 4
Trigger1 = Time = [0,60]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 3
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1500*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 3
StateNo = 6010
ID = 10001
Pos = -4,-41
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 3
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s2010, 0
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s2010, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 6
StateNo = 2015
ID = 2015
PosType = P1
Pos = 5,-21
Ownpal = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 現代医学の犠牲者です。
[Statedef 2020]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2020
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Var(57)/100%10 != 4
Trigger1 = AnimElem = 3
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = NotHitBy
Trigger1 = Var(57)/100%10 = 4
Trigger1 = Time = [0,54]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 3
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1500*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 3
StateNo = 6010
ID = 10001
Pos = -4,-41
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 3
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s2020, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 6
StateNo = 2025
ID = 2025
PosType = P1
Pos = 5,-21
Ownpal = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 抜刀・秘密の業物EX
[Statedef 2100]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2100
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Time = [0,35]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 4
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 6010
ID = 10001
Pos = -30,-58
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 4
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = VarRandom
Trigger1 = AnimElem = 4
V = 1
Range = 1
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s2100, Var(1)
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 6
Value = s30, 1
Channel = 5
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 6 || AnimElem = 24
Value = s1105, 0+(AnimElem=24)
Channel = 3

[State ]
Type = Explod
Trigger1 = AnimElem = 6
Anim = 1105
ID = 1105
PosType = P1
Pos = 48,-7
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
Persistent = 0

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 8
Attr = S, SA
AnimType  = Hard
Damage    = Ceil(FVar(0)*(0-Var(4)%2))
HitFlag = MAF
GuardFlag = M
PauseTime = 0,0
Guard.PauseTime = 10,11
HitSound   = -1
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-4.1
Guard.Velocity = -9.5
Air.Velocity = 0,-4.1
Down.Velocity = 0,-4.1
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
P1StateNo = 2110
P2StateNo = 2120
ID = 2100
NumHits = 0
P2Facing = 1
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 175

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;抜刀・秘密の業物EX・投げている自分
[Statedef 2110]
Type    = S
MoveType= A
Physics = S
Anim = 2110

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State ]
Type = Explod
Trigger1 = Time = 0
Anim = 2115
ID = 2115
PosType = Back
Pos = 160,120
Scale = 2.0,0.53
Trans = Add
Ownpal = 1
SprPriority = 5
BindTime = -1
RemoveTime = 21

[State ]
Type = ModifyExplod
Trigger1 = Time = [0,20]
ID = 2115
Trans = Add
Alpha = 256-(Time)*12,256

[State ]
Type = BGPalFX
Trigger1 = AnimElem = 18, < 1
Add = -256,-256,-256
Time = 8

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 18
Value = s20, 0
Channel = 4

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 17, = 5
Value = s1105, 1
Channel = 5

[State ]
Type = Helper
Trigger1 = AnimElem = 18
StateNo = 16100
ID = 16100+(Var(8)=31)*50
PosType = P1
Pos = 126,-40
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = EnvShake
Trigger1 = AnimElem = 18
Time  = 28
Ampl  = 4
Freq  = 90

[State ]
Type = Pause
Trigger1 = AnimElem = 18
Time = 7
EndCmdBufTime = 7
PauseBG = 0

[State ]
Type = Pause
Trigger1 = Time = [80,90]
Time = 2
EndCmdBufTime = 2

[State ]
Type = TargetBind
Trigger1 = AnimElem = 1, >= 0
Trigger1 = AnimElem = 18, < 0
Pos = 116, 0

[State ]
Type = Width
Trigger1 = 1
Edge = 116,0

[State ]
Type = TargetLifeAdd
Trigger1 = AnimElem = 18
Value = -Ceil(FVar(0)*(200-Var(4)%2)*Const(Data.Attack)*0.01)

[State ]
Type = TargetPowerAdd
Trigger1 = AnimElem = 18
Value = Floor(FVar(31)*37)

[State ]
Type = HitAdd
Trigger1 = AnimElem = 18
Value = 1

[State ]
Type = TargetState
Trigger1 = Time < 81
Value = Cond(Time=80,2121,2120)

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;抜刀・秘密の業物EX・投げられている相手
[Statedef 2120]
Type    = S
MoveType= H
Physics = N
VelSet = 0,0

[State ]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1

[State ]
Type = PlayerPush
Trigger1 = 1
Value = 0

[State ]
Type = ChangeAnim
Trigger1 = 1
Value = 5010

[State ]
Type = SelfState
Trigger1 = Time > 9 && P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
;抜刀・秘密の業物EX・相手の空中の状態
[Statedef 2121]
Type    = A
MoveType= H
Physics = N
Anim = 5030
VelSet = 0,-13

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State ]
Type = ChangeAnim
Trigger1 = (Anim = [5030,5035]) && AnimTime = 0
Value = Cond(SelfAnimExist(5061),5061,5035+(Anim=5035||!SelfAnimExist(5035))*15)

[State ]
Type = VelAdd
Trigger1 = Time >= 0
y = .6

[State ]
Type = HitFallSet
Trigger1 = Vel Y > 0 && Pos Y >= 0
Value = 1 

[State ]
Type = SelfState
Trigger1 = Vel Y > 0 && Pos Y >= 0
Value = 5100 

;---------------------------------------------------------------------------
; マジカルアンバーミサイルEX
[Statedef 2200]
Type    = A
MoveType= A
Physics = N
Ctrl = 0
VelSet = 0,0
Anim = 2200
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = AnimElem = 53, < 0
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State ]
Type = PlayerPush
Trigger1 = AnimElem = 4, >= 0
Trigger1 = AnimElem = 53, < 0
Value = 0

[State ]
Type = Width
Trigger1 = AnimElem = 1
Trigger2 = AnimElem = 1, > 0
Trigger2 = Vel Y + Pos Y < 0
Player = -1,-8

[State ]
Type = SuperPause
Trigger1 = AnimElem = 5
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 6010
ID = 10001
Pos = 13,-45
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 5
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s40, 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s2200, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 7 || AnimElem = 18 || AnimElem = 29 || AnimElem = 40
Anim = 816
ID = 815
PosType = P1
Pos = 10,-67
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
RemoveOnGetHit = 1
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 7 || AnimElem = 18 || AnimElem = 29 || AnimElem = 40
Anim = 816
ID = 815
PosType = P1
Pos = 17,-66
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
RemoveOnGetHit = 1
BindTime = -1

[State ]
Type = Helper
Trigger1 = AnimElem = 7 || AnimElem = 18 || AnimElem = 29 || AnimElem = 40
StateNo = 2205
ID = 2205+Cond(AnimElemNo(0)<8,0,(AnimElemNo(0)-7)/11)
PosType = P1
Pos = 0,-30
Ownpal = 1

[State ]
Type = VelSet
Trigger1 = AnimElem = 1
X = 2.35
Y = -9

[State ]
Type = VelAdd
Trigger1 = AnimElem = 1, > 0
Trigger1 = AnimElem = 4, < 0
Y = .6

[State ]
Type = VelSet
Trigger1 = AnimElem = 4
Y = 0

[State ]
Type = VelSet
Trigger1 = AnimElem = 5
X = 0

[State ]
Type = VelSet
Trigger1 = AnimElem = 5, = 29
X = 2.35

[State ]
Type = VelSet
Trigger1 = AnimElem = 52
Y = -2.4

[State ]
Type = StateTypeSet
Trigger1 = AnimElem = 52
MoveType = I
Physics = A

[State ]
Type = CtrlSet
Trigger1 = AnimElem = 58
Value = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

;---------------------------------------------------------------------------
; 空中マジカルアンバーミサイルEX
[Statedef 2250]
Type    = A
MoveType= A
Physics = N
Ctrl = 0
VelSet = 0,0
Anim = 2250
SprPriority = 2

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = AnimElem = 22, < 0
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State ]
Type = PlayerPush
Trigger1 = AnimElem = 3, >= 0
Trigger1 = AnimElem = 22, < 0
Value = 0

[State ]
Type = SuperPause
Trigger1 = AnimElem = 5
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 6010
ID = 10003
Pos = 4,-41
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 5
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = Width
Trigger1 = Vel Y + Pos Y < 0
Player = -7,-5

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s1255, 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s2250, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 6 || AnimElem = 9 || AnimElem = 12 || AnimElem = 15
Anim = 816
ID = 815
PosType = P1
Pos = 10,-67
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
RemoveOnGetHit = 1
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 6 || AnimElem = 9 || AnimElem = 12 || AnimElem = 15
Anim = 816
ID = 815
PosType = P1
Pos = 17,-66
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
RemoveOnGetHit = 1
BindTime = -1

[State ]
Type = Helper
Trigger1 = AnimElem = 6 || AnimElem = 9 || AnimElem = 12 || AnimElem = 15
StateNo = 2205
ID = 2205+Cond(AnimElemNo(0)<7,0,(AnimElemNo(0)-6)/3)
PosType = P1
Pos = 0,-30
Ownpal = 1

[State ]
Type = VelSet
Trigger1 = AnimElem = 4
X = 2.4

[State ]
Type = VelSet
Trigger1 = AnimElem = 5
Trigger2 = AnimElem = 20
X = 0

[State ]
Type = VelSet
Trigger1 = AnimElem = 5, = 29
X = 2.4

[State ]
Type = VelSet
Trigger1 = AnimElem = 22
X = 2.4
Y = -6.15

[State ]
Type = Turn
Trigger1 = P2Dist X < 0
Trigger1 = AnimElem = 22

[State ]
Type = StateTypeSet
Trigger1 = AnimElem = 22
Physics = A

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

;---------------------------------------------------------------------------
; マジカルアタック・コハポンX
[Statedef 2300]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2300
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = AnimElem = 7
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 7
Anim = -1
Time = 180
MoveTime = 180
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 7
StateNo = 6010
ID = 10001
Pos = 0,-56
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 7
Trigger1 = Var(44):= 180 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s2300, 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 11
Value = s2300, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = BGPalFX
Trigger1 = Time = [90,204]
Add = -255,-255,-255
Time = 1

[State ]
Type = Explod
Trigger1 = Time = [246,300]
Anim = 2301
ID = 2301
PosType = P1
Ownpal = 1
SprPriority = 4
Persistent = 6
BindTime = -1

[State ]
Type = Helper
Trigger1 = AnimElem = 8
StateNo = 2305
ID = 2305
PosType = P1
Pos = 0,-60
Ownpal = 1

[State ]
Type = VarRangeSet
Trigger1 = AnimElem = 31
First = 48
Last = 49
Value = 1

[State ]
Type = Null
Trigger1 = RoundState = 2 && AnimElem = 31
Trigger1 = Var(14):= 30 && Var(13):= 4 && FVar(29):= 3000

[State ]
Type = LifeSet
Trigger1 = Life < FVar(9)
Trigger1 = Alive && Life > 0 && !LoseKO && RoundState = 2
Trigger1 = Var(57)%10 = 3
Trigger1 = AnimElem = 31
Value = Ceil(FVar(9))

[State ]
Type = PlaySnd
TriggerAll = Var(0)/100%10 = 0
Trigger1 = RoundState = 2
Trigger1 = AnimElem = 31
Value = s25000, 0

[State ]
Type = Helper
Trigger1 = Var(57)%10 != 3 && AnimElem = 30
StateNo = 10968
SuperMoveTime = 9999
PauseMoveTime = 9999
Ownpal = 1
ID = 10968

[State ]
Type = Helper
Trigger1 = NumHelper(7010) = 0
Trigger1 = AnimElem = 31
StateNo = 7010
ID = 7010

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; ムービング☆スターEX
[Statedef 2400]
Type    = A
MoveType= A
Physics = N
Ctrl = 0
VelSet = 0,0
Anim = 2400
SprPriority = 2

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = VarSet
Trigger1 = Time = 0 || AnimElem = 14
V = 55
Value = 0

[State ]
Type = VarSet
Trigger1 = MoveHit = 1
V = 55
Value = 1
IgnoreHitPause = 1

[State ]
Type = NotHitBy
Trigger1 = AnimElem = 7, < 0
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 25
MoveTime = 25
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Pos = -1,-55
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 1
Trigger1 = Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = Width
Trigger1 = AnimElem = 13, < 0
Player = -2,-5

[State ]
Type = Width
Trigger1 = AnimElem = 21, >= 0
Trigger1 = Vel Y + Pos Y < 0
Player = -7,-5

[State ]
Type = Width
Trigger1 = AnimElem = 13, >= 0
Trigger1 = AnimElem = 21, < 0
Player = -3,-6

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2400, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = VelSet
Trigger1 = AnimElem = 6
X = 7.8*Cond(Var(57)/100%10=4,1.5,1)

[State ]
Type = VelSet
Trigger1 = AnimElem = 5
Trigger2 = AnimElem = 20
X = 0

[State ]
Type = VelSet
Trigger1 = AnimElem = 13
X = 9.25*Cond(Var(57)/100%10=4,1.5,1)

[State ]
Type = VelAdd
Trigger1 = AnimElem = 13, > 0
Trigger1 = AnimElem = 18, < 0
X = -.4

[State ]
Type = VelSet
Trigger1 = AnimElem = 18
X = 0
Y = 0

[State ]
Type = Turn
Trigger1 = AnimElem = 18
Trigger1 = P2Dist X < 0

[State ]
Type = StateTypeSet
Trigger1 = AnimElem = 24
Physics = A

[State ]
Type = Explod
Trigger1 = AnimElem = 7 || AnimElem = 10
Anim = 2405
ID = 2405
PosType = P1
Pos = 5,-30
Ownpal = 1
SprPriority = 4
BindTime = -1
RemoveOnGetHit = 1

[State ]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Var(50) = 2 && MoveHit = 1 && FVar(1) > 0.01
FV = 1
Value = 0.65*FVar(1)
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = Var(50) = 2 && MoveHit = 1
ID = 10840
PosType = P2
Pos = 0,Const(Size.Mid.Pos.Y)
Anim = 10840
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Null
Trigger1 = Var(50) = 2
Trigger1 = NumTarget(2400) > 0
Trigger1 = Target(2400),StateNo = 5020 || Target(2400),StateNo = 5080
Trigger1 = Var(24):= 1 && Var(50):= 1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || Time%2= 1
Trigger2 = MoveContact || MoveReversed
V = 54
Value = Cond(Time=0||Time%2=1,0,1)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = [7,12]
Attr = A, SA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(40-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(40-Var(4)%2)))
HitFlag = MAFD
GuardFlag = MA
PauseTime = 3,Cond(Var(50)=1,4+4*(Var(38)>0)+Var(41),4)
Guard.PauseTime = 3,4
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 8
Ground.Velocity = -1,-9
Guard.Velocity = -4
Air.Velocity = -1,-9
AirGuard.Velocity = -4,-1
Down.Velocity = -1,-9
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 4
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 2400
Guard.Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
Fall.RecoverTime = Ceil(Cond(Var(50)=1,23+Var(41),23))
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

;---------------------------------------------------------------------------
; お帰りくださいます？
[Statedef 2500]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2500
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1505
ID = 1555

[State ]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1505
ID = 1556

[State ]
Type = NotHitBy
Trigger1 = Time = [0,38]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 1, = 1
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 1, = 1
StateNo = 6010
ID = 10001
Pos = -1,-58
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 1, = 1
Trigger1 = Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s1320, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s30, 1
Channel = 5
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 6
Anim = 435
ID = 2505
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
RemoveOnGetHit = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 6
Anim = 219
ID = 219
Postype = P1
Pos = 16,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 6
Anim = 217
ID = 217
Postype = P1
Pos = 16,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 6
Anim = 218
ID = 218
Postype = P1
Pos = 16,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || MoveContact || MoveReversed
V = 54
Value = 1-(Time=0)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 5
Attr = S, SA
Damage    = Ceil(FVar(0)*(0-Var(4)%2))
HitFlag = MAFD
GuardFlag = M
PauseTime = 0,0
Guard.PauseTime = 6,7
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = 0,-16.2
Guard.Velocity = -4
Air.Velocity = 0,-16.2
Down.Velocity = 0,-16.2
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
ID = 2500
P1StateNo = 2501
P2StateNo = 811
P2Facing = 1
Guard.Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 6
Attr = S, SA
AnimType  = Hard
Damage    = Ceil(FVar(0)*(250-Var(4)%2))
HitFlag = MAFD
GuardFlag = M
PauseTime = 10,11+11*(Var(38)>0)+Var(41)
Guard.PauseTime = 10,11
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -13,-16.2*FVar(36)
Guard.Velocity = -9.5
Air.Velocity = Cond(Var(50)=1,-13,-4),Cond(Var(50)=1,-16.2,-2)*FVar(36)
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 11
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 2501
Guard.Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
Fall.RecoverTime = Ceil(65+Var(41)-FVar(35))
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; お帰りくださいます？2
[Statedef 2501]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2501
SprPriority = 2

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = AnimElem = 3, < 0
Value = SAC
Time = 1

[State ]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 435
ID = 2505
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
RemoveOnGetHit = 1
SprPriority = 5
PauseMoveTime = 99

[State ]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 219
ID = 219
Postype = P1
Pos = 16,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
PauseMoveTime = 99

[State ]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 217
ID = 217
Postype = P1
Pos = 16,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
PauseMoveTime = 99

[State ]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 218
ID = 218
Postype = P1
Pos = 16,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
PauseMoveTime = 99

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s10, 2
Channel = 6

[State ]
Type = Helper
Trigger1 = AnimElem = 2
StateNo = 16000
ID = 16002+(Var(8)=31)*50
PosType = P1
Pos = 45,-65
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = EnvShake
Trigger1 = AnimElem = 2
Time  = 11
Ampl  = 4
Freq  = 90

[State ]
Type = Pause
Trigger1 = AnimElem = 2
Time = 11
EndCmdBufTime = 11
PauseBG = 0

[State ]
Type = Width
Trigger1 = AnimElem = 2, >= 0
Trigger1 = AnimElem = 3, < 0
Value = 40,0

[State ]
Type = TargetBind
Trigger1 = AnimElem = 1, = 1
Pos = 40, 0

[State ]
Type = TargetLifeAdd
Trigger1 = AnimElem = 2
Value = -Ceil(FVar(0)*(250-Var(4)%2)*Const(Data.Attack)*0.01)

[State ]
Type = TargetPowerAdd
Trigger1 = PrevStateNo = 2500
Trigger1 = AnimElem = 2
Value = Floor(FVar(31)*37)

[State ]
Type = TargetState
Trigger1 = Time < 3
Value = Cond(Time=2,2520,811)

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;お帰りくださいます？・相手の空中の状態
[Statedef 2520]
Type    = A
MoveType= H
Physics = N
Anim = 5030
VelSet = -13,-16.195

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State ]
Type = ChangeAnim
Trigger1 = (Anim = [5030,5035]) && AnimTime = 0
Value = 5035+(Anim=5035||!SelfAnimExist(5035))*15

[State ]
Type = VelAdd
Trigger1 = 1
y = .6

[State ]
Type = HitFallSet
Trigger1 = Time >= 50
Value = 1 

[State ]
Type = SelfState
Trigger1 = Alive && CanRecover
Trigger1 = Time >= 53
Trigger1 = Pos Y >= -20
Trigger1 = Command != "holddown" && (Command != "holdup" && (Command = "holdfwd" || Command = "holdback")) || Command != "holdfwd" && Command != "holdback" && Command = "holdup"
Value = 5200

[State ]
Type = SelfState
Trigger1 = Vel Y > 0 && Pos Y >= 0
Value = 5100 

;---------------------------------------------------------------------------
; 対戦に潤いを。EX
[Statedef 2600]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2600
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Time = [0,38]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 4
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 6010
ID = 10001
Pos = -4,-41
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 4
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s2600, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 7
StateNo = 2605
ID = 2605
PosType = P1
Pos = 13,-42
Ownpal = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 抜刀・鳴動重ね撃ち
[Statedef 2700]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2700
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = Time = [0,35]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 4
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 6010
ID = 10001
Pos = -27,-58
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 4
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s2700, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 6
Value = s30, 1
Channel = 5
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 24
Value = s1105, 1
Channel = 3
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 6
StateNo = 2705
ID = 2705
PosType = P1
Pos = 15,0
Ownpal = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 抜刀準備・無礼免EX
[Statedef 2800]
Physics = S
Ctrl = 0
Anim = 2800
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = RemoveExplod
Trigger1 = Time = 0
ID = 815

[State ]
Type = PowerAdd
Trigger1 = AnimElem = 3
Trigger1 = Var(13) = 0
Value = Ceil(-1000*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))

[State ]
Type = Null
Trigger1 = AnimElem = 3
Trigger1 = Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = Helper
Trigger1 = Time = 4
StateNo = 9500
ID = 9502

[State ]
Type = PosSet
Trigger1 = NumHelper(9502) > 0
Trigger1 = FVar(25) = 0 && Pos X != Helper(9502),Pos X
X = Helper(9502),Pos X

[State ]
Type = PlaySnd
Trigger1 = PrevStateNo != 1900
Trigger1 = AnimElem = 2
Value = s900, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = PrevStateNo = 1900
Trigger1 = AnimElem = 2
Value = s2800, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 3
Anim = 2805
ID = 2805
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
RemoveOnGetHit = 1
SprPriority = 5
Persistent = 0
SuperMoveTime = 9999

[State ]
Type = ReversalDef
Trigger1 =! MoveContact
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP
Pausetime = 9,9
HitSound = -1
P1StateNo = 2810
NumHits = 0
GetPower = 0,0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 抜刀準備・無礼免EX2
[Statedef 2810]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 2810
SprPriority = 2

[State ]
Type = VarSet
Trigger1 = Time = 0 || AnimElem = 4
V = 55
Value = 0

[State ]
Type = VarSet
Trigger1 = P2MoveType = A
V = 55
Value = 1

[State ]
Type = NotHitBy
Trigger1 = Time = [0,48]
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 30
MoveTime = 30
P2DefMul = 1
Darken = 0
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 30

[State ]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10020
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s1320, 0
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = VarRandom
Trigger1 = AnimElem = 3
V = 1
Range = 1
IgnoreHitPause = 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s2810, Var(1)
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 6
Value = s30, 1
Channel = 5
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 7 || AnimElem = 14
Value = s1105, 0+(AnimElem=14)
Channel = 4

[State ]
Type = Explod
Trigger1 = Time = 0
Anim = 1806
ID = 1806
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
SprPriority = 5
Persistent = 0
SuperMoveTime = 30

[State ]
Type = Explod
Trigger1 = AnimElem = 7
Anim = 1815
ID = 1815
PosType = Back
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
SprPriority = 5
Persistent = 0

[State ]
Type = ModifyExplod
Trigger1 = AnimElem = 7, >= 0
ID = 1815
PosType = Back
Pos = 0,32+ScreenPos Y*CameraZoom

[State ]
Type = Explod
Trigger1 = AnimElem = 7
Anim = 255
ID = 1816
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
SprPriority = 4
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 8
Anim = 1717
ID = 1717
Postype = P1
Pos = 63,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Explod
Trigger1 = AnimElem = 8
Anim = 1715
ID = 1715
Postype = P1
Pos = 63,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Explod
Trigger1 = AnimElem = 8
Anim = 1716
ID = 1716
Postype = P1
Pos = 63,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = MoveHit = 1 && AnimElem = 8, > 0
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = AnimElem = 8, > 0
Trigger1 = MoveHit = 1 && FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || AnimElem = 8
Trigger2 = MoveContact || MoveReversed
V = 54
Value = Cond((Time=0||AnimElem=8),0,1)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 2
Attr = S, ST
HitFlag = MAFD
Priority = 1, Miss
SprPriority = 1
P2Facing = 1
P2StateNo = 2820+Var(55)
NumHits = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
Fall.Recover = Cond(Var(57)/100%10=4,0,1)
GetPower = 0
GivePower = Floor(FVar(31)*37), 0

[State ]
Type = TargetBind
Trigger1 = AnimElem = 3
Pos = Ceil(P2Dist X), Ceil(P2Dist Y)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 8
Attr = S, SA
AnimType  = Hard
Damage    = Ceil(FVar(0)/(1.00-(0.08*FVar(4)))*0.88*(300-Var(4)%2))
HitFlag = MAFD
PauseTime = 0,30+30*(Var(38)>0)+Var(41)
Guard.PauseTime = 0,30
HitSound   = s20,0
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Air.HitTime = 30
Ground.Velocity = 0,-9
Air.Velocity = 0,-9
Down.Velocity = 0,-9
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 25
EnvShake.Ampl = 3
EnvShake.Freq = 90
P2StateNo = 5600
ID = 5600
P2Facing = 1
Guard.Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
GetPower = Ceil(FVar(30)*300), Ceil((0.85+(Var(43)>0)*0.03)*FVar(30)*300)
GivePower = Floor(FVar(31)*300), Floor(0.5*FVar(31)*300)

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;抜刀準備・無礼免・投げられている相手
[Statedef 2820]
Type    = A
MoveType= H
Physics = N
VelSet = 0,0

[State ]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1

[State ]
Type = PlayerPush
Trigger1 = 1
Value = 0

[State ]
Type = ChangeAnim
Trigger1 = 1
Value = Anim
Elem = AnimElemNo(0)

[State ]
Type = SelfState
Trigger1 = Time > 9 && P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
;抜刀準備・無礼免2・投げられている相手
[Statedef 2821]
Type    = A
MoveType= A
Physics = N
VelSet = 0,0

[State ]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1

[State ]
Type = PlayerPush
Trigger1 = 1
Value = 0

[State ]
Type = ChangeAnim
Trigger1 = 1
Value = Anim
Elem = AnimElemNo(0)

[State ]
Type = SelfState
Trigger1 = Time > 9 && P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
; BEBE抜刀・秘密の業物C
[Statedef 2900]
Type    = S
MoveType= A
Physics = S
Anim = 2900

[State ]
Type = NotHitBy
Trigger1 = AnimElem = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 30
MoveTime = 30
PowerAdd = Ceil(-1000*(Var(13)=0)*(1+(Var(57)%10=2)*.429+(Var(57)%10=3)*.112))
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Pos = -27,-58
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 1
Trigger1 = Var(44):= 30 && Var(43):= 420 && FVar(29):= FVar(29)-(1200-(Var(13)=4)*600)*(Var(13)=[1,4])

[State ]
Type = Width
Trigger1 = AnimElem = 6, >= 0
Trigger1 = AnimElem = 18, < 0
Player = 35,0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2100, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s3105, 0
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = EnvShake
Trigger1 = AnimElem = 7
Time  = 20
Ampl  = 4
Freq  = 90

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 10
Value = s30, 1
Channel = 5
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 10 || AnimElem = 32
Value = s1105, 0+(AnimElem=32)
Channel = 4

[State ]
Type = Explod
Trigger1 = AnimElem = 7
Anim = 3105
ID = 3105
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1
RemoveOnGetHit = 1
Persistent = 0

[State ]
Type = Explod
Trigger1 = AnimElem = 10
Anim = 3106
ID = 3106
PosType = Back
Pos = -15,50+ScreenPos Y
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1
RemoveOnGetHit = 1
Persistent = 0

[State ]
Type = ModifyExplod
Trigger1 = AnimElem = 10, >= 0
ID = 3106
PosType = Back
Pos = -15,50+ScreenPos Y

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+1
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = MoveHit = 1 && FVar(1) > 0.30
FV = 1
Value = 0.30
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = NumHelper(2030) = 0
Trigger1 = AnimElem = 12
Attr = S, SA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(1000-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(1000-Var(4)%2))),Ceil(FVar(0)/FVar(3)*125)
HitFlag = M
GuardFlag = L
PauseTime = 0,Cond(Var(50)=1,30+30*(Var(38)>0)+Var(41),30)
Guard.PauseTime = 0,30
HitSound   = s20,0
GuardSound = s120,0
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-4.1
Guard.Velocity = -9.5
Air.Velocity = -0.5,-4.1
Down.Velocity = -0.5,-4.1
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 25
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 2900
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = NumHelper(2030) = 1
Trigger1 = AnimElem = 12
Attr = S, SA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(1000-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(1000-Var(4)%2))),Ceil(FVar(0)/FVar(3)*125)
HitFlag = M
PauseTime = 0,Cond(Var(50)=1,30+30*(Var(38)>0)+Var(41),30)
Guard.PauseTime = 0,30
HitSound   = s20,0
GuardSound = s120,0
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-4.1
Guard.Velocity = -9.5
Air.Velocity = -0.5,-4.1
Down.Velocity = -0.5,-4.1
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 25
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 2900
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

[State ]
Type = AttackDist
Trigger1 = 1
Value = Cond(NumHelper(2030)=0,400,0)

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 開打靠靭琥珀脚
[Statedef 3000]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 3000
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 1, = 1
Anim = -1
Time = 65
MoveTime = 65
UnHittable = 0
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 1, = 1
StateNo = 6010
ID = 10002
Pos = 1,-59
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 1, = 1
Trigger1 = Var(43):= 420 && FVar(29):= 0

[State ]
Type = Width
Trigger1 = AnimTime < 0
Player = 2,-1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1, = 1
Value = s3000, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 21
Value = s40, 0
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = VelSet
Trigger1 = AnimElem = 21, >= 0
X = 9.7

[State ]
Type = Helper
Trigger1 = AnimElem = 21, >= 0
StateNo = 3004
ID = 3004
Ownpal = 1

[State ]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 3002
ID = 3002
PosType = P1
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Explod
Trigger1 = AnimElem = 8
Anim = 3003
ID = 3003
PosType = P1
Vel = 1.5,-1.75
Accel = 0,0.11
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 1
Trigger1 = AnimElem = 23, >= 0
Trigger1 = P2StateNo != [39,49]
Attr = S, HT
HitFlag = M
Priority = 1, Miss
SprPriority = 1
P2Facing = 1
ID = 3000
P1StateNo = 3001
P2StateNo = 3002
NumHits = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
GetPower = 0
GivePower = Floor(FVar(31)*37), 0

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 2
Trigger1 = AnimElem = 23, >= 0
Trigger1 = P2StateNo = [5100,5119]
Attr = S, HT
HitFlag = FD
Priority = 1, Miss
SprPriority = 1
P2Facing = 1
ID = 3000
P1StateNo = 3001
P2StateNo = 3002
NumHits = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
GetPower = 0
GivePower = Floor(FVar(31)*37), 0

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = FrontEdgeBodyDist <= 1
Value = 3010

;---------------------------------------------------------------------------
; 開打靠靭琥珀脚2
[Statedef 3001]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 3001
SprPriority = 2

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 18
IgnoreHitPause = 1

[State ]
Type = Width
Trigger1 = AnimElem = 3, < 0
Edge = 40,0

[State ]
Type = Width
Trigger1 = AnimElem = 3
Edge = 45,0

[State ]
Type = TargetBind
Trigger1 = AnimElem = 1
Pos = 40, 0

[State ]
Type = TargetBind
Trigger1 = AnimElem = 3
Pos = 45, 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s3001, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 2 || AnimElem = 8 || AnimElem = 16
Value = s30, 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 8
Value = s3001, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 16
Value = s3001, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 28
Value = s194, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Helper
Trigger1 = 1
StateNo = 3004
ID = 3004
Ownpal = 1

[State ]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 3005
ID = 3005
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 8
Anim = 3006
ID = 3006
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 15
Anim = 815
ID = 815
PosType = P1
Pos = 15,-34
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 15
Anim = 815
ID = 815
PosType = P1
Pos = 21,-34
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 16
Anim = 3007
ID = 3007
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 2
StateNo = 8120
ID = 8120
PosType = P1
Pos = 50,13
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 3
StateNo = 8120
ID = 8121
PosType = P1
Pos = 50,13
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 4
StateNo = 8120
ID = 8120+Random%2
PosType = P1
Pos = 50,13
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 2
StateNo = 8120
ID = 8121
PosType = P1
Pos = 20,40
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 3
StateNo = 8120
ID = 8120
PosType = P1
Pos = 20,40
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 4
StateNo = 8120
ID = 8120+Random%2
PosType = P1
Pos = 20,40
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 3
StateNo = 8120
ID = 8120
PosType = P1
Pos = -33,20
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 4
StateNo = 8120
ID = 8121
PosType = P1
Pos = -33,20
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 5
StateNo = 8120
ID = 8120+Random%2
PosType = P1
Pos = -33,20
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 3
StateNo = 8120
ID = 8121
PosType = P1
Pos = -16,40
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 4
StateNo = 8120
ID = 8120
PosType = P1
Pos = -16,40
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 26, = 5
StateNo = 8120
ID = 8120+Random%2
PosType = P1
Pos = -16,40
Ownpal = 1

[State ]
Type = Explod
Trigger1 = AnimElem = 29
Anim = 3008
ID = 3008
PosType = P1
Ownpal = 1
SprPriority = 4
RemoveTime = 17
BindTime = -1

[State ]
Type = VelSet
Trigger1 = AnimElem = 16
X = 1
Y = -7.651

[State ]
Type = StateTypeSet
Trigger1 = AnimElem = 16
StateType = A
Physics = A

[State ]
Type = VelAdd
Trigger1 = AnimElem = 16, > 0
Y = -.3

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+(AnimElem=9,>0)
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 && FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || AnimElem = 9 || AnimElem = 19
Trigger2 = MoveContact || MoveReversed
V = 54
Value = Cond((Time=0||AnimElem=9||AnimElem=19),0,1)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 3
Attr = S, HA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(150-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(150-Var(4)%2)))
HitFlag = MAFD
PauseTime = 15,Cond(Var(50)=1,16+16*(Var(38)>0)+Var(41),16)
Guard.PauseTime = 15,16
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0
Air.Velocity = 0,-9
Down.Velocity = 0,-9
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 16
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 3001
Guard.Kill = 0
Air.Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 9
Attr = S, HA
AnimType  = Up
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(150-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(150-Var(4)%2)))
HitFlag = MAFD
PauseTime = 15,Cond(Var(50)=1,16+16*(Var(38)>0)+Var(41),16)
Guard.PauseTime = 15,16
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-13
Air.Velocity = 0,-13
Down.Velocity = 0,-13
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 16
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 3002
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 19
Attr = A, HA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(170-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(170-Var(4)%2)))
HitFlag = MAFD
PauseTime = 15,16+16*(Var(38)>0)+Var(41)
Guard.PauseTime = 15,16
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-9*FVar(36)
Air.Velocity = Cond(Var(50)=1,-1,-4),Cond(Var(50)=1,-9,-2)*FVar(36)
Down.Velocity = -4,-2*FVar(36)
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 16
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 3003
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

;---------------------------------------------------------------------------
;開打靠靭琥珀脚・投げられている相手
[Statedef 3002]
Type    = S
MoveType= H
Physics = N
Anim = 5002
VelSet = 0,0

[State ]
Type = HitFallSet
Trigger1 = 1
Value = 0

[State ]
Type = SelfState
Trigger1 = Time >= 60
Trigger1 = P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
;開打靠靭琥珀脚/開打散靭琥珀失脚　失敗
[Statedef 3010]
Type     = A
VelSet    = 0,0
Anim     = 9999

[State ]
Type = PlaySnd
Trigger1 = Time = 16
Value = s3010, 0

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s3015, 0

[State ]
Type = Helper
Trigger1 = Time = 1
StateNo = 3015
ID = 3015
Ownpal = 1

[State ]
Type = StateTypeSet
Trigger1 = Time = 16
MoveType = H

[State ]
Type = PosAdd
Trigger1 = Time = 0
X = 320
Y = -72

[State ]
Type = EnvShake
Trigger1 = Time = 0
Time  = 15
Ampl  = 4
Freq  = 90

[State ]
Type = ChangeAnim
Trigger1 = Time = 16
Value = 5035

[State ]
Type = ChangeAnim
Trigger1 = Anim = 5035 && AnimTime = 0
Value = 5050

[State ]
Type = HitFallSet
Trigger1 = Time = 16
Value = 0

[State ]
Type = VelSet
Trigger1 = Time = 16
X = -2
Y = -9.4

[State ]
Type = VelSet
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
X = 0

[State ]
Type = VelAdd
Trigger1 = Time > 16
Y = .6

[State ]
Type = ChangeState
Value = 860
Trigger1 = Var(59) <= 0
Trigger1 = (Var(13) = [1-(Var(57)%10=4),5]) || Var(57)%10 = 2 && FVar(29) = 2000
Trigger1 = Var(46) = 0
Trigger1 = Alive
Trigger1 = Time > 16
Trigger1 = Command = "abc" || Command = "x"

[State ]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 3011

;---------------------------------------------------------------------------
;開打靠靭琥珀脚/開打散靭琥珀失脚　失敗2
[Statedef 3011]
Type     = A
MoveType  = H
Physics  = N
VelSet    = 0,0
Anim     = 5100

[State ]
Type = PosSet
Trigger1 = Time = 0
Y = 0

[State ]
Type = ChangeAnim
Trigger1 = Anim = 5100 && AnimTime = 0
Value = 5170

[State ]
Type = ChangeAnim
Trigger1 = Anim = 5170
Trigger1 = AnimElem = 3
Value = 5110

[State ]
Type = NotHitBy
Trigger1 = Anim = 5110
Value = SAC
Time = 1

[State ]
Type = EnvShake
Trigger1 = Time = 0
Time = 12
Freq = 90
Ampl = 4

[State ]
Type = PlaySnd
Trigger1 = Time = 0
Value = s5100, 0

[State ]
Type = Explod
Trigger1 = Time = 0
Anim = 15102
ID = 15102
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Explod
Trigger1 = Time = 0
Anim = 15100
ID = 15100
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Explod
Trigger1 = Time = 0
Anim = 15101
ID = 15101
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Explod
Trigger1 = Time = 0
Anim = 15105
ID = 15105
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = -5
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = ChangeState
Trigger1 = Anim = 5110
Trigger1 = TIme >= 39
Value = 5120

;---------------------------------------------------------------------------
; 開打散靭琥珀失脚
[Statedef 3050]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 3050
SprPriority = 2
Facep2 = 1

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 65
MoveTime = 65
UnHittable = 0
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10012
Pos = 1,-59
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 1
Trigger1 = Var(43):= 420 && FVar(29):= 0

[State ]
Type = Width
Trigger1 = AnimElem = 21, < 0
Player = 2,-1

[State ]
Type = Width
Trigger1 = AnimElem = 21, >= 0
Trigger1 = AnimElem = 23, < 0
Player = 5,7

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s3000, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 21
Value = s40, 0
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = VelSet
Trigger1 = AnimElem = 21, >= 0
X = 10.8

[State ]
Type = Helper
Trigger1 = AnimElem = 21, >= 0
StateNo = 3004
ID = 3004
Ownpal = 1

[State ]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 3002
ID = 3002
PosType = P1
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Explod
Trigger1 = AnimElem = 8
Anim = 3003
ID = 3003
PosType = P1
Vel = 1.5,-1.75
Accel = 0,0.11
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 23, >= 0
Trigger1 = P2StateNo != [39,49]
Attr = S, HT
HitFlag = M
Priority = 1, Miss
SprPriority = 1
P2Facing = 1
ID = 3050
P1StateNo = 3051
P2StateNo = 3052
NumHits = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
GetPower = 0
GivePower = Floor(FVar(31)*37), 0

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = FrontEdgeBodyDist <= 1
Value = 3010

;---------------------------------------------------------------------------
; 開打散靭琥珀失脚2
[Statedef 3051]
Type    = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 3051
SprPriority = 2

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 16
IgnoreHitPause = 1

[State ]
Type = Width
Trigger1 = AnimElem = 3, < 0
Edge = 40,0

[State ]
Type = Width
Trigger1 = AnimElem = 5, < 0
Player = 6,10

[State ]
Type = Width
Trigger1 = AnimElem = 5, >= 0
Trigger1 = AnimElem = 27, < 0
Player = 3,2

[State ]
Type = Width
Trigger1 = AnimElem = 3
Edge = 45,0

[State ]
Type = TargetBind
Trigger1 = AnimElem = 1
Pos = 40, 0

[State ]
Type = TargetBind
Trigger1 = AnimElem = 3
Pos = 45, 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s3001, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s30, 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s3051, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 8 || AnimElem = 10 || AnimElem = 11 || AnimElem = 13 || AnimElem = 14
Trigger2 = AnimElem = 16 || AnimElem = 18 || AnimElem = 24 || AnimElem = 32 || AnimElem = 38
Value = s30, 1

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 18
Value = s3051, 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 24
Value = s3001, 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 32
Value = s3051, 2
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 50
Value = s194, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = Helper
Trigger1 = 1
StateNo = 3004
ID = 3004
Ownpal = 1

[State ]
Type = Explod
Trigger1 = AnimElem = 1
Anim = 3005
ID = 3005
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 8
Trigger2 = AnimElem = 11
Trigger3 = AnimElem = 14
Anim = 3055
ID = 3055
PosType = P1
Pos = 0,-2
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1
IgnoreHitPause = 1

[State ]
Type = Explod
Trigger1 = AnimElem = 18
Anim = 3056
ID = 3056
PosType = P1
Pos = -20,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 24
Anim = 3006
ID = 3006
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5

[State ]
Type = Explod
Trigger1 = AnimElem = 31
Anim = 816
ID = 815
PosType = P1
Pos = 15,-34
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3

[State ]
Type = Explod
Trigger1 = AnimElem = 31
Anim = 816
ID = 815
PosType = P1
Pos = 21,-34
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3

[State ]
Type = Explod
Trigger1 = AnimElem = 32
Anim = 3057
ID = 3057
PosType = P1
Pos = 6,-6
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1

[State ]
Type = Explod
Trigger1 = AnimElem = 51
Anim = 3008
ID = 3008
PosType = P1
Ownpal = 1
SprPriority = 4
RemoveTime = 23
BindTime = -1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 1
StateNo = 8120
ID = 8120
PosType = P1
Pos = 50,28
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 2
StateNo = 8120
ID = 8121
PosType = P1
Pos = 50,28
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 3
StateNo = 8120
ID = 8120+Random%2
PosType = P1
Pos = 50,28
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 1
StateNo = 8120
ID = 8121
PosType = P1
Pos = 20,55
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 2
StateNo = 8120
ID = 8120
PosType = P1
Pos = 20,55
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 3
StateNo = 8120
ID = 8120+Random%2
PosType = P1
Pos = 20,55
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 2
StateNo = 8120
ID = 8120
PosType = P1
Pos = -33,35
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 3
StateNo = 8120
ID = 8121
PosType = P1
Pos = -33,35
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 4
StateNo = 8120
ID = 8120+Random%2
PosType = P1
Pos = -33,35
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 2
StateNo = 8120
ID = 8121
PosType = P1
Pos = -16,55
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 3
StateNo = 8120
ID = 8120
PosType = P1
Pos = -16,55
Ownpal = 1

[State ]
Type = Helper
Trigger1 = AnimElem = 48, = 4
StateNo = 8120
ID = 8120+Random%2
PosType = P1
Pos = -16,55
Ownpal = 1

[State ]
Type = VelSet
Trigger1 = AnimElem = 6, >= 0
Trigger1 = AnimElem = 17, < 0
X = 1.95

[State ]
Type = PosAdd
Trigger1 = AnimElem = 18, = [0,1]
X = 9.7

[State ]
Type = PosAdd
Trigger1 = AnimElem = 22, = [0,3]
X = 10.85

[State ]
Type = VelSet
Trigger1 = AnimElem = 32
X = 0.2
Y = -9.151

[State ]
Type = StateTypeSet
Trigger1 = AnimElem = 32
StateType = A
Physics = A

[State ]
Type = VelAdd
Trigger1 = AnimElem = 32, > 0
Y = -.3

[State ]
Type = Null
Trigger1 = MoveHit = 1
Trigger1 = Var(4):= Var(4)+1 && Var(5):= Var(5)+(AnimElem=8,>0)
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 && FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || AnimElem = 8 || AnimElem = 10 || AnimElem = 11 || AnimElem = 13 || AnimElem = 14 || AnimElem = 16 || AnimElem = 20 || AnimElem = 25 || AnimElem = 34 || AnimElem = 41
Trigger2 = MoveContact || MoveReversed
V = 54
Value = Cond((Time=0||AnimElem=8||AnimElem=10||AnimElem=11||AnimElem=13||AnimElem=14||AnimElem=16||AnimElem=20||AnimElem=25||AnimElem=34||AnimElem=41),0,1)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 3
Attr = S, HA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(100-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(100-Var(4)%2)))
HitFlag = MAFD
PauseTime = 15,Cond(Var(50)=1,16+16*(Var(38)>0)+Var(41),16)
Guard.PauseTime = 15,16
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0
Air.Velocity = 0,-9
Down.Velocity = 0,-9
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 16
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 3051
Guard.Kill = 0
Air.Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = [8,16]
Attr = S, HA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(100-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(100-Var(4)%2)))
HitFlag = MAFD
PauseTime = 3,Cond(Var(50)=1,4+4*(Var(38)>0)+Var(41),4)
Guard.PauseTime = 3,4
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0
Air.Velocity = 0,-9
Down.Velocity = 0,-9
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 4
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 3052
Guard.Kill = 0
Air.Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 20
Attr = S, HA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(120-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(120-Var(4)%2)))
HitFlag = MAFD
PauseTime = 15,Cond(Var(50)=1,16+16*(Var(38)>0)+Var(41),16)
Guard.PauseTime = 15,16
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = Low
Ground.SlideTime = 19
Ground.HitTime  = 19
Ground.Velocity = 0
Air.Velocity = 0,-9
Down.Velocity = 0,-9
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 16
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 3053
Guard.Kill = 0
Air.Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 25
Attr = S, HA
AnimType  = Up
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(120-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(120-Var(4)%2)))
HitFlag = MAFD
PauseTime = 15,Cond(Var(50)=1,16+16*(Var(38)>0)+Var(41),16)
Guard.PauseTime = 15,16
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-13
Air.Velocity = 0,-13
Down.Velocity = 0,-13
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 16
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 3054
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 34
Attr = A, HA
AnimType  = Up
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(220-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(220-Var(4)%2)))
HitFlag = MAFD
PauseTime = 6,Cond(Var(50)=1,7+7*(Var(38)>0)+Var(41),7)
Guard.PauseTime = 6,7
HitSound   = s10,5
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-13
Air.Velocity = 0,-13
Down.Velocity = 0,-13
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 7
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
ID = 3055
Guard.Kill = 0
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 41
Attr = A, HA
AnimType  = Hard
Damage    = Cond(Var(50)=1||Var(50)=2&&FVar(16)>0,Ceil(FVar(0)*(220-Var(4)%2)),Ceil(FVar(0)/FVar(5)*(220-Var(4)%2)))
HitFlag = MAFD
PauseTime = 15,Cond(Var(50)=1,16+16*(Var(38)>0)+Var(41),16)
Guard.PauseTime = 15,16
HitSound   = s10,2
GuardSound = s120,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Air.HitTime = 100
Ground.Velocity = 0,-9
Air.Velocity = 0,-9
Down.Velocity = 0,-9
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 16
EnvShake.Ampl = 3
EnvShake.Freq = 90
P2StateNo = 5600
ID = 5600
P2Facing = 1
Guard.Kill = 0
Fall = 1
Fall.Recover = 1-(P2MoveType=A)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = MoveHitReset
Trigger1 = MoveContact || MoveReversed
IgnoreHitPause = 1

;---------------------------------------------------------------------------
;開打散靭琥珀失脚・投げられている相手
[Statedef 3052]
Type    = S
MoveType= H
Physics = N
Anim = 5002
VelSet = 0,0

[State ]
Type = HitFallSet
Trigger1 = 1
Value = 0

[State ]
Type = SelfState
Trigger1 = Time >= 60
Trigger1 = P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
; 抜刀奥義・賀正箒星
[Statedef 3100]
Type    = S
MoveType = A
Physics = S
Anim    = 3100
Ctrl    = 0
VelSet  = 0,0

[State ]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1
IgnoreHitPause = 1

[State ]
Type = SuperPause
Trigger1 = AnimElem = 4
Anim = -1
Time = 50
MoveTime = 50
UnHittable = 0
P2DefMul = 1
Darken = 0

[State ]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 6010
ID = 10011
Pos = -30,-59
PosType = P1
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State ]
Type = Null
Trigger1 = AnimElem = 4
Trigger1 = FVar(29):= 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s3100, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s3105, 0
IgnoreHitPause = 1
Persistent = 0

[State ]
Type = EnvShake
Trigger1 = AnimElem = 12
Time  = 30
Ampl  = 4
Freq  = 90

[State ]
Type = PlaySnd
Trigger1 = AnimElem = 10 || AnimElem = 33
Value = s1105, 0+(AnimElem=33)
Channel = 4

[State ]
Type = Explod
Trigger1 = AnimElem = 8
Anim = 3105
ID = 3105
PosType = P1
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1
Persistent = 0
SuperMoveTime = 20

[State ]
Type = Explod
Trigger1 = AnimElem = 10
Anim = 1105
ID = 1105
PosType = P1
Pos = 88,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1
Persistent = 0
SuperMoveTime = 20

[State ]
Type = Explod
Trigger1 = AnimElem = 11
Anim = 3106
ID = 3106
PosType = Back
Pos = -15,ScreenHeight/2+140
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
BindTime = -1
Persistent = 0
SuperMoveTime = 20

[State ]
Type = Explod
Trigger1 = AnimElem = 12
Anim = 2115
ID = 2115
PosType = Back
Pos = 160,120
Scale = 2.0,0.53
Trans = Add
Ownpal = 1
SprPriority = 5
BindTime = -1
RemoveTime = 17

[State ]
Type = ModifyExplod
Trigger1 = Time = [52,67]
ID = 2115
Trans = Add
Alpha = 256-(Time-52)*16,256

[State ]
Type = Helper
Trigger1 = Time = 71
StateNo = 3115
ID = 3115
Ownpal = 1

[State ]
Type = VarSet
Trigger1 = Time = 0 || MoveContact || MoveReversed
V = 54
Value = 1-(Time=0)
IgnoreHitPause = 1

[State ]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(54) = 0 && AnimElemNo(0) = 12
Attr = S, HA
AnimType  = Up
Damage    = Ceil(FVar(2)*FVar(3)*(1.00-(0.08*FVar(4)))*FVar(6)*FVar(15)*(700-Var(4)%2))
HitFlag = MAFD
PauseTime = 0,Cond(Var(50)=1,16+16*(Var(38)>0)+Var(41),16)
Guard.PauseTime = 0,16
HitSound   = s20,0
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-13
Air.Velocity = 0,-13
Down.Velocity = 0,-13
Ground.CornerPush.VelOff = 0
Fall.XVelocity = 0
Fall.YVelocity = 0
Down.Bounce = 1
EnvShake.Time = 16
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .6
P2StateNo = 3111
ID = 3100
P2Facing = 1
Fall = 1
Fall.Recover = 0
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(FVar(31)*18.5)

[State ]
Type = AttackDist
Trigger1 = 1
Value = 0

[State ]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;抜刀奥義・賀正箒星・投げられている相手
[Statedef 3111]
Type    = S
MoveType= H
Physics = N
Anim = 5030
VelSet = 0,0

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State ]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1

[State ]
Type = PlayerPush
Trigger1 = 1
Value = 0

[State ]
Type = HitFallSet
Trigger1 = 1
Value = 0

[State ]
Type = OffSet
Trigger1 = Time >= 105
X = (Time%2)*.5-(Time%2=0)*.5

[State ]
Type = ChangeState
Trigger1 = Time = 118
Value = 3112

;---------------------------------------------------------------------------
;抜刀奥義・賀正箒星・相手の空中の状態
[Statedef 3112]
Type    = A
MoveType= H
Physics = N
Anim = 5030
VelSet = 0,-12.605

[State ]
Type = ScreenBound
Trigger1 = 1
Value = 1
MoveCamera = 0,0

[State ]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State ]
Type = ChangeAnim
Trigger1 = (Anim = [5030,5035]) && AnimTime = 0
Value = Cond(SelfAnimExist(5061),5061,5035+(Anim=5035||!SelfAnimExist(5035))*15)

[State ]
Type = VelAdd
Trigger1 = 1
y = .6

[State ]
Type = HitFallSet
Trigger1 = Time = 41
Value = 1

[State ]
Type = SelfState
Trigger1 = Time = 41
Value = 5100
