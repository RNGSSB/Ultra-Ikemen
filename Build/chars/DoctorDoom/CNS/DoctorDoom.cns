[Data]
life = 1000			;Amount of life to start with
attack = 100		;attack power (more is stronger)
defence = 102		;defensive power (more is stronger)
fall.defence_up = 50	;Percentage to increase defense everytime player is knocked down
liedown.time = 15		;Time which player lies down for, before getting up
airjuggle = 15		;Number of points for juggling
sparkno = 2			;Default hit spark number for HitDefs
guard.sparkno = 40	;Default guard spark number
KO.echo = 0			;1 to enable echo on KO
volumescale = 155
volume = 155
IntPersistIndex = 58	;Variables with this index and above will not have their values
FloatPersistIndex = 40  ;reset to 0 between rounds or matches. There are 60 int variables,

[Size]
xscale = .83
yscale = 1.07 
ground.back = 28
ground.front = 28
air.back = 18
air.front = 18
z.width = 3
height = 60
attack.width = 4,4
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = 2, -109
mid.pos = 5, -79
draw.offset=0,1 		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.7
walk.back = -2.1
run.fwd  = 8.8, -3
run.back = -10.1,-3
jump.neu = 0,-12.8
jump.back = -3
jump.fwd = 3
runjump.back = -3,-12.8
runjump.fwd = 4.6,-12.8
airjump.neu = 0,-7.5
airjump.back = -4.5
airjump.fwd = 4.5

[Movement]
airjump.num = 0		;Number of air jumps allowed (opt)
airjump.height = 35	;Minimum distance from ground before you can air jump (opt)
yaccel = .67		;Vertical acceleration
stand.friction = .8
crouch.friction = .8

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...


[Statedef 21]
type    = S
physics = S
sprpriority = 1

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 21, 1]
type = VelSet
triggerall = enemy, stateno != [191,192]
trigger1 = command = "holdfwd"
x =1.9

[State 21, 2]
type = VelSet
triggerall = enemy, stateno != [191,192]
trigger1 = command = "holdback"
x = -1.6

[State 21, 3]
type = VelSet
triggerall = enemy, stateno != [191,192]
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = command = "holdfwd" && anim != 20
value = 20

[State 21, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = command = "holdback" && anim != 21
value = 21

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = command != "holdfwd" && anim != 0
trigger1 = command != "holdback" && anim != 0
value = 0


[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 20, 21)

; Jump Start 
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
velset = 0,0
facep2 = 1

[State 40, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 40, VarSet]
type = VarSet
trigger1 = time = 1
sysvar(1) = ifelse(command = "holdfwd",1,ifelse(command = "holdback", -1, 0))

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, VelSet]
type = VelSet
trigger1 = animtime = 0
trigger1 = prevstateno = 100
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
 
; AirJump Start 
[Statedef 45]
type    = A
physics = A
velset = 0,0

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
sysvar(1) = ifelse(command = "holdfwd",1,ifelse(command = "holdback", -1, 0))

[State 40, VarAdd]
type = VarAdd
trigger1 = time = 0
var(2) = -1

[State 40, VarSet]
type = VarSet
trigger1 = time = 0
var(3) = 1

[State 40, VelSet]
type = VelSet
trigger1 = Time = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 50, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))
 
; Jump Up 
[Statedef 50]
type    = A
physics = A

[State 50, VarSet]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 9002, SelfState]
type = SelfState
trigger1 = time>10 && pos y >= -40
value = 52

[State 50, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

;-------------------------------------------------------------------------
;Super Jump
[Statedef 99]
type    = A
physics = A
ctrl = 1
anim = 44
velset = 0, -18

[State 1000, FireB]
type = Explod
trigger1 = time = 0
anim = 8250
id = 8250
pos = -120, 9
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[state 40, 11]
type = varset
trigger1 = time = 0
var(55) = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > -110
y= - 0.17

[State 91, VelAdd]
type = VelAdd
trigger1 = time = 0
y=  0.08

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 190

[State 200, 1]
type = PlaySnd
trigger1 = time = 6
value = 100,3
volumescale = 190

[State 999, 1a]
type = VelAdd
triggerall = Vel X >= -4
trigger1 = Time >= 0
trigger1 = Time < 99
trigger1 = command = "holdback"
;trigger1 = Anim != 43
x = -0.38

[State 999, 1b]
type = VelAdd
triggerall = Vel X <= 4.5
trigger1 = Time >= 0
trigger1 = Time < 99
trigger1 = command = "holdfwd"
;trigger1 = Anim != 42
x = 0.38

[State 999, 2a]
type = VelSet
trigger1 = Anim = 45
trigger1 = Time = [0,2]
x = 3

[State 999, 2b]
type = VelSet
trigger1 = Anim = 46
trigger1 = Time = [0,2]
x = -3.5

[State 1310, 6]
type = Turn
;trigger1 = Time = 10
trigger1 = p2dist X < -5

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 45

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 46

[State 9002, SelfState]
type = SelfState
trigger1 = time>10 && pos y >= -20
value = 52

;---------------------------------------------------------------------------
;Falling

[Statedef 1211]
type    = A
movetype= I
physics = A
anim = 48
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[State 1211, Ctrl]
type = CtrlSet
trigger1 = prevstateno = 4100
value = 1

[State 112, 3]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = Vel X < 3.5
x = .2

[State 112, 4]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = Vel X > -3.5
x = -.2

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 49

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 50

[State 1211, ChangeState]
type = ChangeState
trigger1 = time>10 && pos y >= -40
value = 52

;---------------------------------------------------------------------------
;Falling

[Statedef 1221]
type    = A
movetype= I
physics = A
anim = 48
sprpriority = 1

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[State 1211, Ctrl]
type = CtrlSet
trigger1 = prevstateno = 4100
value = 1

[State 1211, Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1211, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 999, ChangeAnim] ;Change to jumping forward anim
type = ChangeAnim
trigger1 = Vel X > 0
trigger1 = Time = [0,2]
value = 49

[State 998, ChangeAnim2] ;Change to jumping back anim
type = ChangeAnim
trigger1 = Vel X < 0
trigger1 = Time = [0,2]
value = 50

[State 1211, ChangeState]
type = ChangeState
trigger1 = time>10 && pos y >= -40
value = 52

;--------------------------------------------------------
;Run Foward
[Statedef 100]
type = S
physics = N
anim = 100
ctrl=0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = nowalk
flag2 = noautoturn

[State 100, 1]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.fwd.x)
y = const(velocity.run.fwd.y)

[state 100, 4]
type = explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
scale = 0.5,0.5
random = 30,abs(const(size.head.pos.y))
pos = -30,ceil(const(size.mid.pos.y))

[state 192, 2]
type = playsnd
trigger1 = animelem = 1
value = 0, 1

[state 192, 2]
type = playsnd
trigger1 = animelem = 1
value = 100,3

[State 100, 0]
type = PosSet
trigger1 = time = 0
y = 0

[State 105, 2]
type = PosSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0

[State 105, 2]
type = PosSet
trigger1 = command = "holddown"
y = 0

[State 105, 2]
type = VelSet
trigger1 = command = "holddown"
y = 0
x = 25

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem=2
statetype = A   

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup"
value = 40
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holddown"
value = 10
ctrl = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = command="holdup"||command="holdfwd"||command="holdback"||command="holddown"||command="x"||command="y"||command="z"||command="a"||command="b"||command="c"||command="start"
statetype = S    

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0
x = 15

[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = command = "x"
value = 200

[State 105, 3a]
type = ChangeState
triggerall = time > 2
trigger1 = command = "y"
value = 210

[STate 105, 3b]
type = ChangeState
triggerall = time > 2
trigger1 = command = "z"
value = 220

[State 105, 3c]
type = ChangeState
triggerall = time > 2
trigger1 = command = "a"
value = 230

[State 105, 3d]
type = ChangeState
triggerall = time > 2
trigger1 = command = "b"
value = 240

[State 105, 3e]
type = ChangeState
triggerall = time > 2
trigger1 = command = "c"
value = 250

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5)>=0
y = const(movement.yaccel)

[State 100,9]
type = changestate
triggerall = AnimElemTime(2)>=0
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
value = 101

;--------------------------------------------------------
;Run Foward part II
[Statedef 101]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 101

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 100,9]
type = changestate
triggerall = command = "holdup"
trigger1 = AnimElemTime(2) >= 0
value = 40
ctrl = 1

[State 100,9]
type = changestate
triggerall = command = "holddown"
trigger1 = AnimElemTime(5) = 0
value = 11
ctrl = 1

[State 100,9]
type = changestate
triggerall = command != "holddown"
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------
;Air Dash Up
[Statedef 102]
type    = A
physics = N
movetype = I
anim = 1301
ctrl = 0 + (0*(var(53):=1))
velset = 0,0
sprpriority = -2

[State 117, 1]
type = VelSet
trigger1 = time >= 1
x = 0
y = -9

[State 855, VarSet]
type = PosAdd
triggerall = var(19)
trigger1 = pos y < -170
y = 10

[State 111, 1]
type = VelSet
trigger1 = time >= 20
x = 0
y = 0

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
volume = 255
volumescale = 255
channel = 7

[State 112, 4]
type = ChangeState
triggerall = !var(19)
trigger1 = time = 21
value = 1221
ctrl = 1

[State 112, 4]
type = ChangeState
triggerall = var(19)
trigger1 = time = 21
value = 1305
ctrl = 1

;-------------------------
;Air Dash Fwd
[Statedef 103]
type    = A
physics = N
movetype = I
anim = 1302
ctrl = 0 + (0*(var(53):=1))
velset = 0,0
sprpriority = -2

[State 117, 1]
type = VelSet
trigger1 = time >= 1
x = 9
y = 0

[State 111, 1]
type = VelSet
trigger1 = time >= 20
x = 0
y = 0

[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
volume = 255
volumescale = 255
channel = 7

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 112, 4]
type = ChangeState
triggerall = !var(19)
trigger1 = time = 21
value = 1221
ctrl = 1

[State 112, 4]
type = ChangeState
triggerall = var(19)
trigger1 = time = 21
value = 1305
ctrl = 1


;-------------------------
;Air Dash Back
[Statedef 104]
type    = A
physics = N
movetype = I
anim = 1303
ctrl = 0 + (0*(var(53):=1))
velset = 0,0
sprpriority = -2

[State 117, 1]
type = VelSet
trigger1 = time >= 1
x = -9
y = 0

[State 111, 1]
type = VelSet
trigger1 = time >= 20
x = 0
y = 0

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
volume = 255
volumescale = 255
channel = 7

[State 112, 4]
type = ChangeState
triggerall = !var(19)
trigger1 = time = 21
value = 1221
ctrl = 1

[State 112, 4]
type = ChangeState
triggerall = var(19)
trigger1 = time = 21
value = 1305
ctrl = 1


;--------------------------------------------------------
;Run Backward
[Statedef 105]
type = S
physics = N
ctrl = 0
anim = 105

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = nowalk
flag2 = noautoturn

[State 100, 1]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 100, 0]
type = PosSet
trigger1 = time = 0
y = 0

[State 105, 2]
type = PosSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0

[State 105, 2]
type = PosSet
trigger1 = command = "holddown"
y = 0

[State 105, 2]
type = VelSet
trigger1 = command = "holddown"
y = 0
x = -25

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem=2
statetype = A   

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup"
value = 40
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holddown"
value = 10
ctrl = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = command="holdup"||command="holdfwd"||command="holdback"||command="holddown"||command="x"||command="y"||command="z"||command="a"||command="b"||command="c"||command="start"
statetype = S    

[State 105, 2a]
type = VelSet
triggerall = time > 2
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
y = 0
x = -18

[State 105, 3]
type = ChangeState
triggerall = time > 2
trigger1 = command = "x"
value = 200

[State 105, 3a]
type = ChangeState
triggerall = time > 2
trigger1 = command = "y"
value = 210

[STate 105, 3b]
type = ChangeState
triggerall = time > 2
trigger1 = command = "z"
value = 220

[State 105, 3c]
type = ChangeState
triggerall = time > 2
trigger1 = command = "a"
value = 230

[State 105, 3d]
type = ChangeState
triggerall = time > 2
trigger1 = command = "b"
value = 240

[State 105, 3e]
type = ChangeState
triggerall = time > 2
trigger1 = command = "c"
value = 250

[state 192, 2]
type = playsnd
trigger1 = animelem = 1
value = 100,3

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5)>=0
x = .175
y = const(movement.yaccel)

[State 100,9]
type = changestate
triggerall = AnimElemTime(2)>=0
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
value = 101

;-------------------------
;Air Dash Fwd Up
[Statedef 106]
type    = A
physics = N
movetype = I
anim = 1302
ctrl = 0 + (0*(var(53):=1))
velset = 0,0
sprpriority = -2

[State 117, 1]
type = VelSet
trigger1 = time >= 1
x = 9
y = -6.5

[State 855, VarSet]
type = PosAdd
triggerall = var(19)
trigger1 = pos y < -170
y = 10


[State 111, 1]
type = VelSet
trigger1 = time >= 20
x = 0
y = 0

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
volume = 255
volumescale = 255
channel = 7

[State 112, 4]
type = ChangeState
triggerall = !var(19)
trigger1 = time = 21
value = 1221
ctrl = 1

[State 112, 4]
type = ChangeState
triggerall = var(19)
trigger1 = time = 21
value = 1305
ctrl = 1


;-------------------------
;Air Dash Back Up
[Statedef 107]
type    = A
physics = N
movetype = I
anim = 1303
ctrl = 0 + (0*(var(53):=1))
velset = 0,0
sprpriority = -2

[State 117, 1]
type = VelSet
trigger1 = time >= 1
x = -9
y = -6.5

[State 855, VarSet]
type = PosAdd
triggerall = var(19)
trigger1 = pos y < -170
y = 10


[State 111, 1]
type = VelSet
trigger1 = time >= 20
x = 0
y = 0

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
volume = 255
volumescale = 255
channel = 7

[State 112, 4]
type = ChangeState
triggerall = !var(19)
trigger1 = time = 21
value = 1221
ctrl = 1

[State 112, 4]
type = ChangeState
triggerall = var(19)
trigger1 = time = 21
value = 1305
ctrl = 1


;-------------------------
;Air Dash Fwd Down
[Statedef 108]
type    = A
physics = N
movetype = I
anim = 1302
ctrl = 0 + (0*(var(53):=1))
velset = 0,0
sprpriority = -2

[State 114, 1.1]
type = VelSet
trigger1 = Pos Y < -5
x = 9
y = 6.5

[State 114, 1.2]
type = VelSet
trigger1 = Pos Y >= -9
x = 9
y = 0

[State 111, 1]
type = VelSet
triggerall = Pos Y >= -255
trigger1 = time >= 20
x = 0
y = 0

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
volume = 255
volumescale = 255
channel = 7

[State 112, 4]
type = ChangeState
triggerall = !var(19)
trigger1 = time = 21
value = 1221
ctrl = 1

[State 112, 4]
type = ChangeState
triggerall = var(19)
trigger1 = time = 21
value = 1305
ctrl = 1


;-------------------------
;Air Dash Back Down
[Statedef 109]
type    = A
physics = N
movetype = I
anim = 1303
ctrl = 0 + (0*(var(53):=1))
velset = 0,0
sprpriority = -2

[State 114, 1.1]
type = VelSet
trigger1 = Pos Y < -5
x = -9
y = 6.5

[State 114, 1.2]
type = VelSet
trigger1 = Pos Y >= -9
x = -9
y = 0

[State 111, 1]
type = VelSet
triggerall = Pos Y >= -255
trigger1 = time >= 20
x = 0
y = 0

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
volume = 255
volumescale = 255
channel = 7

[State 112, 4]
type = ChangeState
triggerall = !var(19)
trigger1 = time = 21
value = 1221
ctrl = 1

[State 112, 4]
type = ChangeState
triggerall = var(19)
trigger1 = time = 21
value = 1305
ctrl = 1


;-------------------------
;Air Dash Down
[Statedef 110]
type    = A
physics = N
movetype = I
anim = 1301
ctrl = 0 + (0*(var(53):=1))
velset = 0,0
sprpriority = -2

[State 115, 1.1]
type = VelSet
trigger1 = Pos Y < -5
x = 0
y = 9

[State 115, 1.2]
type = VelSet
trigger1 = Pos Y >= -8
x = 0
y = 0

[State 111, 1]
type = VelSet
triggerall = Pos Y >= -255
trigger1 = time >= 20
x = 0
y = 0

[State 112, 3]
type = CtrlSet
trigger1 = time = 5
value = 1

[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
volume = 255
volumescale = 255
channel = 7

[State 112, 4]
type = ChangeState
triggerall = !var(19)
trigger1 = time = 21
value = 1221
ctrl = 1

[State 112, 4]
type = ChangeState
triggerall = var(19)
trigger1 = time = 21
value = 1305
ctrl = 1


;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 0, ChangeState]
type = ChangeState
trigger1 = 1
value = 181+(random%3)

[State 0, ChangeState]
type = ChangeState
trigger1 = wintime
value = 184

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0
sprpriority = -1

[State 0, Helper]
type = Helper
trigger1 = numhelper(180)=0
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "Doom Servants"
ID = 180
stateno = 189
postype = p1    ;p2,front,back,left,right
keyctrl = 0
ownpal = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 300
flag = roundnotover

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 2
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 180
flag = roundnotover

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,6
volume = 255
volumescale = 255
channel = 4

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;---------------------------------------------------------------------------
; Win pose 3
[Statedef 183]
type = S
ctrl = 0
velset = 0,0
anim = 181
sprpriority = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,6
volume = 255
volumescale = 255
channel = 4

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 300
flag = roundnotover

[State 0, Helper]
type = Helper
triggerall = anim = 181
trigger1 = time = 2
helpertype = normal ;player
name = "Doom Clone 1"
ID = 185
stateno = 185
pos = 30,-5
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = anim = 181
trigger1 = time = 5
helpertype = normal ;player
name = "Doom Clone 2"
ID = 186
stateno = 186
pos = 80,-15
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = anim = 181
trigger1 = time = 8
helpertype = normal ;player
name = "Doom Clone 3"
ID = 187
stateno = 187
pos = 120,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = anim = 181
trigger1 = time = 11
helpertype = normal ;player
name = "Doom Clone 1"
ID = 188
stateno = 188
pos = 150,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Doom Clone 1
[Statedef 185]
type = S
ctrl = 0
anim = 182
velset = 0,0
sprpriority = 3

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Doom Clone 2
[Statedef 186]
type = S
ctrl = 0
anim = 183
velset = 0,0
sprpriority = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Doom Clone 3
[Statedef 187]
type = S
ctrl = 0
anim = 185
velset = 0,0
sprpriority = 2

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Doom Clone 4
[Statedef 188]
type = S
ctrl = 0
anim = 184
velset = 0,0
sprpriority = 3

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Doom Servants
[Statedef 189]
type = S
ctrl = 0
anim = 189
velset = 0,0
sprpriority = 4

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose time over
[Statedef 184]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 180
flag = roundnotover

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Introduction
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeState
trigger1 = RoundState = 0
value = 191+(random%2)

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

;---------------------------------------------------------------------------
; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 22
value = 3,6
volume = 255
volumescale = 255
channel = 4

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction 2
[Statedef 192]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,6
volume = 255
volumescale = 255
channel = 4

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
juggle = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 3,6
volume = 255
volumescale = 255
channel = 0

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
[Statedef 200]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 1				;Number of air juggle points move takes
ctrl = 0				;Set ctrl (Def: no change)
anim = 200				;Change animation (Def: no change)
poweradd =20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,3
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 3,0
volume = 255
volumescale = 255
channel = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 200, 1]
type = hitdef
trigger1 = animelem = 2
attr = S, NA
animtype = Light
damage = 23,0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 11,11
guard.pausetime = 11,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-90
guard.pausetime = 8,8
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -8,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = 90,-90
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 40
ctrl = 0
anim = 210

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = 0,4
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = 3,1
volume = 255
volumescale = 255
channel = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 200, 1]
type = hitdef
trigger1 = animelem = 5
attr = S, NA
animtype = Medium
damage = 38,0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 11,11
guard.pausetime = 11,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-90
guard.pausetime = 8,8
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 15
air.hittime = 8
yaccel = .99
ground.velocity = -8.5,0
guard.velocity = -8.5
ground.cornerpush.veloff = -9
airguard.velocity = -10.5,3
air.velocity = -8,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 90)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 60
ctrl = 0
anim = 220

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 4,1
volume = 255
volumescale = 255
channel = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 3,2
volume = 255
volumescale = 255
channel = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[state 210, 2]
type = hitdef
trigger1 = time = 13
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-81
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 19
yaccel = 1.16
ground.velocity = -15.7,-15
guard.velocity = -12
ground.cornerpush.veloff = -19
air.velocity = -15.7,-15
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4
palfx.time = 31
palfx.add = 40,96,240
palfx.mul = 176,240,240
palfx.sinadd = 8,32,64,4
palfx.color = 8

[State 220, 8]
type = TargetState
triggerall = p2statetype = S
trigger1 = MoveHit && anim = 220
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 226

[State 220, 8]
type = TargetState
triggerall = p2statetype = C
trigger1 = MoveHit && anim = 220
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 227

[State 220, 8]
type = TargetState
triggerall = p2statetype = A
trigger1 = MoveHit && anim = 220
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 228

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 81)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------
; Hit by SSP
[Statedef 226]
type    = S
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5002

[State 225, 2]
type = ChangeState
trigger1 = Time = 10
value = 229

;---------------------------------------------------------
; Hit by SSP
[Statedef 227]
type    = C
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5022

[State 225, 2]
type = ChangeState
trigger1 = Time = 10
value = 229

;---------------------------------------------------------
; Hit by SSP
[Statedef 228]
type    = A
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5012

[State 225, 2]
type = ChangeState
trigger1 = Time = 10
value = 229

;---------------------------------------------------------
; Hit by SSP - Flying
[Statedef 229]
type    = A
movetype= H
physics = N

[State 226, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5063

[State 226, 2]
type = VelAdd
trigger1 = 1
y = 1.07

[State 226, 5]
type = SelfState
triggerall = alive = 1
trigger1 = Time = 29
value = 5040

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = !Alive || !Life
value = 5090

;---------------------------------------------------------------------------
; Standing Light Kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 20
ctrl = 0
;velset = 0,0
anim = 230

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,3
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 3,0
volume = 255
volumescale = 255
channel = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1


[State 240, hit]
type= hitdef
trigger1 = animelem = 3
attr = S, NA
animtype = Light
damage = 23,0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 11,11
guard.pausetime = 11,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-10
guard.pausetime = 8,8
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -8,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 10)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 40
ctrl = 0
anim = 240

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,4
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 3,1
volume = 255
volumescale = 255
channel = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 240, hit]
type= hitdef
trigger1 = animelem = 3
attr = S, NA
animtype = Medium
damage = 38,0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
guard.pausetime = 8,8
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 25
guard.hittime = 17
yaccel = .99
ground.velocity = -2,-18.6
guard.cornerpush.veloff = -10
down.velocity = -6,-7
ground.cornerpush.veloff = 0
air.velocity = -2,-18.6
guard.velocity = -9
airguard.velocity = -10.5,3
getpower= 7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
id = 1

[State 220, 8]
type = TargetState
triggerall = p2statetype = S
trigger1 = MoveHit && anim = 240
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 241

[State 220, 8]
type = TargetState
triggerall = p2statetype = C
trigger1 = MoveHit && anim = 240
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 242

[State 220, 8]
type = TargetState
triggerall = p2statetype = A
trigger1 = MoveHit && anim = 240
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 243

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 70)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State G-FX, Launcher Spark]
type = Explod
trigger1 = MoveHit
anim = 8020
pos = 60, -60
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
ownpal = 1
facing = 1

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 241]
type    = S
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5001

[State 225, 2]
type = ChangeState
trigger1 = Time = 7
value = 244

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 242]
type    = C
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5021

[State 225, 2]
type = ChangeState
trigger1 = Time = 7
value = 244

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 243]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5011

[State 225, 2]
type = ChangeState
trigger1 = Time = 7
value = 244

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 244]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5035

[State 5051, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = -3.7
y = -20.5

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= Const(movement.air.gethit.groundlevel)
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;Air get-hit (recovering in air, not falling)

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = !Alive || !Life
value = 5090
;---------------------------------------------------------------------------
; Standing Strong Kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd=60
ctrl = 0
;velset = 0,0
anim = 250

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 0,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 3,2
volume = 255
volumescale = 255
channel = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 225, hit]
type=hitdef
trigger1 = animelem = 5
attr = S, NA
animtype = Hard
damage = 36,0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-90
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 16
air.hittime = 8
yaccel = .99
ground.velocity = -12,0
guard.velocity = -12
ground.cornerpush.veloff = -14
airguard.velocity = -10.5,3
air.velocity = -8,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 90)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 251

;---------------------------------------------------------------------------
; Standing Strong Kick
[Statedef 251]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd=60
ctrl = 0
;velset = 0,0
anim = 251

[State 225, hit]
type=hitdef
trigger1 = animelem = 2
attr = S, NA
animtype = Hard
damage = 23,0
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-10
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 17
air.hittime = 8
yaccel = .99
ground.velocity = -12,0
guard.velocity = -12
ground.cornerpush.veloff = -19
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 10)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Crouching Light Punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 20
ctrl = 0
anim = 400

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,3
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 3,0
volume = 255
volumescale = 255
channel = 0

[State 230, hit]
type=hitdef
trigger1 = animelem = 2
attr = C, NA
animtype = Light
damage = 23,0
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
guard.pausetime = 8,8
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
down.velocity = -6,-7
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -8,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 3
poweradd= 40
ctrl = 0
anim = 410

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,4
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 3,1
volume = 255
volumescale = 255
channel = 0

[State 235, hit]
type=hitdef
trigger1 = animelem = 2
attr = C, NA
animtype = Medium
damage = 37,0
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 11,11
guard.pausetime = 11,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 15
air.hittime = 8
down.velocity = -6,-7
yaccel = .99
ground.velocity = -8.5,0
guard.velocity = -8.5
ground.cornerpush.veloff = -11
airguard.velocity = -10.5,3
air.velocity = -8,0
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 2+4

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 410, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 60
ctrl = 0
anim = 420

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = 4,1
volume = 255
volumescale = 255
channel = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = 3,2
volume = 255
volumescale = 255
channel = 0

[State 240, hit]
type=hitdef
trigger1=time=0
attr = C, NA
animtype = Hard
damage = 65,0
hitflag = MAFD
guardflag = MA
priority = 4, Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 16
ground.hittime = 19
air.hittime = 25
guard.hittime = 17
yaccel = .99
ground.velocity = 0,-18.6
guard.cornerpush.veloff = -18
down.velocity = -6,-11
ground.cornerpush.veloff = 0
air.velocity = 0,-18.6
guard.velocity = -12
airguard.velocity = -10.5,3
getpower= 7*ifelse(8*fvar(6)>=1,floor(8*fvar(6)),1),56
givepower= 56
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
fall.recover = 0
palfx.time = 31
palfx.add = 40,96,240
palfx.mul = 176,240,240
palfx.sinadd = 8,32,64,4
palfx.color = 8
id = 1

[State 220, 8]
type = TargetState
triggerall = p2statetype = S
trigger1 = MoveHit && anim = 420
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 421

[State 220, 8]
type = TargetState
triggerall = p2statetype = C
trigger1 = MoveHit && anim = 420
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 422

[State 220, 8]
type = TargetState
triggerall = p2statetype = A
trigger1 = MoveHit && anim = 420
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 423

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State G-FX, Launcher Spark]
type = Explod
trigger1 = MoveHit
anim = 8020
pos = 60, -20
ontop = 1
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5
ownpal = 1
facing = 1

[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 421]
type    = S
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5012

[State 225, 2]
type = ChangeState
trigger1 = Time = 12
value = 424

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 422]
type    = C
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5022

[State 225, 2]
type = ChangeState
trigger1 = Time = 12
value = 424

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 423]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5012

[State 225, 2]
type = ChangeState
trigger1 = Time = 12
value = 424

;---------------------------------------------------------------------------
; Opponent Launched
[Statedef 424]
type    = A
movetype= H
physics = N
velset = 0, 0
ctrl = 0

[State 5051, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5035

[State 5051, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 0
y = -20.5

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= Const(movement.air.gethit.groundlevel)
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;Air get-hit (recovering in air, not falling)

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = !Alive || !Life
value = 5090

;---------------------------------------------------------------------------
; Crouching Light Kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 20
ctrl = 0
anim = 430

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,3
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 3,0
volume = 255
volumescale = 255
channel = 0

[State 230, hit]
type=hitdef
trigger1 = animelem = 2
attr = C, NA
animtype = Light
damage = 23,0
hitflag = MAFD
guardflag = LA
priority = 4, Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
guard.pausetime = 8,8
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .99
down.velocity = -6,-11
ground.velocity = -5.5,0
guard.velocity = -5.5
ground.cornerpush.veloff = -6.5
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0 

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 3
poweradd= 40
ctrl = 0
anim = 440

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 0,4
volume = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 3,1
volume = 255
volumescale = 255
channel = 0

[State 235, hit]
type=hitdef
trigger1 = animelem = 3
attr = C, NA
animtype = Medium
damage = 37,0
hitflag = MAFD
guardflag = LA
priority = 4, Hit
pausetime = 11,11
guard.pausetime = 11,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = Low
ground.slidetime = 8
ground.hittime = 15
air.hittime = 8
yaccel = .99
ground.velocity = -8.5,0
down.velocity = -6,-11
guard.velocity = -8.5
ground.cornerpush.veloff = -11
airguard.velocity = -10.5,3
air.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
getpower = 20,0
givepower = 20,0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 440, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 60
ctrl = 0
anim = 450

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 0,5
channel = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 3,2
volume = 255
volumescale = 255
channel = 0

[State 240, hit]
type=hitdef
trigger1=animelem = 4
attr = C, NA
animtype = hard
ground.type = trip
damage = 65,0
hitflag = MAFD
guardflag = LA
priority = 4, Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-15
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 20
air.hittime = 12
guard.hittime = 17
yaccel = .65
ground.velocity = 0,-4
guard.velocity = -12
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -13.5
air.velocity = 0,-4
airguard.velocity = -10.5,3
down.velocity = -6,-11
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 10
id = 4
getpower= 35
givepower= 35

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0 

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
anim = 600

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,3
volume = 50

[state 410,3]
type = veladd
triggerall = !var(19)
trigger1 = floor (pos Y < -155)
y = -0.09

[state 410,3]
type = veladd
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = velset
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = veladd
trigger1 = var(53)
x = 0

[state 410,3]
type = velset
trigger1 = var(53)
x = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,0
volume = 255
volumescale = 255
channel = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 5 && var(19)
value = 1305

[State 600, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage    = 23,0
hitflag = MAFD
getpower= 21
givepower= 21
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-11
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-8.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 600
triggerall = floor (pos Y < -155)
trigger1 = animelem = 5
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 40
ctrl = 0
anim = 610

[state 410,3]
type = veladd
triggerall = !var(19)
trigger1 = floor (pos Y < -155)
y = -0.19

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(36) = 1

[state 410,3]
type = veladd
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = velset
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = veladd
trigger1 = var(53)
x = 0

[state 410,3]
type = velset
trigger1 = var(53)
x = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 17 && var(19)
value = 1305

[State 600]
type = PlaySnd
trigger1 = Time = 3
value = 4,1
volume = 255
volumescale = 255
channel = 1

[State 200]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,1
volume = 255
volumescale = 255
channel = 0

[State 600, HitDef]
type = HitDef
trigger1 = time = 0
attr = A, NA
animtype = Medium
air.animtype = up
damage    = 37,0
hitflag = MAFD
getpower= 21
givepower= 21
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-11
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-8.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
palfx.time = 31
palfx.add = 40,96,240
palfx.mul = 176,240,240
palfx.sinadd = 8,32,64,4
palfx.color = 8
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 610
triggerall = floor (pos Y < -155)
trigger1 = animelem = 17
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = A
poweradd= 60
ctrl = 0
anim = 620

[state 410,3]
type = veladd
triggerall = !var(19)
trigger1 = floor (pos Y < -155)
y = -0.29

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 4,0
volume = 255
volumescale = 255
channel = 9

[state 410,3]
type = veladd
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = velset
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = veladd
trigger1 = var(53)
x = 0

[state 410,3]
type = velset
trigger1 = var(53)
x = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 24 && var(19)
value = 1305

[State 0, Helper]
type = Helper
triggerall = numhelper(621)=0
trigger1 = AnimElem = 5
helpertype = normal ;player
name = "Beam"
ID = 621
stateno = 621
pos = 125,-95
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(36)
trigger1 = var(12) > 1 && var(17) > 0
var(36) = 1

[State 285, hit]
type=hitdef
triggerall = floor (pos Y > -155)
trigger1=AnimElem=8||AnimElem=10||AnimElem=12||AnimElem=14||AnimElem=16
attr = A, NA
animtype = Back
air.animtype = back
damage =  32,0
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  35
givepower= 35
pausetime = 0,9
guard.pausetime = 0,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -12.1,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 285, hit]
type=hitdef
triggerall = floor (pos Y < -155)
trigger1=AnimElem=8||AnimElem=10||AnimElem=12||AnimElem=14||AnimElem=16
attr = A, NA
animtype = Back
air.animtype = back
damage =  32,0
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  35
givepower= 35
pausetime = 0,9
guard.pausetime = 0,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .83
down.velocity = -6,-7
guard.velocity = -12
ground.velocity = -12,0
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -12.1,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
id = 4+64

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+var(49),6
channel = 5

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+var(49),0
channel = 5

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 33001, RHC]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 620
triggerall = floor (pos Y < -155)
trigger1 = animelem = 24
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Jump Strong Punch beam helper
	[Statedef 621]
type = A
movetype = A
physics = N
ctrl = 0
anim = 621
sprpriority = 3
velset = 0,0
juggle = 0

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 0, BindToParent]
type = BindToParent
trigger1 = parent,stateno=620&&parent,animelemtime(21)<0
pos = 88,-81
ignorehitpause =1

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = parent,stateno!=620&&AnimElemTime(17)<0
value = 621
elem = 17
ignorehitpause = 1
persistent = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = movecontact
trigger2 = frontedgedist <= -70

[State 901:destroyself]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = A
poweradd= 20
ctrl = 0
anim = 630

[state 410,3]
type = veladd
triggerall = !var(19)
trigger1 = floor (pos Y < -155)
y = -0.09

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,3
volume = 50

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(36) = 1

[state 410,3]
type = veladd
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = velset
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = veladd
trigger1 = var(53)
x = 0

[state 410,3]
type = velset
trigger1 = var(53)
x = 0

[State 200]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,0
volume = 255
volumescale = 255
channel = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 5 && var(19)
value = 1305

[State 600, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage    = 23,0
hitflag = MAFD
getpower= 21
givepower= 21
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5+var(49),0
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-11
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -0.5,-8.4
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 630
triggerall = floor (pos Y < -155)
trigger1 = animelem = 5
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Jump Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = A
poweradd= 40
ctrl = 0
anim = 640

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,700)
trigger1 = target,statetype = A
var(36) = 1

[state 410,3]
type = veladd
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = velset
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = veladd
trigger1 = var(53)
x = 0

[state 410,3]
type = velset
trigger1 = var(53)
x = 0

[state 410,3]
type = veladd
triggerall = !var(19)
trigger1 = floor (pos Y < -155)
y = -0.19

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 6 && var(19)
value = 1305

[State 600]
type = PlaySnd
trigger1 = Time = 1
value = 0,3
volume = 50

[State 200]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,1
volume = 255
volumescale = 255
channel = 0

[State 600, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Medium
air.animtype = up
damage    = 37,0
hitflag = MAFD
getpower= 21
givepower= 21
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-35
hitsound = S5+var(49),1
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = 1.19
ground.velocity = -6.5,0
guard.velocity = -6.5
down.velocity = -6,-11
ground.cornerpush.veloff = -8
air.cornerpush.veloff = 0
air.velocity = -6,-5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 640
triggerall = floor (pos Y < -155)
trigger1 = animelem = 6
value = 1211
ctrl = 1

;---------------------------------------------------------------------------
; Jump Strong Kick
[Statedef 650]
type    = A
movetype= A
physics = N
poweradd= 60
ctrl = 0
anim = 650
VelSet = 0,0

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(36)
trigger1 = var(12) > 1 && var(17) > 0
var(36) = 1

[State 200]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,2
volume = 255
volumescale = 255
channel = 0

[State 0, VarSet]
type = VarSet
trigger1 =!time
var(19)=0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 7
y = 5

[State 285, hit]
type=hitdef
trigger1=time = 0
attr = A, NA
animtype = Back
air.animtype = back
damage =  60,0
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  35
givepower= 35
pausetime = 7,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .89
down.velocity = -6,-11
guard.velocity = -12
ground.velocity = -12,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -15,-5.9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
fall = 1
air.fall = 1
fall.recover = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelemtime(2)>=0
trigger1 = movecontact
value = 651

[State 0, ChangeState]
type = ChangeState
triggerall = animelemtime(2)>=0
trigger1 = Pos Y >= 20
trigger1 = Vel Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Strong Kick
[Statedef 651]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
anim = 651
VelSet = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = -3
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 5
y = 0.33


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(10)=0
statetype = A
movetype = I
physics = A

;---------------------------------------------------------------------------
; Jump Strong Kick (Downward)
[Statedef 655]
type    = A
movetype= A
physics = N
poweradd= 60
ctrl = 0
anim = 655
VelSet = 0,0

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(36)
trigger1 = var(12) > 1 && var(17) > 0
var(36) = 1

[State 200]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,2
volume = 255
volumescale = 255
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = 7

[State 0, VarSet]
type = VarSet
trigger1 =!time
var(19)=0

[State 285, hit]
type=hitdef
trigger1=time = 0
attr = A, NA
animtype = Back
air.animtype = back
damage =  60,0
hitflag = MAFD
guardflag = HA
priority = 6, Hit
getpower=  35
givepower= 35
pausetime = 7,8
guard.pausetime = 7,8
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5+var(49),2
guardsound = S6+var(49),0
ground.type = High
ground.slidetime = 12
ground.hittime = 20
air.hittime = 6
yaccel = .89
down.velocity = -6,-11
guard.velocity = -12
ground.velocity = -1,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.velocity = -12.1,9
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -3
fall = 1
air.fall = 1
fall.recover = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10),  -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelemtime(2)>=0
trigger1 = movecontact
value = 656

[State 0, ChangeState]
type = ChangeState
triggerall = animelemtime(2)>=0
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Strong Kick
[Statedef 656]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
anim = 656
VelSet = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -3
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 2
y = 0.33


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(7)=0
statetype = A
movetype = I
physics = A

; Oo 
[Statedef 701]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(34) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100


;---------------------------------------------------------------------------
;Tech Hitted
[Statedef 345]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = -2,0			;Set velocity (x,y) (Def: no change)
ctrl = 0
anim = 345				;Set ctrl (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 2	;Set layering priority to 2 (in front)

[State 0, EnvShake]
type = EnvShake
;trigger1 = enemynear,life >0
trigger1 = time = 0
time = 15
freq = 60
ampl = -4

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5000,3
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
volume = 0
channel = -1

[State 3805, end]
type=selfstate
trigger1 = animtime =0
value=0
ctrl=1

;---------------------------------------------------------------------------
;Tech Hitted
[Statedef 346]
type    = A				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = A				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = -2,-8			;Set velocity (x,y) (Def: no change)
ctrl = 0
anim = 346				;Set ctrl (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 2	;Set layering priority to 2 (in front)

[State 0, EnvShake]
type = EnvShake
;trigger1 = enemynear,life >0
trigger1 = time = 0
time = 15
freq = 60
ampl = -4

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5000,3
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
volume = 0
channel = -1

[State 3805, end]
type=selfstate
trigger1 = animtime =0
value=50
ctrl=1

;---------------------------------------------------------------------------
;Tech Hitted Low
[Statedef 347]
type    = C				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = C				;Physics: S-stand, C-crouch, A-air
juggle  = 0				;Number of air juggle points move takes
velset = -2,0			;Set velocity (x,y) (Def: no change)
ctrl = 0
anim = 347				;Set ctrl (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 2	;Set layering priority to 2 (in front)

[State 0, EnvShake]
type = EnvShake
;trigger1 = enemynear,life >0
trigger1 = time = 0
time = 15
freq = 60
ampl = -4

[State 0, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5000,3
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,3
volume = 0
channel = -1

[State 3805, end]
type=selfstate
trigger1 = animtime =0
value=11
ctrl=1
;---------------------------------------------------------------------------
; Throw Forward Punch - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
p2facing = 1
facep2 = 1
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = -1
sparkxy = -13, -72
hitsound = s5,4
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = ifelse (command = "holdback", 805, 801)
p2stateno = ifelse (command = "holdback", 815, 810)
numhits = 0
guard.dist = 0
fall = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------
[Statedef 801]
type = S
movetype = A
physics = S
anim = 801
velset = 0,0
sprpriority = 2

[State 920, 0]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 0, Width]
type = Width
trigger1 = time < 25
value = 90,0

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
pos = 90,-100

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0&&AnimElemTime(5)<0
pos = 75,-130

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem=5
pos = 80,-125

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,9
volume = 255
volumescale = 255
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 4,6
volume = 255
volumescale = 255
channel = -1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 809
ID = 800
pos = 90,-156
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = 1,1
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 225, hit]
type=hitdef
trigger1=!time
attr=S,NT
damage=90,0
animtype=Hard
guardflag=MA
hitflag=MAF+
priority=4,Hit
pausetime=2,2
sparkno=-1
guard.sparkno=-1;s8100
sparkxy=-10,-138
hitsound=-1
guardsound=-1
ground.type=High
ground.slidetime=16
ground.hittime=20
ground.velocity=-8,-20
air.type=Low
air.hittime=24
air.velocity=-8,-20
air.cornerpush.veloff=0
yaccel=.89
persistent=0
fall = 1
fall.recover = 0
p2stateno = 885
envshake.time = 9
envshake.ampl = 3
getpower=0

[State 920, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------
[Statedef 805]
type = S
movetype = A
physics = S
anim = 801
velset = 0,0
sprpriority = 2

[State 920, 0]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 0, Width]
type = Width
trigger1 = time < 25
value = 90,0

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
pos = 90,-100

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0&&AnimElemTime(5)<0
pos = 75,-130

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem=5
pos = 80,-125

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,9
volume = 255
volumescale = 255
channel = 4


[State 0, Turn]
type = Turn
trigger1 = !time

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 4,6
volume = 255
volumescale = 255
channel = -1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 809
ID = 800
pos = 90,-156
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = 1,1
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 225, hit]
type=hitdef
trigger1=!time
attr=S,NT
damage=90,0
animtype=Hard
guardflag=MA
hitflag=MAF+
priority=4,Hit
pausetime=2,2
sparkno=-1
guard.sparkno=-1;s8100
sparkxy=-10,-138
hitsound=-1
guardsound=-1
ground.type=High
ground.slidetime=16
ground.hittime=20
ground.velocity=-8,-20
air.type=Low
air.hittime=24
air.velocity=-8,-20
air.cornerpush.veloff=0
yaccel=.89
persistent=0
fall = 1
fall.recover = 0
p2stateno = 885
envshake.time = 9
envshake.ampl = 3
getpower=0

[State 920, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;-------------------------------------------
[Statedef 810]
type = A
movetype = H
physics = N
sprpriority = 3

;[State 3400, Tech Hit!]
;type = SelfState
;trigger1 = alive
;trigger1 = time = [1,9]
;trigger1 = CanRecover
;trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
;value = 5210

[State 925, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,AA,AP,SA,HA,ST,HT
time = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 925, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 810

[State 0, SelfState]
type = SelfState
trigger1 = Time >= 30
value = 5040
ctrl = 1
;-------------------------------------------
[Statedef 815]
type = A
movetype = H
physics = N
sprpriority = 3

[State 0, Turn]
type = Turn
trigger1 = !time

;[State 3400, Tech Hit!]
;type = SelfState
;trigger1 = alive
;trigger1 = time = [1,9]
;trigger1 = CanRecover
;trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
;value = 5210

[State 925, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,AA,AP,SA,HA,ST,HT
time = 1

[State 925, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 810

[State 0, SelfState]
type = SelfState
trigger1 = time >= 40
value = 5040
ctrl = 1

;---------------------------------------------------------------------------
; Air Throw Forward - Attempt
[Statedef 820]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 820
p2facing = 1
facep2 = 1
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, NT
hitflag = AF
priority = 1, Miss
sparkno = -1
sparkxy = -13, -72
hitsound = s5,4
sprpriority = 1
p1facing = ifelse (frontedgebodydist <= 50||command="holdback", -1, 1)
p2facing = 1
p1stateno = 821
p2stateno = 830
numhits = 0
guard.dist = 0
fall = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 6
value = 1

;-------------------------------
[Statedef 821]
type = A
movetype = A
physics = N
anim = 821
velset = 0,0
sprpriority = 2

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 920, 0]
type = NotHitBy
trigger1 = time < 14
value = SCA
time = 1

[State 0, Width]
type = Width
trigger1 = time < 14
value = 75,0

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
pos = 75,-112

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0&&AnimElemTime(5)<0
pos = 60,-142

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem=5
pos = 65,-137

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 809
ID = 800
pos = 60,-155
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = 1,1
sprpriority = 3
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,9
volume = 255
volumescale = 255
channel = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 4,6
volume = 255
volumescale = 255
channel = -1

[State 225, hit]
type=hitdef
trigger1=!time
attr=S,NT
damage=90,0
animtype=Hard
guardflag=MA
hitflag=MAF+
priority=4,Hit
pausetime=2,2
sparkno=-1
guard.sparkno=-1;s8100
sparkxy=-10,-138
hitsound=-1
guardsound=-1
ground.type=High
ground.slidetime=16
ground.hittime=20
ground.velocity=-8,-20
air.type=Low
air.hittime=24
air.velocity=-8,-20
air.cornerpush.veloff=0
yaccel=.89
persistent=0
fall = 1
fall.recover = 0
p2stateno = 885
envshake.time = 9
envshake.ampl = 3
getpower=0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 12
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 12
value = 1

;-------------------------------------------
[Statedef 830]
type = A
movetype = H
physics = N
sprpriority = 3

;[State 3400, Tech Hit!]
;type = SelfState
;trigger1 = alive
;trigger1 = time = [1,9]
;trigger1 = CanRecover
;trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
;value = 5210

[State 925, 1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 1,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,AA,AP,SA,HA,ST,HT
time = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 925, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 830

[State 0, SelfState]
type = SelfState
trigger1 = Time >= 30
value = 5040
ctrl = 1

;---------------------------------------------------------------------------
; Throw Forward Kick- Attempt
[Statedef 840]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
p2facing = 1
facep2 = 1
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = -1
sparkxy = -13, -72
hitsound = s5,4
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = ifelse (command = "holdback", 845, 841)
p2stateno = ifelse (command = "holdback", 855, 850)
numhits = 0
guard.dist = 0
fall = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------
[Statedef 841]
type = S
movetype = A
physics = S
anim = 841
velset = 0,0
sprpriority = 2

[State 920, 0]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,9
volume = 255
volumescale = 255
channel = 4

[State 4001, bind]
type=targetbind
trigger1=animelemtime(1)>=0 && animelemtime(2) <0
pos=93,-110

[State 4001, bind]
type=targetbind
trigger1=animelemtime(2)>=0 && animelemtime(5) <0
pos=81,-130

[State 4001, bind]
type=targetbind
trigger1=animelemtime(5)>=0 && animelemtime(6) <0
pos=-3,-104

[State 4001, bind]
type=targetbind
trigger1=animelem=6
pos=-19,-24

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemtime(6) =6
value = -120

[State 810, Throw]
type = TargetState
trigger1 = AnimElemtime(6) =16
value = 851

[State 0, SprPriority]
type = SprPriority
triggerall = statetype!=A
trigger1 = animelem=5
value = -3

[State 0, SprPriority]
type = SprPriority
triggerall = statetype!=A
trigger1 = animelem=3
value = -3
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[state 832, 8]
type = envshake
triggerall = statetype!=A
trigger1 = animelem = 6
time = 15
freq = 70
ampl = -4

[State 0, Explod]
type = Explod
triggerall = statetype!=A
trigger1 = animelem = 6
anim = 8010
scale = 0.81,0.81
pos = 0, 0
ownpal = 1
sprpriority = 5

[State 5100, 10]
type = PlaySnd
triggerall = statetype!=A
trigger1 = animelem = 6
value = 0,7

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(pos y<0,57,0)
ctrl = 1

;-------------------------------
[Statedef 845]
type = S
movetype = A
physics = S
anim = 841
velset = 0,0
sprpriority = 2

[State 920, 0]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 0, Turn]
type = Turn
trigger1 = !time

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,9
volume = 255
volumescale = 255
channel = 4

[State 4001, bind]
type=targetbind
trigger1=animelemtime(1)>=0 && animelemtime(2) <0
pos=93,-110

[State 4001, bind]
type=targetbind
trigger1=animelemtime(2)>=0 && animelemtime(5) <0
pos=81,-130

[State 4001, bind]
type=targetbind
trigger1=animelemtime(5)>=0 && animelemtime(6) <0
pos=-3,-104

[State 4001, bind]
type=targetbind
trigger1=animelem=6
pos=-19,-24

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemtime(6) =6
value = -120

[State 810, Throw]
type = TargetState
trigger1 = AnimElemtime(6) =16
value = 851

[State 0, SprPriority]
type = SprPriority
triggerall = statetype!=A
trigger1 = animelem=5
value = -3

[State 0, SprPriority]
type = SprPriority
triggerall = statetype!=A
trigger1 = animelem=3
value = -3
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[state 832, 8]
type = envshake
triggerall = statetype!=A
trigger1 = animelem = 6
time = 15
freq = 70
ampl = -4

[State 0, Explod]
type = Explod
triggerall = statetype!=A
trigger1 = animelem = 6
anim = 8010
scale = 0.81,0.81
pos = 0, 0
ownpal = 1
sprpriority = 5

[State 5100, 10]
type = PlaySnd
triggerall = statetype!=A
trigger1 = animelem = 6
value = 0,7

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(pos y<0,57,0)
ctrl = 1

;----------------------------------------------------------------------
[Statedef 850]
type = A
movetype = H
physics = N
velset = 0,0

[State 3545, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 851

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 210, 3]
type = sprpriority
trigger1 = time = 0
value = -1

;----------------------------------------------------------------------
[Statedef 870]
type = A
movetype = H
physics = N
velset = 0,0

[State 3545, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 871

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 210, 3]
type = sprpriority
trigger1 = time = 0
value = -1

;----------------------------------------------------------------------
[Statedef 855]
type = A
movetype = H
physics = N
velset = 0,0

[State 3545, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 851

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 210, 3]
type = sprpriority
trigger1 = time = 0
value = -1

[State 0, Turn]
type = Turn
trigger1 = !time
;----------------------------------------------------------------------
[Statedef 851]
type = A
movetype = H
physics = N
velset = 0,-18
poweradd = 40

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Turn]
type = Turn
trigger1 = !time

[State 3545, 1]
type = ChangeAnim
trigger1 = selfanimexist(5035) && time = 0
value = 5035

[State 0, HitBy]
type = HitBy
trigger1 =  1
value = SCA,HP
time = 1

[State 3545, 1]
type = ChangeAnim
triggerall = Alive
trigger1 = time = 18
value = 5040

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = pos y >=0 && time >=25
value = 52

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .74

;----------------------------------------------------------------------
[Statedef 863]
type = A
movetype = H
physics = N
velset = 0,12
poweradd = 40

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .83

[State 0, ScreenBound]
type = ScreenBound
trigger1 =  1
value = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4

[State 0, Turn]
type = Turn
trigger1 =time=0

[State 821, 4] ;Hit ground
type = SelfState
triggerall = time>5
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5110

;---------------------------------------------------------------------------
; Air Throw Forward Kick- Attempt
[Statedef 860]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 820
p2facing = 1
facep2 = 1
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, NT
hitflag = AF
priority = 1, Miss
sparkno = -1
sparkxy = -13, -72
hitsound = s5,4
sprpriority = 1
p1facing = ifelse (frontedgebodydist <= 50||command="holdback", -1, 1)
p2facing = 1
p1stateno = 861
p2stateno = 870
numhits = 0
guard.dist = 0
fall = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 6
value = 1

;-------------------------------
[Statedef 861]
type = S
movetype = A
physics = S
anim = 861
velset = 0,0
sprpriority = 2

[State 920, 0]
type = NotHitBy
trigger1 = time >= 0
value = SCA
time = 1

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-75*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,9
volume = 255
volumescale = 255
channel = 4

[State 4001, bind]
type=targetbind
trigger1=animelemtime(1)>=0 && animelemtime(2) <0
pos=96,-114

[State 4001, bind]
type=targetbind
trigger1=animelemtime(2)>=0 && animelemtime(3) <0
pos=85,-130

[State 4001, bind]
type=targetbind
trigger1=animelemtime(3)>=0 && animelemtime(4) <0
pos=-15,-147

[State 4001, bind]
type=targetbind
trigger1=animelem=4
pos=-19,-6

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem=4
value = -120

[State 810, Throw]
type = TargetState
trigger1 = AnimElem =4
value = 863

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 6
value = 1

;Fall
[Statedef 885]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, PosAdd]
type = PosAdd
trigger1 = !time
y = -const(size.head.pos.y)

[State 886, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 886, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 886, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 886, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 886, 5]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = A

[State 886, 6]
type = SelfState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001 ;HITG_SLIDE

[State 886, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 886

[State 886, Force Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 886, Force Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 886, Force Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

; Initial Going Up
[Statedef 886]
type    = A
movetype= H
physics = N
ctrl = 0

[State 886, 1]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 886, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 886, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 888 ;HITA_FALL

[State 886, GameMakeAnim]
type = GameMakeAnim
triggerall = vel x != 0
trigger1 = backedgebodydist <= 5
persistent = 0
ignorehitpause = 1
value = 72
pos = -20,-65
postype = p1
bindtime = -1

[State 886, Explod]
type = Explod
triggerall = vel x != 0
trigger1 = frontedgebodydist <= 5
persistent = 0
ignorehitpause = 1
anim = f72
pos = 20,-65
sprpriority = 2
facing = -1
bindtime = 1
ownpal = 1

[State 886, 10]
type = PlaySnd
triggerall = vel x != 0
trigger1 = backedgebodydist <= 5
trigger2 = frontedgebodydist <= 5
trigger1 = vel x != 0
persistent = 0
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 886, 10]
type = velset
triggerall = vel x != 0
trigger1 = backedgebodydist <= 5
trigger2 = frontedgebodydist <= 5
persistent = 0
x = 0

[State 886, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 887

;---------------------------------------------------------------------------
; Transition
[Statedef 887]
type    = A
movetype= H
physics = N

[State 272, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059]
trigger1 = Anim != 5090
value = 5035

[State 887, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 887, GameMakeAnim]
type = GameMakeAnim
triggerall = vel x != 0
trigger1 = backedgebodydist <= 5
persistent = 0
ignorehitpause = 1
value = 72
pos = -20,-65
postype = p1
bindtime = -1

[State 887, Explod]
type = Explod
triggerall = vel x != 0
trigger1 = frontedgebodydist <= 5
persistent = 0
ignorehitpause = 1
anim = f72
pos = 20,-65
sprpriority = 2
facing = -1
bindtime = 1
ownpal = 1

[State 887, 10]
type = PlaySnd
triggerall = vel x != 0
trigger1 = backedgebodydist <= 5
trigger2 = frontedgebodydist <= 5
persistent = 0
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 887, 10]
type = velset
triggerall = vel x != 0
trigger1 = backedgebodydist <= 5
trigger2 = frontedgebodydist <= 5
persistent = 0
x = 0

[State 887, ChangeState]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 888
; falling
[Statedef 888]
type    = A
movetype= H
physics = N

[State 888, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 888, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 888, 3]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 888, GameMakeAnim]
type = GameMakeAnim
triggerall = vel x != 0
trigger1 = backedgebodydist <= 5
persistent = 0
ignorehitpause = 1
value = 72
pos = -20,-65
postype = p1
bindtime = -1

[state 832, 8]
type = envshake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 15
freq = 70
ampl = -4

[State 888, 10]
type = velset
triggerall = vel x != 0
trigger1 = backedgebodydist <= 5
trigger2 = frontedgebodydist <= 5
persistent = 0
x = 0

[State 888, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5110

;---------<PARRY>----------
;---STANDING---
[Statedef 790]
type=S
physics=S
movetype=I
anim=165
velset=0,0
ctrl=0
sprpriority=2
poweradd=100

[State 700, hb]
type=hitby
trigger1=1
value=SCA,AT
time=1

[State 700, stop]
type=posfreeze
trigger1=1
value=1

[State 700, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 700, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 700, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 700, snd]
type=playsnd
trigger1= !time
value=2,3

[State 700, spark]
type=explod
trigger1= animelem=1
anim=8065
ID=8065
sprpriority=5
postype=p1
pos=45,-63
pausemovetime=60
ownpal=1
scale=.5,.5

[State 700, nowalk]
type=assertspecial
trigger1=1
flag=nowalk

[State 700, end]
type=changestate
trigger1= !animtime
value=0
ctrl=1


;---CROUCHING---
[Statedef 791]
type=C
physics=C
movetype=I
anim=166
velset=0,0
ctrl=0
sprpriority=2
poweradd=100

[State 701, hb]
type=hitby
trigger1=1
value=SCA,AT
time=1

[State 701, stop]
type=posfreeze
trigger1=1
value=1

[State 701, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 701, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 701, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 700, snd]
type=playsnd
trigger1= !time
value=2,3

[State 700, spark]
type=explod
trigger1= animelem=1
anim=8065
ID=8065
sprpriority=5
postype=p1
pos=25,-22
pausemovetime=60
ownpal=1
scale=.5,.5

[State 701, nowalk]
type=assertspecial
trigger1=1
flag=nowalk

[State 701, end]
type=changestate
trigger1= !animtime
value=11
ctrl=1


;---AERIAL---
[Statedef 792]
type=A
physics=A
movetype=I
anim=167
ctrl=0
sprpriority=2
poweradd=100

[State 702, hb]
type=hitby
trigger1=time<15
value=SCA,AT
time=1

[State 702, pause]
type=pause
trigger1=!time
time=15
movetime=15
endcmdbuftime=15
pausebg=0

[State 702, pause]
type=pause
trigger1= !time && numenemy
trigger1= (enemynear,movehit=1)
time= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
movetime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
endcmdbuftime= ifelse((enemynear,hitpausetime=[0,15]), 15-(enemynear,hitpausetime), 0)
pausebg=0

[State 702, sts]
type=statetypeset
trigger1= time<15
physics=N

[State 702, stop]
type=posfreeze
trigger1= time<15
value=1

[State 702, vel]
type=velset
trigger1= time=15
x=ifelse(vel x>2,2,ifelse(vel x<-2,-2,vel x))
y=ifelse(vel y<-2,vel y,-2)

[State 702, sts]
type=statetypeset
trigger1= time>=15
physics=A

[State 702, ctrl]
type=ctrlset
trigger1= time>=15
value=1

[State 702, blueflash]
type=palfx
trigger1= !time
add=0,64,255
sinadd=0,-64,-255,60
time=15

[State 700, snd]
type=playsnd
trigger1= !time
value=2,3

[State 700, spark]
type=explod
trigger1= animelem=1
anim=8065
ID=8065
sprpriority=5
postype=p1
pos=45,-80
pausemovetime=60
ownpal=1
scale=.5,.5

[State 702, asserts]
type=assertspecial
trigger1= 1
flag=noairguard

[State 702, ctrl]
type=ctrlset
trigger1= time>10
value=1

;==========<ZERO COUNTER>==========
[Statedef 750]
type=S
physics=S
movetype=I
anim=750
ctrl=0
velset=0,0
poweradd=-500
sprpriority=2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 750, strengthvar]
type=varset
trigger1=!time&&var(59)<=0
var(10)=ifelse((command="bdx"||command="bdy"||command="bdz"),1,2)
ignorehitpause=1

[State 750, strengthvar (AI)]
type=varset
trigger1=!time&&var(59)=1
var(10)=1
ignorehitpause=1

[State 750, snd]
type=playsnd
trigger1=time = 0
value=2,3
channel=0

[State 750, superpause]
type=superpause
trigger1=!time
time=20
movetime=20
anim=-1
sound=s4,20
p2defmul=1
darken=0

[State 3000, carga]
type=helper
trigger1=time = 0
helpertype=normal
stateno=9750
ID=9750
name="fx"
postype=p1
pos = 50,-55
ownpal=1
persistent=0
supermovetime=9999

[State 750, end]
type=changestate
trigger1=time>=20
value=ifelse(var(10)=1,420,450)

;==========<ZERO COUNTER>==========
[Statedef 751]
type=A
physics=N
movetype=I
anim=751
ctrl=0
velset=0,0
poweradd=-500
sprpriority=2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 750, strengthvar]
type=varset
trigger1=!time&&var(59)<=0
var(10)=ifelse((command="bdx"||command="bdy"||command="bdz"),1,2)
ignorehitpause=1

[State 750, strengthvar (AI)]
type=varset
trigger1=!time&&var(59)=1
var(10)=1
ignorehitpause=1

[State 750, snd]
type=playsnd
trigger1=time = 0
value=2,3
channel=0

[State 750, superpause]
type=superpause
trigger1=!time
time=20
movetime=20
anim=-1
sound=s4,20
p2defmul=1
darken=0

[State 3000, carga]
type=helper
trigger1=time = 0
helpertype=normal
stateno=9750
ID=9750
name="fx"
postype=p1
pos = 50,-90
ownpal=1
persistent=0
supermovetime=9999

[State 750, end]
type=changestate
trigger1=time>=20
value=ifelse(var(10)=1,1152,1220)

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;;-----------------------------
; Charge
[Statedef 950]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= I				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 1				;Number of air juggle points move takes
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 950				;Change animation (Def: no change)
poweradd = 0			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 820, PowerAdd]
type = PowerAdd
triggerall = Anim = 950
trigger1 = 1
value = 2* ((time+12)/12)

[State 820, Anim]
type = ChangeAnim
triggerall=var(59)<=0
;triggerall = Time >= 4
trigger1 = (Command != "chargey" || Command != "chargeb") || (power >= 3000)
value = 951
persistent = 0

[State 740, fx]
type=helper
trigger1=anim=950&&!numhelper(7240)&&animelem =2
helpertype=normal
stateno=7240
ID=7240
name="Power Charge"
postype=p1
ownpal=1
persistent=0

[State 820, StateChange]
type = ChangeState
trigger1 = anim = 951 && AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
; Plasma Beam
[StateDef 1000]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1000
poweradd = 80
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1= !time && var(59)<=0
var(10) = ifelse(command="QCF_z",2,ifelse(command="QCF_y",1,0))

[State 1000, VarSet]
type=varset
trigger1= !time && var(59)>=1
var(10)= ifelse((p2movetype=H || random<500), 2, ifelse(random<500, 1, 0))

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 3,2
volume = 255
volumescale = 255
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 4,6
volume = 255
volumescale = 255

[State 0, Helper]
type = Helper
triggerall = numhelper(1000)=0
trigger1 = AnimElem = 9
helpertype = normal ;player
name = "Plasma Beam"
ID = 1000
stateno = 1010
pos = floor(56*const(size.xscale)),floor(-78*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = numhelper(1000)=0
trigger1 = Anim != 1001
trigger1 = AnimElemTime(9)>=0
value = 1001

[State 1000, end]
type = ChangeState
triggerall = anim = 1001
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
; Air Plasma Beam
[StateDef 1005]
type = A
movetype= A
physics = N
juggle  = 1
velset = Vel X/10,Vel Y/5
ctrl = 0
anim = 1005
poweradd = 80
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
y = 0

[state 410,3]
type = veladd
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = velset
trigger1 = var(19)
y = 0
x = 0

[State 0, ChangeState]
type = ChangeState
triggerall = anim = 1006
trigger1 = animelem = 6 && var(19)
value = 1305

[State 0, VarSet]
type = VarSet
trigger1= !time && var(59)<=0
var(10) = ifelse(command="QCF_z",2,ifelse(command="QCF_y",1,0))

[State 1000, VarSet]
type=varset
trigger1= !time && var(59)>=1
var(10)= ifelse((p2movetype=H || random<500), 2, ifelse(random<500, 1, 0))

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 1005 && AnimElem = 5
value = 3,2
volume = 255
volumescale = 255
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 1005 && AnimElem = 5
value = 4,6
volume = 255
volumescale = 255

[State 0, Helper]
type = Helper
triggerall = numhelper(1005)=0
triggerall = anim = 1005
trigger1 = AnimElem = 5
helpertype = normal ;player
name = "Plasma Beam"
ID = 1005
stateno = 1015
pos = floor(18*const(size.xscale)),floor(-45*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = numhelper(1005)=0
trigger1 = Anim != 1006
trigger1 = AnimElemTime(5)>=0
value = 1006

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = anim = 1006
trigger1 = var(19)=0
trigger1 = AnimElemTime(5)=0
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N


[State 620, ChangeState]
type = ChangeState
triggerall = anim = 1006
triggerall = floor (pos Y < -155)
trigger1 = animelem = 7
value = 1211
ctrl = 1


;------------------------------
; Plasma Beam helper
[Statedef 1010]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1010
sprpriority = 4
velset = 0,0
juggle = 1

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, VarSet]
type = VarSet
trigger1= !time && !prevstateno
var(10) = ifelse(parent,var(10)=2,2,ifelse(parent,var(10)=1,1,0))

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = floor(56*const(size.xscale)),floor(-78*const(size.yscale))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1010
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = time = 0  && (P2StateNo != [5070,5071])
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 0,12
guard.pausetime = 0,12
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-21
hitsound = s5+parent,var(49),3
guardsound = s6+parent,var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 19
yaccel = 1.16
ground.velocity = -19.7,-12.7
guard.velocity = -13
ground.cornerpush.veloff = -14
air.velocity = -19.7,-12.7
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[State 220, 8]
type = TargetState
triggerall = p2statetype = S
trigger1 = MoveHit && anim = 1010
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 10226

[State 220, 8]
type = TargetState
triggerall = p2statetype = C
trigger1 = MoveHit && anim = 1010
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 10227

[State 220, 8]
type = TargetState
triggerall = p2statetype = A
trigger1 = MoveHit && anim = 1010
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 10228

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 81)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 901:destroyself]
type = Destroyself
trigger1 = AnimTime=0
trigger2 = parent,movetype=H
trigger3 = parent,stateno!= 1000


;---------------------------------------------------------
; Hit by Plasma Beam
[Statedef 10226]
type    = S
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5002

[State 225, 2]
type = ChangeState
trigger1 = Time = 10
value = 10229

;---------------------------------------------------------
; Hit by Plasma Beam
[Statedef 10227]
type    = C
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5022

[State 225, 2]
type = ChangeState
trigger1 = Time = 10
value = 10229

;---------------------------------------------------------
; Hit by Plasma Beam
[Statedef 10228]
type    = A
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5012

[State 225, 2]
type = ChangeState
trigger1 = Time = 10
value = 10229

;---------------------------------------------------------
; Hit by Plasma Beam - Flying
[Statedef 10229]
type    = A
movetype= H
physics = N

[State 226, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 5064

[State 226, 2]
type = VelAdd
trigger1 = 1
y = 1.27

[State 226, 5]
type = SelfState
triggerall = alive = 1
trigger1 = Time = 15
value = 5040

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = !Alive || !Life
value = 5090

;------------------------------
; Plasma Beam helper
[Statedef 1015]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1015
sprpriority = 4
velset = 0,0
juggle = 1

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1.3,0.92

[State 0, VarSet]
type = VarSet
trigger1= !time && !prevstateno
var(10) = ifelse(parent,var(10)=2,2,ifelse(parent,var(10)=1,1,0))

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = floor(18*const(size.xscale)),floor(-25*const(size.yscale))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1015
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = time = 0  && (P2StateNo != [5070,5071])
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 65,0
getpower = 50,0
givepower = 20,0
pausetime = 0,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,11
hitsound = s5+parent,var(49),3
guardsound = s6+parent,var(49),0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
down.velocity = -6,-7
air.hittime = 2
yaccel = 1.16
ground.velocity = -8,-2
guard.velocity = -13
ground.cornerpush.veloff = -14
air.velocity = -7,-2
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 81)
bindtime = 1
removetime = -2
scale = 0.5, 0.5
supermovetime = 500
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0  

[State 901:destroyself]
type = Destroyself
trigger1 = AnimTime=0
trigger2 = parent,movetype=H
trigger3 = parent,stateno!= 1005


;-------------------------------------------------------------------
; Photon Shot
[StateDef 1100]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1100
poweradd = 80
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1= !time && var(59)<=0
var(10) = ifelse(command="HCB_z",2,ifelse(command="HCB_y",1,0))

[State 1000, VarSet]
type=varset
trigger1= !time && var(59)>=1
var(10)= ifelse((p2movetype=H || random<500), 2, ifelse(random<500, 1, 0))

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 4,7
volume = 255
volumescale = 255
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 3,3
volume = 255
volumescale = 255
channel = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 2"
ID = 1100
stateno = 1111
pos = floor(0*const(size.xscale)),floor(-125*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 5"
ID = 1100
stateno = 1115
pos = floor(-55*const(size.xscale)),floor(-85*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 4"
ID = 1100
stateno = 1113
pos = floor(-45*const(size.xscale)),floor(-110*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 5"
ID = 1100
stateno = 1114
pos = floor(-55*const(size.xscale)),floor(-95*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 7"
ID = 1100
stateno = 1116
pos = floor(-55*const(size.xscale)),floor(-75*const(size.yscale));floor(-45*const(size.xscale)),floor(-65*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 11"
ID = 1100
stateno = 1122
pos = floor(95*const(size.xscale)),floor(-100*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 12"
ID = 1100
stateno = 1124
pos = floor(120*const(size.xscale)),floor(-85*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 14"
ID = 1100
stateno = 1126
pos = floor(125*const(size.xscale)),floor(-70*const(size.yscale));floor(-45*const(size.xscale)),floor(-65*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 18"
ID = 1100
stateno = 1133
pos = floor(115*const(size.xscale)),floor(-35*const(size.yscale));floor(-45*const(size.xscale)),floor(-65*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8
helpertype = normal ;player
name = "Photon Shot 20"
ID = 1100
stateno = 1135
pos = floor(125*const(size.xscale)),floor(-60*const(size.yscale));floor(-45*const(size.xscale)),floor(-65*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
; Air Photon Shot
[StateDef 1105]
type = A
movetype= A
physics = N
juggle  = 1
velset = Vel X/10,Vel Y/5
ctrl = 0
anim = 1105
poweradd = 80
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 15 && var(19)
value = 1305

[state 410,3]
type = veladd
trigger1 = var(19)
y = 0
x = 0

[state 410,3]
type = velset
trigger1 = var(19)
y = 0
x = 0

[State 0, VarSet]
type = VarSet
trigger1= !time && var(59)<=0
var(10) = ifelse(command="HCB_z",2,ifelse(command="HCB_y",1,0))

[State 1000, VarSet]
type=varset
trigger1= !time && var(59)>=1
var(10)= ifelse((p2movetype=H || random<500), 2, ifelse(random<500, 1, 0))

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 4,7
volume = 255
volumescale = 255
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,3
volume = 255
volumescale = 255
channel = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "Photon Shot 20"
ID = 1100
stateno = 1135
pos = floor(75*const(size.xscale)),floor(-40*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "Photon Shot 19"
ID = 1100
stateno = 1134
pos = floor(65*const(size.xscale)),floor(-25*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "Photon Shot 18"
ID = 1100
stateno = 1133
pos = floor(55*const(size.xscale)),floor(-15*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "Photon Shot 17"
ID = 1100
stateno = 1132
pos = floor(45*const(size.xscale)),floor(-5*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "Photon Shot 16"
ID = 1100
stateno = 1131
pos = floor(30*const(size.xscale)),floor(5*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = var(19)=0
trigger1 = AnimElemTime(13)=0
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 1105
triggerall = floor (pos Y < -155)
trigger1 = animelem = 15
value = 1211
ctrl = 1


;------------------------------
; Photon Shot 1
[Statedef 1110]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1110
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
y = -6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 2
[Statedef 1111]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1111
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -3
y = -7

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1


[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 3
[Statedef 1112]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1112
sprpriority = 4
velset = 0,0
juggle = 1

;[State 0, VarSet]
;type = VarSet
;trigger1= !time && !prevstateno
;var(10) = ifelse(parent,var(10)=2,2,ifelse(parent,var(10)=1,1,0))

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))
y = -6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1


[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 4
[Statedef 1113]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1113
sprpriority = 4
velset = 0,0
juggle = 1

;[State 0, VarSet]
;type = VarSet
;trigger1= !time && !prevstateno
;var(10) = ifelse(parent,var(10)=2,2,ifelse(parent,var(10)=1,1,0))

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))
y = -5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1


[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 5
[Statedef 1114]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1114
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = -4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1


[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 6
[Statedef 1115]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1115
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))
y = -3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 7
[Statedef 1116]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1116
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -7
y = 0;ifelse(var(10)=2,-4,ifelse(var(10)=1,-2,0))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 8
[Statedef 1120]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1120
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
y = -7;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140

ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 9
[Statedef 1121]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1121
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))
y = -7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 10
[Statedef 1122]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1122
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))
y = -6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 11
[Statedef 1123]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1123
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))
y = -5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 12
[Statedef 1124]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1124
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = -4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 13
[Statedef 1125]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1125
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))
y = -3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 14
[Statedef 1126]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1126
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 7;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = 0;ifelse(var(10)=2,-4,ifelse(var(10)=1,-2,0))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact
ignorehitpause = 1

;------------------------------
; Photon Shot 15
[Statedef 1130]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1110
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 7;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-20
value = StateNo-20

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 16
[Statedef 1131]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1111
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))
y = 7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-20
value = StateNo-20

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 17
[Statedef 1132]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1112
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))
y = 6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-20
value = StateNo-20

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 18
[Statedef 1133]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1113
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))
y = 5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-20
value = StateNo-20

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 19
[Statedef 1134]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1114
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = 4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-20
value = StateNo-20

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 20
[Statedef 1135]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1115
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))
y = 3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-20
value = StateNo-20

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 21
[Statedef 1136]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1116
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 7;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = 0;ifelse(var(10)=2,-4,ifelse(var(10)=1,-2,0))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-20
value = StateNo-20

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Diagup
air.animtype = Diagup
damage = 25,0
getpower = 50,0
givepower = 20,0
pausetime = 1,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime = 8
air.hittime = 8
yaccel = 0.96
down.velocity = -6,-7
ground.velocity = -3,-6
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = -3,-6
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
id = 1+4

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=1140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Shot dissipate
[Statedef 1140]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 4
juggle = 1

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70||backedgedist <= -70
trigger2 = animtime = 0

;-------------------------------------------------------------------
; Molecular Sheild
[StateDef 1200]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1200
poweradd = 80
sprpriority = 2

[State G-FX, Move Dust]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1200
trigger1 = AnimElem = 3
value = 3,4
volume = 255
volumescale = 255
channel = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1200
trigger1 = NumHelper(1101)>0
value = 4,8
volume = 255
volumescale = 255
channel = -1
persistent = 0



[State 0, Helper]
type = Helper
triggerall=(numhelper(1101)+numhelper(1101))<43
triggerall=numhelper(1101)<=numhelper(1101)
triggerall=animelemtime(13)<0
trigger1 =var(26)%4=0
helpertype = normal ;player
name ="Rocks"
ID = 1101
stateno = 1101
pos =  40,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale= .83



[State 0, VarSet]
type = Varadd
trigger1 =animelemtime(14)<0
v = 26
value = 1
ignorehitpause =1
persistent = 1

[State 1000, end]
type = ChangeState
trigger1 =time=130
value = 0
ctrl=1

;------------------------------
; Molecular Rock helper 1
[Statedef 1101]
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim =1210+(random%19)
sprpriority = 2

[State 170]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VelSet]
type = VelSet
trigger1 =parent,animelemtime(25)<0 && parent,anim=1200
x = 16*-(cos(time/4))

[State 0, VelSet]
type = VelSet
trigger1 =parent,animelemtime(25)<0 &&parent,anim=1200
y = -2.45

[State 0, VelSet]
type = VelSet
triggerall = parent,stateno=1200
trigger1 =parent,animelemtime(25)=0
x = 8
y=ifelse(random<499,1.2,-1.49)

[State 0, VelSet]
type = VelSet
trigger1 = parent,stateno!=1200
x = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = parent,stateno!=1200
y = .7

[State 0, SprPriority]
type = SprPriority
trigger1 =vel x<=0
value = 0

[State 0, SprPriority]
type = SprPriority
trigger1 =vel x>0
value = 8

[State 0, VarSet]
type = VarSet
triggerall =  (parent,animelemtime(27)<0&&parent,stateno=1200)   || parent,movetype=H
trigger1 =movecontact || parent,movetype=H
v = 27    ;fv = 10
value = 1

[State 0, VarSet]
type = VarSet
trigger1= parent,animelemtime(27)=0
v = 27  
value = 0

[State 0, VarSet]
type = VarSet
triggerall =  (parent,animelemtime(27)>0&&parent,stateno=1200)   || parent,movetype=H
trigger1 =movecontact || parent,movetype=H
v = 27  
value = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = parent,stateno!=1200
movetype = I        ;I,A,H

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause=1


[State 210, 2]
type = HitDef
triggerall = hitcount<2
trigger1 =  var(27)=0  && (P2StateNo != [5070,5071])
attr = S, SP
animtype = up
air.animtype = up
damage = ceil(32*(root,fvar(10))),3
hitflag=MAFD
guardflag = MA
pausetime =0,7
guard.pausetime = 0,10
sparkno = s9999
guard.sparkno = s8050
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = ifelse((parent,animelemtime(25)<0&&parent,stateno=1200),-2,-4),ifelse((parent,animelemtime(25)<0&&parent,stateno=1200),-8,-9)
air.velocity =ifelse((parent,animelemtime(25)<0&&parent,stateno=1200),-2,-4),ifelse((parent,animelemtime(25)<0&&parent,stateno=1200),-8,-9)
air.hittime=15
guard.velocity = -12
airguard.velocity = -10.5,3
down.velocity = -6,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel=.8
forcenofall=1
id = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),3
channel = 4
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 4
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -15
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 0, DestroySelf]
type = DestroySelf
trigger1 = ((frontedgedist <= -90|| backedgedist <= -90) && time > 5)
trigger2= pos y >10
trigger3 = movecontact = 7

;-------------------------------------------------------------------
; Star Flight
[StateDef 1300]
type = A
movetype = I
physics = N
ctrl = 0
anim = 1301
velset = 0,-8
sprpriority = 2

[State 850, Explod]
type = Explod
trigger1 = time = 0
anim = 8300
id = 8300
scale = 0.5,0.5
supermove = 1
sprpriority = 4
ownpal = 1

[State 850, VarSet]
type = VarSet
trigger1 = time = 0
var(55) = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 100,3
volume = 255
volumescale = 255

[State 850, VarSet]
type = VarSet
trigger1 = time = 0
var(19) = 460

[State 850, VelMul]
type = VelMul
trigger1 = 1
y = .92

[State 850, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1305

;-------------------------------------------------------------------
; Air Star Flight
[Statedef 1301] 
type = A
movetype = I
physics = N
ctrl = 0
anim = 1301
velset = 0,-4
sprpriority = 2

[State 851, VarSet]
type = VarSet
trigger1 = time = 0
var(55) = 0

[State 851, VarSet]
type = VarSet
trigger1 = time = 0
var(19) = 460

[State 851, VelMul]
type = VelMul
trigger1 = 1
y = .92

[State 200, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 100,3
volume = 255
volumescale = 255

[State 851, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1305

;-------------------------------------------------------------------
; Star Flight
[StateDef 1305]
type = A
movetype = I
physics = N
ctrl = 0
anim = 0
velset = 0,0
sprpriority = 2

[State 855, Turn]
type = Turn
trigger1 = (enemy,pos x-pos x)*facing < -4

[State 855, VarSet]
type = VarSet
trigger1 = 1
var(51) = (command="holdfwd")|(command="holdback")*2|(command="holdup")*4|(command="holddown")*8

; 
[State 855, VarSet]
type = VarSet
trigger1 = pos y > -15
var(51) = var(51)&7

[State 855, VarSet]
type = VarSet
trigger1 = pos y < -160
var(51) = var(51)&11

[State 855, PosAdd]
type = PosAdd
trigger1 = pos y < -170
y = 10

; x
[State 855, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 855, VelSet]
type = VelSet
trigger1 = var(51)&1
x = ifelse(var(51)&4||var(51)&4,4,6)

[State 855, VelSet]
type = VelSet
trigger1 = var(51)&2
x = ifelse(var(51)&4||var(51)&4,-4,-6)

[State 855, VelSet]
type = VelSet
trigger1 = var(51)&4
y = ifelse(var(51)&1||var(51)&5,-5,-5)

[State 855, VelSet]
type = VelSet
trigger1 = var(51)&8
y = ifelse(var(51)&1||var(51)&5,5,5)

[State 855, ChangeAnim]
type = Playsnd
trigger1 = command = "holdfwd"
value = 100,3
volume = 255
volumescale = 255
persistent = 0
channel = 7

[State 855, ChangeAnim]
type = Playsnd
trigger1 = command = "holdback"
value = 100,3
volume = 255
volumescale = 255
persistent = 0
channel = 7

[State 855, ChangeAnim]
type = Playsnd
trigger1 = command = "holdup"
value = 100,3
volume = 255
volumescale = 255
persistent = 0
channel = 7


[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1300
trigger1 = command != "holdfwd" &&command != "holdback" && command != "holdup"  && command!="holddown"
value = 1300

[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1300
trigger1 = command = "holdup"  && command!="holddown" && command!="holdfwd"  && command!="holdback"
value = 1300

[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1300
trigger1 = command = "holddown"  && command!="holdup" && command!="holdfwd"  && command!="holdback"
value = 1300

[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1302
trigger1 = command = "holdfwd" && command!="holdup" && command!="holddown"  && command!="holdback"
value = 1302

[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1302
trigger1 = command = "holdfwd" && command="holdup" && !command="holddown"  && command!="holdback"
value = 1302

[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1302
trigger1 = command = "holdfwd" && !command="holdup" && command="holddown"  && command!="holdback"
value = 1302

[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1303
trigger1 = command = "holdback" && command!="holdup" && command!="holddown"  && command!="holdfwd" 
value = 1303

[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1303
trigger1 = command = "holdback" && command="holdup" && command!="holddown"  && command!="holdfwd" 
value = 1303

[State 855, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1303
trigger1 = command = "holdback" && command!="holdup" && command="holddown"  && command!="holdfwd" 
value = 1303

[State 855, ChangeState]
type = ChangeState
trigger1 = var(19) = 0
value = 1310

;-------------------------------------------------------------------
; Flight End
[StateDef 1310]
type = A
movetype = I
physics = A
ctrl = 0
anim = 48
velset = 0,0
sprpriority = 2

[State 856, VarSet]
type = VarSet
trigger1 = time = 0
var(19) = 0

;---------------------------------------------------------------------------
; Electric Cage
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3000

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 45   ;fv = 10
value = 1

[State G-FX, Move Dust]
type = Explod
triggerall = Anim = 3000
trigger1 = AnimElem = 2
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
triggerall = Anim = 3000
trigger1 = AnimElem = 2
var(47) = 1

[State 3000, VarSet]
type = VarSet
trigger1 = Anim = 3002
var(47) = 0

[State 3000, VarSet]
type = VarSet
triggerall = Anim = 3001
trigger1 = time = 150
var(47) = 0

[State 3000, Helper]
type = Helper
triggerall = Anim = 3000
trigger1 = AnimElem = 2
stateno = 8500
supermovetime = 99999999
pos = ceil(40*const(size.xscale)),ceil(-74*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
triggerall = Anim = 3000
trigger1 = AnimElem = 2
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
triggerall = Anim = 3000
trigger1 = AnimElem = 2
value = SCA 

[State 0, Helper]
type = Helper
triggerall=anim=3000
triggerall = NumHelper(3000)=0
trigger1 = AnimElem=5
helpertype = normal ;player
name = "Electric Cage"
ID = 3000
stateno = 3090
pos = 75,-75
postype = p1    ;p2,front,back,left,right
keyctrl = 0
ownpal = 1

[State 0, Width]
type = Width
trigger1 = Anim = 3000
trigger1 = AnimElemTime(3)>=0
value = 30,0

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 3001&&NumHelper(3000)
trigger1 = Helper(3000),movecontact
trigger1 = AnimElemTime(6)>=0
value = 3001

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 3002&&!NumHelper(3000)
trigger1 = AnimElemTime(6)>=0
value = 3002

[State 220, 5]
type = ChangeState
triggerall = Anim = 3002&&NumHelper(3000)=0
trigger1 = AnimElemTime(6)>=0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------;
[Statedef 3090]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 3090
velset = 0,0
poweradd = 0
sprpriority=4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time && !prevstateno
value = 4,1
volume = 0
channel = -1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 0, VarSet]
type = VarSet
trigger1 = !time && !stateno
var(10) = 5

[State 3090, VarSet]
type = VarAdd
trigger1 = !time
var(10) = 1

[State 1090, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AP,HA
stateno=ifelse(var(10)>=5,3091,3090)
ignorehitpause=1

[State 1090, HitBy]
type=hitby
trigger1= 1
time=-1
value=SCA,AP,HA
ignorehitpause=1

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = 1  && (P2StateNo != [5070,5071])
sparkxy = -10,0
animtype = hard
attr = A,HA
priority = 3,Hit
damage = ceil(13*(root,fvar(10))),1
guardflag = MA
hitflag = MAF
pausetime = 2,4
sparkno = s9999
guard.sparkno = s8050
hitsound = -1
guardsound = -1
ground.type = low
air.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0,0
air.hittime = 18
air.velocity = 0,0
air.fall=1
getpower=0
fall.recover=0
snap = 10,75
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
palfx.time = 31
palfx.add = 40,96,240
palfx.mul = 176,240,240
palfx.sinadd = 8,32,64,4
palfx.color = 8
guard.cornerpush.veloff = 0
yaccel = .5

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),3
channel = 4
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = movehit
value = 5,5
channel = 5
ignorehitpause = 1
persistent = 0


[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 4
ignorehitpause = 1
persistent = 0

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -15
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1090, VelSet]
type = VelSet
trigger1 = 1
x = 9

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = frontedgedist <= -140

[State 1002]
type = Destroyself
trigger1 = frontedgedist <= -140

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3095
;---------------------------------------------------------------------------;
[Statedef 3091]
type = A
movetype = I
physics = N
juggle = 0
ctrl = 0
anim = 3091
poweradd = 0
sprpriority=4

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = .8

[State 0, VelSet]
type = VelSet
trigger1 = var(10)>=5
x = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = frontedgedist <= -140
trigger2 = AnimTime=0

[State 1002]
type = Destroyself
trigger1 = frontedgedist <= -140
trigger2 = AnimTime=0

;---------------------------------------------------------------------------;
[Statedef 3095]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 3095
velset = 0,0
poweradd = 0
sprpriority=4

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4

[State 1300]
type = Explod
trigger1 = Time = 0
anim = 3096
postype = p1
scale = .83,1.07 
removetime = 89
sprpriority = 0
ownpal = 1

[State 1090, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AP,HA
stateno=3095
ignorehitpause=1

[State 1090, HitBy]
type=hitby
trigger1= 1
time=-1
value=SCA,AP,HA
ignorehitpause=1

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 1000, VarSet]
type = VarSet
trigger1 = 1
var(40) = ifelse((enemynear,screenpos x-screenpos x+5*facing)*facing>0,1,-1)

[State 901:projectile]
type = hitdef
attr = S, HA
trigger1 = time< 60
trigger1 = hitcount < 12
trigger1 = moveguarded < 1
damage = ceil(28*(root,fvar(10))),6
animtype = Hard
priority  = 5, Hit
guardflag = MA
pausetime = 6,1
sparkxy = -10,-10
guardsound = -1
hitsound = -1
sparkno = S8002
guard.sparkno = S8050
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
guard.velocity = 6*var(40)
ground.velocity = 6*var(40),0
air.velocity = 6*var(40),-2
airguard.velocity = 5*var(40),-2
air.velocity = -7,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 31
palfx.add = 40,96,240
palfx.mul = 176,240,240
palfx.sinadd = 8,32,64,4
palfx.color = 8
yaccel = 0.69
id = 2+4
getpower = ifelse(MoveHit,10,3),ifelse(MoveHit,10,0)

[State 3001]
type = HitDef
attr = S, HA
trigger1 = hitcount = 12
damage = ceil(50*(root,fvar(10))),6
animtype = diagup
air.animtype = diagup
priority  = 5, Hit
guardflag = MA
pausetime = 0,1
sparkxy = -10,-10
guardsound = -1
hitsound = -1
sparkno = S8002
guard.sparkno = S8050
ground.type = High
ground.slidetime = 10
ground.hittime  = 25
air.hittime = 25
ground.velocity = -12,-29
air.velocity = -12,-29
guard.velocity = -15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 31
palfx.add = 40,96,240
palfx.mul = 176,240,240
palfx.sinadd = 8,32,64,4
palfx.color = 8
yaccel = 0.79
air.fall = 1
id = 1
getpower = ifelse(MoveHit,10,3),ifelse(MoveHit,10,0)

[state 200, 1]
type = playsnd
trigger1 = movehit
value = 5+parent,var(49),2
channel = 4
ignorehitpause = 1

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = 6+parent,var(49),0
channel = 4
ignorehitpause = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -15
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = hitcount = 14
value=3091

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime=0
trigger2 = parent,movetype=H
trigger3 = parent,stateno!=3000
value=3091

;---------------------------------------------------------------------------
; Photon Array
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3100

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 45   ;fv = 10
value = 1

[State G-FX, Move Dust]
type = Explod
trigger1 = AnimElem = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 8
var(47) = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimTime = 0
var(47) = 0

[State 3000, Helper]
type = Helper
trigger1 = AnimElem = 8
stateno = 8500
supermovetime = 99999999
pos = ceil(40*const(size.xscale)),ceil(-74*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 8
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 8
value = SCA 

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=9
value = 3,8
volume = 255
volumescale = 255
channel = 4

[State 0, Width]
type = Width
trigger1 = time = [11,172]
value = 47,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
value = 4,7
volume = 255
volumescale = 255
channel = 5

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 2"
ID = 3100
stateno = 3111
pos = floor(0*const(size.xscale)),floor(-125*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 3"
ID = 3100
stateno = 3115
pos = floor(-55*const(size.xscale)),floor(-85*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 4"
ID = 3100
stateno = 3113
pos = floor(-45*const(size.xscale)),floor(-110*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 5"
ID = 3100
stateno = 3114
pos = floor(-55*const(size.xscale)),floor(-95*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 7"
ID = 3100
stateno = 3116
pos = floor(-55*const(size.xscale)),floor(-75*const(size.yscale));floor(-45*const(size.xscale)),floor(-65*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 11"
ID = 3100
stateno = 3122
pos = floor(95*const(size.xscale)),floor(-100*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 12"
ID = 3100
stateno = 3124
pos = floor(120*const(size.xscale)),floor(-85*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 14"
ID = 3100
stateno = 3126
pos = floor(125*const(size.xscale)),floor(-70*const(size.yscale));floor(-45*const(size.xscale)),floor(-65*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 18"
ID = 3100
stateno = 3133
pos = floor(115*const(size.xscale)),floor(-35*const(size.yscale));floor(-45*const(size.xscale)),floor(-65*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
helpertype = normal ;player
name = "Photon Shot 19"
ID = 3100
stateno = 3135
pos = floor(125*const(size.xscale)),floor(-60*const(size.yscale));floor(-45*const(size.xscale)),floor(-65*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, VarSet]
type = VarSet
trigger1 = AnimElemTime(44)>=0
v = 45   ;fv = 10
value = 0

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Photon Array (Air)
[StateDef 3105]
type = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3105
poweradd = 0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = Pos Y >= 0
trigger1 = Vel Y >= 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animelem = 36 && var(19)
value = 1305

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 45   ;fv = 10
value = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 2
var(47) = 1

[State 3000, VarSet]
type = VarSet
trigger1 = AnimElem = 35
var(47) = 0

[State 3000, Helper]
type = Helper
trigger1 = AnimElem = 2
stateno = 8500
supermovetime = 99999999
pos = ceil(30*const(size.xscale)),ceil(-14*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 2
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 2
value = SCA 

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=4
value = 3,8
volume = 255
volumescale = 255
channel = 4


[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 13
trigger3 = AnimElem = 17
trigger4 = AnimElem = 21
value = 4,7
volume = 255
volumescale = 255
channel = 5


[State 0, Width]
type = Width
trigger1 = time = [6,127]
value = 25,0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
helpertype = normal ;player
name = "Photon Shot 20"
ID = 3105
stateno = 3135
pos = floor(75*const(size.xscale)),floor(-40*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
helpertype = normal ;player
name = "Photon Shot 19"
ID = 3105
stateno = 3134
pos = floor(65*const(size.xscale)),floor(-25*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
helpertype = normal ;player
name = "Photon Shot 18"
ID = 3105
stateno = 3133
pos = floor(55*const(size.xscale)),floor(-15*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
helpertype = normal ;player
name = "Photon Shot 17"
ID = 3105
stateno = 3132
pos = floor(45*const(size.xscale)),floor(-5*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
helpertype = normal ;player
name = "Photon Shot 16"
ID = 3105
stateno = 3131
pos = floor(30*const(size.xscale)),floor(5*const(size.yscale))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 0, VarSet]
type = VarSet
trigger1 = AnimElemTime(37)>=0
v = 45    ;fv = 10
value = 0

[State 620, ChangeState]
type = ChangeState
triggerall = anim = 3105
trigger1 = animelem = 37
value = 1211
ctrl = 1

;------------------------------
; Photon Shot 1
[Statedef 3110]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1110
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
y = -6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 2
[Statedef 3111]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1111
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -3
y = -7

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1


[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 3
[Statedef 3112]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1112
sprpriority = 4
velset = 0,0
juggle = 1

;[State 0, VarSet]
;type = VarSet
;trigger1= !time && !prevstateno
;var(10) = ifelse(parent,var(10)=2,2,ifelse(parent,var(10)=1,1,0))

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))
y = -6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 4
[Statedef 3113]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1113
sprpriority = 4
velset = 0,0
juggle = 1

;[State 0, VarSet]
;type = VarSet
;trigger1= !time && !prevstateno
;var(10) = ifelse(parent,var(10)=2,2,ifelse(parent,var(10)=1,1,0))

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))
y = -5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 5
[Statedef 3114]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1114
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = -4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1


[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 6
[Statedef 3115]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1115
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))
y = -3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 7
[Statedef 3116]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1116
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -7
y = 0;ifelse(var(10)=2,-4,ifelse(var(10)=1,-2,0))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = backedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 8
[Statedef 3120]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1120
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
y = -7;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140

ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 9
[Statedef 3121]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1121
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))
y = -7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 10
[Statedef 3122]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1122
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))
y = -6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 11
[Statedef 3123]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1123
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))
y = -5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 12
[Statedef 3124]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1124
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = -4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 13
[Statedef 3125]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1125
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))
y = -3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 14
[Statedef 3126]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1126
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 7;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = 0;ifelse(var(10)=2,-4,ifelse(var(10)=1,-2,0))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2000
value = StateNo-2000

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1

[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact
ignorehitpause = 1

;------------------------------
; Photon Shot 15
[Statedef 3130]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1110
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 7;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2020
value = StateNo-2020


[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 16
[Statedef 3131]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1111
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))
y = 7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2020
value = StateNo-2020


[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 17
[Statedef 3132]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1112
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))
y = 6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2020
value = StateNo-2020


[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 18
[Statedef 3133]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1113
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))
y = 5;ifelse(var(10)=2,-7,ifelse(var(10)=1,-5,-3))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2020
value = StateNo-2020


[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 19
[Statedef 3134]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1114
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 6;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = 4;ifelse(var(10)=2,-6,ifelse(var(10)=1,-4,-2))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2020
value = StateNo-2020


[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 20
[Statedef 3135]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1115
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 7;ifelse(var(10)=2,-9,ifelse(var(10)=1,-7,-5))
y = 3;ifelse(var(10)=2,-5,ifelse(var(10)=1,-3,-1))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2020
value = StateNo-2020


[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0


[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Photon Shot 21
[Statedef 3136]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 1116
sprpriority = 4
velset = 0,0
juggle = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1


[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 7;ifelse(var(10)=2,-8,ifelse(var(10)=1,-6,-4))
y = 0;ifelse(var(10)=2,-4,ifelse(var(10)=1,-2,0))

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo-2020
value = StateNo-2020


[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = !time
attr = S,NA
hitflag = MAFD
guardflag = MA
animtype = Up
air.animtype = Up
damage = ceil(20*(root,fvar(10))),3
getpower = 50,0
givepower = 20,0
pausetime = 1,6
guard.pausetime = 1,6
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = -1
guardsound = -1
ground.type = Low
ground.slidetime = 18
ground.hittime = 8
down.velocity = -6,-7
air.hittime = 8
yaccel = 0.96
ground.velocity = 1.3,-2
guard.velocity = -8.7
ground.cornerpush.veloff = -14
air.velocity = 1.4,-0.5
airguard.velocity = -10.5,3
fall.xvelocity = 0
fall.yvelocity = -2
fall.recover = 0
fall = 1
air.fall = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),6
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 5
volume = 40
volumescale = 40
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -45
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1

[State 1005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
stateno=3140
ignorehitpause=1
[State 1005, hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1140

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70
trigger2 = Pos Y >= 0
trigger2 = Vel Y >= 0
trigger3 = Pos Y <= -480
trigger4 = movecontact

;------------------------------
; Shot dissipate
[Statedef 3140]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 4
juggle = 1

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1
persistent = 1

[State 901:destroyself]
type = Destroyself
trigger1 = frontedgedist <= -70||backedgedist <= -70
trigger2 = animtime = 0


;---------------------------------------------------------------------------
; Sphere Flame
[Statedef 3200]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3200

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 45   ;fv = 10
value = 1

[State G-FX, Move Dust]
type = Explod
triggerall = Anim = 3200
trigger1 = AnimElem = 30
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
scale = 0.5,0.5
ownpal = 1

[State 3000, VarSet]
type = VarSet
triggerall = Anim = 3200
trigger1 = AnimElem = 3
var(47) = 1

[State 3000, VarSet]
type = VarSet
triggerALL = anim = 3201
trigger1 = AnimTime = 0
var(47) = 0

[State 3000, Helper]
type = Helper
triggerall = Anim = 3200
trigger1 = AnimElem = 3
stateno = 8500
supermovetime = 99999999
pos = ceil(40*const(size.xscale)),ceil(-74*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
triggerall = Anim = 3200
trigger1 = AnimElem = 3
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
triggerall = Anim = 3200
trigger1 = AnimElem = 3
value = SCA 

[State 0, Helper]
type = Helper
triggerall = Anim = 3200
trigger1 = AnimElem = 31
helpertype = normal ;player
name = "Sphere Flame Helper"
ID = 3200
stateno = 3290
pos = 63,-176
postype = p1    ;p2,front,back,left,right
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = Anim = 3200
trigger1 = AnimElem = 31
helpertype = normal ;player
name = "Sphere Flame Anim"
ID = 3200
stateno = 3293
pos = 63,-176
postype = p1    ;p2,front,back,left,right
keyctrl = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3200
trigger1 = AnimElem = 28
value = S3,2
volume = 0
channel = 5

[State 0, Width]
type = Width
trigger1 = Anim = 3200
trigger1 = AnimElemTime(26)>=0
value = 25,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 142
value = 3201

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !p2movetype = H
trigger1 = time = 82
value = 3201

[State 220, 5]
type = ChangeState
triggerall = anim = 3201
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Sphere Flame Helper Hit
[Statedef 3290]
type = A
movetype = A
physics = N
ctrl = 0
;anim = 3290
velset = 0,0
poweradd = 0
sprpriority=4

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = 4,13
volume = 0
channel = -1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && Anim != StateNo
value = StateNo

[State 3290, VarSet]
type = VarSet
trigger1 = !time && !stateno
var(10) = 16

[State 3290, VarSet (NumHits)]
type = VarAdd
trigger1 = !time
var(10) = 1

[State 1090, HitBy]
type=hitby
trigger1= 1
time=-1
value=SCA,AP,HA
ignorehitpause=1

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 901:projectile]
type = hitdef
trigger1 = var(10)<17  && (P2StateNo != [5070,5071])
trigger1 = (time%2)
sparkxy = -10,0
animtype = up
air.animtype = up
attr = A,HP
priority = 3,Hit
damage = ceil(20*(root,fvar(10))),2
guardflag = MA
hitflag = MAF
pausetime = 3,2
guard.pausetime = 5,5
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,60
hitsound = -1
guardsound = -1
ground.type = low
air.type = low
ground.slidetime = 22
ground.hittime = 22
ground.velocity = 0,-11
air.hittime = 18
air.velocity = 0,-8.5
airguard.velocity = -10.5,3
guard.velocity = -8
getpower=0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .85
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 1

[State 901:projectile]
type = hitdef
trigger1 = var(10)>=16  && (P2StateNo != [5070,5071])
sparkxy = -10,0
animtype = up
air.animtype = up
attr = A,HP
priority = 3,Hit
damage = ceil(34*(root,fvar(10))),2
guardflag = MA
hitflag = MAF
pausetime = 7,5
guard.pausetime = 5,5
sparkno = s9999
guard.sparkno = s8050
hitsound = -1
sparkxy = -10,60
guardsound = -1
ground.type = low
air.type = low
ground.slidetime = 22
ground.hittime = 22
ground.velocity = 0,-11
air.hittime = 18
air.velocity = 0,-8.5
airguard.velocity = -10.5,3
guard.velocity = -11
getpower=0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .85
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 1

[State 901:projectile]
type = hitdef
trigger1 = hitcount = 16  && (P2StateNo != [5070,5071])
sparkxy = -10,0
animtype = up
air.animtype = up
attr = A,HP
priority = 3,Hit
damage = ceil(34*(root,fvar(10))),2
guardflag = MA
hitflag = MAF
pausetime = 7,5
guard.pausetime = 5,5
sparkno = s9999
guard.sparkno = s8050
sparkxy = -10,60
hitsound = -1
guardsound = -1
ground.type = low
air.type = low
ground.slidetime = 22
ground.hittime = 22
ground.velocity = 0,-11
air.hittime = 13
air.velocity = -8,-12.5
airguard.velocity = -10.5,3
guard.velocity = -11
getpower=0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .85
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 1

[state 200, 1]
type = playsnd
trigger1 = movehit
value = s5+parent,var(49),3
channel = 4
ignorehitpause = 1
persistent = 0

[state 200, 1]
type = playsnd
trigger1 = moveguarded
value = s6+parent,var(49),0
channel = 4
ignorehitpause = 1
persistent = 0

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = parent,movecontact
ignorehitpause = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8006, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -15
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1090, VelSet]
type = VelSet
trigger1 = 1
y = -4

[State 3005, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AP,HA
stateno = 3290
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = var(10)<=17
trigger1 = movecontact
value = 3290

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = var(10)>17
trigger2 = Pos Y <= ceil(p2dist Y - 750)
movetype = I

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Pos Y <= ceil(p2dist Y - 470)
trigger2 = time = 18


;---------------------------------------------------------------------------
; Sphere Flame Animation
[Statedef 3293]
type = A
movetype = A
physics = N
juggle = 0
anim = 3293
poweradd = 0
sprpriority=6

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1090, VelSet]
type = VelSet
trigger1 = moveguarded
y = -7

[State 1090, VelSet]
type = VelSet
trigger1 = !p2movetype = H
y = -7

[State 1090, VelSet]
type = VelSet
trigger1 = p2movetype = H
y = -2.8

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 118

;==================================================================================
;======| RELACIONADO  AI - AI RELATED |===========================================
;==================================================================================

; (Credit to ANMC, Bagaliao, and FlowaGirl for the basic helper method concept.)
;
;------------------
; AI Activation Helper State - Primary Version
; (Credit to YongMing for the basic HitPause bugfix concept.)
;
; var(1) - First tick button activation prevention.
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Persistent direction command detection enabler (due to 2002.04.14).
; var(9) - AutoTurn bug fixer.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(59) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9741]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9741, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9741, PauseCheck]
type = VarSet
trigger1 = (GameTime>(Parent,var(57)))
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)
trigger4 = Parent,var(59)
trigger5 = (var(3):=0)
var(2) = (var(3):=1)+(var(4):=0)

[State 9741, Facing]
type = Turn
trigger1 = (var(9):=(Facing != Parent,Facing))

[State 9741, DirTurnOnAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = !var(9)
trigger1 = (Parent,command = "holdfwd")
trigger2 = (Parent,command = "holdback")
trigger3 = (Parent,command = "holdup")
trigger4 = (Parent,command = "holddown")
trigger5 = !(var(4):=1)
var(59) = var(4)

[State 9741, DirTurnOffAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = Parent,var(59)
trigger1 = (command = "holdfwd")
trigger1 = (Parent,command = "holdfwd")
trigger2 = (command = "holdback")
trigger2 = (Parent,command = "holdback")
trigger3 = (command = "holdup")
trigger3 = (Parent,command = "holdup")
trigger4 = (command = "holddown")
trigger4 = (Parent,command = "holddown")
var(59) = (var(4):=0)

[State 9741, ButtonTurnOnAI]
type = ParentVarSet
triggerall = var(1)
triggerall = !var(2)
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
var(59) = 1

[State 9741, ButtonTurnOffAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = (command = "a")
trigger1 = (Parent,command = "a")
trigger2 = (command = "b")
trigger2 = (Parent,command = "b")
trigger3 = (command = "c")
trigger3 = (Parent,command = "c")
trigger4 = (command = "x")
trigger4 = (Parent,command = "x")
trigger5 = (command = "y")
trigger5 = (Parent,command = "y")
trigger6 = (command = "z")
trigger6 = (Parent,command = "z")
trigger7 = (command = "start")
trigger7 = (Parent,command = "start")
var(59) = -1

[State 9741, UnPauseCheck]
type = VarSet
triggerall = var(2)
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
trigger8 = (var(2) = 2)
trigger8 = (var(2):=0)
var(2) = 2

[State 9741, Goodbye]
type = DestroySelf
triggerall = (var(1):=1)
trigger1 = Parent,var(59)
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)


;------------------
; AI Activation Helper State - Compatibly Partnered Version
;
; var(1) - First tick dir activation prevention
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Hitpause check.
; var(5) - No button on previous tick.
; var(6) - Any dir on this tick.
; var(7) - Any button on this tick.
; var(8) - Matching partner button detected.
; var(9) - AutoTurn bug fixer.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(59) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9742]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9742, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9742, PauseCheck]
type = VarSet
trigger1 = (GameTime>Parent,var(57))
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)
trigger4 = Parent,var(59)
trigger5 = (var(3):=0)
var(2) = (var(3):=1)

[State 9742, Facing]
type = Turn
trigger1 = (var(9):=(Facing != Parent,Facing))

[State 9742, ParentDirCheck]
type = VarSet
trigger1 = (Parent,command = "holdfwd")
trigger2 = (Parent,command = "holdback")
trigger3 = (Parent,command = "holdup")
trigger4 = (Parent,command = "holddown")
trigger5 = (var(6):=0)
var(6) = 1

[State 9742, ParentButtonCheck]
type = VarSet
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
trigger8 = (var(7):=0)
var(7) = 1

[State 9742, SameButtonCheck]
type = VarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = NumPartner
trigger1 = (Parent,command = "a")
trigger1 = (Partner,command = "a")
trigger2 = (Parent,command = "b")
trigger2 = (Partner,command = "b")
trigger3 = (Parent,command = "c")
trigger3 = (Partner,command = "c")
trigger4 = (Parent,command = "x")
trigger4 = (Partner,command = "x")
trigger5 = (Parent,command = "y")
trigger5 = (Partner,command = "y")
trigger6 = (Parent,command = "z")
trigger6 = (Partner,command = "z")
trigger7 = (Parent,command = "start")
trigger7 = (Partner,command = "start")
trigger8 = (var(15):=0)
var(15) = 1

[State 9742, DirTurnOnAI]
type = ParentVarSet
trigger1 = var(1)
trigger1 = var(6)
trigger1 = !var(3)
trigger1 = !var(4)
trigger1 = !var(9)
var(59) = 1

[State 9742, DirTurnOffAI]
type = ParentVarSet
triggerall = var(6)
triggerall = !var(3)
triggerall = Parent,var(59)
trigger1 = (command = "holdfwd")
trigger1 = (Parent,command = "holdfwd")
trigger2 = (command = "holdback")
trigger2 = (Parent,command = "holdback")
trigger3 = (command = "holdup")
trigger3 = (Parent,command = "holdup")
trigger4 = (command = "holddown")
trigger4 = (Parent,command = "holddown")
var(59) = 0

[State 9742, ButtonTurnOnAI]
type = ParentVarSet
trigger1 = var(5)
trigger1 = var(7)
trigger1 = !var(2)
trigger1 = !var(15)
var(59) = 1

[State 9742, ButtonTurnOffAI]
type = ParentVarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = !var(8)
trigger1 = (command = "a")
trigger1 = (Parent,command = "a")
trigger2 = (command = "b")
trigger2 = (Parent,command = "b")
trigger3 = (command = "c")
trigger3 = (Parent,command = "c")
trigger4 = (command = "x")
trigger4 = (Parent,command = "x")
trigger5 = (command = "y")
trigger5 = (Parent,command = "y")
trigger6 = (command = "z")
trigger6 = (Parent,command = "z")
trigger7 = (command = "start")
trigger7 = (Parent,command = "start")
var(59) = -1

[State 9742, UnPauseCheck]
type = VarSet
triggerall = var(2)
triggerall = !var(4)
trigger1 = var(7)
trigger2 = (var(2) = 2)
trigger2 = (var(2):=0)
var(2) = 2

[State 9742, Goodbye]
type = DestroySelf
trigger1 = Parent,var(59)
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)

[State 9742, HitPauseCheck]
type = VarSet
trigger1 = var(6)
trigger2 = var(7)
trigger3 = !(Parent,HitPauseTime)
var(4) = Parent,HitPauseTime

[State 9742, Delay]
type = VarSet
trigger1 = (var(1):=1)
var(5) = !var(7)


;------------------
; XOR Method's HitPauseTime Helper State

[StateDef 9743]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9743, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9743, HitPauseTime]
type = VarSet
trigger1 = !(Parent,HitPauseTime)
trigger2 = (GameTime>Parent,var(57))
var(1) = Parent,HitPauseTime

[State 9742, Goodbye]
type = DestroySelf
trigger1 = (Parent,var(59) = 1)
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)
;==================================================================================
;==================================================================================
;==================================================================================

;==========<ZERO COUNTER>==========
[Statedef 9750]
type=A
physics=N
movetype=I
anim=8070
ctrl=0
velset=0,0
poweradd=0
sprpriority=4

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 0-(time*20),0-(time*20),0-(time*20)
;mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause =
;persistent =

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >=15
trigger2 = parent,movetype = H
;ignorehitpause =
;persistent =

;========================<FIRE>=============================
[Statedef 9995]
physics=N
velset=0,0
anim=9741
sprpriority=4

[State 1195, assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause=1

[State 1195, flames]
type=explod
trigger1= 1
anim=9995
ID=9995
sprpriority=5
postype=p2
vel=-.2,-.75
pos=(enemynear,const(size.mid.pos.x)),(enemynear,const(size.mid.pos.y))+(ifelse((enemynear,statetype != A),-5,10))
random=40,40;40,40;50,40
removetime=-2
scale=(.3-(.001*time)),(.3-(.001*time))
ownpal=0

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 9995
trans=addalpha
alpha=220,256

[State 7180, pos]
type=posadd
trigger1= 1
x=ceil(p2dist x)
y=ceil(p2dist y)

[State 7180, end]
type=destroyself
trigger1= time>=(ifelse(enemynear,statetype != A ,20,120))
trigger2= enemynear,ctrl || (enemynear,movetype!=H) || (enemynear,statetype=L)


;------------------------------------------------------------------------
[Statedef 7105]
type = S
movetype = I
physics = N
ctrl = 0
anim = 9741
sprpriority = 5
juggle = 0

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = nobardisplay

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 901: NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA,AA,AT
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !numexplod(7005)
trigger1 = time =0
anim = 7005
ID =  7000
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove =999999
pausemove =999999
supermovetime=9999
scale = 1,1
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 4300, circle]
type=explod
trigger1=time = 28
anim=7007
ID=7007
sprpriority=5
postype=p1
ownpal = 1
removetime=30
supermovetime=300

[State 4300, shrink]
type=modifyexplod
trigger1=numexplod(7007)
ID=7007
scale = .5+(.04*(time-28)),.5+(.04*(time-28))

[State 4300, circle]
type=explod
trigger1=time = 20
anim=7008
ID=7008
sprpriority=5
postype=p1
ownpal = 1
removetime=30
supermovetime=300

[State 4300, shrink]
type=modifyexplod
trigger1=numexplod(7008)
ID=7008
scale = .5+(.08*(time-20)),.5+(.08*(time-20))

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time >=50
trigger2 = parent,movetype=H

[State 901:destroyself]
type = destroyself
trigger1 = time >=50
trigger2 = parent,movetype=H
;------------------------------------------------------------------------
[Statedef 7006]
type = S
movetype = I
physics = N
ctrl = 0
anim = 9741
sprpriority = 5
juggle = 0

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 2
;facing = 0
;pos = 0,0
;ignorehitpause =
;persistent =

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = nobardisplay

[State 901:Assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 901:playerpush]
type = PlayerPush
trigger1 = 1
value = 0
persistent = 1

[State 901: NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA,AA,AT
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time =0
anim = 7010
ID =  7010
pos = 160,119
postype = back ;p2,front,back,left,right
facing = ifelse((root,facing= 1),1,-1)
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove =999999
pausemove =999999
scale = 1,1
sprpriority = -5
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1

[State 4300, shrink]
type=modifyexplod
trigger1=numexplod(7010) && time <=8
ID=7010
scale = .5,.5;2-(.145*(time)),2-(.145*(time))

[State 4300, shrink]
type=modifyexplod
trigger1=numexplod(7010) && time = [9,40]
ID=7010
scale = .5,.5

[State 4300, shrink]
type=modifyexplod
trigger1=numexplod(7010) && time >40
ID=7010
scale = .5+(.16*(time-40)),.5+(.16*(time-40))

[State 0, PalFX]
type = PalFX
trigger1=numexplod(7010) && time <=20
time = 1
add = 255-(10*(time)),255-(10*(time)),255-(10*(time))

[State 0, PalFX]
type = PalFX
trigger1=numexplod(7010) && time >40
time = 1
add = 0-(10*(time-40)),0-(10*(time-40)),0-(10*(time-40))

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time >=50
trigger2 = root,movetype=H

[State 901:destroyself]
type = destroyself
trigger1 = time >=50
trigger2 = root,movetype=H
;========================<KANJI B.G.>=============================
[Statedef 7610]
physics=N
velset=0,0
anim=9741

[State 7610, assert]
type=assertspecial
trigger1=time<120
flag=nomusic

[State 7610, snd]
type=playsnd
trigger1=!time
value=7610,0

[State 7610, black]
type=bgpalfx
trigger1=time<120
time=2
add=-255,-255,-255

[State 7610, black]
type=bgpalfx
trigger1=time=120
time=60
add=-255,-255,-255
sinadd=255,255,255,240

[State 7610, fade]
type=palfx
trigger1=time=120
time=60
sinadd=-255,-255,-255,240

[State 7610, kanji]
type=explod
trigger1=!time
anim=7610
ID=7610
sprpriority=-5
postype=left
pos=160,120
scale=.5,.5
bindtime=-1

[State 7610, shrink]
type=modifyexplod
trigger1=time<6
ID=7610
scale=(5.5-time),(5.5-time)

[State 7610, shrink]
type=modifyexplod
trigger1=time>=6
ID=7610
scale=.5,.5

[State 7610, flamebg]
type=explod
trigger1=!time
anim=7611
ID=7611
sprpriority=5
postype=left
pos=0,0
bindtime=-1
removetime=-1
pausemovetime=300
supermovetime=300

;[State 9999, PlaySnd]
;type = PlaySnd
;triggerall = roundstate = 4
;trigger1 = root,stateno = 362
;trigger2 = root,stateno = [382,383]
;value = s9999,0
;ignorehitpause = 1
;volume = 255
;persistent = 0
;abspan = 1

[State 7610, assert]
type=assertspecial
trigger1=1
flag=invisible
flag2=nobardisplay
ignorehitpause=1

[State 7610, assert]
type=assertspecial
trigger1=time<120
flag=noFG
ignorehitpause=1

[State 7610, safety]
type=removeexplod
trigger1=time>=180

[State 7610, end]
type=destroyself
trigger1=time>=180
;========================<CAMERA CONTROL>=============================
[Statedef 7650]
physics=N
velset=0,0
anim=9741
[State 7650, bound]
type=screenbound
trigger1= 1
value=0
movecamera=1,1
[State 7650, end]
type=destroyself
trigger1= roundstate=2

;------------------------------------
[StateDef 9741]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9741, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9741, PauseCheck]
type = VarSet
trigger1 = (GameTime>(Parent,var(59)))
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)
trigger4 = Parent,var(59)
trigger5 = (var(3):=0)
var(2) = (var(3):=1)+(var(4):=0)

[State 9741, Facing]
type = Turn
trigger1 = (var(9):=(Facing != Parent,Facing))

[State 9741, DirTurnOnAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = !var(9)
trigger1 = (Parent,command = "holdfwd")
trigger2 = (Parent,command = "holdback")
trigger3 = (Parent,command = "holdup")
trigger4 = (Parent,command = "holddown")
trigger5 = !(var(4):=1)
var(59) = var(4)

[State 9741, DirTurnOffAI]
type = ParentVarSet
triggerall = !var(3)
triggerall = Parent,var(59)
trigger1 = (command = "holdfwd")
trigger1 = (Parent,command = "holdfwd")
trigger2 = (command = "holdback")
trigger2 = (Parent,command = "holdback")
trigger3 = (command = "holdup")
trigger3 = (Parent,command = "holdup")
trigger4 = (command = "holddown")
trigger4 = (Parent,command = "holddown")
var(59) = (var(4):=0)

[State 9741, ButtonTurnOnAI]
type = ParentVarSet
triggerall = var(1)
triggerall = !var(2)
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
var(59) = 1

[State 9741, ButtonTurnOffAI]
type = ParentVarSet
triggerall = !var(2)
trigger1 = (command = "a")
trigger1 = (Parent,command = "a")
trigger2 = (command = "b")
trigger2 = (Parent,command = "b")
trigger3 = (command = "c")
trigger3 = (Parent,command = "c")
trigger4 = (command = "x")
trigger4 = (Parent,command = "x")
trigger5 = (command = "y")
trigger5 = (Parent,command = "y")
trigger6 = (command = "z")
trigger6 = (Parent,command = "z")
trigger7 = (command = "start")
trigger7 = (Parent,command = "start")
var(59) = -1

[State 9741, UnPauseCheck]
type = VarSet
triggerall = var(2)
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
trigger8 = (var(2) = 2)
trigger8 = (var(2):=0)
var(2) = 2

[State 9741, Goodbye]
type = DestroySelf
triggerall = (var(1):=1)
trigger1 = Parent,var(59)
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)


;------------------
; AI Activation Helper State - Compatibly Partnered Version
;
; var(1) - First tick dir activation prevention
; var(2) - Used for pause/superpause and custom state check, basically.
; var(3) - (Super/)Pause & custom state-triggered dir detection disabler.
; var(4) - Hitpause check.
; var(5) - No button on previous tick.
; var(6) - Any dir on this tick.
; var(7) - Any button on this tick.
; var(8) - Matching partner button detected.
; var(9) - AutoTurn bug fixer.
; parent's var(57) - Parent's GameTime var, for pause and custom state check.
; parent's var(59) - Parent's primary AI variable.
;
; The code in this state is mostly simply copy/pasteable.
; But if you're using different indices for the parent's variables,
; or if you change your character's basic commands' names, you'll
; of course need to change the code in this state accordingly.

[StateDef 9742]
type = S
movetype = I
physics = N
anim = 9741
ctrl = 0

[State 9742, Safety]; Just in case your opponent is very poorly coded.
type = SelfState
trigger1 = !IsHelper
value = 0

[State 9742, PauseCheck]
type = VarSet
trigger1 = (GameTime>Parent,var(57))
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)
trigger4 = Parent,var(59)
trigger5 = (var(3):=0)
var(2) = (var(3):=1)

[State 9742, Facing]
type = Turn
trigger1 = (var(9):=(Facing != Parent,Facing))

[State 9742, ParentDirCheck]
type = VarSet
trigger1 = (Parent,command = "holdfwd")
trigger2 = (Parent,command = "holdback")
trigger3 = (Parent,command = "holdup")
trigger4 = (Parent,command = "holddown")
trigger5 = (var(6):=0)
var(6) = 1

[State 9742, ParentButtonCheck]
type = VarSet
trigger1 = (Parent,command = "a")
trigger2 = (Parent,command = "b")
trigger3 = (Parent,command = "c")
trigger4 = (Parent,command = "x")
trigger5 = (Parent,command = "y")
trigger6 = (Parent,command = "z")
trigger7 = (Parent,command = "start")
trigger8 = (var(7):=0)
var(7) = 1

[State 9742, SameButtonCheck]
type = VarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = NumPartner
trigger1 = (Parent,command = "a")
trigger1 = (Partner,command = "a")
trigger2 = (Parent,command = "b")
trigger2 = (Partner,command = "b")
trigger3 = (Parent,command = "c")
trigger3 = (Partner,command = "c")
trigger4 = (Parent,command = "x")
trigger4 = (Partner,command = "x")
trigger5 = (Parent,command = "y")
trigger5 = (Partner,command = "y")
trigger6 = (Parent,command = "z")
trigger6 = (Partner,command = "z")
trigger7 = (Parent,command = "start")
trigger7 = (Partner,command = "start")
trigger8 = (var(15):=0)
var(15) = 1

[State 9742, DirTurnOnAI]
type = ParentVarSet
trigger1 = var(1)
trigger1 = var(6)
trigger1 = !var(3)
trigger1 = !var(4)
trigger1 = !var(16)
var(59) = 1

[State 9742, DirTurnOffAI]
type = ParentVarSet
triggerall = var(6)
triggerall = !var(3)
triggerall = Parent,var(59)
trigger1 = (command = "holdfwd")
trigger1 = (Parent,command = "holdfwd")
trigger2 = (command = "holdback")
trigger2 = (Parent,command = "holdback")
trigger3 = (command = "holdup")
trigger3 = (Parent,command = "holdup")
trigger4 = (command = "holddown")
trigger4 = (Parent,command = "holddown")
var(59) = 0

[State 9742, ButtonTurnOnAI]
type = ParentVarSet
trigger1 = var(5)
trigger1 = var(7)
trigger1 = !var(2)
trigger1 = !var(15)
var(59) = 1

[State 9742, ButtonTurnOffAI]
type = ParentVarSet
triggerall = var(7)
triggerall = !var(2)
triggerall = !var(15)
trigger1 = (command = "a")
trigger1 = (Parent,command = "a")
trigger2 = (command = "b")
trigger2 = (Parent,command = "b")
trigger3 = (command = "c")
trigger3 = (Parent,command = "c")
trigger4 = (command = "x")
trigger4 = (Parent,command = "x")
trigger5 = (command = "y")
trigger5 = (Parent,command = "y")
trigger6 = (command = "z")
trigger6 = (Parent,command = "z")
trigger7 = (command = "start")
trigger7 = (Parent,command = "start")
var(59) = -1

[State 9742, UnPauseCheck]
type = VarSet
triggerall = var(2)
triggerall = !var(4)
trigger1 = var(7)
trigger2 = (var(2) = 2)
trigger2 = (var(2):=0)
var(2) = 2

[State 9742, Goodbye]
type = DestroySelf
trigger1 = Parent,var(59)
trigger2 = !(Parent,Alive)
trigger3 = (RoundState != 2)

[State 9742, HitPauseCheck]
type = VarSet
trigger1 = var(6)
trigger2 = var(7)
trigger3 = !(Parent,HitPauseTime)
var(4) = Parent,HitPauseTime

[State 9742, Delay]
type = VarSet
trigger1 = (var(1):=1)
var(5) = !var(7)

;---------------------------
[statedef 60120]
type    = a
movetype= I
physics = N
ctrl = 0
anim = 9999

[state 250,11]
type = explod
trigger1 = p2stateno = 328
persistent = 0
anim = 8010
scale = 0.81,0.81
pos = 0,-5
postype = p2
sprpriority = 5
velocity = 0, 0
bindtime = 1
ownpal = 1

[state 250,13]
type = envshake
trigger1 = p2stateno = 328
persistent = 0
time = 15
freq = 70
ampl = -4

[state 250,15]
type = playsnd
trigger1 = p2stateno = 328
persistent = 0
value = 0,7

[state 250,15]
type = destroyself
trigger1 = p2stateno != 328

; ===================== (Advanced Guard) =======================
; Advanced Guard Helper
[Statedef 8060]
type = A
physics = N
anim = 8061
velset = -14,0
ctrl = 0

[State 8060, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 8060, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 8060, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 8060, DestroySelf]
type = DestroySelf
trigger1 = time = 16;24

; ===================== (Landing Effect) =======================
; Landing Effect
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

; ===================== (Hyper BG and Hyper Portait) =======================
; Hyper BG and Hyper Portait
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
volume = 200
volumescale = 200
value = 1,0

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(47) = 1 && !numexplod(8505) && stateno = 9100
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(47) = 0 || root,var(47) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
triggerall = stateno != [3101,3198]
triggerall = stateno != 9100
trigger1 = root,var(47) = 0
trigger2 = root,movetype = H

; ===================== (Hyper Combo Finish) =======================
; Hyper Combo Finish
[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,21

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,20

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)


; ===================== (Hit Recovery Fall) =======================
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,11,-9)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

; ===================== (P2 Recovery State) =======================
; P2 Recovery State - phase one
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)
 
; P2 Recovery State - phase two
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)
 
; P2 Recovery State - phase three
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5040

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6


[State 9910, PosSet]
type = PosSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -5

[State 1300, 6]
type = PalFX
triggerall = name = "Dhalsim"
trigger1 = animelem = 1
time = 18
sinadd =  255,255,255,43
ignorehitpause = 0

[State 5100, 10]
type = PlaySnd
triggerall = name = "Dhalsim"
trigger1 = Time = 1
value = S3,0

[State 9910, VelSet]
type = VelSet
triggerall = name = "Dhalsim"
trigger1 = time >= 0
trigger1 = time <= 1
y = -4
x = 0

[State 9910, VelAdd]
type = VelAdd
triggerall = name = "Dhalsim"
trigger1 = time = 1
y = 0

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .82;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52


;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[StateDef -2]

; ===================== (Pre-walking) =======================

[State -2, Pre-walking state]
type = ChangeState
;triggerall = !var(59)
trigger1 = prevstateno = [191,192]
trigger2 = RoundNo != 1              ;Enable If Round Number is > 1
trigger2 = RoundState = 1           ;RoundState < 2 and
trigger2 = RoundState = 2
trigger2 = stateno = 0              ;Current state is 0
value = 21
ctrl = 0

[State -2, Remember the last Position (X)]
type = VarSet
triggerall = RoundState < 2
trigger1 = stateno = [0, 21] ;Enable after Intro
fvar(5) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(5) != 0
trigger1 = prevstateno != [191,192]
x = fvar(5)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(5) = 0

; ===================== (Recovery p2 effect and sound) =======================

[State 0, PlaySnd]
type = PlaySnd
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,10
channel = 4
volume = 155
volumescale = 155

[State 0, PlaySnd]
type = PlaySnd
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
value = 0,7
channel = 4
volume = 155
volumescale = 155

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 20, 2]
type = envshake
triggerall = name = "Sentinel"
triggerall = name = "Hulk"
triggerall = name = "Juggernaut"
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
time = 8
freq = 80
ampl = 3

; ===================== (p1 & p2 icon) =======================

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(33) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(33) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(33)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, O\]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(33) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(33) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(33)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 240-const(size.head.pos.y)
id = 8596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy
var(33) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8596)
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(33)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8598)
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(33)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(35) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(35) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(35)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(35) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(35) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(35)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 240-enemy,const(size.head.pos.y)
id = 18596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy = 1
var(35) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(35)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(35)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

  
; I 
[State -2, I]
type = AssertSpecial
trigger1 = roundstate > 2
flag = nowalk
 
; ~ 
[State -2, ~]
type = Width
trigger1 = vel x > 0 && movetype != H
edge = 5,5



; ===================== (Finish Round Helper) =======================

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090

[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998


; ===================== (Advanced Guard) =======================
[State -2, AhoVOK[h]
type = Helper
trigger1 = var(48)
stateno = 8060
postype = p2
pos = 20,0
id = 8060

[State -2, AhoVOK[h]
type = PosFreeze
trigger1 = numhelper(8060)

[State -2, AhoVOK[h]
type = VelAdd
trigger1 = numhelper(8060)
trigger1 = statetype = A
y = -gethitvar(yaccel)

[State -2, AhoVOK[h]
type = Explod
trigger1 = var(48)
anim = 8060
pos = 47,-85
ontop = 1
scale = 0.4, 0.4

[State -2, AhoVOK[h]
type = VarSet
trigger1 = var(48)
var(48) = 0


; ===================== (Air Combo Code) =======================

[State 650, GA~b^[A]
type = PlaySnd
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
value = 0,11
persistent = 0
channel = 11

[State 620, GA~b^[A]
type = VarSet
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
var(36) = 2

[State -2, GA~b^[A]
type = VarSet
trigger1 = !numtarget
var(36) = 0

[State -2, GA~b^[A]
type = VarSet
trigger1 = var(36)= 2 && ctrl && statetype != A
var(36) = 1

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = var(36) = 2
trigger1 = pos x*facing < 50
value = 0
movecamera = 0,0
ignorehitpause = 1

[State -2, GA~b^[A]
type = ChangeState
triggerall = var(36) = 2
trigger1 = backedgebodydist < -5 && stateno != 100 && stateno != [701,702]
value = 701

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = stateno = 100 && prevstateno = 701
value = 0
movecamera = 0,0

[State -2, GA~b^[A]
type = NotHitBy
trigger1 = stateno = 100 && prevstateno = 701
value = SCA
 
; wp[A 
[State -2, wp[A]
type = VarSet
trigger1 = !numhelper
var(34) = 0
 
[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(12) = 0

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(17) = 0

; ===================== (Stop sounds & Remove explods) =======================

[State 23080, StopSnd]
type = StopSnd
trigger1 = StateNo != 9000
trigger1 = StateNo != 620
channel = 9

[State -2, A-Dash-CLR]
type = VarSet
triggerall = var(53)
trigger1 = stateno = 52
trigger2 = stateno = 0
trigger3 = stateno = 1305
var(53) = 0

[State 23080, StopSnd]
type = StopSnd
trigger1 = anim = 5051
channel = 15
ignorehitpause = 1
persistent = 0

[State -2, VarSet]
type = VarSet
trigger1 = movetype = H
trigger2 = roundstate != 2
trigger3 = statetype != A
var(19) = 0

[State -2, VarAdd]
type = VarAdd
trigger1 = var(19)
var(19) = -1

[State -2, PosFreeze]
type = PosFreeze
trigger1 = var(19)
trigger1 = stateno = [600,660)

; ===================== (p2Recovery states) =======================

[State -2, ^[Qbg]
type = VarSet
trigger1 = 1
var(11) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget
var(11) = target,id
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = !numtarget
var(13) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget && hitpausetime
var(13) = target,stateno = 5080
ignorehitpause = 1

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(11)) && !var(13)
trigger1 = playerID(var(11)),gethitvar(chainid) & 1
trigger1 = playerID(var(11)),stateno != [120,155]
trigger1 = playerID(var(11)),hitover && playerID(var(11)),alive && playerID(var(11)),hitshakeover
trigger1 = playerID(var(11)),statetype = A && playerID(var(11)),stateno != 9900
value = 9900

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(11)) && var(13)
trigger1 = playerID(var(11)),alive && playerID(var(11)),hitshakeover
trigger1 = playerID(var(11)),pos y >= 0 && playerID(var(11)),vel y > 0
trigger1 = playerID(var(11)),statetype = A && playerID(var(11)),stateno != 5201 && playerID(var(11)),stateno != 9910
value = 9901

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(11))
trigger1 = playerID(var(11)),gethitvar(chainid) & 2
trigger1 = playerID(var(11)),stateno != [120,155]
trigger1 = playerID(var(11)),alive && playerID(var(11)),hitshakeover
trigger1 = playerID(var(11)),pos y >= 0 && playerID(var(11)),vel y > 0
trigger1 = playerID(var(11)),statetype = A && playerID(var(11)),stateno != 9910
value = 9910

; ===================== (Metal Hit Code) =======================

[state -2, metal]
type = varset
trigger1 = enemynear, name = "War Machine"
trigger2 = enemynear, name = "Iron Man"
trigger3 = enemynear, name = "Sentinel"
trigger4 = enemynear, name = "Doctor Doom"
trigger5 = enemynear, name = "Tron Bonne"
var(49) =10

[state -2, metal]
type = varset
trigger1 = enemynear, name = "War Machine"
trigger1 = enemynear, name = "Iron Man"
trigger1 = enemynear, name = "Sentinel"
trigger1 = enemynear, name = "Doctor Doom"
trigger1 = enemynear, name = "Tron Bonne"
var(49) =0 

[state -2, metal]
type = varset
triggerall = enemynear, Name = "Mecha Zangief"
trigger1 = enemynear, var(50)=1
var(49) =10

[state -2, metal]
type = varset
triggerall = enemynear, Name = "Mecha Zangief"
trigger1 = enemynear, var(50)=0
var(49) =0

; ===================== (Wall hit) =======================

[state 5100,2]
type = explod
triggerall = var(42)
triggerall = enemy,stateno != [120,159]
trigger1 = numtarget
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
scale = 0.95,0.95
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
triggerall = var(42)
triggerall = numenemy
triggerall = enemy,stateno != [120,159]
triggerall = numtarget
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,9

[state 200, 3]
type = varset
triggerall = var(42)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 15
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 42
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 24
value = var(23)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 23
value = hitcount

;***************
[state -3, 2];combo
type = varset
trigger1 = var(23)>var(24)
v = 42
value = 1

[state 250,11]
type = helper
trigger1 = p2stateno = 328
trigger1 = !numhelper(60120)
persistent = 0
stateno = 60120
ID = 60120
bindtime = 1
postype = p2
pos = 0,500 

; **IMPORTANT NOTE**
; YOU WON'T HAVE TO WORRY FOR THE AI ACTIVATION OR VARIABLE.
; IT IS ALREADY CODED HERE, ALL YOU HAVE TO DO, IS MAKE AI CODES
; IN THE COMMAND FILE

[State 0, PosSet]
type = PosSet
trigger1 = prevstateno = 100
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = prevstateno = 105
y = 0

;==================================================================================
;======| RELACIONADO  AI - AI RELATED |===========================================
;==================================================================================

; Within StateDef -2, none of your own AI-related code should be placed
; above these next two controllers.

[State -2, StopAI]
type = VarSet
triggerall = (var(59) > 0)
trigger1 = (RoundState != 2)
trigger2 = !Alive
var(59) = -2
IgnoreHitPause = 1

; This controller is optional.  It allows you treat the AI flag as a boolean
; value rather than an integer value, letting you trigger your AI directives
; with "var(0)" instead of "var(59)>0", and letting you make moves usable only
; by humans by using "!var(0)" instead of "var(59)<1", thus slightly improving
; the size and efficiency of your code.
; Another benefit is that it makes it much easier for users to disable your AI,
; if they so choose.
[State -2, Simplifier]
type = VarSet
trigger1 = (var(59) = 1)
trigger2 = (var(0):=0)
var(0) = 1	; Another option is to replace 1 with something like MatchNo, if
		; you want to design your AI to have varying levels of difficulty.
IgnoreHitPause = 1

[State -2, varKOsnd]
type=varset
trigger1=alive&&var(18)>0
trigger2=!alive&&var(18)<2
var(18)=ifelse(alive,0,var(8)+1)
ignorehitpause=1

; ===================== (System Messages) =======================

[State -2, VS_Combo]
type = VarSet
triggerall = (var(29)!=10) || (var(29)=10 && movehit && statetype != A)
trigger1 = var(28) >= 3
trigger2 = var(28)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = [5000,5899])
var(29) = 1+(var(28)>4)+(var(28)>5)+(var(28)>7)+(var(28)>9)+(var(28)>29)+(var(28)>49)+(var(28)>69)-(var(28)=-1)
ignorehitpause = 1

[State -2, Air Combo]
type = VarSet
triggerall = var(28) >= 3 && statetype = A && var(29)!=10 && var(36)
trigger1 = (movehit)
var(29) = 10
ignorehitpause = 1

[State -2, Danger]
type = VarSet
trigger1 = var(30) !=1 && roundstate=2 && life = [1,250]
var(29) = 9
ignorehitpause = 1

; sound First attack
[State -2, First Attack]
type = PlaySnd
triggerall = var(28)=-1
triggerall = NumExplod(8701) = 0
trigger1 = var(28)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
persistent = 0
value = 2,0
channel = 14
volume=255
ignorehitpause = 1

; Telop sound
[State -2, Combo Sound]
type = PlaySnd
trigger1 = NumExplod(8701) = 0
trigger1 = var(28)=0 && var(29)!=0
persistent = 0;1
value = 2,var(29)
channel = 14
volume=255
ignorehitpause = 1

[State -2, Left]
type = explod
trigger1 = var(28)=0 && var(29)!=0
trigger2 = var(28)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
triggerall = TeamSide = 1 && NumExplod(8701) = 0
anim = (8550 + var(29))
ID = 8701
postype = left
pos = 3,80
ontop = 1
bindtime = -1
removetime = 60
ownpal = 1
supermovetime = 60
pausemovetime = 60
scale = 0.5,0.5
persistent = 0
ignorehitpause = 1

[State -2, Right]
type = explod
trigger1 = var(28)=0 && var(29)!=0
trigger2 = var(28)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 ||p2movetype = H);p2stateno = [5000,5899])
triggerall = TeamSide = 2 && NumExplod(8701) = 0
anim = (8650+ var(29));8011;8720;
ID = 8701
postype = right
pos = -10,80;130;82
ontop = 1
bindtime = -1
removetime = 60;90
ownpal = 1
supermovetime = 60;90
pausemovetime = 60;90
scale = 0.5,0.5
persistent = 0;1
ignorehitpause = 1

[State -2, VS_Combo]
type = VarAdd
trigger1 = enemynear, time = 0
trigger1 = enemynear, Hitshakeover = 0
trigger1 = (p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899]
trigger2 = var(28)=-1 && (movehit || p2movetype = H && p2stateno != [120,159]);p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
var(28) = 1 + (var(28)=-1)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
trigger1 = var(28)!=-1 && (p2movetype!=H || enemynear, ctrl)
trigger2 = var(28)=-1 && movetype = H;p2stateno = [5000,5899])
var(28) = 0 - (roundstate<2)
ignorehitpause = 1

[State -2, VS_Combo]
type = VarSet
triggerall = numexplod(8701)!=0
trigger1 = var(28)=0
var(29) = 0
ignorehitpause = 1

[State -2, Score]
type = Varadd
trigger1 = enemynear, time=0
trigger1 = enemynear, Hitshakeover=0
trigger1 = moveguarded || p2stateno = 6300 || p2movetype = H;p2stateno = [5000,5899])
trigger2 = var(28)=-1 && (movehit || p2stateno = 6300 || p2movetype = H);p2stateno = [5000,5899])
trigger3 = roundstate=4 && time=0 && stateno = [180,189]
var(21) = ceil(stateno/50)*var(28) + (life)*(roundstate=4) + (moveguarded)
ignorehitpause = 1

[State -2, Normalize Score]
type = Varset
triggerall = numpartner=1
trigger1 = var(21)< partner, var(21)
var(21) = partner, var(21)

[State -2, Is Danger]
type = VarSet
trigger2 = var(30) = 0 && life <= 250
trigger1 = var(30) = 1 && roundstate!=2
var(30) = (roundstate>1)
ignorehitpause = 1

[State -2, Is First Attack p3]
type = VarSet
triggerall = numpartner=1
trigger1 = partner, movehit
trigger1 = partner, var(28) != -1
var(28) = 0
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = nomusic

; ===================== (-2) =======================

[State -2, Clipboard]
type = DisplayToClipboard
trigger1 = 1
text = "damage = %f || p2bdX = %f || p2bdY = %f || var(20)=%d"
params = fVar(10), p2bodydist X, p2bodydist Y, Var(20)

[State -2, Reset var]
type=varset
trigger1= statetype != A
trigger1= stateno != [100,109]
var(20)=0
ignorehitpause=1

[State -2, Reset var]
type=varset
trigger1= statetype != A
trigger2=var(2)>=500
trigger3=roundstate!=2
var(19)=0
ignorehitpause=1
[State -2, Reset var]
type=varset
trigger1= statetype != A
trigger1= var(2)>0
var(2)=0
ignorehitpause=1
[State -2, Timer]
type=varadd
trigger1= var(19)=1
var(2)= 1
ignorehitpause=1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(19)=1
trigger2 = stateno=[1300,1309]
trigger3 = stateno=[650,659]
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State -2, Damage based on hits]
type=varset
trigger1= numenemy
fvar(12)=enemynear,gethitvar(hitcount)
ignorehitpause=1

[State -2, Reset var when the opponent recovers]
type=varset
trigger1= numenemy
trigger1= (enemynear,movetype!=H)
trigger2= !numenemy
fvar(12)=1

[State -2, Dampener]
type=varset
trigger1=stateno!= [3000,3999]
fvar(10)= ifelse(fvar(12)=0, 1, ifelse(fvar(12)=1, 1, .85**fvar(12)))
ignorehitpause=1

[State -2, Dampener]
type=varset
trigger1=stateno = [3000,3999]
fvar(10)= ifelse(fvar(12)=0, 1, ifelse(fvar(12)=1, 1, .95**fvar(12)))
ignorehitpause=1

[State -2, Dampener itself]
type=attackmulset
trigger1= 1
value=fvar(10)
ignorehitpause=1

;==================================================================================
;==================================================================================
;==================================================================================


;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != [1100,1155]
id = 1190
;ignorehitpause =
;persistent =

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != [1100,1155]
id = 1192
;ignorehitpause =
;persistent =

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != [3100,3199]
id = 3190
;ignorehitpause =
;persistent =

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != [3100,3199]
id = 3191
;ignorehitpause =
;persistent =

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != [3400,3499]
id = 3480
;ignorehitpause =
;persistent =


;==================================================================================
;======| RELACIONADO  AI - AI RELATED |===========================================
;==================================================================================


; Kamek and Luchini appear to have been the first ones to use the IsHomeTeam AI activation concept.
; Feel free to move this controller to your character's intro state for slightly better efficiency.
[State -3, SetAI]
type = VarSet
triggerall = !RoundState
triggerall = IsHomeTeam
trigger1 = (TeamSide = 2)
trigger2 = (MatchNo > 1)
var(59) = 1

; Feel free to move this controller to your character's intro state for slightly better efficiency.
; Note that it may give P2 a slight unfair advantage in simul team vs mode, so you
; may want to disable it.  But then, since when has Mugen been about fairness? =P
[State -3, Unfair]; Is this reliable?
type = VarSet
trigger1 = !RoundState
trigger1 = (var(59) != 1)
trigger1 = NumPartner
trigger1 = (ID > Partner,ID)
trigger1 = (TeamSide = 2)
var(59) = 1

[State -3, AI Helper (Compatibly Partnered Version)]
type = Helper
trigger1 = !var(59)
trigger1 = !NumHelper(9742)
trigger1 = (RoundState = 2)
trigger1 = Alive
trigger1 = NumPartner
trigger1 = Partner,SelfAnimExist(9741)
HelperType = normal
name = "AI Helper (Simul Version)"
ID = 9742
pos = 9999999,99999
StateNo = 9742
KeyCtrl = 1
PauseMoveTime = 999999999
SuperMoveTime = 999999999

; If you want to use the Guard mode, Dummy mode, Distance, or Button jam dummy control
; options in Training mode without activating the dummy's AI while working on your
; character, then all you need to do is temporarily disable this controller.
; Or, if you want to permanently disable this controller in Training mode,
; then you could use the Training mode detection code available on my site
; ( http://www.shinmugen.net/winane/ ), and then just add a "(var(59)&63)>30"
; triggerall to this controller.
[State -3, AI Helper]
type = Helper
triggerall = !var(59)
triggerall = !NumHelper(9741)
triggerall = (RoundState = 2)
triggerall = Alive
trigger1 = !NumPartner
trigger2 = !(Partner,SelfAnimExist(9741))
HelperType = normal
name = "AI Helper"
ID = 9741
pos = 9999999,99999
StateNo = 9741
KeyCtrl = 1
PauseMoveTime = 999999999
SuperMoveTime = 999999999

[State -3, TurnBackOnAI]
type = VarSet
trigger1 = (var(59) = -2)
trigger1 = (RoundState = 2)
trigger1 = Alive
var(59) = 1

[State -3, HitPauseTime Helper]
type = Helper
triggerall = var(59)!=1
triggerall = !NumHelper(9743)
triggerall = (RoundState = 2)
triggerall = Alive
trigger1 = (MatchNo = 1)
trigger2 = NumPartner
trigger2 = (ID > Partner,ID)
HelperType = normal
name = "HitPauseTime"
ID = 9743
pos = 9999999,99999
StateNo = 9743
PauseMoveTime = 999999999
SuperMoveTime = 999999999

; According to Roque, this method works in Linux Mugen version 2002.04.14,
; whereas the old humanly-impossible commands method does not.
; It is very important that this controller NOT be moved to State -2.
; Note that this part won't work if AI.Cheat is turned off in mugen.cfg.
;[State -3, XOR]
;type = VarSet
;triggerall = var(59)!=1
;triggerall = (var(57) = GameTime-1)
;triggerall = NumHelper(9743)
;triggerall = !(Helper(9743),var(1))
;trigger1 = (command = "a") ^^ (command = "a2")
;trigger2 = (command = "b") ^^ (command = "b2")
;trigger3 = (command = "c") ^^ (command = "c2")
;trigger4 = (command = "x") ^^ (command = "x2")
;trigger5 = (command = "y") ^^ (command = "y2")
;trigger6 = (command = "z") ^^ (command = "z2")
;trigger7 = (command = "start") ^^ (command = "start2")
;trigger8 = (command = "holda") ^^ (command = "holda2")
;trigger9 = (command = "holdb") ^^ (command = "holdb2")
;trigger10 = (command = "holdc") ^^ (command = "holdc2")
;trigger11 = (command = "holdx") ^^ (command = "holdx2")
;trigger12 = (command = "holdy") ^^ (command = "holdy2")
;trigger13 = (command = "holdz") ^^ (command = "holdz2")
;trigger14 = (command = "holdstart") ^^ (command = "holdstart2")
;trigger15 = (command = "holdfwd") ^^ (command = "holdfwd2")
;trigger16 = (command = "holdback") ^^ (command = "holdback2")
;trigger17 = (command = "holdup") ^^ (command = "holdup2")
;trigger18 = (command = "holddown") ^^ (command = "holddown2")
;trigger19 = (command = "recovery") ^^ (command = "recovery2")
;Add more as desired. (See my notes in the CMD.)
;var(59) = 1

; It is very important that this controller NOT be moved to State -2, as putting
; it there would defeat the entire purpose of the controller, allowing the
; helper method or the XOR method to erroneously set the AI variable.
; And within State -3, don't put any ChangeState controllers before this
; controller, lest you unnecessarily delay your character's AI activation.
[State -3, GameTimeVar]
type = VarSet
trigger1 = 1
var(57) = GameTime
IgnoreHitPause = 1

; Within StateDef -3, none of your own AI-related code should come after the code
; provided here (and putting it before the code is also generally a bad idea).
; It's better to use State -1 (or, in special circumstances, State -2) instead.

;==================================================================================
;==================================================================================
;==================================================================================

[State -3, StopSnd]
type = StopSnd
trigger1 = movetype = H
trigger2 = stateno != [3000,3999]
channel = 15
ignorehitpause = 1

[State -3, AfterImageTime]
type = AfterImageTime
trigger1 = numhelper(7005)=1
time = 0
ignorehitpause = 1
;persistent =  0

; ============= (Character HitSound) =============

[State 1120, _[W{CX]
type = PlaySnd
triggerall = alive && movetype = H
triggerall = random % 10 < 5
trigger1 = stateno = 5000 && time = 1
trigger2 = stateno = 5010 && time = 1
trigger3 = stateno = 5020 && time = 1
trigger4 = stateno = 5070 && time = 1
trigger5 = stateno = 5080 && time = 1
value = s5000,random%2
channel = 2
volume = 200
volumescale = 200

[State 0, StopSnd]
type = StopSnd
trigger1 =  !alive
channel =2
;ignorehitpau



