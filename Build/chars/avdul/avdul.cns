;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 10000  ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 255    ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 59     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める
FloatPersistIndex = 39     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める

[Size]
xscale           = .833    ;キャラの横の大きさ（絶対値・float）
yscale           = 1.07    ;キャラの縦の大きさ（絶対値・float）
ground.back      = 18      ;地上にいる時の「後方の物理的な幅」
ground.front     = 18      ;地上にいる時の「前方の物理的な幅」
air.back         = 18      ;空中にいる時の「後方の物理的な幅」
air.front        = 18      ;空中にいる時の「前方の物理的な幅」
height           = 65      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 1       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = -5,-95  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -2,-64  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 3.0         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.4        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 6.2,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -6,0      ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-10.7     ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -2.3        ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 2.5         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -2.8,-11.6  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 3.5,-11.6   ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-6        ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.9        ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.9         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .6       ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; State
;===========================================================================
:Time Up - Lose
[Statedef 170]
type = S
movetype = I
physics = S
ctrl = 0
anim = ifelse(var(0),10000,170)
velset = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = time < 120
flag = RoundNotOver

;---------------------------------------------------------------------------
;Time Up - Draw
[Statedef 175]
type = S
movetype = I
physics = S
ctrl = 0
anim = ifelse(var(0),10000,170)
velset = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = time < 120
flag = RoundNotOver

;---------------------------------------------------------------------------
;Win
[Statedef 180]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = (var(0)>0)*3

[State 0, assert]
type = assertspecial
trigger1 = time < 240
flag = RoundNotOver

[State 0, anim]
type = changeanim
;trigger1 = !var(0)
trigger1 = !time
value = 180+var(0)

[State 0, explod]
type = explod
trigger1 = anim = 10180
trigger1 = animelem = 2
anim = 6060
id = 6060
postype = p1
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, snd]
type = playsnd
trigger1 = !var(0)
trigger1 = animelem = 2
value = 100,21
channel = 0

[State 0, snd]
type = playsnd
trigger1 = !var(0)
trigger1 = animelem = 21
value = 100,17
channel = 0

[state 0, helper]
type = helper
trigger1 = !fvar(11) || !numpartner
trigger1 = time = 1
trigger2 = fvar(11) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;===========================================================================
;Intro
[Statedef 190]
type = S
movetype = I
physics = S
anim = 0
ctrl = 0
velset = 0,0

[State 0, power]
type = powerset
trigger1 = roundsexisted = 0
trigger1 = !time
trigger1 = power < 1000
value = 1000

[State 0, end]
type = null;changestate
trigger1 = p2name = "iggy" && enemynear,authorname = "Gal129"
value = 192

[State 0, end]
type = changestate
trigger1 = p2name = "dio"
trigger2 = p2name = "final dio"
trigger3 = p2name = "DIO BRANDO"
trigger4 = p2name = "shadow dio"
trigger5 = p2name = "Shadow Dio"
value = 194

[State 0, end]
type = null;changestate
triggerall = teamside = 1
trigger1 = (P2Name = "Avdul" || P4Name = "Avdul") && EnemyNear,AuthorName = "Nimame"
value = 191

[State -2, 3]
type = null;ChangeState
triggerall = teamside = 2
trigger1 = (P2Name = "Avdul" || P4Name = "Avdul") && EnemyNear,AuthorName = "Nimame"
value = 191;+(P2stateno=191)

[State 0, end]
type = changestate
trigger1 = 1
value = 191; + (random%3)

;---------------------------------------------------------------------------
;Intro1
[Statedef 191]
type = S
physics = S
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Intro

[State 0, var]
type = varrandom
trigger1 = !time
v = 12
range = 0,3

[State 0, anim]
type = changeanim
triggerall = time > 0
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger1 = enemy,time >= 16
trigger2 = time > 240
trigger3 = roundsexisted = 0
trigger3 = roundno > 1
trigger4 = p2name = "jotaro" && enemy,authorname = "y.y" && p2stateno = 160
trigger5 = p2name = "joseph" && enemy,authorname = "y.y" && p2stateno = 160
trigger6 = p2name = "Hol horse" && enemy,authorname = "y.y" && p2stateno = 160
trigger8 = p2name = "Jotaro Kujo" && enemy,authorname = "warusaki3" && p2stateno = 192
value = 190
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = var(12) = 0
trigger1 = anim = 190 && animelem = 2
value = 100,8
channel = 0

[State 0, snd]
type = playsnd
trigger1 = var(12) = 1
trigger1 = anim = 190 && animelem = 2
value = 100,19
channel = 0

[State 0, snd]
type = playsnd
trigger1 = var(12) = 2
trigger1 = anim = 190 && animelem = 2
value = 100,20
channel = 0

[State 0, snd]
type = playsnd
trigger1 = var(12) = 3
trigger1 = anim = 190 && animelem = 2
value = 100,22
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 190
trigger1 = animelem = 4
value = 1,12

[State 0, explod]
type = explod
trigger1 = anim = 190
trigger1 = animelem = 4
anim = 6061
id = 6061
postype = p1
pos = ceil(-6*const(size.xscale)),ceil(25*const(size.yscale))
bindtime = -1
scale = const(size.xscale)*.9,const(size.yscale)*.9
sprpriority = -2
ownpal = 1

[State 0, end]
type = changestate
trigger1 = anim = 190 && !animtime
value = 0

;---------------------------------------------------------------------------
;vs DIO Intro
[Statedef 194]
type = S
physics = S
velset = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Intro

[State 0, anim]
type = changeanim
triggerall = time > 0
trigger1 = p2stateno = 0 || enemy,anim = 0
trigger1 = enemy,time >= 8
trigger2 = time > 400
trigger3 = p2name = "dio" && p2stateno = 192
trigger4 = p2name = "final dio" && p2stateno = 192
trigger5 = p2name = "shadow dio" && p2stateno = 192
trigger6 = p2name = "Shadow Dio" && p2stateno = 190
value = 190
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 190
trigger1 = animelem = 2
value = 100,23
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 190
trigger1 = animelem = 4
value = 1,12

[State 0, explod]
type = explod
trigger1 = anim = 190
trigger1 = animelem = 4
anim = 6061
id = 6061
postype = p1
pos = ceil(-6*const(size.xscale)),ceil(25*const(size.yscale))
bindtime = -1
scale = const(size.xscale)*.9,const(size.yscale)*.9
sprpriority = -2
ownpal = 1

[State 0, end]
type = changestate
trigger1 = anim = 190 && !animtime
value = 0

;---------------------------------------------------------------------------
[Statedef 195]
type = S
movetype = I
physics  = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State 0, anim]
type = changeanim
trigger1 = !var(0)
trigger1 = !time
value = 195+(command="holdfwd")

[State 0, anim]
type = changeanim
trigger1 = var(0)
trigger1 = !time
value = 10195+(command="holdback")

[State 0, snd]
type = playsnd
trigger1 = anim = 195
trigger1 = animelem = 3
value = 100,8
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 10195
trigger1 = animelem = 3
value = 100,22
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 196
trigger1 = animelem = 4
value = 100,17
channel = 0

[State 0, explod]
type = explod
trigger1 = anim = 10195
trigger1 = animelem = 7
anim = 6062
id = 10195
postype = p1
bindtime = -1
removetime = 56
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 10195
trigger1 = animelem = 21
anim = 6063
id = 10195
postype = p1
removetime = 7
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 10196
trigger1 = !numexplod(1950)
anim = 6050
id = 10195
postype = p1
bindtime = -1
removetime = 50
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1
persistent = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;本体立ち弱
[Statedef 200]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),210,200)
poweradd = 0
sprpriority = 1-(var(0)>0)*2
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = animelemtime(8) = 0
x = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
x = .95

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = anim = 200
trigger1 = animelem = 2
trigger2 = anim = 210
trigger2 = animelem = 4
value = 0,10

[State 0, pos]
type = posadd
triggerall = !var(8)
trigger1 = anim = 210
trigger1 = animelem = 5
x = ceil(14*const(size.xscale))

[State 0, hit]
type = hitdef
triggerall = !var(8)
trigger1 = anim = 200
trigger1 = animelem = 2
attr = S, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -14,-89
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
persistent = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = anim = 210
trigger1 = animelem = 5
attr = S, NA
damage = ceil(ifelse((35*fvar(0))<7,7,(35*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6001
sparkxy = -12,-55
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -2.5,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 1
air.fall = 1
fall.recover = 0
persistent = 0
yaccel = .36
id = stateno
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 2 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 2 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 2 && command = "holddown" && prevstateno != [100,105]
value = 10
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;本体6弱
[Statedef 202]
type = S
movetype = A
physics = N
ctrl = 0
anim = 202
poweradd = 0
sprpriority = 1-(var(0)>0)*2
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
x = 0

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 3
value = 0,10

[State 0, hit]
type = hitdef
triggerall = !var(8)
trigger1 = anim = 202
trigger1 = animelem = 3
attr = S, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6000
sparkxy = -14,-29
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -6
guard.velocity = -5.5
air.type = low
air.velocity = -3,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 0
air.fall = 0
persistent = 0
yaccel = .36
id = stateno
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;本体立ち中
[Statedef 210]
type = S
movetype = A
physics = N
ctrl = 0
anim = 210
poweradd = 40*!(var(9)=2)
sprpriority = 1-(var(0)>0)*2
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = animelemtime(8) = 0
x = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
x = .95

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = prevstateno != [100,105]
trigger1 = animelem = 1
value = 100,1
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 4
value = 0,11

[State 0, pos]
type = posadd
triggerall = !var(8)
trigger1 = animelem = 5
x = ceil(16*const(size.xscale))

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = prevstateno != [100,105]
trigger1 = animelem = 5
attr = S, NA
damage = ceil(ifelse((35*fvar(0))<7,7,(35*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6001
sparkxy = -12,-55
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50*!(var(9)=2),0
givepower = 25*!(var(9)=2),0
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
persistent = 0
yaccel = .36
id = 210
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = prevstateno = [100,105]
trigger1 = animelem = 5
attr = S, NA
damage = ceil(ifelse((49*fvar(0))<7,7,(49*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6001
sparkxy = -12,-55
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -3,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
persistent = 0
yaccel = .36
id = 210
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;本体立ち強
[Statedef 220]
type = S
movetype = A
physics  = N
ctrl = 0
anim = 220
poweradd = 50*!(var(9)=2)
sprpriority = 1-(var(0)>0)*2
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, pos]
type = width
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(9) < 0
value = 15

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = animelemtime(7) = 0
x = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
x = .95

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = prevstateno != [100,105]
trigger1 = animelem = 1
value = 100,0
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 4
value = 0,12

[State 0, pos]
type = posadd
trigger1 = !time
x = ceil(8*const(size.xscale))

[State 0, pos]
type = posadd
triggerall = !var(8)
trigger1 = animelem = 4
x = ceil(6*const(size.xscale))

[State 0, pos]
type = posadd
triggerall = !var(8)
trigger1 = animelem = 9
x = ceil(15*const(size.xscale))

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = anim = 220
trigger1 = animelem = 3
attr = S, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0))))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -10,-74
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60*!(var(9)=2),0
givepower = 30*!(var(9)=2),0
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -2.5,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 18
fall = 0
air.fall = 1
fall.recovertime = 32
guard.kill = 0
persistent = 0
yaccel = .36
id = 220
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;本体6強
[Statedef 222]
type = S
movetype = A
physics = N
ctrl = 0
anim = 222
poweradd = 50*!(var(9)=2)
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger2 = !animtime
x = 0

[State 0, snd]
type = playsnd
trigger1 = !var(8)
trigger1 = animelem = 4
value = 1,5

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = !movecontact
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
attr = S, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),ceil(ifelse((70*fvar(0)*.25)<7,7,(70*fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -14,-74
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 60*!(var(9)=2),0
givepower = 30*!(var(9)=2),0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,ifelse(var(40)<12,-6+(var(40)*.64),0)
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 0
air.fall = 1
fall.recovertime = 28
guard.kill = 0
persistent = 0
yaccel = .36
id = 222
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;本体6強スタンド
[Statedef 322]
type = S
movetype = I
physics = N
ctrl = 0
anim = 322
sprpriority = -1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(3) = root,fvar(3)
ignorehitpause = 1

[State 0, btr]
type = bindtoroot
trigger1 = animelem = 1
pos = 0,-5

[State 0, btr]
type = bindtoroot
trigger1 = animelem = 2
pos = 10,-5

[State 0, btr]
type = bindtoroot
trigger1 = animelemtime(3) >= 0
pos = 30,-5

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = animelem = 5
trigger1 = root,var(8) > 0
value = anim
elem = 4
[State 0, anim]
type = changeanim
trigger1 = animelem = 6
trigger1 = root,var(8) > 0
value = anim
elem = 5
[State 0, anim]
type = changeanim
trigger1 = animelem = 7
trigger1 = root,var(8) > 0
value = anim
elem = 6
[State 0, anim]
type = changeanim
trigger1 = animelem = 8
trigger1 = root,var(8) > 0
value = anim
elem = 7
[State 0, anim]
type = changeanim
trigger1 = animelem = 9
trigger1 = root,var(8) > 0
value = anim
elem = 8
[State 0, anim]
type = changeanim
trigger1 = animelem = 10
trigger1 = root,var(8) > 0
value = anim
elem = 9
[State 0, anim]
type = changeanim
trigger1 = animelem = 11
trigger1 = root,var(8) > 0
value = anim
elem = 10
[State 0, anim]
type = changeanim
trigger1 = animelem = 12
trigger1 = root,var(8) > 0
value = anim
elem = 11

[State 0, helper]
type = helper
trigger1 = time = 1
stateno = 6071
id = 6071
postype = p1
pos = 0,0
ownpal = 1
pausemovetime = 0
supermovetime = 0

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 3000
trigger2 = root,stateno = 3100
trigger3 = root,stateno = 3200
value = root,stateno + 50

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 3500 && root,time = 3
value = 3550

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1400
value = root,stateno + 50

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 222 && root,stateno != 0
value = 10000

;------------------------------------------------------------------------------
;火球エフェクト2
[Statedef 6071]
ctrl = 0
anim = 6071+(parent,anim=10411)
sprpriority = -2

[State 0, btr]
type = bindtoparent
trigger1 = 1
pos = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, spr]
type = sprpriority
trigger1 = animelem = 3
value = 5

[State 0, anim]
type = changeanim
trigger1 = root,var(8) > 0
value = anim
elem = animelemno(0)

[State 0, end]
type = DestroySelf
trigger1 = !animtime
trigger2 = parent,stateno != 322
trigger2 = parent,stateno != 10410
trigger2 = parent,stateno != 10510

;===========================================================================
;回り込み
[Statedef 300]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
velset = 0,0
sprpriority = -1
facep2 = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, hitby]
type = hitby
Trigger1 = ifelse(((helper(7520*(numhelper(7520)>0)),var(10)) = 0),1,Animtime<=-8)
value = SCA,AT

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 100,0
channel = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[state 0, helper]
type = helper
trigger1 = animelemtime(2) = 2
helpertype = normal
name = "Image"
stateno = 305
id = 305
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(4) <= 4
x = 1.2

[State 0, vel]
type = velmul
trigger1 = animelemtime(5) >= 0
x = .7

[State 0, vel]
type = velset
trigger1 = animelem = 6
x = 0

[State 0, var]
type = varset
trigger1 = !animtime
var(24) = 8

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 305]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
vel = 0,0
sprpriority = -3

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, vel]
type = veladd
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(4) <= 4
x = 1.2

[State 0, vel]
type = velmul
trigger1 = animelemtime(5) >= 0
x = .7

[State 0, vel]
type = velset
trigger1 = animelem = 6
x = 0

[State 0, end]
type = DestroySelf
trigger1 = !animtime
trigger2 = root,movetype = H

;===========================================================================
;本体屈弱
[Statedef 400]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
poweradd = 0
sprpriority = 1-(var(0)>0)*2
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = !animtime
x = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
x = .95

[State 200, Snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 2
value = 0,10

[State 0, hit]
type = hitdef
triggerall = !var(8)
trigger1 = anim = 400
trigger1 = animelem = 2
attr = C, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -10,-27
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -2,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
persistent = 0
yaccel = .36
id = 400
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !var(8)
trigger1 = anim = 401
trigger1 = animelem = 2
attr = C, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -10,-27
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = Low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -2,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
persistent = 0
yaccel = .36
id = 400
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && command != "holddown" && command != "holdfwd" && command != "holdback" && prevstateno != [100,105]
value = 12
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;本体屈中
[Statedef 410]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno = [100,105]),411,410)
poweradd = 40*!(var(9)=2)
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = animelemtime(7) = 0
x = 0

[State 0, vel]
type = velmul
trigger1 = prevstateno = [100,105]
trigger1 = !var(8)
x = .95

[State 0, explod]
type = explod
trigger1 = animelem = 1
anim = 6080
id = 410
postype = p1
pos = ceil(84*const(size.xscale)),ceil(-44*const(size.yscale))
scale = const(size.xscale),const(size.yscale)
;vel = 0,-1.6
sprpriority = 3
ownpal = 1
;bindtime = -1

[State 0, explod]
type = ModifyExplod
trigger1 = numexplod(410)
ID = 410
pos = ceil(84*const(size.xscale)),ceil(-44*const(size.yscale))-ceil(time*1.6)
postype = p1

[State 0, snd]
type = playsnd
trigger1 = !var(8)
trigger1 = animelem = 3
value = 1,2

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = !movecontact
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = C, NA
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),ceil(ifelse((56*fvar(0)*.25)<7,7,(56*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6001
sparkxy = -12,-60
guard.sparkno = s6010
hitsound = s0,4
guardsound = s0,9
getpower = 50*!(var(9)=2),0
givepower = 25*!(var(9)=2),0
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
guard.slidetime = 15
guard.hittime = 15
guard.ctrltime = 15
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -3,ifelse(var(40)<12,-6+(var(40)*.64),0)
air.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recovertime = 28
guard.kill = 0
persistent = 0
yaccel = .36
id = 410
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;------------------------------------------------------------------------------
;本体屈中スタンド
[Statedef 510]
type = A
movetype = A
physics = N
ctrl = 0
anim = root,anim+100
sprpriority = -1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(3) = root,fvar(3)
ignorehitpause = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(8) > 0
trigger1 = animelem = 5
value = anim
elem = 4
[State 0, anim]
type = changeanim
trigger1 = animelem = 6
trigger1 = root,var(8) > 0
value = anim
elem = 5
[State 0, anim]
type = changeanim
trigger1 = animelem = 7
trigger1 = root,var(8) > 0
value = anim
elem = 6
[State 0, anim]
type = changeanim
trigger1 = animelem = 8
trigger1 = root,var(8) > 0
value = anim
elem = 7

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 3000
trigger2 = root,stateno = 3100
trigger3 = root,stateno = 3200
value = root,stateno + 50

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 3500 && root,time = 3
value = 3550

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1400
value = root,stateno + 50

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 410 && root,stateno != 11
value = 10000

;===========================================================================
;本体屈強（Stand）
[Statedef 420]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno = [100,105]),421,420)
poweradd = 50*!(var(9)=2)
sprpriority = 1-(var(0)>0)*2
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = animelemtime(7) = 0
x = 0

[State 0, vel]
type = velmul
triggerall = !var(8)
trigger1 = prevstateno = [100,105]
x = .95

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 3
value = 1,3

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1

[State 0, hit]
type = hitdef
trigger1 = !var(8)
trigger1 = !movecontact
attr = C, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),ceil(ifelse((70*fvar(0)*.25)<7,7,(70*fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6002
sparkxy = -14,-34
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 60*!(var(9)=2),0
givepower = 30*!(var(9)=2),0
ground.type = Trip
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = low
air.velocity = -4,ifelse(var(40)<12,-3+(var(40)*.24),0)
air.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 80
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recovertime = 28
guard.kill = 0
persistent = 0
yaccel = .36
id = 420
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 520]
type = A
movetype = A
physics = N
velset = 0,0
anim = root,anim+100
ctrl = 0
sprpriority = 2

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 400, CornerPush]
type = VarSet
trigger1 = 1
fvar(3) = root,fvar(3)
ignorehitpause = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(8) > 0
trigger1 = animelem = 5
value = anim
elem = 4
[State 0, anim]
type = changeanim
trigger1 = animelem = 6
trigger1 = root,var(8) > 0
value = anim
elem = 5

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 3000
trigger2 = root,stateno = 3100
trigger3 = root,stateno = 3200
value = root,stateno + 50

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 3500 && root,time = 3
value = 3550

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1400
value = root,stateno + 50

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 420
value = 10000

;===========================================================================
;ジャンプ弱
[Statedef 600]
type = A
movetype = A
physics = N
ctrl = 0
anim = 600
poweradd = 30*!(var(9)=2)
sprpriority = 1-(var(0)>0)*2

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 2
value = 0,10

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = !movecontact
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
attr = A, NA
damage = ceil(ifelse((35*fvar(0))<7,7,(35*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -8,-35
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
persistent = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,ifelse(((var(6)&4)||(var(6)&8)),.45,.62))

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中
[Statedef 610]
type = A
movetype = A
physics = N
ctrl = 0
anim = 610
poweradd = 40*!(var(9)=2)
sprpriority = 1-(var(0)>0)*2

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 2
value = 0,10

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = !movecontact
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
attr = A, NA
damage = ceil(ifelse((35*fvar(0))<7,7,(35*fvar(0)))),0
priority = 5,Hit
hitflag = MAF
guardflag = HA
animtype = light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -8,-35
guard.sparkno = s6010
hitsound = s0,2
guardsound = s0,9
getpower = 50*!(var(9)=2),0
givepower = 25*!(var(9)=2),0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 0
persistent = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,ifelse(((var(6)&4)||(var(6)&8)),.45,.62))

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 620]
type = A
movetype = A
physics = N
anim = 620
ctrl = 0
poweradd = 50
sprpriority = 2

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 3
value = 0,12

[State 0, hit]
type = hitdef
triggerall = !var(8)
triggerall = !movecontact
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
attr = A, NA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),0
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6002
sparkxy = -6,-62
guard.sparkno = s6010
hitsound = s0,3
guardsound = s0,9
getpower = 60*!(var(9)=2),0
givepower = 30*!(var(9)=2),0
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -3,-5.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
airguard.velocity = -3,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 28
guard.kill = 0
persistent = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,ifelse(((var(6)&4)||(var(6)&8)),.45,.62))

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
;ガーキャン(本体)
[Statedef 700]
type = S
movetype = I
physics = S
ctrl = 0
anim = 20900
poweradd = ifelse(((helper(7520*(numhelper(7520)>0)),var(10)) = 0),0,-1000)
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])

[State 0, nhb]
type = nothitby
trigger1 = time <= 10
trigger2 = ((helper(7520*(numhelper(7520)>0)),var(10)) = 1)
trigger2 = 1
value = SCA
time = 1

[State 0, pal]
type = palfx
trigger1 = time < 10
trigger1 = time%2
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, hit]
type = pause
triggerall = ((helper(7520*(numhelper(7520)>0)),var(10)) = 1)
trigger1 = animelemtime(7) < 0
trigger1 = time = 1
time = 20

[State 0, hit]
type = playsnd
triggerall = ((helper(7520*(numhelper(7520)>0)),var(10)) = 1)
trigger1 = time = 1
value = 700,100

[State 0, snd]
type = playsnd
trigger1 = time = 4
value = 3,7
channel = 0

[State 0, end]
type = changestate
trigger1 = ((helper(7520*(numhelper(7520)>0)),var(10)) = 0)
trigger1 = time = 10
trigger2 = ((helper(7520*(numhelper(7520)>0)),var(10)) = 1)
trigger2 = time = 35
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガーキャン(スタンド)
[Statedef 750]
type = S
movetype = A
physics = S
ctrl = 0
anim = 750
velset = 0,0
sprpriority = 2

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, width]
type = width
trigger1 = 1
edge = 20,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, hit]
type = hitby
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, nhb]
type = nothitby
trigger1 = time <= 10
trigger1 = ((helper(7520*(numhelper(7520)>0)),var(10)) = 0)
trigger2 = time <= 20
trigger2 = ((helper(7520*(numhelper(7520)>0)),var(10)) = 1)
value = SCA

[State 10000, HitBy]
type = HitBy
trigger1 = time >= 10
trigger1 = ((helper(7520*(numhelper(7520)>0)),var(10)) = 0)
trigger2 = time >= 20
trigger2 = ((helper(7520*(numhelper(7520)>0)),var(10)) = 1)
value = SCA,NA,SA,HA,NP,SP,HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9500

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posadd
trigger1 = time = 1
x = 15

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 1,1

[State 0, explod]
type = explod
trigger1 = animelem = 3
anim = 6090
id = 6090
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ownpal = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = S, SA
damage = ceil(ifelse((56*root,fvar(0))<7,7,(56*root,fvar(0)))),ceil(ifelse((56*root,fvar(0)*.25)<7,7,(56*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6004
sparkxy = -10,-80
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 0,0
givepower = 20,0
ground.type = High
ground.slidetime = 31
ground.hittime = 31
ground.velocity = -6,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = -8
air.velocity = -4,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 1
guard.kill = 0
persistent = 0
fall.recovertime = 28
yaccel = .36
p2facing = 1
kill = ((helper(7520*(numhelper(7520)>0)),var(10)) = 0)

[state -2, var]
type = poweradd
trigger1 = movehit = 1
value = 80

[state -2, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) = 1
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact = 1
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 12
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = animelemtime(13) = 2
value = 9001

;===========================================================================
;アドバンシングガード
[Statedef 710]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6020
id = 6020
pos = ceil(28*const(size.xscale)),ifelse(statetype=C&&!var(0),ceil(-45*const(size.xscale)),ceil(-90*const(size.xscale)))
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "AVG"
stateno = 715
id = 715
pos = -10,0
postype = p1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.ground.back = 20
size.ground.front = 20
size.height = 240

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8030
id = 8030
pos = 0,0
postype = p2
ownpal = 1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 0,20

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,7
channel = 0

[State 0, anim]
type = changeanim
trigger1 = !var(59)
trigger1 = time >= 0 && command != "holddown"
value = 150+var(0)

[State 0, anim]
type = changeanim
trigger1 = !var(59)
trigger1 = time >= 0 && command = "holddown"
value = 151+var(0)

[State 0, state]
type = statetypeset
trigger1 = !var(59)
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = !var(59)
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, nhb]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 0, end]
type = changestate
trigger1 = time = 1
value = 151+(command = "holddown")*2

;---------------------------------------------------------------------------
;アドバンシングガード2
[Statedef 711]
type = U
movetype = I
physics = N

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150+var(0)

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151+var(0)

[State 0, state]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, end]
type = changestate
trigger1 = numhelper(715)
trigger1 = command = "holdback"
value = 151+(command = "holddown")*2

[State 0, end]
type = changestate
trigger1 = !numhelper(715)
value = 130+(command = "holddown")
ctrl = 1

;---------------------------------------------------------------------------
;アドバンシングガード(ヘルパー)
[Statedef 715]
type = S
movetype = I
physics = N
anim = 715
velset = 0,0

[State 0, push]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = !time
x = 20

[State 0, vel]
type = veladd
trigger1 = time > 0
x = -1

[State 0, end]
type = DestroySelf
trigger1 = time = 15

;---------------------------------------------------------------------------
; アドバンシングガード(煙)
[Statedef 8030]
type = S
movetype = I
physics = N
velset = 0,0
anim = 8030
sprpriority = 4

[State 0, pos]
type = posset
trigger1 = 1
x = enemynear,pos x
y = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, end]
type = DestroySelf
trigger1 = !animtime

;==============================================================================
;投げ
[Statedef 800]
type = S
movetype = A
physics = S
ctrl = 0
anim = 800+var(0)
sprpriority = 0

[State 0, hit]
type = hitdef
triggerall = !fvar(7)
trigger1 = p2movetype != H && (p2stateno != [40,42])
trigger1 = animelemtime(1) >= 0
attr = S,NT
priority = 1,Miss
hitflag = M-
sparkno = -1
hitsound = s0,16
;p1stateno = 801
p2stateno = 810+(var(0)=10000)*5
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
fall = 0
numhits = 0
id = 800

[State 901, Throw]
type = ChangeState
trigger1 = numtarget(800)
trigger1 = target,stateno = 810+(var(0)=10000)*5
value = 801
persistent = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 220+var(0)

;------------------------------------------------------------------------------
;投げ
[Statedef 801]
type = S
movetype = A
physics = S
ctrl = 0
anim = 801+var(0)
velset = 0,0
poweradd = 0
sprpriority = -1

[State 0, nhb]
type = posadd
trigger1 = var(0)
trigger1 = !time
y = -20

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, width]
type = width
trigger1 = 1
edge = 40+(var(0)=10000)*20,0

[State 0, var]
type = varset
trigger1 = !time
var(13) = 1

[State 0, end]
type = changestate
trigger1 = time = [1,4]
trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "y" || target,command = "z" || target,command = "b" || target,command = "c"
value = 820

[State 0, target]
type = targetbind
trigger1 = time < 10
pos = ceil(ifelse(!var(0),62,32)*const(size.xscale)),0+(var(0)=10000)*20
time = 1
id = 800

[State 0, target]
type = targetbind
trigger1 = time >= 10
pos = ceil(ifelse(!var(0),62,32)*const(size.xscale))+ifelse(time%6<3,2,-2)*(time>=18),ceil(-95+(var(0)=10000)*20*const(size.yscale))
time = 1
id = 800

[State 0, explod]
type = explod
trigger1 = var(0)
trigger1 = animelem = 2
anim = 10850
id = 10850
postype = p1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1

[State 0, snd]
type = playsnd
trigger1 = time = 8
value = 100,10
channel = 0

[State 0, snd]
type = playsnd
trigger1 = time = 15
value = 1,6

[State 0, end]
type = changestate
trigger1 = !var(0)
trigger1 = var(12)
trigger2 = var(0)
trigger2 = !animtime
value = 802

;------------------------------------------------------------------------------
;投げ2
[Statedef 802]
type = S
movetype = A
physics = S
ctrl = 0
anim = 802+var(0)
sprpriority = -1

[State 0, anim]
type = velset
trigger1 = time = 8+(var(0)=10000)
trigger1 = pos y < 0
y = 2
persistent = 0

[State 0, anim]
type = velset
trigger1 = time = 18+(var(0)=10000)
y = 0
[State 0, anim]
type = posset
trigger1 = time = 18+(var(0)=10000)
y = 0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, target]
type = targetbind
trigger1 = time < 7+(var(0)=10000)
pos = ceil(ifelse(!var(0),62,32)*const(size.xscale)),ceil(-95+(var(0)=10000)*20*const(size.yscale))
time = 1
id = 800

[State 0, var]
type = varset
trigger1 = time = 9+(var(0)=10000)
var(13) = 0

[State 0, target]
type = targetstate
trigger1 = time = 9+(var(0)=10000)
value = 811
id = 800

[State 0, target]
type = targetbind
trigger1 = (time = [7+(var(0)=10000),8+(var(0)=10000)])
pos = ceil(ifelse(!var(0),132,82)*const(size.xscale)),-80+(var(0)=10000)*20
time = 1
id = 800

[State 0, target]
type = targetbind
trigger1 = time = 9+(var(0)=10000)
pos = ceil(ifelse(!var(0),132,82)*const(size.xscale)),-30+(var(0)=10000)*20
time = 1
id = 800

[State 0, snd]
type = playsnd
trigger1 = time = 9+(var(0)=10000)
value = 0,5

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = time = 9+(var(0)=10000)
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1

[State 0, life]
type = targetlifeadd
triggerall = numtarget
trigger1 = time = 9+(var(0)=10000)
value = ceil(ifelse(-112*fvar(0)>-7,-7,-112*fvar(0)))
id = 800

[State 0, end]
type = changestate
trigger1 = anim = 802
trigger1 = !animtime
trigger2 = anim = 10802
trigger2 = animelemtime(9) = 2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げぬけ（自分）（y.yさん製作）
[Statedef 820]
type = A
movetype = I
physics = A
anim = 5040+var(0)
velset = -3,-6

[State 0, target]
type = targetbind
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
trigger1 = !time
value = 830

[State 0, var]
type = varset
trigger1 = !time
var(13) = 0

[State 0, explod]
type = removeexplod
trigger1 = !time
id = 10850

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げ(スタンド)
[Statedef 850]
type = U
movetype = I
physics = N
ctrl = 0
anim = 10801
velset = 0,0
sprpriority = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, btr]
type = bindtoroot
trigger1 = time < 85
pos = 30,-20

[State 0, explod]
type = explod
trigger1 = anim = 10801
trigger1 = animelem = 2
anim = 10850
id = 10850
postype = p1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1

[State 0, var]
type = parentvarset
trigger1 = time = 1
var(9) = 1

[State 0, var]
type = parentvarset
trigger1 = anim = 10801
trigger1 = !animtime
var(12) = 1

[State 0, anim]
type = changeanim
trigger1 = anim = 10801
trigger1 = !animtime
value = 10802
persistent = 0

[State 0, anim]
type = velset
trigger1 = time = 85
trigger1 = pos y < 0
y = 2
persistent = 0

[State 0, anim]
type = velset
trigger1 = time = 95
y = 0
[State 0, anim]
type = posset
trigger1 = time = 95
y = 0

[State 0, var]
type = parentvarset
trigger1 = anim = 10802
trigger1 = animelemtime(9) = 2
var(12) = 0

[State 0, end]
type = changestate
trigger1 = anim = 10802
trigger1 = animelemtime(9) = 2
value = 9001

;---------------------------------------------------------------------------
;投げ(ENEMY)
[Statedef 810]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim2]
type = changeanim2
trigger1 = !time
value = 810

[State 0, anim2]
type = changeanim2
trigger1 = time = 89
value = 811

[State 0, nhb]
type = selfstate
trigger1 = time > 100
value = 5050

;---------------------------------------------------------------------------
;投げ(ENEMY)
[Statedef 815]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim2]
type = changeanim2
trigger1 = !time
value = 810

[State 0, anim2]
type = changeanim2
trigger1 = time = 85
value = 811

;---------------------------------------------------------------------------
;投げ2(ENEMY)
[Statedef 811]
type = A
movetype = H
physics = N
ctrl = 0
velset = -4,-8

[State 0, vel]
type = veladd
trigger1 = 1
y = .36

[State 0, pal]
type = palfx
trigger1 = !time
color = 150
add = 128,24,0
mul = 124,108,90
sinadd = 90,90,90,4
time = 100

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5030

[State 0, anim]
type = changeanim
trigger1 = vel y >= -2
value = 5050
persistent = 0

[State 5040, 5] ;Recover near ground
type = SelfState
triggerall = time >= 20
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5040, 6]; Recover in mid air
type = SelfState
triggerall = time >= 20
triggerall = Vel Y > -1
trigger1 = alive
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 0, self]
type = SelfState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 5100

;---------------------------------------------------------------------------
;投げ抜け（相手）
[Statedef 830]
type = A
movetype = I
physics = N
velset = -3,-6

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5210

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .45

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1

;==============================================================================
;クロスファイアハリケーン(Main.Ver)
[Statedef 1000]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 198, 1]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 1005

[State 0, anim]
type = changeanim
trigger1 = anim = 1005 && !animtime
value = 1000+var(2)

[State -2, CornerPush]
type = posadd
trigger1 = prevstateno = 222
trigger2 = prevstateno = 410
trigger3 = prevstateno = 420
x = (fvar(3)+(fvar(3)*.25)+1)
persistent = 0

[State 0, var]
type = varset
trigger1 = !time
var(6) = (var(6)|256)

[State 10000, 1]
type = helper
trigger1 = !numhelper(1010)
helpertype = normal
id = 1010
pos = 0,0
postype = p1
stateno = 1010
bindtime = -1

[State 0, state]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;-------------------------------------------------------------
[Statedef 1010]
movetype = A
physics = N
ctrl = 0
sprpriority = 2
anim = 1010

[State 198, 1]
type = nothitby
trigger1 = 1
value = SCA

[State 198, 1]
type = bindtoparent
trigger1 = 1
pos = 0,0

[State 198, 1]
type = screenbound
trigger1 = 1
value = 1

[State 198, 1]
type = playerpush
trigger1 = 1
value = 1

[State 196, 6]
type = destroyself
trigger1 = root,stateno != 1000

;---------------------------------------------------------------------------
;クロスファイアハリケーン(Stand)
[Statedef 1050]
type = U
movetype = A
physics = N
ctrl = 0
sprpriority = -2

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 1000, VarSet]
type = varset
trigger1 = !time
var(2) = ifelse(root,command = "236z",2,ifelse(root,command = "236y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = root,var(28)
var(2) = ifelse((root,var(28)&2**2),2,ifelse((root,var(28)&2**1),1,0))

[State 1000, VarSet];AI
type = varset
trigger1 = !time
triggerall = root,var(59)
var(2) = ifelse(p2bodydist x > 140&&random<600,1,0)

[State 0, var]
type = parentvarset
trigger1 = var(2) && !root,var(2);root,stateno != 1000
trigger1 = !time
var(2) = var(2)

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

;追加分
[State 1100, VarSet]
type = ParentVarSet
trigger1 = root,var(8)
trigger1 = time = 0
fvar(3) = 0

[State 1100, VarSet]
type = null;ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = null;parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, anim]
type = changeanim
trigger1 = !time
value = 1050+var(2)

[State 0, btr]
type = bindtoroot
trigger1 = time <= 1
pos = 25,0

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,11
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 11
value = 1,10

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[state 0, helper]
type = helper
trigger1 = animelem = 11
helpertype = normal
name = "cross fire"
stateno = 1060
id = 1050
pos = ceil(20*const(size.xscale)),ceil(-80*const(size.yscale))
ownpal = 1

[State 10000, 1]
type = helper
trigger1 = !time
helpertype = normal
id = 1010
pos = 0,0
postype = p1
stateno = 1010
bindtime = -1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
trigger1 = var(2)=0 && animelem=16
trigger2 = var(2)=1 && animelem=18
trigger3 = var(2)=2 && animelem=20
value = 1051

;---------------------------------------------------------------------------
;クロスファイアハリケーン(Stand/End)
[Statedef 1051]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
trigger1 = var(2)=0 && animelemtime(22)=2
trigger2 = var(2)=1 && animelemtime(24)=2
trigger3 = var(2)=2 && animelemtime(26)=2
value = 9001

;------------------------------------------------------------------------------
;クロスファイアハリケーン（fire）
[Statedef 1060]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
sprpriority = 1

[State 10000, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 1061
attr = SCA, NP, SP, HP
time = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, vel]
type = varset
trigger1 = !time
var(2) = parent,var(2)

[State 0, vel]
type = velset
trigger1 = !time
x = ifelse(parent,var(2)=2,6,ifelse(parent,var(2)=1,4.6,4.2))

[State 0, explod]
type = explod
triggerall = anim = 11010
trigger1 = var(2)=0 && !(time%10)
trigger2 = var(2)=1 && !(time%10)
trigger3 = var(2)=2 && !(time%5)
anim = 6075
id = 6075
postype = p1
pos = 0,ceil(-10+(random%2=1)*20)
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = !numhelper(6305)
trigger1 = moveguarded = 1
helpertype = normal
name = "fire helperG"
stateno = 6305
id = 6305
postype = p2
ownpal = 1
ignorehitpause = 1

[State 0, hit]
type = hitdef
trigger1 = !movecontact
attr = S, SP
damage = ceil(ifelse((56*root,fvar(0))<7,7,(56*root,fvar(0)))),ceil(ifelse((56*root,fvar(0)*.25)<7,7,(56*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = MA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = -1;s6004
sparkxy = 0,0
guard.sparkno = s6010
hitsound = s1,8
guardsound = s0,9
getpower = 10,0
givepower = 10,0
ground.type = High
ground.slidetime = 27
ground.hittime = 27
ground.velocity = -10
guard.velocity = -8
air.type = High
air.hittime = 13
air.velocity = -4,-5*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
airguard.velocity = -4,-3*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 16
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[state 4100, 1]
type = null;parentvaradd
trigger1 = movehit = 1
var(40) = 1

[state 4100, 1]
type = parentvaradd
trigger1 = parent,ishelper(10000)
trigger1 = movehit = 1
var(46) = 1
ignorehitpause = 1

[state 4100, 1]
type = parentvarset
trigger1 = movecontact = 1
var(21) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = movehit
var(10) = 1
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = var(10)
anim = 6074
id = 6074
postype = p1
pos = 20,10
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,-1.5
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = var(10)
anim = 6074
id = 6074
postype = p1
pos = 40,35
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,0
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = var(10)
anim = 6074
id = 6074
postype = p1
pos = 0,32
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,0
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = var(10)
anim = 6074
id = 6074
postype = p1
pos = 20,23
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,-1.5
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = var(10)
anim = 6074
id = 6074
postype = p1
pos = 14,44
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,1.5
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = var(10)
anim = 6074
id = 6074
postype = p1
pos = 0,51
scale = const(size.xscale),const(size.yscale)
vel = 4,1.5
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
movetype = I

[State 0, end]
type = changeanim
trigger1 = pos x <= -240 || pos x >= 240
trigger2 = anim = 11011 && !animtime
trigger3 = movecontact
trigger4 = !movecontact
trigger4 = time = 34 && var(2) = 0
trigger5 = !movecontact
trigger5 = time = 32 && var(2) = 1
trigger6 = !movecontact
trigger6 = time = 24 && var(2) = 2
value = 9999

[State 0, end]
type = destroyself
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;クロスファイアハリケーン（消滅）
[Statedef 1061]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 9999
sprpriority = 1

[State 0, explod]
type = explod
trigger1 = !time
anim = 6074
id = 6074
postype = p1
pos = 20,0
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,-1.5
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6074
id = 6074
postype = p1
pos = 40,0
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,0
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6074
id = 6074
postype = p1
pos = 0,0
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,0
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6074
id = 6074
postype = p1
pos = 20,0
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,-1.5
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6074
id = 6074
postype = p1
pos = 14,0
scale = const(size.xscale)*1.3,const(size.yscale)
vel = 4,1.5
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6074
id = 6074
postype = p1
pos = 0,0
scale = const(size.xscale),const(size.yscale)
vel = 4,1.5
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, end]
type = destroyself
trigger1 = time > 1
trigger1 = !numtarget

;==============================================================================
;ファイアウォール(Main.Ver)
[Statedef 1100]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 10
sprpriority = 2
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 1105

[State 0, anim]
type = changeanim
trigger1 = anim = 1105 && !animtime
value = 1100+var(2)

[State -2, CornerPush]
type = posadd
trigger1 = prevstateno = 222
trigger2 = prevstateno = 410
trigger3 = prevstateno = 420
x = (fvar(3)+(fvar(3)*.25)+1)
persistent = 0

[State 0, var]
type = varset
trigger1 = !time
var(6) = (var(6)|256)

[State 0, state]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ファイアウォール(Stand)
[Statedef 1150]
type = U
movetype = A
physics = N
ctrl = 0
sprpriority = -2

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 1000, VarSet]
type = varset
trigger1 = !time
var(2) = ifelse(root,command = "623z",2,ifelse(root,command = "623y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = root,var(28)
var(2) = ifelse((root,var(28)&2**5),2,ifelse((root,var(28)&2**4),1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = root,var(59)
var(2) = ifelse(p2statetype=A,0,1+(random<300&&!helper(10000),var(56)))

[State 0, var]
type = parentvarset
trigger1 = var(2) && !root,var(2)
trigger1 = !time
var(2) = var(2)

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = poweradd
trigger1 = animelem = 3
value = 40

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, var]
type = varadd
trigger1 = movehit = 1
var(12) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, anim]
type = changeanim
trigger1 = !time
value = 1150+var(2)

[State 0, btr]
type = bindtoroot
trigger1 = time <= 1
pos = 20,0

[State 0, vel]
type = velset
trigger1 = var(2) = 1
trigger1 = animelem = 3
x = 4
[State 0, vel]
type = velset
trigger1 = var(2) = 2
trigger1 = animelem = 3
x = 6

[State 0, vel]
type = velmul
trigger1 = var(2)=0 && animelemtime(3) >= 0
trigger2 = var(2)=1 && animelemtime(3) >= 12
trigger3 = var(2)=2 && animelemtime(3) >= 15
x = .9

[State 0, anim]
type = changeanim
trigger1 = animelemtime(4) < 0
trigger1 = var(12) >= var(2)+1
trigger1 = !(time%10)
value = anim
elem = 4
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 1
value = 100,2
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 6
value = 1,0

[State 0, vel]
type = velset
trigger1 = animelem = 6
x = 0
y = -6

[State 0, vel]
type = veladd
trigger1 = var(2)=0 && animelemtime(6) >= 2
trigger2 = var(2)=1 && animelemtime(6) >= 10
trigger3 = var(2)=2 && animelemtime(6) >= 16
y = .5

;---------------------------------------
[state -2, helper]
type = helper
trigger1 = animelem = 4
helpertype = normal
stateno = 11150
id = 11150
postype = p1
pos = ceil(43*const(size.xscale)),ceil(-40*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelem = 4
helpertype = normal
stateno = 11151
id = 11151
postype = p1
pos = ceil(-33*const(size.xscale)),ceil(-40*const(size.yscale))
ownpal = 1
ignorehitpause = 1

;---------------------------------------

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1

[State 0, hit]
type = hitdef
trigger1 = !var(2)
trigger1 = animelem = 3
trigger1 = var(12) < var(2)+1
trigger2 = var(2)
trigger2 = animelemtime(3) = 0 || !(time%10)
trigger2 = var(12) < var(2)+1
trigger2 = animelemtime(5) < 0
attr = S, SA
damage = ceil(ifelse((14*root,fvar(0))<7,7,(14*root,fvar(0)))),ceil(ifelse((14*root,fvar(0)*.25)<7,7,(14*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -12,-20
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 30,0
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -3
guard.velocity = -3
air.type = Low
air.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
fall = 0
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

;弱版ぶっ飛ばし
[State 0, hit]
type = hitdef
triggerall = !var(2)
triggerall = !var(13)
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
attr = S, SA
damage = ceil(ifelse((84*root,fvar(0))<7,7,(84*root,fvar(0)))),ceil(ifelse((84*root,fvar(0)*.25)<7,7,(84*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -12,-60
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 30,0
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
fall = 1
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

;飛びあがり
[State 0, hit]
type = hitdef
triggerall = var(2)
trigger1 = animelem = 5
attr = S, SA
damage = ceil(ifelse((56*root,fvar(0))<7,7,(56*root,fvar(0)))),ceil(ifelse((56*root,fvar(0)*.25)<7,7,(56*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -12,-60
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 30,0
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = -3
air.type = Low
air.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
fall = 1
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = var(2) = 1
triggerall = !var(13)
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = S, SA
damage = ceil(ifelse((42*root,fvar(0))<7,7,(42*root,fvar(0)))),ceil(ifelse((42*root,fvar(0)*.25)<7,7,(36*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -12,-60
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 30,0
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
fall = 1
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = var(2) = 2
trigger1 = animelem = 6
attr = S, SA
damage = ceil(ifelse((28*root,fvar(0))<7,7,(28*root,fvar(0)))),ceil(ifelse((28*root,fvar(0)*.25)<7,7,(28*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -12,-60
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 30,0
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = -3
air.type = Low
air.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
fall = 1
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = var(2) = 2
trigger1 = animelem = 7
attr = S, SA
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(28*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -12,-60
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 30,0
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -3,-10*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
fall = 1
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

;ヒット音
[State 0, snd]
type = playsnd
trigger1 = movecontact = 1
value = 0,5+(moveguarded=1)*4
ignorehitpause = 1
channel = 2

[State 0, var]
type = varset
triggerall = movecontact = 1
trigger1 = !var(2)
trigger1 = animelemtime(5) >= 0
trigger2 = var(2) = 1
trigger2 = animelemtime(6) >= 0
var(13) = 1

[State 0, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, var]
type = parentvarset
trigger1 = movehit = 1
var(44) = 2

[State 220, CornerPush]
type = VarSet
trigger1 = animelemtime(6) >= 0
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, var]
type = varset
trigger1 = movehit = 1
var(50) = 1

[State 0, var]
type = varset
trigger1 = movehit = 1
var(10) = 1

[State 0, power]
type = poweradd
trigger1 = var(10)
value = 60

[State 0, var]
type = varset
trigger1 = 1
var(10) = 0

[State 0, end]
type = statetypeset
trigger1 = animelem = 11
movetype = I

[State 0, end]
type = changestate
trigger1 = var(2) = 0
trigger1 = animelem = 12
trigger2 = var(2) = [1,2]
trigger2 = animelem = 8
value = 1160

;------------------------------------------------------------------------------
;ファイアウォール(Stand/End)
[Statedef 1160]
type = U
movetype = I
physics = N
ctrl = 0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, vel]
type = velset
trigger1 = !time
x = 0

[State 0, anim]
type = changeanim
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 1160

[State 0, vel]
type = veladd
trigger1 = anim != 1160
y = .5

[State 0, vel]
type = velset
trigger1 = anim = 1160
x = 0
y = 0

[State 0, pos]
type = posset
trigger1 = anim = 1160
y = 0

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
trigger1 = anim = 1160 && animelemtime(4) = 6
value = 9000

;==============================================================================
;炎の探知機(Main.Ver)
[Statedef 1200]
type = S
movetype = I
physics = N
ctrl = 0
anim = 1200
velset = 0,0
poweradd = 0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, width]
type = width
trigger1 = 1
value = 30,0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State -2, CornerPush]
type = posadd
trigger1 = prevstateno = 222
trigger2 = prevstateno = 410
trigger3 = prevstateno = 420
x = (fvar(3)+(fvar(3)*.25)+1)
persistent = 0

[State 0, var]
type = varset
trigger1 = !time
var(6) = (var(6)|256)

[State 0, vel]
type = velset
trigger1 = time = 14
x = -3

[State 0, vel]
type = velmul
trigger1 = time >= 20
x = .8

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;炎の探知機(Stand)
[Statedef 1250]
type = U
movetype = I
physics = N
ctrl = 0
anim = 1250
sprpriority = -2

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
var(2) = ifelse(root,command = "214z",2,ifelse(root,command = "214y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = root,var(28)
var(2) = ifelse((root,var(28)&2**8),2,ifelse((root,var(28)&2**7),1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = root,var(59)
var(2) = 2

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

;追加分
[State 1100, VarSet]
type = ParentVarSet
trigger1 = root,var(8)
trigger1 = time = 0
fvar(3) = 0

[State 1100, VarSet]
type = null;ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = null;parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, btr]
type = bindtoroot
trigger1 = root,stateno = 1200
pos = 30,0

[State 0, snd]
type = playsnd
trigger1 = animelem = 9
value = 1,9

[state -2, helper]
type = helper
trigger1 = animelem = 9
helpertype = normal
name = "Finder"
stateno = 11210
id = 11210
postype = p1
pos = ceil(25*const(size.xscale)),ceil(-73*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = animelemtime(17) >= 0
trigger1 = !(time%2)
flag = Invisible

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, end]
type = changestate
trigger1 = animelemtime(17) = 0
value = 9002

;------------------------------------------------------------------------------
;炎の探知機（fire/Start）
[Statedef 11210]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11210
velset = 6,-3
sprpriority = 3

[State 0, var]
type = parentvarset
trigger1 = !time
var(14) = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = !time
var(2) = parent,var(2)

[State 0, vel]
type = velset
trigger1 = animelem = 5
x = ifelse(var(2)=2,1,ifelse(var(2)=1,.6,.4))
y = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(4) >= 0
y = .04

[State 0, end]
type = changestate
trigger1 = root,movetype = H
trigger1 = root,stateno != [120,159]
trigger2 = root,stateno = [801,802]
trigger3 = root,stateno = 1400 && root,var(13)
value = 11230

[State 0, end]
type = changestate
triggerall = !root,var(59)
triggerall = animelemtime(8) >= 1
triggerall = root,command != "holdb"
trigger1 = var(2)=0 && root,command!="holdx"
trigger2 = var(2)=1 && root,command!="holdy"
trigger3 = var(2)=2 && root,command!="holdz"
trigger4 = root,stateno = 3501
value = 11220

[State 0, end];AI
type = changestate
triggerall = root,var(59)
triggerall = animelemtime(8) >= 1

triggerall = p2statetype != L
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201

trigger1 = var(10):= 1
trigger1 = P2bodydist y > -45
trigger1 = p2bodydist x = [-15,15]
trigger1 = random < 150+(p2movetype=A)*100
trigger1 = var(10):= 1
trigger2 = var(2) = 2
trigger2 = root,stateno = 220 || root,stateno = 222 || root,stateno = 420 || root,stateno = 620
trigger3 = root,stateno = 3501
value = 11220

[State 0, end];AI
type = parentvarset
trigger1 = 1
var(56) = 1

[State 0, end];AI
type = parentvarset
trigger1 = var(10)
var(56) = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11211

;------------------------------------------------------------------------------
;炎の探知機（fire/hold）
[Statedef 11211]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11211

[State 0, reversal]
type = nothitby
trigger1 = 1
value = ,AT,AP

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = velset
trigger1 = !time
trigger1 = prevstateno = 11212
y = fvar(5)

[State 0, var]
type = varadd
trigger1 = 1
var(0) = 1

[State 0, vel]
type = veladd
trigger1 = var(0) = [0,40]
trigger2 = var(0) = [120,160]
y = -.04

[State 0, vel]
type = veladd
trigger1 = var(0) = [60,100]
trigger2 = var(0) = [180,220]
y = .041

[State 0, vel]
type = velset
trigger1 = p2dist x = [-18,18]
x = 0

[State 0, vel]
type = velset
trigger1 = p2dist x > 18
x = ifelse(var(2)=2,1.1,ifelse(var(2)=1,.8,.4))

[State 0, vel]
type = velset
trigger1 = p2dist x < -18
x = -ifelse(var(2)=2,1.1,ifelse(var(2)=1,.8,.4))

[State 0, reversal]
type = hitoverride
trigger1 = 1
attr = SCA,AA
slot = 1
stateno = 11212
time = -1

[State 0, reversal]
type = null;reversaldef
trigger1 = 1
reversal.attr = SCA,AA
pausetime = 0,0
sparkno = -1
hitsound = -1;s6,2
p1stateno = 11212

[State 0, end]
type = changestate
trigger1 = root,movetype = H
trigger1 = root,stateno != [120,159]
trigger2 = root,stateno = [801,802]
trigger3 = root,stateno = 1400 && root,var(13)
trigger4 = root,stateno = 11401
trigger5 = roundstate != 2
value = 11230

[State 0, end]
type = changestate
triggerall = !root,var(59)
trigger1 = var(2)=0 && (root,command!="holdx"&&root,command!="holdb")
trigger2 = var(2)=1 && (root,command!="holdy"&&root,command!="holdb")
trigger3 = var(2)=2 && (root,command!="holdz"&&root,command!="holdb")
trigger4 = var(0) >= 210
trigger5 = root,stateno = 3501
value = 11220

[State 0, end];AI
type = changestate
triggerall = root,var(59)

triggerall = p2statetype != L
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201

trigger1 = var(10):= 1
trigger1 = P2bodydist y > -45
trigger1 = p2bodydist x = [-15,15]
trigger1 = random < 100+(p2movetype=A)*100
trigger2 = var(2) = 2
trigger2 = root,stateno = 220 || root,stateno = 222 || root,stateno = 420 || root,stateno = 620
trigger3 = root,stateno = 3501
trigger4 = var(0) >= 210
trigger5 = root,stateno = 3501
value = 11220

[State 0, end];AI
type = parentvarset
trigger1 = 1
var(56) = 1

[State 0, end];AI
type = parentvarset
trigger1 = var(10)
var(56) = 0

[State 0, end]
type = parentvarset
trigger1 = var(10)
var(56) = 1

;------------------------------------------------------------------------------
;炎の探知機（fire/damege）
[Statedef 11212]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11212

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = null;varadd
trigger1 = 1
var(0) = 1

[State 0, var]
type = varadd
trigger1 = !time
var(1) = 1

[State 0, var]
type = varset
trigger1 = !time
fvar(5) = vel y

[State 0, var]
type = velset
trigger1 = !time
x = 0
y = 0

[State 0, vel]
type = null;veladd
trigger1 = var(0) = [0,40]
trigger2 = var(0) = [120,160]
y = -.04

[State 0, vel]
type = null;veladd
trigger1 = var(0) = [60,100]
trigger2 = var(0) = [180,220]
y = .041

[State 0, end]
type = changestate
trigger1 = var(1) = 3
trigger1 = animelem = 10
value = 11230

[State 0, end]
type = changestate
trigger1 = root,movetype = H
trigger1 = root,stateno != [120,159]
trigger2 = root,stateno = [801,802]
trigger3 = root,stateno = 1400 && root,var(13)
trigger4 = root,stateno = 11401
trigger5 = roundstate != 2
value = 11230

[State 0, end]
type = changestate
triggerall = !root,var(59)
triggerall = animelemtime(10) >= 0
trigger1 = var(2)=0 && (root,command!="holdx"&&root,command!="holdb")
trigger2 = var(2)=1 && (root,command!="holdy"&&root,command!="holdb")
trigger3 = var(2)=2 && (root,command!="holdz"&&root,command!="holdb")
trigger4 = var(0) >= 210
trigger5 = root,stateno = 3501
value = 11220

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11211

;------------------------------------------------------------------------------
;炎の探知機（fire/attack）
[Statedef 11220]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11240

[State 0, end];AI
type = parentvarset
trigger1 = 1
var(56) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(14) = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, vel]
type = velset
trigger1 = 1
x = 0
y = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 1,8

[State 0, explod]
type = explod
trigger1 = time = 4
anim = 6230
postype = p1
pos = ceil(34*const(size.xscale)),-10*ceil(const(size.yscale))
scale = const(size.xscale)*.84,const(size.yscale)*.84
sprpriority = 5
ownpal = 1

[State 0, explod]
type = explod
trigger1 = time = 10
anim = 6230
postype = p1
pos = ceil(-12*const(size.xscale)),-18*ceil(const(size.yscale))
scale = const(size.xscale)*.84,const(size.yscale)*.84
sprpriority = 5
ownpal = 1

[State 0, explod]
type = explod
trigger1 = time = 13
anim = 6230
postype = p1
pos = ceil(-30*const(size.xscale)),ceil(14*const(size.yscale))
scale = const(size.xscale)*.84,const(size.yscale)*.84
sprpriority = 5
ownpal = 1

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 2
attr = S, SA
damage = ceil(ifelse((28*root,fvar(0))<7,7,(28*root,fvar(0)))),ceil(ifelse((28*root,fvar(0)*.25)<7,7,(28*root,fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
guard.pausetime = 0,0
sparkno = -1;s6001
sparkxy = -5,0
guard.sparkno = s6010
hitsound = -1;s0,4
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 27
ground.hittime = 27
guard.slidetime = 19
guard.hittime = 19
guard.ctrltime = 19
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,ifelse(root,var(40)<12,-4+(root,var(40)*.64),0)
airguard.velocity = -3,ifelse(root,var(40)<12,-2+(root,var(40)*.64),0)
air.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
id = stateno
p2facing = 1

[state 4100, 1]
type = parentvaradd
trigger1 = parent,ishelper(10000)
trigger1 = movehit = 1
var(46) = 1
ignorehitpause = 1

[state 4100, 1]
type = parentvarset
trigger1 = parent,ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1
ignorehitpause = 1

[state 4100, 1]
type = parentvaradd
trigger1 = !parent,ishelper(10000)
trigger1 = movehit = 1
var(40) = 1
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = anim != 9999
trigger1 = !animtime
value = 9999

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;炎の探知機（fire/Lost）
[Statedef 11230]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11230

[State 0, vel]
type = velmul
trigger1 = prevstateno = 11210
x = .2
y = .2

[State 0, end];AI
type = parentvarset
trigger1 = 1
var(56) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(14) = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, end]
type = DestroySelf
trigger1 = !animtime

;==============================================================================
;ファイアイーグル(Main.Ver)
[Statedef 1300]
type = A
movetype = I
physics = N
ctrl = 0
anim = 1300
sprpriority = 2
poweradd = 40
facep2 = 1;-(prevstateno=[100,119])

[State 0, width]
type = width
trigger1 = 1
edge = 30,0

[State 0, var]
type = varset
trigger1 = !time
fvar(20) = vel x

[State 0, var]
type = varset
trigger1 = !time
fvar(21) = vel y

[State 0, vel]
type = velset
trigger1 = !time
x = 0
y = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 100,15
channel = 0
persistent = 0

[State 0, vel]
type = velset
trigger1 = animelem = 3
x = fvar(20)
y = fvar(21)
persistent = 0

[State 0, vel]
type = veladd
trigger1 = animelemtime(3) > 0
y = ifelse(var(5),.5,ifelse(var(4),.45,.62))

[State 0, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52

;------------------------------------------------------------------------------
;ファイアイーグル(Stand)
[Statedef 1350]
type = U
movetype = A
physics = N
ctrl = 0
anim = 1350
sprpriority = -2

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
var(2) = ifelse(root,command = "214z",2,ifelse(root,command = "214y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = root,var(28)
var(2) = ifelse((root,var(28)&2**8),2,ifelse((root,var(28)&2**7),1,0))

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = null;ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = null;parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, btr]
type = bindtoroot
trigger1 = time <= 1
pos = 0,20

[State 0, snd]
type = playsnd
trigger1 = anim = 1350
trigger1 = animelem = 3
value = 1,1

[State 0, snd]
type = playsnd
trigger1 = anim = 1350
trigger1 = animelem = 3
value = 1,11

[State 0, vel]
type = velset
trigger1 = anim = 1350
trigger1 = animelem = 3
x = 5
y = 4.8

[State 0, vel]
type = poweradd
trigger1 = anim = 1350
trigger1 = animelem = 2
value = 50

[State 0, explod]
type = explod
trigger1 = anim = 1350
trigger1 = animelemtime(3) >= 0
trigger1 = !(time%6)
anim = 6074
postype = p1
pos = 69*ceil(const(size.xscale)),-20*ceil(const(size.yscale))
bindtime = 3
scale = const(size.xscale)*.8,const(size.yscale)*.8
vel = 0,-1.4
sprpriority = 3
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 1350
trigger1 = animelemtime(3) >= 0
trigger1 = !(time%6)
anim = 6074
postype = p1
pos = 66*ceil(const(size.xscale)),-14*ceil(const(size.yscale))
bindtime = 3
scale = const(size.xscale)*.8,const(size.yscale)*.8
sprpriority = 3
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 1350
trigger1 = animelemtime(3) >= 0
trigger1 = !(time%6)
anim = 6074
postype = p1
pos = 60*ceil(const(size.xscale)),-11*ceil(const(size.yscale))
bindtime = 3
scale = const(size.xscale)*.8,const(size.yscale)*.8
vel = -1.4,0
sprpriority = 3
ownpal = 1

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1

[State 0, hit]
type = hitdef
triggerall = !movecontact
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = A, SA
damage = ceil(ifelse((56*root,fvar(0))<7,7,(56*root,fvar(0)))),ceil(ifelse((56*root,fvar(0)*.25)<7,7,(56*root,fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6004
sparkxy = -12,-10
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 0,0
givepower = 30,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3
guard.velocity = -3
air.type = high
air.velocity = -3,-6*(1.0-ifelse(root,var(40)>0,root,var(40)*.125,0))*(root,var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 19
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 124,108,90
palfx.sinadd = 90,90,90,4
fall = 0
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, var]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = movehit = 1
var(10) = 1

[State 0, power]
type = poweradd
trigger1 = var(10)
value = 60

[State 0, var]
type = varset
trigger1 = 1
var(10) = 0

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 8
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !var(8)
trigger1 = anim = 1350
trigger1 = movecontact
;trigger1 = pos y <= -10
value = 1370

[State 0, anim]
type = changeanim
trigger1 = !var(8)
trigger1 = anim = 1350
trigger1 = vel y > 0
trigger1 = pos y >= 10
value = 1360

[State 0, vel]
type = velset
trigger1 = anim = 1360
x = 0
y = 0

[State 0, pos]
type = posset
trigger1 = anim = 1360
y = 0

[State 0, assert]
type = null;assertspecial
trigger1 = anim = 1360
trigger1 = !(time%2)
flag = Invisible

[State 0, end]
type = changestate
trigger1 = anim = 1360
trigger1 = animelemtime(4) = 0
value = 9002

;------------------------------------------------------------------------------
;ファイアイーグル(Stand/End)
[Statedef 1370]
type = U
movetype = I
physics = N
ctrl = 0
anim = 10044
velset = -4,-1.5
sprpriority = -2

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, pos]
type = posadd
trigger1 = !time
x = 15

[State 0, vel]
type = veladd
trigger1 = anim = 10044
y = .4

[State 0, anim]
type = changeanim
trigger1 = anim = 10044
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 1360

[State 0, vel]
type = velset
trigger1 = anim = 1360
x = 0
y = 0

[State 0, pos]
type = posset
trigger1 = anim = 1360
y = 0

[State 0, assert]
type = null;assertspecial
trigger1 = anim = 1360
trigger1 = !(time%2)
flag = Invisible

[State 0, end]
type = changestate
trigger1 = anim = 1360
trigger1 = animelemtime(4) = 0
value = 9002

;==============================================================================
;地獄の業火(Main.Ver)
[Statedef 1400]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1400
velset = 0,0
poweradd = 40
sprpriority = 2
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = varset
trigger1 = !time
var(13) = 0

[State 0, var]
type = varset
trigger1 = !time
var(6) = (var(6)|256)

[State 0, nhb]
type = nothitby
trigger1 = var(13)
value = SCA

[State 0, nhb]
type = playerpush
trigger1 = var(13)
value = 0

[State 0, width]
type = width
trigger1 = !var(13)
value = 10,0

[State 0, width]
type = width
trigger1 = var(13)
edge = 150,0

[State 0, anim]
type = changeanim
trigger1 = var(13)
trigger1 = animelem = 18
value = anim
elem = 16

[State 0, pos]
type = null;posadd
trigger1 = var(13)
trigger1 = helper(10000),rootdist x < -35
x = ceil(6*const(size.xscale))

;AI
[state 3000]
type = ChangeState
triggerall = var(59)
trigger1 = !animtime
trigger1 = var(36) = 51
value = 1
ctrl = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;地獄の業火(Stand)
[Statedef 1450]
type = U
movetype = A
physics = N
ctrl = 0
anim = 1450
sprpriority = -2
poweradd = 0

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = null;parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, btr]
type = bindtoroot
trigger1 = time = 1
pos = 30,0

[State 0, snd]
type = playsnd
trigger1 = animelem = 4
value = 1,2

[State 0, pos]
type = posadd
trigger1 = animelemtime(3) = 9
x = 20
[State 0, pos]
type = posadd
trigger1 = animelemtime(4) = 0
x = 25

[State 0, width]
type = width
trigger1 = animelemtime(5) < 0
value = 15,25

[State 0, shake]
type = envshake
trigger1 = animelem = 4
time = 12
freq = 70
ampl = 4

[State 0, explod]
type = explod
trigger1 = animelem = 4
anim = 6074
postype = p1
pos = 54*ceil(const(size.xscale)),-39*ceil(const(size.yscale))
scale = const(size.xscale)*.84,const(size.yscale)*.84
sprpriority = 3
ownpal = 1

[State 0, hit]
type = hitdef
trigger1 = animelem = 4
attr = S, SA
damage = 0,0
priority = 4,Miss
hitflag = M
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
guard.pausetime = 0,13
sparkno = s6004
sparkxy = -16,-64
guard.sparkno = s6010
hitsound = s0,16
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 24
ground.hittime = 24
ground.velocity = 0
guard.velocity = -8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1stateno = 1451
p2stateno = 1470
yaccel = .36
id = 11400
p2facing = 1
numhits = 0

[State 220, CornerPush]
type = null;targetstate
trigger1 = numtarget(11400)
trigger1 = movehit = 1
value = 1470
id = 11400
ignorehitpause = 1

[State 220, CornerPush]
type = null;changestate
trigger1 = numtarget(11400)
trigger1 = target(11400),stateno = 1470
value = 1451
ignorehitpause = 1

[State 220, CornerPush]
type = VarSet
trigger1 = moveguarded = 1
fvar(3) = 11.9
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
trigger1 = !var(8)
var(43) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = IsHelper
triggerall = numtarget
triggerall = target,hitshakeover
trigger1 = movehit
trigger2 = projHit = 1
var(43) = 1
ignorehitpause = 1

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = 12
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = animelemtime(9) = 0
value = 9002

;------------------------------------------------------------------------------
;地獄の業火(Stand/Hit)
[Statedef 1451]
type = U
movetype = A
physics = N
ctrl = 0
anim = 1451
sprpriority = 3

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = 30,0

[State 0, state]
type = attackdist
trigger1 = 1
value = 0

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, width]
type = width
trigger1 = 1
value = 100,30

[State 0, var]
type = parentvarset
trigger1 = !time
var(13) = 1

[State 0, explod]
type = explod
trigger1 = !time
anim = 6210
postype = p1
pos = ceil(-50*const(size.xscale)),ceil(-10*const(size.yscale))
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1

[State 0, target]
type = targetbind
trigger1 = target,stateno = 1470
pos = ceil(61*const(size.xscale)),0
id = 11400

[State 0, target]
type = targetstate
triggerall = anim = 1451
trigger1 = animelem = 4
value = 1471

[State 0, snd]
type = playsnd
triggerall = anim = 1451
trigger1 = animelem = 5
value = 100,9
channel = 0

[State 0, target]
type = targetbind
triggerall = anim = 1451
trigger1 = animelem = 4
pos = ceil(64*const(size.xscale)),ceil(-109*const(size.yscale))
id = 11400

[State 0, target]
type = targetbind
trigger1 = anim = 1451
trigger1 = animelemtime(5) >= 0
trigger2 = anim = 1452
trigger2 = animelem = 1
pos = ceil(58*const(size.xscale)),ceil(-109*const(size.yscale))
time = 1
id = 11400

[State 0, target]
type = changeanim
trigger1 = time = 64
value = 1452

[State 0, snd]
type = playsnd
trigger1 = anim = 1451
trigger1 = animelemtime(3) = 0
value = 1,12

[State 0, explod]
type = explod
trigger1 = anim = 1451
trigger1 = animelemtime(4) = 0
anim = 6300
id = 6300
postype = p1
pos = ceil(56*const(size.xscale)),ceil(-120*const(size.yscale))
scale = const(size.xscale)*.5,const(size.yscale)*.5
sprpriority = -3
ownpal = 1
removetime = -1

[State 0, target]
type = removeexplod
trigger1 = anim = 1452
id = 6300

[State 0, target]
type = targetstate
trigger1 = anim = 1452
trigger1 = animelemtime(1) = 0
value = 1472
id = 11400

[State 0, target]
type = targetbind
trigger1 = anim = 1452
trigger1 = animelemtime(1) = 0
pos = ceil(60*const(size.xscale)),ceil(-15*const(size.yscale))
id = 11400

[State 0, snd]
type = playsnd
trigger1 = anim = 1452
trigger1 = animelemtime(1) = 0
value = 1,7

[State 0, shake]
type = envshake
trigger1 = anim = 1452
trigger1 = animelemtime(1) = 0
time = 20
freq = 70
ampl = -8

[State 0, target]
type = targetlifeadd
trigger1 = anim = 1452
trigger1 = animelemtime(1) = 0
value = ceil(ifelse(-112*root,fvar(0)>-7,-7,-112*root,fvar(0)))
id = 11400

[State 0, explod]
type = explod
trigger1 = anim = 1452
trigger1 = animelemtime(1) = 0
anim = 6200
postype = p1
pos = ceil(70*const(size.xscale)),ceil(-130*const(size.yscale))
scale = const(size.xscale)*1.08,const(size.yscale)*1.08
facing = facing
sprpriority = 10
ownpal = 1

[State 0, explod]
type = explod
trigger1 = anim = 1452
trigger1 = animelemtime(1) = 0
anim = 6074
postype = p1
pos = ceil(66*const(size.xscale)),ceil(-114*const(size.yscale))
scale = const(size.xscale)*1.6,const(size.yscale)*1.6
sprpriority = 5
ownpal = 1

;---------------------------------------
[state -2, helper]
type = helper
trigger1 = anim = 1452
trigger1 = animelem = 1
helpertype = normal
name = "hell fire"
stateno = 11450
id = 11450
ownpal = 1
pos = ceil(66*const(size.xscale)),ceil(-114*const(size.yscale))

[state -2, helper]
type = helper
trigger1 = anim = 1452
trigger1 = animelem = 1
helpertype = normal
name = "hell fire2"
stateno = 11451
id = 11451
ownpal = 1
pos = ceil(66*const(size.xscale)),ceil(-114*const(size.yscale))

[state -2, helper]
type = helper
trigger1 = anim = 1452
trigger1 = animelem = 1
helpertype = normal
name = "hell fire3"
stateno = 11452
id = 11452
ownpal = 1
pos = ceil(66*const(size.xscale)),ceil(-114*const(size.yscale))

[state -2, helper]
type = helper
trigger1 = anim = 1452
trigger1 = animelem = 1
helpertype = normal
name = "hell fire4"
stateno = 11453
id = 11453
ownpal = 1
pos = ceil(66*const(size.xscale)),ceil(-114*const(size.yscale))
;---------------------------------------

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = anim = 1452
trigger1 = animelem = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = anim = 1452
trigger1 = animelemtime(2) = 0
var(13) = 0

[State 0, end]
type = changestate
trigger1 = anim = 1452
trigger1 = animelemtime(2) = 3
value = 9002

;------------------------------------------------------------------------------
;地獄の業火(ENEMY)
[Statedef 1470]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = -1

[State 0, anim]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim2
trigger1 = !time
value = 1470

[State 0, self]
type = SelfState
trigger1 = time >= 240
value = 5050

;------------------------------------------------------------------------------
;地獄の業火(ENEMY2)
[Statedef 1471]
type = A
movetype = H
physics = N
ctrl = 0

[State 0, anim]
type = changeanim2
trigger1 = !time
value = 1471

[State 0, self]
type = SelfState
trigger1 = time >= 60
value = 5050

;------------------------------------------------------------------------------
;地獄の業火(ENEMY3)
[Statedef 1472]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = alive
x = 0
y = -8.5

[State 0, vel]
type = velset
trigger1 = time = 1
trigger1 = !alive
x = -5
y = -6

[State 0, vel]
type = veladd
trigger1 = 1
y = .36
;y = .36

[State 0, pal]
type = palfx
trigger1 = !time
color = 150
add = 128,24,0
mul = 124,108,90
sinadd = 90,90,90,4
time = 100

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = SelfAnimExist(7697)
value = 7697

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = !SelfAnimExist(7697)
value = 5030

[State 0, anim]
type = changeanim
trigger1 = anim != 7697
trigger1 = vel y >= -2
value = 5050
persistent = 0

[State 0, self]
type = SelfState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 5100

;==============================================================================
;ナパームボム(Main.Ver)
[Statedef 3000]
type = S
movetype = I
physics = N
ctrl = 0
anim = 3000
velset = 0,0
sprpriority = 2
facep2 = 1;-(prevstateno=[100,119])

[State 0, width]
type = width
trigger1 = 1
value = 20,0

[State 0, var]
type = varset
trigger1 = !time
var(6) = (var(6)|256)

[State 0, nhb]
type = nothitby
trigger1 = time = [1,60]
value = SCA
time = 4

[State 0, end]
type = changestate
trigger1 = var(59)
trigger1 = !animtime
value = 2

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;ナパームボム(Stand)
[Statedef 3050]
type = U
movetype = A
physics = N
ctrl = 0
anim = 3050
velset = 0,0
sprpriority = -2

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

;追加分
[State 1100, VarSet]
type = ParentVarSet
trigger1 = root,var(8)
trigger1 = time = 0
fvar(3) = 0

[State 1100, VarSet]
type = null;ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = null;parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, nhb]
type = nothitby
trigger1 = animelemtime(15) < 0
trigger2 = animelemtime(15) >= 3
value = SCA
time = 1

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = 15,0

[State 0, btr]
type = bindtoroot
trigger1 = time = 1
pos = 35,0

[State 0, btr]
type = null;posadd
trigger1 = !time
x = -35

[State 0, hit]
type = hitdef
trigger1 = animelem = 11
attr = S, HA
damage = 0,0
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
pausetime = 0,40
sparkno = s6000
sparkxy = -12,-60
guard.sparkno = s6010
hitsound = s0,1
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = High
ground.slidetime = 26
ground.hittime = 26
ground.velocity = -3
guard.velocity = -3
air.type = High
air.velocity = -2,ifelse(var(40)<12,-2+(var(40)*.16),0)
air.cornerpush.veloff = 0
air.hittime = 26
fall = 0
air.fall = 1
guard.kill = 0
yaccel = .36

[State 0, end]
type = parentvaradd
trigger1 = movehit = 1
var(40) = 1

[State 0, super]
type = superpause
trigger1 = animelem = 12
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = animelem = 12
anim = 7100
id = 7100
pos = ceil(16*const(size.xscale)),ceil(-94*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 5
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = animelem = 12
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = animelem = 12
value = 100,14
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 10
value = 1,9

[State 0, snd]
type = playsnd
trigger1 = animelem = 16
value = 0,15

[State 0, shake]
type = envshake
trigger1 = animelem = 15
time = 40
freq = 70
ampl = -5

[state -2, helper]
type = helper
trigger1 = animelem = 16
helpertype = normal
name = "Napalm"
stateno = 13010
id = 13010
postype = p1
pos = ceil(55*const(size.xscale)),ceil(-70*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = animelemtime(16) >= 3
trigger1 = !(time%2)
flag = Invisible

[State 0, end]
type = changestate
trigger1 = animelemtime(22) = 0
value = 9002

;------------------------------------------------------------------------------
;ナパームボム（fire）
[Statedef 13010]
type = A
movetype = A
physics = N
ctrl = 0
anim = 20000
velset = 7,0

[State 0, assert]
type = varset
trigger1 = !time
trigger1 = parent,Ishelper && parent,stateno = 3600
var(5) = 1
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[state -2, helper]
type = helper
triggerall = !(time%8)
triggerall = time < 58
trigger1 = !var(5)
trigger2 = var(5)
trigger2 = time < 23
helpertype = normal
name = "Napalm 1"
stateno = 13011
id = 13011
postype = p1
pos = ceil(0*const(size.xscale)),ceil(8*const(size.yscale))
size.xscale = const(size.xscale)*2
size.yscale = const(size.yscale)*1.8
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
triggerall = !(time%8)
triggerall = time < 58
trigger1 = var(5)
trigger1 = time >= 23
helpertype = normal
name = "Napalm dem"
stateno = 13012
id = 13011
postype = p1
pos = ceil(0*const(size.xscale)),ceil(8*const(size.yscale))
size.xscale = const(size.xscale)*2
size.yscale = const(size.yscale)*1.8
ownpal = 1
ignorehitpause = 1

[State 0, end]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = var(46)
var(46) = var(46)

[State 0, end]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State 0, end]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = var(21)
var(21) = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, end]
type = DestroySelf
;triggerall = !numhelper(13011)
trigger1 = time >= 58

;------------------------------------------------------------------------------
;ナパームボム（attack）
[Statedef 13011]
type = A
movetype = A
physics = N
ctrl = 0
anim = 13010
velset = 0,0
sprpriority = 4

[State 0, snd]
type = varset
trigger1 = parent,var(5)
var(5) = 1

[State 0, snd]
type = velset
trigger1 = animelem = 5
y = -3

[State 0, snd]
type = velset
trigger1 = animelem = 7
y = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 1,2
channel = 2;(time%16)+2

[State 0, explod]
type = explod
trigger1 = !time
anim = 8120
postype = p1
pos = 0,ceil(35*const(size.yscale))
scale = const(size.xscale)*.5,const(size.yscale)*.5
sprpriority = -3
ownpal = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1
size.xscale = .833
size.yscale = 1.07

[State 0, hit]
type = hitdef
trigger1 = !var(5)
trigger1 = !movecontact
trigger1 = animelemtime(2) >= 0
attr = S, HP
damage = ceil(ifelse((56*root,fvar(0))<7,7,(56*root,fvar(0)))),ceil(ifelse((56*root,fvar(0)*.25)<7,7,(56*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3,-4
guard.velocity = -8
air.type = Low
air.velocity = -3,-4
airguard.velocity = -3,-3.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
air.fall = 1
fall.recovertime = 18
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = var(5)
trigger1 = !movecontact
trigger1 = animelemtime(2) >= 0
attr = S, HP
damage = ceil(ifelse((56*.25*root,fvar(0))<7,7,(56*.25*root,fvar(0)))),ceil(ifelse((56*.25*root,fvar(0)*.25)<7,7,(56*.25*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3,-4
guard.velocity = -8
air.type = Low
air.velocity = -3,-4
airguard.velocity = -3,-3.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
air.fall = 1
fall.recovertime = 18
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, assert]
type = parentvaradd
trigger1 = parent,ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[state 4100, 1]
type = parentvarset
trigger1 = movecontact = 1
var(21) = 1
ignorehitpause = 1

[State 0, assert]
type = changeanim
trigger1 = !animtime
value = 9999

[State 0, assert]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
trigger2 = root,stateno != [120,159]

[State 0, assert]
type = destroyself
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;ナパームボム（attack）デム4発目以降
[Statedef 13012]
type = A
movetype = A
physics = N
ctrl = 0
anim = 13010
velset = 0,0
sprpriority = 4

[State 0, snd]
type = velset
trigger1 = animelem = 5
y = -3

[State 0, snd]
type = velset
trigger1 = animelem = 7
y = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 1,2
channel = 2;(time%16)+2

[State 0, explod]
type = explod
trigger1 = !time
anim = 8120
postype = p1
pos = 0,ceil(35*const(size.yscale))
scale = const(size.xscale)*.5,const(size.yscale)*.5
sprpriority = -3
ownpal = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1
size.xscale = .833
size.yscale = 1.07

[State 0, hit]
type = hitdef
trigger1 = !var(5)
trigger1 = !movecontact
trigger1 = animelemtime(2) >= 0
attr = S, HP
damage = ceil(ifelse((56*root,fvar(0))<7,7,(56*root,fvar(0)))),ceil(ifelse((56*root,fvar(0)*.25)<7,7,(56*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,0
sparkno = s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3,-4
guard.velocity = -8
air.type = Low
air.velocity = -3,-4
airguard.velocity = -3,-3.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
air.fall = 1
fall.recovertime = 18
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, assert]
type = parentvaradd
trigger1 = parent,ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[state 4100, 1]
type = parentvarset
trigger1 = movecontact = 1
var(21) = 1
ignorehitpause = 1

[State 0, assert]
type = changeanim
trigger1 = !animtime
value = 9999

[State 0, assert]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
trigger2 = root,stateno != [120,159]

[State 0, assert]
type = destroyself
trigger1 = anim = 9999
trigger1 = !numtarget

;==============================================================================
;CFHS(Main.Ver)
[Statedef 3100]
type = S
movetype = I
physics = N
ctrl = 0
anim = 3100
velset = 0,0
sprpriority = -1
facep2 = 1;-(prevstateno=[100,119])

[State 0, width]
type = width
trigger1 = 1
value = 20,0

[State 0, var]
type = varset
trigger1 = !time
var(6) = (var(6)|256)

[State 0, nhb]
type = nothitby
trigger1 = time = [1,60]
value = SCA
time = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;CFHS(Stand)
[Statedef 3150]
type = U
movetype = A
physics = N
ctrl = 0
anim = 3150
velset = 0,0
sprpriority = -2

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

;追加分
[State 1100, VarSet]
type = ParentVarSet
trigger1 = root,var(8)
trigger1 = time = 0
fvar(3) = 0

[State 1100, VarSet]
type = null;ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

;音
[State 0, snd]
type = playsnd
trigger1 = var(15)
value = 1,8
ignorehitpause = 1
channel = 4

;ガード音
[State 0, snd]
type = playsnd
trigger1 = var(16)
value = 0,9
ignorehitpause = 1
channel = 6

;発射音
[State 0, snd]
type = playsnd
trigger1 = animelemtime(16) = 0
trigger2 = animelemtime(16) = 2
trigger3 = animelemtime(16) = 4
trigger4 = animelemtime(16) = 8
trigger5 = animelemtime(16) = 10
trigger6 = animelemtime(16) = 11
trigger7 = animelemtime(16) = 15
trigger8 = animelemtime(16) = 15
trigger9 = animelemtime(16) = 16
trigger10= animelemtime(16) = 17
value = 1,10
ignorehitpause = 1
channel = 5

[State 0, end]
type = varset
trigger1 = var(15)
var(15) = 0
[State 0, end]
type = varset
trigger1 = var(16)
var(16) = 0

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, var]
type = null;parentvarset
trigger1 = root,var(44) != 2
var(44) = 1

[State 0, nhb]
type = nothitby
trigger1 = animelemtime(16) < 0
value = SCA
time = 1

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = 15,0

[State 0, btr]
type = bindtoroot
trigger1 = time = 1
pos = 30,0

[State 0, snd]
type = playsnd
trigger1 = animelem = 1
value = 100,11
channel = 0

[State 0, super]
type = superpause
trigger1 = animelem = 12
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = animelem = 12
anim = 7100
id = 7100
pos = ceil(16*const(size.xscale)),ceil(-94*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 5
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = animelem = 12
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = animelemtime(12) = 30
value = 100,12
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 15
value = 1,7

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 0
helpertype = normal
name = "CFHS1"
stateno = 13110
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 2
helpertype = normal
name = "CFHS2"
stateno = 13111
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 4
helpertype = normal
name = "CFHS3"
stateno = 13112
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 8
helpertype = normal
name = "CFHS4"
stateno = 13113
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 10
helpertype = normal
name = "CFHS5"
stateno = 13114
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 11
helpertype = normal
name = "CFHS6"
stateno = 13115
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 15
helpertype = normal
name = "CFHS7"
stateno = 13116
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 15
helpertype = normal
name = "CFHS8"
stateno = 13117
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 16
helpertype = normal
name = "CFHS9"
stateno = 13118
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[state -2, helper]
type = helper
trigger1 = animelemtime(16) = 17
helpertype = normal
name = "CFHS10"
stateno = 13119
id = 13110
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = animelemtime(24) >= 0
trigger1 = !(time%2)
flag = Invisible

[State 0, end]
type = changestate
trigger1 = animelemtime(29) = 4
value = 9002

;------------------------------------------------------------------------------
;CFHS（fire1）
[Statedef 13110]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 8,-1.4
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
movetype = I

[State 0, shake]
type = envshake
trigger1 = time = 15
time = 8
freq = 70
ampl = -5

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire2）
[Statedef 13111]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 8,1.4
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
movetype = I

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire3）
[Statedef 13112]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 6,4
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
movetype = I

[State 0, shake]
type = envshake
trigger1 = time = 15
time = 8
freq = 70
ampl = -5

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire4）
[Statedef 13113]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 6.4,2
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
movetype = I

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire5）
[Statedef 13114]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 6.4,-2
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
movetype = I

[State 0, shake]
type = envshake
trigger1 = time = 15
time = 8
freq = 70
ampl = -5

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire6）
[Statedef 13115]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 6,-4
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
movetype = I

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire7）
[Statedef 13116]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 4.2,-4
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
movetype = I

[State 0, shake]
type = envshake
trigger1 = time = 15
time = 8
freq = 70
ampl = -5

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire8）
[Statedef 13117]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 4.2,4
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
trigger2 = root,movetype = H
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
movetype = I

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire9）
[Statedef 13118]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 7.6,-1.6
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
trigger2 = root,movetype = H
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
movetype = I

[State 0, shake]
type = envshake
trigger1 = time = 15
time = 8
freq = 70
ampl = -5

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（fire10）
[Statedef 13119]
type = A
movetype = A
physics = N
ctrl = 0
anim = 11010
velset = 10,0
sprpriority = 3

[State 0, assert]
type = varset
trigger1 = root,var(9) = 2
fvar(0) = root,fvar(0)*.25

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, hit]
type = hitdef
trigger1 = !fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((35*root,fvar(0))<7,7,(35*root,fvar(0)))),ceil(ifelse((35*root,fvar(0)*.25)<7,7,(35*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = fvar(0)
trigger1 = !movecontact
attr = S, HP
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = -1;s6004
sparkxy = -10,-10
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = -1;s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -3,-5.5
guard.velocity = -8
air.type = Low
air.velocity = -3,-5.5
airguard.velocity = -3,-1.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13011
p2facing = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, scale]
type = parentvarset
trigger1 = parent,Ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(16) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = moveguarded = 1
var(18) = 1

[State 0, scale]
type = parentvaradd
trigger1 = parent,Ishelper(10000)
trigger1 = time = 14
var(15) = 1

[State 0, scale]
type = parentvaradd
trigger1 = !parent,Ishelper(10000)
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = changeanim
trigger1 = time = 15
trigger2 = root,movetype = H
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
movetype = I

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;CFHS（オラムダ1）
[Statedef 14950]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11010
velset = 3,3
sprpriority = 3

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, scale]
type = parentvaradd
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = DestroySelf
trigger1 = time = 15

;------------------------------------------------------------------------------
;CFHS（オラムダ2）
[Statedef 14951]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11010
velset = 3,-3
sprpriority = 3

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, scale]
type = parentvaradd
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = DestroySelf
trigger1 = time = 15

;------------------------------------------------------------------------------
;CFHS（オラムダ3）
[Statedef 14952]
type = A
movetype = I
physics = N
ctrl = 0
anim = 11010
velset = 5,0
sprpriority = 3

[State 0, assert]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time
scale = const(size.xscale)+(.058*time),const(size.yscale)+(.058*time)

[State 0, scale]
type = parentvaradd
trigger1 = time = 14
var(17) = 1

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 6240
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, end]
type = DestroySelf
trigger1 = time = 15

;==============================================================================
;灼熱のアンク(Main.Ver)
[Statedef 3200]
type = S
movetype = I
physics = S
ctrl = 0
anim = 3200
velset = 0,0
sprpriority = 2
facep2 = 1;-(prevstateno=[100,119])

[State 0, var]
type = varset
trigger1 = !time
var(2) = ifelse(command = "623aa2",2,ifelse(command = "623aa1",1,0))

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;灼熱のアンク(Stand)
[Statedef 3250]
type = U
movetype = I
physics = N
ctrl = 0
anim = 3250
velset = 0,0
sprpriority = -2

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, var]
type = null;varset
trigger1 = !time
var(2) = ifelse(root,command = "623aa2",2,ifelse(root,command = "623aa1",1,0))

[State 1000, VarSet]
type = null;varset
trigger1 = !time
triggerall = root,var(28)
var(2) = ifelse((root,var(28)&2**16),2,ifelse((root,var(28)&2**15),1,0))

[State 1100, VarSet]
type = VarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(4) = root,fvar(3)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4) < .1
trigger2 = NumTarget
trigger2 = target,statetype = A && target,gethitvar(groundtype)!=3
trigger3 = movetype = H
fvar(4) = 0

[State -2, CornerPush]
type = PosAdd
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
trigger1 = StateType != A || (StateType = A && !var(8))
trigger1 = root,fvar(5)
x = -fvar(4)

[State -2, CornerPush]
type = VarSet
trigger1 = (!var(8) || var(43)) && fvar(4)
trigger1 = NumHelper(10000)
trigger1 = !NumHelper(7000) && !NumHelper(8000) && !root,NumHelper(7000) && !root,NumHelper(8000)
fvar(4) = fvar(4)*.75

[State 1100, VarSet]
type = ParentVarSet
triggerall = !root,var(8)
trigger1 = Time = 0
fvar(3) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = fvar(4)
trigger1 = Time = 0
fvar(3) = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = 15,0

[State 0, btr]
type = bindtoroot
trigger1 = time = 1
pos = 30,0

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 100,4
channel = 0

[State 0, snd]
type = playsnd
trigger1 = animelem = 3
value = 1,9

[state -2, helper]
type = helper
trigger1 = animelem = 3
helpertype = normal
name = "Burning Ankh"
stateno = 13210
postype = p1
ownpal = 1

[State 0, assert]
type = assertspecial
trigger1 = animelemtime(3) >= 0
trigger1 = !(time%2)
flag = Invisible

[State 0, end]
type = changestate
trigger1 = animelemtime(13) = 4
value = 9002

;------------------------------------------------------------------------------
;灼熱のアンク（fire/Start）
[Statedef 13210]
type = S
movetype = I
physics = N
ctrl = 0
anim = 20000
sprpriority = 5

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = !time
var(2) = parent,var(2)

[State 0, var]
type = varset
trigger1 = !time
trigger1 = root,var(9) = 2
var(0) = 1

[State 0, var]
type = varset
trigger1 = root,var(9) = 2
var(1) = 1

[State 0, var]
type = varadd
trigger1 = 1;!NumHelper(7000) && !NumHelper(8000)
var(7) = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = var(7) >= 33
triggerall = root,power >= 1000
trigger1 = root,command!="holdx" && root,command!="holdy" && root,command!="holdz" && root,command!="holdb"
trigger2 = var(7) >= 1080
value = 13211

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = root,power >= 1000
triggerall = root,stateno != 3500
trigger1 = var(1)
trigger1 = var(7) > 33
value = 13211

[State 0, end]
type = DestroySelf
trigger1 = var(7) >= 33
trigger1 = root,command!="holdx" && root,command!="holdy" && root,command!="holdz" && root,command!="holdb"
trigger2 = root,var(13) && root,var(56)!=1
trigger3 = root,movetype = H
trigger3 = root,stateno != [120,159]
trigger4 = roundstate != 2

;------------------------------------------------------------------------------
;灼熱のアンク（fire/Attack）
[Statedef 13211]
type = S
movetype = A
physics = N
ctrl = 0
anim = 13210
poweradd = -1000
sprpriority = 5

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = !time
trigger1 = !numhelper(13200)
helpertype = normal
name = "super"
stateno = 13220
id = 13220

[State 0, snd]
type = playsnd
trigger1 = animelem = 2
value = 1,7

[State 0, explod]
type = explod
trigger1 = animelem = 2
anim = 6400
postype = p1
pos = -42*ceil(const(size.xscale)),0
scale = const(size.xscale)*.84,const(size.yscale)*.84
sprpriority = 5
facing = -1

[State 0, explod]
type = explod
trigger1 = animelem = 2
anim = 6401
postype = p1
pos = 48*ceil(const(size.xscale)),0
scale = const(size.xscale)*.5,const(size.yscale)*.5
sprpriority = 5

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1
ignorehitpause = 1
size.xscale = .833
size.yscale = 1.07

[State 0, hit]
type = hitdef
triggerall = !var(0)
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
attr = S, HP
damage = ceil(ifelse((28*root,fvar(0))<7,7,(28*root,fvar(0)))),ceil(ifelse((28*root,fvar(0)*.25)<7,7,(28*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,10
sparkno = -1;s6004
sparkxy = -10,-50
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = s0,9
getpower = 0,0
givepower = 10,0
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -3.5,-6
guard.velocity = -8
air.type = Low
air.velocity = -3.5,-6
airguard.velocity = -3.5,-2.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13200
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = var(0)
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
attr = S, HP
damage = ceil(ifelse((7*.25*root,fvar(0))<7,7,(7*.25*root,fvar(0)))),ceil(ifelse((7*.25*root,fvar(0)*.25)<7,7,(7*.25*root,fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,10
sparkno = -1;s6004
sparkxy = -10,-50
guard.sparkno = s6010
hitsound = -1;s0,5
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -3.5,-6
guard.velocity = -8
air.type = Low
air.velocity = -3.5,-6
airguard.velocity = -3.5,-2.5
air.cornerpush.veloff = 0
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.color = 150
palfx.time = 100
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
id = 13200
p2facing = 1

[State 0, end]
type = parentvaradd
trigger1 = parent,ishelper(10000)
trigger1 = movehit = 1
var(46) = 1

[State 0, end]
type = parentvaradd
trigger1 = !parent,ishelper(10000)
trigger1 = movehit = 1
var(40) = 1

[State 0, end]
type = parentvarset
trigger1 = movehit = 1
var(44) = 2

[State 0, scale]
type = parentvarset
trigger1 = parent,ishelper(10000)
trigger1 = movecontact = 1
var(21) = 1

[State 0, end]
type = changeanim
trigger1 = !animtime
value = 9999

[State 0, end]
type = statetypeset
trigger1 = anim = 9999
trigger2 = root,movetype = H
trigger2 = root,stateno != [120,159]
movetype = I

[State 0, end]
type = DestroySelf
trigger1 = anim = 9999
trigger1 = !numtarget

;------------------------------------------------------------------------------
;灼熱のアンク・暗転
[Statedef 13220]
ctrl = 0
anim = 20000

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,18
channel = 0

[State 0, super]
type = superpause
trigger1 = time
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1

[State 0, explod]
type = explod
trigger1 = time
anim = 7100
id = 7100
pos = ceil(28*const(size.xscale)),ceil(-98*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 5
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = time
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999

[State 0, end]
type = DestroySelf
trigger1 = time

;===========================================================================
;STAND_CRASH
[Statedef 4000]
type = U
movetype = H
physics = N
velset = 0,0

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, var]
type = varadd
trigger1 = !time
var(52) = 27
ignorehitpause = 1

[State 0, pause]
type = pause
trigger1 = time = 1;!time
time = 6
movetime = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,22

[State 0, explod]
type = explod
trigger1 = !time
anim = 7600
id = 7600
pos = 160,120
postype = left
bindtime = -1
removetime = 8
scale = .833,1.08
sprpriority = -20
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = numexplod(7600)
flag = NoFG
flag2 = NoBG

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),4000,4010)

[State 0, anim]
type = changeanim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 4030

[State 0, anim]
type = changeanim
triggerall = anim = 4030
trigger1 = !animtime
value = anim
elem = 3

[State 0, state]
type = statetypeset
trigger1 = !time
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 4001

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
value = 4030

;---------------------------------------------------------------------------
;HITG_SLIDE
[Statedef 4001]
type = S
movetype = H
physics = S

[State 0, vel]
type = velset
trigger1 = !var(52)
x = -8
persistent = 0

[State 0, anim]
type = changeanim
triggerall = prevstateno = 4000
trigger1 = !var(52)
value = 5006 + (GetHitVar(groundtype)=2)*10

[State 0, vel]
type = velmul
trigger1 = !var(52)
x = .9

[State 0, vel]
type = velset
trigger1 = !var(53)
x = 0

[State 0, defence]
type = defencemulset
trigger1 = !var(53)
value = 1

[State 0, explod]
type = explod
trigger1 = !var(52)
anim = 8030
id = 8030
pos = 0,0
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
persistent = 0

[State 0, end]
type = changestate
trigger1 = !var(53)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;HITA_UP (initial going up)
[Statedef 4030]
type = A
movetype = H
physics = N
ctrl = 0

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, hitvel]
type = hitvelset
trigger1 = prevstateno = 4000
trigger1 = !time
x = 1
y = 1

[State 0, vel]
type = velmul
trigger1 = prevstateno = 4000
trigger1 = !time
y = 1.1

[State 0, vel]
type = velset
trigger1 = prevstateno = 4100
trigger1 = !time
x = -2.5
y = -2.5

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = !var(53)
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 5040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = !var(53)
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 5050

[State 0, end]
type = changestate
trigger1 = !animtime
value = 4035

;---------------------------------------------------------------------------
;HITA_UP_T (transition)
[Statedef 4035]
type = A
movetype = H
physics = N

[State 0, anim]
type = null;changeanim
trigger1 = !time
trigger1 = SelfAnimExist(5035)
trigger1 = anim != [5051,5059]
trigger1 = anim != 5090
value = 5035

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = !var(53)
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 5040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = !var(53)
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 5050

;---------------------------------------------------------------------------
;HITG_SHAKE
[Statedef 4100]
type = S
movetype = H
physics = N
velset = 0,0

[State 0, pos]
type = posadd
trigger1 = !time
x = -15

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = statetype != A
value = 4100

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = statetype = A
value = 4030

[State 0, var]
type = varadd
trigger1 = !time
var(52) = 27
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = !time
var(53) = 50
ignorehitpause = 1

[State 0, pause]
type = pause
trigger1 = time = 1;!time
time = 6
movetime = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,22

[State 0, explod]
type = explod
trigger1 = !time
anim = 7600
id = 7600
pos = 160,120
postype = left
bindtime = -1
removetime = 8
scale = .833,1.08
sprpriority = -30
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = numexplod(7600)
flag = NoFG
flag2 = NoBG

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim

[State 0, state] ;State type gets set to aerial if getting hit up
type = statetypeset
trigger1 = !time
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 4001

[State 0, end]
type = changestate
triggerall = time > 1
trigger1 = !var(52)
value = 4030

;===========================================================================
;スタンド消去
[Statedef 9000]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -2

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posset
trigger1 = time = 1
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 0,15

[State 0, assert]
type = assertspecial
trigger1 = (time = [8,32]) && !(time%2)
flag = Invisible

[State 0, scale]
type = angledraw
trigger1 = time > 20
scale = (const(size.xscale)-(.08*(time-20))),(const(size.yscale)+(.06*(time-20)))

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = time = 32
value = 20000

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = time >= 32
value = 10000
;===========================================================================
;スタンド消去2
[Statedef 9001]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -2

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posset
trigger1 = time = 1
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 10
value = 0,15

[State 0, assert]
type = assertspecial
trigger1 = (time = [8,20]) && !(time%2)
flag = Invisible

[State 0, scale]
type = angledraw
trigger1 = time > 10
scale = (const(size.xscale)-(.08*(time-10))),(const(size.yscale)+(.06*(time-10)))

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = time = 20
value = 20000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = time >= 20
value = 10000

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0 

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

;===========================================================================
;スタンド消去3
[Statedef 9002]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = -2

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, anim]
type = changeanim
trigger1 = 1
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posset
trigger1 = time = 1
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 0,15

[State 0, assert]
type = assertspecial
trigger1 = (time = [0,12]) && !(time%2)
flag = Invisible

[State 0, scale]
type = angledraw
trigger1 = time > 0
scale = (const(size.xscale)-(.08*(time-0))),(const(size.yscale)+(.06*(time-0)))

[State 0, anim]
type = changeanim
trigger1 = !IsHelper
trigger1 = time = 12
value = 20000

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, end]
type = changestate
trigger1 = IsHelper
trigger1 = time >= 12
value = 10000

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

;音
[State 0, snd]
type = playsnd
trigger1 = var(15)
value = 1,8
ignorehitpause = 1
channel = 4

[State 0, end]
type = varset
trigger1 = var(15)
var(15) = 0

;コーナープッシュ処理
[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = !fvar(3)
fvar(5) = 0 

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = numtarget
trigger1 = target,BackEdgeBodyDist <= 5 || target,FrontEdgeBodyDist <= 5
fvar(5) = 1

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = movecontact
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
trigger1 = fvar(3) = [0,.1]
trigger2 = NumTarget
trigger2 = target,statetype = A && target,stateno != [5070,5071]
trigger3 = root,fvar(3)
fvar(3) = 0

[State -2, CornerPush]
type = PosAdd
triggerall = IsHelper
triggerall = fvar(3)
triggerall = fvar(5)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
x = -fvar(3)

[State -2, CornerPush]
type = VarSet
triggerall = IsHelper
triggerall = fvar(3)
triggerall = !numhelper(7000) && !numhelper(8000) && !root,numhelper(7000) && !root,NumHelper(8000)
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = !target,gethitvar(hitshaketime)
fvar(3) = fvar(3)*.75

;---------------------------------------------------------------------------
;被ダメ時スタンド消去(スタンド被ダメ)
[Statedef 9500]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9500
velset = 0,0
sprpriority = -1

[State 12200, VarSet]
type = VarSet
trigger1 = time = 0
var(20) = GetHitVar(damage)

[State -1, Run Fwd]
type = ParentVarAdd
triggerall = root,var(1) = (0,88]
trigger1 = time = 0
var(1) = -2-ceil(var(20)*.25)
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = HitShakeOver
value = 9520

;---------------------------------------------------------------------------
;被ダメ時スタンド消去(本体被ダメ)
[Statedef 9505]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9500
velset = 0,0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = root,HitShakeOver
value = 9520

;---------------------------------------------------------------------------
;スタンドクラッシュ時スタンド消去
[Statedef 9510]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9500
velset = 0,0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = !root,var(52)
value = 9520

;---------------------------------------------------------------------------
;被ダメ時スタンド消去2
[Statedef 9520]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9501
velset = 0,0
sprpriority = -1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,15

[State 0, hitvel]
type = hitvelset
trigger1 = prevstateno = 9500
trigger1 = !time
x = 1
y = 1

[State 0, hitvel]
type = velset
trigger1 = prevstateno = 9505
trigger1 = !time
x = -2
y = -4

[State 0, pos]
type = posadd
trigger1 = !time
x = -5
y = -80

[State 0, pos]
type = posfreeze
trigger1 = time >= 4

[State 0, scale]
type = angledraw
trigger1 = time < 12
scale = (const(size.xscale)+(.08*time)),(const(size.yscale)-(.06*time))

[State 0, anim]
type = changeanim
trigger1 = time = 12
value = 20000

[State 0, end]
type = changestate
trigger1 = HitOver && time >= 12
value = 10000

;===========================================================================
;ガークラ時スタンド消去
[Statedef 9600]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9600
velset = -.6,0
sprpriority = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, pos]
type = posadd
trigger1 = !time
x = 15
y = -60

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, annim]
type = changeanim
trigger1 = root,stateno = 4100
value = 9600
elem = 1

[State 0, assert]
type = assertspecial
trigger1 = animelemtime(2) >= 0
trigger1 = !(time%2)
flag = invisible
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 10000

;===========================================================================
;スタンド待機1
[Statedef 10000]
type = U
movetype = I
physics = N
anim = 20000
ctrl = 0
velset = 0,0
sprpriority = -1

[State 0, var];AI
type = parentvarset
trigger1 = root,var(39) != 10005
trigger1 = !time
var(39) = 0
ignorehitpause = 1

[State 0, shake]
type = stopsnd
trigger1 = 1
channel = 5

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, var]
type = parentvarset
trigger1 = parent,var(9) = 2
trigger1 = !time
var(19) = 2

[State 0, var]
type = parentvarset
trigger1 = !time
var(2) = 0

[State 0, var]
type = parentvarset
trigger1 = parent,var(9) = 2
trigger1 = !time
var(23) = 120

[State 0, var]
type = parentvarset
trigger1 = parent,var(9) != 0
var(9) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(12) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
fvar(10) = 0

[State 0, var]
type = varset
trigger1 = !time
var(3) = 0

[State 0, var]
type = varset
trigger1 = !time
var(4) = 0

[State 0, var]
type = varset
trigger1 = !time
var(5) = 0

[State 0, var]
type = varset
trigger1 = !time
var(12) = 0

[State 0, var]
type = varset
trigger1 = !time
var(13) = 0

[State 0, var]
type = varset
trigger1 = !time
var(50) = 0

[State 0, var]
type = varset
trigger1 = !time
var(44) = 0

[State 0, var]
type = varset
trigger1 = !time
var(45) = 0

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 0, var]
type = varset
trigger1 = !time
fvar(10) = 0

[State 0, end]
type = changestate
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
value = ifelse(root,stateno=4000,9510,9600)

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 3000
trigger2 = root,stateno = 3100
trigger3 = root,stateno = 3200
value = root,stateno + 50

;即キャン(スタンドを使わない攻撃からのキャンセル)AI用

[State 0, end];即キャン（地獄の業火）
type = changestate
TriggerAll = root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H

triggerall = P2StateType != A
triggerall = P2StateType != L
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201
;triggerall = enemynear(root,var(48)),prevstateno != [5120,5210]

trigger1 = root,stateno = 220
trigger1 = root,var(36) = 50
trigger1 = (root,p2bodydist x <= 120)
trigger1 = root,movecontact = 6
trigger2 = root,stateno = 210
trigger2 = root,var(36) = [1,2]
trigger2 = (root,p2bodydist x <= 130)
trigger2 = root,movehit = 6
trigger3 = root,stateno = 210 && root,prevstateno = 400
trigger3 = !root,var(36)
trigger3 = (root,p2bodydist x <= 120)
trigger3 = root,movehit = 6
value = 1450

[State 0, end];即キャン（暗転返しナパーム）
type = changestate
TriggerAll = root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 1000

triggerall = !var(37)
triggerall = !var(36)
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201
Triggerall = numhelper(50000)
Triggerall = helper(50000),var(7) >= 42
triggerall = P2MoveType = A
triggerall = Random < 200+(power/10)
Triggerall = (enemynear(root,var(48)),animtime<ifelse(p2bodydist x <-30,24,34))
triggerall = P2BodyDist X = [5-(enemynear(root,var(48)),pos y >-60&&facing!=enemynear(root,var(48)),facing)*45,100+(enemynear(root,var(48)),vel x>3)*15]
triggerall = P2bodydist y > -86

triggerall = P2StateType != L
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201
;triggerall = enemynear(root,var(48)),prevstateno != [5120,5210]

trigger1 = (root,stateno = [200,220]) || (root,stateno = 400)
value = 3050

[State 0, end];即キャン（暗転返しCFHS）
type = changestate
TriggerAll = root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 1000

triggerall = !root,var(37)
triggerall = !root,var(36)
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201
Triggerall = numhelper(50000)
Triggerall = helper(50000),var(7) >= 42
triggerall = P2MoveType = A
triggerall = Random < 300+(power/10)
Triggerall = (enemynear(root,var(48)),animtime<-42)
triggerall = P2BodyDist X = [5-(enemynear(root,var(48)),pos y >-60&&facing!=enemynear(root,var(48)),facing)*45,140+(enemynear(root,var(48)),vel x>3)*15]
triggerall = P2bodydist y > -86

triggerall = P2StateType != L
triggerall = P2stateno != 5120
triggerall = P2stateno != 5201
;triggerall = enemynear(root,var(48)),prevstateno != [5120,5210]

trigger1 = (root,stateno = [200,220]) || (root,stateno = 400)
value = 3150

;AIここまで

;即キャン(スタンドを使わない攻撃からのキャンセル)

[State 0, end];即キャン（灼熱のアンク）
type = changestate
TriggerAll = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 1000
triggerall = root,command = "623aa1" || root,command = "623aa2" || root,command = "623aa3" || root,command = "623b" || (root,var(28)&2**14) || (root,var(28)&2**15) || (root,var(28)&2**16)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 202
trigger3 = root,stateno = 210
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
value = 3250

[State 0, end];即キャン（ナパームボム）
type = changestate
TriggerAll = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 1000
triggerall = root,command = "236aa" || root,command = "236b" || (root,var(28)&2**12)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 202
trigger3 = root,stateno = 210
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
value = 3050

[State 0, end];即キャン（クロスファイアハリケーンスペシャル）
type = changestate
TriggerAll = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H && power >= 1000
triggerall = root,command = "214aa" || root,command = "214b" || (root,var(28)&2**13)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 202
trigger3 = root,stateno = 210
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
value = 3150

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 3500 && root,time = 3
value = 3550

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 1400
value = root,stateno + 50

[State 0, end];即キャン（ファイアウォール）
type = changestate
TriggerAll = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H
triggerall = root,command = "623x" || root,command = "623y" || root,command = "623z" || root,command = "623b" || (root,var(28)&2**3) || (root,var(28)&2**4) || (root,var(28)&2**5)
triggerall = !((root,var(28)&2**14||root,var(28)&2**15||root,var(28)&2**16)&&power>=1000)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 202
trigger3 = root,stateno = 210
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
value = 1150

[State 0, end];即キャン（地獄の業火）
type = changestate
TriggerAll = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H
triggerall = root,command = "63214x" || root,command = "63214y" || root,command = "63214z" || root,command = "63214b" || (root,var(28)&2**9) || (root,var(28)&2**10) || (root,var(28)&2**11)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 202
trigger3 = root,stateno = 210
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
value = 1450

[State 0, end];即キャン（クロスファイアハリケーン）
type = changestate
TriggerAll = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H
triggerall = root,command = "236x" || root,command = "236y" || root,command = "236z" || root,command = "236b" || (root,var(28)&2**0) || (root,var(28)&2**1) || (root,var(28)&2**2)
triggerall = !(root,var(28)&2**12&&power>=1000)
trigger1 = root,stateno = 200
trigger2 = root,stateno = 202
trigger3 = root,stateno = 210
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
value = 1050

[State 0, end];即キャン（炎の探知機）
type = changestate
TriggerAll = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H
triggerall = root,command = "214x" || root,command = "214y" || root,command = "214z" || root,command = "214b" || (root,var(28)&2**6) || (root,var(28)&2**7) || (root,var(28)&2**8)
triggerall = !(root,var(28)&2**13&&power>=1000)
triggerall = (!root,var(14) && !var(14))
trigger1 = root,stateno = 200
trigger2 = root,stateno = 202
trigger3 = root,stateno = 210
trigger4 = root,stateno = 220
trigger5 = root,stateno = 400
value = 1250

[State 0, end];即キャン（ファイアイーグル）(即キャンがない？)
type = null;changestate
TriggerAll = !root,var(59)
triggerall = roundstate = 2
triggerall = root,movetype != H
triggerall = root,statetype = A
triggerall = root,command = "236x" || root,command = "236y" || root,command = "236z" || root,command = "236b" || (root,var(28)&2**0) || (root,var(28)&2**1) || (root,var(28)&2**2)
triggerall = !(root,var(28)&2**11&&power>=1000)
trigger1 = root,stateno = 600
trigger2 = root,stateno = 610
trigger3 = root,stateno = 620
value = 1350

[State 0, 4]
type = ChangeState
triggerall = !root,var(0)
triggerall = root,time = 1
trigger1 = root,stateno = 120 && root,statetype != A
trigger2 = root,stateno = [130,132]
trigger3 = root,stateno = 150
trigger4 = root,stateno = 152
trigger5 = root,stateno = 154; || root,stateno = 155
value = 125

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 700 && root,time = 1
value = 750

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = !root,var(0)
trigger1 = root,stateno = 801 && root,time = 5
value = 850

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 222 && root,time = 1
value = 322

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 410 && root,time = 1
value = 510

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 420 && root,time = 1
value = 520

;---------------------------------------------------------------------------
;本体時ガード（スタンド）
[Statedef 125]
type = U
physics = U
sprpriority = 2

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 120, 1]
type = ChangeAnim
triggerall = anim != 125
trigger1 = root,anim = 120
trigger2 = root,anim = 130
trigger3 = root,anim = 132
value = 125

[State 120, 1]
type = ChangeAnim
triggerall = anim != 126
trigger1 = root,anim = 121
trigger2 = root,anim = 131
value = 126

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 150
value = 155
persistent = 0

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 151
value = 156
persistent = 0

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 152
value = 157
persistent = 0

[State 2600, ChangeState]
type = changeanim
trigger1 = root,stateno = [150,155];154
trigger1 = root,command = "holdback"
trigger1 = animelem = 4
value = anim
elem = 2
persistent = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = (parent,var(6)&128)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = (parent,var(6)&128)

[State 120, 5]
type = ChangeState
triggerall = time > 1
triggerall = root,time = 1
trigger1 = root,stateno = 150
trigger2 = root,stateno = 152
trigger3 = root,stateno = 154
value = 125

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(40) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State -2, CornerPush]
type = ParentVarSet
trigger1 = IsHelper
trigger1 = var(21)
trigger1 = time > 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(21)
var(21) = 0

[State 0, var]
type = parentvarset
trigger1 = var(44) = 2
var(44) = 2

[State 120, 5]
type = ChangeState
trigger1 = root,stateno != 120
trigger1 = root,stateno != [130,132]
trigger1 = root,stateno != 140
trigger1 = root,stateno != [150,155]
trigger2 = anim = 145 || anim = 146 || anim = 155 || anim = 156 || anim = 157
trigger2 = animtime = 0
value = 10000

;==============================================================================
;スタンド発現(Ground)
[Statedef 10900]
type = S
movetype = I
physics = S
anim = 10900
ctrl = 1-(var(59)>0)
sprpriority = 3

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,14

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,5
channel = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 8010
id = 8000
pos = -15,0
postype = p1
scale = 1,1
sprpriority = 3
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 0, pos]
type = posadd
trigger1 = !time
x = 30

[State 0, var]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, var]
type = varset
trigger1 = !time
var(19) = 40

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = (command = "x" || command = "b") && command != "holddown" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10202

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = (command = "x" || command = "b") && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10200

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "y" && command != "holddown" && command = "holdback"
trigger1 = statetype != A
trigger1 = !time
value = 10212

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "y" && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10210

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "z" && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10220

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = (command = "x" || command = "b") && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10400

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "y" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10410

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "z" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10420

;AI
[State 0, end]
type = ChangeState
triggerall = var(59)
trigger1 = var(36) = 51
trigger1 = statetype != A
trigger1 = !time
value = 10200

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;スタンド発現(Air)
[Statedef 10910]
type = A
movetype = I
physics = N
anim = 10910
ctrl = 0
sprpriority = 3

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,14

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,5
channel = 0

[State 0, pos]
type = posadd
trigger1 = !time
x = 30

[State 0, var]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, var]
type = varset
trigger1 = !time
var(19) = 40

[State 0, end]
type = changestate
trigger1 = command = "x"
trigger1 = statetype = A
trigger1 = !time
value = 10600

[State 0, end]
type = changestate
trigger1 = command = "y"
trigger1 = statetype = A
trigger1 = !time
value = 10610

[State 0, end]
type = changestate
trigger1 = command = "z"
trigger1 = statetype = A
trigger1 = !time
value = 10620

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,ifelse(((var(6)&4)||(var(6)&8)),.45,.62))

[State 1100, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;------------------------------------------------------------------------------
;スタンド出現攻撃
[Statedef 10950]
type = S
movetype = A
physics = N
ctrl = 0
anim = 10950
poweradd = 0
sprpriority = 0
facep2 = 1

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, pos]
type = posadd
trigger1 = !time
x = 15

[State 0, pos]
type = posadd
trigger1 = time = 1
x = 15

[State 0, var]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, pos]
type = velset
trigger1 = time = 1
x = 10

[State 0, pos]
type = velset
trigger1 = time = 10
x = 0


[State 0, assert]
type = posadd
trigger1 = animelemtime(20) >= 0
trigger1 = (Facing*Helper(20000),Facing*Helper(20000),RootDist X*1) > 35
x = -6

[State 0, pos]
type = playerpush
trigger1 = animelemtime(20) >= 0
value = 0
[State 0, pos]
type = velset
trigger1 = animelem = 23
x = 0

[State 0, var]
type = varset
trigger1 = !time
var(19) = 40

[State 0, snd]
type = playsnd
trigger1 = !time
value = 0,14

[State 0, explod]
type = explod
trigger1 = !time
anim = 10960
postype = p1
pos = 0,ceil(-63*const(size.yscale))
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1

[State 0, explod]
type = explod
trigger1 = !time
anim = 10961
postype = p1
pos = ceil(-21*const(size.xscale)),ceil(-77*const(size.yscale))
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1

[State 0, explod]
type = explod
trigger1 = !time
anim = 10961
postype = p1
pos = ceil(21*const(size.xscale)),ceil(-77*const(size.yscale))
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,6
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(8)
trigger1 = animelem = 9
value = 0,19

[state 0, helper]
type = helper
trigger1 = animelem = 3
helpertype = normal
name = "Image"
stateno = 10955
id = 10955
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0

[state 0, helper]
type = helper
trigger1 = animelem = 22
helpertype = normal
name = "Image"
stateno = 10956
id = 10956
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0

[State 0, explod]
type = explod
triggerall = !var(8)
trigger1 = animelem = 9
anim = 8120
id = 8100
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ownpal = 1

[State 0, explod]
type = explod
triggerall = !var(8)
trigger1 = animelem = 9
anim = 8130
id = 8100
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ownpal = 1

[State 0, explod]
type = explod
triggerall = !var(8)
trigger1 = animelem = 7
anim = 6230
id = 6230
postype = p1
pos = ceil(-70*const(size.xscale)),ceil(-76*const(size.yscale))
bindtime = 18
vel = 3.4,0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, explod]
type = explod
triggerall = !var(8)
trigger1 = animelem = 7
anim = 6240
id = 6240
postype = p1
pos = ceil(-78*const(size.xscale)),ceil(-34*const(size.yscale))
bindtime = 18
vel = 3.4,0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1

[State 0, explod]
type = explod
triggerall = !var(8)
trigger1 = animelem = 9
anim = 6230
id = 6230
postype = p1
pos = ceil(-3*const(size.xscale)),ceil(-73*const(size.yscale))
bindtime = 18
vel = 3.4,0
scale = const(size.xscale),const(size.yscale)
sprpriority = -5
ownpal = 1

[State 0, explod]
type = explod
triggerall = !var(8)
trigger1 = animelem = 9
anim = 6240
id = 6240
postype = p1
pos = ceil(8*const(size.xscale)),ceil(-32*const(size.yscale))
bindtime = 18
vel = 3.4,0
scale = const(size.xscale),const(size.yscale)
sprpriority = -5
ownpal = 1

[State 0, shake]
type = envshake
triggerall = !var(8)
trigger1 = animelem = 9
time = 14
freq = 70
ampl = 5

[state -2, helper]
type = helper
triggerall = roundstate = 2
trigger1 = !numhelper(6300)
trigger1 = movehit = 1
helpertype = normal
name = "fire helper"
stateno = 6300
id = 6300
postype = p2
ownpal = 1

[State 0, hit]
type = hitdef
trigger1 = animelemtime(2) >= 0 
trigger1 = animelemtime(8) < 0 
trigger1 = !movecontact
attr = S, SA
damage = ceil(ifelse((14*fvar(0))<7,7,(14*fvar(0)))),ceil(ifelse((14*fvar(0)*.25)<7,7,(14*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6004
sparkxy = -12,-70
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 40*!(var(9)=2),0
givepower = 20*!(var(9)=2),0
ground.type = Low
ground.slidetime = 19
ground.hittime = 19
guard.slidetime = 15
guard.hittime = 15
guard.ctrltime = 15
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -2.5,ifelse(var(40)<12,-8+(var(40)*.64),0)
air.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
id = 410
p2facing = 1

[State 1100, 攻撃フラグリセット①]
type     = varset
trigger1 = AnimElem = 8
var(8) = 0

[State 1100, 攻撃フラグリセット①]
type     = MoveHitReSet
trigger1 = AnimElem = 8
Persistent = 0

[State 0, hit]
type = hitdef
triggerall = !var(8)
trigger1 = animelem = 9
attr = S, SA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6004
sparkxy = -14,-52
guard.sparkno = s6010
hitsound = s0,5
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = Low
ground.slidetime = 22;18
ground.hittime = 22;18
ground.velocity = -7,ifelse(var(40)<12,-9+(var(40)*.64),0)
guard.velocity = -8
air.type = Low
air.velocity = -7,ifelse(var(40)<12,-9+(var(40)*.64),0)
air.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.fall = 1
fall.recovertime = 18
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = VarSet
trigger1 = !time
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = posset
trigger1 = !animtime
;trigger1 = time = 47
x = helper(20000),pos x+(30*(facing))

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 10955]
type = S
movetype = I
physics = N
anim = 10950
ctrl = 0
velset = 0,0
sprpriority = -3

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, end]
type = DestroySelf
trigger1 = animelem = 8
trigger2 = root,movetype = H

;------------------------------------------------------------------------------
[Statedef 10956]
type = S
movetype = I
physics = N
anim = 10952
ctrl = 0
velset = 0,0
sprpriority = -3

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, assert]
type = posadd
trigger1 = (Facing*Helper(20000),Facing*Helper(20000),RootDist X*1) > 35
x = -6

[State 0, end]
type = DestroySelf
trigger1 = (Facing*Helper(20000),Facing*Helper(20000),RootDist X*1) <= 35
trigger2 = root,animelemtime(23) = 0
trigger3 = root,stateno != 10950

;===========================================================================
;スタンド解除（Ground）
[Statedef 900]
type = S
movetype = I
physics = S
anim = 900
ctrl = 1
sprpriority = 0

[State 0, pos]
type = nothitby
trigger1 = time <= 4
value = SCA

[State 0, pos]
type = posadd
trigger1 = !time
x = -30

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 10901
id = 10000
pos = 30,0
postype = p1
scale = const(size.xscale),const(size.yscale)
bindtime = -1
sprpriority = -1
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スタンド解除（Air）
[Statedef 910]
type = A
movetype = I
physics = N
ctrl = 1
anim = 44
sprpriority = 0

[State 0, pos]
type = posadd
trigger1 = !time
x = -30

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 10901
id = 10000
pos = 15,0
postype = p1
scale = const(size.xscale),const(size.yscale)
bindtime = -1
sprpriority = -1
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(8)
y = ifelse((var(6)&16),.5,ifelse(((var(6)&4)||(var(6)&8)),.45,.62))

[State 1100, ChangeState]
type = ChangeState
triggerall = !var(8)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
;本体待機状態
[Statedef 20000]
type = U
movetype = I
physics = N
anim = 20000
ctrl = 0
sprpriority = 0

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -15,0

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, end]
type = changestate
triggerall = anim = 20000
triggerall = root,movetype != H
triggerall = root,anim != [5000,5999]
trigger1 = root,stateno = [10900,10950]
trigger2 = root,var(0)
value = 20001

;---------------------------------------------------------------------------
;スタンドモード時本体
[Statedef 20001]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 10900
value = 20900
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 10910
value = 20910
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 10950
value = 20950
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,var(8)
trigger2 = (root,var(6)&128)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, anim]
type = changeanim
triggerall = animelemtime(2) = 2
trigger1 = anim = 5000 || anim = 5001 || anim = 5002
trigger2 = anim = 5010 || anim = 5011 || anim = 5012
trigger3 = anim = 5020 || anim = 5021 || anim = 5022
trigger4 = anim = 5030 || (anim = 5070 && root,stateno=5070)
value = anim
elem = ifelse(anim=5030,3,2)

[State 0, anim]
type = changeanim
triggerall = root,time
triggerall = anim != root,anim-10000
triggerall = SelfAnimExist(root,anim-10000)
trigger1 = root,stateno = 10
trigger2 = root,stateno = [12,155]
trigger3 = root,stateno = [5000,5999]
trigger4 = root,stateno = 4900
trigger5 = root,stateno = [800,820]
value = root,anim-10000

[State 0, anim]
type = changeanim
triggerall = anim != [20500,20501]
trigger1 = root,statetype = S
trigger1 = anim = 12 && !animtime
trigger2 = root,stateno = 0 && anim != 47 && anim != 20900
trigger3 = anim = 47 && !animtime
trigger4 = root,stateno = [10200,10220]
trigger4 = (root,prevstateno != [100,105]) || ((anim=101||anim=106)&&!animtime)
value = 20500+(random%2)

[State 0, anim]
type = changeanim
triggerall = anim != 11
trigger1 = root,statetype = C
trigger1 = anim = 10 && !animtime
trigger2 = root,stateno = 11 && anim != 10
value = 11

[State 0, anim]
type = changeanim
triggerall = anim = 100 || anim = 105
trigger1 = !root,vel x
trigger1 = root,stateno = [10200,10420]
value = anim+1

[State 0, anim]
type = changeanim
triggerall = anim != 10 || anim = 11
triggerall = (root,stateno = [10400,10420]) || (root,stateno = 10510)
trigger1 = ((root,prevstateno != [100,105]) && root,time = 1) || ((anim=101||anim=106)&&!animtime)
value = 10
elem = 2

[State 0, anim]
type = changeanim
triggerall = anim != 20910
trigger1 = root,stateno = [10600,10630]
value = 20910

[State 0, anim]
type = changeanim
triggerall = anim != 20950
trigger1 = root,stateno = 10700
value = 20950

[State 0, anim]
type = changeanim
triggerall = root,time = 1
trigger1 = root,stateno = 11000
trigger2 = root,stateno = 11200
value = 20950

[State 0, anim]
type = changeanim
triggerall = root,time = 1
trigger1 = root,stateno = [11300,11310]
value = ifelse(root,stateno=11300,21300,44)

[State 0, btr]
type = bindtoroot
trigger1 = root,movetype != H
trigger1 = root,stateno != [3800,3809]
pos = -30,0

[State 0, btr]
type = bindtoroot
trigger1 = root,movetype = H
trigger1 = root,hitshakeover || root,time = 1
pos = -15,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, spr]
type = sprpriority
trigger1 = 1
value = ifelse((root,stateno=[120,159])||(root,movetype=A),-1,2)

[State 0, pos]
type = posadd
trigger1 = !root,hitshakeover
x = 1*ifelse(time%2=0,-1,1)

;destroy
[State 0, end]
type = changestate
trigger1 = root,stateno = 900 
trigger2 = root,stateno = 910
trigger3 = root,stateno = 1300
trigger4 = root,stateno = 3500
trigger5 = root,anim < 10000
trigger6 = !root,var(0) && ((root,var(46)=gametime+1)||(anim!=root,anim-10000))
value = 20000

;Taunt
[State 0, end]
type = changestate
trigger1 = root,stateno = 195
value = 20195

;Throw
[State 0, end]
type = changestate
trigger1 = root,stateno = 801
value = 20800

;Throw
[State 0, end]
type = changestate
trigger1 = root,stateno = 10950
value = 20950

;Fire Wall
[State 0, end]
type = changestate
trigger1 = root,stateno = 11100
value = 21100

;Hell Fire
[State 0, end]
type = changestate
trigger1 = root,stateno = 11400
value = 21400

;Super
[State 0, end]
type = changestate
trigger1 = root,stateno = [3600,3800]
value = 23000

;destroy
[State 0, end]
type = changestate
trigger1 = root,stateno = 900 
trigger2 = root,stateno = 910
trigger3 = root,stateno = 3500
trigger4 = root,anim < 10000
trigger5 = !root,var(0) && ((root,var(46)=gametime+1)||(anim!=root,anim-10000))
value = 20000

;Lose
[State 0, end]
type = changestate
trigger1 = !root,alive
trigger1 = root,anim = [5000,5099]
value = 9500

;Time Up
[State 0, end]
type = changeanim
trigger1 = root,stateno = [170,175]
value = 170
persistent = 0

;------------------------------------------------------------------------------
;スタンドモード時本体・挑発
[Statedef 20195]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = root,var(8)
trigger2 = (root,var(6)&128)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -30,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, spr]
type = sprpriority
trigger1 = 1
value = -1

[State 0, anim]
type = changeanim
trigger1 = !time
value = ifelse(root,anim = 10195,195,20500)

[State 0, anim]
type = changeanim
trigger1 = anim = 195
trigger1 = !animtime
value = 20500

[State 0, end]
type = changestate
trigger1 = root,stateno != 195
value = 20001

;------------------------------------------------------------------------------
;スタンドモード時本体・投げ
[Statedef 20800]
type = U
movetype = I
physics = N
ctrl = 0
anim = 801
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = root,var(8)
trigger2 = (root,var(6)&128)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, btr]
type = bindtoroot
trigger1 = root,anim != 10802
pos = -30,20

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, spr]
type = sprpriority
trigger1 = 1
value = -1

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 802
value = 20950
elem = 10
persistent = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != [801,802]
value = 20001

;------------------------------------------------------------------------------
;スタンドモード時本体・ファイアウォール
[Statedef 21100]
type = U
movetype = I
physics = N
ctrl = 0
anim = 10
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = root,var(8)
trigger2 = (root,var(6)&128)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -30,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, spr]
type = sprpriority
trigger1 = 1
value = -3

[State 0, anim]
type = changeanim
trigger1 = anim = 11 && !animtime
value = 11
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,animelemno(0) = 6
value = 41
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 11110
value = 44
persistent = 0

[State 0, end]
type = changestate
trigger1 = root,stateno != [11100,11110]
value = 20001


;------------------------------------------------------------------------------
;スタンドモード時出現攻撃
[Statedef 20950]
type = U
movetype = I
physics = N
ctrl = 0
anim = 20950
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = root,var(8)
trigger2 = (root,var(6)&128)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = -30,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, spr]
type = sprpriority
trigger1 = 1
value = -3

[State 0, end]
type = changestate
trigger1 = root,stateno != 10950
value = 20001

;------------------------------------------------------------------------------
;スタンドモード時本体・地獄の業火
[Statedef 21400]
type = U
movetype = I
physics = N
ctrl = 0
anim = 21400
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = root,var(8)
trigger2 = (root,var(6)&128)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, spr]
type = sprpriority
trigger1 = 1
value = -1

[State 0, pos]
type = posadd
triggerall = rootdist x > 30
trigger1 = root,stateno = 11400 && root,animelemtime(7) >= 0
trigger2 = root,stateno = 11401 && root,anim = 11406 && root,animelemtime(3) >= 0
x = ceil(8*const(size.xscale))

[State 0, btr]
type = bindtoroot
trigger1 = rootdist x < 30
pos = -30,0

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 11401 && root,animelemtime(11) < 0
trigger1 = animelem = 8
value = 21400
elem = 6

[State 0, end]
type = changestate
trigger1 = root,stateno != [11400,11401]
value = 20001

;------------------------------------------------------------------------------
;スタンドモード時本体・スパコン
[Statedef 23000]
type = U
movetype = I
physics = N
ctrl = 0
anim = 20950
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = root,var(8)
trigger2 = (root,var(6)&128)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(6) = (root,var(6)|128)

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -30,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, spr]
type = sprpriority
trigger1 = 1
value = -1

[State 0, anim]
type = changeanim
trigger1 = animelem = 12
trigger1 = root,animtime <= -8
value = 20950
elem = 10

[State 0, anim]
type = changeanim
trigger1 = root,stateno = 13305
trigger1 = root,time = 1
trigger1 = animelemtime(12) >= 0
value = 20950

[State 0, end]
type = changestate
trigger1 = root,stateno != [3600,3800]
value = 20001

;//////////////////////////////////////////////////////////////////////////////
; Helper
;//////////////////////////////////////////////////////////////////////////////
;==============================================================================
;勝利時画面移動停止
[Statedef 6000]
ctrl = 0
anim = 20000

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = roundstate != [3,4]
trigger1 = root,movetype = H

;===========================================================================
;オラムダ時画面移動停止
[Statedef 6001]
ctrl = 0
anim = 20000

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = root,stateno != 4900

;==============================================================================
;火炎エフェクト
[Statedef 6300]
ctrl = 0
anim = 20000

[State 0, pos]
type = posset
triggerall = numenemy
trigger1 = roundstate = 2
x = enemynear,pos x
y = enemynear,pos y
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = numexplod(6301)
id = 6301

[State 0, explod]
type = explod
trigger1 = roundstate = 2
trigger1 = !time
anim = 6300
id = 6300
postype = p1
pos = ceil(-16*const(size.xscale)),ceil(-80*const(size.yscale))
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = roundstate = 2
trigger1 = !time
anim = 6310
id = 6300
postype = p1
pos = ceil(16*const(size.xscale)),ceil(-55*const(size.yscale))
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = roundstate = 2
trigger1 = !time
anim = 6310
id = 6300
postype = p1
pos = ceil(-12*const(size.xscale)),ceil(-25*const(size.yscale))
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = enemynear,movetype != H || !enemynear,alive
trigger2 = root,stateno = [801,802]
trigger3 = root,var(13)
trigger4 = !numenemy
value = 6301

;------------------------------------------------------------------------------
;火炎エフェクト2
[Statedef 6301]
ctrl = 0
anim = 20000

[State 0, pos]
type = posset
triggerall = numenemy
trigger1 = roundstate = 2
x = enemynear,pos x
y = enemynear,pos y
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = numexplod(6300)
id = 6300

[State 0, explod]
type = explod
trigger1 = roundstate = 2
trigger1 = !time
anim = 6301
id = 6301
postype = p1
pos = ceil(-16*const(size.xscale)),ceil(-80*const(size.yscale))
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = roundstate = 2
trigger1 = !time
anim = 6311
id = 6301
postype = p1
pos = ceil(16*const(size.xscale)),ceil(-55*const(size.yscale))
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = roundstate = 2
trigger1 = !time
anim = 6311
id = 6301
postype = p1
pos = ceil(-12*const(size.xscale)),ceil(-25*const(size.yscale))
bindtime = -1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = numenemy
trigger1 = enemynear,movetype = H && enemynear,alive
trigger1 = root,stateno != [801,802]
trigger1 = !root,var(13)
value = 6300

[State 0, end]
type = DestroySelf
trigger1 = !numexplod(6301)

;==============================================================================
;火炎エフェクト
[Statedef 6305]
ctrl = 0
anim = 20000

[State 0, pos]
type = posset
trigger1 = 1
x = enemynear(root,var(48)),pos x
y = enemynear(root,var(48)),pos y
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = !time
anim = 6075
id = 6075
postype = p1
pos = ceil(0*const(size.xscale)),ceil(-60*const(size.yscale))
vel = -3,-2
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = time = 4
anim = 6076
id = 6075
postype = p1
pos = ceil(-6*const(size.xscale)),ceil(-52*const(size.yscale))
vel = -2.5,1
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = time = 8
anim = 6076
id = 6075
postype = p1
pos = ceil(0*const(size.xscale)),ceil(-60*const(size.yscale))
scale = const(size.xscale),const(size.yscale)
vel = -1,0
sprpriority = 10
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 6076
id = 6075
postype = p1
pos = ceil(20*const(size.xscale)),ceil(-75*const(size.yscale))
scale = const(size.xscale),const(size.yscale)
vel = -2,0
sprpriority = 10
ignorehitpause = 1

[State 0, end]
type = destroyself
trigger1 = time = 12

;==============================================================================
;ファイアウォール演出
[Statedef 11150]
ctrl = 0
anim = 20000

[State 0, pos]
type = posfreeze
trigger1 = parent,var(8) > 0

[State 0, explod]
type = explod
trigger1 = !parent,var(8)
trigger1 = !(time%2)
anim = 6074
postype = p1
scale = const(size.xscale)*1.3,const(size.yscale)
sprpriority = 2

[State 0, vel]
type = velmul
trigger1 = !parent,var(8)
trigger1 = time < 8
x = .88;82

[State 0, vel]
type = velset
trigger1 = !parent,var(0)
trigger1 = time = 1
x = -13
y = ifelse(parent,var(2)=0,-10,ifelse(parent,var(2)=1,-13,-15))

[State 0, vel]
type = velset
trigger1 = parent,var(0)
trigger1 = time = 1
x = ifelse(parent,var(2)=0,-13,ifelse(parent,var(2)=1,-12.8,-12.2))
y = ifelse(parent,var(2)=0,-9,ifelse(parent,var(2)=1,-10.6,-10))

[State 0, end]
type = DestroySelf
trigger1 = parent,var(2)=0 && parent,animelemtime(8) = 0
trigger2 = parent,var(2)=1 && parent,animelemtime(7) = 2
trigger3 = parent,var(2)=2 && parent,animelemtime(7) = 2
trigger4 = root,movetype = H

;------------------------------------------------------------------------------
;ファイアウォール演出2
[Statedef 11151]
ctrl = 0
anim = 20000

[State 0, pos]
type = posfreeze
trigger1 = parent,var(8) > 0

[State 0, explod]
type = explod
trigger1 = !parent,var(8)
trigger1 = !(time%2)
anim = 6074
postype = p1
scale = const(size.xscale)*1.3,const(size.yscale)
sprpriority = -3

[State 0, vel]
type = velmul
trigger1 = !parent,var(8)
trigger1 = time < 8
x = .88;82

[State 0, vel]
type = velset
trigger1 = !parent,var(8)
trigger1 = !parent,var(0)
trigger1 = time = 1
x = 15
y = ifelse(parent,var(2)=0,-10,ifelse(parent,var(2)=1,-13,-15))

[State 0, vel]
type = velset
trigger1 = !parent,var(8)
trigger1 = parent,var(0)
trigger1 = time = 1
x = ifelse(parent,var(2)=0,15,ifelse(parent,var(2)=1,15.2,16))
y = ifelse(parent,var(2)=0,-9,ifelse(parent,var(2)=1,-10.6,-10))

[State 0, end]
type = DestroySelf
trigger1 = parent,var(2)=0 && parent,animelemtime(8) = 0
trigger2 = parent,var(2)=1 && parent,animelemtime(7) = 2
trigger3 = parent,var(2)=2 && parent,animelemtime(7) = 2
trigger4 = root,movetype = H

;==============================================================================
;Sonファイアウォール演出
[Statedef 11160]
ctrl = 0
anim = 20000

[State 0, pos]
type = posfreeze
trigger1 = parent,var(8) > 0

[State 0, explod]
type = explod
trigger1 = !parent,var(8)
trigger1 = !(time%2)
anim = 6074
postype = p1
scale = const(size.xscale)*1.3,const(size.yscale)
sprpriority = 2

[State 0, vel]
type = velmul
trigger1 = !parent,var(8)
trigger1 = parent,animelemtime(7)<=0;time < 8
x = .85;82

[State 0, vel]
type = velset
trigger1 = !parent,var(8)
trigger1 = !parent,var(0)
trigger1 = time = 1
x = -13
y = ifelse(parent,var(2)=0,-10,ifelse(parent,var(2)=1,-13,-13))

[State 0, vel]
type = velset
trigger1 = !parent,var(8)
trigger1 = parent,var(0)
trigger1 = time = 1
x = ifelse(parent,var(2)=0,-13,ifelse(parent,var(2)=1,-12.8,-11))
y = ifelse(parent,var(2)=0,-9,ifelse(parent,var(2)=1,-10.6,-10))

[State 0, end]
type = DestroySelf
trigger1 = parent,var(2)=0 && parent,animelemtime(8) = 2
trigger2 = parent,var(2)=1 && parent,animelemtime(7) = 6
trigger3 = parent,var(2)=2 && parent,animelemtime(7) = 10
trigger4 = root,movetype = H

;------------------------------------------------------------------------------
;Sonファイアウォール演出2
[Statedef 11161]
ctrl = 0
anim = 20000

[State 0, pos]
type = posfreeze
trigger1 = parent,var(8) > 0

[State 0, explod]
type = explod
trigger1 = !parent,var(8)
trigger1 = !(time%2)
anim = 6074
postype = p1
scale = const(size.xscale)*1.3,const(size.yscale)
sprpriority = -3

[State 0, vel]
type = velmul
trigger1 = !parent,var(8)
trigger1 = parent,animelemtime(7)<=0;time < 8
x = .88;82

[State 0, vel]
type = velset
trigger1 = !parent,var(0)
trigger1 = time = 1
x = 13
y = ifelse(parent,var(2)=0,-10,ifelse(parent,var(2)=1,-13,-13))

[State 0, vel]
type = velset
trigger1 = parent,var(0)
trigger1 = time = 1
x = 13;ifelse(parent,var(2)=0,15,ifelse(parent,var(2)=1,15.2,16))
y = ifelse(parent,var(2)=0,-9,ifelse(parent,var(2)=1,-10.6,-10))

[State 0, end]
type = DestroySelf
trigger1 = parent,var(2)=0 && parent,animelemtime(8) = 2
trigger2 = parent,var(2)=1 && parent,animelemtime(7) = 6
trigger3 = parent,var(2)=2 && parent,animelemtime(7) = 10
trigger4 = root,movetype = H

;==============================================================================
;地獄の業火演出
[Statedef 11450]
ctrl = 0
anim = 20000

[State 0, vel]
type = velset
trigger1 = !time
x = 6*const(size.xscale)
y = -5*const(size.yscale)

[State 0, explod]
type = explod
trigger1 = !(time%4)
anim = 6074
postype = p1
scale = const(size.xscale)*1.4,const(size.yscale)*1.4
sprpriority = 5
ownpal = 1

[State 0, end]
type = DestroySelf
trigger1 = time = 20
;------------------------------------------------------------------------------
;地獄の業火演出2
[Statedef 11451]
ctrl = 0
anim = 20000

[State 0, vel]
type = velset
trigger1 = !time
x = 6*const(size.xscale)
y = 5*const(size.yscale)

[State 0, explod]
type = explod
trigger1 = !(time%4)
anim = 6074
postype = p1
scale = const(size.xscale)*1.4,const(size.yscale)*1.4
sprpriority = 5
ownpal = 1

[State 0, end]
type = DestroySelf
trigger1 = time = 20
;------------------------------------------------------------------------------
;地獄の業火演出3
[Statedef 11452]
ctrl = 0
anim = 20000

[State 0, vel]
type = velset
trigger1 = !time
x = -6*const(size.xscale)
y = 5*const(size.yscale)

[State 0, explod]
type = explod
trigger1 = !(time%4)
anim = 6074
postype = p1
scale = const(size.xscale)*1.4,const(size.yscale)*1.4
sprpriority = 5
ownpal = 1

[State 0, end]
type = DestroySelf
trigger1 = time = 20
;------------------------------------------------------------------------------
;地獄の業火演出4
[Statedef 11453]
ctrl = 0
anim = 20000

[State 0, vel]
type = velset
trigger1 = !time
x = -6*const(size.xscale)
y = -5*const(size.yscale)

[State 0, explod]
type = explod
trigger1 = !(time%4)
anim = 6074
postype = p1
scale = const(size.xscale)*1.4,const(size.yscale)*1.4
sprpriority = 5
ownpal = 1

[State 0, end]
type = DestroySelf
trigger1 = time = 20

;===========================================================================
;スパコン背景
[Statedef 7000]
ctrl = 0
anim = 20000

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = time <= 29
flag = NoFG
flag2 = NoBG

[State 0, explod]
type = explod
trigger1 = !time
anim = 7300
id = 7300
pos = 0,0
postype = back
removetime = 30
scale = .84,1.08
sprpriority = -20
pausemovetime = 30
supermovetime = 30

;cut in
[State 0, explod]
type = explod
trigger1 = time = 7
anim = 7000
id = 7000
pos = -20,170
postype = back
removetime = 23
sprpriority = -10
pausemovetime = 23
supermovetime = 23

[State 8000, ModifyExplod-3]
type = ModifyExplod
trigger1 = Numexplod(7000)
Id = 7000
postype = back
pos = ceil(-20+((random%16)*ifelse((time%6=[1,3]),-1,1))),ceil(170+((random%16)*ifelse((time%6=[1,3]),-1,1)))
scale = ifelse(time>=22,2,.2+((time-6)*.125))*.833,ifelse(time>=22,2,.2+((time-6)*.125))*1.07

[State 0, end]
type = DestroySelf
trigger1 = time = 31

;===========================================================================
;オラムダ背景（cut）
[Statedef 4950]
ctrl = 0
anim = 20000

;back
[State 0, assert]
type = assertspecial
trigger1 = time <= 32
flag = NoBG
flag2 = NoFG

;cut in
[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7001
id = 7001
pos = -200,100
postype = back
removetime = -1
scale = .84,1.08
sprpriority = -10
pausemovetime = 120
supermovetime = 120

;cut in
[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7002
id = 7001
pos = -200,100
postype = back
removetime = -1
scale = .84,1.08
sprpriority = -10
pausemovetime = 120
supermovetime = 120

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(7001)
trigger1 = time <= 20
id = 7001
pos = ceil(-200+(time*10)),110
postype = back

[State 0, explod]
type = removeexplod
trigger1 = root,stateno != 4900
id = 7001

[State 0, end]
type = DestroySelf
trigger1 = root,stateno != 4900

;==============================================================================
;メッセージアイコン
[Statedef 7500]
ctrl = 0
anim = 20000

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,var(0)
trigger1 = root,var(1) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = roundstate = 2
trigger1 = time > 1
trigger1 = var(0)
value = 7500+var(0)

;------------------------------------------------------------------------------
;STAND ON
[Statedef 7501]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7500
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7505
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !root,var(0)
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,var(1) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 1
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;------------------------------------------------------------------------------
;DANGER!
[Statedef 7502]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7501
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7506
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,var(1) > 20
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 2
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;------------------------------------------------------------------------------
;STAND CRUSH
[Statedef 7503]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7502
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7507
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 4000
trigger1 = root,stateno != 4100
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
var(0) = 1
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 3
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;FIRST ATTACK
[Statedef 7504]
ctrl = 0
anim = 20000

[State 0, var]
type = varset
trigger1 = !time
var(8) = 2
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7503
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7508
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,var(1) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;------------------------------------------------------------------------------
;GUARD CANCEL
[Statedef 7505]
ctrl = 0
anim = 20000

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7504
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7509
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 700
trigger1 = root,stateno != 10700
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10900
trigger2 = root,stateno = 10910
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,var(1) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 5
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;スタンドゲージ
[Statedef 20032]
ctrl = 0
anim = 20000
ownpal = 1

;config呼び出し
[State 6000, Helper]
type = Helper
trigger1 = time = 1
id = 7525
name = "config"
pos = -300,0
postype = Left
stateno = 7525
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

[State 6000, Explod];ゲージ
type = Explod
trigger1 = !NumExplod(16001)
trigger1 = time >= 2
trigger1 = teamside = 1
anim = 16001
id = 16001
postype = L
pos = 140+var(4),48+var(5)
ownpal = 0
bindtime = -1
ignorehitpause = 1
sprpriority = -102
pausemovetime = -1
supermovetime = -1
facing = 1

[State 6000, Explod];ゲージ
type = Explod
trigger1 = !NumExplod(16001)
trigger1 = time >= 2
trigger1 = teamside = 2
anim = 16051
id = 16001
postype = R
pos = -140+var(4),48+var(5)
ownpal = 0
bindtime = -1
ignorehitpause = 1
sprpriority = -102
pausemovetime = -1
supermovetime = -1
facing = 1

[State 6000, Explod];枠
type = Explod
trigger1 = !NumExplod(16000)
trigger1 = time >= 2
anim = ifelse(teamside=1,16000,16050)
id = 16000
postype = Back
pos = 140+var(4),48+var(5)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -101
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 6000, Explod];STAND
type = Explod
trigger1 = root,var(0)
trigger1 = !NumExplod(6003)
trigger1 = time >= 2
anim = 7510
id = 6003
postype = Back
pos = ifelse(teamside=1,102,137)+var(4),51+var(5)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = -100
facing = ifelse(teamside=1,1,-1)
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 6000, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(16001)
Id = 16001
scale = ifelse(root,var(1)>=80,80.5,root,var(1)),1
ignorehitpause = 1

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 16000

[State 20026, 0]
type = RemoveExplod
trigger1 = win
trigger2 = lose
id = 16001

[state 0, var]
type = varadd
trigger1 = var(1)
var(1) = -1

[state 0, var]
type = varset
trigger1 = fvar(0) - root,var(1) > 0
var(1) = 8

[state 0, var]
type = varset
trigger1 = 1
fvar(0) = root,var(1)

[State 0, pal]
type = palfx
trigger1 = root,var(9) != 2 || (root,var(9) = 2 && !(time%4))
trigger1 = var(1) = 8 || var(1) = 4
trigger2 = root,var(1) <= 20
trigger2 = !var(1) && time%4=0
time = 2
add = 128,-256,-256

[State -3];スタンドの文字を消す
type = removeexplod
trigger1 = parent,var(0) = 0
trigger2 = win
trigger3 = lose
id = 6003

;×
[State 0, explod]
type = explod
trigger1 = root,var(20)
trigger1 = !numexplod(7522)
trigger1 = time > 0
anim = 7522
id = 7522
pos = ifelse(teamside=1,94,210)+var(4),43+var(5)
postype = left
bindtime = -1
scale = .5,.5
sprpriority = -100
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = !root,var(20)
trigger1 = numexplod(7522)
trigger2 = win
trigger3 = lose
id = 7522

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;アドガ用
[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(16) = 0

[State 8500, 1]
type = varset
trigger1 = parent,stateno = 150
trigger2 = parent,stateno = 152
var(16) = parent,GetHitVar(ctrltime)

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(15) = 0

[State 8500, 1]
type = varadd
trigger1 = parent,stateno = 153
var(15) = 1

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(14) = 0

[State 8500, 1]
type = varadd
trigger1 = parent,stateno = 151
var(14) = 1

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(13) = 0

[State 8500, 1]
type = varset
trigger1 = parent,stateno = 150
trigger2 = parent,stateno = 152
var(13) = parent,GetHitVar(hittime)

;===========================================================================
;タンデム背景+エフェクト
[Statedef 8000]
ctrl = 0
anim = 20000
sprpriority = 5

;efe
[State 0, anim]
type = changeanim
trigger1 = time = 2
value = 8000

[State 0, anim]
type = changeanim
trigger1 = root,stateno != 3500
value = 8001
persistent = 0

[State 0, assert]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow

;back
[State 0, assert]
type = assertspecial
trigger1 = time <= (root,fvar(9))-1
flag = NoBG
flag2 = NoFG

[State 0, explod]
type = explod
trigger1 = !time
anim = 7310
id = 7310
pos = 0,0
postype = back
removetime = (root,fvar(9))
scale = .842,1.08
sprpriority = -20
ownpal = 1
pausemovetime = (root,fvar(9))
supermovetime = (root,fvar(9))
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 7000
id = 7000
pos = -200,100
postype = back
removetime = (root,fvar(9))
scale = .84,1.08
;scale = 1,1.08
sprpriority = -10
pausemovetime = (root,fvar(9))
supermovetime = (root,fvar(9))

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(7000)
trigger1 = time <= 10
id = 7000
pos = ceil(-200+(time*20)),110
postype = back

[State 0, end]
type = DestroySelf
trigger1 = anim = 8001 && !animtime

;===========================================================================
;勝利アイコン
[Statedef 9100]
ctrl = 0
anim = 20000

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "config"
stateno = 9105
id = 9105
pausemovetime = 999999
supermovetime = 999999

;「WIN」
[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 1
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9102
pos = -285,80
postype = left
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time <= 20
id = 9102
pos = ceil(-285+(time*15)),80
postype = left

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time >= 81
id = 9102
pos = ceil(15-((time-80)*15)),80
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 2
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9103
pos = 130,80
postype = right
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time <= 20
id = 9103
pos = ceil(130-(time*15)),80
postype = right

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time >= 81
id = 9103
pos = ceil(-170+((time-80)*15)),80
postype = right

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 0,28

;「To Be Continued...」
[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 1
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(11)
trigger2 = root,fvar(11)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9100
id = 9100
pos = 412,210
postype = left
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9100)
trigger1 = time <= 40
id = 9100
pos = ceil(412-((time-20)*20)),210
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 2
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(11)
trigger2 = root,fvar(11)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9101
id = 9101
pos = -412,210
postype = right
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9101)
trigger1 = time <= 40
id = 9101
pos = ceil(-412+((time-20)*20)),210
postype = right

;==============================================================================
;敗北演出
[Statedef 9200]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
removetime = 60
ownpal = 0
scale = 1.176,1.4
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8200
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8205
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8201
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8206
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8202
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8207
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8203
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8208
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;------------------------------------------------------------------------------
;敗北演出2(蜂の巣)
[Statedef 9201]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
fvar(2) = 0
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time > 6
fvar(2) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = 0;-1
ownpal = 0
scale = 1.176,1.4
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;穴
[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9110
pos = 16,17
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9111
pos = 24,117
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110
id = 9112
pos = 9,212
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9113
pos = 40,18
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9114
pos = 43,115
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9115
pos = 22,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9116
pos = 92,4
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9117
pos = 89,127
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9118
pos = 36,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9111
id = 9119
pos = 119,38
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110
id = 9120
pos = 124,100
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 12
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110+var(10)
id = 9121
pos = 88,188
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9111
id = 9122
pos = 133,112
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9110
id = 9123
pos = 131,190
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9124
pos = 191,68
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9125
pos = 171,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 22
anim = 9110
id = 9126
pos = 184,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -14
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 9110
id = 9127
pos = 202,28
postype = back
bindtime = -1
ownpal = 0
sprpriority = -13
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9110)
id = 9110
pos = ceil(16-fvar(2)),17
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9111)
id = 9111
pos = ceil(24-fvar(2)),117
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9112)
id = 9112
pos = ceil(9-fvar(2)),212
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9113)
id = 9113
pos = ceil(40-fvar(2)),18
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9114)
id = 9114
pos = ceil(43-fvar(2)),115
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9115)
id = 9115
pos = ceil(22-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9116)
id = 9116
pos = ceil(92-fvar(2)),4
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9117)
id = 9117
pos = ceil(89-fvar(2)),127
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9118)
id = 9118
pos = ceil(36-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9119)
id = 9119
pos = ceil(119-fvar(2)),38
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9120)
id = 9120
pos = ceil(124-fvar(2)),100
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9121)
id = 9121
pos = ceil(81-fvar(2)),188
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9122)
id = 9122
pos = ceil(133-fvar(2)),112
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9123)
id = 9123
pos = ceil(131-fvar(2)),190
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9124)
id = 9124
pos = ceil(191-fvar(2)),68
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9125)
id = 9125
pos = ceil(171-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9126)
id = 9126
pos = ceil(184-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9127)
id = 9127
pos = ceil(202-fvar(2)),28
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9110

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9111

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9112

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9113

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9114

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9115

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9116

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9117

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9118

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9119

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9120

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9121

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9122

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9123

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9124

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9125

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9126

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9127

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;------------------------------------------------------------------------------
;敗北演出3(血)
[Statedef 9202]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(2) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time >= 6
fvar(2) = fvar(0)
ignorehitpause = 1


;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
ownpal = 0
scale = 1.176,1.4
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;血
[State 0, explod]
type = explod
trigger1 = time = 3
anim = 9150+random%3
id = 9150
pos = 42,9
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 4
anim = 9150+random%3
id = 9151
pos = 18,122
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 5
anim = 9150+random%3
id = 9152
pos = 24,196
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9150+random%3
id = 9153
pos = 180,55
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 7
anim = 9150+random%3
id = 9154
pos = 30,103
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9150+random%3
id = 9155
pos = 68,172
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9150+random%3
id = 9156
pos = 206,44
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 10
anim = 9150+random%3
id = 9157
pos = 49,106
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 11
anim = 9150+random%3
id = 9158
pos = 156,230
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9150+random%3
id = 9159
pos = 130,138
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 13
anim = 9150+random%3
id = 9160
pos = 191,227
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 9150+random%3
id = 9161
pos = 128,115
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9150)
id = 9150
pos = ceil(42-fvar(2)),9
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9151)
id = 9151
pos = ceil(18-fvar(2)),122
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9152)
id = 9152
pos = ceil(24-fvar(2)),196
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9153)
id = 9153
pos = ceil(180-fvar(2)),55
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9154)
id = 9154
pos = ceil(30-fvar(2)),103
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9155)
id = 9155
pos = ceil(68-fvar(2)),172
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9156)
id = 9156
pos = ceil(206-fvar(2)),44
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9157)
id = 9157
pos = ceil(49-fvar(2)),106
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9158)
id = 9158
pos = ceil(156-fvar(2)),230
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9159)
id = 9159
pos = ceil(166-fvar(2)),138
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9160)
id = 9160
pos = ceil(191-fvar(2)),227
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9161)
id = 9161
pos = ceil(128-fvar(2)),115
postype = back
ignorehitpause = 1



[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9150

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9151

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9152

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9153

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9154

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9155

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9156

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9157

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9158

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9159

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9160

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9161

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北時演出（横切断）
[Statedef 9203]
ctrl = 0
anim = 20000
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = .80*root,const(size.yscale)
;fvar(36) = -.55*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;---------------------------------------------------------------------------
;敗北時演出（縦切断）
[Statedef 9204]
ctrl = 0
anim = 20000
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -1.28*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 1.28*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = 3*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;------------------------------------------------------------------------------
;超必殺背景（縦）
[Statedef 9300]
ctrl = 0
anim = 20000

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoBG
flag2 = NoFG

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8210
id = 8210
pos = 0,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8210
id = 8215
pos = 0,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8211
id = 8211
pos = 107,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8211
id = 8216
pos = 107,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8212
id = 8212
pos = 214,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8212
id = 8217
pos = 214,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8213
id = 8213
pos = 320,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8213
id = 8218
pos = 320,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8210)
id = 8210
pos = 0,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8211)
id = 8211
pos = 107,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8212)
id = 8212
pos = 214,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8213)
id = 8213
postype = back
pos = 320,-(time*8)%512
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8215)
id = 8215
pos = 0,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8216)
id = 8216
pos = 107,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8217)
id = 8217
pos = 214,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8218)
id = 8218
pos = 320,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802
id = 8210

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802
id = 8211

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802
id = 8212

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802
id = 8213

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802
id = 8215

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802
id = 8216

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802
id = 8217

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802
id = 8218

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = root,stateno != 3802

;===========================================================================
;タンデムコマンド記憶helper
[Statedef 30000]
type = U
movetype = I
physics = N
ctrl = 0
anim = 20000

[State 0, var]
type = varset
trigger1 = root,var(22) = [1,60]
trigger1 = !var(root,var(22)-1)
var(root,var(22)-1) = root,var(21)

[State 0, var]
type = varset
trigger1 = root,var(22) = [61,100]
trigger1 = !var(root,var(22)-61)
fvar(root,var(22)-1) = root,var(21)

[State 0, var]
type = parentvarset
trigger1 = parent,var(5) = [0,59]
var(4) = var(parent,var(5))

[State 0, var]
type = parentvarset
trigger1 = parent,var(5) = [60,99]
var(4) = fvar(parent,var(5)-60)

[State 0, state]
type = parentvarset
trigger1 = !time
var(38) = -1
[State 0, state]
type = parentvarset
trigger1 = parent,stateno = 3551
var(38) = 0
persistent = 0
[State 0, state]
type = parentvaradd
trigger1 = var(38) >= 0
var(38) = 1

[State 0, end]
type = DestroySelf
triggerall = time > 1
trigger1 = parent,stateno = 10000
trigger2 = root,movetype = H
trigger3 = parent,movetype = H

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 890]
type    = A
movetype= H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040
;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 895]
type    = L
movetype= H
physics = N
anim = 5070
velset = 0,0

[State 5071, 1]
type = VelSet
trigger1 = Time = 0
x = -10

[State 5071, 2]
type = VelMul
trigger1 = 1
x = .88

[State 5071, 1]
type = VelSet
trigger1 = Time = 16
x = 0

[State 5071, 4] ;Hit ground
type = SelfState
trigger1 = Time = 16
value = 5110

;===========================================================================
[Statedef 4900];オラムダ合戦
type = S
movetype = A
physics = N
sprpriority = 0
velset = 0,0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "oramuda back"
stateno = 9301
id = 9301
postype = back
trigger1 = id > enemy,id

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "oramuda cut"
stateno = 4950
id = 4950
postype = back

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

[State 0, end]
type = playsnd
trigger1 = !time
value = 100,22

[State 0, end]
type = playsnd
trigger1 = animelem = 2
value = 100,14
persistent = 0

[State 0, end]
type = changeanim
trigger1 = time < 30
value = anim
elem = animelemno(0)

[State 0, end]
type = changeanim
trigger1 = time = 30
value = 14900

;音
[State 0, snd]
type = playsnd
trigger1 = var(17)
value = 1,8
ignorehitpause = 1
channel = 4

[State 0, end]
type = varset
trigger1 = var(17)
var(17) = 0

[State 0, end]
type = explod
triggerall = anim = 14900
trigger1 = !enemy,numexplod(6004)
trigger1 = !(gametime%5)
pos = ceil(P2BodyDist X*.5),-60
postype = p1
anim = 6004
id = 6004
random = 24,24
sprpriority = 3
pausemovetime = 0
supermovetime = 0

[state 0, helper]
type = helper
triggerall = anim = 14900
trigger1 = animelemtime(4) = 0
helpertype = normal
name = "oramudafire"
stateno = 14950
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
[state 0, helper]
type = helper
triggerall = anim = 14900
trigger1 = animelemtime(5) = 0
helpertype = normal
name = "oramudafire2"
stateno = 14951
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1
[state 0, helper]
type = helper
triggerall = anim = 14900
trigger1 = animelemtime(6) = 0
helpertype = normal
name = "oramudafire3"
stateno = 14952
postype = p1
pos = ceil(22*const(size.xscale)),ceil(-78*const(size.yscale))
ownpal = 1

[State 0, vel]
type = velset
trigger1 = time = 35
y = -.1

[State 0, var]
type = varset
trigger1 = !time
var(49) = 0

[State 0, var]
type = varadd
triggerall = time > 35
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
var(49) = 1

[State 0, change];勝利
type = changestate
trigger1 = time = 250
trigger1 = var(49) > enemy,var(49)
value = 4910

[State 0, change];敗北
type = changestate
trigger1 = time = 250
trigger1 = var(49) < enemy,var(49)
value = 4920

[State 0, change];同じ
type = changestate
trigger1 = time = 250
trigger1 = var(49) = enemy,var(49)
value = 4910
;------------------------------------------------------------------------------
;オラムダ勝利（落下）
[Statedef 4910]
ctrl = 0
anim = 10044
physics = A
type = A

[State 0, end]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;オラムダ敗北（吹っ飛び）
[Statedef 4920]
type = A
movetype = H
physics = N
anim = 5030
velset = -10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
value = 4921

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び（壁激突）
[Statedef 4921]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 10
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 10
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 10
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 10

[State 0, vel]
type = veladd
trigger1 = time > 10
y = .4

[State 5040, 5] ;Recover near ground
type = SelfState
triggerall = time >= 10
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5040, 6]; Recover in mid air
type = SelfState
triggerall = time >= 10
triggerall = Vel Y > -1
triggerall = alive
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;------------------------------------------------------------------------------
;背景（縦）
[Statedef 9301]
ctrl = 0
anim = 20000

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = NoBG
flag2 = NoFG

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8210
id = 8210
pos = 0,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8210
id = 8215
pos = 0,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8211
id = 8211
pos = 107,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8211
id = 8216
pos = 107,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8212
id = 8212
pos = 214,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8212
id = 8217
pos = 214,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8213
id = 8213
pos = 320,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8213
id = 8218
pos = 320,0
postype = back
bindtime = -1
scale = .84,1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8210)
id = 8210
pos = 0,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8211)
id = 8211
pos = 107,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8212)
id = 8212
pos = 214,-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8213)
id = 8213
postype = back
pos = 320,-(time*8)%512
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8215)
id = 8215
pos = 0,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8216)
id = 8216
pos = 107,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8217)
id = 8217
pos = 214,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8218)
id = 8218
pos = 320,512-(time*8)%512
postype = back
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8210

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8211

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8212

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8213

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8215

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8216

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8217

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900
id = 8218

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = root,stateno != 4900

;-------------------------------------------------------------------------
;AI起動用ヘルパー
[Statedef 50000]
anim=20000;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

;----------------------------------------------------------------------------------
; AIフラグセット
;----------------------------------------------------------------------------------
[State 10000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 10000,ﾌﾗｸﾞON]
type=varset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1

;----------------------------------------------------------------------------------
; 当て投げ
;----------------------------------------------------------------------------------
[State -1, 当て投げ分岐]
type = parentvarset
triggerall = roundstate = 2 && root,moveguarded = 2
triggerall = !root,var(36)
triggerall = root,p2bodydist x < 90
triggerall = !root,var(9)
triggerall = root,p2statetype != A
triggerall = random < 200+(!enemynear(root,var(48)),var(59))*50-(root,var(9))*100
trigger1 = root,stateno = 600
trigger2 = root,stateno = 610
trigger3 = root,stateno = 620
trigger4 = root,stateno = 400
trigger5 = root,stateno = 420 && root,prevstateno = 100
trigger6 = root,stateno = 10200
trigger7 = root,stateno = 10400
trigger8 = (root,stateno = [10600,10620])
trigger9 = root,stateno = 10200 && root,prevstateno = 100
var(36) = 20

[State -1, あて投げモード解除]
type = parentvarset
triggerall = root,var(36) = 20
trigger1 = root,p2statetype = A || root,p2statetype = L
trigger2 = root,movetype = H
trigger3 = root,p2bodydist x > 100
trigger4 = (root,stateno = [800,802])
Trigger5 = var(7) >= 42
Trigger5 = root,p2movetype = A
var(36) = 0

;----------------------------------------------------------------------------------
; コンボ分岐
;----------------------------------------------------------------------------------
;Soff始動

[State -1, コンボ分岐];J攻から
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = random < 500+(root,movehit)*300
trigger1 = root,stateno = 600 && root,vel x >= 0
trigger2 = root,stateno = 620 && root,vel x >= 0
var(36) = 1
ignorehitpause = 1

[State -1, コンボ分岐];J攻から6強
type = parentvarset
triggerall = roundstate = 2 && root,movehit = 3 && !root,Ishelper
triggerall = root,var(36) = 1
triggerall = !root,var(39)
triggerall = !root,var(9)
trigger1 = root,pos y > -40 && random < 300
var(36) = 2
ignorehitpause = 1

[State -1, コンボ分岐];屈弱＞中＞デム
type = parentvarset
triggerall = roundstate = 2 && root,movehit = 3 && !root,Ishelper
trigger1 = root,stateno = 210 && root,prevstateno = 400
trigger1 = !root,var(36)
trigger1 = (root,p2bodydist x <= 35)
triggerall = random < 380+(root,life<400)*120+(power/10)
var(36) = 2
ignorehitpause = 1

;
;Soff始動(short)
;

[State -1, コンボ分岐];D強＞地獄
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = !root,var(9)
trigger1 = root,stateno = 220 && root,prevstateno != 100
trigger1 = root,p2bodydist x < 110 && random < 500
trigger2 = root,stateno = 220 && root,prevstateno = 100
trigger2 = root,p2bodydist x < 110 && random < 900
var(36) = 50
ignorehitpause = 1

[State -1, コンボ分岐];off地獄後の追撃
type = parentvarset
trigger1 = numhelper(10000)
trigger1 = helper(10000),anim = 1452
var(36) = 51
ignorehitpause = 1

[State -1, コンボ分岐];offJ攻＞イーグル
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = !root,var(9)
trigger1 = root,stateno = 600 && root,movecontact = 2
trigger1 = random < 600
trigger2 = root,stateno = 620 && root,moveguarded = 2
trigger2 = random < 300
var(36) = 55
ignorehitpause = 1

;----------------------------------------------------------------------------------
;Son始動

[State -1, コンボ分岐];J攻から
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = root,p2statetype != A
triggerall = random < 500+(root,movehit)*350
trigger1 = root,stateno = 10600 && root,vel x >= 0
trigger2 = root,stateno = 10610 && root,vel x >= 0
trigger3 = root,stateno = 10620 && root,vel x >= 0
var(36) = ifelse(root,p2statetype=C,102,ifelse(root,p2bodydist x >= 12,101,100))
ignorehitpause = 1

[State -1, コンボ分岐];距離あれば101
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = root,var(36) = 100
triggerall = !root,var(39)
triggerall = root,p2statetype != A
trigger1 = root,stateno = 52 && root,p2bodydist x > 47
var(36) = 101
ignorehitpause = 1

[State -1, コンボ分岐];J中から補正無しコンへ
type = null;parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = root,p2statetype != A
triggerall = random < 500+(root,movehit)*300
trigger1 = root,stateno = 10600 && root,vel x >= 0
trigger2 = root,stateno = 10610 && root,vel x >= 0
trigger3 = root,stateno = 10620 && root,vel x >= 0
var(36) = 105
ignorehitpause = 1

[State -1, コンボ分岐];弱から
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = root,p2statetype != A
triggerall = random < 700+(root,movehit)*200
triggerall = (root,prevstateno != [100,105])
trigger1 = root,stateno = 10200
var(36) = ifelse(root,p2bodydist x < 25,110,111)
ignorehitpause = 1

[State -1, コンボ分岐];6弱から
type = parentvarset
triggerall = roundstate = 2 && root,movecontact = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = !root,var(39)
triggerall = root,p2statetype != A
triggerall = random < 500+(root,movehit)*350
trigger1 = root,stateno = 10202
var(36) = ifelse(root,p2bodydist x < 25,100,101)
ignorehitpause = 1

;----------------------------------------------------------------------------------
:デム後
[State -1, コンボ分岐];;デム後J攻へ
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(36)
triggerall = (root,var(39) = [10000,10002])
trigger1 = root,stateno = 42; && p2statetype = S
var(36) = 1000
ignorehitpause = 1

;------------------
;対空デム後
[State -1, コンボ分岐]
type = parentvarset
triggerall = root,var(39) = 10005
trigger1 = enemynear(root,var(48)),statetype != A
trigger2 = root,p2bodydist x > 150
trigger3 = root,stateno = 620
var(39) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; 相手クラッシュ
;----------------------------------------------------------------------------------
[State -1, コンボ分岐];デムへ
type = parentvarset
triggerall = roundstate = 2 && !root,Ishelper
triggerall = !root,var(39)
triggerall = !root,var(9)
triggerall = p2statetype != A
triggerall = power >= 1000
triggerall = ((p2stateno = [4000,4100]) || (p2stateno = [6000,6001]) && p2movetype = H) || (p2stateno = 5910)
trigger1 = root,stateno = 210 || root,stateno = 220 || root,stateno = 222 || root,stateno = 410 || root,stateno = 10202 || root,stateno = 10210 || (root,stateno = [10300,10301]) || root,stateno = 10410 || root,stateno = 10310
trigger1 = random < 800
trigger1 = root,p2bodydist x < 120
var(36) = 180


;----------------------------------------------------------------------------------
; off判別
;----------------------------------------------------------------------------------
;遠くでガードしたら
[State -1, コンボ分岐]
type = parentvarset
trigger1 = root,var(0)
trigger1 = (root,stateno = [150,153]) && root,p2bodydist x > 150
trigger1 = random < 20
var(55) = 1
ignorehitpause = 1

[State -1, コンボ分岐]
type = parentvarset
trigger1 = !root,var(0)
trigger2 = root,p2bodydist x < 55
var(55) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; めくり対策
;----------------------------------------------------------------------------------
[state ]
type=posset
trigger1=1
x=root,pos x-30*facing
y=0
[state ]
type=varadd
trigger1=var(57):=0||1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x+30*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x-60*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x+60*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x-90*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist
[state ]
type=posset
trigger1=1
x=root,pos x+90*facing
y=0
[state ]
type=varadd
trigger1=1
var(57)=inguarddist

[state ]
type=turn
trigger1=facing!= root,facing

;----------------------------------------------------------------------------------
; 立ち下段学習
;----------------------------------------------------------------------------------
;学習用
[State -2];地上中段＆空中下段学習用
type = varset
trigger1 = root,stateno = 131||(root,stateno = [152,153])
var(4) = 1
ignorehitpause = 1

[State -2];地上中段＆空中下段学習用
type = varset
trigger1 = root,stateno = 130||(root,stateno = [150,151])
var(4) = -1
ignorehitpause = 1

[State -2];地上＆空中下段中段学習用
type = varset
trigger1 = !((root,stateno = [130,131])||(root,stateno = [150,153]))
trigger1 = root,time >= 2
var(4) = 0
ignorehitpause = 1

[State -2];地上中段学習用
type = varset
trigger1 = var(4)=1
;trigger1 = !var(5)
trigger1 = root,movetype = H
trigger1 = root,stateno >= 200
trigger1 = root,P2Statetype != A
trigger1 = root,P2Movetype = A
var(5) = root,P2Stateno
ignorehitpause = 1

[State -2];地上中段学習用
type = varset
trigger1 = var(4)=-1
trigger1 = var(5)=root,P2stateno
trigger1 = root,movetype = H
trigger1 = root,stateno > 200
trigger1 = root,P2statetype != A
trigger1 = root,P2movetype = A
var(5) = 0
ignorehitpause = 1

[State -2];立ち下段学習用
type = varset
trigger1 = var(4)=-1
trigger1 = !var(6)
trigger1 = root,movetype = H
trigger1 = root,stateno >= 200
trigger1 = root,P2Statetype = S
trigger1 = root,P2Movetype = A
var(6) = root,P2Stateno
ignorehitpause = 1

[State -2];立ち下段学習用
type = varset
trigger1 = var(4)=1
trigger1 = var(6)=root,P2Stateno
trigger1 = root,movetype = H
trigger1 = root,stateno > 200
trigger1 = root,P2Statetype = S
trigger1 = root,P2Movetype = A
var(6) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; 暗転計測
;----------------------------------------------------------------------------------
[State -1]
type = VarSet
trigger1 = root,var(59) > 0
trigger1 = enemynear(root,var(48)),time = 1
v = 7
value = 0
[State -1]
type = VarAdd
trigger1 = root,var(59)
v = 7
value = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; ガードしている時間の計測(ガーキャン条件用)
;----------------------------------------------------------------------------------
[State -1]
type = Varadd
trigger1 = root,var(59)
trigger1 = (root,stateno = [150,153]) || root,stateno = 710
var(8) = 1
ignorehitpause = 1
[State -1]
type = Varset
trigger1 = root,stateno != [150,153]
trigger1 = root,stateno != 710
var(8) = 0
ignorehitpause = 1

;===========================================================================
; ヘルパー式射撃感知
;===========================================================================
[Statedef 51000]
anim=20000;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[state 51000]	;ID初期値設定開始
type = varset
trigger1 = var(0) = 0
trigger1 = var(1) = 0
v = 1
value = 70+root,RoundsExisted*200

[state 30000]	;定期更新用ヘルパー射出
type=helper
trigger1 = NumHelper(51010)=0 && ishelper
trigger1 = roundstate<=2 && root,alive
helpertype=normal
name="Clear"
stateno=51010
ID=51010
pos=0,0
pausemovetime=2147483647
supermovetime=2147483647
persistent = 999

[state 30000]	;常駐ヘルパーの除外
type = varadd
trigger1 = var(0) = 0
trigger1 = var(1) > 0
trigger1 = !playerIDexist(var(1))
v = 1
value = -1

[state 30000]	;ID初期値確定フラグ
type = varadd
trigger1 = var(0) = 0
trigger1 = playerIDexist(var(1))
trigger1 = var(0):= 1
v = 1
value = 1

------------------------------ loop start -----------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

--------------------------------- loop --------------------------------------

[state 30000]	;ID登録(var(3)～var(22))
type = varset
trigger1 = var(0)=1
trigger1 = var(2)<20
trigger1 = playerIDexist(var(1))
v = 3+var(2)
value = var(1)

[state 30000]	;ID量把握
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 2
value = 1

[state 30000]	;許容値以上で最初へ
type = varset
trigger1 = var(0)=1
trigger1 = var(2)>=20
v = 2
value = 0

[state 30000]	;次のIDへ
type = varadd
trigger1 = var(0)=1
trigger1 = playerIDexist(var(1))
v = 1
value = 1

------------------------------- loop end ------------------------------------

[statedef 51010]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 20000

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[state 30000]
type = assertspecial
trigger1 = 1
flag = invisible
flag2 = noshadow

[state 30000]
type = Nothitby
trigger1 = 1
value = SCA

[state 30000]	;ID初期値設定開始
type = varset
trigger1 = var(30) = 0
trigger1 = var(31) = 0
v = 31
value = parent,var(1)+120+(parent,var(1)=58)*1000

[state 30000]	;既存ヘルパーの除外
type = varadd
trigger1 = var(30) = 0
trigger1 = var(31) > 0
trigger1 = !playerIDexist(var(31))
v = 31
value = -1

[state 30000]	;ID初期値確定フラグ
type = varadd
trigger1 = var(30) = 0
trigger1 = playerIDexist(var(31))
trigger1 = var(30):= 1
v = 31
value = 1

[state 30000]	;フィードバック
type = parentvarset
trigger1 = var(30) = 1
trigger1 = parent,var(1)<var(31)
v = 1
value = var(31)

[state 30000]	;消滅
type = destroyself
trigger1 = var(30) = 1

;Alternate language victory quotes (optional).
;0 or more alternate language sections may be added, preceded by the
;ISO 639-1 code followed by a ".", e.g. "[ja.Quotes]".
;See language setting in mugen.cfg.
[ja.Quotes]
victory1 = "炎を自在にあつかえるからこそ\n『 魔術師の赤 』と呼ばれている"
victory2 = "相当うぬぼれがすぎないか？"
victory3 = "わたしに予言でたたかおうなどとは\n１０年早い！"
victory4 = "私の炎は自在といっただろう"
victory5 = "炎に焼かれて死ぬのは苦しかろう"
victory6 = "焼き尽くしてやるっ！\n『 魔術師の赤 』( マジシャンズレッド )"
victory7 = "占い師の私に予言で戦おうなどとは\n１０年は早いんじゃあないかな"
victory8 = "地獄を！きさまに！　ＨＥＬＬ　２Ｕ！"
;victory8 = "自分のスタンド能力にやられたのは\nおまえのほうだったな！"
